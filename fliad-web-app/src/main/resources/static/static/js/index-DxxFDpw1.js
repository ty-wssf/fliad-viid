import{_ as e}from"./index-r8v7tfQO.js";import{t as a}from"./index-DcffTgQN.js";import{_ as t,s as l}from"./form-DiEDin4r.js";import{b as d}from"./ant-design-vendor-CRFwT3Wn.js";import{d as o,f as n,a1 as s,U as r,V as i,k as u,a2 as c,u as p,G as f,Z as h,a6 as m,F as _,W as k,a3 as v,Y as y}from"./vue-vendor-BzDj5Url.js";import"./index-yhO5Pkur.js";import"./index-D6xghLx3.js";import"./formRules-B2bzcXv4.js";import"./subForm-BJhr5bpC.js";const w=["onClick"],x=o({name:"slideshow"}),C=Object.assign(x,{setup(o){const x=n({}),C=n(),S=n(),g=n(),b=n(!1),I={refresh:!0,height:!0,columnSetting:!0,striped:!1},E=[{title:"标题",dataIndex:"title"},{title:"图片",dataIndex:"image"},{title:"展示位置",dataIndex:"place"},{title:"状态",dataIndex:"status"},{title:"排序",dataIndex:"sortCode",sorter:!0},{title:"操作",dataIndex:"action",align:"center",width:"150px"}],O=[{title:"位置",dataIndex:"label",width:"200px"},{title:"点击事件",dataIndex:"whetherToClick"},{title:"跳转方式",dataIndex:"skipMode"},{title:"URL",dataIndex:"url"}],T=n([]),D={alert:{show:!1,clear:()=>{T.value=n([])}},rowSelection:{onChange:(e,a)=>{T.value=e}}},L=e=>{const a=d(x.value);return l.devSlideshowPage(Object.assign(e,a)).then(e=>e)},R=()=>{C.value.resetFields(),S.value.refresh(!0)},j=e=>{l.devSlideshowDelete(e).then(()=>{S.value.clearRefreshSelected()})},A=a.dictList("DEV_SLIDESHOW_PLACE"),H=a.dictList("DEV_SLIDESHOW_STATUS");return(a,d)=>{const o=s("a-input"),n=s("a-form-item"),N=s("a-col"),U=s("a-select"),B=s("a-button"),W=s("a-row"),K=s("a-form"),P=s("a-tag"),F=s("a-table"),M=s("plus-outlined"),V=e,$=s("a-space"),z=s("a-image"),J=s("a-switch"),G=s("a-divider"),Y=s("a-popconfirm"),Z=s("s-table"),q=s("a-card");return i(),r(_,null,[u(q,{bordered:!1},{default:c(()=>[u(K,{ref_key:"searchFormRef",ref:C,name:"advanced_search",model:p(x),class:"ant-advanced-search-form"},{default:c(()=>[u(W,{gutter:24},{default:c(()=>[u(N,{span:6},{default:c(()=>[u(n,{label:"标题",name:"title"},{default:c(()=>[u(o,{value:p(x).title,"onUpdate:value":d[0]||(d[0]=e=>p(x).title=e),placeholder:"请输入标题"},null,8,["value"])]),_:1})]),_:1}),u(N,{span:6},{default:c(()=>[u(n,{label:"展示位置",name:"place"},{default:c(()=>[u(U,{value:p(x).place,"onUpdate:value":d[1]||(d[1]=e=>p(x).place=e),placeholder:"请选择展示位置",options:p(A)},null,8,["value","options"])]),_:1})]),_:1}),u(N,{span:6},{default:c(()=>[u(n,{label:"状态",name:"status"},{default:c(()=>[u(U,{value:p(x).status,"onUpdate:value":d[2]||(d[2]=e=>p(x).status=e),placeholder:"请选择状态",options:p(H)},null,8,["value","options"])]),_:1})]),_:1}),u(N,{span:6},{default:c(()=>[u(B,{type:"primary",onClick:d[3]||(d[3]=e=>p(S).refresh(!0))},{default:c(()=>d[6]||(d[6]=[f("查询")])),_:1}),u(B,{style:{margin:"0 8px"},onClick:R},{default:c(()=>d[7]||(d[7]=[f("重置")])),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),u(Z,{ref_key:"tableRef",ref:S,columns:E,data:L,alert:D.alert.show,bordered:"","row-key":e=>e.id,"tool-config":I,"row-selection":D.rowSelection},{expandColumnTitle:c(()=>d[8]||(d[8]=[y("span",null,"更多",-1)])),expandedRowRender:c(({record:e})=>[u(F,{size:"middle",dataSource:JSON.parse(e.pathDetails),columns:O,pagination:!1,bordered:""},{bodyCell:c(({column:e,record:t})=>["whetherToClick"===e.dataIndex?(i(),r(_,{key:0},["ENABLE"===t.whetherToClick?(i(),m(P,{key:0,color:"blue"},{default:c(()=>[f(v(a.$TOOL.dictTypeData("WHETHER_TO_CLICK",t.whetherToClick)),1)]),_:2},1024)):h("",!0),"DISABLE"===t.whetherToClick?(i(),m(P,{key:1,color:"red"},{default:c(()=>[f(v(a.$TOOL.dictTypeData("WHETHER_TO_CLICK",t.whetherToClick)),1)]),_:2},1024)):h("",!0)],64)):h("",!0),"skipMode"===e.dataIndex?(i(),r(_,{key:1},[f(v(a.$TOOL.dictTypeData("SKIP_MODE",t.skipMode)),1)],64)):h("",!0)]),_:2},1032,["dataSource"])]),operator:c(()=>[u($,null,{default:c(()=>[u(B,{type:"primary",onClick:d[4]||(d[4]=e=>p(g).onOpen())},{icon:c(()=>[u(M)]),default:c(()=>[d[9]||(d[9]=f(" 新增 "))]),_:1}),u(V,{buttonName:"批量删除",icon:"DeleteOutlined",buttonDanger:"",selectedRowKeys:p(T),onBatchCallBack:j},null,8,["selectedRowKeys"])]),_:1})]),bodyCell:c(({column:e,record:t})=>["place"===e.dataIndex?(i(!0),r(_,{key:0},k(JSON.parse(t.place),e=>(i(),m(P,{key:e,color:"green"},{default:c(()=>[f(v(a.$TOOL.dictTypeData("DEV_SLIDESHOW_PLACE",e)),1)]),_:2},1024))),128)):h("",!0),"image"===e.dataIndex?(i(),m(z,{key:1,src:t.image,style:{width:"50px",height:"30px"}},null,8,["src"])):h("",!0),"status"===e.dataIndex?(i(),r(_,{key:2},[a.hasPerm("bizNoticerUpdateStatus")?(i(),m(J,{key:0,loading:p(b),checked:"ENABLE"===t.status,onChange:e=>(e=>{b.value=!0,"ENABLE"===e.status?l.devSlideshowDisableStatus(e).then(()=>{S.value.refresh()}).finally(()=>{b.value=!1}):l.devSlideshowEnableStatus(e).then(()=>{S.value.refresh()}).finally(()=>{b.value=!1})})(t)},null,8,["loading","checked","onChange"])):h("",!0)],64)):h("",!0),"action"===e.dataIndex?(i(),m($,{key:3},{default:c(()=>[y("a",{onClick:e=>p(g).onOpen(t)},"编辑",8,w),u(G,{type:"vertical"}),u(Y,{title:"确定要删除吗？",onConfirm:e=>(e=>{let a=[{id:e.id}];l.devSlideshowDelete(a).then(()=>{S.value.refresh()})})(t)},{default:c(()=>[u(B,{type:"link",danger:"",size:"small"},{default:c(()=>d[10]||(d[10]=[f("删除")])),_:1})]),_:2},1032,["onConfirm"])]),_:2},1024)):h("",!0)]),_:1},8,["alert","row-key","row-selection"])]),_:1}),u(t,{ref_key:"formRef",ref:g,onSuccessful:d[5]||(d[5]=e=>p(S).refresh())},null,512)],64)}}});export{C as default};
