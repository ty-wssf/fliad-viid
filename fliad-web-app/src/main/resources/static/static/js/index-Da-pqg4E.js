import{_ as e}from"./index-r8v7tfQO.js";import{d as a}from"./downloadUtil-80YX7TDG.js";import t from"./steps-DLNBVP2G.js";import l from"./preview-BNsHstz7.js";import{g as i}from"./genBasicApi-QBDGPEOc.js";import{k as n}from"./ant-design-vendor-CRFwT3Wn.js";import{d as s,f as o,a1 as r,U as d,V as c,a6 as p,k as u,u as f,a2 as m,Z as b,F as y,G as x,a3 as v,Y as g,n as k}from"./vue-vendor-BzDj5Url.js";import"./basic-RMlr3ZGL.js";import"./formRules-B2bzcXv4.js";import"./index-DcffTgQN.js";import"./config-DpE8zAc2.js";import"./index-yhO5Pkur.js";import"./index-Dj7V4so4.js";const h=["onClick"],w=["onClick"],j=s({name:"genIndex"}),C=Object.assign(j,{setup(s){const j=o(),C=o(!0),I=o(),_=o(),P=[{title:"业务名",dataIndex:"busName",ellipsis:!0},{title:"功能名",dataIndex:"functionName",ellipsis:!0},{title:"类名",dataIndex:"className",ellipsis:!0},{title:"包名",dataIndex:"packageName",ellipsis:!0},{title:"作者",dataIndex:"authorName",ellipsis:!0},{title:"移除表前缀",dataIndex:"tablePrefix",ellipsis:!0},{title:"生成方式",dataIndex:"generateType",ellipsis:!0},{title:"操作",dataIndex:"action",align:"center",width:"220px"}],R=e=>i.basicPage(e).then(e=>e);let N=o([]);const D={alert:{show:!1,clear:()=>{N=o([])}},rowSelection:{onChange:(e,a)=>{N.value=e}}},O=e=>[{label:"压缩包",value:"ZIP"},{label:"项目内",value:"PRO"}].find(a=>a.value===e).label,S=e=>{i.basicDelete(e).then(()=>{j.value.refresh()})},z=e=>{C.value=!1,k(()=>{I.value.configSteps(e)})};return(s,o)=>{const k=r("plus-outlined"),B=r("a-button"),T=e,G=r("a-space"),E=r("a-divider"),K=r("a-popconfirm"),U=r("s-table"),Y=r("a-card");return c(),d(y,null,[f(C)?(c(),p(Y,{key:0,bordered:!1},{default:m(()=>[u(U,{ref_key:"tableRef",ref:j,columns:P,data:R,"expand-row-by-click":!0,alert:D.alert.show,bordered:"","row-key":e=>e.id,"row-selection":D.rowSelection,toolConfig:{refresh:!0,height:!0,columnSetting:!0,striped:!1}},{operator:m(()=>[u(G,null,{default:m(()=>[u(B,{type:"primary",onClick:o[0]||(o[0]=e=>z())},{icon:m(()=>[u(k)]),default:m(()=>[o[3]||(o[3]=x(" 新建 "))]),_:1}),u(T,{buttonName:"批量删除",icon:"DeleteOutlined",buttonDanger:"",selectedRowKeys:f(N),onBatchCallBack:S},null,8,["selectedRowKeys"])]),_:1})]),bodyCell:m(({column:e,record:t})=>{return["tablePrefix"===e.dataIndex?(c(),d(y,{key:0},[x(v((l=t.tablePrefix,[{label:"移除",value:"Y"},{label:"不移除",value:"N"}].find(e=>e.value===l).label)),1)],64)):b("",!0),"generateType"===e.dataIndex?(c(),d(y,{key:1},[x(v(O(t.generateType)),1)],64)):b("",!0),"action"===e.dataIndex?(c(),d(y,{key:2},[g("a",{onClick:e=>f(_).onOpen(t)},"预览",8,h),u(E,{type:"vertical"}),u(K,{title:"确定生成代码？",onConfirm:e=>(e=>{const t={id:e.id};"PRO"===e.generateType?i.basicExecGenPro(t).then(()=>{n.success("操作成功"),j.value.refresh()}):i.basicExecGenBiz(t).then(e=>{a.resultDownload(e)})})(t)},{default:m(()=>[u(B,{type:"link",size:"small"},{default:m(()=>o[4]||(o[4]=[x("生成")])),_:1})]),_:2},1032,["onConfirm"]),u(E,{type:"vertical"}),g("a",{onClick:e=>z(t)},"配置",8,w),u(E,{type:"vertical"}),u(K,{title:"删除此信息？",placement:"topRight",onConfirm:e=>(e=>{let a=[{id:e.id}];i.basicDelete(a).then(()=>{j.value.refresh()})})(t)},{default:m(()=>[u(B,{type:"link",danger:"",size:"small"},{default:m(()=>o[5]||(o[5]=[x("删除")])),_:1})]),_:2},1032,["onConfirm"])],64)):b("",!0)];var l}),_:1},8,["alert","row-key","row-selection"])]),_:1})):(c(),p(t,{key:1,ref_key:"stepsRef",ref:I,onSuccessful:o[1]||(o[1]=e=>f(j).refresh(!0)),onClosed:o[2]||(o[2]=e=>{C.value=!0})},null,512)),u(l,{ref_key:"genPreviewRef",ref:_},null,512)],64)}}});export{C as default};
