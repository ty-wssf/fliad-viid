import{r as _}from"./formRules-B2bzcXv4.js";import{c as e}from"./configApi-BMiyCPj3.js";import{t as O}from"./index-DcffTgQN.js";import{k as S,Q as a,b as l}from"./ant-design-vendor-CRFwT3Wn.js";import{d as L,f as N,a1 as A,a6 as E,V as T,a2 as F,k as t,u as n,Z as I,G as U}from"./vue-vendor-BzDj5Url.js";const o=L({name:"cForm"}),Y=Object.assign(o,{setup(L){const o=N(),Y=N({}),d=N(!1),R=N(!0),u=O.dictList("NO_USER_STRATEGY"),c=N(!1),W=N(!1);e.configList({category:"LOGIN_STRATEGY_FOR_C"}).then(_=>{R.value=!1,_?(_.forEach(_=>{Y.value[_.configKey]=i(_.configValue)}),r()):S.warning("表单项不存在，请初始化数据库")});const i=_=>"true"===_||"false"===_?"true"===_:_,r=()=>{e.configList({category:"REGISTER_STRATEGY_FOR_C"}).then(_=>{const e=_.find(_=>{if("SNOWY_SYS_DEFAULT_ALLOW_REGISTER_FLAG_FOR_C"===_.configKey)return _});if(!e)return;"true"!==e.configValue&&(c.value=!0,W.value=!0,Y.value.SNOWY_SYS_DEFAULT_STRATEGY_WHEN_NO_USER_WITH_PHONE_FOR_C="NOT_ALLOW_LOGIN",Y.value.SNOWY_SYS_DEFAULT_STRATEGY_WHEN_NO_USER_WITH_EMAIL_FOR_C="NOT_ALLOW_LOGIN")})},s={SNOWY_SYS_DEFAULT_CONTINUOUS_LOGIN_FAIL_DURATION_FOR_C:[_("请输入连续登录失败持续时间")],SNOWY_SYS_DEFAULT_CONTINUOUS_LOGIN_FAIL_TIMES_FOR_C:[_("请输入连续登录失败次数")],SNOWY_SYS_DEFAULT_CONTINUOUS_LOGIN_FAIL_LOCK_DURATION_FOR_C:[_("请输入连续登录失败锁定时间")],SNOWY_SYS_DEFAULT_ALLOW_PHONE_LOGIN_FLAG_FOR_C:[_("请选择是否允许手机号登录")],SNOWY_SYS_DEFAULT_STRATEGY_WHEN_NO_USER_WITH_PHONE_FOR_C:[_("请选择手机号无对应用户时策略")],SNOWY_SYS_DEFAULT_ALLOW_EMAIL_LOGIN_FLAG_FOR_C:[_("请选择是否允许邮箱登录")],SNOWY_SYS_DEFAULT_STRATEGY_WHEN_NO_USER_WITH_EMAIL_FOR_C:[_("请选择邮箱无对应用户时策略")]},C={span:4},G={span:12};return(_,O)=>{const S=A("a-input-number"),L=A("a-form-item"),N=A("a-switch"),i=A("a-tooltip"),r=A("a-radio-group"),f=A("a-button"),p=A("a-form"),D=A("a-spin");return T(),E(D,{spinning:n(R)},{default:F(()=>[t(p,{ref_key:"formRef",ref:o,model:n(Y),rules:s,layout:"vertical","label-col":{...C,offset:0},"wrapper-col":{...G,offset:0}},{default:F(()=>[t(L,{label:"连续登录失败持续时间：",name:"SNOWY_SYS_DEFAULT_CONTINUOUS_LOGIN_FAIL_DURATION_FOR_C"},{default:F(()=>[t(S,{value:n(Y).SNOWY_SYS_DEFAULT_CONTINUOUS_LOGIN_FAIL_DURATION_FOR_C,"onUpdate:value":O[0]||(O[0]=_=>n(Y).SNOWY_SYS_DEFAULT_CONTINUOUS_LOGIN_FAIL_DURATION_FOR_C=_),placeholder:"分钟",style:{width:"50%"}},{addonAfter:F(()=>O[9]||(O[9]=[U(" 分钟 ")])),_:1},8,["value"])]),_:1}),t(L,{label:"连续登录失败次数：",name:"SNOWY_SYS_DEFAULT_CONTINUOUS_LOGIN_FAIL_TIMES_FOR_C"},{default:F(()=>[t(S,{value:n(Y).SNOWY_SYS_DEFAULT_CONTINUOUS_LOGIN_FAIL_TIMES_FOR_C,"onUpdate:value":O[1]||(O[1]=_=>n(Y).SNOWY_SYS_DEFAULT_CONTINUOUS_LOGIN_FAIL_TIMES_FOR_C=_),placeholder:"分钟",style:{width:"50%"}},{addonAfter:F(()=>O[10]||(O[10]=[U(" 次 ")])),_:1},8,["value"])]),_:1}),t(L,{label:"连续登录失败锁定时间：",name:"SNOWY_SYS_DEFAULT_CONTINUOUS_LOGIN_FAIL_LOCK_DURATION_FOR_C"},{default:F(()=>[t(S,{value:n(Y).SNOWY_SYS_DEFAULT_CONTINUOUS_LOGIN_FAIL_LOCK_DURATION_FOR_C,"onUpdate:value":O[2]||(O[2]=_=>n(Y).SNOWY_SYS_DEFAULT_CONTINUOUS_LOGIN_FAIL_LOCK_DURATION_FOR_C=_),placeholder:"分钟",style:{width:"50%"}},{addonAfter:F(()=>O[11]||(O[11]=[U(" 分钟 ")])),_:1},8,["value"])]),_:1}),t(L,{label:"是否允许手机号登录：",name:"SNOWY_SYS_DEFAULT_ALLOW_PHONE_LOGIN_FLAG_FOR_C"},{default:F(()=>[t(N,{checked:n(Y).SNOWY_SYS_DEFAULT_ALLOW_PHONE_LOGIN_FLAG_FOR_C,"onUpdate:checked":O[3]||(O[3]=_=>n(Y).SNOWY_SYS_DEFAULT_ALLOW_PHONE_LOGIN_FLAG_FOR_C=_),"checked-children":"是","un-checked-children":"否",placeholder:"请选择是否允许手机号登录"},null,8,["checked"])]),_:1}),n(Y).SNOWY_SYS_DEFAULT_ALLOW_PHONE_LOGIN_FLAG_FOR_C?(T(),E(L,{key:0,name:"SNOWY_SYS_DEFAULT_STRATEGY_WHEN_NO_USER_WITH_PHONE_FOR_C"},{label:F(()=>[t(i,null,{title:F(()=>O[12]||(O[12]=[U("是否能配置自动创建用户，取决于注册策略是否开启注册")])),default:F(()=>[t(n(a)),O[13]||(O[13]=U(" 手机号无对应用户时策略： "))]),_:1})]),default:F(()=>[t(r,{value:n(Y).SNOWY_SYS_DEFAULT_STRATEGY_WHEN_NO_USER_WITH_PHONE_FOR_C,"onUpdate:value":O[4]||(O[4]=_=>n(Y).SNOWY_SYS_DEFAULT_STRATEGY_WHEN_NO_USER_WITH_PHONE_FOR_C=_),options:n(u),disabled:n(c),placeholder:"请选择手机号无对应用户时策略"},null,8,["value","options","disabled"])]),_:1})):I("",!0),t(L,{label:"是否允许邮箱登录：",name:"SNOWY_SYS_DEFAULT_ALLOW_EMAIL_LOGIN_FLAG_FOR_C"},{default:F(()=>[t(N,{checked:n(Y).SNOWY_SYS_DEFAULT_ALLOW_EMAIL_LOGIN_FLAG_FOR_C,"onUpdate:checked":O[5]||(O[5]=_=>n(Y).SNOWY_SYS_DEFAULT_ALLOW_EMAIL_LOGIN_FLAG_FOR_C=_),"checked-children":"是","un-checked-children":"否",placeholder:"请选择是否允许邮箱登录"},null,8,["checked"])]),_:1}),n(Y).SNOWY_SYS_DEFAULT_ALLOW_EMAIL_LOGIN_FLAG_FOR_C?(T(),E(L,{key:1,name:"SNOWY_SYS_DEFAULT_STRATEGY_WHEN_NO_USER_WITH_EMAIL_FOR_C"},{label:F(()=>[t(i,null,{title:F(()=>O[14]||(O[14]=[U("是否能配置自动创建用户，取决于注册策略是否开启注册")])),default:F(()=>[t(n(a)),O[15]||(O[15]=U(" 邮箱无对应用户时策略： "))]),_:1})]),default:F(()=>[t(r,{value:n(Y).SNOWY_SYS_DEFAULT_STRATEGY_WHEN_NO_USER_WITH_EMAIL_FOR_C,"onUpdate:value":O[6]||(O[6]=_=>n(Y).SNOWY_SYS_DEFAULT_STRATEGY_WHEN_NO_USER_WITH_EMAIL_FOR_C=_),options:n(u),disabled:n(W),placeholder:"请选择邮箱无对应用户时策略"},null,8,["value","options","disabled"])]),_:1})):I("",!0),t(L,null,{default:F(()=>[t(f,{type:"primary",loading:n(d),onClick:O[7]||(O[7]=_=>{o.value.validate().then(()=>{d.value=!0;let _=l(Y.value);const O=Object.entries(_).map(_=>({configKey:_[0],configValue:_[1]}));e.configEditForm(O).then(()=>{}).finally(()=>{d.value=!1})}).catch(()=>{})})},{default:F(()=>O[16]||(O[16]=[U("保存")])),_:1},8,["loading"]),t(f,{class:"xn-ml10",onClick:O[8]||(O[8]=()=>n(o).resetFields())},{default:F(()=>O[17]||(O[17]=[U("重置")])),_:1})]),_:1})]),_:1},8,["model","label-col","wrapper-col"])]),_:1},8,["spinning"])}}});export{Y as default};
