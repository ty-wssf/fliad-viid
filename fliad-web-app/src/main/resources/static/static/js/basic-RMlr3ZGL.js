import{r as e}from"./formRules-B2bzcXv4.js";import{g as a}from"./genBasicApi-QBDGPEOc.js";import{_ as l}from"./index-DcffTgQN.js";import{d as u,f as t,a1 as o,a6 as n,V as d,a2 as r,k as s,u as i,G as m}from"./vue-vendor-BzDj5Url.js";import"./ant-design-vendor-CRFwT3Wn.js";const p=u({name:"genBasic"}),v=l(Object.assign(p,{setup(l,{expose:u}){const p=t(),v=t({}),c=t([]),b=t([]),f=t([]),h=t([]),_=t(!1),N=t(),g=t([{label:"压缩包",value:"ZIP"},{label:"项目内",value:"PRO"}]),w=t([{label:"移除",value:"Y"},{label:"不移除",value:"N"}]),T=t([{label:"垂直",value:"vertical"},{label:"水平",value:"horizontal"}]),y=t([{label:"栅格布局",value:"Y"},{label:"不使用",value:"N"}]),x={pluginName:[e("请输入插件名")],moduleName:[e("请输入模块名")],tablePrefix:[e("请选择是否移除表前缀")],dbTable:[e("请选择主表")],dbTableKey:[e("请选择主表主键")],generateType:[e("请选择生成方式")],module:[e("请选择所属模块")],menuPid:[e("请选择上级目录")],functionName:[e("请输入功能名")],busName:[e("请输入业务名")],className:[e("请输入类名")],packageName:[e("请输入包名")],sortCode:[e("请选择排序")],formLayout:[e("请选择表单布局")],gridWhether:[e("请选择是否使用栅格")],authorName:[e("请输入作者名")]},U=(e,l)=>{l||(v.value.menuPid=void 0),h.value=[{id:"0",title:"顶级",menuType:"CATALOG",children:[]}];const u={module:e};a.basicMenuTreeSelector(u).then(e=>{e&&(h.value[0].children=C(e))})},C=(e=[])=>{const a=e=>{e.forEach(e=>{"CATALOG"===e.menuType?e.children&&a(e.children):(e.disabled=!0,e.selectable=!1)})};return a(e),e},P=(e,l)=>{l||(v.value.dbTableKey=void 0,L(e));const u={tableName:e};a.basicTableColumns(u).then(e=>{f.value=e.map(e=>({value:e.columnName,label:e.columnRemark||e.columnName}))})},k=()=>{const e=v.value.dbTable;if(e){const a=j(e);v.value.busName=a.toLowerCase()}},L=e=>{const a=b.value.find(a=>a.value===e);v.value.functionName=a.tableRemark;const l=j(a.value);v.value.busName=l.toLowerCase(),v.value.className=R(a.value)},j=e=>{if(e){const a=e.toLowerCase().split("_");"Y"===v.value.tablePrefix&&a.splice(0,1);for(let e=0;e<a.length;e++)a[e]=a[e].charAt(0).toUpperCase()+a[e].slice(1);return a.join("")}return""},R=e=>{if(e){const a=e.toLowerCase().split("_");for(let e=0;e<a.length;e++)a[e]=a[e].charAt(0).toUpperCase()+a[e].slice(1);return a.join("")}return""};return u({onOpen:e=>{a.basicModuleSelector().then(e=>{e&&(N.value=e.map(e=>({label:e.name,value:e.id})))}),a.basicTables().then(l=>{if(b.value=l.map(e=>({value:e.tableName,label:`${e.tableRemark}-${e.tableName}`,tableRemark:e.tableRemark||e.tableName,tableColumns:[]})),e){const l={id:e.id};_.value=!0,a.basicDetail(l).then(e=>{v.value=e,P(e.dbTable,!0),U(e.module,!0)}).finally(()=>{_.value=!1})}else v.value={pluginName:"fliad-plugin-biz",packageName:"com.fliad",moduleName:"biz",sortCode:99,tablePrefix:"Y",generateType:"ZIP",formLayout:"vertical",gridWhether:"N"}}),_.value=!0,a.basicMobileModuleSelector().then(e=>{c.value=e.map(e=>({value:e.id,label:e.name}))}).finally(()=>{_.value=!1})},onSubmit:()=>new Promise((e,l)=>{p.value.validate().then(()=>{_.value=!0,a.submitForm(v.value,v.value.id).then(a=>{e(a)}).finally(()=>{_.value=!1})}).catch(e=>{l(e)})})}),(e,a)=>{const l=o("a-select"),u=o("a-form-item"),t=o("a-col"),_=o("a-radio-group"),C=o("question-circle-outlined"),L=o("a-tooltip"),j=o("a-tree-select"),R=o("a-input"),A=o("a-input-number"),M=o("a-row"),S=o("a-form"),K=o("a-card");return d(),n(K,{bordered:!1},{default:r(()=>[s(S,{ref_key:"formRef",ref:p,model:i(v),rules:x,layout:"vertical"},{default:r(()=>[s(M,{gutter:16},{default:r(()=>[s(t,{span:8},{default:r(()=>[s(u,{label:"选择主表或表名称搜索：",name:"dbTable"},{default:r(()=>[s(l,{value:i(v).dbTable,"onUpdate:value":a[0]||(a[0]=e=>i(v).dbTable=e),options:i(b),showSearch:"",class:"xn-wd",placeholder:"请选择主表",onSelect:a[1]||(a[1]=e=>P(i(v).dbTable,!1))},null,8,["value","options"])]),_:1})]),_:1}),s(t,{span:8},{default:r(()=>[s(u,{label:"选择主键：",name:"dbTableKey"},{default:r(()=>[s(l,{value:i(v).dbTableKey,"onUpdate:value":a[2]||(a[2]=e=>i(v).dbTableKey=e),options:i(f),class:"xn-wd",placeholder:"选择主键"},null,8,["value","options"])]),_:1})]),_:1}),s(t,{span:8},{default:r(()=>[s(u,{label:"表前缀移除：",name:"tablePrefix"},{default:r(()=>[s(_,{value:i(v).tablePrefix,"onUpdate:value":a[3]||(a[3]=e=>i(v).tablePrefix=e),options:i(w),onChange:k},null,8,["value","options"])]),_:1})]),_:1}),s(t,{span:8},{default:r(()=>[s(u,{name:"generateType"},{label:r(()=>[s(L,null,{title:r(()=>a[19]||(a[19]=[m("注：移动端代码生成目前只支持【压缩包】方式。")])),default:r(()=>[s(C),a[20]||(a[20]=m(" 生成方式： "))]),_:1})]),default:r(()=>[s(_,{value:i(v).generateType,"onUpdate:value":a[4]||(a[4]=e=>i(v).generateType=e),options:i(g)},null,8,["value","options"])]),_:1})]),_:1}),s(t,{span:8},{default:r(()=>[s(u,{label:"所属模块：",name:"module"},{default:r(()=>[s(l,{value:i(v).module,"onUpdate:value":a[5]||(a[5]=e=>i(v).module=e),options:i(N),class:"xn-wd",placeholder:"请选择所属模块",onChange:a[6]||(a[6]=e=>U(i(v).module,!1))},null,8,["value","options"])]),_:1})]),_:1}),s(t,{span:8},{default:r(()=>[s(u,{label:"上级目录：",name:"menuPid"},{default:r(()=>[s(j,{value:i(v).menuPid,"onUpdate:value":a[7]||(a[7]=e=>i(v).menuPid=e),class:"xn-wd","dropdown-style":{maxHeight:"400px",overflow:"auto"},placeholder:"请选择上级目录","allow-clear":"","tree-default-expand-all":"","tree-data":i(h),"field-names":{children:"children",label:"title",value:"id"},selectable:"false","tree-line":""},null,8,["value","tree-data"])]),_:1})]),_:1}),s(t,{span:8},{default:r(()=>[s(u,{label:"移动端所属模块：",name:"mobileModule"},{default:r(()=>[s(l,{value:i(v).mobileModule,"onUpdate:value":a[8]||(a[8]=e=>i(v).mobileModule=e),options:i(c),class:"xn-wd",placeholder:"请选择移动端所属模块","allow-clear":""},null,8,["value","options"])]),_:1})]),_:1}),s(t,{span:8},{default:r(()=>[s(u,{name:"pluginName"},{label:r(()=>[s(L,null,{title:r(()=>a[21]||(a[21]=[m(" 不想把代码生成到本框架指定插件名称下，可以新建一个plugin模块，并在这里改为新的名字。 ")])),default:r(()=>[s(C)]),_:1}),a[22]||(a[22]=m("   插件名： "))]),default:r(()=>[s(R,{value:i(v).pluginName,"onUpdate:value":a[9]||(a[9]=e=>i(v).pluginName=e),placeholder:"请输入插件名","allow-clear":""},null,8,["value"])]),_:1})]),_:1}),s(t,{span:8},{default:r(()=>[s(u,{label:"包名：",name:"packageName"},{default:r(()=>[s(R,{value:i(v).packageName,"onUpdate:value":a[10]||(a[10]=e=>i(v).packageName=e),placeholder:"请输入包名","allow-clear":""},null,8,["value"])]),_:1})]),_:1}),s(t,{span:8},{default:r(()=>[s(u,{name:"moduleName"},{label:r(()=>[s(L,null,{title:r(()=>a[23]||(a[23]=[m(" 代码模块名就是包名后面的代码包，例如：com.fliad.*，*代表此模块名。 ")])),default:r(()=>[s(C)]),_:1}),a[24]||(a[24]=m("   模块名： "))]),default:r(()=>[s(R,{value:i(v).moduleName,"onUpdate:value":a[11]||(a[11]=e=>i(v).moduleName=e),placeholder:"请输入模块名","allow-clear":""},null,8,["value"])]),_:1})]),_:1}),s(t,{span:8},{default:r(()=>[s(u,{label:"功能名：",name:"functionName"},{default:r(()=>[s(R,{value:i(v).functionName,"onUpdate:value":a[12]||(a[12]=e=>i(v).functionName=e),placeholder:"请输入功能名","allow-clear":""},null,8,["value"])]),_:1})]),_:1}),s(t,{span:8},{default:r(()=>[s(u,{name:"busName"},{label:r(()=>[s(L,null,{title:r(()=>a[25]||(a[25]=[m(" 业务名是代码生成后，存放controller、service等代码的文件夹名称。 ")])),default:r(()=>[s(C)]),_:1}),a[26]||(a[26]=m("   业务名： "))]),default:r(()=>[s(R,{value:i(v).busName,"onUpdate:value":a[13]||(a[13]=e=>i(v).busName=e),placeholder:"请输入业务名","allow-clear":""},null,8,["value"])]),_:1})]),_:1}),s(t,{span:8},{default:r(()=>[s(u,{label:"类名：",name:"className"},{default:r(()=>[s(R,{value:i(v).className,"onUpdate:value":a[14]||(a[14]=e=>i(v).className=e),placeholder:"请输入类名","allow-clear":""},null,8,["value"])]),_:1})]),_:1}),s(t,{span:8},{default:r(()=>[s(u,{label:"作者：",name:"authorName"},{default:r(()=>[s(R,{value:i(v).authorName,"onUpdate:value":a[15]||(a[15]=e=>i(v).authorName=e),placeholder:"请输入作者名","allow-clear":""},null,8,["value"])]),_:1})]),_:1}),s(t,{span:8},{default:r(()=>[s(u,{name:"formLayout"},{label:r(()=>[s(L,null,{title:r(()=>a[27]||(a[27]=[m(" 垂直选项生成出来的前端表单代码为名称跟输入框是上下两行，反之水平则是一行。 ")])),default:r(()=>[s(C)]),_:1}),a[28]||(a[28]=m("   表单布局： "))]),default:r(()=>[s(_,{value:i(v).formLayout,"onUpdate:value":a[16]||(a[16]=e=>i(v).formLayout=e),options:i(T)},null,8,["value","options"])]),_:1})]),_:1}),s(t,{span:8},{default:r(()=>[s(u,{name:"gridWhether"},{label:r(()=>[s(L,null,{title:r(()=>a[29]||(a[29]=[m(" 如果使用了栅格配置，即生成出来的前端代码，表单是一排两列，并非一排一列。 ")])),default:r(()=>[s(C)]),_:1}),a[30]||(a[30]=m("   使用栅格： "))]),default:r(()=>[s(_,{value:i(v).gridWhether,"onUpdate:value":a[17]||(a[17]=e=>i(v).gridWhether=e),options:i(y)},null,8,["value","options"])]),_:1})]),_:1}),s(t,{span:8},{default:r(()=>[s(u,{label:"排序：",name:"sortCode"},{default:r(()=>[s(A,{class:"xn-wd",value:i(v).sortCode,"onUpdate:value":a[18]||(a[18]=e=>i(v).sortCode=e),max:100},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}}),[["__scopeId","data-v-e2953995"]]);export{v as default};
