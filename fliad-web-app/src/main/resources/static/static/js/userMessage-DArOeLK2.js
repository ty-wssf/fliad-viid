import{_ as e,t as a,k as s,c as t}from"./index-DcffTgQN.js";import d from"./detail-B2ckEpSw.js";import{d as n,f as l,a1 as r,a6 as o,V as i,a2 as u,k as c,H as f,u as p,U as k,F as m,W as x,G as y,a3 as _,Y as v,Z as b,n as g}from"./vue-vendor-BzDj5Url.js";import"./ant-design-vendor-CRFwT3Wn.js";import"./index-yhO5Pkur.js";const j={class:"xn-mt-16"},I={key:0,class:"xn-color-d9d9d9"},h={key:1,class:"xn-color-ff4d4f"},w=["onClick"],C=n({name:"userMessage"}),M=e(Object.assign(C,{setup(e){const n=a.dictList("MESSAGE_CATEGORY"),C=l(new Array(n[0].value)),M=l(),R=l(),A=[{title:"主题",dataIndex:"subject"},{title:"发送时间",dataIndex:"createTime",sorter:!0},{title:"是否已读",dataIndex:"read",width:"100px"},{title:"操作",dataIndex:"action",width:"100px"}],E=e=>(e.category=C.value[0],t.userLoginUnreadMessagePage(e).then(e=>e)),G=()=>{M.value.refresh(!1)},O=()=>{g(()=>{M.value.refresh(!0)})};return(e,a)=>{const t=r("a-menu-item"),l=r("a-menu"),g=r("a-col"),U=s,L=r("a-space"),S=r("s-table"),T=r("a-row");return i(),o(T,{gutter:10},{default:u(()=>[c(g,{span:4},{default:u(()=>[c(l,{id:"userMessage","selected-keys":p(C),"onUpdate:selectedKeys":a[0]||(a[0]=e=>f(C)?C.value=e:null),mode:"inline",onClick:O},{default:u(()=>[(i(!0),k(m,null,x(p(n),e=>(i(),o(t,{key:e.value},{default:u(()=>[y(_(e.label),1)]),_:2},1024))),128))]),_:1},8,["selected-keys"])]),_:1}),c(g,{span:20},{default:u(()=>[v("div",j,[c(S,{ref_key:"tableRef",ref:M,columns:A,data:E,bordered:"","row-key":e=>e.id},{bodyCell:u(({column:e,record:a})=>["subject"===e.dataIndex?(i(),o(U,{key:0,length:40,tooltip:""},{default:u(()=>[y(_(a.subject),1)]),_:2},1024)):b("",!0),"read"===e.dataIndex?(i(),k(m,{key:1},[a.read?(i(),k("span",I,"已读")):(i(),k("span",h,"未读"))],64)):b("",!0),"action"===e.dataIndex?(i(),o(L,{key:2},{default:u(()=>[v("a",{onClick:e=>p(R).onOpen(a)},"详情",8,w)]),_:2},1024)):b("",!0)]),_:1},8,["row-key"])])]),_:1}),c(d,{ref_key:"detailRef",ref:R,onRefresh:G},null,512)]),_:1})}}}),[["__scopeId","data-v-bd3c7033"]]);export{M as default};
