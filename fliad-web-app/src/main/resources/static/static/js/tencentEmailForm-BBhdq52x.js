import{r as e}from"./formRules-B2bzcXv4.js";import{c as a}from"./configApi-BMiyCPj3.js";import{k as l,b as E}from"./ant-design-vendor-CRFwT3Wn.js";import{d as n,f as _,a1 as o,a6 as t,V as s,a2 as r,k as u,u as N,G as i}from"./vue-vendor-BzDj5Url.js";import"./index-DcffTgQN.js";const T=n({name:"tencentEmailForm"}),f=Object.assign(T,{setup(n){const T=_(),f=_({}),c=_(!1),d=_(!0);a.configList({category:"EMAIL_TENCENT"}).then(e=>{d.value=!1,e?e.forEach(e=>{f.value[e.configKey]=e.configValue}):l.warning("表单项不存在，请初始化数据库")});const p={SNOWY_EMAIL_TENCENT_SECRET_ID:[e("请输入腾讯云密钥ID")],SNOWY_EMAIL_TENCENT_SECRET_KEY:[e("请输入腾讯云密钥SECRET")],SNOWY_EMAIL_TENCENT_FROM:[e("请输入默认发送账号")]},m={span:4},C={span:12};return(e,l)=>{const n=o("a-input"),_=o("a-form-item"),S=o("a-button"),v=o("a-form"),I=o("a-spin");return s(),t(I,{spinning:N(d)},{default:r(()=>[u(v,{ref_key:"formRef",ref:T,model:N(f),rules:p,layout:"vertical","label-col":{...m,offset:0},"wrapper-col":{...C,offset:0}},{default:r(()=>[u(_,{label:"腾讯云密钥ID：",name:"SNOWY_EMAIL_TENCENT_SECRET_ID"},{default:r(()=>[u(n,{value:N(f).SNOWY_EMAIL_TENCENT_SECRET_ID,"onUpdate:value":l[0]||(l[0]=e=>N(f).SNOWY_EMAIL_TENCENT_SECRET_ID=e),placeholder:"请输入腾讯云密钥ID"},null,8,["value"])]),_:1}),u(_,{label:"腾讯云密钥SECRET：",name:"SNOWY_EMAIL_TENCENT_SECRET_KEY"},{default:r(()=>[u(n,{value:N(f).SNOWY_EMAIL_TENCENT_SECRET_KEY,"onUpdate:value":l[1]||(l[1]=e=>N(f).SNOWY_EMAIL_TENCENT_SECRET_KEY=e),placeholder:"请输入腾讯云密钥SECRET"},null,8,["value"])]),_:1}),u(_,{label:"默认发送账号：",name:"SNOWY_EMAIL_TENCENT_FROM"},{default:r(()=>[u(n,{value:N(f).SNOWY_EMAIL_TENCENT_FROM,"onUpdate:value":l[2]||(l[2]=e=>N(f).SNOWY_EMAIL_TENCENT_FROM=e),placeholder:"请输入默认发送账号"},null,8,["value"])]),_:1}),u(_,null,{default:r(()=>[u(S,{type:"primary",loading:N(c),onClick:l[3]||(l[3]=e=>{T.value.validate().then(()=>{c.value=!0;let e=E(f.value);const l=Object.entries(e).map(e=>({configKey:e[0],configValue:e[1]}));a.configEditForm(l).then(()=>{}).finally(()=>{c.value=!1})}).catch(()=>{})})},{default:r(()=>l[5]||(l[5]=[i("保存")])),_:1},8,["loading"]),u(S,{class:"xn-ml10",onClick:l[4]||(l[4]=()=>N(T).resetFields())},{default:r(()=>l[6]||(l[6]=[i("重置")])),_:1})]),_:1})]),_:1},8,["model","label-col","wrapper-col"])]),_:1},8,["spinning"])}}});export{f as default};
