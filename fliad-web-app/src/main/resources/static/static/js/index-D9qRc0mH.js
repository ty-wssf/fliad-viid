import{_ as e}from"./index-r8v7tfQO.js";import{_ as a,v as t}from"./form-xcsVTif_.js";import{i as l}from"./index-DcffTgQN.js";import{k as n}from"./ant-design-vendor-CRFwT3Wn.js";import{d as r,r as d,f as i,a1 as o,U as s,V as c,k as u,a2 as f,u as p,G as m,a6 as v,Z as h,a3 as I,F as y}from"./vue-vendor-BzDj5Url.js";import"./formRules-B2bzcXv4.js";const _=["onClick"],k=r({name:"viidApe"}),A=Object.assign(k,{setup(r){let k=d({});const A=i(),g=i(),x=i(),P={refresh:!0,height:!0,columnSetting:!0,striped:!1},w=[{title:"设备唯一标识",dataIndex:"ApeID"},{title:"设备名称",dataIndex:"Name"},{title:"设备型号",dataIndex:"Model"},{title:"IP地址",dataIndex:"IPAddr"},{title:"端口",dataIndex:"Port"},{title:"位置",dataIndex:"Place"},{title:"在线状态",dataIndex:"IsOnline"}];l(["viidApeEdit","viidApeDelete"])&&w.push({title:"操作",dataIndex:"action",align:"center",width:"150px"});let b=i([]);const D={alert:{show:!1,clear:()=>{b=i([])}},rowSelection:{onChange:(e,a)=>{b.value=e}}},O=e=>{const a=JSON.parse(JSON.stringify(k));return t.viidApePage(Object.assign(e,a)).then(e=>e)},C=()=>{if(b.value.length<1)return n.warning("请选择一条或多条数据"),!1;const e=b.value.map(e=>({ID:e}));t.viidApeDelete(e).then(()=>{g.value.clearRefreshSelected()})};return(l,n)=>{const r=o("a-input"),d=o("a-form-item"),i=o("a-col"),j=o("a-button"),N=o("a-row"),S=o("a-form"),R=o("plus-outlined"),B=e,E=o("a-space"),F=o("a-tag"),U=o("a-divider"),J=o("a-popconfirm"),K=o("s-table"),z=o("a-card");return c(),s(y,null,[u(z,{bordered:!1},{default:f(()=>[u(S,{ref_key:"searchFormRef",ref:A,name:"advanced_search",model:p(k),class:"ant-advanced-search-form mb-4"},{default:f(()=>[u(N,{gutter:24},{default:f(()=>[u(i,{span:6},{default:f(()=>[u(d,{label:"设备名称",name:"Name"},{default:f(()=>[u(r,{value:p(k).Name,"onUpdate:value":n[0]||(n[0]=e=>p(k).Name=e),placeholder:"请输入设备名称"},null,8,["value"])]),_:1})]),_:1}),u(i,{span:6},{default:f(()=>[u(d,{label:"IP地址",name:"IPAddr"},{default:f(()=>[u(r,{value:p(k).IPAddr,"onUpdate:value":n[1]||(n[1]=e=>p(k).IPAddr=e),placeholder:"请输入IP地址"},null,8,["value"])]),_:1})]),_:1}),u(i,{span:6},{default:f(()=>[u(j,{type:"primary",onClick:n[2]||(n[2]=e=>p(g).refresh(!0))},{default:f(()=>n[6]||(n[6]=[m("查询")])),_:1}),u(j,{style:{margin:"0 8px"},onClick:n[3]||(n[3]=()=>p(A).resetFields())},{default:f(()=>n[7]||(n[7]=[m("重置")])),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),u(K,{ref_key:"table",ref:g,columns:w,data:O,alert:D.alert.show,bordered:"","row-key":e=>e.ID,"tool-config":P,"row-selection":D.rowSelection},{operator:f(()=>[u(E,null,{default:f(()=>[l.hasPerm("viidApeAdd")?(c(),v(j,{key:0,type:"primary",onClick:n[4]||(n[4]=e=>p(x).onOpen())},{icon:f(()=>[u(R)]),default:f(()=>[n[8]||(n[8]=m(" 新增 "))]),_:1})):h("",!0),l.hasPerm("viidApeBatchDelete")?(c(),v(B,{key:1,buttonName:"批量删除",icon:"DeleteOutlined",selectedRowKeys:p(b),onBatchCallBack:C},null,8,["selectedRowKeys"])):h("",!0)]),_:1})]),bodyCell:f(({column:e,record:a})=>["IsOnline"===e.dataIndex?(c(),v(F,{key:0,color:1===a.IsOnline?"green":"red"},{default:f(()=>[m(I(1===a.IsOnline?"在线":"离线"),1)]),_:2},1032,["color"])):h("",!0),"action"===e.dataIndex?(c(),s(y,{key:1},[l.hasPerm("viidApeEdit")?(c(),s("a",{key:0,onClick:e=>p(x).onOpen(a)},"编辑",8,_)):h("",!0),l.hasPerm(["viidApeEdit","viidApeDelete"],"and")?(c(),v(U,{key:1,type:"vertical"})):h("",!0),u(J,{title:"确定要删除吗？",onConfirm:e=>(e=>{let a=[{ID:e.ID}];t.viidApeDelete(a).then(()=>{g.value.refresh(!0)})})(a)},{default:f(()=>[l.hasPerm("viidApeDelete")?(c(),v(j,{key:0,type:"link",danger:"",size:"small"},{default:f(()=>n[9]||(n[9]=[m("删除")])),_:1})):h("",!0)]),_:2},1032,["onConfirm"])],64)):h("",!0)]),_:1},8,["alert","row-key","row-selection"])]),_:1}),u(a,{ref_key:"formRef",ref:x,onSuccessful:n[5]||(n[5]=e=>p(g).refresh(!0))},null,512)],64)}}});export{A as default};
