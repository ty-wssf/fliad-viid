import{l as e}from"./logApi-CVq6tF5P.js";import{L as a}from"./index-mDC2N7oT.js";import{_ as t,t as l,r as s}from"./index-DcffTgQN.js";import{d as o,f as n,o as i,a1 as u,a6 as d,V as r,a2 as c,Y as v,u as f,k as p,G as _,a8 as m,U as g,F as C,W as b,a3 as y}from"./vue-vendor-BzDj5Url.js";import{i as x,_ as h,a as L}from"./index-BwZz3yE3.js";import{L as O,N as S,O as j,R as F}from"./ant-design-vendor-CRFwT3Wn.js";const D=o({name:"visLogChart"}),U=t(Object.assign(D,{setup(t){const l="series",s="value",o=n("周访问量"),p=(e,a,t)=>{const o=[];return e.forEach(e=>{a.forEach(a=>{var n;const i=(null==(n=null==t?void 0:t[a])?void 0:n.alias)||a;o.push({...e,[l]:i,[s]:e[a]})})}),o};return i(()=>{const t={date:{alias:"登录登出周统计"},loginCount:{alias:"登录"},logoutCount:{alias:"登出"}};e.logVisLineChartData().then(e=>{new a("visLogChartLine",{data:p(e,["loginCount","logoutCount"],t),padding:"auto",xField:"date",yField:s,seriesField:l,color:["#1677FF","rgb(188, 189, 190)"],appendPadding:[0,8,0,0]}).render()}).catch(()=>{})}),(e,a)=>{const t=u("a-card");return r(),d(t,{bordered:!1,title:f(o)},{default:c(()=>a[0]||(a[0]=[v("div",{id:"visLogChartLine",class:"xn-ht200"},null,-1)])),_:1},8,["title"])}}}),[["__scopeId","data-v-072e609e"]]),I=o({name:"sysToolDataCard"}),k=t(Object.assign(I,{setup(e){const a=n("基础工具"),t=n(!1),l=n({fileCount:0,smsCount:0,emailCount:0,messageCount:0});return i(()=>{t.value=!0,x.indexToolDataCount().then(e=>{l.value=e}).catch(()=>{}).finally(()=>{t.value=!1})}),(e,s)=>{const o=u("FileFilled"),n=u("a-statistic"),i=u("a-col"),v=u("MessageFilled"),m=u("MailFilled"),g=u("NotificationFilled"),C=u("a-row"),b=u("a-card");return r(),d(b,{title:f(a),bordered:!1,loading:f(t)},{default:c(()=>[p(C,null,{default:c(()=>[p(i,{span:12},{default:c(()=>[p(n,{value:f(l).fileCount},{title:c(()=>[p(o,{style:{color:"#1890ff"}}),s[0]||(s[0]=_(" 文件 "))]),_:1},8,["value"])]),_:1}),p(i,{span:12},{default:c(()=>[p(n,{value:f(l).smsCount},{title:c(()=>[p(v,{style:{color:"#07913e"}}),s[1]||(s[1]=_(" 短信 "))]),_:1},8,["value"])]),_:1}),p(i,{span:12},{default:c(()=>[p(n,{value:f(l).emailCount},{title:c(()=>[p(m,{style:{color:"#fada00"}}),s[2]||(s[2]=_(" 邮件 "))]),_:1},8,["value"])]),_:1}),p(i,{span:12},{default:c(()=>[p(n,{value:f(l).messageCount},{title:c(()=>[p(g,{style:{color:"#fada00"}}),s[3]||(s[3]=_(" 站内信 "))]),_:1},8,["value"])]),_:1})]),_:1})]),_:1},8,["title","loading"])}}}),[["__scopeId","data-v-75d3228f"]]),T={class:"timeline-div"},w=o({name:"indexOpLog"}),E=t(Object.assign(w,{setup(e){const a=l.data.get("USER_INFO"),t=n([]),o=n("操作记录"),h=n(!1);i(()=>{L()});const L=()=>{h.value=!0,x.indexOpLogList().then(e=>{t.value=e}).catch(()=>{}).finally(()=>{h.value=!1})};return(e,l)=>{const n=u("a-timeline-item"),i=u("a-timeline"),x=u("a-card");return r(),d(x,{title:f(o),bordered:!1,loading:f(h)},m({default:c(()=>[v("div",T,[p(i,null,{default:c(()=>[(r(!0),g(C,null,b(f(t),e=>{return r(),d(n,{key:e.id,color:(a=e.exeStatus,"SUCCESS"===a?"blue":"red")},{default:c(()=>[_(y(e.opTime)+" "+y(e.name),1)]),_:2},1032,["color"]);var a}),128))]),_:1})])]),_:2},[a.roleCodeList&&-1!==a.roleCodeList.toString().indexOf("superAdmin")?{name:"extra",fn:c(()=>[v("a",{onClick:l[0]||(l[0]=e=>((e="/")=>{s.replace({path:e})})("/dev/oplog"))},"更多")]),key:"0"}:void 0]),1032,["title","loading"])}}}),[["__scopeId","data-v-a037c261"]]),N={class:"timeline-div"},z={class:"timeline-item-p"},A=o({name:"indexVisLog"}),B=t(Object.assign(A,{setup(e){const a=l.data.get("USER_INFO"),t=n([]),o=n("访问记录"),h=n(!1);i(()=>{L()});const L=()=>{h.value=!0,x.indexVisLogList().then(e=>{t.value=e}).catch(()=>{}).finally(()=>{h.value=!1})};return(e,l)=>{const n=u("a-timeline-item"),i=u("a-timeline"),x=u("a-card");return r(),d(x,{title:f(o),bordered:!1,loading:f(h)},m({default:c(()=>[v("div",N,[p(i,null,{default:c(()=>[(r(!0),g(C,null,b(f(t),a=>{return r(),d(n,{key:a.id,color:(t=a.category,"LOGIN"===t?"blue":"LOGOUT"===t?"gray":void 0)},{default:c(()=>[_(y(e.$TOOL.parseTime(a.opTime,"{y}-{m}-{d} {h}:{i}:{s}"))+" "+y(a.name)+" ",1),v("p",z,y(a.opIp)+" "+y(a.opAddress),1)]),_:2},1032,["color"]);var t}),128))]),_:1})])]),_:2},[a.roleCodeList&&-1!==a.roleCodeList.toString().indexOf("superAdmin")?{name:"extra",fn:c(()=>[v("a",{onClick:l[0]||(l[0]=e=>((e="/")=>{s.replace({path:e})})("/dev/vislog"))},"更多")]),key:"0"}:void 0]),1032,["title","loading"])}}}),[["__scopeId","data-v-77592007"]]),V=o({name:"sysBizDataCard"}),G=t(Object.assign(V,{setup(e){const a=n("运维一览"),t=n(!1),l=n({sysDictCount:0,bizDictCount:0,backUserSessionCount:0,clientUserSessionCount:0,thirdUserCount:0});return i(()=>{t.value=!0,x.indexOpDataCount().then(e=>{l.value=e}).catch(()=>{}).finally(()=>{t.value=!1})}),(e,s)=>{const o=u("read-outlined"),n=u("a-statistic"),i=u("a-col"),v=u("usergroup-delete-outlined"),m=u("UserSwitchOutlined"),g=u("team-outlined"),C=u("a-row"),b=u("a-card");return r(),d(b,{title:f(a),bordered:!1,loading:f(t)},{default:c(()=>[p(C,null,{default:c(()=>[p(i,{span:5},{default:c(()=>[p(n,{value:f(l).sysDictCount},{title:c(()=>[p(o,{style:{color:"#4b4b4b"}}),s[0]||(s[0]=_(" 系统字典 "))]),_:1},8,["value"])]),_:1}),p(i,{span:5},{default:c(()=>[p(n,{value:f(l).bizDictCount},{title:c(()=>[p(o,{style:{color:"#353779"}}),s[1]||(s[1]=_(" 业务字典 "))]),_:1},8,["value"])]),_:1}),p(i,{span:5},{default:c(()=>[p(n,{value:f(l).backUserSessionCount},{title:c(()=>[p(v,{style:{color:"#3ceecd"}}),s[2]||(s[2]=_(" 后台在线用户 "))]),_:1},8,["value"])]),_:1}),p(i,{span:5},{default:c(()=>[p(n,{value:f(l).clientUserSessionCount},{title:c(()=>[p(m,{style:{color:"rgba(229, 159, 18, 0.35)"}}),s[3]||(s[3]=_(" 前台在线用户 "))]),_:1},8,["value"])]),_:1}),p(i,{span:4},{default:c(()=>[p(n,{value:f(l).thirdUserCount},{title:c(()=>[p(g,{style:{color:"#1890ff"}}),s[4]||(s[4]=_(" 三方用户 "))]),_:1},8,["value"])]),_:1})]),_:1})]),_:1},8,["title","loading"])}}}),[["__scopeId","data-v-24f23814"]]),R=o({name:"sysBizDataCard"}),M=t(Object.assign(R,{setup(e){const a=n("业务数据"),t=n(!1),l=n({userCount:0,roleCount:0,orgCount:0,positionCount:0});return i(()=>{t.value=!0,x.indexBizDataCount().then(e=>{l.value=e}).catch(()=>{}).finally(()=>{t.value=!1})}),(e,s)=>{const o=u("a-statistic"),n=u("a-col"),i=u("a-row"),v=u("a-card");return r(),d(v,{title:f(a),bordered:!1,loading:f(t)},{default:c(()=>[p(i,null,{default:c(()=>[p(n,{span:6},{default:c(()=>[p(o,{value:f(l).userCount},{title:c(()=>[p(f(O),{style:{color:"#1890ff"}}),s[0]||(s[0]=_(" 用户数量 "))]),_:1},8,["value"])]),_:1}),p(n,{span:6},{default:c(()=>[p(o,{value:f(l).orgCount},{title:c(()=>[p(f(S),{style:{color:"rgba(229, 159, 18, 0.35)"}}),s[1]||(s[1]=_(" 组织数量 "))]),_:1},8,["value"])]),_:1}),p(n,{span:6},{default:c(()=>[p(o,{value:f(l).positionCount},{title:c(()=>[p(f(j),{style:{color:"rgba(245, 6, 6, 0.2)"}}),s[2]||(s[2]=_(" 职位数量 "))]),_:1},8,["value"])]),_:1}),p(n,{span:6},{default:c(()=>[p(o,{value:f(l).roleCount},{title:c(()=>[p(f(F),{style:{color:"#09c755"}}),s[3]||(s[3]=_(" 角色数量 "))]),_:1},8,["value"])]),_:1})]),_:1})]),_:1},8,["title","loading"])}}}),[["__scopeId","data-v-eea2a5e4"]]),Y=o({name:"indexHome"}),q=Object.assign(Y,{setup(e){const a={options:{place:"BACK_SYS_INDEX"}};return(e,t)=>{const l=h,s=M,o=G,n=B,i=u("a-col"),v=E,f=u("a-row"),_=L,m=k,g=U;return r(),d(f,{gutter:10},{default:c(()=>[p(i,{span:16,xs:24,sm:24,md:24,lg:16,xl:16},{default:c(()=>[p(l,{class:"mb-2"}),p(s,{class:"mb-2"}),p(o,{class:"mb-2"}),p(f,{gutter:10},{default:c(()=>[p(i,{span:12,xs:24,sm:24,md:12,lg:12,xl:12},{default:c(()=>[p(n,{class:"mb-2"})]),_:1}),p(i,{span:12,xs:24,sm:24,md:12,lg:12,xl:12},{default:c(()=>[p(v,{class:"mb-2"})]),_:1})]),_:1})]),_:1}),p(i,{span:8,xs:24,sm:24,md:24,lg:8,xl:8},{default:c(()=>[p(_,{config:a,class:"mb-2"}),p(m,{class:"mb-2"}),p(g)]),_:1})]),_:1})}}});export{q as default};
