import{_ as e}from"./index-r8v7tfQO.js";import a from"./form-DF_3377v.js";import t from"./changeModuleForm-B-M69b9z.js";import l from"./index-uon9X3cd.js";import{m as n}from"./menuApi-DbbBCSCl.js";import{d as o,f as r,a1 as i,U as d,V as s,k as u,a2 as c,u as m,H as f,F as p,W as y,a6 as v,G as h,a7 as k,a3 as _,Z as b,Y as g,ag as x}from"./vue-vendor-BzDj5Url.js";import"./ant-design-vendor-CRFwT3Wn.js";import"./index-yhO5Pkur.js";import"./index-DcffTgQN.js";import"./snowflake-id-Ddy3gscf.js";import"./formRules-B2bzcXv4.js";import"./index-ssHdgZ9Y.js";import"./iconMobileSelector-DPTyXE9K.js";import"./form-BcBIRWcS.js";const w={key:0},C={key:1},T=["onClick"],j={key:0},I={class:"ant-dropdown-link"},O=["onClick"],M=["onClick"],S=o({name:"mobileMenuIndex"}),R=Object.assign(S,{setup(o){const S=r({});let R=r([]);const D=r(),U=r(),E=r(),A=r(),B=r(),F=r(),K={refresh:!0,height:!0,columnSetting:!0,striped:!1},L=[{title:"名称",dataIndex:"title"},{title:"界面路径",dataIndex:"path",ellipsis:!0},{title:"图标",dataIndex:"icon",width:80},{title:"正规则",dataIndex:"regType"},{title:"可用状态",dataIndex:"status"},{title:"创建时间",dataIndex:"createTime",ellipsis:!0},{title:"操作",dataIndex:"action",align:"center",width:200}];let G=r([]);const N={alert:{show:!1,clear:()=>{G=r([])}},rowSelection:{onChange:(e,a)=>{G.value=e}}},V=e=>D.value?n.mobileMenuTree(Object.assign(e,S.value)).then(e=>e||[]):n.mobileMenuModuleSelector().then(a=>(R.value=a,D.value=a.length>0?a[0].id:"",S.value.module=D.value,n.mobileMenuTree(Object.assign(e,S.value)).then(e=>e||[]))),Y=()=>{A.value.resetFields(),U.value.refresh(!0)},$=e=>{n.mobileMenuDelete(e).then(()=>{U.value.clearRefreshSelected()})};return(o,r)=>{const z=i("a-radio-button"),H=i("a-radio-group"),P=i("a-input"),W=i("a-button"),Z=i("a-space"),q=i("a-form-item"),J=i("a-form"),Q=i("a-card"),X=i("plus-outlined"),ee=e,ae=i("a-tag"),te=i("a-divider"),le=i("a-popconfirm"),ne=i("DownOutlined"),oe=i("a-menu-item"),re=i("a-menu"),ie=i("a-dropdown"),de=i("s-table");return s(),d(p,null,[u(Q,{bordered:!1,"body-style":{"padding-bottom":"0px"},class:"mb-2"},{default:c(()=>[u(J,{ref_key:"searchFormRef",ref:A,name:"advanced_search",model:m(S),class:"ant-advanced-search-form"},{default:c(()=>[u(Z,{style:{"align-items":"normal"}},{default:c(()=>[u(H,{value:m(D),"onUpdate:value":r[0]||(r[0]=e=>f(D)?D.value=e:null),"button-style":"solid"},{default:c(()=>[(s(!0),d(p,null,y(m(R),e=>(s(),v(z,{key:e.id,value:e.id,onClick:a=>{return t=e.id,S.value.module=t,void U.value.refresh(!0);var t}},{default:c(()=>[(s(),v(k(e.icon))),h(" "+_(e.title),1)]),_:2},1032,["value","onClick"]))),128))]),_:1},8,["value"]),u(q,{name:"searchKey"},{default:c(()=>[u(Z,null,{default:c(()=>[u(P,{value:m(S).searchKey,"onUpdate:value":r[1]||(r[1]=e=>m(S).searchKey=e),placeholder:"请输入模块名称关键词"},null,8,["value"]),u(W,{type:"primary",onClick:r[2]||(r[2]=e=>m(U).refresh(!0))},{default:c(()=>r[6]||(r[6]=[h("查询")])),_:1}),u(W,{class:"xn-mg08",onClick:Y},{default:c(()=>r[7]||(r[7]=[h("重置")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),u(Q,{bordered:!1},{default:c(()=>[u(de,{ref_key:"tableRef",ref:U,columns:L,data:V,alert:N.alert.show,bordered:"","row-key":e=>e.id,"tool-config":K,"show-pagination":!1,"row-selection":N.rowSelection},{operator:c(()=>[u(Z,null,{default:c(()=>[u(W,{type:"primary",onClick:r[3]||(r[3]=e=>m(E).onOpen(void 0,m(D)))},{icon:c(()=>[u(X)]),default:c(()=>[r[8]||(r[8]=h(" 新增 "))]),_:1}),u(ee,{buttonName:"批量删除",icon:"DeleteOutlined",buttonDanger:"",selectedRowKeys:m(G),onBatchCallBack:$},null,8,["selectedRowKeys"])]),_:1})]),bodyCell:c(({column:e,record:a})=>["path"===e.dataIndex?(s(),d(p,{key:0},["CATALOG"===a.menuType?(s(),d("span",w,"-")):(s(),d("span",C,_(a.path),1))],64)):b("",!0),"icon"===e.dataIndex?(s(),v(ae,{key:1,color:a.color},{default:c(()=>[g("span",{class:x(["snowy xn-icons",a.icon])},null,2)]),_:2},1032,["color"])):b("",!0),"regType"===e.dataIndex?(s(),d(p,{key:2},[h(_(o.$TOOL.dictTypeData("MOBILE_REG_TYPE",a.regType)),1)],64)):b("",!0),"status"===e.dataIndex?(s(),d(p,{key:3},[h(_(o.$TOOL.dictTypeData("MOBILE_STATUS",a.status)),1)],64)):b("",!0),"action"===e.dataIndex?(s(),v(Z,{key:4},{default:c(()=>[g("a",{onClick:e=>m(E).onOpen(a,m(D))},"编辑",8,T),u(te,{type:"vertical"}),u(le,{title:"确定要删除吗？",onConfirm:e=>(e=>{let a=[{id:e.id}];n.mobileMenuDelete(a).then(()=>{U.value.refresh(!0)})})(a)},{default:c(()=>[u(W,{type:"link",danger:"",size:"small"},{default:c(()=>r[9]||(r[9]=[h("删除")])),_:1})]),_:2},1032,["onConfirm"]),"0"===a.parentId||"MENU"===a.menuType?(s(),d("div",j,[u(te,{type:"vertical"}),u(ie,null,{overlay:c(()=>[u(re,null,{default:c(()=>["0"===a.parentId?(s(),v(oe,{key:0},{default:c(()=>[g("a",{onClick:e=>m(B).onOpen(a)},"更改模块",8,O)]),_:2},1024)):b("",!0),"MENU"===a.menuType?(s(),v(oe,{key:1},{default:c(()=>[g("a",{onClick:e=>m(F).onOpen(a)},"按钮权限",8,M)]),_:2},1024)):b("",!0)]),_:2},1024)]),default:c(()=>[g("a",I,[r[10]||(r[10]=h(" 更多 ")),u(ne)])]),_:2},1024)])):b("",!0)]),_:2},1024)):b("",!0)]),_:1},8,["alert","row-key","row-selection"])]),_:1}),u(a,{ref_key:"formRef",ref:E,onSuccessful:r[4]||(r[4]=e=>m(U).refresh(!0))},null,512),u(t,{ref_key:"changeModuleFormRef",ref:B,onSuccessful:r[5]||(r[5]=e=>m(U).refresh(!0))},null,512),u(l,{ref_key:"button",ref:F},null,512)],64)}}});export{R as default};
