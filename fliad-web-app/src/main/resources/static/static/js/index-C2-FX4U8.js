import{k as e}from"./index-DcffTgQN.js";import{l as a}from"./logApi-CVq6tF5P.js";import t from"./columnChart-BNSBWs8G.js";import l from"./pieChart-BouCoMRw.js";import o from"./detail-DM3mq-Rj.js";import{d as r,f as d,a1 as n,U as s,V as u,k as i,a2 as c,a6 as f,Z as m,G as p,a3 as v,Y as g,u as h,H as y,F as _,W as b}from"./vue-vendor-BzDj5Url.js";import"./ant-design-vendor-CRFwT3Wn.js";import"./index-mDC2N7oT.js";import"./index-yhO5Pkur.js";import"./index-Dj7V4so4.js";const x=["onClick"],k=r({name:"devOplog"}),I=Object.assign(k,{setup(r){const k=d({}),I=d(),j=d(),C=d(),N=d("OPERATE");let O=d([{label:"操作日志",value:"OPERATE"},{label:"异常日志",value:"EXCEPTION"}]);const E=[{title:"名称",dataIndex:"name"},{title:"IP地址",dataIndex:"opIp"},{title:"地址",dataIndex:"opAddress"},{title:"类名称",dataIndex:"className"},{title:"方法名称",dataIndex:"methodName"},{title:"操作时间",dataIndex:"opTime",sorter:!0},{title:"用户",dataIndex:"opUser"},{title:"操作",dataIndex:"action",align:"center",width:"100px"}],w=()=>{k.value.searchKey&&j.value.refresh(!0)},P=e=>(k.value.category=k.value.category?k.value.category:N.value,a.logPage(Object.assign(e,k.value)).then(e=>e));return(r,d)=>{const R=n("a-card"),A=n("a-col"),T=n("a-row"),U=n("a-radio-button"),K=n("a-radio-group"),D=n("a-input-search"),Y=n("a-button"),Z=n("a-popconfirm"),q=n("a-space"),F=n("a-form"),G=e,H=n("s-table");return u(),s(_,null,[i(T,{gutter:10,class:"mb-2"},{default:c(()=>[i(A,{span:16},{default:c(()=>[i(R,{bordered:!1,title:"周统计"},{default:c(()=>[i(t)]),_:1})]),_:1}),i(A,{span:8},{default:c(()=>[i(R,{bordered:!1,title:"总比例"},{default:c(()=>[i(l)]),_:1})]),_:1})]),_:1}),i(R,{bordered:!1},{default:c(()=>[i(H,{ref_key:"tableRef",ref:j,columns:E,data:P,bordered:"","row-key":e=>e.id},{operator:c(()=>[i(F,{ref_key:"formRef",ref:I,name:"advanced_search",model:h(k),class:"ant-advanced-search-form"},{default:c(()=>[i(q,null,{default:c(()=>[i(K,{value:h(N),"onUpdate:value":d[0]||(d[0]=e=>y(N)?N.value=e:null),"button-style":"solid"},{default:c(()=>[(u(!0),s(_,null,b(h(O),e=>(u(),f(U,{key:e.value,value:e.value,onClick:a=>{return t=e.value,k.value.category=t,void j.value.refresh(!0);var t}},{default:c(()=>[p(v(e.label),1)]),_:2},1032,["value","onClick"]))),128))]),_:1},8,["value"]),i(D,{value:h(k).searchKey,"onUpdate:value":d[1]||(d[1]=e=>h(k).searchKey=e),placeholder:"请输入名称关键词","enter-button":"",allowClear:"",onSearch:w},null,8,["value"]),i(Z,{title:"确定清空操作与异常日志吗？",onConfirm:d[2]||(d[2]=e=>(()=>{const e={category:k.category?k.category:N.value};a.logDelete(e).then(()=>{j.value.refresh(!0)})})())},{default:c(()=>[i(Y,{danger:""},{default:c(()=>d[3]||(d[3]=[p("清空")])),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),bodyCell:c(({column:e,record:t})=>["className"===e.dataIndex?(u(),f(G,{key:0,length:70,tooltip:""},{default:c(()=>[p(v(t.className),1)]),_:2},1024)):m("",!0),"methodName"===e.dataIndex?(u(),f(G,{key:1,length:20,tooltip:""},{default:c(()=>[p(v(t.methodName),1)]),_:2},1024)):m("",!0),"action"===e.dataIndex?(u(),f(q,{key:2},{default:c(()=>[g("a",{onClick:e=>(e=>{let t={id:e};a.logDetail(t).then(e=>{C.value.onOpen(e)})})(t.id)},"详情",8,x)]),_:2},1024)):m("",!0)]),_:1},8,["row-key"])]),_:1}),i(o,{ref_key:"detailRef",ref:C},null,512)],64)}}});export{I as default};
