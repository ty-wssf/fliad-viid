import{_ as e}from"./index-r8v7tfQO.js";import{d as a,f as t,a1 as l,U as i,V as o,k as n,a2 as r,u as s,q as d,A as c,Y as u,G as p,a6 as m,a3 as f,a7 as y,Z as h,F as _,W as k}from"./vue-vendor-BzDj5Url.js";import{i as b,t as v}from"./index-DcffTgQN.js";import T from"./form-DNgaGUBR.js";import N from"./detail-BXpmGnDS.js";import{b as I}from"./bizNoticeApi-CSgbvqLe.js";import{b as g}from"./ant-design-vendor-CRFwT3Wn.js";import"./index-yhO5Pkur.js";import"./fileApi-DnApfrPK.js";import"./editor-vendor-gXJG3n-p.js";import"./index-DOuUB9GF.js";import"./index-D6xghLx3.js";import"./formRules-B2bzcXv4.js";const C={key:0},O={key:1},x={key:3},E={key:1},w=["onClick"],z=["onClick"],D=a({name:"notice"}),j=Object.assign(D,{setup(a){const D=t({}),j=t(),P=t(),B=t(),S=t(),A={refresh:!0,height:!0,columnSetting:!0,striped:!1},L=t(!1),U=t(!1),R=()=>{U.value=!U.value},Y=[{title:"标题",dataIndex:"title"},{title:"封面图",dataIndex:"image",width:"100px"},{title:"类型",dataIndex:"type"},{title:"发布位置",dataIndex:"place"},{title:"排序",dataIndex:"sortCode",sorter:!0},{title:"状态",dataIndex:"status"},{title:"创建时间",dataIndex:"createTime",width:"150px"}];b(["bizNoticeEdit","bizNoticeDelete"])&&Y.push({title:"操作",dataIndex:"action",align:"center",width:"200px"});const Z=t([]),$={alert:{show:!1,clear:()=>{Z.value=t([])}},rowSelection:{onChange:(e,a)=>{Z.value=e}}},F=e=>{const a=g(D.value);return a.createTime&&(a.startCreateTime=a.createTime[0],a.endCreateTime=a.createTime[1],delete a.createTime),I.bizNoticePage(Object.assign(e,a)).then(e=>e)},M=()=>{j.value.resetFields(),P.value.refresh(!0)},G=e=>{I.bizNoticeDelete(e).then(()=>{P.value.clearRefreshSelected()})},H=v.dictList("BIZ_NOTICE_TYPE"),K=v.dictList("BIZ_NOTICE_PLACE"),W=v.dictList("BIZ_NOTICE_STATUS");return(a,t)=>{const b=l("a-input"),v=l("a-form-item"),g=l("a-col"),q=l("a-select"),J=l("a-range-picker"),V=l("a-button"),Q=l("a-row"),X=l("a-form"),ee=l("plus-outlined"),ae=e,te=l("a-space"),le=l("a-image"),ie=l("a-tag"),oe=l("a-switch"),ne=l("a-divider"),re=l("a-popconfirm"),se=l("s-table"),de=l("a-card");return o(),i(_,null,[n(de,{bordered:!1},{default:r(()=>[n(X,{ref_key:"searchFormRef",ref:j,name:"advanced_search",model:s(D),class:"ant-advanced-search-form"},{default:r(()=>[n(Q,{gutter:24},{default:r(()=>[n(g,{span:6},{default:r(()=>[n(v,{label:"标题",name:"title"},{default:r(()=>[n(b,{value:s(D).title,"onUpdate:value":t[0]||(t[0]=e=>s(D).title=e),placeholder:"请输入标题"},null,8,["value"])]),_:1})]),_:1}),n(g,{span:6},{default:r(()=>[n(v,{label:"类型",name:"type"},{default:r(()=>[n(q,{value:s(D).type,"onUpdate:value":t[1]||(t[1]=e=>s(D).type=e),placeholder:"请选择类型",options:s(H)},null,8,["value","options"])]),_:1})]),_:1}),n(g,{span:6},{default:r(()=>[n(v,{label:"发布位置",name:"place"},{default:r(()=>[n(q,{value:s(D).place,"onUpdate:value":t[2]||(t[2]=e=>s(D).place=e),placeholder:"请选择发布位置",options:s(K)},null,8,["value","options"])]),_:1})]),_:1}),d(n(g,{span:6},{default:r(()=>[n(v,{label:"状态",name:"status"},{default:r(()=>[n(q,{value:s(D).status,"onUpdate:value":t[3]||(t[3]=e=>s(D).status=e),placeholder:"请选择状态",options:s(W)},null,8,["value","options"])]),_:1})]),_:1},512),[[c,s(U)]]),d(n(g,{span:6},{default:r(()=>[n(v,{label:"创建时间",name:"createTime"},{default:r(()=>[n(J,{value:s(D).createTime,"onUpdate:value":t[4]||(t[4]=e=>s(D).createTime=e),"value-format":"YYYY-MM-DD HH:mm:ss","show-time":""},null,8,["value"])]),_:1})]),_:1},512),[[c,s(U)]]),n(g,{span:6},{default:r(()=>[n(V,{type:"primary",onClick:t[5]||(t[5]=e=>s(P).refresh(!0))},{default:r(()=>t[8]||(t[8]=[p("查询")])),_:1}),n(V,{style:{margin:"0 8px"},onClick:M},{default:r(()=>t[9]||(t[9]=[p("重置")])),_:1}),u("a",{onClick:R,style:{"margin-left":"8px"}},[p(f(s(U)?"收起":"展开")+" ",1),(o(),m(y(s(U)?"up-outlined":"down-outlined")))])]),_:1})]),_:1})]),_:1},8,["model"]),n(se,{ref_key:"tableRef",ref:P,columns:Y,data:F,alert:$.alert.show,bordered:"","row-key":e=>e.id,"tool-config":A,"row-selection":$.rowSelection},{operator:r(()=>[n(te,null,{default:r(()=>[a.hasPerm("bizNoticeAdd")?(o(),m(V,{key:0,type:"primary",onClick:t[6]||(t[6]=e=>s(B).onOpen())},{icon:r(()=>[n(ee)]),default:r(()=>[t[10]||(t[10]=p(" 新增 "))]),_:1})):h("",!0),a.hasPerm("bizNoticeBatchDelete")?(o(),m(ae,{key:1,buttonName:"批量删除",icon:"DeleteOutlined",buttonDanger:"",selectedRowKeys:s(Z),onBatchCallBack:G},null,8,["selectedRowKeys"])):h("",!0)]),_:1})]),bodyCell:r(({column:e,record:l})=>["image"===e.dataIndex?(o(),i(_,{key:0},[l.image?(o(),i("div",C,[n(le,{src:l.image,style:{width:"30px",height:"30px"}},null,8,["src"])])):(o(),i("span",O,"未上传"))],64)):h("",!0),"type"===e.dataIndex?(o(),i(_,{key:1},["NOTICE"===l.type?(o(),m(ie,{key:0,bordered:!1,color:"success"},{default:r(()=>[p(f(a.$TOOL.dictTypeData("BIZ_NOTICE_TYPE",l.type)),1)]),_:2},1024)):"ANNOUNCEMENT"===l.type?(o(),m(ie,{key:1,bordered:!1,color:"processing"},{default:r(()=>[p(f(a.$TOOL.dictTypeData("BIZ_NOTICE_TYPE",l.type)),1)]),_:2},1024)):"WARNING"===l.type?(o(),m(ie,{key:2,bordered:!1,color:"warning"},{default:r(()=>[p(f(a.$TOOL.dictTypeData("BIZ_NOTICE_TYPE",l.type)),1)]),_:2},1024)):(o(),i("span",x,"无"))],64)):h("",!0),"place"===e.dataIndex?(o(!0),i(_,{key:2},k(JSON.parse(l.place),e=>(o(),m(ie,{key:e,color:"processing"},{default:r(()=>[p(f(a.$TOOL.dictTypeData("BIZ_NOTICE_PLACE",e)),1)]),_:2},1024))),128)):h("",!0),"status"===e.dataIndex?(o(),i(_,{key:3},[a.hasPerm("bizNoticerUpdateStatus")?(o(),m(oe,{key:0,loading:s(L),checked:"ENABLE"===l.status,onChange:e=>(e=>{L.value=!0,"ENABLE"===e.status?I.bizNoticeDisableStatus(e).then(()=>{P.value.refresh()}).finally(()=>{L.value=!1}):I.bizNoticeEnableStatus(e).then(()=>{P.value.refresh()}).finally(()=>{L.value=!1})})(l)},null,8,["loading","checked","onChange"])):(o(),i("span",E,f(a.$TOOL.dictTypeData("BIZ_NOTICE_STATUS",l.status)),1))],64)):h("",!0),"action"===e.dataIndex?(o(),m(te,{key:4},{default:r(()=>[a.hasPerm("bizNoticeDetail")?(o(),i("a",{key:0,onClick:e=>s(S).onOpen(l.id)},"详情",8,w)):h("",!0),a.hasPerm(["bizNoticeEdit","bizNoticeDetail"],"and")?(o(),m(ne,{key:1,type:"vertical"})):h("",!0),a.hasPerm("bizNoticeEdit")?(o(),i("a",{key:2,onClick:e=>s(B).onOpen(l)},"编辑",8,z)):h("",!0),a.hasPerm(["bizNoticeEdit","bizNoticeDelete"],"and")?(o(),m(ne,{key:3,type:"vertical"})):h("",!0),n(re,{title:"确定要删除吗？",onConfirm:e=>(e=>{let a=[{id:e.id}];I.bizNoticeDelete(a).then(()=>{P.value.refresh(!0)})})(l)},{default:r(()=>[a.hasPerm("bizNoticeDelete")?(o(),m(V,{key:0,type:"link",danger:"",size:"small"},{default:r(()=>t[11]||(t[11]=[p("删除")])),_:1})):h("",!0)]),_:2},1032,["onConfirm"])]),_:2},1024)):h("",!0)]),_:1},8,["alert","row-key","row-selection"])]),_:1}),n(T,{ref_key:"formRef",ref:B,onSuccessful:t[7]||(t[7]=e=>s(P).refresh())},null,512),n(N,{ref_key:"detailRef",ref:S},null,512)],64)}}});export{j as default};
