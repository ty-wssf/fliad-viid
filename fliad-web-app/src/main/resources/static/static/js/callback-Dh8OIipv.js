import{_ as a,g as s,t as n,l,c as t,r as e,e as o}from"./index-DcffTgQN.js";import{t as i}from"./thirdApi-ih_ykqKX.js";import{k as r}from"./ant-design-vendor-CRFwT3Wn.js";import{d as c,c as _,o as d,U as S,Y,u,ag as g,a3 as O,k as p,a2 as h,a1 as N,V as f}from"./vue-vendor-BzDj5Url.js";const v={class:"login-wrapper"},E={class:"login_background"},m={class:"logo_background"},R=["href"],T=["alt","src"],I={class:"version"},U={class:"login_main"},k={class:"login-form"},C={class:"h-[300px]"},W=c({name:"loginCallback"}),L=a(Object.assign(W,{setup(a){const c=s(),W=_(()=>c.sysBaseConfig);d(()=>{const a=new URL(window.location.href);let s=0;const c={};a.searchParams.forEach((a,n)=>{s+=1,c[n]=a}),s<2?window.location.href="/login":i.thirdCallback(c).then(a=>{n.data.set("TOKEN",a),l.getLoginUser().then(a=>{n.data.set("USER_INFO",a)}),t.userLoginMenu().then(a=>{const s=a[0].children[0].path;n.data.set("MENU",a),n.data.set("SNOWY_MENU_MODULE_ID",a[0].id),e.replace({path:s}),r.success("登录成功"),o.dictTree().then(a=>{n.data.set("DICT_TYPE_TREE_DATA",a)})})}).catch(()=>{window.location.href="/login"})});const L=a=>{W.value.SNOWY_SYS_COPYRIGHT_URL||(null==a||a.stopPropagation(),null==a||a.preventDefault())};return(a,s)=>{const n=N("a-skeleton"),l=N("a-spin"),t=N("a-card");return f(),S("div",v,[Y("div",E,[Y("div",m,[Y("a",{class:g({"no-link":!u(W).SNOWY_SYS_COPYRIGHT_URL}),href:u(W).SNOWY_SYS_COPYRIGHT_URL,target:"_blank",onClick:L},[Y("img",{alt:u(W).SNOWY_SYS_NAME,src:u(W).SNOWY_SYS_LOGO},null,8,T),Y("label",null,O(u(W).SNOWY_SYS_NAME),1)],10,R)]),Y("div",I,[Y("p",null,O(u(W).SNOWY_SYS_DEFAULT_DESCRRIPTION),1),Y("p",null,O(u(W).SNOWY_SYS_COPYRIGHT)+" "+O(u(W).SNOWY_SYS_VERSION),1)])]),Y("div",U,[Y("div",k,[p(t,null,{default:h(()=>[s[0]||(s[0]=Y("div",{class:"login-header"},[Y("h2",null,"三方登录")],-1)),p(l,{tip:"正在登录中..."},{default:h(()=>[Y("div",C,[p(n)])]),_:1})]),_:1})])])])}}}),[["__scopeId","data-v-d2013d40"]]);export{L as default};
