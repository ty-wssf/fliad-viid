import{c as e}from"./configApi-BMiyCPj3.js";import a from"./preview-C-d8gYlD.js";import t from"./setting-Dcj7DR1S.js";import{k as n,G as s,H as o}from"./ant-design-vendor-CRFwT3Wn.js";import{d as i,f as r,o as l,a1 as c,a6 as d,V as u,a2 as m,k as f,u as p,Z as g,G as k,a3 as j}from"./vue-vendor-BzDj5Url.js";import"./index-DcffTgQN.js";import"./index-yhO5Pkur.js";import"./formRules-B2bzcXv4.js";const y=i({name:"cForm"}),_=Object.assign(y,{setup(i){const y=r(),_=r({}),b=r(!1),v=r(!0),x=r([]),C=[{title:"名称",dataIndex:"remark",key:"remark"},{title:"邮件主题",dataIndex:"subject",key:"subject"},{title:"配置",dataIndex:"action",key:"action",width:200}];l(()=>{I()});const I=()=>{e.configList({category:"EMAIL_TEMPLATE_FOR_C"}).then(e=>{v.value=!1,e?x.value=e:n.warning("表单项不存在，请初始化数据库")})},O=a=>{b.value=!0,e.configEditForm(a).then(()=>{I()}).finally(()=>{b.value=!1})};return(e,n)=>{const i=c("a-tag"),r=c("a-button"),l=c("a-space"),b=c("a-table"),I=c("a-spin");return u(),d(I,{spinning:p(v)},{default:m(()=>[f(b,{dataSource:p(x),columns:C,pagination:!1,bordered:"",size:"middle"},{bodyCell:m(({record:e,column:a})=>["subject"===a.dataIndex?(u(),d(i,{key:0,bordered:!1,color:"processing"},{default:m(()=>[k(j(JSON.parse(e.configValue).subject),1)]),_:2},1024)):g("",!0),"action"===a.dataIndex?(u(),d(l,{key:1},{default:m(()=>[f(r,{size:"small",onClick:a=>p(y).onOpen(JSON.parse(e.configValue).content)},{default:m(()=>[f(p(s)),n[0]||(n[0]=k(" 预览 "))]),_:2},1032,["onClick"]),f(r,{type:"primary",size:"small",onClick:a=>p(_).onOpen(e)},{default:m(()=>[f(p(o)),n[1]||(n[1]=k(" 配置 "))]),_:2},1032,["onClick"])]),_:2},1024)):g("",!0)]),_:1},8,["dataSource"]),f(a,{ref_key:"emailPreviewRef",ref:y},null,512),f(t,{ref_key:"emailSettingRef",ref:_,onSuccessful:O},null,512)]),_:1},8,["spinning"])}}});export{_ as default};
