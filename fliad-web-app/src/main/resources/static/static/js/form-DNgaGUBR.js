import{_ as e}from"./index-yhO5Pkur.js";import{f as a}from"./fileApi-DnApfrPK.js";import{E as l}from"./editor-vendor-gXJG3n-p.js";import{t}from"./index-DOuUB9GF.js";import{d as o,f as n,w as i,o as u,a6 as s,V as r,u as d,H as p,a1 as c,a2 as m,k as f,G as v}from"./vue-vendor-BzDj5Url.js";import{_ as g}from"./index-D6xghLx3.js";import{t as h}from"./index-DcffTgQN.js";import{r as _}from"./formRules-B2bzcXv4.js";import{b}from"./bizNoticeApi-CSgbvqLe.js";import{b as y}from"./ant-design-vendor-CRFwT3Wn.js";const x=o({name:"Editor"}),C=Object.assign(x,{props:{value:{type:[String,Array],default:"",required:!1},placeholder:{type:String,default:""},height:{type:Number,default:300},disabled:{type:Boolean,default:!1},plugins:{type:[String,Array],default:"code image link preview table lists advlist"},toolbar:{type:[String,Array],default:"undo redo |  forecolor backcolor bold italic underline strikethrough link | blocks fontfamily fontsize | \t\t\t\talignleft aligncenter alignright alignjustify outdent indent lineheight | bullist numlist | \t\t\t\timage table  preview | code selectall"},fileUploadFunction:{type:Function,default:void 0}},emits:["update:value","onClick","onChange"],setup(e,{emit:o}){const c=o,m=e,f=n(),v=n({language_url:"/tinymce/langs/zh_CN.js",language:"zh_CN",skin_url:"/tinymce/skins/ui/oxide",content_css:"/tinymce/skins/content/default/content.css",menubar:!1,statusbar:!0,plugins:m.plugins,toolbar:m.toolbar,fontsize_formats:"12px 14px 16px 18px 20px 22px 24px 28px 32px 36px 48px 56px 72px",height:m.height,placeholder:m.placeholder,branding:!1,resize:!0,elementpath:!0,content_style:"",selector:"#textarea1",skin:"oxide-dark",images_upload_handler:(e,l)=>new Promise((l,t)=>{const o=new FormData;o.append("file",e.blob(),e.filename()),m.fileUploadFunction?m.fileUploadFunction(o).then(e=>l(e)).catch(e=>t("err:"+e)):a.fileUploadDynamicReturnUrl(o).then(e=>l(e))}),setup:e=>{e.on("init",()=>{})}});i(()=>m.value,e=>{f.value=e},{immediate:!0,deep:!0}),i(f,e=>{c("update:value",e)});const g=e=>{c("onClick",e,t)};return u(()=>{t.init({})}),(a,t)=>(r(),s(d(l),{modelValue:d(f),"onUpdate:modelValue":t[0]||(t[0]=e=>p(f)?f.value=e:null),init:d(v),disabled:e.disabled,placeholder:e.placeholder,onOnClick:g},null,8,["modelValue","init","disabled","placeholder"]))}}),k=o({name:"bizNoticeForm"}),U=Object.assign(k,{emits:{successful:null},setup(a,{expose:l,emit:t}){const o=n(!1),i=t,u=n(),x=n({}),k=n(!1),U=n([]),j=n([]),w=n([]),N=()=>{u.value.resetFields(),x.value={},o.value=!1},O={title:[_("请输入标题")],content:[_("请输入内容")],digest:[_("请输入摘要")],type:[_("请选择类型")],place:[_("请选择发布位置")],sortCode:[_("请输入排序")]},z=()=>{u.value.validate().then(()=>{k.value=!0;const e=y(x.value);e.place=JSON.stringify(e.place),b.bizNoticeSubmitForm(e,e.id).then(()=>{N(),i("successful")}).finally(()=>{k.value=!1})})};return l({onOpen:e=>{if(o.value=!0,e){let a=y(e);a.place=JSON.parse(a.place),x.value=Object.assign({},a)}else x.value={type:"NOTICE",place:["BACK_MOBILE","BACK_INDEX"],sortCode:99};U.value=h.dictList("BIZ_NOTICE_TYPE"),j.value=h.dictList("BIZ_NOTICE_PLACE"),w.value=h.dictList("BIZ_NOTICE_STATUS")}}),(a,l)=>{const t=c("a-input"),n=c("a-form-item"),i=c("question-circle-outlined"),h=c("a-tooltip"),_=c("a-radio-group"),b=c("a-col"),y=g,w=C,E=c("a-textarea"),A=c("a-checkbox-group"),I=c("a-input-number"),S=c("a-row"),F=c("a-form"),B=c("a-button"),R=e;return r(),s(R,{title:d(x).id?"编辑通知公告":"增加通知公告",width:1e3,open:d(o),"onUpdate:open":l[8]||(l[8]=e=>p(o)?o.value=e:null),"destroy-on-close":!0,onClose:N},{footer:m(()=>[f(B,{style:{"margin-right":"8px"},onClick:N},{default:m(()=>l[11]||(l[11]=[v("关闭")])),_:1}),f(B,{type:"primary",onClick:z,loading:d(k)},{default:m(()=>l[12]||(l[12]=[v("保存")])),_:1},8,["loading"])]),default:m(()=>[f(F,{ref_key:"formRef",ref:u,model:d(x),rules:O,layout:"vertical"},{default:m(()=>[f(S,{gutter:16},{default:m(()=>[f(b,{span:19},{default:m(()=>[f(n,{label:"标题：",name:"title"},{default:m(()=>[f(t,{value:d(x).title,"onUpdate:value":l[0]||(l[0]=e=>d(x).title=e),placeholder:"请输入标题","allow-clear":""},null,8,["value"])]),_:1}),f(n,{name:"type"},{label:m(()=>[f(h,null,{title:m(()=>l[9]||(l[9]=[v(" 这里只是标签的类型 ")])),default:m(()=>[f(i),l[10]||(l[10]=v(" 类型： "))]),_:1})]),default:m(()=>[f(_,{value:d(x).type,"onUpdate:value":l[1]||(l[1]=e=>d(x).type=e),placeholder:"请选择类型",options:d(U)},null,8,["value","options"])]),_:1})]),_:1}),f(b,{span:5},{default:m(()=>[f(n,{label:"封面图：",name:"image"},{default:m(()=>[f(y,{value:d(x).image,"onUpdate:value":l[2]||(l[2]=e=>d(x).image=e),uploadMode:"image"},null,8,["value"])]),_:1})]),_:1}),f(b,{span:24},{default:m(()=>[f(n,{label:"内容：",name:"content"},{default:m(()=>[f(w,{value:d(x).content,"onUpdate:value":l[3]||(l[3]=e=>d(x).content=e),placeholder:"请输入内容"},null,8,["value"])]),_:1})]),_:1}),f(b,{span:24},{default:m(()=>[f(n,{label:"摘要：",name:"digest"},{default:m(()=>[f(E,{value:d(x).digest,"onUpdate:value":l[4]||(l[4]=e=>d(x).digest=e),placeholder:"请输入摘要","auto-size":{minRows:3,maxRows:5},showCount:!0,maxlength:60},null,8,["value"])]),_:1})]),_:1}),f(b,{span:18},{default:m(()=>[f(n,{label:"发布位置：",name:"place"},{default:m(()=>[f(A,{value:d(x).place,"onUpdate:value":l[5]||(l[5]=e=>d(x).place=e),placeholder:"请选择发布位置",options:d(j)},null,8,["value","options"])]),_:1})]),_:1}),f(b,{span:6},{default:m(()=>[f(n,{label:"排序：",name:"sortCode"},{default:m(()=>[f(I,{value:d(x).sortCode,"onUpdate:value":l[6]||(l[6]=e=>d(x).sortCode=e),placeholder:"请输入排序",max:1e3,style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),f(b,{span:24},{default:m(()=>[f(n,{label:"备注：",name:"remark"},{default:m(()=>[f(E,{value:d(x).remark,"onUpdate:value":l[7]||(l[7]=e=>d(x).remark=e),placeholder:"请输入备注","auto-size":{minRows:3,maxRows:5}},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title","open"])}}});export{U as default};
