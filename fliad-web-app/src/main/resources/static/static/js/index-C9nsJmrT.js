import{_ as e}from"./index-r8v7tfQO.js";import{_ as a,b as t}from"./form-02bsjsVP.js";import{b as l}from"./bizOrgApi-8pcz4RXq.js";import{_ as o,i as n}from"./index-DcffTgQN.js";import{w as r,x as i}from"./ant-design-vendor-CRFwT3Wn.js";import{d as s,f as d,a1 as u,U as c,V as f,k as m,a2 as p,u as h,a6 as y,H as g,G as _,Z as b,F as v,a3 as k}from"./vue-vendor-BzDj5Url.js";import"./index-yhO5Pkur.js";import"./formRules-B2bzcXv4.js";const x=["onClick"],P=s({name:"bizPosition"}),w=o(Object.assign(P,{setup(o){const s=[{title:"岗位名称",dataIndex:"name"},{title:"分类",dataIndex:"category"},{title:"排序",dataIndex:"sortCode"}];n(["bizPositionEdit","bizPositionDelete"])&&s.push({title:"操作",dataIndex:"action",align:"center",width:"150px"});let P=d([]);const w={alert:{show:!1,clear:()=>{P=d([])}},rowSelection:{onChange:(e,a)=>{P.value=e}}},I={refresh:!0,height:!0,columnSetting:!0},C=d(null),O=d(),z=d(),E=d({}),S=d([]),j=d([]),D={children:"children",title:"name",key:"id"},R=d(!0),K=e=>t.positionPage(Object.assign(e,E.value)).then(e=>e),T=()=>{z.value.resetFields(),C.value.refresh(!0)};l.orgTree().then(e=>{R.value=!1,null!==e&&(j.value=e,r(S.value)&&j.value.forEach(e=>{"0"===e.parentId&&(S.value.push(e.id),e.children&&e.children.forEach(e=>{S.value.push(e.id)}))}))}).finally(()=>{R.value=!1});const A=e=>{e.length>0?E.value.orgId=e.toString():delete E.value.orgId,C.value.refresh(!0)},B=e=>{t.positionDelete(e).then(()=>{C.value.clearRefreshSelected()})};return(l,o)=>{const n=u("a-tree"),r=u("a-empty"),d=u("a-card"),F=u("a-col"),G=u("a-input"),N=u("a-form-item"),U=u("SearchOutlined"),L=u("a-button"),M=u("redo-outlined"),Y=u("a-row"),H=u("a-form"),V=u("plus-outlined"),Z=e,$=u("a-space"),q=u("a-divider"),J=u("a-popconfirm"),Q=u("s-table");return f(),c(v,null,[m(Y,{gutter:10},{default:p(()=>[m(F,{xs:24,sm:24,md:24,lg:5,xl:5},{default:p(()=>[m(d,{bordered:!1,loading:h(R),class:"left-tree-container"},{default:p(()=>[h(j).length>0?(f(),y(n,{key:0,expandedKeys:h(S),"onUpdate:expandedKeys":o[0]||(o[0]=e=>g(S)?S.value=e:null),"tree-data":h(j),"field-names":D,onSelect:A},null,8,["expandedKeys","tree-data"])):(f(),y(r,{key:1,image:h(i).PRESENTED_IMAGE_SIMPLE},null,8,["image"]))]),_:1},8,["loading"])]),_:1}),m(F,{xs:24,sm:24,md:24,lg:19,xl:19},{default:p(()=>[m(d,{bordered:!1,class:"xn-mb10"},{default:p(()=>[m(H,{ref_key:"searchFormRef",ref:z,name:"advanced_search",class:"ant-advanced-search-form",model:h(E)},{default:p(()=>[m(Y,{gutter:24},{default:p(()=>[m(F,{span:8},{default:p(()=>[m(N,{name:"searchKey",label:"名称关键词"},{default:p(()=>[m(G,{value:h(E).searchKey,"onUpdate:value":o[1]||(o[1]=e=>h(E).searchKey=e),placeholder:"请输入岗位名称关键词"},null,8,["value"])]),_:1})]),_:1}),m(F,{span:8},{default:p(()=>[m(L,{type:"primary",onClick:o[2]||(o[2]=e=>h(C).refresh(!0))},{icon:p(()=>[m(U)]),default:p(()=>[o[5]||(o[5]=_(" 查询 "))]),_:1}),m(L,{class:"snowy-button-left",onClick:T},{icon:p(()=>[m(M)]),default:p(()=>[o[6]||(o[6]=_(" 重置 "))]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),m(d,{bordered:!1},{default:p(()=>[m(Q,{ref_key:"tableRef",ref:C,columns:s,data:K,"expand-row-by-click":!0,alert:w.alert.show,bordered:"","tool-config":I,"row-key":e=>e.id,"row-selection":w.rowSelection},{operator:p(()=>[m($,null,{default:p(()=>[l.hasPerm("bizPositionAdd")?(f(),y(L,{key:0,type:"primary",onClick:o[3]||(o[3]=e=>h(O).onOpen(void 0,h(E).orgId))},{icon:p(()=>[m(V)]),default:p(()=>[o[7]||(o[7]=_(" 新增 "))]),_:1})):b("",!0),l.hasPerm("bizPositionBatchDelete")?(f(),y(Z,{key:1,buttonName:"批量删除",icon:"DeleteOutlined",buttonDanger:"",selectedRowKeys:h(P),onBatchCallBack:B},null,8,["selectedRowKeys"])):b("",!0)]),_:1})]),bodyCell:p(({column:e,record:a})=>["category"===e.dataIndex?(f(),c(v,{key:0},[_(k(l.$TOOL.dictTypeData("POSITION_CATEGORY",a.category)),1)],64)):b("",!0),"action"===e.dataIndex?(f(),c(v,{key:1},[l.hasPerm("bizPositionEdit")?(f(),c("a",{key:0,onClick:e=>h(O).onOpen(a)},"编辑",8,x)):b("",!0),l.hasPerm(["bizPositionEdit","bizPositionDelete"],"and")?(f(),y(q,{key:1,type:"vertical"})):b("",!0),m(J,{title:"确定删除此岗位？",onConfirm:e=>(e=>{let a=[{id:e.id}];t.positionDelete(a).then(()=>{C.value.refresh(!0)})})(a)},{default:p(()=>[l.hasPerm("bizPositionDelete")?(f(),y(L,{key:0,type:"link",danger:"",size:"small"},{default:p(()=>o[8]||(o[8]=[_("删除")])),_:1})):b("",!0)]),_:2},1032,["onConfirm"])],64)):b("",!0)]),_:1},8,["alert","row-key","row-selection"])]),_:1})]),_:1})]),_:1}),m(a,{ref_key:"formRef",ref:O,onSuccessful:o[4]||(o[4]=e=>h(C).refresh(!0))},null,512)],64)}}}),[["__scopeId","data-v-57ed5bed"]]);export{w as default};
