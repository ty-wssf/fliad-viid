import{_ as e}from"./index-CkDqqgfU.js";import{_ as r}from"./index-r8v7tfQO.js";import{_ as a,b as t}from"./form-ClgLP314.js";import{i as o}from"./index-DcffTgQN.js";import{b as l}from"./ant-design-vendor-CRFwT3Wn.js";import{d as n,f as s,a1 as i,U as u,V as d,k as p,a2 as c,u as m,G as f,a6 as b,Z as h,F as k}from"./vue-vendor-BzDj5Url.js";import"./index-yhO5Pkur.js";import"./formRules-B2bzcXv4.js";const y=["onClick"],G=["onClick"],g=n({name:"bizGroupIndex"}),v=Object.assign(g,{setup(n){const g=s({}),v=s(),_=s(),z=s(),w={refresh:!0,height:!0,columnSetting:!0,striped:!1},x=s(),C=s(),P=[{title:"名称",dataIndex:"name"},{title:"备注",dataIndex:"remark"},{title:"排序码",dataIndex:"sortCode"},{title:"创建时间",dataIndex:"createTime"}];o(["bizGroupEdit","bizGroupGrantUser","bizGroupDelete"])&&P.push({title:"操作",dataIndex:"action",align:"center",width:220});const j=s([]),U={alert:{show:!1,clear:()=>{j.value=s([])}},rowSelection:{onChange:(e,r)=>{j.value=e}}},D=e=>{const r=l(g.value);return t.bizGroupPage(Object.assign(e,r)).then(e=>e)},I=()=>{v.value.resetFields(),_.value.refresh(!0)},O=e=>{t.bizGroupDelete(e).then(()=>{_.value.clearRefreshSelected()})},R=e=>{const r={id:x.value.id,grantInfoList:e};t.bizGroupGrantUser(r).then(()=>{})},S={orgTreeApi:e=>t.bizGroupOrgTreeSelector(e).then(e=>Promise.resolve(e)),userPageApi:e=>t.bizGroupUserSelector(e).then(e=>Promise.resolve(e))};return(o,l)=>{const n=i("a-input"),s=i("a-form-item"),A=i("a-col"),B=i("a-button"),E=i("a-row"),T=i("a-form"),F=i("plus-outlined"),K=r,L=i("a-space"),M=i("a-divider"),N=i("a-popconfirm"),Q=i("s-table"),V=i("a-card"),Z=e;return d(),u(k,null,[p(V,{bordered:!1},{default:c(()=>[p(T,{ref_key:"searchFormRef",ref:v,name:"advanced_search",model:m(g),class:"ant-advanced-search-form"},{default:c(()=>[p(E,{gutter:24},{default:c(()=>[p(A,{span:6},{default:c(()=>[p(s,{label:"名称",name:"name"},{default:c(()=>[p(n,{value:m(g).name,"onUpdate:value":l[0]||(l[0]=e=>m(g).name=e),placeholder:"请输入名称"},null,8,["value"])]),_:1})]),_:1}),p(A,{span:6},{default:c(()=>[p(B,{type:"primary",onClick:l[1]||(l[1]=e=>m(_).refresh())},{default:c(()=>l[4]||(l[4]=[f("查询")])),_:1}),p(B,{style:{margin:"0 8px"},onClick:I},{default:c(()=>l[5]||(l[5]=[f("重置")])),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),p(Q,{ref_key:"tableRef",ref:_,columns:P,data:D,alert:U.alert.show,bordered:"","row-key":e=>e.id,"tool-config":w,"row-selection":U.rowSelection},{operator:c(()=>[p(L,null,{default:c(()=>[o.hasPerm("bizGroupAdd")?(d(),b(B,{key:0,type:"primary",onClick:l[2]||(l[2]=e=>m(z).onOpen())},{icon:c(()=>[p(F)]),default:c(()=>[l[6]||(l[6]=f(" 新增 "))]),_:1})):h("",!0),o.hasPerm("bizGroupBatchDelete")?(d(),b(K,{key:1,buttonName:"批量删除",icon:"DeleteOutlined",buttonDanger:"",selectedRowKeys:m(j),onBatchCallBack:O},null,8,["selectedRowKeys"])):h("",!0)]),_:1})]),bodyCell:c(({column:e,record:r})=>["action"===e.dataIndex?(d(),b(L,{key:0},{default:c(()=>[o.hasPerm("bizGroupEdit")?(d(),u("a",{key:0,onClick:e=>m(z).onOpen(r)},"编辑",8,y)):h("",!0),o.hasPerm(["bizGroupEdit","bizGroupGrantUser"],"and")?(d(),b(M,{key:1,type:"vertical"})):h("",!0),o.hasPerm("bizGroupGrantUser")?(d(),u("a",{key:2,onClick:e=>(e=>{x.value=e;const r={id:e.id};t.bizGroupOwnUser(r).then(e=>{C.value.showUserPlusModal(e)})})(r)},"授权用户",8,G)):h("",!0),o.hasPerm(["bizGroupEdit","bizGroupDelete"],"and")?(d(),b(M,{key:3,type:"vertical"})):h("",!0),p(N,{title:"确定要删除吗？",onConfirm:e=>(e=>{let r=[{id:e.id}];t.bizGroupDelete(r).then(()=>{_.value.refresh(!0)})})(r)},{default:c(()=>[o.hasPerm("bizGroupDelete")?(d(),b(B,{key:0,type:"link",danger:"",size:"small"},{default:c(()=>l[7]||(l[7]=[f("删除")])),_:1})):h("",!0)]),_:2},1032,["onConfirm"])]),_:2},1024)):h("",!0)]),_:1},8,["alert","row-key","row-selection"])]),_:1}),p(a,{ref_key:"formRef",ref:z,onSuccessful:l[3]||(l[3]=e=>m(_).refresh())},null,512),p(Z,{ref_key:"userSelectorRef",ref:C,"org-tree-api":S.orgTreeApi,"user-page-api":S.userPageApi,"data-type":"object","user-show":!1,onOnBack:R},null,8,["org-tree-api","user-page-api"])],64)}}});export{v as default};
