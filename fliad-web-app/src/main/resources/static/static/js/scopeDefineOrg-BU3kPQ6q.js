import{r as e}from"./roleApi-AgyZA8--.js";import{c as a}from"./treeHandler-B8ofjH1e.js";import{d as s,f as t,a1 as n,a6 as l,V as d,a2 as o,Y as r,k as c,u as i,H as p}from"./vue-vendor-BzDj5Url.js";import"./index-DcffTgQN.js";import"./ant-design-vendor-CRFwT3Wn.js";const u={class:"scopeDefineOrgTreeDiv"},h=s({name:"scopeDefineOrg"}),v=Object.assign(h,{emits:{click:null},setup(s,{expose:h,emit:v}){const f=t(!1);let m=t([]),k=t([]);const g=t([]),O={dataScopeId:"",defineOrgIdData:{scopeCategory:"SCOPE_ORG_DEFINE",scopeDefineOrgIdList:[]}},y=()=>{f.value=!1},D=e=>{k.value=[],e&&e.length>0&&e.toString().split(",").forEach(e=>{k.value.push(e)})},I={children:"children",title:"name",key:"id"},j=(e,{checked:s,node:t})=>{O.defineOrgIdData.scopeDefineOrgIdList=a(s,t,e)},x=v,E=()=>{x("click",O),f.value=!1};return h({onOpen:(a,s)=>{f.value=!0,O.dataScopeId=a,e.roleOrgTreeSelector().then(e=>{null!==e&&(g.value=e,D(s),g.value.forEach(e=>{"0"===e.parentId&&(m.value.push(e.id),e.children&&e.children.forEach(e=>{m.value.push(e.id)}))}))})}}),(e,a)=>{const s=n("a-tree"),t=n("a-modal");return d(),l(t,{open:i(f),"onUpdate:open":a[2]||(a[2]=e=>p(f)?f.value=e:null),title:"选择组织",width:400,"mask-closable":!1,"destroy-on-close":!0,onOk:E,onCancel:y},{default:o(()=>[r("div",u,[c(s,{expandedKeys:i(m),"onUpdate:expandedKeys":a[0]||(a[0]=e=>p(m)?m.value=e:m=e),checkedKeys:i(k),"onUpdate:checkedKeys":a[1]||(a[1]=e=>p(k)?k.value=e:k=e),"tree-data":i(g),"field-names":I,checkable:"","check-strictly":"",selectable:!1,onCheck:j},null,8,["expandedKeys","checkedKeys","tree-data"])])]),_:1},8,["open"])}}});export{v as default};
