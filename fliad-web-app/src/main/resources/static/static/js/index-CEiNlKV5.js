import{_ as e}from"./index-CkDqqgfU.js";import{_ as a}from"./index-r8v7tfQO.js";import{_ as r,s as t}from"./form-DpRy7kYd.js";import{b as o}from"./ant-design-vendor-CRFwT3Wn.js";import{d as s,f as l,a1 as n,U as i,V as d,k as u,a2 as c,u as f,G as p,a6 as m,Z as y,Y as h,F as g}from"./vue-vendor-BzDj5Url.js";import"./index-DcffTgQN.js";import"./index-yhO5Pkur.js";import"./formRules-B2bzcXv4.js";const v=["onClick"],_=["onClick"],k=s({name:"sysGroupIndex"}),w=Object.assign(k,{setup(s){const k=l({}),w=l(),b=l(),x=l(),C={refresh:!0,height:!0,columnSetting:!0,striped:!1},j=l(),G=l(),I=[{title:"名称",dataIndex:"name"},{title:"备注",dataIndex:"remark"},{title:"排序码",dataIndex:"sortCode"},{title:"创建时间",dataIndex:"createTime"},{title:"操作",dataIndex:"action",align:"center",width:220}],O=l([]),R={alert:{show:!1,clear:()=>{O.value=l([])}},rowSelection:{onChange:(e,a)=>{O.value=e}}},S=e=>{const a=o(k.value);return t.sysGroupPage(Object.assign(e,a)).then(e=>e)},P=()=>{w.value.resetFields(),b.value.refresh(!0)},U=e=>{t.sysGroupDelete(e).then(()=>{b.value.clearRefreshSelected()})},A=e=>{const a={id:j.value.id,grantInfoList:e};t.sysGroupGrantUser(a).then(()=>{})},D={orgTreeApi:e=>t.sysGroupOrgTreeSelector(e).then(e=>Promise.resolve(e)),userPageApi:e=>t.sysGroupUserSelector(e).then(e=>Promise.resolve(e))};return(o,s)=>{const l=n("a-input"),T=n("a-form-item"),B=n("a-col"),F=n("a-button"),K=n("a-row"),Z=n("a-form"),z=n("plus-outlined"),L=a,M=n("a-space"),N=n("a-divider"),V=n("a-popconfirm"),Y=n("s-table"),q=n("a-card"),E=e;return d(),i(g,null,[u(q,{bordered:!1},{default:c(()=>[u(Z,{ref_key:"searchFormRef",ref:w,name:"advanced_search",model:f(k),class:"ant-advanced-search-form"},{default:c(()=>[u(K,{gutter:24},{default:c(()=>[u(B,{span:6},{default:c(()=>[u(T,{label:"名称",name:"name"},{default:c(()=>[u(l,{value:f(k).name,"onUpdate:value":s[0]||(s[0]=e=>f(k).name=e),placeholder:"请输入名称"},null,8,["value"])]),_:1})]),_:1}),u(B,{span:6},{default:c(()=>[u(F,{type:"primary",onClick:s[1]||(s[1]=e=>f(b).refresh())},{default:c(()=>s[4]||(s[4]=[p("查询")])),_:1}),u(F,{style:{margin:"0 8px"},onClick:P},{default:c(()=>s[5]||(s[5]=[p("重置")])),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),u(Y,{ref_key:"tableRef",ref:b,columns:I,data:S,alert:R.alert.show,bordered:"","row-key":e=>e.id,"tool-config":C,"row-selection":R.rowSelection},{operator:c(()=>[u(M,null,{default:c(()=>[u(F,{type:"primary",onClick:s[2]||(s[2]=e=>f(x).onOpen())},{icon:c(()=>[u(z)]),default:c(()=>[s[6]||(s[6]=p(" 新增 "))]),_:1}),u(L,{buttonName:"批量删除",icon:"DeleteOutlined",buttonDanger:"",selectedRowKeys:f(O),onBatchCallBack:U},null,8,["selectedRowKeys"])]),_:1})]),bodyCell:c(({column:e,record:a})=>["action"===e.dataIndex?(d(),m(M,{key:0},{default:c(()=>[h("a",{onClick:e=>f(x).onOpen(a)},"编辑",8,v),u(N,{type:"vertical"}),h("a",{onClick:e=>(e=>{j.value=e;const a={id:e.id};t.sysGroupOwnUser(a).then(e=>{G.value.showUserPlusModal(e)})})(a)},"授权用户",8,_),u(N,{type:"vertical"}),u(V,{title:"确定要删除吗？",onConfirm:e=>(e=>{let a=[{id:e.id}];t.sysGroupDelete(a).then(()=>{b.value.refresh(!0)})})(a)},{default:c(()=>[u(F,{type:"link",danger:"",size:"small"},{default:c(()=>s[7]||(s[7]=[p("删除")])),_:1})]),_:2},1032,["onConfirm"])]),_:2},1024)):y("",!0)]),_:1},8,["alert","row-key","row-selection"])]),_:1}),u(r,{ref_key:"formRef",ref:x,onSuccessful:s[3]||(s[3]=e=>f(b).refresh())},null,512),u(E,{ref_key:"userSelectorRef",ref:G,"org-tree-api":D.orgTreeApi,"user-page-api":D.userPageApi,"data-type":"object","user-show":!1,onOnBack:A},null,8,["org-tree-api","user-page-api"])],64)}}});export{w as default};
