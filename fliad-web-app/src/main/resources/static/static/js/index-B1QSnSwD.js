import{l as e}from"./logApi-CVq6tF5P.js";import a from"./lineChart-JWzx_5R4.js";import l from"./pieChart-BDQ2uIiR.js";import t from"./detail-DcHIPewM.js";import{d as r,f as o,a1 as d,U as n,V as s,k as u,a2 as i,a6 as f,Z as c,Y as v,u as p,H as m,F as y,W as _,G as g,a3 as h}from"./vue-vendor-BzDj5Url.js";import"./index-DcffTgQN.js";import"./ant-design-vendor-CRFwT3Wn.js";import"./index-mDC2N7oT.js";import"./index-yhO5Pkur.js";const b=["onClick"],k=r({name:"devVislog"}),x=Object.assign(k,{setup(r){const k=o({}),x=o(),I=o(),j=o(),C=o(),O=o(),w=o("LOGIN"),R=o([{label:"登录日志",value:"LOGIN"},{label:"登出日志",value:"LOGOUT"}]),U=[{title:"名称",dataIndex:"name"},{title:"IP地址",dataIndex:"opIp"},{title:"地址",dataIndex:"opAddress"},{title:"浏览器",dataIndex:"opBrowser"},{title:"设备",dataIndex:"opOs"},{title:"时间",dataIndex:"opTime",sorter:!0},{title:"用户",dataIndex:"opUser"},{title:"操作",dataIndex:"action",align:"center",width:"100px"}],G=()=>{k.value.searchKey&&I.value.refresh(!0)},K=a=>(k.value.category=k.value.category?k.value.category:w.value,e.logPage(Object.assign(a,k.value)).then(e=>e));return(r,o)=>{const L=d("a-card"),A=d("a-col"),N=d("a-row"),P=d("a-radio-button"),T=d("a-radio-group"),V=d("a-input-search"),q=d("a-button"),B=d("a-popconfirm"),D=d("a-space"),F=d("a-form"),H=d("s-table");return s(),n(y,null,[u(N,{gutter:10,class:"mb-2"},{default:i(()=>[u(A,{span:16},{default:i(()=>[u(L,{bordered:!1,title:"周统计"},{default:i(()=>[u(a,{ref_key:"lineChartRef",ref:C},null,512)]),_:1})]),_:1}),u(A,{span:8},{default:i(()=>[u(L,{bordered:!1,title:"总比例"},{default:i(()=>[u(l,{ref_key:"pieChartRef",ref:O},null,512)]),_:1})]),_:1})]),_:1}),u(L,{bordered:!1},{default:i(()=>[u(H,{ref_key:"tableRef",ref:I,columns:U,data:K,bordered:"","row-key":e=>e.id},{operator:i(()=>[u(F,{ref_key:"formRef",ref:x,name:"advanced_search",model:p(k),class:"ant-advanced-search-form"},{default:i(()=>[u(D,null,{default:i(()=>[u(T,{value:p(w),"onUpdate:value":o[0]||(o[0]=e=>m(w)?w.value=e:null),"button-style":"solid"},{default:i(()=>[(s(!0),n(y,null,_(p(R),e=>(s(),f(P,{key:e.value,value:e.value,onClick:a=>{return l=e.value,k.value.category=l,void I.value.refresh(!0);var l}},{default:i(()=>[g(h(e.label),1)]),_:2},1032,["value","onClick"]))),128))]),_:1},8,["value"]),u(V,{value:p(k).searchKey,"onUpdate:value":o[1]||(o[1]=e=>p(k).searchKey=e),placeholder:"请输入名称关键词","enter-button":"",allowClear:"",onSearch:G},null,8,["value"]),u(B,{title:"确定清空登录登出日志吗？",onConfirm:o[2]||(o[2]=a=>(()=>{const a={category:k.value.category?k.value.category:w.value};e.logDelete(a).then(()=>{I.value.refresh(!0)})})())},{default:i(()=>[u(q,{danger:""},{default:i(()=>o[3]||(o[3]=[g("清空")])),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),bodyCell:i(({column:e,record:a})=>["action"===e.dataIndex?(s(),f(D,{key:0},{default:i(()=>[v("a",{onClick:e=>p(j).onOpen(a)},"详情",8,b)]),_:2},1024)):c("",!0)]),_:1},8,["row-key"])]),_:1}),u(t,{ref_key:"detailRef",ref:j},null,512)],64)}}});export{x as default};
