import{_ as e}from"./index-yhO5Pkur.js";import{r as a}from"./formRules-B2bzcXv4.js";import{e as l}from"./index-DcffTgQN.js";import{d as t,f as d,a1 as o,a6 as s,V as r,a2 as n,k as u,u as i,H as c,G as m}from"./vue-vendor-BzDj5Url.js";import"./ant-design-vendor-CRFwT3Wn.js";const p=t({name:"dictForm"}),v=Object.assign(p,{emits:{successful:null},setup(t,{expose:p,emit:v}){const f=v,b=d(!1),x=d();let h=d({});const y=d([]),_=d([0]),w=()=>{b.value=!1},C={dictLabel:[a("请输入字典名称")],dictValue:[a("请选择字典值")],sortCode:[a("请选择排序")]},g=d({style:{width:"100px"}}),j=()=>{x.value.validate().then(()=>{l.submitForm(h.value,h.value.id).then(()=>{b.value=!1,f("successful")})}).catch(()=>{})};return p({onOpen:(e,a,t)=>{b.value=!0,h.value={sortCode:99,category:a},t&&(h.value.parentId=t),e&&(h.value=Object.assign({},e),h.value.category=a);const d={category:a};l.dictTree(d).then(e=>{y.value=[{id:0,parentId:"-1",name:"顶级",children:e}]})}}),(a,l)=>{const t=o("a-tree-select"),d=o("a-form-item"),p=o("a-input"),v=o("a-input-number"),f=o("a-form"),I=o("a-button"),L=e;return r(),s(L,{title:i(h).id?"编辑字典":"增加字典",width:550,visible:i(b),"destroy-on-close":!0,onClose:w},{footer:n(()=>[u(I,{class:"xn-mr8",onClick:w},{default:n(()=>l[5]||(l[5]=[m("关闭")])),_:1}),u(I,{type:"primary",onClick:j},{default:n(()=>l[6]||(l[6]=[m("保存")])),_:1})]),default:n(()=>[u(f,{ref_key:"formRef",ref:x,model:i(h),rules:C,layout:"vertical","label-col":i(g)},{default:n(()=>[u(d,{label:"上级字典：",name:"parentId"},{default:n(()=>[u(t,{value:i(h).parentId,"onUpdate:value":l[0]||(l[0]=e=>i(h).parentId=e),treeExpandedKeys:i(_),"onUpdate:treeExpandedKeys":l[1]||(l[1]=e=>c(_)?_.value=e:null),class:"xn-wd","dropdown-style":{maxHeight:"400px",overflow:"auto"},placeholder:"请选择上级字典","allow-clear":"","tree-data":i(y),"field-names":{children:"children",label:"name",value:"id"},selectable:"false",treeLine:""},null,8,["value","treeExpandedKeys","tree-data"])]),_:1}),u(d,{label:"字典名称：",name:"dictLabel"},{default:n(()=>[u(p,{value:i(h).dictLabel,"onUpdate:value":l[2]||(l[2]=e=>i(h).dictLabel=e),placeholder:"请输入字典名称","allow-clear":""},null,8,["value"])]),_:1}),u(d,{label:"字典值：",name:"dictValue"},{default:n(()=>[u(p,{value:i(h).dictValue,"onUpdate:value":l[3]||(l[3]=e=>i(h).dictValue=e),placeholder:"请输入字典值","allow-clear":"",disabled:"0"===i(h).parentId},null,8,["value","disabled"])]),_:1}),u(d,{label:"排序：",name:"sortCode"},{default:n(()=>[u(v,{class:"xn-wd",value:i(h).sortCode,"onUpdate:value":l[4]||(l[4]=e=>i(h).sortCode=e),max:1e3},null,8,["value"])]),_:1})]),_:1},8,["model","label-col"])]),_:1},8,["title","visible"])}}});export{v as default};
