import{m as e}from"./monitorApi-DqZEyMqC.js";import t from"./tokenInfoList-DVkayOHu.js";import{_ as a}from"./index-DcffTgQN.js";import{d as n,f as s,a1 as i,U as o,V as d,k as l,a2 as r,a6 as m,Z as c,F as u,G as f,a3 as p,Y as k,u as x}from"./vue-vendor-BzDj5Url.js";import"./index-yhO5Pkur.js";import"./ant-design-vendor-CRFwT3Wn.js";const I=["onClick"],v=n({name:"monitorCTab"}),b=a(Object.assign(v,{setup(a){const n=s(null),v=s(),b=[{title:"头像",dataIndex:"avatar",width:60},{title:"账号",dataIndex:"account"},{title:"姓名",dataIndex:"name",ellipsis:!0},{title:"登录地点",dataIndex:"latestLoginAddress",ellipsis:!0},{title:"最后登录时间",dataIndex:"lastLoginTime",ellipsis:!0},{title:"登录IP",dataIndex:"latestLoginIp",width:120,ellipsis:!0},{title:"令牌数",dataIndex:"tokenNumber",width:70},{title:"操作",dataIndex:"action",width:"150px",scopedSlots:{customRender:"action"}}],g=t=>e.monitorCPage(t).then(e=>e);return(a,s)=>{const h=i("a-avatar"),y=i("a-divider"),_=i("a-button"),C=i("a-popconfirm"),j=i("a-space"),w=i("s-table");return d(),o(u,null,[l(w,{ref_key:"tableRef",ref:n,columns:b,data:g,alert:!1,bordered:"","row-key":e=>e.id},{bodyCell:r(({column:t,record:a})=>["avatar"===t.dataIndex?(d(),m(h,{key:0,src:a.avatar,class:"xn-wh25"},null,8,["src"])):c("",!0),"tokenNumber"===t.dataIndex?(d(),o(u,{key:1},[f(p(a.tokenSignList.length),1)],64)):c("",!0),"action"===t.dataIndex?(d(),o(u,{key:2},[k("a",{onClick:e=>x(v).onOpen(a.tokenSignList)},"令牌列表",8,I),l(y,{type:"vertical"}),l(j,null,{default:r(()=>[l(C,{title:"确定要强退此用户吗？",onConfirm:t=>(t=>{let a=[{userId:t.id}];e.monitorCExit(a).then(()=>{n.value.refresh(!0)})})(a)},{default:r(()=>[l(_,{type:"link",danger:"",size:"small"},{default:r(()=>s[1]||(s[1]=[f("强退")])),_:1})]),_:2},1032,["onConfirm"])]),_:2},1024)],64)):c("",!0)]),_:1},8,["row-key"]),l(t,{ref_key:"tokenInfoList",ref:v,onSuccessful:s[0]||(s[0]=e=>x(n).refresh())},null,512)],64)}}}),[["__scopeId","data-v-03fb4e16"]]);export{b as default};
