(()=>{var e={84899:function(e){function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=84899,e.exports=t},67326:function(e,t,n){"use strict";let o,i,s,r,a;var l,d,c,u,h,p,g,m=n(74848),x=n(5338),f=n(40622);n(68430);var y=n(36833),j=((l={}).Start="start",l.End="end",l.LLM="llm",l.HTTP="http",l.Code="code",l.Variable="variable",l.Condition="condition",l.Loop="loop",l.BlockStart="block-start",l.BlockEnd="block-end",l.Comment="comment",l.Continue="continue",l.Break="break",l.Rabbitmq="rabbitmq",l.Database="database",l);let v="data:image/png;base64,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";var b=n(22805),C=n(34033);let A=C.Ay.span`
  font-size: 12px;
  color: red;
`,N=C.Ay.span`
  font-size: 12px;
  color: orange;
`,M=e=>{let{errors:t,warnings:n,invalid:o}=e,i=e=>e?e.map(e=>(0,m.jsx)("span",{children:e.message},e.name)):null;return(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{children:(0,m.jsx)(A,{children:i(t)})}),(0,m.jsx)("div",{children:(0,m.jsx)(N,{children:i(n)})})]})};var w=n(96540),I=n(12495),D=n(2265),S=n(62951),k=n(82360),E=n(7935),T=n(15860),L=n(47280);let z=async(e,t)=>{let n=e.get(k.rV),o=e.document,i=e.get(f.Z4G),s=e.get(f.GHE),{fromPort:r,toPort:a,mousePos:l,line:d,originLine:c}=t;if(c||!d||a)return;let u=r.node.parent,h="bottom"===r.location,p=await n.singleSelectNodePanel({position:h?{x:l.x-165,y:l.y+60}:l,containerNode:u,panelProps:{enableNodePlaceholder:!0,enableScrollClose:!0}});if(!p)return;let{nodeType:g,nodeJSON:m}=p,x=k.ld.adjustNodePosition({nodeType:g,position:l,fromPort:r,toPort:a,containerNode:u,document:o,dragService:i}),y=o.createWorkflowNodeByType(g,x,m??{},null==u?void 0:u.id);await (0,f.cbG)(20),k.ld.buildLine({fromPort:r,node:y,linesManager:s})},O="flowgram-workflow-clipboard-data";var B=((d={}).COPY="COPY",d.PASTE="PASTE",d.CUT="CUT",d.GROUP="GROUP",d.UNGROUP="UNGROUP",d.COLLAPSE="COLLAPSE",d.EXPAND="EXPAND",d.DELETE="DELETE",d.ZOOM_IN="ZOOM_IN",d.ZOOM_OUT="ZOOM_OUT",d.RESET_ZOOM="RESET_ZOOM",d.SELECT_ALL="SELECT_ALL",d.CANCEL_SELECT="CANCEL_SELECT",d);class P{async execute(){this.playgroundConfig.zoom>1.9||this.playgroundConfig.zoomout()}constructor(e){this.commandId=B.ZOOM_OUT,this.shortcuts=["meta -","ctrl -"],this.playgroundConfig=e.get(f.d0U),this.execute=this.execute.bind(this)}}class V{async execute(){this.playgroundConfig.zoom>1.9||this.playgroundConfig.zoomin()}constructor(e){this.commandId=B.ZOOM_IN,this.shortcuts=["meta =","ctrl ="],this.playgroundConfig=e.get(f.d0U),this.execute=this.execute.bind(this)}}class R{async execute(){let e=this.document.getAllNodes();this.playground.selectionService.selection=e}constructor(e){this.commandId=B.SELECT_ALL,this.shortcuts=["meta a","ctrl a"],this.document=e.get(f.Vo_),this.playground=e.playground,this.execute=this.execute.bind(this)}}var Q=n(12156);!function(e){e.traverseNodes=(n,o)=>{let{value:i}=n;if(i){if("[object Object]"===Object.prototype.toString.call(i))Object.entries(i).forEach(t=>{let[s,r]=t;return e.traverseNodes({value:r,container:i,key:s,parent:n},o)});else if(Array.isArray(i))for(let t=i.length-1;t>=0;t--){let s=i[t];e.traverseNodes({value:s,container:i,index:t,parent:n},o)}o(t({node:n}))}};let t=e=>{let{node:t}=e;return{node:t,setValue:e=>n(t,e),getParents:()=>o(t),getPath:()=>i(t),getStringifyPath:()=>s(t),deleteSelf:()=>r(t)}},n=(e,t)=>{if(!t||!e)return;e.value=t;let{container:n,key:o,index:i}=e;o&&n?n[o]=t:"number"==typeof i&&(n[i]=t)},o=e=>{let t=[],n=e;for(;n;)t.unshift(n),n=n.parent;return t},i=e=>{let t=[];return o(e).forEach(e=>{e.key?t.unshift(e.key):e.index&&t.unshift(e.index)}),t},s=e=>i(e).reduce((e,t)=>"string"!=typeof t?`${e}[${t}]`:/\W/g.test(t)?`${e}["${t}"]`:`${e}.${t}`,""),r=e=>{let{container:t,key:n,index:o}=e;n&&t?delete t[n]:"number"==typeof o&&t.splice(o,1)}}(p||(p={}));var F=g||(g={});let Z=(0,y.d_)("1234567890",6);F.getAllNodeIds=e=>{let t=new Set,n=e=>{var o;t.add(e.id),(null==(o=e.blocks)?void 0:o.length)&&e.blocks.forEach(e=>n(e))};return e.nodes.forEach(e=>n(e)),Array.from(t)},F.generateNodeReplaceMap=(e,t)=>{let n=new Map;return e.forEach(e=>{if(t(e))n.set(e,e);else{let o;do o=Z();while(!t(o));n.set(e,o)}}),n},F.replaceNodeId=(e,t)=>(((e,t)=>{let n=Array.isArray(t)?e=>{t.forEach(t=>t(e))}:t;return p.traverseNodes({value:e},n)})(e,e=>{if(!(e=>{var t,n,o,i,s,r,a;let{node:l}=e;return!!((null==l?void 0:l.key)&&["sourceNodeID","targetNodeID"].includes(l.key))&&(null==(n=l.parent)||null==(t=n.parent)?void 0:t.key)==="edges"||(null==l?void 0:l.key)==="id"&&null!=(null==(o=l.container)?void 0:o.type)&&null!=(null==(i=l.container)?void 0:i.meta)&&null!=(null==(s=l.container)?void 0:s.data)||(null==l?void 0:l.key)==="blockID"&&null!=(null==(r=l.container)?void 0:r.name)&&(null==(a=l.container)?void 0:a.source)==="block-output"})(e))return;let{node:n}=e;t.has(n.value)&&e.setValue(t.get(n.value))}),e);class H{async execute(){if(this.readonly)return;let e=await this.tryReadClipboard();if(!e||!this.isValidData(e))return;let t=this.apply(e);return t.length>0&&(Q.y8.success({content:"Copy successfully",showClose:!1}),await this.nextTick(),this.scrollNodesToView(t)),t}apply(e){let{json:t}=e,n=(e=>{let{json:t,isUniqueId:n}=e,o=g.getAllNodeIds(t),i=g.generateNodeReplaceMap(o,n);return g.replaceNodeId(t,i)})({json:t,isUniqueId:e=>!this.entityManager.getEntityById(e)}),o=this.calcPasteOffset(e.bounds),i=this.getSelectedContainer();this.applyOffset({json:n,offset:o,parent:i});let{nodes:s}=this.document.renderJSON(n,{parent:i});return this.selectNodes(s),this.playground.node.focus(),s}get readonly(){return this.playgroundConfig.readonly}isValidData(e){if((null==e?void 0:e.type)!==O)return Q.y8.error({content:"Invalid clipboard data"}),!1;if(e.source.host!==window.location.host)return Q.y8.error({content:"Cannot paste nodes from different host"}),!1;let t=this.getSelectedContainer();for(let n of e.json.nodes){let e=this.dragService.canDropToNode({dragNodeType:n.type,dropNodeType:null==t?void 0:t.flowNodeType,dropNode:t});if(!e.allowDrop)return Q.y8.error({content:e.message??"Cannot paste nodes to invalid container"}),!1}return!0}async tryReadClipboard(){try{let e=await navigator.clipboard.readText()||"";return JSON.parse(e)}catch(e){return}}calcPasteOffset(e){let{x:t,y:n,width:o,height:i}=e,{center:s}=new f.M_G(t,n,o,i),r=this.hoverService.hoveredPos;return{x:r.x-s.x,y:r.y-s.y}}applyOffset(e){let{json:t,offset:n,parent:o}=e;t.nodes.forEach(e=>{var t;if(!(null==(t=e.meta)?void 0:t.position))return;let i={x:e.meta.position.x+n.x,y:e.meta.position.y+n.y};o&&(i=this.dragService.adjustSubNodePosition(e.type,o,i)),e.meta.position=i})}getSelectedContainer(){let{activatedNode:e}=this.selectService;return(null==e?void 0:e.getNodeMeta().isContainer)?e:void 0}selectNodes(e){this.selectService.selection=e}async scrollNodesToView(e){let t=e.map(e=>e.getData(f.LY3).bounds);await this.document.playgroundConfig.scrollToView({bounds:f.M_G.enlarge(t)})}async nextTick(){await (0,f.cbG)(16),await new Promise(e=>requestAnimationFrame(e))}constructor(e){this.commandId=B.PASTE,this.shortcuts=["meta v","ctrl v"],this.playgroundConfig=e.playground.config,this.document=e.get(f.Vo_),this.selectService=e.get(f.rmK),this.entityManager=e.get(f.Zy1),this.hoverService=e.get(f.Be1),this.dragService=e.get(f.Z4G),this.playground=e.playground,this.execute=this.execute.bind(this)}}class U{async execute(){this.selectService.selectedNodes.forEach(e=>{e.renderData.expanded=!0})}constructor(e){this.commandId=B.EXPAND,this.commandDetail={label:"Expand"},this.shortcuts=["meta alt closebracket","ctrl alt openbracket"],this.selectService=e.get(f.rmK),this.execute=this.execute.bind(this)}}class Y{async execute(e){if(this.readonly)return;let t=Array.isArray(e)?e:this.selectService.selection;this.isValid(t.filter(e=>e instanceof f.FfK))&&(this.historyService.startTransaction(),t.forEach(e=>{e instanceof f.FfK?this.removeNode(e):e instanceof f.fvO?this.removeLine(e):e.dispose()}),this.selectService.selection=this.selectService.selection.filter(e=>!e.disposed),this.historyService.endTransaction())}get readonly(){return this.playgroundConfig.readonly}isValid(e){return!e.some(e=>[j.Start,j.End].includes(e.flowNodeType))||(Q.y8.error({content:"Start or End node cannot be deleted",showClose:!1}),!1)}removeNode(e){var t;if(!this.document.canRemove(e))return;let n=e.getNodeMeta(),o=null==(t=n.subCanvas)?void 0:t.call(n,e);if(null==o?void 0:o.isCanvas)return void o.parentNode.dispose();e.dispose()}removeLine(e){this.document.linesManager.canRemove(e)&&e.dispose()}constructor(e){this.commandId=B.DELETE,this.shortcuts=["backspace","delete"],this.playgroundConfig=e.playground.config,this.document=e.get(f.Vo_),this.selectService=e.get(f.rmK),this.historyService=e.get(f.kIp),this.execute=this.execute.bind(this)}}class J{async execute(){if(this.readonly||await this.hasSelectedText()||!this.isValid(this.selectedNodes))return;let e=this.toClipboardData();await this.write(e)}toClipboardData(e){let t=this.getValidNodes(e||this.selectedNodes),n=this.toSource();return{type:O,source:n,json:this.toJSON(t),bounds:this.getEntireBounds(t)}}get readonly(){return this.playgroundConfig.readonly}async hasSelectedText(){var e,t;return!!(null==(e=window.getSelection())?void 0:e.toString())&&(await navigator.clipboard.writeText((null==(t=window.getSelection())?void 0:t.toString())??""),Q.y8.success({content:"Text copied"}),!0)}get selectedNodes(){return this.selectService.selection.filter(e=>e instanceof f.FfK)}isValid(e){return 0!==e.length||(Q.y8.warning({content:"No nodes selected"}),!1)}getValidNodes(e){return e.filter(e=>![j.Start,j.End].includes(e.flowNodeType)&&!e.getNodeMeta().copyDisable)}toSource(){return{host:window.location.host}}toJSON(e){return{nodes:this.getNodeJSONs(e),edges:this.getEdgeJSONs(e)}}getNodeJSONs(e){return e.map(e=>{var t;let n=this.document.toNodeJSON(e);if(!(null==(t=n.meta)?void 0:t.position))return n;let{bounds:o}=e.getData(f.hZp);return n.meta.position={x:o.x,y:o.y},n}).filter(Boolean)}getEdgeJSONs(e){let t=new Set,n=new Set(e.map(e=>e.id));return e.forEach(e=>{let o=e.getData(f.tBW);[...o.inputLines,...o.outputLines].forEach(e=>{var o;n.has(e.from.id)&&(null==(o=e.to)?void 0:o.id)&&n.has(e.to.id)&&t.add(e)})}),Array.from(t).map(e=>e.toJSON())}getEntireBounds(e){let t=e.map(e=>e.getData(f.hZp).bounds),n=f.M_G.enlarge(t);return{x:n.x,y:n.y,width:n.width,height:n.height}}async write(e){try{await navigator.clipboard.writeText(JSON.stringify(e)),this.notifySuccess()}catch(e){console.error("Failed to write text: ",e)}}notifySuccess(){let e=[j.Start,j.End,j.BlockStart,j.BlockEnd];if(this.selectedNodes.some(t=>e.includes(t.flowNodeType)))return void Q.y8.warning({content:"The Start/End node cannot be duplicated, other nodes have been copied to the clipboard",showClose:!1});Q.y8.success({content:"Nodes have been copied to the clipboard",showClose:!1})}constructor(e){this.commandId=B.COPY,this.shortcuts=["meta c","ctrl c"],this.playgroundConfig=e.playground.config,this.document=e.get(f.Vo_),this.selectService=e.get(f.rmK),this.execute=this.execute.bind(this)}}class G{async execute(){this.selectService.selectedNodes.forEach(e=>{e.renderData.expanded=!1})}constructor(e){this.commandId=B.COLLAPSE,this.commandDetail={label:"Collapse"},this.shortcuts=["meta alt openbracket","ctrl alt openbracket"],this.selectService=e.get(f.rmK),this.execute=this.execute.bind(this)}}function W(e,t){e.addHandlers(new J(t),new H(t),new R(t),new G(t),new U(t),new Y(t),new V(t),new P(t))}var X=n(5243);class q{save(){console.log(this.document.toJSON())}}(0,X.Cg)([(0,f.WQX)(f.TbI),(0,X.Sn)("design:type",void 0===f.TbI?Object:f.TbI)],q.prototype,"ctx",void 0),(0,X.Cg)([(0,f.WQX)(f.A7z),(0,X.Sn)("design:type",void 0===f.A7z?Object:f.A7z)],q.prototype,"selectionService",void 0),(0,X.Cg)([(0,f.WQX)(f.QF1),(0,X.Sn)("design:type",void 0===f.QF1?Object:f.QF1)],q.prototype,"playground",void 0),(0,X.Cg)([(0,f.WQX)(f.Vo_),(0,X.Sn)("design:type",void 0===f.Vo_?Object:f.Vo_)],q.prototype,"document",void 0),q=(0,X.Cg)([(0,f._GM)()],q);var K=n(40005);class _{constructor(){}}K.zF.TaskRun,K.zF.TaskReport,K.zF.TaskResult,K.zF.TaskCancel,K.zF.TaskValidate,_=(0,X.Cg)([(0,f._GM)(),(0,X.Sn)("design:type",Function),(0,X.Sn)("design:paramtypes",[])],_);class ${constructor(){this[o]=async e=>{let{TaskRunAPI:t}=await n.e("4010").then(n.bind(n,26945));return t(e)},this[i]=async e=>{let{TaskReportAPI:t}=await n.e("4010").then(n.bind(n,26945));return t(e)},this[s]=async e=>{let{TaskResultAPI:t}=await n.e("4010").then(n.bind(n,26945));return t(e)},this[r]=async e=>{let{TaskCancelAPI:t}=await n.e("4010").then(n.bind(n,26945));return t(e)},this[a]=async e=>{let{TaskValidateAPI:t}=await n.e("4010").then(n.bind(n,26945));return t(e)}}}o=K.zF.TaskRun,i=K.zF.TaskReport,s=K.zF.TaskResult,r=K.zF.TaskCancel,a=K.zF.TaskValidate,$=(0,X.Cg)([(0,f._GM)(),(0,X.Sn)("design:type",Function),(0,X.Sn)("design:paramtypes",[])],$);let ee={domain:"localhost",port:4e3,protocol:"http"};class et{init(e){this.config=e}async [K.zF.TaskRun](e){return this.request(K.A4.path,K.A4.method,{body:e,errorMessage:"TaskRun failed"})}async [K.zF.TaskReport](e){return this.request(K.pM.path,K.pM.method,{queryParams:{taskID:e.taskID},errorMessage:"TaskReport failed"})}async [K.zF.TaskResult](e){return this.request(K.US.path,K.US.method,{queryParams:{taskID:e.taskID},errorMessage:"TaskResult failed",fallbackValue:{success:!1}})}async [K.zF.TaskCancel](e){return await this.request(K.Tb.path,K.Tb.method,{body:e,errorMessage:"TaskCancel failed",fallbackValue:{success:!1}})??{success:!1}}async [K.zF.TaskValidate](e){return this.request(K.X9.path,K.X9.method,{body:e,errorMessage:"TaskValidate failed"})}async request(e,t,n){try{let o=this.url(e,n.queryParams),i={method:t,redirect:"follow"};n.body&&(i.headers={"Content-Type":"application/json"},i.body=JSON.stringify(n.body));let s=await fetch(o,i),r=await s.json();if(this.isError(r))return console.error(n.errorMessage,r),n.fallbackValue;return r}catch(e){return console.error(e),n.fallbackValue}}url(e,t){let n=this.getURL(`/api${e}`);if(!t)return n;let o=new URLSearchParams(t);return`${n}?${o.toString()}`}isError(e){return!!e&&void 0!==e.code}getURL(e){let t=this.config.protocol??window.location.protocol,n=this.config.port?`${this.config.domain}:${this.config.port}`:this.config.domain;return`${t}://${n}${e}`}constructor(){this.config=ee}}et=(0,X.Cg)([(0,f._GM)(),(0,X.Sn)("design:type",Function),(0,X.Sn)("design:paramtypes",[])],et);class en{isFlowingLine(e){return this.runningNodes.some(t=>t.getData(f.tBW).inputLines.includes(e))}async taskRun(e){let t;if(this.taskID&&await this.taskCancel(),!await this.validateForm())return void this.resultEmitter.fire({errors:["表单验证失败"]});let n=this.document.toJSON(),o=await this.runtimeClient.TaskValidate({schema:JSON.stringify(n),inputs:e});if(!(null==o?void 0:o.valid))return void this.resultEmitter.fire({errors:(null==o?void 0:o.errors)??["Internal Server Error"]});this.reset();try{let o=await this.runtimeClient.TaskRun({schema:JSON.stringify(n),inputs:e});t=null==o?void 0:o.taskID}catch(e){this.resultEmitter.fire({errors:[null==e?void 0:e.message]});return}return t?(this.taskID=t,this.syncTaskReportIntervalID=setInterval(()=>{this.syncTaskReport()},500),this.taskID):void this.resultEmitter.fire({errors:["Task run failed"]})}async taskCancel(){this.taskID&&await this.runtimeClient.TaskCancel({taskID:this.taskID})}async validateForm(){let e=this.document.getAllNodes().map(e=>(0,f.BAU)(e));return(await Promise.all(e.map(async e=>null==e?void 0:e.validate()))).filter(e=>void 0!==e).every(e=>e)}reset(){this.taskID=void 0,this.nodeRunningStatus=new Map,this.runningNodes=[],this.syncTaskReportIntervalID&&clearInterval(this.syncTaskReportIntervalID),this.resetEmitter.fire({})}async syncTaskReport(){if(!this.taskID)return;let e=await this.runtimeClient.TaskReport({taskID:this.taskID});if(console.log("Sync task report",e),!e){clearInterval(this.syncTaskReportIntervalID),console.error("Sync task report failed");return}let{workflowStatus:t,inputs:n,outputs:o,messages:i}=e;if(t.terminated)if(clearInterval(this.syncTaskReportIntervalID),Object.keys(o).length>0)this.resultEmitter.fire({result:{inputs:n,outputs:o}});else{var s;this.resultEmitter.fire({errors:null==i||null==(s=i.error)?void 0:s.map(e=>e.nodeID?`${e.nodeID}: ${e.message}`:e.message)})}this.updateReport(e)}updateReport(e){let{reports:t}=e;this.runningNodes=[],this.document.getAllNodes().filter(e=>![j.BlockStart,j.BlockEnd].includes(e.flowNodeType)).forEach(e=>{let n=e.id,o=t[n];if(!o)return;o.status===K.sA.Processing&&this.runningNodes.push(e);let i=this.nodeRunningStatus.get(n);i&&o.status===i.status&&o.snapshots.length===i.nodeResultLength?o.status===K.sA.Processing&&this.reportEmitter.fire(o):(this.nodeRunningStatus.set(n,{nodeID:n,status:o.status,nodeResultLength:o.snapshots.length}),this.reportEmitter.fire(o),this.document.linesManager.forceUpdate())})}constructor(){this.runningNodes=[],this.reportEmitter=new f.vli,this.resetEmitter=new f.vli,this.resultEmitter=new f.vli,this.onNodeReportChange=this.reportEmitter.event,this.onReset=this.resetEmitter.event,this.onResultChanged=this.resultEmitter.event}}(0,X.Cg)([(0,f.WQX)(f.QF1),(0,X.Sn)("design:type",void 0===f.QF1?Object:f.QF1)],en.prototype,"playground",void 0),(0,X.Cg)([(0,f.WQX)(f.Vo_),(0,X.Sn)("design:type",void 0===f.Vo_?Object:f.Vo_)],en.prototype,"document",void 0),(0,X.Cg)([(0,f.WQX)(_),(0,X.Sn)("design:type",void 0===_?Object:_)],en.prototype,"runtimeClient",void 0),en=(0,X.Cg)([(0,f._GM)()],en);class eo extends f.Wdr{onReady(){this.listenPlaygroundEvent("contextmenu",e=>{this.config.readonlyOrDisabled||(this.openNodePanel(e),e.preventDefault(),e.stopPropagation())})}openNodePanel(e){let t=this.getPosFromMouseEvent(e),n=this.getContainerNode(t);this.nodePanelService.callNodePanel({position:t,containerNode:n,panelProps:{},onSelect:async e=>{if(!e)return;let{nodeType:o,nodeJSON:i}=e,s=this.dragService.adjustSubNodePosition(o,n,t),r=this.ctx.document.createWorkflowNodeByType(o,s,i??{},null==n?void 0:n.id);this.selectService.select(r)},onClose:()=>{}})}getContainerNode(e){let t=this.document.getAllNodes(),n=L.Rw.getContainerTransforms(t),o=L.Rw.getCollisionTransform({targetPoint:e,transforms:n,document:this.document});return null==o?void 0:o.entity}}(0,X.Cg)([(0,f.WQX)(f.TbI),(0,X.Sn)("design:type",void 0===f.TbI?Object:f.TbI)],eo.prototype,"ctx",void 0),(0,X.Cg)([(0,f.WQX)(k.rV),(0,X.Sn)("design:type",void 0===k.rV?Object:k.rV)],eo.prototype,"nodePanelService",void 0),(0,X.Cg)([(0,f.WQX)(f.Be1),(0,X.Sn)("design:type",void 0===f.Be1?Object:f.Be1)],eo.prototype,"hoverService",void 0),(0,X.Cg)([(0,f.WQX)(f.rmK),(0,X.Sn)("design:type",void 0===f.rmK?Object:f.rmK)],eo.prototype,"selectService",void 0),(0,X.Cg)([(0,f.WQX)(f.Vo_),(0,X.Sn)("design:type",void 0===f.Vo_?Object:f.Vo_)],eo.prototype,"document",void 0),(0,X.Cg)([(0,f.WQX)(f.Z4G),(0,X.Sn)("design:type",void 0===f.Z4G?Object:f.Z4G)],eo.prototype,"dragService",void 0),eo=(0,X.Cg)([(0,f._GM)()],eo);let ei=(0,f.XY6)({onInit(e,t){e.playground.registerLayer(eo)}}),es=(0,f.XY6)({onBind(e,t){let{bind:n,rebind:o}=e;n(_).toSelf().inSingletonScope(),n(et).toSelf().inSingletonScope(),n($).toSelf().inSingletonScope(),"server"===t.mode?o(_).to(et):o(_).to($),n(en).toSelf().inSingletonScope()},onInit(e,t){"server"===t.mode&&e.get(_).init(t.serverConfig)}});var er=n(52601);function ea(){let e=(0,f.h1n)(f.UGO),t=(0,f.b6f)(),n=e.getVar();if((0,w.useEffect)(()=>{let n=e.output.onVariableListChange(()=>{t()});return()=>{n.dispose()}},[]),!n)return;let o=n.type?b.Xt.astToSchema(n.type):{type:"object"};return(0,m.jsx)(b.lA,{value:o,onChange:e=>n.updateType(b.Xt.schemaToAST(e))})}function el(){let e=(0,b.yc)({});return(0,m.jsx)(Q.PH,{treeData:e})}function ed(){let[e,t]=(0,w.useState)(!1);return(0,m.jsxs)("div",{className:"panel-wrapper-ayBQrI",children:[(0,m.jsx)(Q.m_,{content:"Toggle Variable Panel",children:(0,m.jsx)(Q.$n,{className:`variable-panel-button-uJvkFw ${e?"close-I9oByI":""}`,theme:e?"borderless":"light",onClick:()=>t(e=>!e),children:e?(0,m.jsx)(er.A,{}):(0,m.jsx)("img",{src:v,width:20,height:20})})}),(0,m.jsx)(Q.Nt,{isOpen:e,children:(0,m.jsx)("div",{className:"panel-container-QiQBWk",children:(0,m.jsxs)(Q.tU,{children:[(0,m.jsx)(Q.tU.TabPane,{itemKey:"variables",tab:"Variable List",children:(0,m.jsx)(el,{})}),(0,m.jsx)(Q.tU.TabPane,{itemKey:"global",tab:"Global Editor",children:(0,m.jsx)(ea,{})})]})})})]})}class ec extends f.Wdr{onReady(){this.config.onDataChange(()=>{let{scrollX:e,scrollY:t}=this.config.config;f.SiQ.setStyle(this.node,{position:"absolute",right:25-e,top:t+25})})}render(){return(0,m.jsx)(ed,{})}}ec=(0,X.Cg)([(0,f._GM)()],ec);let eu=async()=>(await new Promise(e=>setTimeout(e,1e3)),{type:"object",properties:{userId:{type:"string"}}}),eh=(0,f.XY6)({onInit(e){e.playground.registerLayer(ec),eu().then(t=>{e.get(f.UGO).setVar(f.vi.createVariableDeclaration({key:"global",meta:{title:"Global",icon:v},type:b.Xt.schemaToAST(t)}))})}}),ep={render:e=>{let{form:t}=e;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(tH,{}),(0,m.jsxs)(tE,{children:[(0,m.jsx)(tz,{}),(0,m.jsx)(Q.cG,{}),(0,m.jsx)(b.Nm,{displayFromScope:!0})]})]})},validateTrigger:f.N0$.onChange,validate:{title:e=>{let{value:t}=e;return t?void 0:"Title is required"},"inputsValues.*":e=>{var t;let{value:n,context:o,formValues:i,name:s}=e,r=s.replace(/^inputsValues\./,""),a=(null==(t=i.inputs)?void 0:t.required)||[];return(0,b.Id)(n,{node:o.node,required:a.includes(r),errorMessages:{required:`${r} is required`}})}},formatOnInit:(e,t)=>e,formatOnSubmit:(e,t)=>e,effect:{title:b.q8,outputs:b.LC,inputsValues:[...b.Q3,...(0,b.Kq)({scope:"public"})],"inputsValues.*":(0,b.OS)(e=>{console.log(`[${e.context.node.id}][${e.name}] Schema Of Ref Updated`)})}};var eg=n(97424),em=n(41945),ex=n(53860),ef=n(61880),ey=((c={}).Title="title",c.Color="color",c);let ej=e=>{let{size:t}=e;return(0,m.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg",style:{width:t,height:t},children:(0,m.jsx)("path",{id:"group",fill:"currentColor",fillRule:"evenodd",stroke:"none",d:"M 0.009766 10 L 0.009766 9.990234 L 0 9.990234 L 0 7.5 L 1 7.5 L 1 9 L 2.5 9 L 2.5 10 L 0.009766 10 Z M 3.710938 10 L 3.710938 9 L 6.199219 9 L 6.199219 10 L 3.710938 10 Z M 7.5 10 L 7.5 9 L 9 9 L 9 7.5 L 10 7.5 L 10 9.990234 L 9.990234 9.990234 L 9.990234 10 L 7.5 10 Z M 0 6.289063 L 0 3.800781 L 1 3.800781 L 1 6.289063 L 0 6.289063 Z M 9 6.289063 L 9 3.800781 L 10 3.800781 L 10 6.289063 L 9 6.289063 Z M 0 2.5 L 0 0.009766 L 0.009766 0.009766 L 0.009766 0 L 2.5 0 L 2.5 1 L 1 1 L 1 2.5 L 0 2.5 Z M 9 2.5 L 9 1 L 7.5 1 L 7.5 0 L 9.990234 0 L 9.990234 0.009766 L 10 0.009766 L 10 2.5 L 9 2.5 Z M 3.710938 1 L 3.710938 0 L 6.199219 0 L 6.199219 1 L 3.710938 1 Z"})})},ev=e=>{let{size:t}=e;return(0,m.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg",style:{width:t,height:t},children:(0,m.jsx)("path",{id:"ungroup",fill:"currentColor",fillRule:"evenodd",stroke:"none",d:"M 9.654297 10.345703 L 8.808594 9.5 L 7.175781 9.5 L 7.175781 8.609375 L 7.917969 8.609375 L 1.390625 2.082031 L 1.390625 2.824219 L 0.5 2.824219 L 0.5 1.191406 L -0.345703 0.345703 L 0.283203 -0.283203 L 1.166016 0.599609 L 2.724609 0.599609 L 2.724609 1.490234 L 2.056641 1.490234 L 8.509766 7.943359 L 8.509766 7.275391 L 9.400391 7.275391 L 9.400391 8.833984 L 10.283203 9.716797 L 9.654297 10.345703 Z M 0.509766 9.5 L 0.509766 9.490234 L 0.5 9.490234 L 0.5 7.275391 L 1.390625 7.275391 L 1.390625 8.609375 L 2.724609 8.609375 L 2.724609 9.5 L 0.509766 9.5 Z M 3.802734 9.5 L 3.802734 8.609375 L 6.017578 8.609375 L 6.017578 9.5 L 3.802734 9.5 Z M 0.5 6.197266 L 0.5 3.982422 L 1.390625 3.982422 L 1.390625 6.197266 L 0.5 6.197266 Z M 8.509766 6.197266 L 8.509766 3.982422 L 9.400391 3.982422 L 9.400391 6.197266 L 8.509766 6.197266 Z M 8.509766 2.824219 L 8.509766 1.490234 L 7.175781 1.490234 L 7.175781 0.599609 L 9.390625 0.599609 L 9.390625 0.609375 L 9.400391 0.609375 L 9.400391 2.824219 L 8.509766 2.824219 Z M 3.802734 1.490234 L 3.802734 0.599609 L 6.017578 0.599609 L 6.017578 1.490234 L 3.802734 1.490234 Z"})})},eb=e=>{let{node:t,style:n}=e,o=(0,f.h1n)(f.Ju9);return(0,m.jsx)(Q.m_,{content:"Ungroup",children:(0,m.jsx)("div",{className:"workflow-group-ungroup",style:n,children:(0,m.jsx)(Q.$n,{icon:(0,m.jsx)(ev,{size:14}),style:{height:30,width:30},theme:"borderless",type:"tertiary",onClick:()=>{o.executeCommand(T.oh.Ungroup,t)}})})})};var eC=n(87315);let eA=()=>{let[e,t]=(0,w.useState)(!1);return(0,m.jsx)(f.D0$,{name:ey.Title,children:n=>{let{field:o}=n;return e?(0,m.jsx)(Q.pd,{autoFocus:!0,className:"workflow-group-title-input",size:"small",value:o.value,onChange:o.onChange,onMouseDown:e=>e.stopPropagation(),onBlur:()=>t(!1),draggable:!1,onEnterPress:()=>t(!1)}):(0,m.jsx)("p",{className:"workflow-group-title",onDoubleClick:()=>t(!0),children:o.value??"Group"})}})},eN="Blue",eM={Red:{50:"#fef2f2",300:"#fca5a5",400:"#f87171"},Orange:{50:"#fff7ed",300:"#fdba74",400:"#fb923c"},Amber:{50:"#fffbeb",300:"#fcd34d",400:"#fbbf24"},Yellow:{50:"#fef9c3",300:"#fde047",400:"#facc15"},Lime:{50:"#f7fee7",300:"#bef264",400:"#a3e635"},Green:{50:"#f0fdf4",300:"#86efac",400:"#4ade80"},Emerald:{50:"#ecfdf5",300:"#6ee7b7",400:"#34d399"},Teal:{50:"#f0fdfa",300:"#5eead4",400:"#2dd4bf"},Cyan:{50:"#ecfeff",300:"#67e8f9",400:"#22d3ee"},Sky:{50:"#ecfeff",300:"#7dd3fc",400:"#38bdf8"},Blue:{50:"#eff6ff",300:"#93c5fd",400:"#60a5fa"},Indigo:{50:"#eef2ff",300:"#a5b4fc",400:"#818cf8"},Violet:{50:"#f5f3ff",300:"#c4b5fd",400:"#a78bfa"},Purple:{50:"#faf5ff",300:"#d8b4fe",400:"#c084fc"},Fuchsia:{50:"#fdf4ff",300:"#f0abfc",400:"#e879f9"},Pink:{50:"#fdf2f8",300:"#f9a8d4",400:"#f472b6"},Rose:{50:"#fff1f2",300:"#fda4af",400:"#fb7185"},Gray:{50:"#f9fafb",300:"#d1d5db",400:"#9ca3af"}},ew=()=>(0,m.jsx)(f.D0$,{name:ey.Color,children:e=>{let{field:t}=e,n=t.value??eN;return(0,m.jsx)(Q.AM,{position:"top",mouseLeaveDelay:300,content:(0,m.jsx)("div",{className:"workflow-group-color-palette",children:Object.entries(eM).map(e=>{let[o,i]=e;return(0,m.jsx)(Q.m_,{content:o,mouseEnterDelay:300,children:(0,m.jsx)("span",{className:"workflow-group-color-item",style:{backgroundColor:i["300"],borderColor:o===n?i["400"]:"#fff"},onClick:()=>t.onChange(o)},o)},o)})}),children:(0,m.jsx)("span",{className:"workflow-group-color",style:{backgroundColor:eM[n]["300"]}})})}}),eI=()=>(0,m.jsxs)("div",{className:"workflow-group-tools",children:[(0,m.jsx)(eC.A,{className:"workflow-group-tools-drag"}),(0,m.jsx)(eA,{}),(0,m.jsx)(ew,{})]}),eD="workflow-move-into-group-tip-visible",eS="false";class ek{static get instance(){return this._instance||(this._instance=new ek),this._instance}isClosed(){return this.isCloseForever()||this.closed}close(){this.closed=!0}isCloseForever(){return localStorage.getItem(eD)===eS}closeForever(){localStorage.setItem(eD,eS)}constructor(){this.closed=!1}}let eE=C.Ay.div`
  position: absolute;
  top: 35px;

  width: 100%;
  height: 28px;
  white-space: nowrap;
  pointer-events: auto;

  .container {
    display: inline-flex;
    justify-content: center;
    height: 100%;
    width: 100%;
    background-color: rgb(255 255 255);
    border-radius: 8px 8px 0 0;

    .content {
      overflow: hidden;
      display: inline-flex;
      align-items: center;
      justify-content: flex-start;

      width: fit-content;
      height: 100%;
      padding: 0 12px;

      .text {
        font-size: 14px;
        font-weight: 400;
        font-style: normal;
        line-height: 20px;
        color: rgba(15, 21, 40, 82%);
        text-overflow: ellipsis;
        margin: 0;
      }

      .space {
        width: 128px;
      }
    }

    .actions {
      display: flex;
      gap: 8px;
      align-items: center;

      height: 28px;
      padding: 0 12px;

      .close-forever {
        cursor: pointer;

        padding: 0 3px;

        font-size: 12px;
        font-weight: 400;
        font-style: normal;
        line-height: 12px;
        color: rgba(32, 41, 69, 62%);
        margin: 0;
      }

      .close {
        display: flex;
        cursor: pointer;
        height: 100%;
        align-items: center;
      }
    }
  }
`,eT=/(Macintosh|MacIntel|MacPPC|Mac68K|iPad)/.test(navigator.userAgent),eL=()=>(0,m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",children:(0,m.jsx)("path",{fill:"#060709",fillOpacity:"0.5",d:"M12.13 12.128a.5.5 0 0 0 .001-.706L8.71 8l3.422-3.423a.5.5 0 0 0-.001-.705.5.5 0 0 0-.706-.002L8.002 7.293 4.579 3.87a.5.5 0 0 0-.705.002.5.5 0 0 0-.002.705L7.295 8l-3.423 3.422a.5.5 0 0 0 .002.706c.195.195.51.197.705.001l3.423-3.422 3.422 3.422c.196.196.51.194.706-.001"})}),ez=()=>{let{visible:e,close:t,closeForever:n}=(()=>{let e=(0,f.QSU)(),[t,n]=(0,w.useState)(!1),o=ek.instance,i=(0,f.h1n)(L.fZ),s=(0,w.useCallback)(()=>{o.isClosed()||n(!0)},[o]),r=(0,w.useCallback)(()=>{o.close(),n(!1)},[o]),a=(0,w.useCallback)(()=>{o.closeForever(),r()},[r,o]);return(0,w.useEffect)(()=>{let t=i.on(t=>{t.type===L.ix.In&&t.targetContainer===e&&s()}),o=i.on(t=>{t.type===L.ix.Out&&(t.sourceContainer!==e||e.blocks.length||n(!1))});return()=>{t.dispose(),o.dispose()}},[i,e,s,r,t]),{visible:t,close:r,closeForever:a}})();return e?(0,m.jsx)(eE,{className:"workflow-group-tips",children:(0,m.jsxs)("div",{className:"container",children:[(0,m.jsxs)("div",{className:"content",children:[(0,m.jsx)("p",{className:"text",children:`Hold ${eT?"Cmd ⌘":"Ctrl"} to drag node out`}),(0,m.jsx)("div",{className:"space",style:{width:0}})]}),(0,m.jsxs)("div",{className:"actions",children:[(0,m.jsx)("p",{className:"close-forever",onClick:n,children:"Never Remind"}),(0,m.jsx)("div",{className:"close",onClick:t,children:(0,m.jsx)(eL,{})})]})]})}):null},eO=e=>{let{onDrag:t,onFocus:n,onBlur:o,children:i,style:s}=e,r=eM[(0,f.FHZ)(ey.Color)??eN];return(0,m.jsx)("div",{className:"workflow-group-header","data-flow-editor-selectable":"false",onMouseDown:t,onTouchStart:t,onFocus:n,onBlur:o,style:{...s,backgroundColor:r["50"],borderColor:r["300"]},children:i})},eB=e=>{let{node:t,style:n}=e,o=eM[(0,f.FHZ)(ey.Color)??eN];return(0,w.useEffect)(()=>{let e=document.createElement("style");return e.textContent=`
      .workflow-group-render[data-group-id="${t.id}"] .workflow-group-background {
        border: 1px solid ${o["300"]};
      }

      .workflow-group-render.selected[data-group-id="${t.id}"] .workflow-group-background {
        border: 1px solid ${o["400"]};
      }
    `,document.head.appendChild(e),()=>{e.remove()}},[o]),(0,m.jsx)("div",{className:"workflow-group-background","data-flow-editor-selectable":"true",style:{...n,backgroundColor:`${o["300"]}29`}})},eP=()=>{let{node:e,selected:t,selectNode:n,nodeRef:o,startDrag:i,onFocus:s,onBlur:r}=(0,f.MVE)(),a=(0,L.zp)(),l=e.getData(f.LO).getFormModel(),d=null==l?void 0:l.formControl,{height:c,width:u}=a??{},h=c??0;return(0,w.useEffect)(()=>{e.renderData.node.style.pointerEvents="none"},[e]),(0,m.jsx)("div",{className:`workflow-group-render ${t?"selected":""}`,ref:o,"data-group-id":e.id,"data-node-selected":String(t),onMouseDown:n,onClick:e=>{n(e)},style:{width:u,height:c},children:(0,m.jsx)(f.lVW,{control:d,children:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(eO,{onDrag:e=>{i(e)},onFocus:s,onBlur:r,style:{height:30},children:(0,m.jsx)(eI,{})}),(0,m.jsx)(ez,{}),(0,m.jsx)(eb,{node:e}),(0,m.jsx)(eB,{node:e,style:{top:35,height:h-30-5}})]})})})},eV=e=>{let{bounds:t,children:n,flowSelectConfig:o,commandRegistry:i}=e;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{style:{position:"absolute",left:t.right,top:t.top,transform:"translate(-100%, -100%)"},onMouseDown:e=>{e.stopPropagation()},children:(0,m.jsxs)(Q.e2,{size:"small",style:{display:"flex",flexWrap:"nowrap",height:24},children:[(0,m.jsx)(Q.m_,{content:"Collapse",children:(0,m.jsx)(Q.$n,{icon:(0,m.jsx)(eg.A,{}),style:{height:24},type:"primary",theme:"solid",onMouseDown:e=>{i.executeCommand(B.COLLAPSE)}})}),(0,m.jsx)(Q.m_,{content:"Expand",children:(0,m.jsx)(Q.$n,{icon:(0,m.jsx)(em.A,{}),style:{height:24},type:"primary",theme:"solid",onMouseDown:e=>{i.executeCommand(B.EXPAND)}})}),(0,m.jsx)(Q.m_,{content:"Create Group",children:(0,m.jsx)(Q.$n,{icon:(0,m.jsx)(ej,{size:14}),style:{height:24},type:"primary",theme:"solid",onClick:()=>{i.executeCommand(T.oh.Group)}})}),(0,m.jsx)(Q.m_,{content:"Copy",children:(0,m.jsx)(Q.$n,{icon:(0,m.jsx)(ex.A,{}),style:{height:24},type:"primary",theme:"solid",onClick:()=>{i.executeCommand(B.COPY)}})}),(0,m.jsx)(Q.m_,{content:"Delete",children:(0,m.jsx)(Q.$n,{type:"primary",theme:"solid",icon:(0,m.jsx)(ef.A,{}),style:{height:24},onClick:()=>{i.executeCommand(B.DELETE)}})})]})}),(0,m.jsx)("div",{children:n})]})};var eR=n(53978),eQ=n.n(eR),eF=n(82661),eZ=n(87686);let eH=e=>{let{header:t,defaultShowDetail:n,children:o,extraBtns:i=[]}=e,[s,r]=(0,w.useState)(n),{selectNode:a}=tw();return(0,m.jsxs)("div",{className:"node-status-header-kJK5ht",onMouseDown:e=>e.stopPropagation(),children:[(0,m.jsxs)("div",{className:eQ()("node-status-header-content-emRzxd",s&&"node-status-header-content-opened-KtGonr"),onMouseDown:e=>e.stopPropagation(),onClick:e=>{e.stopPropagation(),a(e),r(!s)},children:[(0,m.jsxs)("div",{className:"status-title-qy3q43",children:[t,i.length>0?i:null]}),(0,m.jsx)("div",{className:"status-btns-Of1bbc",children:(0,m.jsx)(eZ.A,{className:eQ()({"is-show-detail-PBvEZZ":s})})})]}),s?o:null]})};var eU=n(5434);let eY="dataStructureViewer-z_SSkc",eJ="primitiveValue-A5HGw7",eG="primitiveValueQuote-W4BZdU",eW=e=>{let{label:t,value:n,level:o,isLast:i=!1}=e,[s,r]=(0,w.useState)(!0),a=e=>{navigator.clipboard.writeText(e),Q.y8.success("Copied")},l=e=>null!==e&&"object"==typeof e&&(Array.isArray(e)&&e.length>0||!Array.isArray(e)&&Object.keys(e).length>0);return(0,m.jsxs)("div",{className:"treeNode-PDltt8",children:[(0,m.jsxs)("div",{className:"treeNodeHeader-golwHZ",children:[l(n)?(0,m.jsx)("button",{className:eQ()("expandButton-XvTqqz",s?"expanded-vDx7PI":"collapsed-W_E9Ho"),onClick:()=>r(!s),children:"▶"}):(0,m.jsx)("span",{className:"expandPlaceholder-bdyXnh"}),(0,m.jsx)("span",{className:"nodeLabel-Uw9iyj",onClick:()=>a(JSON.stringify({[t]:n})),children:t}),!l(n)&&(0,m.jsx)("span",{className:"nodeValue-APTUht",children:(e=>{if(null===e)return(0,m.jsx)("span",{className:eQ()(eJ,"null-erVItZ"),children:"null"});if(void 0===e)return(0,m.jsx)("span",{className:eQ()(eJ,"undefined-nwoRqc"),children:"undefined"});switch(typeof e){case"string":return(0,m.jsxs)("span",{children:[(0,m.jsx)("span",{className:eG,children:'"'}),(0,m.jsx)("span",{className:eQ()(eJ,"string-CONxP3"),onDoubleClick:()=>a(e),children:e}),(0,m.jsx)("span",{className:eG,children:'"'})]});case"number":return(0,m.jsx)("span",{className:eQ()(eJ,"number-WjGCQl"),onDoubleClick:()=>a(String(e)),children:e});case"boolean":return(0,m.jsx)("span",{className:eQ()(eJ,"boolean-MvHMhb"),onDoubleClick:()=>a(e.toString()),children:e.toString()});case"object":if(Array.isArray(e))return(0,m.jsx)("span",{className:eJ,onDoubleClick:()=>a("[]"),children:"[]"});return(0,m.jsx)("span",{className:eJ,onDoubleClick:()=>a("{}"),children:"{}"});default:return(0,m.jsx)("span",{className:eJ,onDoubleClick:()=>a(String(e)),children:String(e)})}})(n)})]}),l(n)&&s&&(0,m.jsx)("div",{className:"treeNodeChildren-OV9FwN",children:(()=>{if(Array.isArray(n))return n.map((e,t)=>(0,m.jsx)(eW,{label:`${t+1}.`,value:e,level:o+1,isLast:t===n.length-1},t));{let e=Object.entries(n);return e.map((t,n)=>{let[i,s]=t;return(0,m.jsx)(eW,{label:`${i}:`,value:s,level:o+1,isLast:n===e.length-1},i)})}})()})]})},eX=e=>{let{data:t,level:n=0}=e;if(null==t||"object"!=typeof t)return(0,m.jsx)("div",{className:eY,children:(0,m.jsx)(eW,{label:"value",value:t,level:0})});let o=Object.entries(t);return(0,m.jsx)("div",{className:eY,children:o.map((e,t)=>{let[n,i]=e;return(0,m.jsx)(eW,{label:`${n}:`,value:i,level:0,isLast:t===o.length-1},n)})})},eq=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e&&Object.keys(e).length>0},eK=e=>{let{title:t,data:n,optional:o=!1,disableCollapse:i=!1}=e,s=eq(n),[r,a]=(0,w.useState)(!0);return o&&!s?null:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"node-status-group-ViGnAM",onClick:()=>s&&!i&&a(!r),children:[!i&&(0,m.jsx)(eU.A,{className:eQ()("node-status-group-icon-sS00RW",{"node-status-group-icon-expanded-osEM7_":r&&s})}),(0,m.jsxs)("span",{children:[t,":"]}),!s&&(0,m.jsx)(Q.vw,{size:"small",className:"node-status-group-tag-DfqR36",children:"null"})]}),s&&r?(0,m.jsx)(eX,{data:n}):null]})},e_=e=>{let{className:t,style:n}=e;return(0,m.jsx)("svg",{className:t,style:n,width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:(0,m.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12ZM11 8C11 7.44772 11.4477 7 12 7C12.5523 7 13 7.44772 13 8V13C13 13.5523 12.5523 14 12 14C11.4477 14 11 13.5523 11 13V8ZM11 16C11 15.4477 11.4477 15 12 15C12.5523 15 13 15.4477 13 16C13 16.5523 12.5523 17 12 17C11.4477 17 11 16.5523 11 16Z"})})},e$=e=>{let{className:t,style:n}=e;return(0,m.jsxs)("svg",{className:t,style:n,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none",viewBox:"0 0 20 20",children:[(0,m.jsxs)("g",{clipPath:"url(#icon-workflow-run-success_svg__a)",children:[(0,m.jsx)("path",{fill:"#3EC254",d:"M.833 10A9.166 9.166 0 0 0 10 19.168a9.166 9.166 0 0 0 9.167-9.166A9.166 9.166 0 0 0 10 .834a9.166 9.166 0 0 0-9.167 9.167"}),(0,m.jsx)("path",{fill:"#fff",d:"M6.077 9.755a.833.833 0 0 0 0 1.179l2.357 2.357a.833.833 0 0 0 1.179 0l4.714-4.714a.833.833 0 1 0-1.178-1.179l-4.125 4.125-1.768-1.768a.833.833 0 0 0-1.179 0"})]}),(0,m.jsx)("defs",{children:(0,m.jsx)("clipPath",{id:"icon-workflow-run-success_svg__a",children:(0,m.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]})},e0="snapshotNavigation-BwoVq6",e1="snapshotButton-vNwni2",e2="active-hcxdqL",e3="inactive-Zqq4Qk",e4=e=>{let{report:t}=e,{status:n}=t,[o,i]=(0,w.useState)(0),s=t.snapshots||[],r=s[o]||s[0],a=n===K.sA.Pending,l=n===K.sA.Processing,d=n===K.sA.Failed,c=n===K.sA.Succeeded,u=n===K.sA.Canceled,h=(0,w.useMemo)(()=>c?"nodeStatusSucceed-Fq7fLD":d?"nodeStatusFailed-KgXXBQ":l?"nodeStatusProcessing-zZokz6":void 0,[c,d,l]);return t?(0,m.jsx)(eH,{header:(0,m.jsxs)(m.Fragment,{children:[l?(0,m.jsx)(eF.A,{spin:!0,className:eQ()("icon-z_ymnO","processing-MW5p6Z")}):c?(0,m.jsx)(e$,{}):(0,m.jsx)(e_,{className:eQ()(h,"round-qdVLF3")}),(()=>{let e=(()=>{if(l)return"Running";if(a)return"Run terminated";if(c)return"Succeed";if(d)return"Failed";if(u)return"Canceled"})();return e?(0,m.jsx)("p",{className:"desc-kq_qC3",children:e}):null})(),(0,m.jsx)(Q.vw,{size:"small",className:h,children:(t.timeCost/1e3).toFixed(2)+"s"})]}),children:(0,m.jsxs)("div",{className:"container-XNEJhn",children:[d&&(null==r?void 0:r.error)&&(0,m.jsx)("div",{className:"error-dUpHGZ",children:r.error}),(()=>{if(s.length<=1)return null;let e=(0,m.jsxs)("p",{className:"count-beAEzr",children:["Total: ",s.length]});return s.length<=6?(0,m.jsxs)(m.Fragment,{children:[e,(0,m.jsx)("div",{className:e0,children:s.map((e,t)=>(0,m.jsx)(Q.$n,{size:"small",type:o===t?"primary":"tertiary",onClick:()=>i(t),className:eQ()(e1,{[e2]:o===t,[e3]:o!==t}),children:t+1},t))})]}):(0,m.jsxs)(m.Fragment,{children:[e,(0,m.jsxs)("div",{className:e0,children:[s.slice(0,6).map((e,t)=>(0,m.jsx)(Q.$n,{size:"small",type:"tertiary",onClick:()=>i(t),className:eQ()(e1,{[e2]:o===t,[e3]:o!==t}),children:t+1},t)),(0,m.jsx)(Q.l6,{value:o>=6?o:void 0,onChange:e=>i(e),className:eQ()("snapshotSelect-AYvy_H",{[e2]:o>=6,[e3]:o<6}),size:"small",placeholder:"Select",children:s.slice(6).map((e,t)=>{let n=t+6;return(0,m.jsx)(Q.l6.Option,{value:n,children:n+1},n)})})]})]})})(),(0,m.jsx)(eK,{title:"Inputs",data:null==r?void 0:r.inputs}),(0,m.jsx)(eK,{title:"Outputs",data:null==r?void 0:r.outputs}),(0,m.jsx)(eK,{title:"Branch",data:null==r?void 0:r.branch,optional:!0}),(0,m.jsx)(eK,{title:"Data",data:null==r?void 0:r.data,optional:!0})]})}):null},e5=()=>{let e=(()=>{let e=(0,f.QSU)(),[t,n]=(0,w.useState)(),o=(0,f.h1n)(en);return(0,w.useEffect)(()=>{let t=o.onNodeReportChange(t=>{t.id===e.id&&n(t)}),i=o.onReset(()=>{n(void 0)});return()=>{t.dispose(),i.dispose()}},[]),t})();return e?(0,m.jsx)(e4,{report:e}):null},e9=w.createContext({}),e6=w.createContext({visible:!1,setNodeId:()=>{}}),e8=w.createContext(!1);var e7=n(71725);let te=C.Ay.div`
  align-items: flex-start;
  background-color: #fff;
  border: 1px solid rgba(6, 7, 9, 0.15);
  border-radius: 8px;
  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.04), 0 4px 12px 0 rgba(0, 0, 0, 0.02);
  display: flex;
  flex-direction: column;
  justify-content: center;
  position: relative;
  width: 360px;
  height: auto;

  &.selected {
    border: 1px solid #4e40e5;
  }
`,tt=()=>(0,m.jsx)(e7.A,{style:{position:"absolute",color:"red",left:-6,top:-6,zIndex:1,background:"white",borderRadius:8}}),tn=e=>{let{children:t,isScrollToView:n=!1}=e,o=tw(),{node:i,selected:s,startDrag:r,ports:a,selectNode:l,nodeRef:d,onFocus:c,onBlur:u,readonly:h}=o,[p,g]=(0,w.useState)(!1),x=(0,w.useContext)(e6),y=o.form,j=(0,f.WDY)(),v=tD(),b=i.getNodeMeta(),C=a.map(e=>(0,m.jsx)(f.hDi,{entity:e,onClick:h?void 0:v},e.id));return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(te,{className:s?"selected":"",ref:d,draggable:!0,onDragStart:e=>{r(e),g(!0)},onTouchStart:e=>{r(e),g(!0)},onClick:e=>{l(e),!p&&(x.setNodeId(o.node.id),n&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:448,o=t.transform.bounds;e.playground.scrollToView({bounds:o,scrollDelta:{x:n/2,y:0},zoom:1,scrollToCenter:!0})}(j,o.node))},onMouseUp:()=>g(!1),onFocus:c,onBlur:u,"data-node-selected":String(s),style:{...b.wrapperStyle,outline:(null==y?void 0:y.state.invalid)?"1px solid red":"none"},children:t}),C]})},to=e=>{let{node:t}=e,n=(0,f.MVE)(),o=n.form,i=(0,w.useCallback)(()=>t.renderData.node||document.body,[]);return(0,m.jsx)(Q.sG,{getPopupContainer:i,children:(0,m.jsxs)(e9.Provider,{value:n,children:[(0,m.jsxs)(tn,{children:[(null==o?void 0:o.state.invalid)&&(0,m.jsx)(tt,{}),null==o?void 0:o.render()]}),(0,m.jsx)(e5,{})]})})},ti=()=>(0,m.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,m.jsxs)("g",{id:"add",children:[(0,m.jsx)("path",{id:"background",fill:"#ffffff",fillRule:"evenodd",stroke:"none",d:"M 24 12 C 24 5.372583 18.627417 0 12 0 C 5.372583 0 -0 5.372583 -0 12 C -0 18.627417 5.372583 24 12 24 C 18.627417 24 24 18.627417 24 12 Z"}),(0,m.jsx)("path",{id:"content",fill:"currentColor",fillRule:"evenodd",stroke:"none",d:"M 22 12.005 C 22 6.482153 17.522848 2.004999 12 2.004999 C 6.477152 2.004999 2 6.482153 2 12.005 C 2 17.527847 6.477152 22.004999 12 22.004999 C 17.522848 22.004999 22 17.527847 22 12.005 Z"}),(0,m.jsx)("path",{id:"cross",fill:"#ffffff",stroke:"none",d:"M 11.411996 16.411797 C 11.411996 16.736704 11.675362 17 12.00023 17 C 12.325109 17 12.588474 16.736704 12.588474 16.411797 L 12.588474 12.58826 L 16.41201 12.58826 C 16.736919 12.58826 17.000216 12.324894 17.000216 12.000015 C 17.000216 11.675147 16.736919 11.411781 16.41201 11.411781 L 12.588474 11.411781 L 12.588474 7.588234 C 12.588474 7.263367 12.325109 7 12.00023 7 C 11.675362 7 11.411996 7.263367 11.411996 7.588234 L 11.411996 11.411781 L 7.588449 11.411781 C 7.263581 11.411781 7.000215 11.675147 7.000215 12.000015 C 7.000215 12.324894 7.263581 12.58826 7.588449 12.58826 L 11.411996 12.58826 L 11.411996 16.411797 Z"})]})}),ts=e=>{let{line:t,selected:n,hovered:o,color:i}=e,s=(e=>{let t=(0,f.rJT)(),{line:n,selected:o=!1,hovered:i}=e;return!n.disposed&&!t.config.readonly&&(!!o||!!i)})({line:t,selected:n,hovered:o}),r=(0,f.h1n)(k.rV),a=(0,f.h1n)(f.Vo_),l=(0,f.h1n)(f.Z4G),d=(0,f.h1n)(f.GHE),c=(0,f.h1n)(f.kIp),{fromPort:u,toPort:h}=t,p=(0,w.useCallback)(async()=>{let e={x:(t.position.from.x+t.position.to.x)/2,y:(t.position.from.y+t.position.to.y)/2},n=u.node.parent,o=await r.singleSelectNodePanel({position:e,containerNode:n,panelProps:{enableScrollClose:!0}});if(!o)return;let{nodeType:i,nodeJSON:s}=o,p=k.ld.adjustNodePosition({nodeType:i,position:e,fromPort:u,toPort:h,containerNode:n,document:a,dragService:l}),g=a.createWorkflowNodeByType(i,p,s??{},null==n?void 0:n.id);u&&h&&k.ld.subNodesAutoOffset({node:g,fromPort:u,toPort:h,containerNode:n,historyService:c,dragService:l,linesManager:d}),await (0,f.cbG)(20),k.ld.buildLine({fromPort:u,node:g,toPort:h,linesManager:d}),t.dispose()},[]);return s?(0,m.jsx)("div",{className:"line-add-button",style:{transform:`translate(-50%, -50%) translate(${t.center.labelX}px, ${t.center.labelY}px)`,color:i},"data-testid":"sdk.workflow.canvas.line.add","data-line-id":t.id,onClick:p,children:(0,m.jsx)(ti,{})}):(0,m.jsx)(m.Fragment,{})},tr=()=>(0,m.jsx)("div",{className:"node-placeholder","data-testid":"workflow.detail.node-panel.placeholder",children:(0,m.jsx)(Q.EA,{className:"node-placeholder-skeleton",loading:!0,active:!0,placeholder:(0,m.jsxs)("div",{className:"",children:[(0,m.jsxs)("div",{className:"node-placeholder-hd",children:[(0,m.jsx)(Q.EA.Avatar,{shape:"square",className:"node-placeholder-avatar"}),(0,m.jsx)(Q.EA.Title,{style:{width:141}})]}),(0,m.jsxs)("div",{className:"node-placeholder-content",children:[(0,m.jsxs)("div",{className:"node-placeholder-footer",children:[(0,m.jsx)(Q.EA.Title,{style:{width:85}}),(0,m.jsx)(Q.EA.Title,{style:{width:241}})]}),(0,m.jsx)(Q.EA.Title,{style:{width:220}})]})]})})}),ta=C.Ay.div`
  width: 100%;
  height: 32px;
  border-radius: 5px;
  display: flex;
  align-items: center;
  cursor: pointer;
  font-size: 19px;
  padding: 0 15px;
  &:hover {
    background-color: hsl(252deg 62% 55% / 9%);
    color: hsl(252 62% 54.9%);
  }
`,tl=C.Ay.div`
  font-size: 12px;
  margin-left: 10px;
`;function td(e){return(0,m.jsxs)(ta,{"data-testid":`demo-free-node-list-${e.label}`,onClick:e.disabled?void 0:e.onClick,style:e.disabled?{opacity:.3}:{},children:[(0,m.jsx)("div",{style:{fontSize:14},children:e.icon}),(0,m.jsx)(tl,{children:e.label})]})}let tc=C.Ay.div`
  max-height: 500px;
  overflow: auto;
  &::-webkit-scrollbar {
    display: none;
  }
`,tu=e=>{let{onSelect:t,containerNode:n}=e,o=(0,f.WDY)();return(0,m.jsx)(tc,{style:{width:180},children:nH.filter(e=>!1!==e.meta.nodePanelVisible).filter(e=>!e.meta.onlyInContainer||e.meta.onlyInContainer===(null==n?void 0:n.flowNodeType)).map(e=>{var n,i;return(0,m.jsx)(td,{disabled:!((null==(n=e.canAdd)?void 0:n.call(e,o))??!0),icon:(0,m.jsx)("img",{style:{width:10,height:10,borderRadius:4},src:null==(i=e.info)?void 0:i.icon}),label:e.type,onClick:n=>((e,n)=>{var i;let s=null==(i=n.onAdd)?void 0:i.call(n,o);t({nodeType:n.type,selectEvent:e,nodeJSON:s})})(n,e)},e.type)})})},th=e=>{let{onSelect:t,position:n,onClose:o,containerNode:i,panelProps:s={}}=e,{enableNodePlaceholder:r}=s;return(0,m.jsx)(Q.AM,{trigger:"click",visible:!0,onVisibleChange:e=>e?null:o(),content:(0,m.jsx)(tu,{onSelect:t,containerNode:i}),placement:"right",popupAlign:{offset:[30,0]},overlayStyle:{padding:0},children:(0,m.jsx)("div",{style:r?{position:"absolute",top:n.y-61.5,left:n.x,width:360,height:100}:{position:"absolute",top:n.y,left:n.x,width:0,height:0},children:r&&(0,m.jsx)(tr,{})})})};var tp=((u={}).Size="size",u.Note="note",u),tg=((h={}).Change="change",h.MultiSelect="multiSelect",h.Select="select",h.Blur="blur",h);class tm{get value(){return this.innerValue}setValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.initialized&&e!==this.innerValue&&(this.innerValue=e,this.syncEditorValue(),this.emitter.fire({type:tg.Change,value:this.innerValue}))}set element(e){this.initialized||(this.editor=e)}get element(){return this.editor}setFocus(e){this.initialized&&(e&&!this.focused?this.editor.focus():!e&&this.focused&&(this.editor.blur(),this.deselect(),this.emitter.fire({type:tg.Blur})))}selectEnd(){if(!this.initialized)return;let e=this.editor.value.length;this.editor.setSelectionRange(e,e)}get focused(){return document.activeElement===this.editor}deselect(){let e=window.getSelection();e&&e.removeAllRanges()}get initialized(){return!!this.editor}syncEditorValue(){this.initialized&&(this.editor.value=this.innerValue)}constructor(){this.innerValue="",this.emitter=new f.vli,this.on=this.emitter.event}}var tx=n(99832);let tf=e=>{var t;let{node:n,deleteNode:o,updateTitleEdit:i}=e,[s,r]=(0,w.useState)(!0),a=(0,f.WDY)(),l=n.getNodeRegistry(),d=(0,f.h1n)(L.fZ),c=(0,f.h1n)(f.rmK),u=(0,f.h1n)(f.Z4G),h=d.canMoveOutContainer(n),p=(0,w.useCallback)(()=>{r(!1),requestAnimationFrame(()=>{r(!0)})},[]),g=(0,w.useCallback)(async e=>{e.stopPropagation();let t=n.parent;d.moveOutContainer({node:n}),await (0,f.cbG)(16),await d.clearInvalidLines({dragNode:n,sourceParent:t}),p(),c.selectNode(n),u.startDragSelectedNodes(e)},[d,n,p]),x=(0,w.useCallback)(e=>{let t=new J(a),o=new H(a),i=t.toClipboardData([n]);o.apply(i),e.stopPropagation()},[a,n]),y=(0,w.useCallback)(e=>{o(),e.stopPropagation()},[a,n]),j=(0,w.useCallback)(()=>{i(!0)},[i]);return s?(0,m.jsx)(Q.ms,{trigger:"hover",position:"bottomRight",render:(0,m.jsxs)(Q.ms.Menu,{children:[(0,m.jsx)(Q.ms.Item,{onClick:j,children:"Edit Title"}),h&&(0,m.jsx)(Q.ms.Item,{onClick:g,children:"Move out"}),(0,m.jsx)(Q.ms.Item,{onClick:x,disabled:!0===l.meta.copyDisable,children:"Create Copy"}),(0,m.jsx)(Q.ms.Item,{onClick:y,disabled:!!((null==(t=l.canDelete)?void 0:t.call(l,a,n))||l.meta.deleteDisable),children:"Delete"})]}),children:(0,m.jsx)(Q.K0,{color:"secondary",size:"small",theme:"borderless",icon:(0,m.jsx)(tx.A,{}),onClick:e=>e.stopPropagation()})}):(0,m.jsx)(m.Fragment,{})},ty=e=>{let{node:t,focused:n,deleteNode:o}=e;return(0,m.jsx)("div",{className:`workflow-comment-more-button ${n?"workflow-comment-more-button-focused":""}`,children:(0,m.jsx)(tf,{node:t,deleteNode:o})})},tj=e=>{let{model:t,style:n,onChange:o}=e,i=(0,f.rJT)(),s=(0,w.useRef)(null),r=t.value||t.focused?void 0:"Enter a comment...";return(0,w.useEffect)(()=>{let e=t.on(e=>{e.type===tg.Change&&(null==o||o(t.value))});return()=>e.dispose()},[t,o]),(0,w.useEffect)(()=>{s.current&&(t.element=s.current)},[s]),(0,m.jsxs)("div",{className:"workflow-comment-editor",children:[(0,m.jsx)("p",{className:"workflow-comment-editor-placeholder",children:r}),(0,m.jsx)("textarea",{className:"workflow-comment-editor-textarea",ref:s,style:n,readOnly:i.config.readonly,onChange:e=>{let{value:n}=e.target;t.setValue(n)},onFocus:()=>{t.setFocus(!0)},onBlur:()=>{t.setFocus(!1)}})]})},tv=e=>{let{model:t,stopEvent:n=!0,style:o}=e,i=(0,f.rJT)(),{startDrag:s,onFocus:r,onBlur:a,selectNode:l}=(0,f.MVE)(),d=e=>{n&&(e.preventDefault(),e.stopPropagation()),t.setFocus(!1),s(e),l(e),i.node.focus()};return(0,m.jsx)("div",{className:"workflow-comment-drag-area","data-flow-editor-selectable":"false",draggable:!0,style:o,onMouseDown:d,onTouchStart:d,onFocus:r,onBlur:a})},tb=e=>{let{model:t,focused:n,overflow:o}=e,i=(0,f.rJT)(),{selectNode:s}=(0,f.MVE)(),[r,a]=(0,w.useState)(!1);return(0,w.useEffect)(()=>{n||a(!1)},[n]),(0,m.jsx)("div",{className:"workflow-comment-content-drag-area",onMouseDown:e=>{if(r)return;e.preventDefault(),e.stopPropagation(),t.setFocus(!1),s(e),i.node.focus();let n=e.clientX,o=e.clientY,l=e=>{let t=e.clientX-n,i=e.clientY-o;5>Math.abs(t)&&5>Math.abs(i)&&a(!0),document.removeEventListener("mouseup",l),document.removeEventListener("click",l)};document.addEventListener("mouseup",l),document.addEventListener("click",l)},onWheel:e=>{let n=t.element;if(r||!o||!n)return;e.stopPropagation();let i=n.scrollHeight-n.clientHeight,s=Math.min(Math.max(n.scrollTop+e.deltaY,0),i);n.scroll(0,s)},style:{display:r?"none":void 0},children:(0,m.jsx)(tv,{style:{position:"relative",width:"100%",height:"100%"},model:t,stopEvent:!1})})},tC=e=>{let{focused:t,children:n,style:o}=e;return(0,m.jsx)("div",{className:"workflow-comment-container","data-flow-editor-selectable":"false",style:{outline:t?"1px solid #FF811A":"1px solid #F2B600",backgroundColor:t?"#FFF3EA":"#FFFBED",scrollbarWidth:"thin",scrollbarColor:"rgb(159 159 158 / 65%) transparent","&:WebkitScrollbar":{width:"4px"},"&::WebkitScrollbarTrack":{background:"transparent"},"&::WebkitScrollbarThumb":{backgroundColor:"rgb(159 159 158 / 65%)",borderRadius:"20px",border:"2px solid transparent"},...o},children:n})},tA=e=>{let{model:t,onResize:n,getDelta:o,style:i}=e,s=(0,f.rJT)(),{selectNode:r}=(0,f.MVE)(),a=e=>{if(f.D9h.preventDefault(e),e.stopPropagation(),!n)return;let{resizing:i,resizeEnd:a}=n();t.setFocus(!1),r(e),s.node.focus();let{clientX:l,clientY:d}=f.D9h.getEventCoord(e),c=e=>{let{clientX:t,clientY:n}=f.D9h.getEventCoord(e),s=null==o?void 0:o({x:t-l,y:n-d});s&&i&&i(s)},u=()=>{a(),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",u),document.removeEventListener("click",u),document.removeEventListener("touchmove",c),document.removeEventListener("touchend",u),document.removeEventListener("touchcancel",u)};document.addEventListener("mousemove",c),document.addEventListener("mouseup",u),document.addEventListener("click",u),document.addEventListener("touchmove",c,{passive:!1}),document.addEventListener("touchend",u),document.addEventListener("touchcancel",u)};return(0,m.jsx)("div",{className:"workflow-comment-resize-area",style:i,"data-flow-editor-selectable":"false",onMouseDown:a,onTouchStart:a})},tN=e=>{let{model:t,overflow:n,onResize:o}=e;return(0,m.jsxs)("div",{style:{zIndex:999},children:[(0,m.jsx)(tv,{style:{position:"absolute",left:-10,top:10,width:20,height:"calc(100% - 20px)"},model:t}),(0,m.jsx)(tv,{style:{position:"absolute",right:-10,top:10,height:"calc(100% - 20px)",width:n?10:20},model:t}),(0,m.jsx)(tv,{style:{position:"absolute",top:-10,left:10,width:"calc(100% - 20px)",height:20},model:t}),(0,m.jsx)(tv,{style:{position:"absolute",bottom:-10,left:10,width:"calc(100% - 20px)",height:20},model:t}),(0,m.jsx)(tA,{style:{position:"absolute",left:0,top:0,cursor:"nwse-resize"},model:t,getDelta:e=>{let{x:t,y:n}=e;return{top:n,right:0,bottom:0,left:t}},onResize:o}),(0,m.jsx)(tA,{style:{position:"absolute",right:0,top:0,cursor:"nesw-resize"},model:t,getDelta:e=>{let{x:t,y:n}=e;return{top:n,right:t,bottom:0,left:0}},onResize:o}),(0,m.jsx)(tA,{style:{position:"absolute",right:0,bottom:0,cursor:"nwse-resize"},model:t,getDelta:e=>{let{x:t,y:n}=e;return{top:0,right:t,bottom:n,left:0}},onResize:o}),(0,m.jsx)(tA,{style:{position:"absolute",left:0,bottom:0,cursor:"nesw-resize"},model:t,getDelta:e=>{let{x:t,y:n}=e;return{top:0,right:0,bottom:n,left:t}},onResize:o})]})},tM=e=>{let{node:t}=e,n=(()=>{let e=(0,f.Ojz)(),{selected:t}=(0,f.MVE)(),n=e.getData(f.LO).getFormModel(),o=(0,w.useMemo)(()=>new tm,[]);return(0,w.useEffect)(()=>{t||o.setFocus(t)},[t,o]),(0,w.useEffect)(()=>{let e=n.getValueIn(tp.Note);o.setValue(e),o.selectEnd()},[n,o]),(0,w.useEffect)(()=>{let e=n.onFormValuesChange(e=>{let{name:t}=e;if(t!==tp.Note)return;let i=n.getValueIn(tp.Note);o.setValue(i)});return()=>e.dispose()},[n,o]),o})(),{selected:o,selectNode:i,nodeRef:s,deleteNode:r}=(0,f.MVE)(),a=t.getData(f.LO).getFormModel(),l=null==a?void 0:a.formControl,{width:d,height:c,onResize:u}=(()=>{let e=(0,f.QSU)(),t=e.getNodeMeta(),n=(0,f.rJT)(),o=(0,f.h1n)(f.kIp),{size:i={width:240,height:150}}=t,s=e.getData(f.hZp),r=e.getData(f.LO).getFormModel(),a=r.getValueIn(tp.Size),[l,d]=(0,w.useState)((null==a?void 0:a.width)??i.width),[c,u]=(0,w.useState)((null==a?void 0:a.height)??i.height);(0,w.useEffect)(()=>{r.getValueIn(tp.Size)||r.setValueIn(tp.Size,{width:l,height:c})},[r,l,c]),(0,w.useEffect)(()=>{let e=r.onFormValuesChange(e=>{let{name:t}=e;if(t!==tp.Size)return;let n=r.getValueIn(tp.Size);n&&(d(n.width),u(n.height))});return()=>e.dispose()},[r]);let h=(0,w.useCallback)(()=>{let t={width:l,height:c,originalWidth:l,originalHeight:c,positionX:s.position.x,positionY:s.position.y,offsetX:0,offsetY:0};return{resizing:e=>{if(!t)return;let{zoom:o}=n.config,i=e.top/o,r=e.right/o,a=e.bottom/o,l=e.left/o,c=Math.max(120,t.originalWidth+r-l),h=Math.max(80,t.originalHeight+a-i),p=(l>0||r<0)&&c<=120?t.offsetX:l/2+r/2,g=(i>0||a<0)&&h<=80?t.offsetY:i,m=t.positionX+p,x=t.positionY+g;t.width=c,t.height=h,t.offsetX=p,t.offsetY=g,d(c),u(h),s.update({position:{x:m,y:x}})},resizeEnd:()=>{o.transact(()=>{o.pushOperation({type:f.ot3.dragNodes,value:{ids:[e.id],value:[{x:t.positionX+t.offsetX,y:t.positionY+t.offsetY}],oldValue:[{x:t.positionX,y:t.positionY}]}},{noApply:!0}),r.setValueIn(tp.Size,{width:t.width,height:t.height})})}}},[e,l,c,s,n,r,o]);return{width:l,height:c,onResize:h}})(),{overflow:h,updateOverflow:p}=(e=>{let{model:t,height:n}=e,o=(0,f.rJT)(),[i,s]=(0,w.useState)(!1),r=(0,w.useCallback)(()=>!!t.element&&t.element.scrollHeight>t.element.clientHeight,[t,n,o]),a=(0,w.useCallback)(()=>{s(r())},[r]);return(0,w.useEffect)(()=>{a()},[n,a]),(0,w.useEffect)(()=>{let e=t.on(e=>{e.type===tg.Change&&a()});return()=>{e.dispose()}},[t,a]),{overflow:i,updateOverflow:a}})({model:n,height:c});return(0,m.jsx)("div",{className:"workflow-comment",style:{width:d,height:c},ref:s,"data-node-selected":String(o),onMouseEnter:p,onMouseDown:e=>{setTimeout(()=>{i(e)},20)},children:(0,m.jsx)(f.lVW,{control:l,children:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(tC,{focused:o,style:{height:c},children:(0,m.jsx)(f.D0$,{name:tp.Note,children:e=>{let{field:i}=e;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(tj,{model:n,value:i.value,onChange:i.onChange}),(0,m.jsx)(tb,{model:n,focused:o,overflow:h}),(0,m.jsx)(ty,{node:t,focused:o,deleteNode:r})]})}})}),(0,m.jsx)(tN,{model:n,overflow:h,onResize:u})]})})})};function tw(){return(0,w.useContext)(e9)}function tI(){return(0,w.useContext)(e8)}let tD=()=>{let e=(0,f.rJT)(),t=(0,f.h1n)(k.rV),n=(0,f.h1n)(f.Vo_),o=(0,f.h1n)(f.Z4G),i=(0,f.h1n)(f.GHE);return(0,w.useCallback)(async(s,r)=>{let a=e.config.getPosFromMouseEvent(s),l=r.node.parent,d=await t.singleSelectNodePanel({position:a,containerNode:l,panelProps:{enableScrollClose:!0}});if(!d)return;let{nodeType:c,nodeJSON:u}=d,h=k.ld.adjustNodePosition({nodeType:c,position:"bottom"===r.location?{x:a.x,y:a.y+100}:{x:a.x+100,y:a.y},fromPort:r,containerNode:l,document:n,dragService:o}),p=n.createWorkflowNodeByType(c,h,u??{},null==l?void 0:l.id);await (0,f.cbG)(20),k.ld.buildLine({fromPort:r,node:p,linesManager:i})},[])},tS=C.Ay.div`
  box-sizing: border-box;
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: 6px;
  background-color: rgb(251, 251, 251);
  border-radius: 0 0 8px 8px;
  padding: 0 12px 12px;
`,tk=C.Ay.div`
  color: var(--semi-color-text-2);
  font-size: 12px;
  line-height: 20px;
  padding: 0px 4px;
  word-break: break-all;
  white-space: break-spaces;
`;function tE(e){var t;let{node:n,expanded:o}=tw(),i=tI(),s=n.getNodeRegistry();return(0,m.jsx)(tS,{children:(0,m.jsxs)(m.Fragment,{children:[i&&(0,m.jsx)(tk,{children:null==(t=s.info)?void 0:t.description}),(o||i)&&e.children]})})}let{Text:tT}=Q.o5;function tL(e){let{children:t,name:n,required:o,description:i,type:s,labelWidth:r,labelStyle:a,vertical:l,style:d}=e,c=(0,w.useCallback)(e=>(0,m.jsx)("div",{style:{width:"0",display:"flex",flex:"1"},children:(0,m.jsxs)(tT,{style:{width:"100%"},ellipsis:{showTooltip:!!e},children:[n,o&&(0,m.jsx)("span",{style:{color:"#f93920",paddingLeft:"2px"},children:"*"})]})}),[]);return(0,m.jsxs)("div",{style:{fontSize:12,marginBottom:6,width:"100%",position:"relative",display:"flex",gap:8,...l?{flexDirection:"column"}:{justifyContent:"center",alignItems:"center"},...d},children:[(0,m.jsxs)("div",{style:{justifyContent:"center",alignItems:"center",color:"var(--semi-color-text-0)",width:r||118,minWidth:r||118,maxWidth:r||118,position:"relative",display:"flex",columnGap:4,flexShrink:0,...a},children:[s&&(0,m.jsx)(b.cy,{value:{type:s}}),i?(0,m.jsx)(Q.m_,{content:i,children:c()}):c(!0)]}),(0,m.jsx)("div",{style:{flexGrow:1,minWidth:0},children:t})]})}function tz(){let{readonly:e}=tw();return(0,m.jsx)(f.D0$,{name:"inputs",children:t=>{var n,o;let{field:i}=t,s=(null==(n=i.value)?void 0:n.required)||[],r=null==(o=i.value)?void 0:o.properties;if(!r)return(0,m.jsx)(m.Fragment,{});let a=Object.keys(r).map(t=>{var n;let o=r[t],i=null==(n=o.extra)?void 0:n.formComponent,a=["prompt-editor"].includes(i||"");return(0,m.jsx)(f.D0$,{name:`inputsValues.${t}`,defaultValue:o.default,children:n=>{let{field:r,fieldState:l}=n;return(0,m.jsxs)(tL,{name:t,vertical:a,type:o.type,required:s.includes(t),children:["prompt-editor"===i&&(0,m.jsx)(b.Jt,{value:r.value,onChange:r.onChange,readonly:e,hasError:Object.keys((null==l?void 0:l.errors)||{}).length>0}),!i&&(0,m.jsx)(b.lc,{value:r.value,onChange:r.onChange,readonly:e,hasError:Object.keys((null==l?void 0:l.errors)||{}).length>0,schema:o}),(0,m.jsx)(M,{errors:null==l?void 0:l.errors,warnings:null==l?void 0:l.warnings})]})}},t)});return(0,m.jsx)(m.Fragment,{children:a})}})}var tO=n(63891),tB=n(25769);let tP=C.Ay.div`
  box-sizing: border-box;
  display: flex;
  justify-content: flex-start;
  align-items: center;
  width: 100%;
  column-gap: 8px;
  border-radius: 8px 8px 0 0;
  cursor: move;

  background: linear-gradient(#f2f2ff 0%, rgb(251, 251, 251) 100%);
  overflow: hidden;

  padding: 8px;
`,tV=C.Ay.div`
  font-size: 20px;
  flex: 1;
  width: 0;
`,tR=C.Ay.img`
  width: 24px;
  height: 24px;
  scale: 0.8;
  border-radius: 4px;
`,tQ=C.Ay.div`
  display: flex;
  align-items: center;
  column-gap: 4px;
`,{Text:tF}=Q.o5;function tZ(e){let{readonly:t,titleEdit:n,updateTitleEdit:o}=e,i=(0,w.useRef)(),s=n&&!t;return(0,w.useEffect)(()=>{if(s){var e;null==(e=i.current)||e.focus()}},[s]),(0,m.jsx)(tV,{children:(0,m.jsx)(f.D0$,{name:"title",children:e=>{let{field:{value:t,onChange:n},fieldState:r}=e;return(0,m.jsxs)("div",{style:{height:24},children:[s?(0,m.jsx)(Q.pd,{value:t,onChange:n,ref:i,onBlur:()=>o(!1)}):(0,m.jsx)(tF,{ellipsis:{showTooltip:!0},children:t}),(0,m.jsx)(M,{errors:null==r?void 0:r.errors})]})}})})}function tH(){let{node:e,expanded:t,toggleExpand:n,readonly:o}=tw(),[i,s]=(0,w.useState)(!1),r=(0,f.WDY)(),{setNodeId:a}=(0,w.useContext)(e6),l=tI();return(0,m.jsxs)(tP,{children:[(e=>{var t;let n=null==(t=e.getNodeRegistry().info)?void 0:t.icon;return n?(0,m.jsx)(tR,{src:n}):null})(e),(0,m.jsx)(tZ,{readonly:o,updateTitleEdit:s,titleEdit:i}),e.renderData.expandable&&!l&&(0,m.jsx)(Q.$n,{type:"primary",icon:t?(0,m.jsx)(eU.A,{}):(0,m.jsx)(tO.A,{}),size:"small",theme:"borderless",onClick:t=>{n(),"loop"===e.flowNodeType&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transform.collapsed,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:54,o=e.bounds.clone(),i={x:e.transform.position.x,y:e.transform.position.y};e.transform.collapsed=!t,t?e.transform.transform.update({position:{x:i.x+e.transform.padding.left,y:i.y+e.transform.padding.top},origin:{x:0,y:0}}):(e.transform.transform.clearChildren(),e.transform.transform.update({position:{x:i.x-e.transform.padding.left,y:i.y-e.transform.padding.top},origin:{x:0,y:0}}),e.transform.size={width:o.width,height:n}),e.blocks.forEach(e=>{e.getData(f.tBW).allLines.forEach(e=>{e.updateUIState({style:t?{}:{display:"none"}})})})}(e),t.stopPropagation()}}),o?void 0:(0,m.jsx)(tQ,{children:(0,m.jsx)(tf,{node:e,deleteNode:()=>{r.get(f.NMT).executeCommand(B.DELETE,[e])},updateTitleEdit:s})}),l&&(0,m.jsx)(Q.$n,{type:"primary",icon:(0,m.jsx)(tB.A,{}),size:"small",theme:"borderless",onClick:()=>{a(void 0)}})]})}let tU=e=>{let{form:t}=e,n=tI();return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(tH,{}),(0,m.jsx)(tE,{children:n?(0,m.jsx)(b.xI,{name:"assign"}):(0,m.jsx)(b.Nm,{displayFromScope:!0})})]})},tY={render:e=>(0,m.jsx)(tU,{...e}),effect:ep.effect,plugins:[(0,b.zJ)({assignKey:"assign",outputKey:"outputs"})]},tJ=0,tG={type:j.Variable,info:{icon:v,description:"变量赋值与声明"},meta:{size:{width:360,height:390}},onAdd:()=>({id:`variable_${(0,y.Ak)(5)}`,type:"variable",data:{title:`Variable_${++tJ}`,assign:[{operator:"declare",left:"sum",right:{type:"constant",content:0,schema:{type:"integer"}}}]}}),formMeta:tY},tW=n.p+"static/image/icon-start.8353312d.jpg",tX={render:e=>{let{form:t}=e;return tI()?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(tH,{}),(0,m.jsx)(tE,{children:(0,m.jsx)(f.D0$,{name:"outputs",render:e=>{let{field:{value:t,onChange:n}}=e;return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(b.lA,{value:t,onChange:e=>n(e)})})}})})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(tH,{}),(0,m.jsx)(tE,{children:(0,m.jsx)(b.Nm,{displayFromScope:!0})})]})},validateTrigger:f.N0$.onChange,validate:{title:e=>{let{value:t}=e;return t?void 0:"Title is required"}},effect:{title:b.q8,outputs:b.LC}},tq={type:j.Start,meta:{isStart:!0,deleteDisable:!0,copyDisable:!0,nodePanelVisible:!1,defaultPorts:[{type:"output"}],size:{width:360,height:211}},info:{icon:tW,description:"工作流的起始节点，用于设置启动工作流所需的信息。"},formMeta:tX,canAdd:()=>!1},tK=n.p+"static/image/icon-loop.89b07eed.jpg",t_={...ep,render:e=>{let{form:t}=e,n=tI(),{readonly:o}=tw(),i=(0,m.jsx)(f.D0$,{name:"loopFor",children:e=>{var t;let{field:n,fieldState:i}=e;return(0,m.jsxs)(tL,{name:"loopFor",type:"array",required:!0,children:[(0,m.jsx)(b._H,{style:{width:"100%"},value:null==(t=n.value)?void 0:t.content,onChange:e=>n.onChange({type:"ref",content:e}),readonly:o,hasError:Object.keys((null==i?void 0:i.errors)||{}).length>0}),(0,m.jsx)(M,{errors:null==i?void 0:i.errors})]})}}),s=(0,m.jsx)(f.D0$,{name:"loopOutputs",children:e=>{let{field:t,fieldState:n}=e;return(0,m.jsxs)(tL,{name:"loopOutputs",type:"object",vertical:!0,children:[(0,m.jsx)(b.X6,{style:{width:"100%"},value:t.value,onChange:e=>t.onChange(e),readonly:o,hasError:Object.keys((null==n?void 0:n.errors)||{}).length>0}),(0,m.jsx)(M,{errors:null==n?void 0:n.errors})]})}});return n?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(tH,{}),(0,m.jsxs)(tE,{children:[i,s]})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(tH,{}),(0,m.jsxs)(tE,{children:[i,(0,m.jsx)(L.T9,{offsetY:-85}),(0,m.jsx)(b.Nm,{displayFromScope:!0})]})]})},effect:{loopFor:b.Nh},plugins:[(0,b.w4)({outputKey:"loopOutputs"})]},t$=0,t0={type:j.Loop,info:{icon:tK,description:"Used to repeatedly execute a series of tasks by setting the number of iterations and logic."},meta:{isContainer:!0,size:{width:424,height:244},autoResizeDisable:!0,padding:()=>({top:120,bottom:60,left:60,right:60}),selectable:(e,t)=>!t||!e.getData(f.LY3).bounds.contains(t.x,t.y),wrapperStyle:{minWidth:"unset",width:"100%"}},onAdd:()=>({id:`loop_${(0,y.Ak)(5)}`,type:j.Loop,data:{title:`Loop_${++t$}`},blocks:[{id:`block_start_${(0,y.Ak)(5)}`,type:j.BlockStart,meta:{position:{x:-80,y:120}},data:{}},{id:`block_end_${(0,y.Ak)(5)}`,type:j.BlockEnd,meta:{position:{x:80,y:120}},data:{}}]}),formMeta:t_},t1=n.p+"static/image/icon-llm.de446995.jpg",t2=0,t3={type:j.LLM,info:{icon:t1,description:"Call the large language model and use variables and prompt words to generate responses."},meta:{size:{width:360,height:390}},onAdd:()=>({id:`llm_${(0,y.Ak)(5)}`,type:"llm",data:{title:`LLM_${++t2}`,inputsValues:{modelName:{type:"constant",content:"gpt-3.5-turbo"},apiKey:{type:"constant",content:"sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"},apiHost:{type:"constant",content:"https://mock-ai-url/api/v3"},temperature:{type:"constant",content:.5},systemPrompt:{type:"template",content:"# Role\nYou are an AI assistant.\n"},prompt:{type:"template",content:""}},inputs:{type:"object",required:["modelName","apiKey","apiHost","temperature","prompt"],properties:{modelName:{type:"string"},apiKey:{type:"string"},apiHost:{type:"string"},temperature:{type:"number"},systemPrompt:{type:"string",extra:{formComponent:"prompt-editor"}},prompt:{type:"string",extra:{formComponent:"prompt-editor"}}}},outputs:{type:"object",properties:{result:{type:"string"}}}}})};function t4(){let{readonly:e}=tw();return(0,m.jsxs)("div",{children:[(0,m.jsx)(tL,{name:"Timeout(ms)",required:!0,style:{flex:1},type:"number",children:(0,m.jsx)(f.D0$,{name:"timeout.timeout",defaultValue:1e4,children:t=>{let{field:n}=t;return(0,m.jsx)(Q.YI,{size:"small",value:n.value,onChange:e=>{n.onChange(e)},disabled:e,style:{width:"100%"},min:0})}})}),(0,m.jsx)(tL,{name:"Retry Times",required:!0,type:"number",children:(0,m.jsx)(f.D0$,{name:"timeout.retryTimes",defaultValue:1,children:t=>{let{field:n}=t;return(0,m.jsx)(Q.YI,{size:"small",value:n.value,onChange:e=>{n.onChange(e)},disabled:e,style:{width:"100%"},min:0})}})})]})}function t5(){let{readonly:e}=tw();return tI()?(0,m.jsx)(tL,{name:"params",type:"object",vertical:!0,children:(0,m.jsx)(f.D0$,{name:"paramsValues",children:t=>{let{field:n}=t;return(0,m.jsx)(b.Sf,{value:n.value,onChange:e=>n.onChange(e),readonly:e})}})}):(0,m.jsx)(tL,{name:"params",type:"object",vertical:!0,children:(0,m.jsx)(f.D0$,{name:"paramsValues",children:e=>{let{field:t}=e;return(0,m.jsx)(b.S9,{value:t.value})}})})}function t9(){let{readonly:e}=tw();return tI()?(0,m.jsx)(tL,{name:"headers",type:"object",vertical:!0,children:(0,m.jsx)(f.D0$,{name:"headersValues",children:t=>{let{field:n}=t;return(0,m.jsx)(b.Sf,{value:n.value,onChange:e=>n.onChange(e),readonly:e})}})}):(0,m.jsx)(tL,{name:"headers",type:"object",vertical:!0,children:(0,m.jsx)(f.D0$,{name:"headersValues",children:e=>{let{field:t}=e;return(0,m.jsx)(b.S9,{value:t.value})}})})}let t6=[{label:"None",value:"none"},{label:"JSON",value:"JSON"},{label:"Raw Text",value:"raw-text"}];function t8(){let{readonly:e}=tw();return(0,m.jsx)(f.D0$,{name:"body.bodyType",defaultValue:"JSON",children:t=>{let{field:n}=t;return(0,m.jsx)("div",{style:{marginTop:5},children:(0,m.jsxs)(tL,{name:"Body",vertical:!0,type:"object",children:[(0,m.jsx)(Q.l6,{value:n.value,onChange:e=>{n.onChange(e)},style:{width:"100%",marginBottom:10},disabled:e,size:"small",optionList:t6}),(t=>{switch(t){case"JSON":return(0,m.jsx)(f.D0$,{name:"body.json",children:t=>{var n;let{field:o}=t;return(0,m.jsx)(b.HY,{value:null==(n=o.value)?void 0:n.content,readonly:e,activeLinePlaceholder:"use var by '@'",onChange:e=>{o.onChange({type:"template",content:e})}})}});case"raw-text":return(0,m.jsx)(f.D0$,{name:"body.rawText",children:t=>{let{field:n}=t;return(0,m.jsx)(b.Jt,{disableMarkdownHighlight:!0,readonly:e,style:{flexGrow:1},placeholder:"Input raw text, use var by '{'",onChange:e=>{n.onChange(e)}})}});default:return null}})(n.value)]})})}})}function t7(){let{readonly:e}=tw();return(0,m.jsx)("div",{children:(0,m.jsx)(tL,{name:"API",required:!0,vertical:!0,type:"string",children:(0,m.jsxs)("div",{style:{display:"flex",gap:5},children:[(0,m.jsx)(f.D0$,{name:"api.method",defaultValue:"GET",children:t=>{let{field:n}=t;return(0,m.jsx)(Q.l6,{value:n.value,onChange:e=>{n.onChange(e)},style:{width:85,maxWidth:85,minWidth:85},size:"small",disabled:e,optionList:[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"PUT",value:"PUT"},{label:"DELETE",value:"DELETE"},{label:"PATCH",value:"PATCH"},{label:"HEAD",value:"HEAD"}]})}}),(0,m.jsx)(f.D0$,{name:"api.url",children:t=>{let{field:n}=t;return(0,m.jsx)(b.Jt,{disableMarkdownHighlight:!0,readonly:e,style:{flexGrow:1},placeholder:"Input URL, use var by '{'",value:n.value,onChange:e=>{n.onChange(e)}})}})]})})})}let ne=e=>{let{form:t}=e;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(tH,{}),(0,m.jsxs)(tE,{children:[(0,m.jsx)(t7,{}),(0,m.jsx)(Q.cG,{}),(0,m.jsx)(t9,{}),(0,m.jsx)(Q.cG,{}),(0,m.jsx)(t5,{}),(0,m.jsx)(Q.cG,{}),(0,m.jsx)(t8,{}),(0,m.jsx)(Q.cG,{}),(0,m.jsx)(t4,{}),(0,m.jsx)(Q.cG,{}),(0,m.jsx)(b.Nm,{displayFromScope:!0})]})]})},nt={render:e=>(0,m.jsx)(ne,{...e}),effect:ep.effect,plugins:[(0,b.$d)({sourceKey:"headersValues",targetKey:"headers"}),(0,b.$d)({sourceKey:"paramsValues",targetKey:"params"})]},nn=0,no={type:j.HTTP,info:{icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDQwIDQwIiBmaWxsPSJub25lIj4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIKICAgIGQ9Ik0yMC4wMDYgNEMyMi4xNDUgNCAyMy45ODUzIDcuMzk4NTUgMjQuNzY1MSAxMi4yNDFIMTUuMjQ2OUMxNi4wMjY3IDcuMzk4NTUgMTcuODY3IDQgMjAuMDA2IDRaTTE1LjAyMSAyMC45MTE5QzE0LjkwOCAxOS44MDIzIDE0Ljg0MjQgMTguNjQ4NiAxNC44NDI0IDE3LjQ0MzZDMTQuODQyNCAxNi4yNDIxIDE0LjkwOCAxNS4wODQ4IDE1LjAyMSAxMy45NzUySDI0Ljk4MzdDMjUuMDk2NiAxNS4wODQ4IDI1LjE2MjMgMTYuMjQyMSAyNS4xNjIzIDE3LjQ0MzZDMjUuMTYyMyAxOC42NDUgMjUuMDk2NiAxOS43OTg3IDI0Ljk4MzcgMjAuOTExOUgxNS4wMjFaTTIzLjgwNDQgNC41NjE5OUMyNy42NTI1IDUuNzExOTkgMzAuNzY0NCA4LjU1OTQyIDMyLjMwMjIgMTIuMjQwOUgyNi40OTM2QzI2LjAxOTkgOS4xNTQ2MyAyNS4xMTYyIDYuMzk1MzcgMjMuODA0NCA0LjU2MTk5Wk0xNi4xOTcxIDQuNTYxOTlDMTIuMzU2MyA1LjcxMTk5IDkuMjM3MDEgOC41NTk0MiA3LjcwNjUyIDEyLjI0MDlIMTMuNTE1MUMxMy45ODE1IDkuMTU0NjMgMTQuODg1MiA2LjM5NTM3IDE2LjE5NzEgNC41NjE5OVpNMjYuNzExOSAxMy45NzUySDMyLjg3NzZDMzMuMTY5MSAxNS4wODQ4IDMzLjMzNjggMTYuMjQyMSAzMy4zMzY4IDE3LjQ0MzZDMzMuMzM2OCAxOC42NDUgMzMuMTY5MSAxOS43OTg3IDMyLjg3NCAyMC45MTE5SDI2LjcxMTlDMjYuODI0OSAxOS43NzY2IDI2Ljg5MDYgMTguNjA4MyAyNi44OTA2IDE3LjQ0MzZDMjYuODkwNiAxNi4yNzg5IDI2LjgyNDkgMTUuMTE0MiAyNi43MTE5IDEzLjk3NTJaTTEzLjEyMiAxNy40NDM2QzEzLjEyMiAxNi4yNzg5IDEzLjE4NzYgMTUuMTEwNSAxMy4zMDA2IDEzLjk3NTJINy4xMzEyN0M2LjgzOTc1IDE1LjA4ODUgNi42Njg0OCAxNi4yNDIxIDYuNjY4NDggMTcuNDQzNkM2LjY2ODQ4IDE4LjY0NSA2LjgzOTc1IDE5LjgwMjMgNy4xMzEyNyAyMC45MTJIMTMuMjkzM0MxMy4xODc2IDE5Ljc3NjcgMTMuMTIyIDE4LjYxMTkgMTMuMTIyIDE3LjQ0MzZaTTQgMjUuMzM3M0M0IDIzLjgwMDUgNS4yNDU4MiAyMi41NTQ3IDYuNzgyNjEgMjIuNTU0N0gzMy4yMTc0QzM0Ljc1NDIgMjIuNTU0NyAzNiAyMy44MDA1IDM2IDI1LjMzNzNWMzMuMjE3NEMzNiAzNC43NTQyIDM0Ljc1NDIgMzYgMzMuMjE3NCAzNkg2Ljc4MjYxQzUuMjQ1ODIgMzYgNCAzNC43NTQyIDQgMzMuMjE3NFYyNS4zMzczWk0xMC45MTA5IDI4LjE1NjlIOC40ODY2NlYyNS45MTYxSDYuNjY4NDhWMzIuNjM4OEg4LjQ4NjY2VjI5LjgzNzZIMTAuOTEwOVYzMi42Mzg4SDEyLjcyOTFWMjUuOTE2MUgxMC45MTA5VjI4LjE1NjlaTTEzLjk0MTIgMjcuNTk2OEgxNS43NTk0VjMyLjYzODhIMTcuNTc3NlYyNy41OTY4SDE5LjM5NThWMjUuOTE2MUgxMy45NDEyVjI3LjU5NjhaTTIwLjYwNzkgMjcuNTk2OEgyMi40MjZWMzIuNjM4OEgyNC4yNDQyVjI3LjU5NjhIMjYuMDYyNVYyNS45MTYxSDIwLjYwNzlWMjcuNTk2OFpNMzEuNTE2OSAyNS45MTYxSDI3LjI3NDZWMzIuNjM4OEgyOS4wOTI3VjMwLjM5NzlIMzEuNTE2OUMzMi41NDcyIDMwLjM5NzkgMzMuMzM1MSAyOS42Njk2IDMzLjMzNTEgMjguNzE3MlYyNy41OTY4QzMzLjMzNTEgMjYuNjQ0NSAzMi41NDcyIDI1LjkxNjEgMzEuNTE2OSAyNS45MTYxWk0zMS41MTY5IDI4LjcxNzJIMjkuMDkyN1YyNy41OTY4SDMxLjUxNjlWMjguNzE3MloiCiAgICBmaWxsPSIjMzM3MEZGIiAvPgo8L3N2Zz4K",description:"Call the HTTP API"},meta:{size:{width:360,height:390}},onAdd:()=>({id:`http_${(0,y.Ak)(5)}`,type:"http",data:{title:`HTTP_${++nn}`,api:{method:"GET"},body:{bodyType:"JSON"},headers:{},params:{},outputs:{type:"object",properties:{body:{type:"string"},headers:{type:"object"},statusCode:{type:"integer"}}}}}),formMeta:nt},ni=0,ns={type:f.yaD.GROUP,meta:{renderKey:f.yaD.GROUP,defaultPorts:[],isContainer:!0,disableSideBar:!0,size:{width:560,height:400},padding:()=>({top:80,bottom:40,left:65,right:65}),selectable:(e,t)=>!t||!e.getData(f.LY3).bounds.contains(t.x,t.y),expandable:!1,nodePanelVisible:!1},formMeta:{render:()=>(0,m.jsx)(m.Fragment,{})},onAdd:()=>({type:f.yaD.GROUP,id:`group_${(0,f.AkI)(5)}`,meta:{position:{x:0,y:0}},data:{color:"Green",title:`Group_${++ni}`}})},nr=n.p+"static/image/icon-end.ac3dc81e.jpg",na={...ep,render:()=>tI()?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(tH,{}),(0,m.jsx)(tE,{children:(0,m.jsx)(f.D0$,{name:"inputsValues",children:e=>{let{field:{value:t,onChange:n}}=e;return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(b.Sf,{value:t,onChange:e=>n(e)})})}})})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(tH,{}),(0,m.jsx)(tE,{children:(0,m.jsx)(f.D0$,{name:"inputsValues",children:e=>{let{field:{value:t}}=e;return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(b.S9,{value:t})})}})})]}),plugins:[(0,b.$d)({sourceKey:"inputsValues",targetKey:"inputs"})]},nl={type:j.End,meta:{deleteDisable:!0,copyDisable:!0,nodePanelVisible:!1,defaultPorts:[{type:"input"}],size:{width:360,height:211}},info:{icon:nr,description:"工作流的最后一个节点，用于在工作流运行后返回结果信息。"},formMeta:na,canAdd:()=>!1},nd=n.p+"static/image/icon-continue.4d103752.jpg",nc={...ep,render:()=>(tI(),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(tH,{}),(0,m.jsx)(tE,{})]}))},nu=0,nh={type:j.Continue,meta:{defaultPorts:[{type:"input"}],sidebarDisabled:!0,size:{width:360,height:54},expandable:!1,onlyInContainer:j.Loop},info:{icon:nd,description:"工作流的最后一个节点，用于在工作流运行后返回结果信息。"},formMeta:nc,onAdd:()=>({id:`continue_${(0,y.Ak)(5)}`,type:"continue",data:{title:`Continue_${++nu}`}})};var np=n(15369),ng=n(9217);let nm=C.Ay.div`
  position: absolute;
  right: -12px;
  top: 50%;
`;function nx(){let{node:e,readonly:t}=tw();return(0,w.useLayoutEffect)(()=>{window.requestAnimationFrame(()=>{e.getData(f.Ydp).updateDynamicPorts()})},[e]),(0,m.jsx)(f.ED_,{name:"conditions",children:e=>{let{field:n}=e;return(0,m.jsxs)(m.Fragment,{children:[n.map((e,o)=>(0,m.jsx)(f.D0$,{name:e.name,children:e=>{let{field:i,fieldState:s}=e;return(0,m.jsxs)(tL,{name:"if",type:"boolean",required:!0,labelWidth:40,children:[(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,m.jsx)(b.y1,{readonly:t,style:{flexGrow:1},value:i.value.value,onChange:e=>i.onChange({value:e,key:i.value.key})}),!t&&(0,m.jsx)(Q.$n,{theme:"borderless",disabled:t,icon:(0,m.jsx)(np.A,{}),onClick:()=>n.delete(o)})]}),(0,m.jsx)(M,{errors:null==s?void 0:s.errors,invalid:null==s?void 0:s.invalid}),(0,m.jsx)(nm,{"data-port-id":i.value.key,"data-port-type":"output"})]})}},e.name)),!t&&(0,m.jsx)("div",{children:(0,m.jsx)(Q.$n,{theme:"borderless",icon:(0,m.jsx)(ng.A,{}),onClick:()=>n.append({key:`if_${(0,y.Ak)(6)}`,value:{type:"expression",content:""}}),children:f.F24.t("Add")})})]})}})}let nf={render:e=>{let{form:t}=e;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(tH,{}),(0,m.jsx)(tE,{children:(0,m.jsx)(nx,{})})]})},validateTrigger:f.N0$.onChange,validate:{title:e=>{let{value:t}=e;return t?void 0:"Title is required"},"conditions.*":e=>{let{value:t}=e;if(!(null==t?void 0:t.value))return"Condition is required"}},effect:{conditions:b.Q3}},ny={type:j.Condition,info:{icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iNDQiIGhlaWdodD0iNDUiIHZpZXdCb3g9IjAgMCA0NCA0NSIgZmlsbD0ibm9uZSIgY2xhc3M9ImluamVjdGVkLXN2ZyIgZGF0YS1zcmM9Imh0dHBzOi8vbGYzLXN0YXRpYy5ieXRlZG5zZG9jLmNvbS9vYmovZWRlbi1jbi91dnBhaHR2YWJoX2xtX3poaHdoL2xqaHdadGhsYXVramxrdWx6bHAvYWN0aXZpdHlfaWNvbnMvZXhjbHVzaXZlLXNwbGl0LTA1MTguc3ZnIj4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE2LjQ3MDUgMTQuMDE1MkMxNS4yOTkgMTIuODQzNiAxNS4yOTkgMTAuOTQ0IDE2LjQ3MDUgOS43NzI0NEwyMC43MTMxIDUuNTI5N0MyMS44ODQ2IDQuMzU4MSAyMy43ODQgNC4zNTgxIDI0Ljk1NTYgNS41Mjk3TDI5LjE5ODEgOS43NzI0NEMzMC4zNjk3IDEwLjk0NCAzMC4zNjk3IDEyLjg0MzYgMjkuMTk4MSAxNC4wMTUyTDI1LjEyMDYgMTguMDkyOUgzMi42Njc0QzM2LjUzMzQgMTguMDkyOSAzOS42Njc0IDIxLjIyNjkgMzkuNjY3NCAyNS4wOTI5VjMzLjE1NFYzMy4zMjcxVjM3LjE1NEMzOS42Njc0IDM4LjI1ODUgMzguNzcxOSAzOS4xNTQgMzcuNjY3NCAzOS4xNTRIMzMuNjY3NEMzMi41NjI4IDM5LjE1NCAzMS42Njc0IDM4LjI1ODUgMzEuNjY3NCAzNy4xNTRWMzMuMzI3MVYzMy4xNTRWMjYuMDkyOUgyMy41OTQ4SDE1LjY2NzRWMzMuMTMyN0wxNy4yNjg1IDMzLjEyNDRDMTguODM5NyAzMy4xMTYzIDE5LjYzMjIgMzUuMDE1NiAxOC41MjEyIDM2LjEyNjZMMTIuNzM3NCA0MS45MTAzQzEyLjA1MDYgNDIuNTk3MSAxMC45MzcxIDQyLjU5NzEgMTAuMjUwMyA0MS45MTAzTDQuNTI1ODggMzYuMTg1OUMzLjQyMTA3IDM1LjA4MTEgNC4xOTc5NyAzMy4xOTE3IDUuNzYwMzggMzMuMTgzN0w3LjY2NzM3IDMzLjE3MzlWMjUuMDkyOUM3LjY2NzM3IDIxLjIyNyAxMC44MDE0IDE4LjA5MjkgMTQuNjY3NCAxOC4wOTI5SDIwLjU0ODFMMTYuNDcwNSAxNC4wMTUyWiIgZmlsbD0idXJsKCNwYWludDBfbGluZWFyXzI3NTJfMTgzNzAyLTcpIi8+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfMjc1Ml8xODM3MDItNyIgeDE9IjM4LjUyIiB5MT0iNDMuMzkxNSIgeDI9IjguMDk2ODYiIHkyPSI0LjY5ODIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzMzNzBGRiIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjAuOTk3OTA4IiBzdG9wLWNvbG9yPSIjMzNBOUZGIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogIDwvZGVmcz4KPC9zdmc+Cg==",description:"Connect multiple downstream branches. Only the corresponding branch will be executed if the set conditions are met."},meta:{defaultPorts:[{type:"input"}],useDynamicPort:!0,expandable:!1,size:{width:360,height:210}},formMeta:nf,onAdd:()=>({id:`condition_${(0,y.Ak)(5)}`,type:"condition",data:{title:"Condition",conditions:[{key:`if_${(0,y.Ak)(5)}`,value:{}},{key:`if_${(0,y.Ak)(5)}`,value:{}}]}})},nj={type:j.Comment,meta:{sidebarDisabled:!0,nodePanelVisible:!1,defaultPorts:[],renderKey:j.Comment,size:{width:240,height:150}},formMeta:{render:()=>(0,m.jsx)(m.Fragment,{})},getInputPoints:()=>[],getOutputPoints:()=>[]};function nv(){let{readonly:e}=tw();return tI()?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Q.cG,{}),(0,m.jsx)(tL,{name:"outputs",type:"object",vertical:!0,children:(0,m.jsx)(f.D0$,{name:"outputs",children:t=>{let{field:n}=t;return(0,m.jsx)(b.lA,{readonly:e,value:n.value,onChange:e=>n.onChange(e)})}})})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Q.cG,{}),(0,m.jsx)(f.D0$,{name:"outputs",children:e=>{let{field:t}=e;return(0,m.jsx)(b.Nm,{value:t.value})}})]})}function nb(){let e=tI(),{readonly:t}=tw();return e?(0,m.jsx)(tL,{name:"inputs",type:"object",vertical:!0,children:(0,m.jsx)(f.D0$,{name:"inputsValues",children:e=>{let{field:n}=e;return(0,m.jsx)(b.Sf,{value:n.value,onChange:e=>n.onChange(e),readonly:t})}})}):(0,m.jsx)(f.D0$,{name:"inputsValues",children:e=>{let{field:t}=e;return(0,m.jsx)(b.S9,{value:t.value})}})}function nC(){let e=tI(),{readonly:t}=tw();return e?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Q.cG,{}),(0,m.jsx)(f.D0$,{name:"script.content",children:e=>{let{field:n}=e;return(0,m.jsx)(b.BY,{languageId:"typescript",value:n.value,onChange:e=>n.onChange(e),readonly:t})}})]}):null}let nA=e=>{let{form:t}=e;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(tH,{}),(0,m.jsxs)(tE,{children:[(0,m.jsx)(nb,{}),(0,m.jsx)(nC,{}),(0,m.jsx)(nv,{})]})]})},nN={render:e=>(0,m.jsx)(nA,{...e}),effect:ep.effect,validate:ep.validate,plugins:[(0,b.$d)({sourceKey:"inputsValues",targetKey:"inputs"})]},nM=0,nw=`// Here, you can retrieve input variables from the node using 'params' and output results using 'ret'.
// 'params' has been correctly injected into the environment.
// Here's an example of getting the value of the parameter named 'input' from the node input:
// const input = params.input;
// Here's an example of outputting a 'ret' object containing multiple data types:
// const ret = { "name": 'Xiaoming', "hobbies": ["Reading", "Traveling"] };

async function main({ params }) {
  // Build the output object
  const ret = {
    key0: params.input + params.input, // Concatenate the input parameter 'input' twice
    key1: ["hello", "world"], // Output an array
    key2: { // Output an Object
      key21: "hi"
    },
  };

  return ret;
}`,nI={type:j.Code,info:{icon:"data:image/png;base64,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",description:"Run the Script"},meta:{size:{width:360,height:390}},onAdd:()=>({id:`code_${(0,y.Ak)(5)}`,type:"code",data:{title:`Code_${++nM}`,inputsValues:{input:{type:"constant",content:""}},script:{language:"javascript",content:nw},outputs:{type:"object",properties:{key0:{type:"string"},key1:{type:"array",items:{type:"string"}},key2:{type:"object",properties:{key21:{type:"string"}}}}}}}),formMeta:nN},nD=n.p+"static/image/icon-break.362f1db9.jpg",nS={...ep,render:()=>(tI(),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(tH,{}),(0,m.jsx)(tE,{})]}))},nk=0,nE={type:j.Break,meta:{defaultPorts:[{type:"input"}],sidebarDisabled:!0,size:{width:360,height:54},expandable:!1,onlyInContainer:j.Loop},info:{icon:nD,description:"工作流的最后一个节点，用于在工作流运行后返回结果信息。"},formMeta:nS,onAdd:()=>({id:`break_${(0,y.Ak)(5)}`,type:"break",data:{title:`Break_${++nk}`}})},nT={type:j.BlockStart,meta:{isStart:!0,deleteDisable:!0,copyDisable:!0,sidebarDisabled:!0,nodePanelVisible:!1,defaultPorts:[{type:"output"}],size:{width:100,height:100},wrapperStyle:{minWidth:"unset",width:"100%",borderWidth:2,borderRadius:12,cursor:"move"}},info:{icon:tW,description:"The starting node of the block."},formMeta:{render:e=>{let{form:t}=e;return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("div",{style:{width:60,height:60,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,m.jsx)(Q.eu,{shape:"circle",style:{width:40,height:40,borderRadius:"50%",cursor:"move"},alt:"Icon",src:tW})})})}},canAdd:()=>!1},nL={type:j.BlockEnd,meta:{isNodeEnd:!0,deleteDisable:!0,copyDisable:!0,sidebarDisabled:!0,nodePanelVisible:!1,defaultPorts:[{type:"input"}],size:{width:100,height:100},wrapperStyle:{minWidth:"unset",width:"100%",borderWidth:2,borderRadius:12,cursor:"move"}},info:{icon:tW,description:"The final node of the block."},formMeta:{render:e=>{let{form:t}=e;return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("div",{style:{width:60,height:60,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,m.jsx)(Q.eu,{shape:"circle",style:{width:40,height:40,borderRadius:"50%",cursor:"move"},alt:"Icon",src:nr})})})}},canAdd:()=>!1},nz=0,nO={type:j.Rabbitmq,info:{icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj4KICA8cmVjdCB4PSIyMCIgeT0iMzAiIHdpZHRoPSI2MCIgaGVpZ2h0PSI0MCIgcng9IjUiIGZpbGw9IiNGRjY2MDAiLz4KICA8Y2lyY2xlIGN4PSIzMCIgY3k9IjI1IiByPSIxMCIgZmlsbD0iI0ZGNjYwMCIvPgogIDxjaXJjbGUgY3g9IjcwIiBjeT0iMjUiIHI9IjEwIiBmaWxsPSIjRkY2NjAwIi8+CiAgPHJlY3QgeD0iMTUiIHk9IjM1IiB3aWR0aD0iNzAiIGhlaWdodD0iMzAiIHJ4PSI1IiBmaWxsPSJ3aGl0ZSIgb3BhY2l0eT0iMC4zIi8+CiAgPHRleHQgeD0iNTAiIHk9IjY1IiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMjAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IndoaXRlIj5NUTwvdGV4dD4KPC9zdmc+",description:"推送数据到rabbitmq"},meta:{size:{width:360,height:390}},onAdd:()=>({id:`rabbitmq_${(0,y.Ak)(5)}`,type:"rabbitmq",data:{title:`Rabbitmq_${++nz}`,inputsValues:{ip:{type:"constant",content:"127.0.0.1"},port:{type:"constant",content:5672},username:{type:"constant",content:"ahbcht"},password:{type:"constant",content:"Bcht123"},exchange:{type:"constant",content:"BCHT_ITS_DATA"},routingKey:{type:"constant",content:"test"}},inputs:{type:"object",required:["ip","port","username","password","exchange","routingKey"],properties:{ip:{type:"string"},port:{type:"number"},username:{type:"string"},password:{type:"string"},exchange:{type:"string"},routingKey:{type:"string"},msg:{type:"string"}}},outputs:{}}})},nB=[{label:"MySQL",value:"mysql"},{label:"PostgreSQL",value:"postgresql"},{label:"Oracle",value:"oracle"},{label:"SQL Server",value:"sqlserver"}];function nP(){let{readonly:e}=tw();return(0,m.jsxs)("div",{children:[(0,m.jsx)(tL,{name:"数据库类型",required:!0,vertical:!0,type:"string",children:(0,m.jsx)(f.D0$,{name:"connection.type",defaultValue:"mysql",children:t=>{let{field:n}=t;return(0,m.jsx)(Q.l6,{value:n.value,onChange:e=>{n.onChange(e)},style:{width:"100%"},size:"small",disabled:e,optionList:nB})}})}),(0,m.jsx)(tL,{name:"主机地址",required:!0,vertical:!0,type:"string",children:(0,m.jsx)(f.D0$,{name:"connection.host",children:t=>{let{field:n}=t;return(0,m.jsx)(b.lc,{readonly:e,style:{width:"100%"},value:n.value,onChange:e=>{n.onChange(e)}})}})}),(0,m.jsx)(tL,{name:"端口号",required:!0,vertical:!0,type:"number",children:(0,m.jsx)(f.D0$,{name:"connection.port",defaultValue:3306,children:t=>{let{field:n}=t;return(0,m.jsx)(Q.YI,{size:"small",value:n.value,onChange:e=>{n.onChange(e)},disabled:e,style:{width:"100%"},min:1,max:65535})}})}),(0,m.jsx)(tL,{name:"数据库名",required:!0,vertical:!0,type:"string",children:(0,m.jsx)(f.D0$,{name:"connection.database",children:t=>{let{field:n}=t;return(0,m.jsx)(b.lc,{readonly:e,style:{width:"100%"},value:n.value,onChange:e=>{n.onChange(e)}})}})}),(0,m.jsx)(tL,{name:"用户名",required:!0,vertical:!0,type:"string",children:(0,m.jsx)(f.D0$,{name:"connection.username",children:t=>{let{field:n}=t;return(0,m.jsx)(b.lc,{readonly:e,style:{width:"100%"},value:n.value,onChange:e=>{n.onChange(e)}})}})}),(0,m.jsx)(tL,{name:"密码",required:!0,vertical:!0,type:"string",children:(0,m.jsx)(f.D0$,{name:"connection.password",children:t=>{let{field:n}=t;return(0,m.jsx)(b.lc,{readonly:e,style:{width:"100%"},value:n.value,onChange:e=>{n.onChange(e)}})}})})]})}let nV=[{label:"SQL语句",value:"sql"},{label:"简单插入",value:"params"}];function nR(){let{readonly:e}=tw(),t=tI();return(0,m.jsx)(f.D0$,{name:"query.queryType",defaultValue:"params",children:n=>{let{field:o}=n;return(0,m.jsx)("div",{style:{marginTop:5},children:(0,m.jsxs)(tL,{name:"写入方式",vertical:!0,type:"object",children:[(0,m.jsx)(Q.l6,{value:o.value,onChange:e=>{o.onChange(e)},style:{width:"100%",marginBottom:10},disabled:e,size:"small",optionList:nV}),"sql"===o.value?(0,m.jsx)(f.D0$,{name:"query.sql",children:t=>{let{field:n}=t;return(0,m.jsx)(b.lc,{readonly:e,style:{width:"100%",minHeight:100},placeholder:"请输入SQL语句，使用 '{' 引用变量",value:n.value,onChange:e=>{n.onChange(e)}})}}):(0,m.jsxs)("div",{children:[(0,m.jsx)(tL,{name:"表名",required:!0,vertical:!0,type:"string",children:(0,m.jsx)(f.D0$,{name:"query.table",children:t=>{let{field:n}=t;return(0,m.jsx)(b.lc,{readonly:e,style:{width:"100%"},placeholder:"请输入表名，使用 '{' 引用变量",value:n.value,onChange:e=>{n.onChange(e)}})}})}),(0,m.jsx)(tL,{name:"字段配置",vertical:!0,type:"object",children:(0,m.jsx)(f.D0$,{name:"fields",children:n=>{let{field:o}=n;return t?(0,m.jsx)(b.Sf,{value:o.value,onChange:e=>o.onChange(e),readonly:e}):(0,m.jsx)(b.S9,{value:o.value})}})})]})]})})}})}let nQ=e=>{let{form:t}=e;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(tH,{}),(0,m.jsxs)(tE,{children:[(0,m.jsx)(nP,{}),(0,m.jsx)(Q.cG,{}),(0,m.jsx)(nR,{}),(0,m.jsx)(Q.cG,{}),(0,m.jsx)(b.Nm,{displayFromScope:!0})]})]})},nF={render:e=>(0,m.jsx)(nQ,{...e}),effect:ep.effect,plugins:[(0,b.$d)({sourceKey:"fields",targetKey:"params"})]},nZ=0,nH=[ny,tq,nl,t3,t0,nj,nT,nL,no,nI,nh,nE,tG,ns,nO,{type:j.Database,info:{icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj4KICA8ZWxsaXBzZSBjeD0iMTIiIGN5PSI1IiByeD0iOSIgcnk9IjMiPjwvZWxsaXBzZT4KICA8cGF0aCBkPSJNMjEgMTJjMCAxLjY2LTQgMy05IDNzLTktMS4zNC05LTMiPjwvcGF0aD4KICA8cGF0aCBkPSJNMyA1djE0YzAgMS42NiA0IDMgOSAzczktMS4zNCA5LTNWNSI+PC9wYXRoPgo8L3N2Zz4=",description:"数据库写入"},meta:{size:{width:360,height:420}},onAdd:()=>({id:`database_${(0,y.Ak)(5)}`,type:j.Database,data:{title:`\u{6570}\u{636E}\u{5E93}_${++nZ}`,connection:{type:"mysql",port:3306},query:{queryType:"params",table:""},fields:{},outputs:{type:"object",properties:{rowCount:{type:"integer",description:"影响的行数"},success:{type:"boolean",description:"写入是否成功"}}}}}),formMeta:nF}],nU={nodes:[{id:"start_0",type:"start",meta:{position:{x:180,y:573.7}},data:{title:"Start",outputs:{type:"object",properties:{query:{type:"string",default:"Hello Flow."},enable:{type:"boolean",default:!0},array_obj:{type:"array",items:{type:"object",properties:{int:{type:"number"},str:{type:"string"}}}}}}}},{id:"end_0",type:"end",meta:{position:{x:1008,y:573.7}},data:{title:"End",inputsValues:{success:{type:"constant",content:!0,schema:{type:"boolean"}},query:{type:"ref",content:["start_0","query"]}}}}],edges:[{sourceNodeID:"start_0",targetNodeID:"end_0"}]};var nY=n(88751),nJ=n(42773),nG=n(2971);let nW=()=>{let e=(0,f.h1n)(f.Vo_);return(0,w.useMemo)(()=>{let t=[],n=(e=>{let t={type:"object",properties:{}},n=e.root.blocks.find(e=>e.flowNodeType===j.Start);if(!n)return t;let o=n.getData(f.LO).getFormModel().getValueIn("outputs");return o||t})(e);return Object.entries(n.properties).forEach(e=>{var o,i;let[s,r]=e;t.push({type:r.type,name:s,defaultValue:r.default,required:(null==(o=n.required)?void 0:o.includes(s))??!1,itemsType:null==(i=r.items)?void 0:i.type})}),t},[e])},nX=e=>{let{formMeta:t,values:n,setValues:o}=e;(0,w.useEffect)(()=>{t.map(e=>{e.name in n||void 0===e.defaultValue||o({...n,[e.name]:e.defaultValue})})},[t])},nq=e=>{let{values:t,setValues:n}=e;return nX({formMeta:nW(),values:t,setValues:n}),(0,m.jsx)("div",{className:"testrun-json-input-cXA3N5",children:(0,m.jsx)(b.BY,{languageId:"json",value:JSON.stringify(t,null,2),onChange:e=>n(JSON.parse(e))})})},nK="formContainer-yaNkLy",n_="fieldInput-g9DKd0",n$="codeEditorWrapper-aPKSbu",n0="emptyText-fq4qqb",n1=e=>{let{values:t,setValues:n}=e,o=nW(),i=(e=>{let{formMeta:t,values:n,setValues:o}=e;return t.map(e=>{let t=(()=>{let t=n[e.name]??e.defaultValue;return("object"===e.type||"array"===e.type)&&null!==t?JSON.stringify(t,null,2):t})();return{...e,value:t,onChange:t=>{"object"===e.type||"array"===e.type?o({...n,[e.name]:JSON.parse(t??"{}")}):o({...n,[e.name]:t})}}})})({formMeta:o,values:t,setValues:n});return(nX({formMeta:o,values:t,setValues:n}),0===i.length)?(0,m.jsx)("div",{className:nK,children:(0,m.jsxs)("div",{className:"emptyState-PFxcAr",children:[(0,m.jsx)("div",{className:n0,children:"Empty"}),(0,m.jsx)("div",{className:n0,children:"No inputs found in start node"})]})}):(0,m.jsx)("div",{className:nK,children:i.map(e=>(0,m.jsxs)("div",{className:"fieldGroup-hp0CvB",children:[(0,m.jsxs)("label",{htmlFor:e.name,className:"fieldLabel-Q2MYCX",children:[e.name,e.required&&(0,m.jsx)("span",{className:"requiredIndicator-cwQLCL",children:"*"}),(0,m.jsx)("span",{className:"fieldTypeIndicator-N_4RBK",children:(0,m.jsx)(b.cy,{value:{type:e.type,items:e.itemsType?{type:e.itemsType}:void 0}})})]}),(e=>{switch(e.type){case"boolean":return(0,m.jsx)("div",{className:n_,children:(0,m.jsx)(Q.dO,{checked:e.value,onChange:t=>e.onChange(t)})});case"integer":return(0,m.jsx)("div",{className:n_,children:(0,m.jsx)(Q.YI,{precision:0,value:e.value,onChange:t=>e.onChange(t),placeholder:"Please input integer"})});case"number":return(0,m.jsx)("div",{className:n_,children:(0,m.jsx)(Q.YI,{value:e.value,onChange:t=>e.onChange(t),placeholder:"Please input number"})});case"object":return(0,m.jsx)("div",{className:eQ()(n_,n$),children:(0,m.jsx)(b.BY,{languageId:"json",value:e.value,onChange:t=>e.onChange(t)})});case"array":return(0,m.jsx)("div",{className:eQ()(n_,n$),children:(0,m.jsx)(b.BY,{languageId:"json",value:e.value,onChange:t=>e.onChange(t)})});default:return(0,m.jsx)("div",{className:n_,children:(0,m.jsx)(Q.pd,{value:e.value,onChange:t=>e.onChange(t),placeholder:"Please input text"})})}})(e)]},e.name))})},n2=e=>{let{className:t,style:n}=e;return(0,m.jsxs)("svg",{className:t,style:n,width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,m.jsx)("path",{d:"M9.5 8C8.67157 8 8 8.67157 8 9.5V14.5C8 15.3284 8.67157 16 9.5 16H14.5C15.3284 16 16 15.3284 16 14.5V9.5C16 8.67157 15.3284 8 14.5 8H9.5Z"}),(0,m.jsx)("path",{d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21Z"})]})},n3="testrun-panel-title-qiROGM",n4=e=>{let{visible:t,onCancel:n}=e,o=(0,f.h1n)(en),{nodeId:i,setNodeId:s}=(0,w.useContext)(e6),[r,a]=(0,w.useState)(!1),[l,d]=(0,w.useState)({}),[c,u]=(0,w.useState)(),[h,p]=(0,w.useState)(),[g,x]=(0,w.useState)(()=>{let e=localStorage.getItem("testrun-input-json-mode");return!!e&&JSON.parse(e)}),y=async()=>{if(r)return void await o.taskCancel();p(void 0),u(void 0),await o.taskRun(l)&&a(!0)},j=async()=>{await o.taskCancel(),d({}),a(!1),n()};(0,w.useEffect)(()=>{s(void 0);let e=o.onResultChanged(e=>{let{result:t,errors:n}=e;a(!1),p(t),n?u(n):u(void 0)});return()=>e.dispose()},[]),(0,w.useEffect)(()=>{i&&n()},[i]);let v=(0,m.jsxs)("div",{className:"testrun-panel-running-YEIu8y",children:[(0,m.jsx)(eF.A,{spin:!0,size:"large"}),(0,m.jsx)("div",{className:"text-W4ZXmv",children:"Running..."})]}),b=(0,m.jsxs)("div",{className:"testrun-panel-form-CQSAT9",children:[(0,m.jsxs)("div",{className:"testrun-panel-input-OEEX9C",children:[(0,m.jsx)("div",{className:"title-KxEyeQ",children:"Input Form"}),(0,m.jsx)("div",{children:"JSON Mode"}),(0,m.jsx)(Q.dO,{checked:g,onChange:e=>{x(e),localStorage.setItem("testrun-input-json-mode",JSON.stringify(e))},size:"small"})]}),g?(0,m.jsx)(nq,{values:l,setValues:d}):(0,m.jsx)(n1,{values:l,setValues:d}),null==c?void 0:c.map(e=>(0,m.jsx)("div",{className:"error-ZVAUTK",children:e},e)),(0,m.jsx)(eK,{title:"Inputs Result",data:null==h?void 0:h.inputs,optional:!0,disableCollapse:!0}),(0,m.jsx)(eK,{title:"Outputs Result",data:null==h?void 0:h.outputs,optional:!0,disableCollapse:!0})]}),C=(0,m.jsx)(Q.$n,{onClick:y,icon:r?(0,m.jsx)(n2,{}):(0,m.jsx)(nG.A,{size:"small"}),className:eQ()("button-Uz8bVQ",{"running-KFY_55":r,"default-Mavvb6":!r}),children:r?"取消":"试运行"});return(0,m.jsx)(Q.DD,{title:"试运行",visible:t,mask:!1,motion:!1,onCancel:j,width:400,headerStyle:{display:"none"},bodyStyle:{padding:0},style:{background:"none",boxShadow:"none"},children:(0,m.jsxs)("div",{className:"testrun-panel-container-wXzEGW",children:[(0,m.jsxs)("div",{className:"testrun-panel-header-T_XhaX",children:[(0,m.jsx)("div",{className:n3,children:"试运行"}),(0,m.jsx)(Q.$n,{className:n3,type:"tertiary",icon:(0,m.jsx)(tB.A,{}),size:"small",theme:"borderless",onClick:j})]}),(0,m.jsx)("div",{className:"testrun-panel-content-KU5kUx",children:r?v:b}),(0,m.jsx)("div",{className:"testrun-panel-footer-xjVlWc",children:C})]})})};function n5(e){let[t,n]=(0,w.useState)(0),o=(0,f.WDY)(),[i,s]=(0,w.useState)(!1),r=(0,w.useCallback)(()=>{n(o.document.getAllNodes().map(e=>(0,f.BAU)(e)).filter(e=>null==e?void 0:e.state.invalid).length)},[o]),a=(0,w.useCallback)(async()=>{let e=o.document.getAllNodes().map(e=>(0,f.BAU)(e));await Promise.all(e.map(async e=>null==e?void 0:e.validate())),console.log(">>>>> save data: ",o.document.toJSON()),s(!0)},[o]);(0,w.useEffect)(()=>{let e=e=>{let t=(0,f.BAU)(e);if(t){let n=t.onValidate(()=>r());e.onDispose(()=>n.dispose())}};o.document.getAllNodes().map(t=>e(t));let t=o.document.onNodeCreate(t=>{let{node:n}=t;return e(n)});return()=>t.dispose()},[o]);let l=0===t?(0,m.jsx)(Q.$n,{disabled:e.disabled,onClick:a,icon:(0,m.jsx)(nG.A,{size:"small"}),className:"testrun-success-button-v9BBTu",children:"试运行"}):(0,m.jsx)(Q.Ex,{count:t,position:"rightTop",type:"danger",children:(0,m.jsx)(Q.$n,{type:"danger",disabled:e.disabled,onClick:a,icon:(0,m.jsx)(nG.A,{size:"small"}),className:"testrun-error-button-Gr728K",children:"试运行"})});return(0,m.jsxs)(m.Fragment,{children:[l,(0,m.jsx)(n4,{visible:i,onCancel:()=>s(!1)})]})}let n9=e=>{let t=(()=>{let e=(0,f.h1n)(f.Vo_),t=(0,f.h1n)(k.rV),n=(0,f.h1n)(f.rmK),o=(0,f.rJT)(),i=(()=>{let e=(0,f.rJT)();return(0,w.useCallback)(t=>e.config.getPosFromMouseEvent({clientX:t.left+64,clientY:t.top-7}),[e])})(),s=(()=>{let e=(0,f.h1n)(f.rmK);return(0,w.useCallback)(t=>{t&&e.selectNode(t)},[e])})();return(0,w.useCallback)(async o=>{let r=i(o),a=(e=>{let{activatedNode:t}=e;if(!t)return;let{isContainer:n}=t.getNodeMeta();if(n)return t;let o=t.parent;if(o&&o.flowNodeType!==f.yaD.ROOT)return o})(n);await new Promise(n=>{t.callNodePanel({position:r,enableMultiAdd:!0,containerNode:a,panelProps:{},onSelect:async t=>{if(!t)return;let{nodeType:n,nodeJSON:o}=t,i=a?(0,f.tKf)(e,{x:0,y:200}):void 0;s(e.createWorkflowNodeByType(n,i,o??{},null==a?void 0:a.id))},onClose:()=>{n()}})})},[i,t,o.config.zoom,e,s])})();return(0,m.jsx)(Q.$n,{"data-testid":"demo.free-layout.add-node",icon:(0,m.jsx)(ng.A,{}),color:"highlight",style:{backgroundColor:"rgba(171,181,255,0.3)",borderRadius:"8px"},disabled:e.disabled,onClick:e=>{t(e.currentTarget.getBoundingClientRect())},children:"添加节点"})},n6=C.Ay.div`
  position: absolute;
  bottom: 16px;
  display: flex;
  justify-content: left;
  min-width: 360px;
  pointer-events: none;
  gap: 8px;

  z-index: 99;
`,n8=C.Ay.div`
  display: flex;
  align-items: center;
  background-color: #fff;
  border: 1px solid rgba(68, 83, 130, 0.25);
  border-radius: 10px;
  box-shadow: rgba(0, 0, 0, 0.04) 0px 2px 6px 0px, rgba(0, 0, 0, 0.02) 0px 4px 12px 0px;
  column-gap: 2px;
  height: 40px;
  padding: 0 4px;
  pointer-events: auto;
`,n7=C.Ay.span`
  padding: 4px;
  border-radius: 8px;
  border: 1px solid rgba(68, 83, 130, 0.25);
  font-size: 12px;
  width: 50px;
  cursor: pointer;
`,oe=C.Ay.div`
  position: absolute;
  bottom: 60px;
  width: 198px;
`,ot=(0,C.Ay)(()=>(0,m.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,m.jsxs)("g",{id:"g1",children:[(0,m.jsx)("path",{id:"path1",fill:"#000000",stroke:"none",d:"M 18.09091 6.883101 L 5.409091 6.883101 L 5.409091 16.746737 L 10.664648 16.746737 C 10.927091 17.116341 11.30353 17.422749 11.792977 17.611004 L 12.664289 17.946156 L 12.744959 18.155828 L 5.409091 18.155828 C 4.630871 18.155828 4 17.524979 4 16.746737 L 4 6.883101 C 4 6.104881 4.630871 5.47401 5.409091 5.47401 L 18.09091 5.47401 C 18.86915 5.47401 19.5 6.104881 19.5 6.883101 L 19.5 12.52348 C 19.247208 11.883823 18.730145 11.365912 18.09091 11.111994 L 18.09091 6.883101 Z M 18.09091 18.155828 L 17.881165 18.155828 L 19.469212 14.368896 C 19.479921 14.343321 19.490206 14.317817 19.5 14.292241 L 19.5 16.746737 C 19.5 17.524979 18.86915 18.155828 18.09091 18.155828 Z"}),(0,m.jsx)("path",{id:"path2",fill:"#000000",fillRule:"evenodd",stroke:"none",d:"M 18.494614 13.960189 C 18.982441 12.796985 17.813459 11.628003 16.650255 12.11576 L 12.133272 14.01 C 10.962248 14.501069 10.987188 16.168798 12.172375 16.62464 L 13.482055 17.128389 L 13.985805 18.438068 C 14.441646 19.623184 16.109375 19.648125 16.600443 18.477171 L 18.494614 13.960189 Z M 17.19515 13.415224 L 15.30098 17.932205 L 14.79723 16.622526 C 14.654066 16.250385 14.359989 15.956307 13.987918 15.813213 L 12.678168 15.309464 L 17.19515 13.415224 Z"})]})}))`
  color: ${e=>e.visible?void 0:"#060709cc"};
`,on=()=>{let e=(0,f._6U)({maxZoom:2,minZoom:.25}),t=(0,f.rJT)(),[n,o]=(0,w.useState)(!1);return(0,m.jsx)(Q.ms,{position:"top",trigger:"custom",visible:n,onClickOutSide:()=>o(!1),render:(0,m.jsxs)(Q.ms.Menu,{children:[(0,m.jsx)(Q.ms.Item,{onClick:()=>e.zoomin(),children:"Zoom in"}),(0,m.jsx)(Q.ms.Item,{onClick:()=>e.zoomout(),children:"Zoom out"}),(0,m.jsx)(Q.cG,{layout:"horizontal"}),(0,m.jsx)(Q.ms.Item,{onClick:()=>t.config.updateZoom(.5),children:"Zoom to 50%"}),(0,m.jsx)(Q.ms.Item,{onClick:()=>t.config.updateZoom(1),children:"Zoom to 100%"}),(0,m.jsx)(Q.ms.Item,{onClick:()=>t.config.updateZoom(1.5),children:"Zoom to 150%"}),(0,m.jsx)(Q.ms.Item,{onClick:()=>t.config.updateZoom(2),children:"Zoom to 200%"})]}),children:(0,m.jsxs)(n7,{onClick:()=>o(!0),children:[Math.floor(100*e.zoom),"%"]})})},oo=(0,m.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,m.jsx)("path",{id:"switch-line",fill:"currentColor",stroke:"none",d:"M 12.728118 10.060962 C 13.064282 8.716098 14.272528 7.772551 15.65877 7.772343 L 17.689898 7.772343 C 18.0798 7.772343 18.39588 7.456264 18.39588 7.066362 C 18.39588 6.676458 18.0798 6.36038 17.689898 6.36038 L 15.659616 6.36038 C 13.62515 6.360315 11.851767 7.745007 11.358504 9.718771 C 11.02234 11.063635 9.814095 12.007183 8.427853 12.007389 L 7.101437 12.007389 C 6.711768 12.007389 6.395878 12.323277 6.395878 12.712947 C 6.395878 13.102616 6.711768 13.418506 7.101437 13.418506 L 8.426159 13.418506 C 9.812716 13.418323 11.021417 14.361954 11.357657 15.707124 C 11.850921 17.680887 13.624304 19.065578 15.65877 19.065516 L 17.689049 19.065516 C 18.078953 19.065516 18.395033 18.749435 18.395033 18.359533 C 18.395033 17.969631 18.078953 17.653551 17.689049 17.653551 L 15.65877 17.653551 C 14.272528 17.653345 13.064282 16.709797 12.728118 15.364932 C 12.454905 14.27114 11.774856 13.322707 10.826583 12.712947 C 11.774536 12.10303 12.454268 11.154617 12.727271 10.060962 Z"})}),oi=()=>{let e=(0,f.h1n)(f.GHE),t=(0,w.useCallback)(()=>{e.switchLineType()},[e]);return(0,m.jsx)(Q.m_,{content:"Switch Line",children:(0,m.jsx)(Q.K0,{type:"tertiary",theme:"borderless",onClick:t,icon:oo})})};var os=n(91662),or=n(71417);let oa=()=>{let e=(0,f.rJT)(),t=(0,w.useCallback)(()=>{e.config.readonly=!e.config.readonly},[e]);return e.config.readonly?(0,m.jsx)(Q.m_,{content:"Editable",children:(0,m.jsx)(Q.K0,{theme:"borderless",type:"tertiary",icon:(0,m.jsx)(os.A,{size:"default"}),onClick:t})}):(0,m.jsx)(Q.m_,{content:"Readonly",children:(0,m.jsx)(Q.K0,{theme:"borderless",type:"tertiary",icon:(0,m.jsx)(or.A,{size:"default"}),onClick:t})})},ol=e=>{let{minimapVisible:t,setMinimapVisible:n}=e;return(0,m.jsx)(Q.m_,{content:"Minimap",children:(0,m.jsx)(Q.K0,{type:"tertiary",theme:"borderless",icon:(0,m.jsx)(ot,{visible:t}),onClick:()=>n(!t)})})},od=e=>{let{visible:t}=e,n=(0,f.h1n)(D.RV);return t?(0,m.jsx)(oe,{children:(0,m.jsx)(D.cN,{service:n,panelStyles:{},containerStyles:{pointerEvents:"auto",position:"relative",top:"unset",right:"unset",bottom:"unset",left:"unset"},inactiveStyle:{opacity:1,scale:1,translateX:0,translateY:0}})}):(0,m.jsx)(m.Fragment,{})};function oc(e){let{width:t,height:n}=e;return(0,m.jsxs)("svg",{width:t||48,height:n||38,viewBox:"0 0 48 38",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,m.jsx)("rect",{x:"1.83317",y:"1.49998",width:"44.3333",height:"35",rx:"3.5",stroke:"currentColor",strokeOpacity:"0.8",strokeWidth:"2.33333"}),(0,m.jsx)("path",{d:"M14.6665 30.6667H33.3332",stroke:"currentColor",strokeOpacity:"0.8",strokeWidth:"2.33333",strokeLinecap:"round"})]})}let ou=()=>(0,m.jsxs)("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,m.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.8549 5H3.1451C3.06496 5 3 5.06496 3 5.1451V18.8549C3 18.935 3.06496 19 3.1451 19H20.8549C20.935 19 21 18.935 21 18.8549V5.1451C21 5.06496 20.935 5 20.8549 5ZM3.1451 3C1.96039 3 1 3.96039 1 5.1451V18.8549C1 20.0396 1.96039 21 3.1451 21H20.8549C22.0396 21 23 20.0396 23 18.8549V5.1451C23 3.96039 22.0396 3 20.8549 3H3.1451Z"}),(0,m.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.99991 16C6.99991 15.4477 7.44762 15 7.99991 15H15.9999C16.5522 15 16.9999 15.4477 16.9999 16C16.9999 16.5523 16.5522 17 15.9999 17H7.99991C7.44762 17 6.99991 16.5523 6.99991 16Z"})]});function oh(e){let{width:t,height:n}=e;return(0,m.jsx)("svg",{width:t||34,height:n||52,viewBox:"0 0 34 52",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,m.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M30.9998 16.6666V35.3333C30.9998 37.5748 30.9948 38.4695 30.9 39.1895C30.2108 44.4247 26.0912 48.5443 20.856 49.2335C20.1361 49.3283 19.2413 49.3333 16.9998 49.3333C14.7584 49.3333 13.8636 49.3283 13.1437 49.2335C7.90847 48.5443 3.78888 44.4247 3.09965 39.1895C3.00487 38.4695 2.99984 37.5748 2.99984 35.3333V16.6666C2.99984 14.4252 3.00487 13.5304 3.09965 12.8105C3.78888 7.57528 7.90847 3.45569 13.1437 2.76646C13.7232 2.69017 14.4159 2.67202 15.8332 2.66785V9.86573C14.4738 10.3462 13.4998 11.6426 13.4998 13.1666V17.8332C13.4998 19.3571 14.4738 20.6536 15.8332 21.1341V23.6666C15.8332 24.3109 16.3555 24.8333 16.9998 24.8333C17.6442 24.8333 18.1665 24.3109 18.1665 23.6666V21.1341C19.5259 20.6536 20.4998 19.3572 20.4998 17.8332V13.1666C20.4998 11.6426 19.5259 10.3462 18.1665 9.86571V2.66785C19.5837 2.67202 20.2765 2.69017 20.856 2.76646C26.0912 3.45569 30.2108 7.57528 30.9 12.8105C30.9948 13.5304 30.9998 14.4252 30.9998 16.6666ZM0.666504 16.6666C0.666504 14.4993 0.666504 13.4157 0.786276 12.5059C1.61335 6.22368 6.55687 1.28016 12.8391 0.453085C13.7489 0.333313 14.8325 0.333313 16.9998 0.333313C19.1671 0.333313 20.2508 0.333313 21.1605 0.453085C27.4428 1.28016 32.3863 6.22368 33.2134 12.5059C33.3332 13.4157 33.3332 14.4994 33.3332 16.6666V35.3333C33.3332 37.5006 33.3332 38.5843 33.2134 39.494C32.3863 45.7763 27.4428 50.7198 21.1605 51.5469C20.2508 51.6666 19.1671 51.6666 16.9998 51.6666C14.8325 51.6666 13.7489 51.6666 12.8391 51.5469C6.55687 50.7198 1.61335 45.7763 0.786276 39.494C0.666504 38.5843 0.666504 37.5006 0.666504 35.3333V16.6666ZM15.8332 13.1666C15.8332 13.0011 15.8676 12.8437 15.9297 12.7011C15.9886 12.566 16.0722 12.4443 16.1749 12.3416C16.386 12.1305 16.6777 11.9999 16.9998 11.9999C17.6435 11.9999 18.1654 12.5212 18.1665 13.1646L18.1665 13.1666V17.8332L18.1665 17.8353C18.1665 17.8364 18.1665 17.8376 18.1665 17.8387C18.1661 17.9132 18.1588 17.986 18.1452 18.0565C18.0853 18.3656 17.9033 18.6312 17.6515 18.8011C17.4655 18.9266 17.2412 18.9999 16.9998 18.9999C16.3555 18.9999 15.8332 18.4776 15.8332 17.8332V13.1666Z",fill:"currentColor",fillOpacity:"0.8"})})}let op=()=>(0,m.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:(0,m.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.5 8C4.5 4.13401 7.63401 1 11.5 1H12.5C16.366 1 19.5 4.13401 19.5 8V17C19.5 20.3137 16.8137 23 13.5 23H10.5C7.18629 23 4.5 20.3137 4.5 17V8ZM11.2517 3.00606C8.60561 3.13547 6.5 5.32184 6.5 8V17C6.5 19.2091 8.29086 21 10.5 21H13.5C15.7091 21 17.5 19.2091 17.5 17V8C17.5 5.32297 15.3962 3.13732 12.7517 3.00622V5.28013C13.2606 5.54331 13.6074 6.06549 13.6074 6.66669V8.75759C13.6074 9.35879 13.2606 9.88097 12.7517 10.1441V11.4091C12.7517 11.8233 12.4159 12.1591 12.0017 12.1591C11.5875 12.1591 11.2517 11.8233 11.2517 11.4091V10.1457C10.7411 9.88298 10.3931 9.35994 10.3931 8.75759V6.66669C10.3931 6.06433 10.7411 5.5413 11.2517 5.27862V3.00606ZM12.0017 6.14397C11.7059 6.14397 11.466 6.38381 11.466 6.67968V8.74462C11.466 9.03907 11.7036 9.27804 11.9975 9.28031L12.0002 9.28032C12.0456 9.28032 12.0896 9.27482 12.1316 9.26447C12.3401 9.21256 12.5002 9.0386 12.5318 8.82287C12.5345 8.80149 12.5359 8.7797 12.5359 8.75759V6.66669C12.5359 6.64463 12.5345 6.62288 12.5318 6.60154C12.4999 6.38354 12.3368 6.20817 12.1252 6.15826C12.0856 6.14891 12.0442 6.14397 12.0017 6.14397Z"})}),{Title:og,Paragraph:om}=Q.o5,ox=e=>{let{title:t,subTitle:n,icon:o,onChange:i,value:s,selected:r}=e;return(0,m.jsxs)("div",{className:`mouse-pad-option ${r?"mouse-pad-option-selected":""}`,onClick:()=>i(s),children:[(0,m.jsx)("div",{className:`mouse-pad-option-icon ${r?"mouse-pad-option-icon-selected":""}`,children:o}),(0,m.jsx)(og,{heading:6,className:`mouse-pad-option-title ${r?"mouse-pad-option-title-selected":""}`,children:t}),(0,m.jsx)(om,{type:"tertiary",className:`mouse-pad-option-subTitle ${r?"mouse-pad-option-subTitle-selected":""}`,children:n})]})},of=e=>{let{value:t,onChange:n,onPopupVisibleChange:o,containerStyle:i,iconStyle:s,arrowStyle:r}=e,[a,l]=(0,w.useState)(!1);return(0,m.jsx)(Q.AM,{trigger:"custom",position:"topLeft",closeOnEsc:!0,visible:a,onVisibleChange:e=>{null==o||o(e)},onClickOutSide:()=>{l(!1)},spacing:20,content:(0,m.jsxs)("div",{className:"ui-mouse-pad-selector-popover",children:[(0,m.jsx)(Q.o5.Title,{heading:4,children:"Interaction mode"}),(0,m.jsxs)("div",{className:"ui-mouse-pad-selector-popover-options",children:[(0,m.jsx)(ox,{title:"Mouse-Friendly",subTitle:"Drag the canvas with the left mouse button, zoom with the scroll wheel.",value:"MOUSE",selected:"MOUSE"===t,icon:(0,m.jsx)(oh,{}),onChange:n}),(0,m.jsx)(ox,{title:"Touchpad-Friendly",subTitle:"Drag with two fingers moving in the same direction, zoom by pinching or spreading two fingers.",value:"PAD",selected:"PAD"===t,icon:(0,m.jsx)(oc,{}),onChange:n})]})]}),children:(0,m.jsx)("div",{className:`ui-mouse-pad-selector ${a?"ui-mouse-pad-selector-active":""}`,onClick:()=>{l(!a)},style:i,children:(0,m.jsx)("div",{className:"ui-mouse-pad-selector-icon",style:s,children:"MOUSE"===t?(0,m.jsx)(op,{}):(0,m.jsx)(ou,{})})})})},oy="workflow_prefer_interactive_type",oj=/(Macintosh|MacIntel|MacPPC|Mac68K|iPad)/.test(navigator.userAgent),ov=()=>{let e=localStorage.getItem(oy);return e&&["MOUSE","PAD"].includes(e)?e:oj?"PAD":"MOUSE"},ob=()=>{let e=(0,f._6U)(),[t,n]=(0,w.useState)(!1),[o,i]=(0,w.useState)(()=>ov()),[s,r]=(0,w.useState)(!1);return(0,w.useEffect)(()=>{e.setMouseScrollDelta(e=>e/20);let t=ov();e.setInteractiveType(t)},[]),(0,m.jsx)(Q.AM,{trigger:"custom",position:"top",visible:t,onClickOutSide:()=>{n(!1)},children:(0,m.jsx)(Q.m_,{content:"MOUSE"===o?"Mouse-Friendly":"Touchpad-Friendly",style:{display:s?"none":"block"},children:(0,m.jsx)("div",{className:"workflow-toolbar-interactive",children:(0,m.jsx)(of,{value:o,onChange:t=>{i(t),localStorage.setItem(oy,t),e.setInteractiveType(t)},onPopupVisibleChange:r,containerStyle:{border:"none",height:"32px",width:"32px",justifyContent:"center",alignItems:"center",gap:"2px",padding:"4px",borderRadius:"var(--small, 6px)"},iconStyle:{margin:"0",width:"16px",height:"16px"},arrowStyle:{width:"12px",height:"12px"}})})})})},oC=()=>{let e=(0,f._6U)();return(0,m.jsx)(Q.m_,{content:"FitView",children:(0,m.jsx)(Q.K0,{icon:(0,m.jsx)(em.A,{}),type:"tertiary",theme:"borderless",onClick:()=>e.fitView()})})},oA=e=>{let{style:t}=e;return(0,m.jsxs)("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",style:t,children:[(0,m.jsx)("path",{d:"M6.5 9C5.94772 9 5.5 9.44772 5.5 10V11C5.5 11.5523 5.94772 12 6.5 12H7.5C8.05228 12 8.5 11.5523 8.5 11V10C8.5 9.44772 8.05228 9 7.5 9H6.5zM11.5 9C10.9477 9 10.5 9.44772 10.5 10V11C10.5 11.5523 10.9477 12 11.5 12H12.5C13.0523 12 13.5 11.5523 13.5 11V10C13.5 9.44772 13.0523 9 12.5 9H11.5zM15.5 10C15.5 9.44772 15.9477 9 16.5 9H17.5C18.0523 9 18.5 9.44772 18.5 10V11C18.5 11.5523 18.0523 12 17.5 12H16.5C15.9477 12 15.5 11.5523 15.5 11V10z"}),(0,m.jsx)("path",{d:"M23 4C23 2.9 22.1 2 21 2H3C1.9 2 1 2.9 1 4V17.0111C1 18.0211 1.9 19.0111 3 19.0111H7.7586L10.4774 22C10.9822 22.5017 11.3166 22.6311 12 22.7009C12.414 22.707 13.0502 22.5093 13.5 22L16.2414 19.0111H21C22.1 19.0111 23 18.1111 23 17.0111V4ZM3 4H21V17.0111H15.5L12 20.6714L8.5 17.0111H3V4Z"})]})},oN=()=>{let e=(0,f.rJT)(),t=(0,f.h1n)(f.Vo_),n=(0,f.h1n)(f.rmK),o=(0,f.h1n)(f.Z4G),[i,s]=(0,w.useState)(!1),r=(0,w.useCallback)(t=>{let n=e.config.getPosFromMouseEvent(t);return{x:n.x,y:n.y-75}},[e]),a=(0,w.useCallback)(async e=>{s(!1);let i=r(e),a=t.createWorkflowNodeByType(j.Comment,i);await (0,f.cbG)(16),n.selectNode(a),0!==e.detail&&o.startDragSelectedNodes(e)},[n,r,t,o]);return(0,m.jsx)(Q.m_,{trigger:"custom",visible:i,onVisibleChange:s,content:"Comment",children:(0,m.jsx)(Q.K0,{disabled:e.config.readonly,icon:(0,m.jsx)(oA,{style:{width:16,height:16}}),type:"tertiary",theme:"borderless",onClick:a,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1)})})},oM=(0,m.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,m.jsx)("path",{fill:"currentColor",d:"M3 2C2.44772 2 2 2.44771 2 3V12C2 12.5523 2.44772 13 3 13H10C10.5523 13 11 12.5523 11 12V3C11 2.44772 10.5523 2 10 2H3zM4 11V4H9V11H4zM21 22C21.5523 22 22 21.5523 22 21V12C22 11.4477 21.5523 11 21 11H14C13.4477 11 13 11.4477 13 12V21C13 21.5523 13.4477 22 14 22H21zM20 13V20H15V13H20zM2 16C2 15.4477 2.44772 15 3 15H10C10.5523 15 11 15.4477 11 16V21C11 21.5523 10.5523 22 10 22H3C2.44772 22 2 21.5523 2 21V16zM4 20V17H9V20H4zM21 9C21.5523 9 22 8.55228 22 8V3C22 2.44772 21.5523 2 21 2H14C13.4477 2 13 2.44772 13 3V8C13 8.55228 13.4477 9 14 9H21zM20 4V7H15V4H20z"})}),ow=()=>{let e=(0,f._6U)(),t=(0,f.rJT)(),n=(0,w.useCallback)(async()=>{await e.autoLayout()},[e]);return(0,m.jsx)(Q.m_,{content:"Auto Layout",children:(0,m.jsx)(Q.K0,{disabled:t.config.readonly,type:"tertiary",theme:"borderless",onClick:n,icon:oM})})},oI=()=>{let{history:e,playground:t}=(0,f.WDY)(),[n,o]=(0,w.useState)(!1),[i,s]=(0,w.useState)(!1),[r,a]=(0,w.useState)(!0);(0,w.useEffect)(()=>{let t=e.undoRedoService.onChange(()=>{o(e.canUndo()),s(e.canRedo())});return()=>t.dispose()},[e]);let l=(0,f.b6f)();return(0,w.useEffect)(()=>{let e=t.config.onReadonlyOrDisabledChange(()=>l());return()=>e.dispose()},[t]),(0,m.jsx)(n6,{className:"demo-free-layout-tools",children:(0,m.jsxs)(n8,{children:[(0,m.jsx)(ob,{}),(0,m.jsx)(ow,{}),(0,m.jsx)(oi,{}),(0,m.jsx)(on,{}),(0,m.jsx)(oC,{}),(0,m.jsx)(ol,{minimapVisible:r,setMinimapVisible:a}),(0,m.jsx)(od,{visible:r}),(0,m.jsx)(oa,{}),(0,m.jsx)(oN,{}),(0,m.jsx)(Q.m_,{content:"Undo",children:(0,m.jsx)(Q.K0,{type:"tertiary",theme:"borderless",icon:(0,m.jsx)(nY.A,{}),disabled:!n||t.config.readonly,onClick:()=>e.undo()})}),(0,m.jsx)(Q.m_,{content:"Redo",children:(0,m.jsx)(Q.K0,{type:"tertiary",theme:"borderless",icon:(0,m.jsx)(nJ.A,{}),disabled:!i||t.config.readonly,onClick:()=>e.redo()})}),(0,m.jsx)(Q.cG,{layout:"vertical",style:{height:"16px"},margin:3}),(0,m.jsx)(n9,{disabled:t.config.readonly}),(0,m.jsx)(Q.cG,{layout:"vertical",style:{height:"16px"},margin:3}),(0,m.jsx)(n5,{disabled:t.config.readonly})]})})};function oD(e){let{children:t}=e,[n,o]=(0,w.useState)();return(0,m.jsx)(e6.Provider,{value:{visible:!!n,nodeId:n,setNodeId:o},children:t})}function oS(e){var t;let{node:n}=e,o=(0,f.MVE)(n);return(0,m.jsx)(e9.Provider,{value:o,children:(0,m.jsx)("div",{style:{background:"rgb(251, 251, 251)",height:"calc(100vh - 40px)",margin:"8px 8px 8px 0",borderRadius:8,border:"1px solid rgba(82,100,154, 0.13)"},children:null==(t=o.form)?void 0:t.render()})})}let ok=()=>{let{nodeId:e,setNodeId:t}=(0,w.useContext)(e6),{selection:n,playground:o,document:i}=(0,f.WDY)(),s=(0,f.b6f)(),r=(0,w.useCallback)(()=>{(0,w.startTransition)(()=>{t(void 0)})},[]),a=e?i.getNode(e):void 0;(0,w.useEffect)(()=>{let e=o.config.onReadonlyOrDisabledChange(()=>{r(),s()});return()=>e.dispose()},[o]),(0,w.useEffect)(()=>{let e=n.onSelectionChanged(()=>{0===n.selection.length?r():1===n.selection.length&&n.selection[0]!==a&&r()});return()=>e.dispose()},[n,r,a]),(0,w.useEffect)(()=>{if(a){let e=a.onDispose(()=>{t(void 0)});return()=>e.dispose()}return()=>{}},[a]);let l=(0,w.useMemo)(()=>{if(!a)return!1;let{sidebarDisabled:e=!1}=a.getNodeMeta();return!e},[a]);if(o.config.readonly)return null;let d=a&&l?(0,m.jsx)(f.idb.Provider,{value:a,children:(0,m.jsx)(oS,{node:a})},a.id):null;return(0,m.jsx)(Q.DD,{mask:!1,visible:l,onCancel:r,closable:!1,motion:!1,width:500,headerStyle:{display:"none"},bodyStyle:{padding:0},style:{background:"none",boxShadow:"none"},children:(0,m.jsx)(e8.Provider,{value:!0,children:d})})};(0,x.createRoot)(document.getElementById("root")).render((0,m.jsx)(()=>{let e=(0,w.useMemo)(()=>({background:!0,playground:{preventGlobalGesture:!0},readonly:!1,initialData:nU,nodeRegistries:nH,getNodeDefaultRegistry:e=>({type:e,meta:{defaultExpanded:!0},formMeta:ep}),fromNodeJSON:(e,t)=>t,toNodeJSON:(e,t)=>t,lineColor:{hidden:"var(--g-workflow-line-color-hidden,transparent)",default:"var(--g-workflow-line-color-default,#4d53e8)",drawing:"var(--g-workflow-line-color-drawing, #5DD6E3)",hovered:"var(--g-workflow-line-color-hover,#37d0ff)",selected:"var(--g-workflow-line-color-selected,#37d0ff)",error:"var(--g-workflow-line-color-error,red)",flowing:"var(--g-workflow-line-color-flowing,#4d53e8)"},canAddLine(e,t,n){var o,i,s,r;return t.node!==n.node&&((null==(o=t.node.parent)?void 0:o.id)===(null==(i=n.node.parent)?void 0:i.id)||!![null==(s=t.node.parent)?void 0:s.flowNodeType,null==(r=n.node.parent)?void 0:r.flowNodeType].includes(f.yaD.GROUP))&&!t.node.getData(f.tBW).allInputNodes.includes(n.node)},canDeleteLine:(e,t,n,o)=>!0,canDeleteNode:(e,t)=>!0,canDropToNode:(e,t)=>{let{dragNodeType:n,dropNodeType:o}=t;return!([j.Start,j.End,j.BlockStart,j.BlockEnd].includes(n)||[j.Continue,j.Break].includes(n)&&o!==j.Loop)&&(n!==j.Loop||o!==j.Loop)},onDragLineEnd:z,selectBox:{SelectorBoxPopover:eV},scroll:{enableScrollLimit:!1},materials:{components:{},renderDefaultNode:to,renderNodes:{[j.Comment]:tM}},nodeEngine:{enable:!0},variableEngine:{enable:!0},history:{enable:!0,enableChangeNode:!0},onContentChange:(0,I.A)((e,t)=>{if(e.document.disposed)return;let n=e.document.toJSON();console.log("Auto Save: ",t,n);let o=new URLSearchParams(window.location.search).get("id");o?fetch("/viid/workflow/edit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:o,content:JSON.stringify(n)})}).then(e=>{if(!e.ok)throw Error("保存失败");return e.json()}).then(e=>console.log("保存成功",e)).catch(e=>console.error("保存错误:",e)):console.warn("无法保存：URL中未找到流程ID")},1e3),isFlowingLine:(e,t)=>e.get(en).isFlowingLine(t),shortcuts:W,onBind:e=>{let{bind:t}=e;t(q).toSelf().inSingletonScope()},onInit(e){console.log("--- Playground init ---");let t=new URLSearchParams(window.location.search).get("id");t?fetch(`/viid/workflow/detail?id=${t}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>{if(!e.ok)throw Error("获取流程数据失败");return e.json()}).then(t=>{0!==JSON.parse(t.data.content).nodes.length&&(e.document.clear(),e.document.fromJSON(JSON.parse(t.data.content)),console.log("画布数据初始化成功"),e.tools.autoLayout(),e.tools.fitView(!0))}).catch(e=>{console.error("初始化画布数据失败:",e)}):console.warn("无法初始化：URL中未找到流程ID")},onAllLayersRendered(e){e.tools.fitView(!1),console.log("--- Playground rendered ---")},onDispose(){console.log("---- Playground Dispose ----")},i18n:{locale:navigator.language,languages:{"zh-CN":{"Never Remind":"不再提示","Hold {{key}} to drag node out":"按住 {{key}} 可以将节点拖出"},"en-US":{}}},plugins:()=>[(0,E.ho)({renderInsideLine:ts}),(0,D.XA)({disableLayer:!0,canvasStyle:{canvasWidth:182,canvasHeight:102,canvasPadding:50,canvasBackground:"rgba(242, 243, 245, 1)",canvasBorderRadius:10,viewportBackground:"rgba(255, 255, 255, 1)",viewportBorderRadius:4,viewportBorderColor:"rgba(6, 7, 9, 0.10)",viewportBorderWidth:1,viewportBorderDashLength:void 0,nodeColor:"rgba(0, 0, 0, 0.10)",nodeBorderRadius:2,nodeBorderWidth:.145,nodeBorderColor:"rgba(6, 7, 9, 0.10)",overlayColor:"rgba(255, 255, 255, 0.55)"},inactiveDebounceTime:1}),(0,S.M)({edgeColor:"#00B2B2",alignColor:"#00B2B2",edgeLineWidth:1,alignLineWidth:1,alignCrossWidth:8}),(0,k.iS)({renderer:th}),(0,L.Bd)({}),(0,T.jX)({groupNodeRender:eP}),ei({}),es({mode:"server",serverConfig:{domain:"localhost",port:82,protocol:"http"}}),eh({})]}),[]);return(0,m.jsx)("div",{className:"doc-free-feature-overview",children:(0,m.jsx)(f.lSR,{...e,children:(0,m.jsxs)(oD,{children:[(0,m.jsx)("div",{className:"demo-container",children:(0,m.jsx)(f.$un,{className:"demo-editor"})}),(0,m.jsx)(oI,{}),(0,m.jsx)(ok,{})]})})})},{}))},94666:function(){},14744:function(){},86496:function(){},80427:function(){},3960:function(){},68721:function(){},11777:function(){}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var s=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,o)=>(n.f[o](e,t),t),[])),n.u=e=>"static/js/async/"+e+"."+({107:"7ada1353",1070:"6a2d5b9b",1148:"ad8a1c5e",1186:"3ac29d09",1252:"582d636e",1279:"753afc63",1291:"5edbeeb6",1396:"25958228",1490:"cd9ecfcf",1509:"dd1edb43",1567:"843d892d",1568:"b3003eea",160:"b15e6216",1646:"74ac0462",1679:"12258f6f",1740:"09609681",1767:"c49ed2c0",1868:"299f6a8a",1879:"eac13381",1904:"8e0ef1d7",1916:"ae809e2a",194:"84c0a995",1979:"bb22b241",2047:"47dff65e",2108:"f9ab1528",2187:"b3afc525",2197:"ae8b922c",2208:"855c1ccd",2214:"16350c0c",2219:"22c301ad",2230:"1ab68383",224:"eb633fad",2265:"7d53a205",2275:"1bc61b11",229:"2190e22f",2346:"a0e2f717",245:"330c411e",2496:"05b817a6",251:"94e2a3d6",2582:"55ba1085",2684:"1e8dbbfd",2748:"44607a75",2782:"8db1d824",2784:"2470a392",2847:"c91e15f4",2870:"a91a7de6",2871:"1b4ccf63",2881:"dee2ebb8",2900:"db85c2ce",291:"38f913a5",2932:"f2d7e262",2947:"8e6bd604",3026:"d79c190b",3058:"f47e6300",3065:"3d7aa979",3109:"50aa1aea",3142:"8c211348",3151:"38212095",3159:"4fba1a63",3328:"c73862c8",3377:"f7ff0fa1",3396:"684b4883",3407:"cddb85d4",3451:"ccdfd5be",3556:"639d9535",3558:"f67ac7e8",3616:"9624fb75",365:"251e1c25",3672:"734c881c",3684:"1dc8bcd1",3751:"81d6da34",379:"3088e407",3813:"f77d43c8",3892:"c254f8d6",3932:"7aed8ddc",3935:"c22402ad",3961:"d971376b",3965:"a98401f0",3981:"16ddbab8",4010:"3b67d3cb",4019:"fc994028",4036:"c7ad061c",4117:"4b8a12fa",4126:"4daef64a",4192:"70ae31c8",4231:"0845dac1",4255:"cc0fe667",4271:"e1f6fd70",4279:"07a4a89a",4298:"7330b18d",4309:"4e805ab7",4311:"d4b99a0a",4391:"d5e5be90",4430:"1ee1531d",4437:"4f3e835e",4452:"e99fcc28",4490:"b8558c20",4496:"f081f84c",4630:"39a7090a",4645:"1abac4b2",4662:"82bb418a",4668:"87941688",4723:"67920b40",475:"632aed09",4755:"b87b4d56",4773:"55744880",4794:"cdf2da9c",4800:"e3dbfdec",4822:"1c198cae",4877:"45d7eda8",4942:"0a9b0eaf",4945:"70527150",4955:"070836d2",497:"8f25b238",5037:"32151a40",505:"5bc54f76",5087:"962a6465",5203:"bcd62f25",5208:"5ec9ef0b",5212:"b3382a53",5272:"23e45e66",5287:"022c9cf2",53:"f5d5897f",5310:"bc9a5767",534:"9e8a2211",5347:"a9992b0e",5374:"0ee51a74",5394:"fc1474a3",5396:"e0290d2f",545:"cb915db8",5488:"41cbdbe9",549:"19666949",5532:"6af57619",5585:"21c2d69c",5624:"3893a5be",564:"5c57845f",5644:"89d56ec3",5703:"ac61a75d",5716:"f56904d2",5721:"d94bf0a9",5776:"fb0ba463",5861:"81ff3e6f",5887:"7f0c33e9",5889:"329688de",5897:"ba7c6bbb",5922:"2ae10d07",597:"60b93840",607:"b61bb68f",6073:"aba0d705",6087:"c75d9c13",6111:"62eadce5",6175:"b9c83d9f",619:"2a285608",6190:"98314172",6240:"cdd3d6f7",626:"355ebe91",6260:"070d9b95",6277:"94b9867c",628:"eb4aa12c",6289:"1c939c3b",6291:"70c50c7b",6297:"952b60a4",6322:"65d17bd0",6333:"367c6eae",636:"0bda3791",6367:"a79cf78e",6397:"4981b6f0",6405:"9063ff63",6483:"7f696a42",6518:"45855146",6520:"81d55608",6597:"8c7a38a6",6611:"b127f1c4",6644:"025517a5",6675:"250d3119",6718:"75dbdd62",6818:"8788d72f",6844:"ba194aaa",6891:"3dac190c",69:"450cfbdb",6904:"81377b1f",6919:"5f6fe445",694:"f36d999e",6948:"f581d209",6980:"01a6d8dc",7036:"993438a7",7042:"70f145d0",7084:"9254df1c",7087:"70e81317",7115:"3704ae1a",712:"6e43bd7a",7127:"bf95b799",7155:"e4a3d14c",7231:"b0a7dd3d",7304:"df6f5f66",7450:"af1aa1b2",7511:"329d0f5f",7512:"08f33e5d",7530:"7b42ae5a",7544:"a591b346",7693:"0cfde53b",77:"b06a4c3e",7747:"a4f4c73a",7752:"93859945",777:"a9eeec11",780:"5181802b",7810:"a443999d",7823:"5250ebb2",7882:"7e3b8f75",7885:"43913daa",790:"5540f666",7929:"479e8d02",7950:"f4f68860",7957:"e157bb1f",7970:"1bfd71a4",7980:"f2dde3de",8032:"9a252d55",8136:"b03b8b4d",816:"72391613",8184:"f349ecf8",8189:"98a44d87",819:"70822315",8224:"5e14b04d",8274:"2b35e803",8277:"7ed4add4",8319:"8e1b7913",832:"c590998d",8409:"d6a5c970",8417:"7ed55977",8444:"79743570",8456:"dcc113d5",8472:"ba5b3d7f",8476:"54d28c7a",8483:"11082cf7",850:"2be09185",8519:"bbba1a89",8529:"b4838c14",8537:"67c52a22",8572:"b4933605",8575:"ac162735",8588:"2d24d804",8662:"6a76f488",8690:"b153b0bf",87:"2a5cef62",877:"76444f7b",8838:"2533da2c",8920:"bc565269",8922:"d8fae86f",8942:"3a0eedc8",8951:"0bca518d",8980:"bdea2bdb",8982:"6427c8cb",8986:"04555687",9002:"55ea72d0",9031:"c4b5c4a4",9032:"58bfd628",9093:"9456bae0",911:"d37a00ea",9110:"7c8e8f76",9138:"367a6c6d",9187:"eb178ce5",9247:"f892b7a0",9250:"10142a02",9291:"8cb79e92",9378:"e71ad10f",9429:"0309d481",9444:"57b3f8c1",9447:"1ff838ea",9468:"741a6339",9552:"987d3e27",9558:"92e5b2b9",957:"318532a1",9592:"e4661d96",960:"eb531cbe",9612:"a6bf941b",963:"69219dae",9645:"c4e328ce",966:"78c3289a",9693:"0c1e06eb",9694:"24a37a72",9695:"c7e61d65",9864:"4f11605b",9887:"536f7627",993:"2a6591bf",9989:"ab0a29b4"})[e]+".js",n.miniCssF=e=>""+e+".css",n.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="@flowgram.ai/demo-free-layout:";n.l=function(o,i,s,r){if(e[o])return void e[o].push(i);if(void 0!==s)for(var a,l,d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==o||u.getAttribute("data-webpack")==t+s){a=u;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=o),e[o]=[i];var h=function(t,n){a.onerror=a.onload=null,clearTimeout(p);var i=e[o];if(delete e[o],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach(function(e){return e(n)}),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}})(),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.nc=void 0,(()=>{var e=[];n.O=(t,o,i,s)=>{if(o){s=s||0;for(var r=e.length;r>0&&e[r-1][2]>s;r--)e[r]=e[r-1];e[r]=[o,i,s];return}for(var a=1/0,r=0;r<e.length;r++){for(var[o,i,s]=e[r],l=!0,d=0;d<o.length;d++)(!1&s||a>=s)&&Object.keys(n.O).every(e=>n.O[e](o[d]))?o.splice(d--,1):(l=!1,s<a&&(a=s));if(l){e.splice(r--,1);var c=i();void 0!==c&&(t=c)}}return t}})(),n.p="/",(()=>{n.b=document.baseURI||self.location.href;var e={8410:0};n.f.j=function(t,o){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)o.push(i[2]);else{var s=new Promise((n,o)=>i=e[t]=[n,o]);o.push(i[2]=s);var r=n.p+n.u(t),a=Error();n.l(r,function(o){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=o&&("load"===o.type?"missing":o.type),r=o&&o.target&&o.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+r+")",a.name="ChunkLoadError",a.type=s,a.request=r,i[1](a)}},"chunk-"+t,t)}},n.O.j=t=>0===e[t];var t=(t,o)=>{var i,s,[r,a,l]=o,d=0;if(r.some(t=>0!==e[t])){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)var c=l(n)}for(t&&t(o);d<r.length;d++)s=r[d],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(c)},o=self.webpackChunk_flowgram_ai_demo_free_layout=self.webpackChunk_flowgram_ai_demo_free_layout||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var o=n.O(void 0,["9783","2328","8003"],function(){return n(67326)});o=n.O(o)})();