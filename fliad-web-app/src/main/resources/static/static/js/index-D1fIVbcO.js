import{_ as e}from"./index-r8v7tfQO.js";import{m as a}from"./messageApi-BFWVtpEx.js";import t from"./form-BiMR735Q.js";import l from"./detail-DtdM-IbH.js";import{_ as r}from"./index-DcffTgQN.js";import{d as s,f as o,a1 as n,U as d,V as i,k as c,a2 as u,u as f,G as m,Z as p,F as _,Y as h}from"./vue-vendor-BzDj5Url.js";import"./ant-design-vendor-CRFwT3Wn.js";import"./index-yhO5Pkur.js";import"./index-CkDqqgfU.js";import"./formRules-B2bzcXv4.js";import"./userApi-BNWGxnHS.js";const y=["onClick"],v=s({name:"devMessage"}),b=r(Object.assign(v,{setup(r){const s=[{title:"主题",dataIndex:"subject",ellipsis:!0},{title:"正文",dataIndex:"content",ellipsis:!0},{title:"发送时间",dataIndex:"createTime",ellipsis:!0,sorter:!0,width:"150px"},{title:"操作",dataIndex:"action",align:"center",width:"150px"}],v=o([]),b={alert:{show:!1,clear:()=>{v.value=o([])}},rowSelection:{onChange:(e,a)=>{v.value=e}}},k=o(null),w=o(),g=o(),j=o({}),x=o(),C=e=>a.messagePage(Object.assign(e,j.value)).then(e=>e),R=()=>{g.value.resetFields(),k.value.refresh(!0)},I=e=>{a.messageDelete(e).then(()=>{k.value.clearRefreshSelected()})};return(r,o)=>{const O=n("a-input"),K=n("a-form-item"),S=n("a-col"),D=n("SearchOutlined"),F=n("a-button"),A=n("redo-outlined"),B=n("a-row"),U=n("a-form"),z=n("a-card"),G=e,M=n("a-space"),N=n("a-divider"),P=n("a-popconfirm"),T=n("s-table");return i(),d(_,null,[c(z,{bordered:!1,class:"xn-mb10"},{default:u(()=>[c(U,{ref_key:"searchFormRef",ref:g,name:"advanced_search",class:"ant-advanced-search-form",model:f(j)},{default:u(()=>[c(B,{gutter:24},{default:u(()=>[c(S,{span:8},{default:u(()=>[c(K,{name:"searchKey",label:"主题关键词"},{default:u(()=>[c(O,{value:f(j).searchKey,"onUpdate:value":o[0]||(o[0]=e=>f(j).searchKey=e),placeholder:"请输入站内信主题关键词"},null,8,["value"])]),_:1})]),_:1}),c(S,{span:8},{default:u(()=>[c(F,{type:"primary",onClick:o[1]||(o[1]=e=>f(k).refresh(!0))},{icon:u(()=>[c(D)]),default:u(()=>[o[4]||(o[4]=m(" 查询 "))]),_:1}),c(F,{class:"snowy-button-left",onClick:R},{icon:u(()=>[c(A)]),default:u(()=>[o[5]||(o[5]=m(" 重置 "))]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),c(z,{bordered:!1},{default:u(()=>[c(T,{ref_key:"tableRef",ref:k,columns:s,data:C,"expand-row-by-click":!0,alert:b.alert.show,bordered:"","row-key":e=>e.id,"row-selection":b.rowSelection},{operator:u(()=>[c(M,null,{default:u(()=>[c(F,{type:"primary",onClick:o[2]||(o[2]=e=>f(w).onOpen())},{default:u(()=>o[6]||(o[6]=[m(" 发送站内信 ")])),_:1}),c(G,{buttonName:"批量删除",icon:"DeleteOutlined",buttonDanger:"",selectedRowKeys:f(v),onBatchCallBack:I},null,8,["selectedRowKeys"])]),_:1})]),bodyCell:u(({column:e,record:t})=>["action"===e.dataIndex?(i(),d(_,{key:0},[h("a",{onClick:e=>f(x).onOpen(t)},"详情",8,y),c(N,{type:"vertical"}),c(P,{title:"删除此站内信？",onConfirm:e=>(e=>{let t=[{id:e.id}];a.messageDelete(t).then(()=>{k.value.refresh(!0)})})(t)},{default:u(()=>[c(F,{type:"link",danger:"",size:"small"},{default:u(()=>o[7]||(o[7]=[m("删除")])),_:1})]),_:2},1032,["onConfirm"])],64)):p("",!0)]),_:1},8,["alert","row-key","row-selection"])]),_:1}),c(t,{ref_key:"formRef",ref:w,onSuccessful:o[3]||(o[3]=e=>f(k).refresh())},null,512),c(l,{ref_key:"detailRef",ref:x},null,512)],64)}}}),[["__scopeId","data-v-3f9688e9"]]);export{b as default};
