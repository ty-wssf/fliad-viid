import{_ as e}from"./index-r8v7tfQO.js";import{m as a}from"./menuApi-DZDEix35.js";import t from"./form-DnGADVI_.js";import l from"./changeModuleForm-COR4fHGn.js";import n from"./index-CK47-Dyz.js";import{u as o}from"./index-DcffTgQN.js";import{d as i,f as r,a1 as d,U as u,V as s,k as c,a2 as p,H as m,u as y,F as f,W as k,a6 as v,G as h,a7 as T,a3 as _,Z as b,Y as x}from"./vue-vendor-BzDj5Url.js";import"./ant-design-vendor-CRFwT3Wn.js";import"./index-yhO5Pkur.js";import"./formRules-B2bzcXv4.js";import"./snowflake-id-Ddy3gscf.js";import"./iconSelector-BS7wf_Ak.js";import"./form-BfjD3unC.js";const I={key:0},O={key:1},w={key:0},E={key:1},g={key:0},C={key:1},M=["onClick"],j={key:0},U={class:"ant-dropdown-link"},N=["onClick"],S=["onClick"],D=i({name:"sysMenu"}),L=Object.assign(D,{setup(i){const D=r({}),L=r(null),R=r(),F=r(),$=r(),A=r(),B=r([]),K={refresh:!0,height:!0,columnSetting:!1,striped:!1},Y=[{title:"显示名称",dataIndex:"title",ellipsis:!0,width:300},{title:"类型",dataIndex:"menuType",width:100},{title:"路由地址",dataIndex:"path"},{title:"组件",dataIndex:"component"},{title:"是否可见",dataIndex:"visible",width:120},{title:"排序",dataIndex:"sortCode",sorter:!0,width:100},{title:"操作",dataIndex:"action",width:"200px",scopedSlots:{customRender:"action"}}];let P=r([]);const V={alert:{show:!1,clear:()=>{P=r([])}},rowSelection:{onChange:(e,a)=>{P.value=e}}},G=e=>A.value?a.menuTree(Object.assign(e,D.value)).then(e=>e||[]):a.menuModuleSelector().then(t=>(B.value=t,A.value=t.length>0?t[0].id:"",D.value.module=A.value,a.menuTree(Object.assign(e,D.value)).then(e=>e||[]))),q=()=>{L.value.refresh(!0)},z=e=>{a.menuDelete(e).then(()=>{L.value.clearRefreshSelected(),W()})},H=()=>{L.value.refresh(!0),W()},W=()=>{o().fetchMenu()};return(o,i)=>{const r=d("a-radio-button"),Z=d("a-radio-group"),J=d("a-input-search"),Q=d("a-space"),X=d("a-card"),ee=d("plus-outlined"),ae=d("a-button"),te=e,le=d("question-circle-outlined"),ne=d("a-tooltip"),oe=d("a-tag"),ie=d("a-divider"),re=d("a-popconfirm"),de=d("DownOutlined"),ue=d("a-menu-item"),se=d("a-menu"),ce=d("a-dropdown"),pe=d("s-table");return s(),u(f,null,[c(X,{bordered:!1},{default:p(()=>[c(Q,null,{default:p(()=>[c(Z,{value:y(A),"onUpdate:value":i[0]||(i[0]=e=>m(A)?A.value=e:null),"button-style":"solid"},{default:p(()=>[(s(!0),u(f,null,k(y(B),e=>(s(),v(r,{key:e.id,value:e.id,onClick:a=>{return t=e.id,D.value.module=t,void L.value.refresh(!0);var t}},{default:p(()=>[(s(),v(T(e.icon))),h(" "+_(e.title),1)]),_:2},1032,["value","onClick"]))),128))]),_:1},8,["value"]),c(J,{value:y(D).searchKey,"onUpdate:value":i[1]||(i[1]=e=>y(D).searchKey=e),placeholder:"请输入菜单名称关键词","enter-button":"",allowClear:"",onSearch:q},null,8,["value"])]),_:1})]),_:1}),c(X,{bordered:!1,class:"mt-2"},{default:p(()=>[c(pe,{ref_key:"tableRef",ref:L,columns:Y,data:G,alert:V.alert.show,bordered:"","row-key":e=>e.id,"show-pagination":!1,"tool-config":K,"row-selection":V.rowSelection,scroll:{x:"max-content"}},{operator:p(()=>[c(Q,null,{default:p(()=>[c(ae,{type:"primary",onClick:i[2]||(i[2]=e=>y(R).onOpen(void 0,y(A)))},{icon:p(()=>[c(ee)]),default:p(()=>[i[3]||(i[3]=h(" 新增菜单 "))]),_:1}),c(te,{buttonName:"批量删除",icon:"DeleteOutlined",buttonDanger:"",selectedRowKeys:y(P),onBatchCallBack:z},null,8,["selectedRowKeys"])]),_:1})]),headerCell:p(({title:e,column:a})=>["visible"===a.dataIndex?(s(),v(ne,{key:0},{title:p(()=>i[4]||(i[4]=[h(" 如果将上级目录设置为隐藏，那么上级目录下的菜单都会被隐藏！ ")])),default:p(()=>[c(le),h("  "+_(e),1)]),_:2},1024)):b("",!0)]),bodyCell:p(({column:e,record:t})=>["title"===e.dataIndex?(s(),u(f,{key:0},[(s(),v(T(t.icon))),h(" "+_(t.title),1)],64)):b("",!0),"path"===e.dataIndex?(s(),u(f,{key:1},["MENU"===t.menuType?(s(),u("span",I,_(t.path),1)):(s(),u("span",O,"-"))],64)):b("",!0),"component"===e.dataIndex?(s(),u(f,{key:2},["MENU"===t.menuType?(s(),u("span",w,_(t.component),1)):(s(),u("span",E,"-"))],64)):b("",!0),"menuType"===e.dataIndex?(s(),u(f,{key:3},["CATALOG"===t.menuType?(s(),v(oe,{key:0,color:"cyan"},{default:p(()=>[h(_(o.$TOOL.dictTypeData("MENU_TYPE",t.menuType)),1)]),_:2},1024)):b("",!0),"MENU"===t.menuType?(s(),v(oe,{key:1,color:"blue"},{default:p(()=>[h(_(o.$TOOL.dictTypeData("MENU_TYPE",t.menuType)),1)]),_:2},1024)):b("",!0),"IFRAME"===t.menuType?(s(),v(oe,{key:2,color:"purple"},{default:p(()=>[h(_(o.$TOOL.dictTypeData("MENU_TYPE",t.menuType)),1)]),_:2},1024)):b("",!0),"LINK"===t.menuType?(s(),v(oe,{key:3,color:"orange"},{default:p(()=>[h(_(o.$TOOL.dictTypeData("MENU_TYPE",t.menuType)),1)]),_:2},1024)):b("",!0)],64)):b("",!0),"visible"===e.dataIndex?(s(),u(f,{key:4},["FALSE"===t.visible?(s(),v(oe,{key:0},{default:p(()=>[h(_(o.$TOOL.dictTypeData("MENU_VISIBLE",t.visible)),1)]),_:2},1024)):(s(),v(oe,{key:1,color:"green"},{default:p(()=>["TRUE"===t.visible?(s(),u("span",g,_(o.$TOOL.dictTypeData("MENU_VISIBLE",t.visible)),1)):(s(),u("span",C," 显示 "))]),_:2},1024))],64)):b("",!0),"action"===e.dataIndex?(s(),v(Q,{key:5},{default:p(()=>[x("a",{onClick:e=>y(R).onOpen(t,y(A))},"编辑",8,M),c(ie,{type:"vertical"}),c(re,{title:"确定要删除此菜单吗？",onConfirm:e=>(e=>{let t=[{id:e.id}];a.menuDelete(t).then(()=>{L.value.refresh(!0),W()})})(t)},{default:p(()=>[c(ae,{type:"link",danger:"",size:"small"},{default:p(()=>i[5]||(i[5]=[h("删除")])),_:1})]),_:2},1032,["onConfirm"]),"0"===t.parentId||"MENU"===t.menuType?(s(),u("div",j,[c(ie,{type:"vertical"}),c(ce,null,{overlay:p(()=>[c(se,null,{default:p(()=>["0"===t.parentId?(s(),v(ue,{key:0},{default:p(()=>[x("a",{onClick:e=>y(F).onOpen(t)},"更改模块",8,N)]),_:2},1024)):b("",!0),"MENU"===t.menuType?(s(),v(ue,{key:1},{default:p(()=>[x("a",{onClick:e=>y($).onOpen(t)},"按钮权限",8,S)]),_:2},1024)):b("",!0)]),_:2},1024)]),default:p(()=>[x("a",U,[i[6]||(i[6]=h(" 更多 ")),c(de)])]),_:2},1024)])):b("",!0)]),_:2},1024)):b("",!0)]),_:1},8,["alert","row-key","row-selection"])]),_:1}),c(t,{ref_key:"formRef",ref:R,onSuccessful:H},null,512),c(l,{ref_key:"changeModuleFormRef",ref:F,onSuccessful:H},null,512),c(n,{ref_key:"buttonRef",ref:$},null,512)],64)}}});export{L as default};
