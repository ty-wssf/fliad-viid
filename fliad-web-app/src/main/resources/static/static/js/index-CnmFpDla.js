import{_ as e,g as t,t as n,a,s as o,D as s,r as l,l as r,v as i,u as c,b as u,c as d,N as h}from"./index-DcffTgQN.js";import{k as p,i as m}from"./keepAlive-BXK4dPiU.js";import{f,c as y,o as v,a1 as g,U as w,V as C,Y as b,k,Z as _,F as O,W as S,a6 as x,a2 as E,ag as M,u as L,a3 as T,a5 as A,ac as I,B as R,ah as N,H as P,a7 as K,d as B,ai as D,n as F,w as U,q as W,A as H,X as j,_ as Y,a8 as q,G as $,D as V,aj as G,ak as z,r as X,h as J,j as Q,l as Z}from"./vue-vendor-BzDj5Url.js";import{_ as ee}from"./index-yhO5Pkur.js";import{S as te,E as ne,m as ae,n as oe,M as se,k as le,o as re,p as ie,q as ce,s as ue,F as de,I as he,B as pe,u as me,v as fe}from"./ant-design-vendor-CRFwT3Wn.js";import{r as ye,a as ve}from"./formRules-B2bzcXv4.js";const ge={CLASSICAL:"classical",DOUBLEROW:"doublerow",TOP:"top"},we=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Ce=(()=>{if("undefined"==typeof document)return!1;const e=we[0],t={};for(const n of we){if((null==n?void 0:n[1])in document){for(const[a,o]of n.entries())t[e[a]]=o;return t}}return!1})(),be={change:Ce.fullscreenchange,error:Ce.fullscreenerror};let ke={request:(e=document.documentElement,t)=>new Promise((n,a)=>{const o=()=>{ke.off("change",o),n()};ke.on("change",o);const s=e[Ce.requestFullscreen](t);s instanceof Promise&&s.then(o).catch(a)}),exit:()=>new Promise((e,t)=>{if(!ke.isFullscreen)return void e();const n=()=>{ke.off("change",n),e()};ke.on("change",n);const a=document[Ce.exitFullscreen]();a instanceof Promise&&a.then(n).catch(t)}),toggle:(e,t)=>ke.isFullscreen?ke.exit():ke.request(e,t),onchange(e){ke.on("change",e)},onerror(e){ke.on("error",e)},on(e,t){const n=be[e];n&&document.addEventListener(n,t,!1)},off(e,t){const n=be[e];n&&document.removeEventListener(n,t,!1)},raw:Ce};Object.defineProperties(ke,{isFullscreen:{get:()=>Boolean(document[Ce.fullscreenElement])},element:{enumerable:!0,get:()=>document[Ce.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>Boolean(document[Ce.fullscreenEnabled])}}),Ce||(ke={isEnabled:!1});const _e=ke,Oe=[{key:"薄暮",color:"#F5222D"},{key:"火山",color:"#FA541C"},{key:"胭脂粉",color:"#EB2F96"},{key:"日暮",color:"#FAAD14"},{key:"明青",color:"#13C2C2"},{key:"极光绿",color:"#52C41A"},{key:"深绿",color:"#009688"},{key:"拂晓蓝（默认）",color:"#1677FF"},{key:"极客蓝",color:"#2F54EB"},{key:"酱紫",color:"#722ED1"},{key:"主题黑",color:"#001529"}],Se={class:"setting-drawer-index-content"},xe={class:"scrollbar"},Ee={class:"snowy-setting-checkbox"},Me=["onClick"],Le={class:"snowy-setting-checkbox"},Te=["onClick"],Ae={class:"mb-4"},Ie={class:"h-[50px]"},Re={key:0,class:"mb-4 layout-slide",style:{"padding-top":"10px"}},Ne={key:1,class:"mb-4 layout-slide"},Pe=e({__name:"setting",setup(e){const o=t(),s=f(!1),l=f(!1),r=f(!1),i=f(!1),c=f(!1),u={menuIsCollapse:"MENU_COLLAPSE",sideUniqueOpen:"SIDE_UNIQUE_OPEN",layoutTagsOpen:"LAYOUT_TAGS_OPEN",breadcrumbOpen:"BREADCRUMD_OPEN",fixedWidth:"FIXEDWIDTH_OPEN",topHeaderThemeColorOpen:"TOP_HEADER_THEME_COLOR_OPEN",topHeaderThemeColorSpread:"TOP_HEADER_THEME_COLOR_SPREAD",loginUserWatermarkOpen:"LOGIN_USER_WATERMARK_OPEN",footerCopyrightOpen:"FOOTER_COPYRIGHT_OPEN",roundedCornerStyleOpen:"ROUNDED_CORNER_STYLE_OPEN",moduleUnfoldOpen:"MODULE_UNFOLD_OPEN"},d=f([{tips:"暗色主题风格",value:a.DARK,style:"snowy-setting-checkbox-item-dark"},{tips:"亮色主题风格",value:a.LIGHT,style:"snowy-setting-checkbox-item-light"},{tips:"暗黑模式",value:a.REAL_DARK,style:"snowy-setting-checkbox-item-realdark"}]),h=f([{tips:"经典",value:ge.CLASSICAL,style:"snowy-setting-layout-menu-classical"},{tips:"双排菜单",value:ge.DOUBLEROW,style:"snowy-setting-layout-menu-doublerow"},{tips:"顶部菜单",value:ge.TOP,style:"snowy-setting-layout-menu-top"}]),p=f([{label:"抽屉",value:"drawer"},{label:"对话框",value:"modal"}]),m=y(()=>o.theme),A=y(()=>o.themeColor),I=y(()=>o.layout),R=y(()=>o.menuIsCollapse),N=y(()=>o.sideUniqueOpen),P=y(()=>o.loginUserWatermarkOpen),K=y(()=>o.footerCopyrightOpen),B=y(()=>o.roundedCornerStyleOpen),D=y(()=>o.layoutTagsOpen),F=y(()=>o.breadcrumbOpen),U=y(()=>o.fixedWidth),W=y(()=>o.moduleUnfoldOpen),H=y(()=>o.topHeaderThemeColorOpen),j=y(()=>o.topHeaderThemeColorSpread),Y=y(()=>o.formStyle),q=()=>{V("topHeaderThemeColorOpen"),H.value||(o.topHeaderThemeColorSpread=!1,n.data.set("SNOWY_TOP_HEADER_THEME_COLOR_SPREAD",!1))},$=()=>{V("topHeaderThemeColorSpread")},V=e=>{o.toggleConfig(e);const t=u[e];n.data.set(`SNOWY_${t}`,o[e])},G=e=>{n.data.set("SNOWY_FORM_STYLE",e),o.setFormStyle(e)},z=e=>{m.value===a.REAL_DARK?(s.value=!0,l.value=!0,H.value&&(V("topHeaderThemeColorOpen"),n.data.set("SNOWY_TOP_HEADER_THEME_COLOR_SPREAD",!1))):e!==ge.TOP?(l.value=!1,s.value=!1):s.value=!1,e===ge.TOP?(r.value=!0,i.value=!0,N.value&&V("sideUniqueOpen"),c.value=!0,l.value=!0):(r.value=!1,i.value=!1,c.value=!1)};return v(()=>{const e=n.data.get("SNOWY_LAYOUT");z(e)}),(e,t)=>{const a=g("check-outlined"),u=g("a-tooltip"),f=g("a-divider"),y=g("a-tag"),v=g("a-switch"),X=g("a-form-item"),J=g("a-select"),Q=g("a-form"),Z=g("a-alert");return C(),w("div",Se,[b("div",xe,[t[13]||(t[13]=b("h3",{class:"setting-item-title"},"整体风格设置",-1)),b("div",Ee,[(C(!0),w(O,null,S(L(d),(e,t)=>(C(),x(u,{key:t,placement:"top"},{title:E(()=>[b("span",null,T(e.tips),1)]),default:E(()=>[b("div",{class:M(["snowy-setting-checkbox-item",e.style]),onClick:t=>{return a=e.value,o.setTheme(a),n.data.set("SNOWY_THEME",a),void z(I.value);var a}},[L(m)===e.value?(C(),x(a,{key:0,class:"snowy-setting-checkbox-item-select-icon"})):_("",!0)],10,Me)]),_:2},1024))),128))]),t[14]||(t[14]=b("h3",{class:"setting-item-title"},"整体界面布局",-1)),b("div",Le,[(C(!0),w(O,null,S(L(h),(e,s)=>(C(),x(u,{key:s,placement:"top"},{title:E(()=>[b("span",null,T(e.tips),1)]),default:E(()=>[b("div",{class:M(["snowy-setting-checkbox-item",e.style]),onClick:t=>{return a=e.value,o.setLayout(a),n.data.set("SNOWY_LAYOUT",a),void z(a);var a}},[t[9]||(t[9]=b("div",{class:"snowy-setting-layout-menu-doublerow-inner"},null,-1)),L(I)===e.value?(C(),x(a,{key:0,class:"snowy-setting-checkbox-item-select-icon"})):_("",!0)],10,Te)]),_:2},1024))),128))]),k(f),b("div",Ae,[t[10]||(t[10]=b("h3",{class:"setting-item-title"},"主题色",-1)),b("div",Ie,[(C(!0),w(O,null,S(L(Oe),(e,t)=>(C(),x(u,{key:t,class:"snowy-setting-theme-color-colorBlock"},{title:E(()=>[b("span",null,T(e.key),1)]),default:E(()=>[k(y,{color:e.color,onClick:t=>{return a=e.color,n.data.set("SNOWY_THEME_COLOR",a),void o.setThemeColor(a);var a}},{default:E(()=>[L(A)===e.color?(C(),x(a,{key:0})):_("",!0)]),_:2},1032,["color","onClick"])]),_:2},1024))),128))])]),L(s)?_("",!0):(C(),w("div",Re,[t[11]||(t[11]=b("h4",{class:"setting-item-title"},"顶栏应用主题色：",-1)),k(v,{checked:L(H),onChange:q,disabled:L(s)},null,8,["checked","disabled"])])),L(l)?_("",!0):(C(),w("div",Ne,[t[12]||(t[12]=b("h4",{class:"setting-item-title"},"顶栏主题色通栏：",-1)),k(v,{class:"xn-fdr",checked:L(j),disabled:!L(H)||L(l),onChange:$},null,8,["checked","disabled"])])),k(f),k(Q,{ref:"formRef",class:"text-right"},{default:E(()=>[L(r)?_("",!0):(C(),x(X,{key:0,label:"模块坞"},{default:E(()=>[k(v,{checked:L(W),onChange:t[0]||(t[0]=e=>V("moduleUnfoldOpen")),disabled:L(r)},null,8,["checked","disabled"])]),_:1})),L(I)==L(ge).TOP?(C(),x(X,{key:1,label:"固定宽度"},{default:E(()=>[k(v,{checked:L(U),onChange:t[1]||(t[1]=e=>V("fixedWidth"))},null,8,["checked"])]),_:1})):_("",!0),k(X,{label:"面包屑"},{default:E(()=>[k(v,{checked:L(F),onChange:t[2]||(t[2]=e=>V("breadcrumbOpen"))},null,8,["checked"])]),_:1}),k(X,{label:"多标签"},{default:E(()=>[k(v,{checked:L(D),onChange:t[3]||(t[3]=e=>V("layoutTagsOpen"))},null,8,["checked"])]),_:1}),L(i)?_("",!0):(C(),x(X,{key:2,label:"折叠菜单"},{default:E(()=>[k(v,{checked:L(R),onChange:t[4]||(t[4]=e=>V("menuIsCollapse")),disabled:L(i)},null,8,["checked","disabled"])]),_:1})),L(c)?_("",!0):(C(),x(X,{key:3,label:"菜单排他展开"},{default:E(()=>[k(v,{checked:L(N),onChange:t[5]||(t[5]=e=>V("sideUniqueOpen")),disabled:L(c)},null,8,["checked","disabled"])]),_:1})),k(X,{label:"登录用户水印"},{default:E(()=>[k(v,{checked:L(P),onChange:t[6]||(t[6]=e=>V("loginUserWatermarkOpen"))},null,8,["checked"])]),_:1}),k(X,{label:"页脚版权信息"},{default:E(()=>[k(v,{checked:L(K),onChange:t[7]||(t[7]=e=>V("footerCopyrightOpen"))},null,8,["checked"])]),_:1}),k(X,{label:"圆角风格"},{default:E(()=>[k(v,{checked:L(B),onChange:t[8]||(t[8]=e=>V("roundedCornerStyleOpen"))},null,8,["checked"])]),_:1}),k(X,{label:"表单风格"},{default:E(()=>[k(J,{value:L(Y),class:"!w-[80px]",size:"small",options:L(p),onChange:G},null,8,["value","options"])]),_:1})]),_:1},512),k(Z,{message:"以上配置可实时预览，开发者可在 config/index.js 中配置默认值，不建议在生产环境下开放布局设置",type:"warning"})])])}}},[["__scopeId","data-v-54dd7176"]]);var Ke,Be,De,Fe={exports:{}};
/** @license
 * eventsource.js
 * Available under MIT License (MIT)
 * https://github.com/Yaffle/EventSource/
 */function Ue(e){return Array.isArray?Array.isArray(e):"[object Array]"===Ve(e)}function We(e){return"string"==typeof e}function He(e){return"number"==typeof e}function je(e){return!0===e||!1===e||function(e){return Ye(e)&&null!==e}(e)&&"[object Boolean]"==Ve(e)}function Ye(e){return"object"==typeof e}function qe(e){return null!=e}function $e(e){return!e.trim().length}function Ve(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}Ke||(Ke=1,Be=Fe,De=Fe.exports,function(e){var t=e.setTimeout,n=e.clearTimeout,a=e.XMLHttpRequest,o=e.XDomainRequest,s=e.ActiveXObject,l=e.EventSource,r=e.document,i=e.Promise,c=e.fetch,u=e.Response,d=e.TextDecoder,h=e.TextEncoder,p=e.AbortController;if("undefined"==typeof window||void 0===r||"readyState"in r||null!=r.body||(r.readyState="loading",window.addEventListener("load",function(e){r.readyState="complete"},!1)),null==a&&null!=s&&(a=function(){return new s("Microsoft.XMLHTTP")}),null==Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),Date.now||(Date.now=function(){return(new Date).getTime()}),null==p){var m=c;c=function(e,t){var n=t.signal;return m(e,{headers:t.headers,credentials:t.credentials,cache:t.cache}).then(function(e){var t=e.body.getReader();return n._reader=t,n._aborted&&n._reader.cancel(),{status:e.status,statusText:e.statusText,headers:e.headers,body:{getReader:function(){return t}}}})},p=function(){this.signal={_reader:null,_aborted:!1},this.abort=function(){null!=this.signal._reader&&this.signal._reader.cancel(),this.signal._aborted=!0}}}function f(){this.bitsNeeded=0,this.codePoint=0}f.prototype.decode=function(e){function t(e,t,n){if(1===n)return e>=128>>t&&e<<t<=2047;if(2===n)return e>=2048>>t&&e<<t<=55295||e>=57344>>t&&e<<t<=65535;if(3===n)return e>=65536>>t&&e<<t<=1114111;throw new Error}function n(e,t){if(6===e)return t>>6>15?3:t>31?2:1;if(12===e)return t>15?3:2;if(18===e)return 3;throw new Error}for(var a=65533,o="",s=this.bitsNeeded,l=this.codePoint,r=0;r<e.length;r+=1){var i=e[r];0!==s&&(i<128||i>191||!t(l<<6|63&i,s-6,n(s,l)))&&(s=0,l=a,o+=String.fromCharCode(l)),0===s?(i>=0&&i<=127?(s=0,l=i):i>=192&&i<=223?(s=6,l=31&i):i>=224&&i<=239?(s=12,l=15&i):i>=240&&i<=247?(s=18,l=7&i):(s=0,l=a),0===s||t(l,s,n(s,l))||(s=0,l=a)):(s-=6,l=l<<6|63&i),0===s&&(l<=65535?o+=String.fromCharCode(l):(o+=String.fromCharCode(55296+(l-65535-1>>10)),o+=String.fromCharCode(56320+(l-65535-1&1023))))}return this.bitsNeeded=s,this.codePoint=l,o},null!=d&&null!=h&&function(){try{return"test"===(new d).decode((new h).encode("test"),{stream:!0})}catch(e){}return!1}()||(d=f);var y=function(){};function v(e){this.withCredentials=!1,this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=y,this.onload=y,this.onerror=y,this.onreadystatechange=y,this._contentType="",this._xhr=e,this._sendTimeout=0,this._abort=y}function g(e){return e.replace(/[A-Z]/g,function(e){return String.fromCharCode(e.charCodeAt(0)+32)})}function w(e){for(var t=Object.create(null),n=e.split("\r\n"),a=0;a<n.length;a+=1){var o=n[a].split(": "),s=o.shift(),l=o.join(": ");t[g(s)]=l}this._map=t}function C(){}function b(e){this._headers=e}function k(){}function _(){this._listeners=Object.create(null)}function O(e){t(function(){throw e},0)}function S(e){this.type=e,this.target=void 0}function x(e,t){S.call(this,e),this.data=t.data,this.lastEventId=t.lastEventId}function E(e,t){S.call(this,e),this.status=t.status,this.statusText=t.statusText,this.headers=t.headers}function M(e,t){S.call(this,e),this.error=t.error}v.prototype.open=function(e,o){this._abort(!0);var s=this,l=this._xhr,r=1,i=0;this._abort=function(e){0!==s._sendTimeout&&(n(s._sendTimeout),s._sendTimeout=0),1!==r&&2!==r&&3!==r||(r=4,l.onload=y,l.onerror=y,l.onabort=y,l.onprogress=y,l.onreadystatechange=y,l.abort(),0!==i&&(n(i),i=0),e||(s.readyState=4,s.onabort(null),s.onreadystatechange())),r=0};var c=function(){if(1===r){var e=0,t="",n=void 0;if("contentType"in l)e=200,t="OK",n=l.contentType;else try{e=l.status,t=l.statusText,n=l.getResponseHeader("Content-Type")}catch(a){e=0,t="",n=void 0}0!==e&&(r=2,s.readyState=2,s.status=e,s.statusText=t,s._contentType=n,s.onreadystatechange())}},u=function(){if(c(),2===r||3===r){r=3;var e="";try{e=l.responseText}catch(t){}s.readyState=3,s.responseText=e,s.onprogress()}},d=function(e,t){if(null!=t&&null!=t.preventDefault||(t={preventDefault:y}),u(),1===r||2===r||3===r){if(r=4,0!==i&&(n(i),i=0),s.readyState=4,"load"===e)s.onload(t);else if("error"===e)s.onerror(t);else{if("abort"!==e)throw new TypeError;s.onabort(t)}s.onreadystatechange()}},h=function(){i=t(function(){h()},500),3===l.readyState&&u()};"onload"in l&&(l.onload=function(e){d("load",e)}),"onerror"in l&&(l.onerror=function(e){d("error",e)}),"onabort"in l&&(l.onabort=function(e){d("abort",e)}),"onprogress"in l&&(l.onprogress=u),"onreadystatechange"in l&&(l.onreadystatechange=function(e){!function(e){null!=l&&(4===l.readyState?"onload"in l&&"onerror"in l&&"onabort"in l||d(""===l.responseText?"error":"load",e):3===l.readyState?"onprogress"in l||u():2===l.readyState&&c())}(e)}),!("contentType"in l)&&"ontimeout"in a.prototype||(o+=(-1===o.indexOf("?")?"?":"&")+"padding=true"),l.open(e,o,!0),"readyState"in l&&(i=t(function(){h()},0))},v.prototype.abort=function(){this._abort(!1)},v.prototype.getResponseHeader=function(e){return this._contentType},v.prototype.setRequestHeader=function(e,t){var n=this._xhr;"setRequestHeader"in n&&n.setRequestHeader(e,t)},v.prototype.getAllResponseHeaders=function(){return null!=this._xhr.getAllResponseHeaders&&this._xhr.getAllResponseHeaders()||""},v.prototype.send=function(){if("ontimeout"in a.prototype&&("sendAsBinary"in a.prototype||"mozAnon"in a.prototype)||null==r||null==r.readyState||"complete"===r.readyState){var e=this._xhr;"withCredentials"in e&&(e.withCredentials=this.withCredentials);try{e.send(void 0)}catch(o){throw o}}else{var n=this;n._sendTimeout=t(function(){n._sendTimeout=0,n.send()},4)}},w.prototype.get=function(e){return this._map[g(e)]},null!=a&&null==a.HEADERS_RECEIVED&&(a.HEADERS_RECEIVED=2),C.prototype.open=function(e,t,n,o,s,l,r){e.open("GET",s);var i=0;for(var c in e.onprogress=function(){var t=e.responseText.slice(i);i+=t.length,n(t)},e.onerror=function(e){e.preventDefault(),o(new Error("NetworkError"))},e.onload=function(){o(null)},e.onabort=function(){o(null)},e.onreadystatechange=function(){if(e.readyState===a.HEADERS_RECEIVED){var n=e.status,o=e.statusText,s=e.getResponseHeader("Content-Type"),l=e.getAllResponseHeaders();t(n,o,s,new w(l))}},e.withCredentials=l,r)Object.prototype.hasOwnProperty.call(r,c)&&e.setRequestHeader(c,r[c]);return e.send(),e},b.prototype.get=function(e){return this._headers.get(e)},k.prototype.open=function(e,t,n,a,o,s,l){var r=null,u=new p,h=u.signal,m=new d;return c(o,{headers:l,credentials:s?"include":"same-origin",signal:h,cache:"no-store"}).then(function(e){return r=e.body.getReader(),t(e.status,e.statusText,e.headers.get("Content-Type"),new b(e.headers)),new i(function(e,t){var a=function(){r.read().then(function(t){if(t.done)e(void 0);else{var o=m.decode(t.value,{stream:!0});n(o),a()}}).catch(function(e){t(e)})};a()})}).catch(function(e){return"AbortError"===e.name?void 0:e}).then(function(e){a(e)}),{abort:function(){null!=r&&r.cancel(),u.abort()}}},_.prototype.dispatchEvent=function(e){e.target=this;var t=this._listeners[e.type];if(null!=t)for(var n=t.length,a=0;a<n;a+=1){var o=t[a];try{"function"==typeof o.handleEvent?o.handleEvent(e):o.call(this,e)}catch(s){O(s)}}},_.prototype.addEventListener=function(e,t){e=String(e);var n=this._listeners,a=n[e];null==a&&(a=[],n[e]=a);for(var o=!1,s=0;s<a.length;s+=1)a[s]===t&&(o=!0);o||a.push(t)},_.prototype.removeEventListener=function(e,t){e=String(e);var n=this._listeners,a=n[e];if(null!=a){for(var o=[],s=0;s<a.length;s+=1)a[s]!==t&&o.push(a[s]);0===o.length?delete n[e]:n[e]=o}},x.prototype=Object.create(S.prototype),E.prototype=Object.create(S.prototype),M.prototype=Object.create(S.prototype);var L=-1,T=-1,A=/^text\/event\-stream(;.*)?$/i,I=function(e,t){var n=null==e?t:parseInt(e,10);return n!=n&&(n=t),R(n)},R=function(e){return Math.min(Math.max(e,1e3),18e6)},N=function(e,t,n){try{"function"==typeof t&&t.call(e,n)}catch(a){O(a)}};function P(e,s){_.call(this),s=s||{},this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url=void 0,this.readyState=void 0,this.withCredentials=void 0,this.headers=void 0,this._close=void 0,function(e,s,l){s=String(s);var r=Boolean(l.withCredentials),i=l.lastEventIdQueryParameterName||"lastEventId",c=R(1e3),u=I(l.heartbeatTimeout,45e3),d="",h=c,p=!1,m=0,f=l.headers||{},y=l.Transport,g=K&&null==y?void 0:new v(null!=y?new y:null!=a&&"withCredentials"in a.prototype||null==o?new a:new o),w=null!=y&&"string"!=typeof y?new y:null==g?new k:new C,b=void 0,_=0,O=L,S="",P="",B="",D="",F=0,U=0,W=0,H=function(t,n,a,o){if(0===O)if(200===t&&null!=a&&A.test(a)){O=1,p=Date.now(),h=c,e.readyState=1;var s=new E("open",{status:t,statusText:n,headers:o});e.dispatchEvent(s),N(e,e.onopen,s)}else 200!==t?n&&(n=n.replace(/\s+/g," ")):null==a||a.replace(/\s+/g," "),q(),s=new E("error",{status:t,statusText:n,headers:o}),e.dispatchEvent(s),N(e,e.onerror,s)},j=function(a){if(1===O){for(var o=-1,s=0;s<a.length;s+=1)(i=a.charCodeAt(s))!=="\n".charCodeAt(0)&&i!=="\r".charCodeAt(0)||(o=s);var l=(-1!==o?D:"")+a.slice(0,o+1);D=(-1===o?D:"")+a.slice(o+1),""!==a&&(p=Date.now(),m+=a.length);for(var r=0;r<l.length;r+=1){var i=l.charCodeAt(r);if(F===T&&i==="\n".charCodeAt(0))F=0;else if(F===T&&(F=0),i==="\r".charCodeAt(0)||i==="\n".charCodeAt(0)){if(0!==F){1===F&&(W=r+1);var f=l.slice(U,W-1),y=l.slice(W+(W<r&&l.charCodeAt(W)===" ".charCodeAt(0)?1:0),r);"data"===f?(S+="\n",S+=y):"id"===f?P=y:"event"===f?B=y:"retry"===f?(c=I(y,c),h=c):"heartbeatTimeout"===f&&(u=I(y,u),0!==_&&(n(_),_=t(function(){$()},u)))}if(0===F){if(""!==S){d=P,""===B&&(B="message");var v=new x(B,{data:S.slice(1),lastEventId:P});if(e.dispatchEvent(v),"open"===B?N(e,e.onopen,v):"message"===B?N(e,e.onmessage,v):"error"===B&&N(e,e.onerror,v),2===O)return}S="",B=""}F=i==="\r".charCodeAt(0)?T:0}else 0===F&&(U=r,F=1),1===F?i===":".charCodeAt(0)&&(W=r+1,F=2):2===F&&(F=3)}}},Y=function(a){if(1===O||0===O){O=L,0!==_&&(n(_),_=0),_=t(function(){$()},h),h=R(Math.min(16*c,2*h)),e.readyState=0;var o=new M("error",{error:a});e.dispatchEvent(o),N(e,e.onerror,o)}},q=function(){O=2,null!=b&&(b.abort(),b=void 0),0!==_&&(n(_),_=0),e.readyState=2},$=function(){if(_=0,O===L){p=!1,m=0,_=t(function(){$()},u),O=0,S="",B="",P=d,D="",U=0,W=0,F=0;var n=s;if("data:"!==s.slice(0,5)&&"blob:"!==s.slice(0,5)&&""!==d){var a=s.indexOf("?");n=-1===a?s:s.slice(0,a+1)+s.slice(a+1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g,function(e,t){return t===i?"":e}),n+=(-1===s.indexOf("?")?"?":"&")+i+"="+encodeURIComponent(d)}var o=e.withCredentials,l={Accept:"text/event-stream"},r=e.headers;if(null!=r)for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(l[c]=r[c]);try{b=w.open(g,H,j,Y,n,o,l)}catch(f){throw q(),f}}else if(p||null==b){var h=Math.max((p||Date.now())+u-Date.now(),1);p=!1,_=t(function(){$()},h)}else Y(new Error("No activity within "+u+" milliseconds. "+(0===O?"No response received.":m+" chars received.")+" Reconnecting.")),null!=b&&(b.abort(),b=void 0)};e.url=s,e.readyState=0,e.withCredentials=r,e.headers=f,e._close=q,$()}(this,e,s)}var K=null!=c&&null!=u&&"body"in u.prototype;P.prototype=Object.create(_.prototype),P.prototype.CONNECTING=0,P.prototype.OPEN=1,P.prototype.CLOSED=2,P.prototype.close=function(){this._close()},P.CONNECTING=0,P.OPEN=1,P.CLOSED=2,P.prototype.withCredentials=void 0;var B,D,F=l;null==a||null!=l&&"withCredentials"in l.prototype||(F=P),(B=De).EventSourcePolyfill=P,B.NativeEventSource=l,void 0!==(D=void(B.EventSource=F))&&(Be.exports=D)}("undefined"==typeof globalThis?"undefined"!=typeof window?window:"undefined"!=typeof self?self:Fe.exports:globalThis));const Ge=Object.prototype.hasOwnProperty;class ze{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(e=>{let n=Xe(e);this._keys.push(n),this._keyMap[n.id]=n,t+=n.weight}),this._keys.forEach(e=>{e.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Xe(e){let t=null,n=null,a=null,o=1,s=null;if(We(e)||Ue(e))a=e,t=Je(e),n=Qe(e);else{if(!Ge.call(e,"name"))throw new Error((e=>`Missing ${e} property in key`)("name"));const l=e.name;if(a=l,Ge.call(e,"weight")&&(o=e.weight,o<=0))throw new Error((e=>`Property 'weight' in key '${e}' must be a positive integer`)(l));t=Je(l),n=Qe(l),s=e.getFn}return{path:t,id:n,weight:o,src:a,getFn:s}}function Je(e){return Ue(e)?e:e.split(".")}function Qe(e){return Ue(e)?e.join("."):e}var Ze={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...{useExtendedSearch:!1,getFn:function(e,t){let n=[],a=!1;const o=(e,t,s)=>{if(qe(e))if(t[s]){const l=e[t[s]];if(!qe(l))return;if(s===t.length-1&&(We(l)||He(l)||je(l)))n.push(function(e){return null==e?"":function(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}(l));else if(Ue(l)){a=!0;for(let e=0,n=l.length;e<n;e+=1)o(l[e],t,s+1)}else t.length&&o(l,t,s+1)}else n.push(e)};return o(e,We(t)?t.split("."):t,0),a?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1}};const et=/[^ ]+/g;class tt{constructor({getFn:e=Ze.getFn,fieldNormWeight:t=Ze.fieldNormWeight}={}){this.norm=function(e=1,t=3){const n=new Map,a=Math.pow(10,t);return{get(t){const o=t.match(et).length;if(n.has(o))return n.get(o);const s=1/Math.pow(o,.5*e),l=parseFloat(Math.round(s*a)/a);return n.set(o,l),l},clear(){n.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((e,t)=>{this._keysMap[e.id]=t})}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,We(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();We(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!qe(e)||$e(e))return;let n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}_addObject(e,t){let n={i:t,$:{}};this.keys.forEach((t,a)=>{let o=t.getFn?t.getFn(e):this.getFn(e,t.path);if(qe(o))if(Ue(o)){let e=[];const t=[{nestedArrIndex:-1,value:o}];for(;t.length;){const{nestedArrIndex:n,value:a}=t.pop();if(qe(a))if(We(a)&&!$e(a)){let t={v:a,i:n,n:this.norm.get(a)};e.push(t)}else Ue(a)&&a.forEach((e,n)=>{t.push({nestedArrIndex:n,value:e})})}n.$[a]=e}else if(We(o)&&!$e(o)){let e={v:o,n:this.norm.get(o)};n.$[a]=e}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function nt(e,t,{getFn:n=Ze.getFn,fieldNormWeight:a=Ze.fieldNormWeight}={}){const o=new tt({getFn:n,fieldNormWeight:a});return o.setKeys(e.map(Xe)),o.setSources(t),o.create(),o}function at(e,{errors:t=0,currentLocation:n=0,expectedLocation:a=0,distance:o=Ze.distance,ignoreLocation:s=Ze.ignoreLocation}={}){const l=t/e.length;if(s)return l;const r=Math.abs(a-n);return o?l+r/o:r?1:l}const ot=32;function st(e,t,n,{location:a=Ze.location,distance:o=Ze.distance,threshold:s=Ze.threshold,findAllMatches:l=Ze.findAllMatches,minMatchCharLength:r=Ze.minMatchCharLength,includeMatches:i=Ze.includeMatches,ignoreLocation:c=Ze.ignoreLocation}={}){if(t.length>ot)throw new Error(`Pattern length exceeds max of ${ot}.`);const u=t.length,d=e.length,h=Math.max(0,Math.min(a,d));let p=s,m=h;const f=r>1||i,y=f?Array(d):[];let v;for(;(v=e.indexOf(t,m))>-1;){let e=at(t,{currentLocation:v,expectedLocation:h,distance:o,ignoreLocation:c});if(p=Math.min(e,p),m=v+u,f){let e=0;for(;e<u;)y[v+e]=1,e+=1}}m=-1;let g=[],w=1,C=u+d;const b=1<<u-1;for(let _=0;_<u;_+=1){let a=0,s=C;for(;a<s;){at(t,{errors:_,currentLocation:h+s,expectedLocation:h,distance:o,ignoreLocation:c})<=p?a=s:C=s,s=Math.floor((C-a)/2+a)}C=s;let r=Math.max(1,h-s+1),i=l?d:Math.min(h+s,d)+u,v=Array(i+2);v[i+1]=(1<<_)-1;for(let l=i;l>=r;l-=1){let a=l-1,s=n[e.charAt(a)];if(f&&(y[a]=+!!s),v[l]=(v[l+1]<<1|1)&s,_&&(v[l]|=(g[l+1]|g[l])<<1|1|g[l+1]),v[l]&b&&(w=at(t,{errors:_,currentLocation:a,expectedLocation:h,distance:o,ignoreLocation:c}),w<=p)){if(p=w,m=a,m<=h)break;r=Math.max(1,2*h-m)}}if(at(t,{errors:_+1,currentLocation:h,expectedLocation:h,distance:o,ignoreLocation:c})>p)break;g=v}const k={isMatch:m>=0,score:Math.max(.001,w)};if(f){const e=function(e=[],t=Ze.minMatchCharLength){let n=[],a=-1,o=-1,s=0;for(let l=e.length;s<l;s+=1){let l=e[s];l&&-1===a?a=s:l||-1===a||(o=s-1,o-a+1>=t&&n.push([a,o]),a=-1)}return e[s-1]&&s-a>=t&&n.push([a,s-1]),n}(y,r);e.length?i&&(k.indices=e):k.isMatch=!1}return k}function lt(e){let t={};for(let n=0,a=e.length;n<a;n+=1){const o=e.charAt(n);t[o]=(t[o]||0)|1<<a-n-1}return t}class rt{constructor(e,{location:t=Ze.location,threshold:n=Ze.threshold,distance:a=Ze.distance,includeMatches:o=Ze.includeMatches,findAllMatches:s=Ze.findAllMatches,minMatchCharLength:l=Ze.minMatchCharLength,isCaseSensitive:r=Ze.isCaseSensitive,ignoreLocation:i=Ze.ignoreLocation}={}){if(this.options={location:t,threshold:n,distance:a,includeMatches:o,findAllMatches:s,minMatchCharLength:l,isCaseSensitive:r,ignoreLocation:i},this.pattern=r?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const c=(e,t)=>{this.chunks.push({pattern:e,alphabet:lt(e),startIndex:t})},u=this.pattern.length;if(u>ot){let e=0;const t=u%ot,n=u-t;for(;e<n;)c(this.pattern.substr(e,ot),e),e+=ot;if(t){const e=u-ot;c(this.pattern.substr(e),e)}}else c(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:n}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let t={isMatch:!0,score:0};return n&&(t.indices=[[0,e.length-1]]),t}const{location:a,distance:o,threshold:s,findAllMatches:l,minMatchCharLength:r,ignoreLocation:i}=this.options;let c=[],u=0,d=!1;this.chunks.forEach(({pattern:t,alphabet:h,startIndex:p})=>{const{isMatch:m,score:f,indices:y}=st(e,t,h,{location:a+p,distance:o,threshold:s,findAllMatches:l,minMatchCharLength:r,includeMatches:n,ignoreLocation:i});m&&(d=!0),u+=f,m&&y&&(c=[...c,...y])});let h={isMatch:d,score:d?u/this.chunks.length:1};return d&&n&&(h.indices=c),h}}class it{constructor(e){this.pattern=e}static isMultiMatch(e){return ct(e,this.multiRegex)}static isSingleMatch(e){return ct(e,this.singleRegex)}search(){}}function ct(e,t){const n=e.match(t);return n?n[1]:null}class ut extends it{constructor(e,{location:t=Ze.location,threshold:n=Ze.threshold,distance:a=Ze.distance,includeMatches:o=Ze.includeMatches,findAllMatches:s=Ze.findAllMatches,minMatchCharLength:l=Ze.minMatchCharLength,isCaseSensitive:r=Ze.isCaseSensitive,ignoreLocation:i=Ze.ignoreLocation}={}){super(e),this._bitapSearch=new rt(e,{location:t,threshold:n,distance:a,includeMatches:o,findAllMatches:s,minMatchCharLength:l,isCaseSensitive:r,ignoreLocation:i})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class dt extends it{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,n=0;const a=[],o=this.pattern.length;for(;(t=e.indexOf(this.pattern,n))>-1;)n=t+o,a.push([t,n-1]);const s=!!a.length;return{isMatch:s,score:s?0:1,indices:a}}}const ht=[class extends it{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},dt,class extends it{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class extends it{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends it{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends it{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class extends it{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},ut],pt=ht.length,mt=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/;const ft=new Set([ut.type,dt.type]);class yt{constructor(e,{isCaseSensitive:t=Ze.isCaseSensitive,includeMatches:n=Ze.includeMatches,minMatchCharLength:a=Ze.minMatchCharLength,ignoreLocation:o=Ze.ignoreLocation,findAllMatches:s=Ze.findAllMatches,location:l=Ze.location,threshold:r=Ze.threshold,distance:i=Ze.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:n,minMatchCharLength:a,findAllMatches:s,ignoreLocation:o,location:l,threshold:r,distance:i},this.pattern=t?e:e.toLowerCase(),this.query=function(e,t={}){return e.split("|").map(e=>{let n=e.trim().split(mt).filter(e=>e&&!!e.trim()),a=[];for(let o=0,s=n.length;o<s;o+=1){const e=n[o];let s=!1,l=-1;for(;!s&&++l<pt;){const n=ht[l];let o=n.isMultiMatch(e);o&&(a.push(new n(o,t)),s=!0)}if(!s)for(l=-1;++l<pt;){const n=ht[l];let o=n.isSingleMatch(e);if(o){a.push(new n(o,t));break}}}return a})}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:a}=this.options;e=a?e:e.toLowerCase();let o=0,s=[],l=0;for(let r=0,i=t.length;r<i;r+=1){const a=t[r];s.length=0,o=0;for(let t=0,r=a.length;t<r;t+=1){const r=a[t],{isMatch:i,indices:c,score:u}=r.search(e);if(!i){l=0,o=0,s.length=0;break}if(o+=1,l+=u,n){const e=r.constructor.type;ft.has(e)?s=[...s,...c]:s.push(c)}}if(o){let e={isMatch:!0,score:l/o};return n&&(e.indices=s),e}}return{isMatch:!1,score:1}}}const vt=[];function gt(e,t){for(let n=0,a=vt.length;n<a;n+=1){let a=vt[n];if(a.condition(e,t))return new a(e,t)}return new rt(e,t)}const wt="$and",Ct="$or",bt="$path",kt="$val",_t=e=>!(!e[wt]&&!e[Ct]),Ot=e=>({[wt]:Object.keys(e).map(t=>({[t]:e[t]}))});function St(e,t,{auto:n=!0}={}){const a=e=>{let o=Object.keys(e);const s=(e=>!!e[bt])(e);if(!s&&o.length>1&&!_t(e))return a(Ot(e));if((e=>!Ue(e)&&Ye(e)&&!_t(e))(e)){const a=s?e[bt]:o[0],l=s?e[kt]:e[a];if(!We(l))throw new Error((e=>`Invalid value for key ${e}`)(a));const r={keyId:Qe(a),pattern:l};return n&&(r.searcher=gt(l,t)),r}let l={children:[],operator:o[0]};return o.forEach(t=>{const n=e[t];Ue(n)&&n.forEach(e=>{l.children.push(a(e))})}),l};return _t(e)||(e=Ot(e)),a(e)}function xt(e,t){const n=e.matches;t.matches=[],qe(n)&&n.forEach(e=>{if(!qe(e.indices)||!e.indices.length)return;const{indices:n,value:a}=e;let o={indices:n,value:a};e.key&&(o.key=e.key.src),e.idx>-1&&(o.refIndex=e.idx),t.matches.push(o)})}function Et(e,t){t.score=e.score}class Mt{constructor(e,t={},n){this.options={...Ze,...t},this.options.useExtendedSearch,this._keyStore=new ze(this.options.keys),this.setCollection(e,n)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof tt))throw new Error("Incorrect 'index' type");this._myIndex=t||nt(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){qe(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const t=[];for(let n=0,a=this._docs.length;n<a;n+=1){const o=this._docs[n];e(o,n)&&(this.removeAt(n),n-=1,a-=1,t.push(o))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:n,includeScore:a,shouldSort:o,sortFn:s,ignoreFieldNorm:l}=this.options;let r=We(e)?We(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(e,{ignoreFieldNorm:t=Ze.ignoreFieldNorm}){e.forEach(e=>{let n=1;e.matches.forEach(({key:e,norm:a,score:o})=>{const s=e?e.weight:null;n*=Math.pow(0===o&&s?Number.EPSILON:o,(s||1)*(t?1:a))}),e.score=n})}(r,{ignoreFieldNorm:l}),o&&r.sort(s),He(t)&&t>-1&&(r=r.slice(0,t)),function(e,t,{includeMatches:n=Ze.includeMatches,includeScore:a=Ze.includeScore}={}){const o=[];return n&&o.push(xt),a&&o.push(Et),e.map(e=>{const{idx:n}=e,a={item:t[n],refIndex:n};return o.length&&o.forEach(t=>{t(e,a)}),a})}(r,this._docs,{includeMatches:n,includeScore:a})}_searchStringList(e){const t=gt(e,this.options),{records:n}=this._myIndex,a=[];return n.forEach(({v:e,i:n,n:o})=>{if(!qe(e))return;const{isMatch:s,score:l,indices:r}=t.searchIn(e);s&&a.push({item:e,idx:n,matches:[{score:l,value:e,norm:o,indices:r}]})}),a}_searchLogical(e){const t=St(e,this.options),n=(e,t,a)=>{if(!e.children){const{keyId:n,searcher:o}=e,s=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(t,n),searcher:o});return s&&s.length?[{idx:a,item:t,matches:s}]:[]}const o=[];for(let s=0,l=e.children.length;s<l;s+=1){const l=e.children[s],r=n(l,t,a);if(r.length)o.push(...r);else if(e.operator===wt)return[]}return o},a=this._myIndex.records,o={},s=[];return a.forEach(({$:e,i:a})=>{if(qe(e)){let l=n(t,e,a);l.length&&(o[a]||(o[a]={idx:a,item:e,matches:[]},s.push(o[a])),l.forEach(({matches:e})=>{o[a].matches.push(...e)}))}}),s}_searchObjectList(e){const t=gt(e,this.options),{keys:n,records:a}=this._myIndex,o=[];return a.forEach(({$:e,i:a})=>{if(!qe(e))return;let s=[];n.forEach((n,a)=>{s.push(...this._findMatches({key:n,value:e[a],searcher:t}))}),s.length&&o.push({idx:a,item:e,matches:s})}),o}_findMatches({key:e,value:t,searcher:n}){if(!qe(t))return[];let a=[];if(Ue(t))t.forEach(({v:t,i:o,n:s})=>{if(!qe(t))return;const{isMatch:l,score:r,indices:i}=n.searchIn(t);l&&a.push({score:r,key:e,value:t,idx:o,norm:s,indices:i})});else{const{v:o,n:s}=t,{isMatch:l,score:r,indices:i}=n.searchIn(o);l&&a.push({score:r,key:e,value:o,norm:s,indices:i})}return a}}Mt.version="7.0.0",Mt.createIndex=nt,Mt.parseIndex=function(e,{getFn:t=Ze.getFn,fieldNormWeight:n=Ze.fieldNormWeight}={}){const{keys:a,records:o}=e,s=new tt({getFn:t,fieldNormWeight:n});return s.setKeys(a),s.setIndexRecords(o),s},Mt.config=Ze,Mt.parseQuery=St,function(...e){vt.push(...e)}(yt);const Lt="undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>0;function Tt(e,t,n,a){e.addEventListener?e.addEventListener(t,n,a):e.attachEvent&&e.attachEvent("on".concat(t),n)}function At(e,t,n,a){e.removeEventListener?e.removeEventListener(t,n,a):e.detachEvent&&e.detachEvent("on".concat(t),n)}function It(e,t){const n=t.slice(0,t.length-1);for(let a=0;a<n.length;a++)n[a]=e[n[a].toLowerCase()];return n}function Rt(e){"string"!=typeof e&&(e="");const t=(e=e.replace(/\s/g,"")).split(",");let n=t.lastIndexOf("");for(;n>=0;)t[n-1]+=",",t.splice(n,1),n=t.lastIndexOf("");return t}const Nt={backspace:8,"⌫":8,tab:9,clear:12,enter:13,"↩":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":Lt?173:189,"=":Lt?61:187,";":Lt?59:186,"'":222,"[":219,"]":221,"\\":220},Pt={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},Kt={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},Bt={16:!1,18:!1,17:!1,91:!1},Dt={};for(let xa=1;xa<20;xa++)Nt["f".concat(xa)]=111+xa;let Ft=[],Ut=null,Wt="all";const Ht=new Map,jt=e=>Nt[e.toLowerCase()]||Pt[e.toLowerCase()]||e.toUpperCase().charCodeAt(0);function Yt(e){Wt=e||"all"}function qt(){return Wt||"all"}function $t(e){if(void 0===e)Object.keys(Dt).forEach(e=>{Array.isArray(Dt[e])&&Dt[e].forEach(e=>Vt(e)),delete Dt[e]}),Jt(null);else if(Array.isArray(e))e.forEach(e=>{e.key&&Vt(e)});else if("object"==typeof e)e.key&&Vt(e);else if("string"==typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];let[o,s]=n;"function"==typeof o&&(s=o,o=""),Vt({key:e,scope:o,method:s,splitKey:"+"})}}const Vt=e=>{let{key:t,scope:n,method:a,splitKey:o="+"}=e;Rt(t).forEach(e=>{const t=e.split(o),s=t.length,l=t[s-1],r="*"===l?"*":jt(l);if(!Dt[r])return;n||(n=qt());const i=s>1?It(Pt,t):[],c=[];Dt[r]=Dt[r].filter(e=>{const t=(!a||e.method===a)&&e.scope===n&&function(e,t){const n=e.length>=t.length?e:t,a=e.length>=t.length?t:e;let o=!0;for(let s=0;s<n.length;s++)-1===a.indexOf(n[s])&&(o=!1);return o}(e.mods,i);return t&&c.push(e.element),!t}),c.forEach(e=>Jt(e))})};function Gt(e,t,n,a){if(t.element!==a)return;let o;if(t.scope===n||"all"===t.scope){o=t.mods.length>0;for(const e in Bt)Object.prototype.hasOwnProperty.call(Bt,e)&&(!Bt[e]&&t.mods.indexOf(+e)>-1||Bt[e]&&-1===t.mods.indexOf(+e))&&(o=!1);(0!==t.mods.length||Bt[16]||Bt[18]||Bt[17]||Bt[91])&&!o&&"*"!==t.shortcut||(t.keys=[],t.keys=t.keys.concat(Ft),!1===t.method(e,t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0)))}}function zt(e,t){const n=Dt["*"];let a=e.keyCode||e.which||e.charCode;if(!Xt.filter.call(this,e))return;if(93!==a&&224!==a||(a=91),-1===Ft.indexOf(a)&&229!==a&&Ft.push(a),["ctrlKey","altKey","shiftKey","metaKey"].forEach(t=>{const n=Kt[t];e[t]&&-1===Ft.indexOf(n)?Ft.push(n):!e[t]&&Ft.indexOf(n)>-1?Ft.splice(Ft.indexOf(n),1):"metaKey"===t&&e[t]&&3===Ft.length&&(e.ctrlKey||e.shiftKey||e.altKey||(Ft=Ft.slice(Ft.indexOf(n))))}),a in Bt){Bt[a]=!0;for(const e in Pt)Pt[e]===a&&(Xt[e]=!0);if(!n)return}for(const r in Bt)Object.prototype.hasOwnProperty.call(Bt,r)&&(Bt[r]=e[Kt[r]]);e.getModifierState&&(!e.altKey||e.ctrlKey)&&e.getModifierState("AltGraph")&&(-1===Ft.indexOf(17)&&Ft.push(17),-1===Ft.indexOf(18)&&Ft.push(18),Bt[17]=!0,Bt[18]=!0);const o=qt();if(n)for(let r=0;r<n.length;r++)n[r].scope===o&&("keydown"===e.type&&n[r].keydown||"keyup"===e.type&&n[r].keyup)&&Gt(e,n[r],o,t);if(!(a in Dt))return;const s=Dt[a],l=s.length;for(let r=0;r<l;r++)if(("keydown"===e.type&&s[r].keydown||"keyup"===e.type&&s[r].keyup)&&s[r].key){const n=s[r],{splitKey:a}=n,l=n.key.split(a),i=[];for(let e=0;e<l.length;e++)i.push(jt(l[e]));i.sort().join("")===Ft.sort().join("")&&Gt(e,n,o,t)}}function Xt(e,t,n){Ft=[];const a=Rt(e);let o=[],s="all",l=document,r=0,i=!1,c=!0,u="+",d=!1,h=!1;for(void 0===n&&"function"==typeof t&&(n=t),"[object Object]"===Object.prototype.toString.call(t)&&(t.scope&&(s=t.scope),t.element&&(l=t.element),t.keyup&&(i=t.keyup),void 0!==t.keydown&&(c=t.keydown),void 0!==t.capture&&(d=t.capture),"string"==typeof t.splitKey&&(u=t.splitKey),!0===t.single&&(h=!0)),"string"==typeof t&&(s=t),h&&$t(e,s);r<a.length;r++)o=[],(e=a[r].split(u)).length>1&&(o=It(Pt,e)),(e="*"===(e=e[e.length-1])?"*":jt(e))in Dt||(Dt[e]=[]),Dt[e].push({keyup:i,keydown:c,scope:s,mods:o,shortcut:a[r],method:n,key:a[r],splitKey:u,element:l});if(void 0!==l&&window){if(!Ht.has(l)){const e=function(){return zt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.event,l)},t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.event;zt(e,l),function(e){let t=e.keyCode||e.which||e.charCode;const n=Ft.indexOf(t);if(n>=0&&Ft.splice(n,1),e.key&&"meta"===e.key.toLowerCase()&&Ft.splice(0,Ft.length),93!==t&&224!==t||(t=91),t in Bt){Bt[t]=!1;for(const e in Pt)Pt[e]===t&&(Xt[e]=!1)}}(e)};Ht.set(l,{keydownListener:e,keyupListenr:t,capture:d}),Tt(l,"keydown",e,d),Tt(l,"keyup",t,d)}if(!Ut){const e=()=>{Ft=[]};Ut={listener:e,capture:d},Tt(window,"focus",e,d)}}}function Jt(e){const t=Object.values(Dt).flat();if(t.findIndex(t=>{let{element:n}=t;return n===e})<0){const{keydownListener:t,keyupListenr:n,capture:a}=Ht.get(e)||{};t&&n&&(At(e,"keyup",n,a),At(e,"keydown",t,a),Ht.delete(e))}if(t.length<=0||Ht.size<=0){if(Object.keys(Ht).forEach(e=>{const{keydownListener:t,keyupListenr:n,capture:a}=Ht.get(e)||{};t&&n&&(At(e,"keyup",n,a),At(e,"keydown",t,a),Ht.delete(e))}),Ht.clear(),Object.keys(Dt).forEach(e=>delete Dt[e]),Ut){const{listener:e,capture:t}=Ut;At(window,"focus",e,t),Ut=null}}}const Qt={getPressedKeyString:function(){return Ft.map(e=>{return t=e,Object.keys(Nt).find(e=>Nt[e]===t)||(e=>Object.keys(Pt).find(t=>Pt[t]===e))(e)||String.fromCharCode(e);var t})},setScope:Yt,getScope:qt,deleteScope:function(e,t){let n,a;e||(e=qt());for(const o in Dt)if(Object.prototype.hasOwnProperty.call(Dt,o))for(n=Dt[o],a=0;a<n.length;)if(n[a].scope===e){n.splice(a,1).forEach(e=>{let{element:t}=e;return Jt(t)})}else a++;qt()===e&&Yt(t||"all")},getPressedKeyCodes:function(){return Ft.slice(0)},getAllKeyCodes:function(){const e=[];return Object.keys(Dt).forEach(t=>{Dt[t].forEach(t=>{let{key:n,scope:a,mods:o,shortcut:s}=t;e.push({scope:a,shortcut:s,mods:o,keys:n.split("+").map(e=>jt(e))})})}),e},isPressed:function(e){return"string"==typeof e&&(e=jt(e)),-1!==Ft.indexOf(e)},filter:function(e){const t=e.target||e.srcElement,{tagName:n}=t;let a=!0;const o="INPUT"===n&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(t.type);return(t.isContentEditable||(o||"TEXTAREA"===n||"SELECT"===n)&&!t.readOnly)&&(a=!1),a},trigger:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";Object.keys(Dt).forEach(n=>{Dt[n].filter(n=>n.scope===t&&n.shortcut===e).forEach(e=>{e&&e.method&&e.method()})})},unbind:$t,keyMap:Nt,modifier:Pt,modifierMap:Kt};for(const xa in Qt)Object.prototype.hasOwnProperty.call(Qt,xa)&&(Xt[xa]=Qt[xa]);if("undefined"!=typeof window){const e=window.hotkeys;Xt.noConflict=t=>(t&&window.hotkeys===Xt&&(window.hotkeys=e),Xt),window.hotkeys=Xt}const Zt={class:"search-tips"},en={class:"key"},tn={class:"key"},nn={class:"key"},an=e({__name:"index",setup(e){const t=A(),n=I(),a=f(""),s=f(0),l=f([]),r=o(),i=f(),c=f(),u=r.setActive;r.toggleActive;const d=y(()=>r.pool),h=y(()=>r.active),p=y(()=>r.hotkey);y(()=>r.mixinSearch);const m=y(()=>0===l.value.length||""===a.value?d.value:l.value),_=y(()=>new Mt(d.value,{shouldSort:!0,threshold:.6,location:0,distance:100,minMatchCharLength:1,keys:["name","namePinyin","namePinyinFirst"]})),S=e=>{let t=e.target.value||"";const n=t&&_.value.search(t).map(e=>e.item);a.value=t,l.value=n},B=()=>{let e=s.value;m.value[e]&&j(m.value[e].fullPath)},D=()=>{U(!0)},F=()=>{U(!1)},U=e=>{let t=m.value.length-1,n=s.value;e?n>0?n--:n=t:n<t?n++:n=0,s.value=n,c.value.getElementsByClassName("ant-list-item")[n]?c.value.scrollTop=c.value.getElementsByClassName("ant-list-item")[n].offsetTop:c.value.scrollTop=0},W=()=>{i.value.activated=!1,i.value.blur()},H=()=>{s.value=-1},j=e=>{e!==t.path?(n.push({path:e}),$()):$()},Y=e=>{"INPUT"!==e.target.tagName&&$()},q=()=>{h.value||(u(!0),setTimeout(()=>{i.value&&i.value.focus()},300))},$=()=>{if(!h.value)return!1;u(!1),l.value=[],i.value.activated&&(i.value.activated=!1)};return v(()=>{Xt(p.value.open,e=>{e.preventDefault(),q()}),Xt(p.value.close,e=>{e.preventDefault(),$()})}),Xt.unbind(p.value.open),Xt.unbind(p.value.close),(e,t)=>{const n=g("a-input"),o=g("a-avatar"),l=g("a-list-item-meta"),r=g("a-list-item"),u=g("a-list"),d=g("a-card"),p=ee;return C(),w(O,null,[b("div",{class:"search panel-item",onClick:q},[k(L(te))]),k(p,{title:"搜索",visible:L(h),closable:!1,footer:null,width:600,destroyOnClose:"",dialogClass:"searchModal",bodyStyle:{overflow:"auto",padding:"14px"},onClose:$},{default:E(()=>[b("div",{onKeyup:[N(D,["up"]),N(F,["down"]),N(B,["enter"])],onClick:R(Y,["self"])},[k(n,{ref_key:"inputRef",ref:i,modelValue:L(a),"onUpdate:modelValue":t[0]||(t[0]=e=>P(a)?a.value=e:null),class:"search-box xn-wd",allowClear:"",placeholder:"搜索页面（支持拼音检索）",onChange:S},{prefix:E(()=>[k(L(te))]),_:1},8,["modelValue"]),k(d,{"body-style":{padding:"0 0"},hoverable:"",onMouseenter:W,onMouseleave:H,onKeypress:[N(D,["up"]),N(F,["down"])],class:"xn-mn10p0"},{default:E(()=>[b("div",{ref_key:"cardListRef",ref:c,class:"search-card beauty-scroll"},[k(u,{size:"small","data-source":L(m)},{renderItem:E(({item:e,index:t})=>[k(r,{onClick:t=>j(e.fullPath),onMouseover:e=>(e=>{s.value=e})(t),class:M([{active:t===L(s)},"xn-pr10"])},{actions:E(()=>[b("a",null,[k(L(ne))])]),default:E(()=>[k(l,{description:e.fullName},{title:E(()=>[b("a",null,T(e.name),1)]),avatar:E(()=>[k(o,{style:{color:"var(--text-color)","background-color":"transparent"},type:e.icon},{icon:E(()=>[(C(),x(K(e.icon)))]),_:2},1032,["type"])]),_:2},1032,["description"])]),_:2},1032,["onClick","onMouseover","class"])]),_:1},8,["data-source"])],512)]),_:1}),b("div",Zt,[t[1]||(t[1]=b("span",{class:"key"},"S",-1)),t[2]||(t[2]=b("span",{class:"tips"},"打开搜索面板",-1)),b("span",en,[k(L(ae))]),b("span",tn,[k(L(oe))]),t[3]||(t[3]=b("span",{class:"tips"},"选择",-1)),b("span",nn,[k(L(ne))]),t[4]||(t[4]=b("span",{class:"tips"},"确认",-1)),t[5]||(t[5]=b("span",{class:"key left"},"Esc",-1)),t[6]||(t[6]=b("span",{class:"tips"},"关闭",-1))])],32)]),_:1},8,["visible"])],64)}}},[["__scopeId","data-v-97c69016"]]),on={class:"user-bar"},sn={class:"user-avatar"},ln=B({name:"layoutUserBar"}),rn=e(Object.assign(ln,{setup(e){var a;const{locale:o}=D();f(new Array(n.data.get("APP_LANG")||s.LANG));const i=f(!1),c=f("false"),u=t(),d=y(()=>u.isMobile),h=y(()=>u.userInfo),p=f((null==(a=h.value)?void 0:a.userName)||""),m=e=>{"uc"===e&&l.push({path:"/usercenter"}),"clearCache"===e&&se.confirm({title:"提示",content:"确认清理所有缓存？",icon:k(re),maskClosable:!1,okText:"确定",cancelText:"取消",onOk(){le.loading("正在清理中...",1),n.data.clear(),setTimeout(()=>{l.replace({path:"/login"}),location.reload()},100)},onCancel(){}}),"outLogin"===e&&se.confirm({title:"提示",content:"确认退出当前用户？",icon:k(re),maskClosable:!1,onOk(){const e={token:n.data.get("TOKEN")};le.loading("退出中...",1),r.logout(e).then(()=>{n.data.remove("TOKEN"),n.data.remove("USER_INFO"),n.data.remove("MENU"),n.data.remove("PERMISSIONS"),l.replace({path:"/login"}),F(()=>{u.userInfo=void 0})}).catch(()=>{n.data.clear(),l.replace({path:"/login"}),location.reload()})},onCancel(){}})},v=()=>{i.value=!0},S=()=>{const e=document.documentElement;_e.isEnabled&&_e.toggle(e)};return(e,t)=>{const n=g("fullscreen-outlined"),a=g("a-avatar"),o=g("UserOutlined"),s=g("a-menu-item"),l=g("loading3-quarters-outlined"),r=g("a-menu-divider"),u=g("export-outlined"),f=g("a-menu"),y=g("a-dropdown"),M=g("layout-outlined"),A=g("a-drawer");return C(),w(O,null,[b("div",on,[L(d)?_("",!0):(C(),x(an,{key:0})),L(d)?_("",!0):(C(),w("div",{key:1,class:"screen panel-item hidden-sm-and-down",onClick:S},[k(n)])),k(y,{class:"user panel-item"},{overlay:E(()=>[k(f,null,{default:E(()=>[k(s,{key:"uc",onClick:t[0]||(t[0]=e=>m("uc"))},{default:E(()=>[k(o,{class:"xn-mr8"}),t[4]||(t[4]=b("span",null,"个人中心",-1))]),_:1}),k(s,{key:"clearCache",onClick:t[1]||(t[1]=e=>m("clearCache"))},{default:E(()=>[k(l,{class:"xn-mr8"}),t[5]||(t[5]=b("span",null,"清理缓存",-1))]),_:1}),k(r),k(s,{key:"outLogin",onClick:t[2]||(t[2]=e=>m("outLogin"))},{default:E(()=>[k(u,{class:"xn-mr8"}),t[6]||(t[6]=b("span",null,"退出登录",-1))]),_:1})]),_:1})]),default:E(()=>[b("div",sn,[k(a,{src:L(h)?L(h).avatar:void 0},null,8,["src"]),b("label",null,T(L(p)),1)])]),_:1}),"true"===L(c)?(C(),w("div",{key:2,class:"setting panel-item",onClick:v},[k(M)])):_("",!0)]),k(A,{open:L(i),"onUpdate:open":t[3]||(t[3]=e=>P(i)?i.value=e:null),closable:!1,width:"300"},{default:E(()=>[k(Pe)]),_:1},8,["open"])],64)}}}),[["__scopeId","data-v-3376a530"]]),cn={__name:"index",props:{target:null,show:Boolean},emits:["update:show","get-context-menu"],setup(e,{emit:t}){const n=e,a=f(null),o=f(null),s=f({}),l=f(!1),r=t;U(()=>n.show,e=>{e?c():u()}),U(()=>n.target,e=>{i()});const i=e=>{F(()=>{n.target&&!l.value&&(n.target.addEventListener("contextmenu",h),l.value=!0)})},c=()=>{document.addEventListener("mousedown",d),document.addEventListener("mousewheel",d)},u=()=>{document.removeEventListener("mousedown",d),document.removeEventListener("mousewheel",d)},d=()=>{r("update:show",!1)},h=e=>{a.value=e.clientX,o.value=e.clientY,p(),r("update:show",!0),r("get-context-menu",e),e.preventDefault()},p=()=>{s.value={left:a.value+"px",top:o.value+"px",display:"block"}};return(t,n)=>W((C(),w("div",{style:Y(L(s)),onMousedown:n[0]||(n[0]=R(()=>{},["stop"])),onContextmenu:n[1]||(n[1]=R(()=>{},["prevent"]))},[j(t.$slots,"default")],36)),[[H,e.show]])}},un={class:"snowy-tags"},dn={__name:"tags",setup(e){const n=A(),a=I(),o=t(),s=p(),l=m(),r=i(),d=f(),h=f(20),_=f(null),L=f(!1),R=f(0);c();const N=y(()=>r.viewTags),P=y(()=>o.layoutTagsOpen),K=y(()=>o.roundedCornerStyleOpen),B=y(()=>N.value);U(n,e=>{D(e)}),U(P,()=>{}),v(()=>{const e=document.querySelector(".ant-tabs-nav-list");e&&(_.value=e)});const D=e=>{const t=N.value.find(t=>t.path===e.path);if(d.value=t?t.fullPath:e.fullPath,e.name&&!e.meta.fullpage&&(r.pushViewTags(e),s.pushKeepLive(e.name)),B.value.length-1>h.value){const e=B.value[1];r.removeViewTags(e)}},W=(e,t)=>{for(const n of e){if(t(n))return n;if(n.children){const e=W(n.children,t);if(e)return e}}return null},H=()=>B.value[R.value],j=(e,t=!0)=>{if(r.removeViewTags(e),l.removeIframeList(e),s.removeKeepLive(e.name),t&&e.path===n.path){const e=B.value.slice(-1)[0];e?a.push(e):a.push("/")}},Y=()=>{L.value=!1;const e=H();n.fullPath!==e.fullPath&&a.push({path:e.fullPath,query:e.query}),l.refreshIframe(e),setTimeout(()=>{s.removeKeepLive(e.name),s.setRouteShow(!1),F(()=>{s.pushKeepLive(e.name),s.setRouteShow(!0)})},0)},q=()=>{L.value=!1;const e=H();e.meta.affix||j(e)},$=()=>{L.value=!1;const e=H();n.fullPath!==e.fullPath&&a.push({path:e.fullPath,query:e.query});[...B.value].forEach(t=>{if(t.meta&&t.meta.affix||e.fullPath===t.fullPath)return!0;j(t,!1)})},V=()=>{L.value=!1;const e=H();n.fullPath!==e.fullPath&&a.push({path:e.fullPath,query:e.query}),document.getElementById("app").classList.add("main-maximize")},G=()=>{L.value=!1;const e=H(),t=e.path||"/";e.meta.affix||j(e),window.open(t)},z=e=>{e.preventDefault();let t=e.target;for(;!t.classList.contains("ant-tabs-tab");){if(t.classList.contains("ant-tabs"))return void(R.value=0);t=t.parentNode}const n=document.querySelectorAll(".ant-tabs-nav-list .ant-tabs-tab");R.value=Array.from(n).findIndex(e=>e===t)},X=a.getMenu(),J=u.getIndexMenu(X).path,Q=W(X,e=>e.path===J);Q&&(Q.fullPath=Q.path,D(Q),D(n));const Z=(e,t)=>{if("remove"===t){const t=B.value.find(t=>t.fullPath===e);j(t)}},ee=e=>{a.push(e)},te=e=>{2===e.which&&(z(e),q())},ne=()=>document.querySelector(".ant-tabs-nav-wrap"),ae=()=>{const e=ne();if(e){const t=new WheelEvent("wheel",{deltaX:0,deltaY:-100});e.dispatchEvent(t)}},oe=()=>{const e=ne();if(e){const t=new WheelEvent("wheel",{deltaX:0,deltaY:100});e.dispatchEvent(t)}};return(e,t)=>{const n=g("reload-outlined"),a=g("close-outlined"),o=g("expand-outlined"),s=g("select-outlined"),l=g("left-outlined"),r=g("right-outlined"),i=g("a-tab-pane"),c=g("a-tabs");return C(),w("div",un,[k(cn,{class:"right-menu",target:_.value,show:L.value,"onUpdate:show":t[0]||(t[0]=e=>L.value=e),onGetContextMenu:z},{default:E(()=>[b("div",{class:"right-menu-item",onClick:Y},[k(n,{class:"snowy-header-tags-right"}),t[2]||(t[2]=b("div",{class:"pl-3 snowy-header-tags-right-font"},"刷新",-1))]),b("div",{class:"right-menu-item",onClick:q},[k(a,{class:"snowy-header-tags-right"}),t[3]||(t[3]=b("div",{class:"pl-3 snowy-header-tags-right-font"},"关闭",-1))]),b("div",{class:"right-menu-item",onClick:$},[k(a,{class:"snowy-header-tags-right"}),t[4]||(t[4]=b("div",{class:"pl-3 snowy-header-tags-right-font"},"关闭其他",-1))]),b("div",{class:"right-menu-item",onClick:V},[k(o,{class:"snowy-header-tags-right"}),t[5]||(t[5]=b("div",{class:"pl-3 snowy-header-tags-right-font"},"最大化",-1))]),b("div",{class:"right-menu-item",onClick:G},[k(s,{class:"snowy-header-tags-right"}),t[6]||(t[6]=b("div",{class:"pl-3 snowy-header-tags-right-font"},"新窗口",-1))])]),_:1},8,["target","show"]),k(c,{activeKey:d.value,"onUpdate:activeKey":t[1]||(t[1]=e=>d.value=e),type:"editable-card",class:M([{"snowy-radius":K.value},"snowy-admin-tabs"]),animated:!K.value,"hide-add":"",ref:"tabs",onEdit:Z,onTabClick:ee,onMouseup:te},{leftExtra:E(()=>[b("div",{class:"snowy-admin-tabs-arrow",onClick:ae},[k(l)])]),rightExtra:E(()=>[b("div",{class:"snowy-admin-tabs-arrow",onClick:oe},[k(r)])]),default:E(()=>[(C(!0),w(O,null,S(B.value,e=>(C(),x(i,{key:e.fullPath,closable:!e.meta.affix},{tab:E(()=>[(C(),w("span",{key:e.meta.key},T(e.meta.title),1))]),_:2},1032,["closable"]))),128))]),_:1},8,["activeKey","class","animated"])])}}},hn={key:0,class:"xn-pd20"},pn=["href"],mn={key:1},fn={__name:"NavMenu",props:{navMenus:{type:Array,default:()=>[]}},setup(e){t();const n=e=>!0===e.meta.hidden;return(t,a)=>{const o=g("a-alert"),s=g("a-menu-item"),l=g("NavMenu",!0),r=g("a-sub-menu");return C(),w(O,null,[e.navMenus.length<=0?(C(),w("div",hn,[k(o,{message:"无任何菜单",type:"info",closable:!1})])):_("",!0),(C(!0),w(O,null,S(e.navMenus,e=>{return C(),w(O,{key:e},[(t=e,t.children&&!t.children.every(e=>e.meta.hidden)||n(e)?n(e)?_("",!0):(C(),x(r,{key:e.path},q({title:E(()=>[$(T(e.meta.title),1)]),default:E(()=>[k(l,{"nav-menus":e.children},null,8,["nav-menus"])]),_:2},[e.meta.icon?{name:"icon",fn:E(()=>[(C(),x(K(e.meta.icon)))]),key:"0"}:void 0]),1024)):(C(),x(s,{key:e.path},q({default:E(()=>[e.meta&&"link"===e.meta.type?(C(),w("a",{key:0,href:e.path,target:"_blank",onClick:R(()=>{},["stop"])},T(e.meta.title),9,pn)):(C(),w("a",mn,T(e.meta.title),1))]),_:2},[e.meta.icon?{name:"icon",fn:E(()=>[(C(),x(K(e.meta.icon)))]),key:"0"}:void 0]),1024)))],64);var t}),128))],64)}}},yn={class:"snowy-header-logo mobile-nav"},vn={class:"snowy-header-left"},gn={class:"logo-bar"},wn=["src"],Cn=e({__name:"sideM",setup(e){const n=I(),a=t(),o=e=>{const t=e;let n="",a="";t.onmousedown=function(e){const o=e.clientX-t.offsetLeft,s=e.clientY-t.offsetTop;return document.onmousemove=function(e){t.setAttribute("drag-flag",!0),n=(new Date).getTime();const a=e.clientX-o,l=e.clientY-s;l>0&&l<document.body.clientHeight-50&&(t.style.top=`${l}px`),a>0&&a<document.body.clientWidth-50&&(t.style.left=`${a}px`)},document.onmouseup=function(){a=(new Date).getTime(),a-n>200&&t.setAttribute("drag-flag",!1),document.onmousemove=null,document.onmouseup=null},!1}},s=f(!1),l=f([]),r=y(()=>a.sysBaseConfig);V(()=>{const e=n.getMenu();l.value=c(e)});const i=e=>{const t=e.keyPath.length,a=e.keyPath[t-1];n.push({path:a}),s.value=!1},c=e=>(e.forEach((t,n)=>{t.meta=t.meta?t.meta:{},t.meta.hidden&&e.splice(n,1),"iframe"===t.meta.type&&(t.path=`/i/${t.name}`),t.children&&t.children.length>0&&(t.children=c(t.children))}),e);return(e,t)=>{const n=g("a-menu"),a=g("a-drawer");return C(),w(O,null,[W((C(),w("div",{class:"mobile-nav-button",draggable:"false",onClick:t[0]||(t[0]=e=>(e=>{const t=e.currentTarget.getAttribute("drag-flag");if(s.value=!0,"true"===t)return!1;s.value=!0})(e))},[k(L(ie),{class:"xn-appout-line"})])),[[o]]),k(a,{open:L(s),"onUpdate:open":t[1]||(t[1]=e=>P(s)?s.value=e:null),width:210,closable:!1,placement:"left"},{default:E(()=>[b("header",yn,[b("div",vn,[b("div",gn,[b("img",{class:"logo",src:L(r).SNOWY_SYS_LOGO},null,8,wn),b("span",null,T(L(r).SNOWY_SYS_NAME),1)])])]),k(n,{class:"xn-inline-line",mode:"inline",onSelect:i},{default:E(()=>[k(fn,{"nav-menus":L(l)},null,8,["nav-menus"])]),_:1})]),_:1},8,["open"])],64)}}},[["__scopeId","data-v-593a24a9"]]),bn={key:0,class:"layout-items-center"},kn={class:"xn-ml-5"},_n={key:1},On={class:"module-card-font"},Sn={class:"panel-item hidden-sm-and-down module-card-scope"},xn={__name:"moduleMenu",emits:{switchModule:null},setup(e,{emit:a}){const o=t(),{moduleUnfoldOpen:s,topHeaderThemeColorOpen:r}=G(o),i=f(r),c=y(()=>o.module),u=y(()=>o.isMobile),d=y(()=>o.themeColor),h=y(()=>o.theme),p=y(()=>o.roundedCornerStyleOpen);U(s,()=>{F(()=>{B()})}),U(c,e=>{I.value=[e],D()}),U(d,()=>{F(()=>{B()})}),U(h,()=>{F(()=>{B()})}),U(u,e=>{e||F(()=>{B()})}),U(r,e=>{i.value=e,B()}),U(p,()=>{F(()=>{B()})});const m=a,A=l.getMenu(),I=f([c.value]),R=e=>{m("switchModule",e),n.data.set("SNOWY_MENU_MODULE_ID",e),F(()=>{D()})},N=y(()=>o.layout);v(()=>{B()});const B=()=>{if(s.value){try{const e=document.getElementById("moduleMenu");i.value?e.classList.add("module-menu-color"):e.classList.remove("module-menu-color")}catch(e){}D()}},D=()=>{i.value?I.value=new Array([]):I.value=[n.data.get("SNOWY_MENU_MODULE_ID")]};return(e,t)=>{const n=g("a-menu-item"),a=g("a-menu"),o=g("a-tag"),l=g("a-col"),r=g("a-row"),i=g("a-popover");return L(s)&&L(N)!==L(ge).TOP?(C(),w("div",bn,[L(A)&&L(A).length>1&&!L(u)?(C(),x(a,{key:0,selectedKeys:L(I),"onUpdate:selectedKeys":t[0]||(t[0]=e=>P(I)?I.value=e:null),mode:"horizontal",class:"module-menu",id:"moduleMenu"},{default:E(()=>[(C(!0),w(O,null,S(L(A),e=>(C(),x(n,{key:e.id,class:M(["xn-pxn-r",{"ant-menu-item-select":e.id===L(c)}]),onClick:t=>R(e.id)},{icon:E(()=>[(C(),x(K(e.meta.icon)))]),default:E(()=>[b("span",kn,T(e.meta.title),1)]),_:2},1032,["onClick","class"]))),128))]),_:1},8,["selectedKeys"])):_("",!0)])):(C(),w("div",_n,[L(A).length>1&&!L(u)?(C(),x(i,{key:0,placement:"bottomLeft"},{content:E(()=>[k(r,{gutter:[0,5],class:"module-row"},{default:E(()=>[(C(!0),w(O,null,S(L(A),e=>(C(),w("div",{key:e.id},[k(l,{span:6},{default:E(()=>[k(o,{class:M(["module-card",L(p)?"module-card-radius-round":"module-card-radius-default"]),color:e.color,onClick:t=>R(e.id)},{default:E(()=>[(C(),x(K(e.meta.icon),{class:"module-card-icon"})),b("div",On,T(e.meta.title),1)]),_:2},1032,["class","color","onClick"])]),_:2},1024)]))),128))]),_:1})]),default:E(()=>[b("div",Sn,[k(L(ie))])]),_:1})):_("",!0)]))}}},En={class:"iframe-pages"},Mn=["src"],Ln=e({__name:"iframeView",setup(e){const n=m(),a=t(),o=A(),s=I(),l=y(()=>n.iframeList),r=y(()=>a.isMobile),i=y(()=>a.layoutTags);U(o,()=>{h(s.currentRoute.value)}),V(()=>{h(s.currentRoute.value)});const c=n.setIframeList,u=n.pushIframeList,d=n.clearIframeList,h=e=>{"iframe"===e.meta.type?r||!i?c(e):u(e):!r&&i||d()};return(e,t)=>W((C(),w("div",En,[t[0]||(t[0]=b("div",null,null,-1)),(C(!0),w(O,null,S(L(l),e=>W((C(),w("iframe",{key:e.meta.url,src:e.meta.url,frameborder:"0"},null,8,Mn)),[[H,L(o).meta.url===e.meta.url]])),128))],512)),[[H,"iframe"===L(o).meta.type]])}},[["__scopeId","data-v-ad6c0537"]]),Tn={class:"admin-ui-breadcrumb"},An={class:"left-panel"},In={class:"right-panel"},Rn=e({__name:"breadcrumb",setup(e){const t=A(),n=f([]);U(t,()=>{a()}),V(()=>{a()});const a=()=>{n.value=t.meta.breadcrumb};return(e,t)=>{const a=g("a-breadcrumb-item"),o=g("a-breadcrumb");return C(),w("div",Tn,[b("div",An,[k(o,null,{default:E(()=>[(C(!0),w(O,null,S(L(n),e=>(C(),w(O,{key:e.title},["/"===e.path||e.meta.hiddenBreadcrumb?_("",!0):(C(),x(a,{key:e.meta.title},{default:E(()=>[$(T(e.meta.title),1)]),_:2},1024))],64))),128))]),_:1})]),t[0]||(t[0]=b("div",{class:"center-panel"},null,-1)),b("div",In,[j(e.$slots,"default",{},void 0,!0)])])}}},[["__scopeId","data-v-a75e08be"]]),Nn={id:"snowyHeaderLogo",class:"snowy-header-logo"},Pn={class:"snowy-header-left"},Kn={class:"logo-bar"},Bn=["src"],Dn={class:"admin-ui-side-scroll"},Fn={id:"snowyHeader",class:"snowy-header"},Un={class:"snowy-header-left xn-pl0"},Wn={class:"snowy-header-right"},Hn={id:"admin-ui-main",class:"admin-ui-main"},jn={key:0,class:"main-bottom-wrapper"},Yn=["href"],qn=e({__name:"classicalMenu",props:{layout:{type:String},isMobile:{type:Boolean},menuIsCollapse:{type:Boolean},sideTheme:{type:String},sysBaseConfig:{type:Object},openKeys:{type:Array},selectedKeys:{type:Array},menu:{type:Array},breadcrumbOpen:{type:Boolean},layoutTagsOpen:{type:Boolean},kStore:{type:Object},footerCopyrightOpen:{type:Boolean},moduleMenuShow:{type:Boolean}},emits:["onSelect","onOpenChange","switchModule","menuIsCollapseClick","displayLayoutChange"],setup(e,{emit:t}){const n=e,a=t,o=f(!0),s=A();U(s,()=>{F(()=>{o.value=l()}),o.value&&a("displayLayoutChange")}),v(()=>{F(()=>{o.value=l()})});const l=()=>(!0===s.meta.keepLive?n.kStore.pushKeepLive(s.name):n.kStore.removeKeepLive(s.name),void 0===s.meta.displayLayout||null===s.meta.displayLayout||"null"===s.meta.displayLayout||s.meta.displayLayout),r=e=>{a("onSelect",e)},i=e=>{a("onOpenChange",e)},c=e=>{a("switchModule",e)},u=()=>{a("menuIsCollapseClick")};return(t,n)=>{const a=g("a-menu"),l=g("a-layout-sider"),d=g("router-view"),h=g("a-layout-content"),p=g("a-layout");return C(),x(p,null,{default:E(()=>[e.isMobile?_("",!0):W((C(),x(l,{key:0,collapsed:e.menuIsCollapse,trigger:null,collapsible:"",theme:e.sideTheme,width:"210"},{default:E(()=>[b("header",Nn,[b("div",Pn,[b("div",Kn,[b("img",{class:"logo",src:e.sysBaseConfig.SNOWY_SYS_LOGO},null,8,Bn),b("span",null,T(e.sysBaseConfig.SNOWY_SYS_NAME),1)])])]),b("div",{class:M(e.menuIsCollapse?"admin-ui-side isCollapse":"admin-ui-side")},[b("div",Dn,[k(a,{openKeys:e.openKeys,selectedKeys:e.selectedKeys,theme:e.sideTheme,mode:"inline",onSelect:r,onOpenChange:i},{default:E(()=>[k(fn,{"nav-menus":e.menu},null,8,["nav-menus"])]),_:1},8,["openKeys","selectedKeys","theme"])])],2)]),_:1},8,["collapsed","theme"])),[[H,L(o)]]),e.isMobile?W((C(),x(Cn,{key:1},null,512)),[[H,L(o)]]):_("",!0),k(p,null,{default:E(()=>[W(b("div",Fn,[b("div",Un,[e.isMobile?_("",!0):(C(),w("div",{key:0,class:"panel-item hidden-sm-and-down",onClick:u},[e.menuIsCollapse?(C(),x(L(ce),{key:0})):(C(),x(L(ue),{key:1}))])),e.moduleMenuShow?(C(),x(xn,{key:1,onSwitchModule:c})):_("",!0)]),b("div",Wn,[k(rn)])],512),[[H,L(o)]]),!e.isMobile&&e.breadcrumbOpen?W((C(),x(Rn,{key:0},null,512)),[[H,L(o)]]):_("",!0),!e.isMobile&&e.layoutTagsOpen?W((C(),x(dn,{key:1},null,512)),[[H,L(o)]]):_("",!0),k(h,{class:M(L(o)?"main-content-wrapper":"main-content-wrapper main-content-wrapper-max")},{default:E(()=>[b("div",Hn,[k(d,null,{default:E(({Component:t})=>[(C(),x(z,{include:e.kStore.keepLiveRoute},[e.kStore.routeShow?(C(),x(K(t),{key:L(s).name})):_("",!0)],1032,["include"]))]),_:1}),k(Ln),e.footerCopyrightOpen?(C(),w("div",jn,[b("a",{class:"xn-color-a0a0a0",href:e.sysBaseConfig.SNOWY_SYS_COPYRIGHT_URL,target:"_blank"},T(e.sysBaseConfig.SNOWY_SYS_COPYRIGHT),9,Yn)])):_("",!0)])]),_:1},8,["class"])]),_:1})]),_:1})}}},[["__scopeId","data-v-608bd9ed"]]),$n={id:"snowyHeaderLogo",class:"snowy-header-logo"},Vn={class:"snowy-header-left"},Gn={class:"logo-bar"},zn=["title","src"],Xn=["href"],Jn={class:"snowy-doublerow-layout-menu-item-fort-div"},Qn={class:"snowy-doublerow-layout-menu-item-fort-div-span"},Zn={id:"snowyHeader",class:"snowy-header"},ea={class:"snowy-header-left xn-pl0"},ta={class:"snowy-header-right"},na={id:"admin-ui-main",class:"admin-ui-main"},aa={key:0,class:"main-bottom-wrapper"},oa=["href"],sa=e({__name:"doubleRowMenu",props:{layout:{type:String},isMobile:{type:Boolean},sideTheme:{type:String},menuIsCollapse:{},sysBaseConfig:{type:Object},openKeys:{type:Array},selectedKeys:{type:Array},doublerowSelectedKey:{type:Array},nextMenu:{type:Array},menu:{type:Array},breadcrumbOpen:{type:Boolean},layoutTagsOpen:{type:Boolean},layoutSiderDowbleMenu:{type:Boolean},kStore:{type:Object},footerCopyrightOpen:{type:Boolean},moduleMenuShow:{type:Boolean},secondMenuSideTheme:{}},emits:["onSelect","switchModule","showMenu","displayLayoutChange"],setup(e,{emit:t}){const n=e,a=t,o=f(!0),s=A();U(s,()=>{F(()=>{o.value=l()}),o.value&&a("displayLayoutChange")}),v(()=>{F(()=>{o.value=l()})});const l=()=>(!0===s.meta.keepLive?n.kStore.pushKeepLive(s.name):n.kStore.removeKeepLive(s.name),void 0===s.meta.displayLayout||null===s.meta.displayLayout||"null"===s.meta.displayLayout||s.meta.displayLayout),r=e=>{a("onSelect",e)},i=e=>{a("switchModule",e)};return(t,n)=>{const l=g("router-link"),c=g("a-menu-item"),u=g("a-menu"),d=g("a-layout-sider"),h=g("router-view"),p=g("a-layout-content"),m=g("a-layout");return C(),x(m,null,{default:E(()=>[e.isMobile?_("",!0):W((C(),x(d,{key:0,width:"80",theme:e.sideTheme,trigger:null,collapsible:""},{default:E(()=>[b("header",$n,[b("div",Vn,[b("div",Gn,[k(l,{to:"/"},{default:E(()=>[b("img",{class:"logo",title:e.sysBaseConfig.SNOWY_SYS_NAME,src:e.sysBaseConfig.SNOWY_SYS_LOGO},null,8,zn)]),_:1})])])]),(C(!0),w(O,null,S(e.menu,t=>(C(),x(u,{selectedKeys:e.doublerowSelectedKey,theme:e.sideTheme,class:"snowy-doublerow-layout-menu",key:t.path},{default:E(()=>[t.meta.hidden?_("",!0):(C(),x(c,{key:t.path,style:{"text-align":"center",height:"auto","line-height":"20px",flex:"none",display:"block",padding:"12px 0 !important"},onClick:e=>{a("showMenu",t)}},{icon:E(()=>[(C(),x(K(t.meta.icon),{class:"xn-pl10"}))]),default:E(()=>[t.meta&&"link"===t.meta.type?(C(),w("a",{key:0,href:t.path,target:"_blank",onClick:R(()=>{},["stop"])},null,8,Xn)):_("",!0),b("div",Jn,[b("span",Qn,T(t.meta.title),1)])]),_:2},1032,["onClick"]))]),_:2},1032,["selectedKeys","theme"]))),128))]),_:1},8,["theme"])),[[H,L(o)]]),e.isMobile?W((C(),x(Cn,{key:1},null,512)),[[H,L(o)]]):_("",!0),k(m,null,{default:E(()=>[W(b("div",Zn,[b("div",ea,[e.moduleMenuShow?(C(),x(xn,{key:0,onSwitchModule:i})):_("",!0)]),b("div",ta,[k(rn)])],512),[[H,L(o)]]),k(m,null,{default:E(()=>[W(b("div",null,null,512),[[H,L(o)]]),e.isMobile?_("",!0):W((C(),x(d,{key:0,collapsed:e.menuIsCollapse,trigger:null,width:"170",collapsible:"",theme:e.secondMenuSideTheme},{default:E(()=>[k(u,{collapsed:e.menuIsCollapse,openKeys:e.openKeys,selectedKeys:e.selectedKeys,mode:"inline",theme:e.secondMenuSideTheme,onSelect:r},{default:E(()=>[k(fn,{"nav-menus":e.nextMenu},null,8,["nav-menus"])]),_:1},8,["collapsed","openKeys","selectedKeys","theme"])]),_:1},8,["collapsed","theme"])),[[H,L(o)&&e.layoutSiderDowbleMenu]]),k(p,null,{default:E(()=>[!e.isMobile&&e.breadcrumbOpen?W((C(),x(Rn,{key:0},null,512)),[[H,L(o)]]):_("",!0),!e.isMobile&&e.layoutTagsOpen?W((C(),x(dn,{key:1},null,512)),[[H,L(o)]]):_("",!0),b("div",{class:M(L(o)?"main-content-wrapper":"main-content-wrapper main-content-wrapper-max")},[b("div",na,[k(h,null,{default:E(({Component:t})=>[(C(),x(z,{include:e.kStore.keepLiveRoute},[e.kStore.routeShow?(C(),x(K(t),{key:L(s).name})):_("",!0)],1032,["include"]))]),_:1}),k(Ln),e.footerCopyrightOpen?(C(),w("div",aa,[b("a",{class:"xn-color-a0a0a0",href:e.sysBaseConfig.SNOWY_SYS_COPYRIGHT_URL,target:"_blank"},T(e.sysBaseConfig.SNOWY_SYS_COPYRIGHT),9,oa)])):_("",!0)])],2)]),_:1})]),_:1})]),_:1})]),_:1})}}},[["__scopeId","data-v-2322673f"]]),la={id:"snowyHeader",class:"snowy-header top-snowy-header xn-pd050"},ra={class:"snowy-header-left xn-pl0"},ia={id:"snowyHeaderLogo",class:"snowy-header-logo"},ca={class:"snowy-header-left"},ua={class:"logo-bar"},da=["src"],ha={class:"xn-navmenu-line",id:"xn-line-nav"},pa={class:"snowy-header-right"},ma={id:"admin-ui-main",class:"admin-ui-main"},fa={key:0,class:"main-bottom-wrapper"},ya=["href"],va=e({__name:"topMenu",props:{layout:{},menu:{type:Array},menuList:{type:Array},sysBaseConfig:{type:Object},moduleMenuShow:{type:Boolean},selectedKeys:{type:Array},openKeys:{type:Array},sideTheme:{type:String},isMobile:{type:Boolean},breadcrumbOpen:{type:Boolean},layoutTagsOpen:{type:Boolean},layoutSiderDowbleMenu:{type:Boolean},kStore:{type:Object},footerCopyrightOpen:{type:Boolean}},emits:["onSelect","switchModule","onOpenChange","displayLayoutChange"],setup(e,{emit:t}){const n=e,a=t,o=f(!0),s=A();U(s,()=>{F(()=>{o.value=l()}),o.value&&a("displayLayoutChange")}),v(()=>{F(()=>{o.value=l()})});const l=()=>(!0===s.meta.keepLive?n.kStore.pushKeepLive(s.name):n.kStore.removeKeepLive(s.name),void 0===s.meta.displayLayout||null===s.meta.displayLayout||"null"===s.meta.displayLayout||s.meta.displayLayout),r=e=>{a("onSelect",e)},i=e=>{a("switchModule",e)},c=e=>{a("onOpenChange",e)};return(t,n)=>{const a=g("a-menu"),l=g("router-view"),u=g("a-layout-content"),d=g("a-layout");return C(),x(d,null,{default:E(()=>[k(d,{class:"layout"},{default:E(()=>[W(b("div",la,[b("div",ra,[b("header",ia,[b("div",ca,[b("div",ua,[b("img",{class:"logo",src:e.sysBaseConfig.SNOWY_SYS_LOGO},null,8,da),b("span",null,T(e.sysBaseConfig.SNOWY_SYS_NAME),1)])])])]),e.moduleMenuShow?(C(),x(xn,{key:0,onSwitchModule:i,class:"xn-pdl25"})):_("",!0),b("div",ha,[k(a,{class:"xn-bb0",id:"topHeaderMenu",selectedKeys:e.selectedKeys,theme:e.sideTheme,mode:"horizontal",onSelect:r,onOpenChange:c,collapsed:"true"},{default:E(()=>[k(fn,{"nav-menus":e.menuList},null,8,["nav-menus"])]),_:1},8,["selectedKeys","theme"])]),b("div",pa,[k(rn)])],512),[[H,L(o)]]),e.isMobile?W((C(),x(Cn,{key:0},null,512)),[[H,L(o)]]):_("",!0),!e.isMobile&&e.breadcrumbOpen?W((C(),x(Rn,{key:1},null,512)),[[H,L(o)]]):_("",!0),!e.isMobile&&e.layoutTagsOpen?W((C(),x(dn,{key:2},null,512)),[[H,L(o)]]):_("",!0),k(u,{class:M(L(o)?"main-content-wrapper":"main-content-wrapper main-content-wrapper-max")},{default:E(()=>[b("div",ma,[k(l,null,{default:E(({Component:t})=>[(C(),x(z,{include:e.kStore.keepLiveRoute},[e.kStore.routeShow?(C(),x(K(t),{key:L(s).name})):_("",!0)],1032,["include"]))]),_:1}),k(Ln),e.footerCopyrightOpen?(C(),w("div",fa,[b("a",{class:"xn-color-a0a0a0",href:e.sysBaseConfig.SNOWY_SYS_COPYRIGHT_URL,target:"_blank"},T(e.sysBaseConfig.SNOWY_SYS_COPYRIGHT),9,ya)])):_("",!0)])]),_:1},8,["class"])]),_:1})]),_:1})}}},[["__scopeId","data-v-1d6a3aa0"]]),ga=e=>{let t="";for(let n=0;n<e.length;n++){let a=e[n].getAttribute("src");a&&-1!==a.indexOf("main.")&&(t=a.split("t=")[1]||"")}return t},wa=["src"],Ca=B({name:"bindPhone"}),ba=e(Object.assign(Ca,{setup(e,{expose:t}){const n=f(!1),a=f(!1),o=f(!1),s=f(""),l=f(""),r=f("");let i=f({time:60,sendBtn:!1});const c=f(),u=X({phone:"",validCode:"",phoneValidCode:"",validCodeReqNo:""}),h=()=>{o.value=!0;try{d.userGetPicCaptcha().then(e=>{s.value=e.validCodeBase64,l.value=e.validCodeReqNo})}finally{o.value=!1}},p=async()=>{try{if(!u.phone)return void le.error("请输入手机号");if(!u.validCode)return void le.error("请输入图片验证码");const e=le.loading("验证码发送中..",0);d.userBindPhoneGetPhoneValidCode({phone:u.phone,validCode:u.validCode,validCodeReqNo:l.value}).then(e=>{i.value.sendBtn=!0;const t=window.setInterval(()=>{i.value.time--<=0&&(i.value.time=60,i.value.sendBtn=!1,window.clearInterval(t))},1e3);r.value=e,le.success("验证码已发送到手机")}).catch(()=>{u.validCode="",u.validCodeReqNo="",r.value="",h()}).finally(()=>{setTimeout(e,100)})}catch(e){h()}},m=async()=>{try{await c.value.validate(),a.value=!0,d.userBindPhone({phone:u.phone,validCode:u.phoneValidCode,validCodeReqNo:r.value}).then(()=>{le.success("绑定成功"),n.value=!1}).catch(()=>{u.phoneValidCode="",r.value=""})}catch(e){}finally{a.value=!1}},y={phone:[ye("请输入手机号"),ve.phone],validCode:ye("请输入图片验证码"),phoneValidCode:[{required:!0,message:"请输入短信验证码",trigger:"blur"}]};return t({checkNeedBindPhone:()=>{d.userCenterIsUserNeedBindPhone().then(e=>{e&&(n.value=!0,h())})}}),(e,t)=>{const l=g("a-col"),r=g("a-row");return C(),x(L(se),{open:n.value,"onUpdate:open":t[3]||(t[3]=e=>n.value=e),title:"绑定手机号",maskClosable:!1,closable:!1,width:400},{footer:E(()=>[k(L(pe),{type:"primary",loading:a.value,onClick:m},{default:E(()=>t[4]||(t[4]=[$("确定")])),_:1},8,["loading"])]),default:E(()=>[k(L(de),{ref_key:"formRef",ref:c,model:u,rules:y,layout:"vertical"},{default:E(()=>[k(L(de).Item,{name:"phone"},{default:E(()=>[k(L(he),{value:u.phone,"onUpdate:value":t[0]||(t[0]=e=>u.phone=e),placeholder:"请输入手机号"},null,8,["value"])]),_:1}),k(L(de).Item,{name:"validCode"},{default:E(()=>[k(r,{gutter:8},{default:E(()=>[k(l,{span:16},{default:E(()=>[k(L(he),{value:u.validCode,"onUpdate:value":t[1]||(t[1]=e=>u.validCode=e),placeholder:"请输入图片验证码"},null,8,["value"])]),_:1}),k(l,{span:8},{default:E(()=>[s.value?(C(),w("img",{key:0,src:s.value,class:"captcha-image",onClick:h},null,8,wa)):_("",!0)]),_:1})]),_:1})]),_:1}),k(L(de).Item,{name:"phoneValidCode"},{default:E(()=>[k(r,{gutter:8},{default:E(()=>[k(l,{span:16},{default:E(()=>[k(L(he),{value:u.phoneValidCode,"onUpdate:value":t[2]||(t[2]=e=>u.phoneValidCode=e),placeholder:"请输入短信验证码"},null,8,["value"])]),_:1}),k(l,{span:8},{default:E(()=>[k(L(pe),{loading:o.value,onClick:p,style:{width:"100%"},disabled:L(i).sendBtn},{default:E(()=>[$(T(L(i).sendBtn?L(i).time+" s":"获取验证码"),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])}}}),[["__scopeId","data-v-92e87053"]]),ka=["src"],_a=B({name:"bindEmail"}),Oa=e(Object.assign(_a,{setup(e,{expose:t}){const n=f(!1),a=f(!1),o=f(!1),s=f(""),l=f(""),r=f("");let i=f({time:60,sendBtn:!1});const c=f(),u=X({email:"",validCode:"",emailValidCode:"",validCodeReqNo:""}),h=()=>{o.value=!0;try{d.userGetPicCaptcha().then(e=>{s.value=e.validCodeBase64,l.value=e.validCodeReqNo})}finally{o.value=!1}},p=async()=>{try{if(!u.email)return void le.error("请输入邮箱号");if(!u.validCode)return void le.error("请输入图片验证码");const e=le.loading("验证码发送中..",0);d.userBindEmailGetEmailValidCode({email:u.email,validCode:u.validCode,validCodeReqNo:l.value}).then(e=>{i.value.sendBtn=!0;const t=window.setInterval(()=>{i.value.time--<=0&&(i.value.time=60,i.value.sendBtn=!1,window.clearInterval(t))},1e3);r.value=e,le.success("验证码已发送到邮箱")}).catch(()=>{u.validCode="",u.validCodeReqNo="",r.value="",h()}).finally(()=>{setTimeout(e,100)})}catch(e){h()}},m=async()=>{try{await c.value.validate(),a.value=!0,d.userBindEmail({email:u.email,validCode:u.emailValidCode,validCodeReqNo:r.value}).then(()=>{le.success("绑定成功"),n.value=!1}).catch(()=>{u.emailValidCode="",r.value=""})}catch(e){}finally{a.value=!1}},y={email:[ye("请输入邮箱号"),ve.email],validCode:ye("请输入图片验证码"),emailValidCode:[{required:!0,message:"请输入邮箱验证码",trigger:"blur"}]};return t({checkNeedBindEmail:()=>{d.userCenterIsUserNeedBindEmail().then(e=>{e&&(n.value=!0,h())})}}),(e,t)=>{const l=g("a-col"),r=g("a-row");return C(),x(L(se),{open:n.value,"onUpdate:open":t[3]||(t[3]=e=>n.value=e),title:"绑定邮箱号",maskClosable:!1,closable:!1,width:400},{footer:E(()=>[k(L(pe),{type:"primary",loading:a.value,onClick:m},{default:E(()=>t[4]||(t[4]=[$("确定")])),_:1},8,["loading"])]),default:E(()=>[k(L(de),{ref_key:"formRef",ref:c,model:u,rules:y,layout:"vertical"},{default:E(()=>[k(L(de).Item,{name:"email"},{default:E(()=>[k(L(he),{value:u.email,"onUpdate:value":t[0]||(t[0]=e=>u.email=e),placeholder:"请输入邮箱号"},null,8,["value"])]),_:1}),k(L(de).Item,{name:"validCode"},{default:E(()=>[k(r,{gutter:8},{default:E(()=>[k(l,{span:16},{default:E(()=>[k(L(he),{value:u.validCode,"onUpdate:value":t[1]||(t[1]=e=>u.validCode=e),placeholder:"请输入图片验证码"},null,8,["value"])]),_:1}),k(l,{span:8},{default:E(()=>[s.value?(C(),w("img",{key:0,src:s.value,class:"captcha-image",onClick:h},null,8,ka)):_("",!0)]),_:1})]),_:1})]),_:1}),k(L(de).Item,{name:"emailValidCode"},{default:E(()=>[k(r,{gutter:8},{default:E(()=>[k(l,{span:16},{default:E(()=>[k(L(he),{value:u.emailValidCode,"onUpdate:value":t[2]||(t[2]=e=>u.emailValidCode=e),placeholder:"请输入邮箱验证码"},null,8,["value"])]),_:1}),k(l,{span:8},{default:E(()=>[k(L(pe),{loading:o.value,onClick:p,style:{width:"100%"},disabled:L(i).sendBtn},{default:E(()=>[$(T(L(i).sendBtn?L(i).time+" s":"获取验证码"),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])}}}),[["__scopeId","data-v-6b39a722"]]),Sa=e({__name:"index",setup(e){const o=t(),s=p(),l=A(),r=I(),u=f([]),d=f({}),m=f([]),g=f([]),S=f([]),E=f(!1),M=f([]),T=f(!0),R=f([]),N=f(!0),P=f([]),K=f(),B=f(),D=y(()=>o.layout),W=y(()=>o.isMobile),H=y(()=>o.menuIsCollapse),j=y(()=>o.theme),Y=y(()=>o.themeColor),q=y(()=>(o.layoutTagsOpen||(s.keepLiveRoute=[]),o.layoutTagsOpen)),$=y(()=>o.breadcrumbOpen),V=y(()=>o.fixedWidth),G=y(()=>o.topHeaderThemeColorOpen),z=y(()=>o.topHeaderThemeColorSpread),X=y(()=>o.sideUniqueOpen),ee=y(()=>o.footerCopyrightOpen),te=y(()=>o.sysBaseConfig);y(()=>o.module);const ne=y(()=>j.value===a.REAL_DARK?a.DARK:j.value),ae=y(()=>j.value===a.REAL_DARK?a.DARK:a.LIGHT),oe=y(()=>o.roundedCornerStyleOpen),se=()=>{r.getRoutes().filter(e=>{e.path===l.path&&(d.value=e.meta.breadcrumb?e.meta.breadcrumb[0]:{})}),F(()=>{let e=l.meta.active||l.path;"catalog"===l.meta.type&&(e=Se(d.value.children).path),g.value=new Array(e);const t=we(d.value.children,e);l.meta.hidden&&t&&t.length>1&&(g.value=new Array(t[1]));const n=d.value.children;if(t){const e=we(M.value,l.path);M.value.forEach(t=>{e.includes(t.path)&&Oe(t.id)});const a=t[t.length-1];if(D.value===ge.DOUBLEROW){n.filter(e=>e.path===a)[0].children&&(m.value=n.filter(e=>e.path===a)[0].children)}}E.value&&!X.value||(S.value=t),D.value===ge.DOUBLEROW&&ye()})};J(()=>{const e=c();e.refreshFlag&&((()=>{M.value=r.getMenu();const e=n.data.get("SNOWY_MENU_MODULE_ID");if(e){const t=r.getMenu().filter(t=>t.id===e);t.length>0?u.value=t[0].children:u.value=r.getMenu()[0].children}else u.value=r.getMenu()[0].children;se()})(),i().updateOrRemoveViewTags(r.getRoutes()),e.changeRefreshFlag(!1))}),v(()=>{h.done(),ke(),window.addEventListener("resize",ke),window.addEventListener("resize",re),he(),ue(j.value,D.value),ce(),le(),F(()=>{re(),K.value.checkNeedBindPhone(),B.value.checkNeedBindEmail()})}),Q(()=>{window.removeEventListener("resize",ke),window.removeEventListener("resize",re)});const le=()=>{setTimeout(async()=>{if(ga(document.getElementsByTagName("script"))!==await new Promise((e,t)=>{fetch("/?t="+Date.now()).then(async t=>{let n=await t.text(),a=(new DOMParser).parseFromString(n,"text/html"),o=ga(a.getElementsByTagName("script"));e(o)}).catch(e=>{t(e)})})){if(document.querySelector(".notification-update-version"))return;const e=`open${Date.now()}`;me.open({type:"info",message:"发现新版本",description:"检测到新版本，请刷新后使用",duration:0,class:"notification-update-version",btn:()=>Z(pe,{type:"primary",size:"small",onClick:()=>{me.close(e),window.location.reload()}},{default:()=>"立即更新"}),key:e})}},3e3)},re=()=>{if("top"!==D.value)return;const e=u.value;P.value=e,F(()=>{let t=document.querySelector("#topHeaderMenu").querySelectorAll("li"),n=document.querySelector("#xn-line-nav").offsetWidth,a=0,o=0;for(const[e,r]of t.entries())if(a+=r.offsetWidth,a>n){o=e-1;break}if(a<n)return void(P.value=e);const s=e.slice(0,o),l=e.slice(o,e.length);P.value=s,P.value.push({meta:{icon:"rightCircle-outlined",title:"更多",type:"catalog"},children:l})})},ie=e=>{let t=document.querySelector("#xn-line-nav"),n=document.querySelector("#topHeaderMenu"),a=e.deltaY;let o=Number(n.style.left.slice(0,-2)),s=t.offsetWidth-n.scrollWidth;a<0&&o>s?n.style.left=o-20+"px":a>0&&o<0&&(n.style.left=o+20+"px")};U(l,()=>{g.value=[],se()}),U(D,e=>{document.body.setAttribute("data-layout",e),e.includes(ge.DOUBLEROW)&&(se(),ye()),F(()=>{he(),ue(j.value,e),re(),ce();let t=document.querySelector("#xn-line-nav");t&&t.addEventListener("mousewheel",ie,!1)})}),U(G,()=>{he()}),U(V,()=>{ce()}),U(q,()=>{ce()}),U($,()=>{ce()}),U(z,()=>{he()}),U(j,e=>{ue(e,D.value)}),U(Y,()=>{ue(j.value,D.value)}),U(G,e=>{const t=document.getElementById("snowyHeader"),n=document.getElementById("topHeaderMenu");D.value===ge.TOP&&(e?(t.classList.add("top-snowy-header-layout"),n.classList.add("top-snowy-header-layout")):(t.classList.remove("top-snowy-header-layout"),n.classList.remove("top-snowy-header-layout")))}),U(oe,()=>{ue(j.value,D.value)});const ce=()=>{F(()=>{const e=document.querySelector(".admin-ui-breadcrumb"),t=document.querySelector(".snowy-tags"),n=document.querySelector(".ant-layout-content");V.value&&D.value===ge.TOP?(null==e||e.classList.add("xn-mg050"),null==t||t.classList.add("xn-mg050"),null==n||n.classList.add("xn-pd1180")):(null==e||e.classList.remove("xn-mg050"),null==t||t.classList.remove("xn-mg050"),null==n||n.classList.remove("xn-pd1180"))})},ue=(e,t)=>{const n=document.getElementById("snowyHeader"),o=document.getElementById("topHeaderMenu");G.value&&t===ge.TOP?F(()=>{o.classList.add("top-snowy-header-layout"),n.classList.add("top-snowy-header-layout")}):G.value||t!==ge.TOP||F(()=>{o.classList.remove("top-snowy-header-layout"),n.classList.remove("top-snowy-header-layout")}),e===a.LIGHT&&t===ge.TOP?(n.classList.remove("top-snowy-header"),n.classList.add("top-snowy-header-light")):(n.classList.remove("top-snowy-header-light"),t===ge.TOP||e===a.REAL_DARK?n.classList.add("top-snowy-header"):n.classList.remove("top-snowy-header"))},de=()=>{o.toggleConfig("menuIsCollapse")},he=()=>{try{const e=document.getElementById("snowyHeader");G.value?e.classList.add("snowy-header-primary-color"):e.classList.remove("snowy-header-primary-color");const t=document.getElementById("snowyHeaderLogo");z.value?t.classList.add("snowy-header-logo-primary-color"):t.classList.remove("snowy-header-logo-primary-color")}catch(e){}},ye=()=>{const e=we(u.value,g.value.toString());F(()=>{const t=[];for(const n in e)t.push(n);N.value=t.length>1}),u.value.forEach(t=>{void 0!==e&&e[e.length-1].toString()===t.path&&(R.value=[t.path])})},ve=e=>{if(X.value){const t=e[e.length-1];e.length>1?S.value=we(u.value,t):S.value=Array.of(t)}else S.value=e},we=(e,t)=>{const n=(e,t)=>{if(Array.isArray(e))for(const a of e){if((null==a?void 0:a.path)===t)return[a.path];if(null==a?void 0:a.children){const e=n(a.children,t);if(e)return e.concat(a.path)}}};return n(e,t)},Ce=e=>{if(d.value=e,d.value.children&&(m.value=d.value.children),e.children&&0!==e.children.length)if(e.children){let t=0;e.children.forEach(e=>{e.meta.hidden&&!0===e.meta.hidden&&t++}),t===e.children.length?(N.value=!1,r.push({path:e.path})):N.value=!0}else N.value=!1;else N.value=!1,r.push({path:e.path});D.value===ge.DOUBLEROW&&(R.value=[e.path])},be=e=>{E.value=!0;const t=e.keyPath.length,n=e.keyPath[t-1],a=i().viewTags.find(e=>e.path===n);r.push(a?a.fullPath:n),g.value=e.selectedKeys},ke=()=>{const e=document.body.clientWidth;o.setIsMobile(e<992)},_e=e=>{if(M.value.length>0){se();const t=M.value.filter(t=>t.id===e)[0].children;if(t.length>0){u.value=t;const a=Se(u.value),o=a.path;"LINK"===a.menuType?window.open(o):(n.data.set("SNOWY_MENU_MODULE_ID",e),r.push({path:o}))}else message.warning("该模块下无任何菜单")}re()},Oe=e=>{n.data.set("SNOWY_MENU_MODULE_ID",e),o.setModule(e),u.value=M.value.filter(t=>t.id===e)[0].children},Se=e=>e[0]&&void 0!==e[0].children?e[0].children.length>0?e[0].children[0]&&e[0].children[0].meta.hidden&&!0===e[0].children[0].meta.hidden?e[0]:Se(e[0].children):void 0:e[0],xe=()=>{document.getElementById("app").classList.remove("main-maximize"),T.value=!1,F(()=>{T.value=!0})};return(e,t)=>(C(),w(O,null,[L(D)===L(ge).CLASSICAL?(C(),x(qn,{key:0,layout:L(D),isMobile:L(W),menuIsCollapse:L(H),sideTheme:L(ne),sysBaseConfig:L(te),openKeys:L(S),selectedKeys:L(g),menu:L(u),breadcrumbOpen:L($),layoutTagsOpen:L(q),kStore:L(s),footerCopyrightOpen:L(ee),moduleMenuShow:L(T),onOnSelect:be,onOnOpenChange:ve,onSwitchModule:_e,onMenuIsCollapseClick:de,onDisplayLayoutChange:xe},null,8,["layout","isMobile","menuIsCollapse","sideTheme","sysBaseConfig","openKeys","selectedKeys","menu","breadcrumbOpen","layoutTagsOpen","kStore","footerCopyrightOpen","moduleMenuShow"])):L(D)===L(ge).DOUBLEROW?(C(),x(sa,{key:1,layout:L(D),isMobile:L(W),sideTheme:L(ne),secondMenuSideTheme:L(ae),sysBaseConfig:L(te),openKeys:L(S),selectedKeys:L(g),menuIsCollapse:L(H),doublerowSelectedKey:L(R),menu:L(u),nextMenu:L(m),breadcrumbOpen:L($),layoutTagsOpen:L(q),layoutSiderDowbleMenu:L(N),kStore:L(s),footerCopyrightOpen:L(ee),moduleMenuShow:L(T),onOnSelect:be,onSwitchModule:_e,onShowMenu:Ce,onDisplayLayoutChange:xe},null,8,["layout","isMobile","sideTheme","secondMenuSideTheme","sysBaseConfig","openKeys","selectedKeys","menuIsCollapse","doublerowSelectedKey","menu","nextMenu","breadcrumbOpen","layoutTagsOpen","layoutSiderDowbleMenu","kStore","footerCopyrightOpen","moduleMenuShow"])):L(D)===L(ge).TOP?(C(),x(va,{key:2,layout:L(D),menuList:L(P),menu:L(u),sysBaseConfig:L(te),moduleMenuShow:L(T),openKeys:L(S),selectedKeys:L(g),breadcrumbOpen:L($),footerCopyrightOpen:L(ee),sideTheme:L(ne),isMobile:L(W),kStore:L(s),layoutTagsOpen:L(q),onSwitchModule:_e,onOnOpenChange:ve,onOnSelect:be,onDisplayLayoutChange:xe},null,8,["layout","menuList","menu","sysBaseConfig","moduleMenuShow","openKeys","selectedKeys","breadcrumbOpen","footerCopyrightOpen","sideTheme","isMobile","kStore","layoutTagsOpen"])):_("",!0),b("div",{class:"main-maximize-exit",onClick:xe},[k(L(fe),{class:"xn-color-fff"})]),k(ba,{ref_key:"bindPhoneRef",ref:K},null,512),k(Oa,{ref_key:"bindEmailRef",ref:B},null,512)],64))}},[["__scopeId","data-v-45b81203"]]);export{Sa as default};
