import{t as e}from"./index-DcffTgQN.js";import{d as a,f as t,o as l,a1 as r,a6 as s,V as u,u as d,H as c}from"./vue-vendor-BzDj5Url.js";const n=a({name:"menuTreeSelect"}),o=Object.assign(n,{props:{defaultSelectKeys:{type:Array,default:()=>[],required:!1},defaultSelectData:{type:Array,default:()=>[],required:!1},resultData:{type:Boolean,default:()=>!1,required:!1}},setup(a,{expose:n}){const o=t([]),i=t([]),p=a,f={children:"children",title:"title",key:"id",value:"id"};l(()=>{p.defaultSelectKeys?o.value=p.defaultSelectKeys:o.value=p.defaultSelectData.map(e=>e.id),i.value=h(e.data.get("MENU"))});const h=(e=[])=>{const a=e=>{e.forEach(e=>{e.children&&(e.selectable=!1,a(e.children))})};return a(e),e};return n({getSelectData:()=>p.resultData?((e,a=[])=>{const t=[],l=e=>{e.forEach(e=>{a&&a.forEach(a=>{if(a===e.id){const a={id:e.id,title:e.title,icon:e.icon,path:e.path};t.push(a)}}),e.children&&l(e.children)})};return l(e),t})(i.value,o.value):o.value,setSelectData:e=>{o.value=e.map(e=>e.id)}}),(e,a)=>{const t=r("a-tree-select");return u(),s(t,{value:d(o),"onUpdate:value":a[0]||(a[0]=e=>c(o)?o.value=e:null),"show-search":"",class:"xn-wd","dropdown-style":{maxHeight:"400px",overflow:"auto"},placeholder:"请选择菜单","field-names":f,"allow-clear":"",multiple:"","tree-default-expand-all":"","tree-data":d(i)},null,8,["value","tree-data"])}}});export{o as _};
