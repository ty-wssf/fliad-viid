import{d as e,s as t,f as o,o as i,b as n,U as a,V as l,Y as r,_ as p,a6 as s}from"./vue-vendor-BzDj5Url.js";const d=["id"],u=e({name:"baiduMap"}),c=Object.assign(u,{props:{mid:{type:Number,default:(new Date).getTime()},height:{type:Number,default:800},apiKey:{type:String,required:!0},center:{type:Array},plugins:{type:Array,default:["BMap.ScaleControl","BMap.ZoomControl","BMap.LocationControl","BMap.NavigationControl3D"]},viewMode:{type:String,default:"3D",validator:e=>["2D","3D"].includes(e)},rotationAngle:{type:Number,default:60},tiltAngle:{type:Number,default:70},zoom:{type:Number,default:12},mapStyle:{type:String}},emits:["complete","markerClick"],setup(e,{expose:s,emit:u}){const c=e,g=u,v=t(null),h=o([]),w=o({});window.initMap=()=>{v.value=new BMapGL.Map(`container-${c.mid}`),v.value.enableScrollWheelZoom(!0),c.mapStyle&&v.value.setMapStyleV2(c.mapStyle),c.plugins.length>0&&y(),c.center?(M(new BMapGL.Point(c.center[0],c.center[1])),g("complete")):(new BMapGL.Geolocation).getCurrentPosition(e=>{e?M(new BMapGL.Point(e.longitude,e.latitude)):M(),g("complete")})};const y=()=>{c.plugins.includes("BMap.ScaleControl")&&v.value.addControl(new BMapGL.ScaleControl),c.plugins.includes("BMap.ZoomControl")&&v.value.addControl(new BMapGL.ZoomControl),c.plugins.includes("BMap.LocationControl")&&v.value.addControl(new BMapGL.LocationControl),c.plugins.includes("BMap.NavigationControl3D")&&v.value.addControl(new BMapGL.NavigationControl3D)},M=e=>{if(!e){const t=v.value.getViewport(h.value);e=new BMapGL.Point(t.center.lng,t.center.lat)}v.value.centerAndZoom(e,c.zoom),"3D"===c.viewMode&&(v.value.setHeading(c.rotationAngle),v.value.setTilt(c.tiltAngle))};return i(()=>{(()=>{const e=document.createElement("script");e.src=`https://api.map.baidu.com/api?v=1.0&&type=webgl&ak=${c.apiKey}&callback=initMap`,document.getElementsByTagName("head")[0].appendChild(e)})()}),n(()=>{v.value&&v.value.baseLayerAdded&&v.value.destroy()}),s({renderMarker:e=>{e.forEach(e=>{const t=new BMapGL.Point(e.position[0],e.position[1]),o=new BMapGL.Marker(t,{title:e.title});o.addEventListener("click",()=>{g("markerClick",e.position)}),v.value.addOverlay(o),h.value.push(t)}),M()},renderIconMarker:e=>{e.forEach(e=>{const t=new BMapGL.Point(e.position[0],e.position[1]),o=new BMapGL.Marker(t,{title:e.title,icon:new BMapGL.Icon(e.img,new BMapGL.Size(e.imgWidth?e.imgWidth:40,e.imgHeight?e.imgHeight:40))});o.addEventListener("click",()=>{g("markerClick",e.position)}),v.value.addOverlay(o),h.value.push(t)}),M()},render3DCircleMarker:e=>{e.forEach(e=>{const t=new BMapGL.Point(e.position[0],e.position[1]),o=new BMapGL.Marker3D(t,e.height?e.height:8e3,{size:e.size?e.size:50,shape:"BMAP_SHAPE_CIRCLE",fillColor:e.fillColor?e.fillColor:"#006600",fillOpacity:.5});o.addEventListener("click",()=>{g("markerClick",e.position)}),v.value.addOverlay(o),h.value.push(t)}),M()},render3DIconMarker:e=>{e.forEach(e=>{const t=new BMapGL.Point(e.position[0],e.position[1]),o=new BMapGL.Marker3D(t,e.height?e.height:8e3,{size:e.size?e.size:50,icon:new BMapGL.Icon(e.img,new BMapGL.Size(e.imgWidth?e.imgWidth:40,e.imgHeight?e.imgHeight:40))});o.addEventListener("click",()=>{g("markerClick",e.position)}),v.value.addOverlay(o),h.value.push(t)}),M()},renderPolyline:(e,t={})=>{e.forEach(e=>{h.value.push(new BMapGL.Point(e.position[0],e.position[1]))});const o=new BMapGL.Polyline(h.value,{stokeStyle:"solid",strokeColor:t.strokeColor||"blue",strokeWeight:t.strokeWeight||2,strokeOpacity:t.strokeOpacity||.5});v.value.addOverlay(o),M()},renderCircle:(e,t,o={})=>{const i=new BMapGL.Point(e[0],e[1]);h.value.push(i);const n=new BMapGL.Circle(i,t||500,{strokeColor:o.strokeColor||"blue",strokeWeight:o.strokeWeight||2,strokeOpacity:o.strokeOpacity||.5});v.value.addOverlay(n),M()},renderPolygon:(e,t={})=>{e.forEach(e=>{h.value.push(new BMapGL.Point(e.position[0],e.position[1]))});const o=new BMapGL.Polygon(h.value,{stokeStyle:"solid",strokeColor:t.strokeColor||"blue",strokeWeight:t.strokeWeight||2,strokeOpacity:t.strokeOpacity||.5,fillColor:t.fillColor||"blue",fllOpacity:t.fllOpacity||.5});v.value.addOverlay(o),M()},renderInfoWindow:e=>{e.forEach(e=>{w.value[e.position]=new BMapGL.InfoWindow(e.content.join("<br>"),{title:e.title,width:e.width?e.width:250,height:e.height?e.height:100})})},openInfoWindow:e=>{const t=w.value[e];t&&v.value.openInfoWindow(t,new BMapGL.Point(e[0],e[1]))},clearOverlay:()=>{v.value.clearOverlays()}}),(t,o)=>(l(),a("div",{class:"baiduMap",style:p({height:`${e.height}px`})},[r("div",{id:`container-${e.mid}`,class:"xn-wh"},"地图资源加载中...",8,d)],4))}}),g=e({name:"exmBaiduMap"}),v=Object.assign(g,{setup(e){const t=o(null),i=()=>{t.value.renderInfoWindow([{position:[116.39,39.9],title:"Snowy-小诺开源技术",content:["<div style='padding:0'>","网站 : https://www.xiaonuo.vip","Snowy是一款国内首例国产密码算法加密框架，采用Vue3.0+AntDesignVue3.0+SpringBoot2.8前后分离技术打造，技术框架与密码的结合，让前后分离‘密’不可分！</div>"]},{position:[116.33,39.5],title:"Snowy-小诺开源技术",content:["<div style='padding:0'>","网站 : https://www.xiaonuo.vip","Snowy是一款国内首例国产密码算法加密框架，采用Vue3.0+AntDesignVue3.0+SpringBoot2.8前后分离技术打造，技术框架与密码的结合，让前后分离‘密’不可分！</div>"],width:300,height:200}])},n=e=>{t.value.openInfoWindow(e)};return(e,o)=>(l(),s(c,{ref_key:"map",ref:t,"api-key":"NtTydKuftIVXAy526uWXZoHS86lg0KeW",onComplete:i,onMarkerClick:n},null,512))}});export{v as default};
