import{_ as e}from"./index-r8v7tfQO.js";import{_ as a,p as t}from"./form-BUMA3Cpb.js";import{o as l}from"./orgApi-CJS79xlv.js";import{_ as r}from"./index-DcffTgQN.js";import{w as o,x as n}from"./ant-design-vendor-CRFwT3Wn.js";import{d,f as s,a1 as i,U as u,V as c,k as f,a2 as m,u as p,a6 as h,H as y,G as _,Z as v,F as g,a3 as x,Y as k}from"./vue-vendor-BzDj5Url.js";import"./index-yhO5Pkur.js";import"./formRules-B2bzcXv4.js";const b=["onClick"],w=d({name:"sysPosition"}),I=r(Object.assign(w,{setup(r){const d=[{title:"职位名称",dataIndex:"name"},{title:"分类",dataIndex:"category"},{title:"排序",dataIndex:"sortCode",width:100},{title:"操作",dataIndex:"action",align:"center",width:"150px"}],w=s([]),I={alert:{show:!1,clear:()=>{w.value=s([])}},rowSelection:{onChange:(e,a)=>{w.value=e}}},C=s(null),O=s(),j=s(),S=s({}),E=s([]),R=s([]),K={children:"children",title:"name",key:"id"},D=s(!0),T=e=>t.positionPage(Object.assign(e,S.value)).then(e=>e),P=()=>{j.value.resetFields(),C.value.refresh(!0)};l.orgTree().then(e=>{D.value=!1,null!==e&&(R.value=e,o(E.value)&&R.value.forEach(e=>{"0"===e.parentId&&(E.value.push(e.id),e.children&&e.children.forEach(e=>{E.value.push(e.id)}))}))});const A=e=>{e.length>0?S.value.orgId=e.toString():delete S.value.orgId,C.value.refresh(!0)},F=e=>{t.positionDelete(e).then(()=>{C.value.clearRefreshSelected()})};return(l,r)=>{const o=i("a-tree"),s=i("a-empty"),G=i("a-card"),N=i("a-col"),U=i("a-input"),B=i("a-form-item"),L=i("SearchOutlined"),M=i("a-button"),Y=i("redo-outlined"),z=i("a-row"),H=i("a-form"),V=i("plus-outlined"),Z=e,$=i("a-space"),q=i("a-divider"),J=i("a-popconfirm"),Q=i("s-table");return c(),u(g,null,[f(z,{gutter:10},{default:m(()=>[f(N,{xs:24,sm:24,md:24,lg:5,xl:5},{default:m(()=>[f(G,{bordered:!1,loading:p(D),class:"left-tree-container"},{default:m(()=>[p(R).length>0?(c(),h(o,{key:0,expandedKeys:p(E),"onUpdate:expandedKeys":r[0]||(r[0]=e=>y(E)?E.value=e:null),"tree-data":p(R),"field-names":K,onSelect:A},null,8,["expandedKeys","tree-data"])):(c(),h(s,{key:1,image:p(n).PRESENTED_IMAGE_SIMPLE},null,8,["image"]))]),_:1},8,["loading"])]),_:1}),f(N,{xs:24,sm:24,md:24,lg:19,xl:19},{default:m(()=>[f(G,{bordered:!1,class:"xn-mb10"},{default:m(()=>[f(H,{ref_key:"searchFormRef",ref:j,name:"advanced_search",class:"ant-advanced-search-form",model:p(S)},{default:m(()=>[f(z,{gutter:24},{default:m(()=>[f(N,{span:8},{default:m(()=>[f(B,{name:"searchKey",label:"名称关键词"},{default:m(()=>[f(U,{value:p(S).searchKey,"onUpdate:value":r[1]||(r[1]=e=>p(S).searchKey=e),placeholder:"请输入职位名称关键词"},null,8,["value"])]),_:1})]),_:1}),f(N,{span:8},{default:m(()=>[f(M,{type:"primary",onClick:r[2]||(r[2]=e=>p(C).refresh(!0))},{icon:m(()=>[f(L)]),default:m(()=>[r[5]||(r[5]=_(" 查询 "))]),_:1}),f(M,{class:"snowy-button-left",onClick:P},{icon:m(()=>[f(Y)]),default:m(()=>[r[6]||(r[6]=_(" 重置 "))]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),f(G,{bordered:!1},{default:m(()=>[f(Q,{ref_key:"tableRef",ref:C,columns:d,data:T,"expand-row-by-click":!0,alert:I.alert.show,bordered:"","row-key":e=>e.id,"row-selection":I.rowSelection},{operator:m(()=>[f($,null,{default:m(()=>[f(M,{type:"primary",onClick:r[3]||(r[3]=e=>p(O).onOpen(void 0,p(S).orgId))},{icon:m(()=>[f(V)]),default:m(()=>[r[7]||(r[7]=_(" 新增 "))]),_:1}),f(Z,{buttonName:"批量删除",icon:"DeleteOutlined",buttonDanger:"",selectedRowKeys:p(w),onBatchCallBack:F},null,8,["selectedRowKeys"])]),_:1})]),bodyCell:m(({column:e,record:a})=>["category"===e.dataIndex?(c(),u(g,{key:0},[_(x(l.$TOOL.dictTypeData("POSITION_CATEGORY",a.category)),1)],64)):v("",!0),"action"===e.dataIndex?(c(),u(g,{key:1},[k("a",{onClick:e=>p(O).onOpen(a)},"编辑",8,b),f(q,{type:"vertical"}),f(J,{title:"确定删除此职位？",onConfirm:e=>(e=>{let a=[{id:e.id}];t.positionDelete(a).then(()=>{C.value.refresh(!0)})})(a)},{default:m(()=>[f(M,{type:"link",danger:"",size:"small"},{default:m(()=>r[8]||(r[8]=[_("删除")])),_:1})]),_:2},1032,["onConfirm"])],64)):v("",!0)]),_:1},8,["alert","row-key","row-selection"])]),_:1})]),_:1})]),_:1}),f(a,{ref_key:"formRef",ref:O,onSuccessful:r[4]||(r[4]=e=>p(C).refresh(!0))},null,512)],64)}}}),[["__scopeId","data-v-60628b9c"]]);export{I as default};
