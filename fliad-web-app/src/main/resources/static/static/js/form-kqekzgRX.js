import{_ as e}from"./index-yhO5Pkur.js";import{_ as l}from"./index-BkEc3Qph.js";import{h as a,_ as o,t,c as n}from"./index-DcffTgQN.js";import{r as u}from"./formRules-B2bzcXv4.js";import{d,f as r,a1 as s,a6 as i,V as c,a2 as p,k as f,u as v,H as m,U as _,G as g,F as h,W as b,n as y}from"./vue-vendor-BzDj5Url.js";const U=(e,...l)=>a("/biz/user/"+e,...l),w={userPage:e=>U("page",e,"get"),submitForm:(e,l=!1)=>U(l?"edit":"add",e),userDelete:e=>U("delete",e),userDetail:e=>U("detail",e,"get"),userDisableUser:e=>U("disableUser",e),userEnableUser:e=>U("enableUser",e),userResetPassword:e=>U("resetPassword",e),userOrgTreeSelector:e=>U("orgTreeSelector",e,"get"),userPositionSelector:e=>U("positionSelector",e,"get"),userRoleSelector:e=>U("roleSelector",e,"get"),userSelector:e=>U("userSelector",e,"get"),userOwnRole:e=>U("ownRole",e,"get"),grantRole:e=>U("grantRole",e),userExport:e=>U("export",e,"get",{responseType:"blob"}),userExportUserInfo:e=>U("exportUserInfo",e,"get",{responseType:"blob"})},I=d({name:"bizUser"}),P=o(Object.assign(I,{emits:{successful:null},setup(a,{expose:o,emit:d}){const U=r(!1),I=r(),P=r("1"),x=d,S=r(!1),k=r([]),J=r([]),C=r(),R=r(),L=r(),T=r(),O=r({}),D=()=>{k.value=[],J.value=[],U.value=!1},N=e=>{const l={id:e.id};w.userDetail(l).then(e=>{e.positionJson&&(e.positionJson=JSON.parse(e.positionJson)),O.value=Object.assign(O.value,e),e.positionJson&&e.positionJson.map((e,l)=>(Y(e,1,l),e)),E(O.value.orgId)})},A={account:[u("请输入账号")],name:[u("请输入姓名")],sex:[u("请选择性别")],orgId:[u("请选择组织")],positionId:[u("请选择岗位")]},E=(e,l)=>{if(e){const a={orgId:e};C.value.onPage(a),R.value.onPage(),0===l&&(O.value.positionId=void 0,O.value.directorId=void 0)}else O.value.positionId=void 0,O.value.directorId=void 0},j={positionSelector:e=>w.userPositionSelector(e).then(e=>Promise.resolve(e)),userSelector:e=>w.userSelector(e).then(e=>Promise.resolve(e)),childPositionSelector:e=>w.userPositionSelector(e).then(e=>Promise.resolve(e)),childUserSelector:e=>w.userSelector(e).then(e=>Promise.resolve(e)),echoPosition:e=>n.userCenterGetPositionListByIdList(e).then(e=>Promise.resolve(e)),echoUser:e=>n.userCenterGetUserListByIdList(e).then(e=>Promise.resolve(e))},Y=async(e,l,a)=>{0===l&&O.value.positionJson.filter((l,o)=>{l.orgId===e.orgId&&o===a&&(l.positionId=void 0,l.directorId=void 0)});const o={orgId:e.orgId};y(()=>{L.value[a].onPage(o),T.value[a].onPage(o)})},z=()=>{I.value.validate().then(()=>{let e=JSON.parse(JSON.stringify(O.value));e.positionJson&&e.positionJson.length>0?e.positionJson=JSON.stringify(e.positionJson):delete e.positionJson,S.value=!0,w.submitForm(e,e.id).then(()=>{D(),x("successful")}).finally(()=>{S.value=!1})}).catch(()=>{})},M=t.dictList("GENDER"),F=t.dictList("NATION"),G=t.dictList("IDCARD_TYPE"),H=t.dictList("CULTURE_LEVEL");return o({onOpen:(e,l)=>{U.value=!0,O.value={gender:"男",positionJson:[]},l&&(O.value.orgId=l,y(()=>{E(l)})),e&&N(e),y(()=>{w.userOrgTreeSelector().then(e=>{null!==e&&(k.value=e,k.value.forEach(e=>{"0"===e.parentId&&(J.value.push(e.id),e.children&&e.children.forEach(e=>{J.value.push(e.id)}))}))})})}}),(a,o)=>{const t=s("a-input"),n=s("a-form-item"),u=s("a-col"),d=s("a-row"),r=s("a-radio-group"),y=s("a-date-picker"),w=s("a-tree-select"),x=l,N=s("PlusOutlined"),K=s("a-button"),q=s("a-tab-pane"),B=s("a-select"),V=s("a-textarea"),W=s("a-tabs"),Q=s("a-form"),X=e;return c(),i(X,{title:v(O).id?"编辑人员":"增加人员",width:800,visible:v(U),"destroy-on-close":!0,"body-style":{"padding-top":"0px"},onClose:D},{footer:p(()=>[f(K,{class:"xn-mr8",onClick:D},{default:p(()=>o[38]||(o[38]=[g("关闭")])),_:1}),f(K,{type:"primary",loading:v(S),onClick:z},{default:p(()=>o[39]||(o[39]=[g("保存")])),_:1},8,["loading"])]),default:p(()=>[f(Q,{ref_key:"formRef",ref:I,model:v(O),rules:A,layout:"vertical"},{default:p(()=>[f(W,{activeKey:v(P),"onUpdate:activeKey":o[32]||(o[32]=e=>m(P)?P.value=e:null)},{default:p(()=>[f(q,{key:"1",tab:"基础信息","force-render":""},{default:p(()=>[f(d,{gutter:16},{default:p(()=>[f(u,{span:12},{default:p(()=>[f(n,{label:"账号：",name:"account"},{default:p(()=>[f(t,{value:v(O).account,"onUpdate:value":o[0]||(o[0]=e=>v(O).account=e),placeholder:"请输入账号","allow-clear":""},null,8,["value"])]),_:1})]),_:1}),f(u,{span:12},{default:p(()=>[f(n,{label:"姓名：",name:"name"},{default:p(()=>[f(t,{value:v(O).name,"onUpdate:value":o[1]||(o[1]=e=>v(O).name=e),placeholder:"请输入姓名","allow-clear":""},null,8,["value"])]),_:1})]),_:1})]),_:1}),f(d,{gutter:16},{default:p(()=>[f(u,{span:12},{default:p(()=>[f(n,{label:"性别：",name:"gender"},{default:p(()=>[f(r,{value:v(O).gender,"onUpdate:value":o[2]||(o[2]=e=>v(O).gender=e),options:v(M)},null,8,["value","options"])]),_:1})]),_:1}),f(u,{span:12},{default:p(()=>[f(n,{label:"昵称：",name:"nickname"},{default:p(()=>[f(t,{value:v(O).nickname,"onUpdate:value":o[3]||(o[3]=e=>v(O).nickname=e),placeholder:"请输入昵称","allow-clear":""},null,8,["value"])]),_:1})]),_:1})]),_:1}),f(d,{gutter:16},{default:p(()=>[f(u,{span:12},{default:p(()=>[f(n,{label:"手机号：",name:"phone"},{default:p(()=>[f(t,{value:v(O).phone,"onUpdate:value":o[4]||(o[4]=e=>v(O).phone=e),placeholder:"请输入手机","allow-clear":""},null,8,["value"])]),_:1})]),_:1}),f(u,{span:12},{default:p(()=>[f(n,{label:"邮箱：",name:"email"},{default:p(()=>[f(t,{value:v(O).email,"onUpdate:value":o[5]||(o[5]=e=>v(O).email=e),placeholder:"请输入邮箱","allow-clear":""},null,8,["value"])]),_:1})]),_:1})]),_:1}),f(d,{gutter:16},{default:p(()=>[f(u,{span:12},{default:p(()=>[f(n,{label:"出生日期：",name:"birthday"},{default:p(()=>[f(y,{value:v(O).birthday,"onUpdate:value":o[6]||(o[6]=e=>v(O).birthday=e),"value-format":"YYYY-MM-DD",class:"xn-wd"},null,8,["value"])]),_:1})]),_:1})]),_:1}),f(d,{gutter:16},{default:p(()=>[f(u,{span:8},{default:p(()=>[f(n,{label:"选择组织：",name:"orgId"},{default:p(()=>[f(w,{value:v(O).orgId,"onUpdate:value":o[7]||(o[7]=e=>v(O).orgId=e),class:"xn-wd","dropdown-style":{maxHeight:"400px",overflow:"auto"},placeholder:"请选择组织","allow-clear":"","tree-default-expand-all":"","tree-data":v(k),"tree-default-expanded-keys":v(J),"field-names":{children:"children",label:"name",value:"id"},onChange:o[8]||(o[8]=e=>E(v(O).orgId,0))},null,8,["value","tree-data","tree-default-expanded-keys"])]),_:1})]),_:1}),f(u,{span:8},{default:p(()=>[f(n,{label:"选择职位：",name:"positionId"},{default:p(()=>[f(x,{ref_key:"xnPositionPageSelectRef",ref:C,value:v(O).positionId,"onUpdate:value":o[9]||(o[9]=e=>v(O).positionId=e),placeholder:"请选择职位","allow-clear":"","page-function":j.positionSelector,"echo-function":j.echoPosition},null,8,["value","page-function","echo-function"])]),_:1})]),_:1}),f(u,{span:8},{default:p(()=>[f(n,{label:"选择主管：",name:"directorId"},{default:p(()=>[f(x,{ref_key:"xnUserPageSelectRef",ref:R,value:v(O).directorId,"onUpdate:value":o[10]||(o[10]=e=>v(O).directorId=e),placeholder:"请选择主管","allow-clear":"","page-function":j.userSelector,"echo-function":j.echoUser},null,8,["value","page-function","echo-function"])]),_:1})]),_:1})]),_:1}),f(d,{gutter:16},{default:p(()=>[f(u,{span:8},{default:p(()=>[f(n,{label:"员工编号：",name:"empNo"},{default:p(()=>[f(t,{value:v(O).empNo,"onUpdate:value":o[11]||(o[11]=e=>v(O).empNo=e),placeholder:"请输入员工编号","allow-clear":""},null,8,["value"])]),_:1})]),_:1}),f(u,{span:8},{default:p(()=>[f(n,{label:"职级：",name:"positionLevel"},{default:p(()=>[f(t,{value:v(O).positionLevel,"onUpdate:value":o[12]||(o[12]=e=>v(O).positionLevel=e),placeholder:"请输入职级","allow-clear":""},null,8,["value"])]),_:1})]),_:1}),f(u,{span:8},{default:p(()=>[f(n,{label:"入职日期：",name:"entryDate"},{default:p(()=>[f(y,{value:v(O).entryDate,"onUpdate:value":o[13]||(o[13]=e=>v(O).entryDate=e),"value-format":"YYYY-MM-DD",class:"xn-wd"},null,8,["value"])]),_:1})]),_:1})]),_:1}),f(n,{label:"任职信息",name:"positionJson"},{default:p(()=>[f(d,{gutter:10,class:"form-row"},{default:p(()=>[f(u,{span:7,class:"form-row-con"},{default:p(()=>o[33]||(o[33]=[g(" 机构 ")])),_:1}),f(u,{span:7,class:"form-row-con"},{default:p(()=>o[34]||(o[34]=[g(" 职位 ")])),_:1}),f(u,{span:7,class:"form-row-con"},{default:p(()=>o[35]||(o[35]=[g(" 主管 ")])),_:1}),f(u,{span:3,class:"form-row-con"},{default:p(()=>[f(K,{type:"primary",onClick:o[14]||(o[14]=e=>(null===O.value.positionJson&&(O.value.positionJson=[]),void O.value.positionJson.push({orgId:void 0,positionId:void 0,directorId:void 0}))),size:"small"},{default:p(()=>[f(N),o[36]||(o[36]=g(" 增加 "))]),_:1})]),_:1})]),_:1}),(c(!0),_(h,null,b(v(O).positionJson,(e,l)=>(c(),_("div",{key:e},[f(d,{gutter:10},{default:p(()=>[f(u,{span:7},{default:p(()=>[f(n,{name:["positionJson",l,"orgId"],rules:{required:!0,message:"请选择机构"}},{default:p(()=>[f(w,{value:e.orgId,"onUpdate:value":l=>e.orgId=l,class:"xn-wd","dropdown-style":{maxHeight:"400px",overflow:"auto"},placeholder:"请选择机构","allow-clear":"","tree-default-expand-all":"","tree-data":v(k),"tree-default-expanded-keys":v(J),"field-names":{children:"children",label:"name",value:"id"},onSelect:a=>Y(e,0,l)},null,8,["value","onUpdate:value","tree-data","tree-default-expanded-keys","onSelect"])]),_:2},1032,["name"])]),_:2},1024),f(u,{span:7},{default:p(()=>[f(n,{name:["positionJson",l,"positionId"],rules:{required:!0,message:"请选择岗位"}},{default:p(()=>[f(x,{ref_for:!0,ref_key:"xnChildPositionPageSelectRef",ref:L,value:e.positionId,"onUpdate:value":l=>e.positionId=l,placeholder:"请选择岗位","allow-clear":"","page-function":j.childPositionSelector,"echo-function":j.echoPosition},null,8,["value","onUpdate:value","page-function","echo-function"])]),_:2},1032,["name"])]),_:2},1024),f(u,{span:7},{default:p(()=>[f(n,{name:["positionJson",l,"directorId"]},{default:p(()=>[f(x,{ref_for:!0,ref_key:"xnChildUserPageSelectRef",ref:T,value:e.directorId,"onUpdate:value":l=>e.directorId=l,placeholder:"请选择主管","allow-clear":"","page-function":j.childUserSelector,"echo-function":j.echoUser},null,8,["value","onUpdate:value","page-function","echo-function"])]),_:2},1032,["name"])]),_:2},1024),f(u,{span:3,class:"xn-mt4"},{default:p(()=>[f(K,{size:"small",type:"primary",danger:"",ghost:"",onClick:e=>(e=>{O.value.positionJson.splice(e,1)})(l)},{default:p(()=>o[37]||(o[37]=[g("移除")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]))),128))]),_:1})]),_:1}),f(q,{key:"2",tab:"更多信息","force-render":""},{default:p(()=>[f(d,{gutter:16},{default:p(()=>[f(u,{span:12},{default:p(()=>[f(n,{label:"民族：",name:"nation"},{default:p(()=>[f(B,{value:v(O).nation,"onUpdate:value":o[15]||(o[15]=e=>v(O).nation=e),placeholder:"请选择民族",options:v(F)},null,8,["value","options"])]),_:1})]),_:1}),f(u,{span:12},{default:p(()=>[f(n,{label:"籍贯：",name:"nativePlace"},{default:p(()=>[f(t,{value:v(O).nativePlace,"onUpdate:value":o[16]||(o[16]=e=>v(O).nativePlace=e),placeholder:"请输入籍贯","allow-clear":""},null,8,["value"])]),_:1})]),_:1})]),_:1}),f(d,{gutter:16},{default:p(()=>[f(u,{span:12},{default:p(()=>[f(n,{label:"家庭住址：",name:"homeAddress"},{default:p(()=>[f(V,{value:v(O).homeAddress,"onUpdate:value":o[17]||(o[17]=e=>v(O).homeAddress=e),placeholder:"请输入家庭住址","auto-size":{minRows:2,maxRows:5},"allow-clear":""},null,8,["value"])]),_:1})]),_:1}),f(u,{span:12},{default:p(()=>[f(n,{label:"通信地址：",name:"mailingAddress"},{default:p(()=>[f(V,{value:v(O).mailingAddress,"onUpdate:value":o[18]||(o[18]=e=>v(O).mailingAddress=e),placeholder:"请输入通信地址","auto-size":{minRows:2,maxRows:5},"allow-clear":""},null,8,["value"])]),_:1})]),_:1})]),_:1}),f(d,{gutter:16},{default:p(()=>[f(u,{span:12},{default:p(()=>[f(n,{label:"证件类型：",name:"idCardType"},{default:p(()=>[f(B,{value:v(O).idCardType,"onUpdate:value":o[19]||(o[19]=e=>v(O).idCardType=e),placeholder:"请选择证件类型",options:v(G)},null,8,["value","options"])]),_:1})]),_:1}),f(u,{span:12},{default:p(()=>[f(n,{label:"证件号码：",name:"idCardNumber"},{default:p(()=>[f(t,{value:v(O).idCardNumber,"onUpdate:value":o[20]||(o[20]=e=>v(O).idCardNumber=e),placeholder:"请输入证件号码","allow-clear":""},null,8,["value"])]),_:1})]),_:1})]),_:1}),f(d,{gutter:16},{default:p(()=>[f(u,{span:12},{default:p(()=>[f(n,{label:"文化程度：",name:"cultureLevel"},{default:p(()=>[f(B,{value:v(O).cultureLevel,"onUpdate:value":o[21]||(o[21]=e=>v(O).cultureLevel=e),placeholder:"请选择文化程度",options:v(H)},null,8,["value","options"])]),_:1})]),_:1}),f(u,{span:12},{default:p(()=>[f(n,{label:"政治面貌：",name:"politicalOutlook"},{default:p(()=>[f(t,{value:v(O).politicalOutlook,"onUpdate:value":o[22]||(o[22]=e=>v(O).politicalOutlook=e),placeholder:"请输入政治面貌","allow-clear":""},null,8,["value"])]),_:1})]),_:1})]),_:1}),f(d,{gutter:16},{default:p(()=>[f(u,{span:12},{default:p(()=>[f(n,{label:"毕业学校：",name:"college"},{default:p(()=>[f(t,{value:v(O).college,"onUpdate:value":o[23]||(o[23]=e=>v(O).college=e),placeholder:"请输入毕业学校","allow-clear":""},null,8,["value"])]),_:1})]),_:1}),f(u,{span:12},{default:p(()=>[f(n,{label:"学历：",name:"education"},{default:p(()=>[f(t,{value:v(O).education,"onUpdate:value":o[24]||(o[24]=e=>v(O).education=e),placeholder:"请输入学历","allow-clear":""},null,8,["value"])]),_:1})]),_:1})]),_:1}),f(d,{gutter:16},{default:p(()=>[f(u,{span:12},{default:p(()=>[f(n,{label:"学制：",name:"eduLength"},{default:p(()=>[f(t,{value:v(O).eduLength,"onUpdate:value":o[25]||(o[25]=e=>v(O).eduLength=e),placeholder:"请输入学制","allow-clear":""},null,8,["value"])]),_:1})]),_:1}),f(u,{span:12},{default:p(()=>[f(n,{label:"学位：",name:"degree"},{default:p(()=>[f(t,{value:v(O).degree,"onUpdate:value":o[26]||(o[26]=e=>v(O).degree=e),placeholder:"请输入学位","allow-clear":""},null,8,["value"])]),_:1})]),_:1})]),_:1}),f(d,{gutter:16},{default:p(()=>[f(u,{span:12},{default:p(()=>[f(n,{label:"家庭电话：",name:"homeTel"},{default:p(()=>[f(t,{value:v(O).homeTel,"onUpdate:value":o[27]||(o[27]=e=>v(O).homeTel=e),placeholder:"请输入家庭电话","allow-clear":""},null,8,["value"])]),_:1})]),_:1}),f(u,{span:12},{default:p(()=>[f(n,{label:"办公电话：",name:"officeTel"},{default:p(()=>[f(t,{value:v(O).officeTel,"onUpdate:value":o[28]||(o[28]=e=>v(O).officeTel=e),placeholder:"请输入办公电话","allow-clear":""},null,8,["value"])]),_:1})]),_:1})]),_:1}),f(d,{gutter:16},{default:p(()=>[f(u,{span:12},{default:p(()=>[f(n,{label:"紧急联系人：",name:"emergencyContact"},{default:p(()=>[f(t,{value:v(O).emergencyContact,"onUpdate:value":o[29]||(o[29]=e=>v(O).emergencyContact=e),placeholder:"请输入紧急联系人","allow-clear":""},null,8,["value"])]),_:1})]),_:1}),f(u,{span:12},{default:p(()=>[f(n,{label:"紧急联系电话：",name:"emergencyPhone"},{default:p(()=>[f(t,{value:v(O).emergencyPhone,"onUpdate:value":o[30]||(o[30]=e=>v(O).emergencyPhone=e),placeholder:"请输入紧急联系电话","allow-clear":""},null,8,["value"])]),_:1})]),_:1})]),_:1}),f(d,{gutter:16},{default:p(()=>[f(u,{span:12},{default:p(()=>[f(n,{label:"紧急联系人地址：",name:"emergencyAddress"},{default:p(()=>[f(V,{value:v(O).emergencyAddress,"onUpdate:value":o[31]||(o[31]=e=>v(O).emergencyAddress=e),placeholder:"请输入紧急联系人地址","auto-size":{minRows:2,maxRows:5},"allow-clear":""},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["activeKey"])]),_:1},8,["model"])]),_:1},8,["title","visible"])}}}),[["__scopeId","data-v-df394945"]]),x=Object.freeze(Object.defineProperty({__proto__:null,default:P},Symbol.toStringTag,{value:"Module"}));export{P as F,w as b,x as f};
