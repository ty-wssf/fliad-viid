import{_ as e}from"./index-r8v7tfQO.js";import{i as a,t}from"./index-DcffTgQN.js";import l from"./form-D5oIS967.js";import{v as i}from"./viidCascadePlatformApi-zqOJAWEq.js";import{k as n}from"./ant-design-vendor-CRFwT3Wn.js";import{d,r as s,f as r,a1 as o,U as c,V as m,k as f,a2 as u,u as p,G as y,Z as v,F as I,a3 as h,a6 as _}from"./vue-vendor-BzDj5Url.js";import"./formRules-B2bzcXv4.js";const k=["onClick"],C=d({name:"cascadeplatform"}),O=Object.assign(C,{setup(d){let C=s({});const O=r(),P=r(),g=r(),x={refresh:!0,height:!0,columnSetting:!0,striped:!1},D=[{title:"视图库ID",dataIndex:"systemId"},{title:"视图库名称",dataIndex:"name"},{title:"IP地址",dataIndex:"ipAddr"},{title:"端口",dataIndex:"port"},{title:"是否注册",dataIndex:"isRegister"},{title:"是否在线",dataIndex:"isOnline"},{title:"最后在线时间",dataIndex:"lastOnlineTime"},{title:"视图库类型",dataIndex:"type"}];a(["viidCascadePlatformEdit","viidCascadePlatformDelete"])&&D.push({title:"操作",dataIndex:"action",align:"center",width:"150px"});let b=r([]);const w={alert:{show:!1,clear:()=>{b=r([])}},rowSelection:{onChange:(e,a)=>{b.value=e}}},R=e=>{const a=JSON.parse(JSON.stringify(C));return i.viidCascadePlatformPage(Object.assign(e,a)).then(e=>e)},T=()=>{if(b.value.length<1)return n.warning("请选择一条或多条数据"),!1;const e=b.value.map(e=>({id:e}));i.viidCascadePlatformDelete(e).then(()=>{P.value.clearRefreshSelected()})},j=t.dictList("VIID_ONLINE"),E=t.dictList("VIID_TYPE");return(a,t)=>{const n=o("a-input"),d=o("a-form-item"),s=o("a-col"),r=o("a-select"),S=o("a-button"),L=o("a-row"),N=o("a-form"),V=o("plus-outlined"),A=e,U=o("a-space"),B=o("a-divider"),F=o("a-popconfirm"),$=o("s-table"),G=o("a-card");return m(),c(I,null,[f(G,{bordered:!1},{default:u(()=>[f(N,{ref_key:"searchFormRef",ref:O,name:"advanced_search",model:p(C),class:"ant-advanced-search-form mb-4"},{default:u(()=>[f(L,{gutter:24},{default:u(()=>[f(s,{span:6},{default:u(()=>[f(d,{label:"视图库名称",name:"name"},{default:u(()=>[f(n,{value:p(C).name,"onUpdate:value":t[0]||(t[0]=e=>p(C).name=e),placeholder:"请输入视图库名称"},null,8,["value"])]),_:1})]),_:1}),f(s,{span:6},{default:u(()=>[f(d,{label:"是否在线",name:"isOnline"},{default:u(()=>[f(r,{value:p(C).isOnline,"onUpdate:value":t[1]||(t[1]=e=>p(C).isOnline=e),placeholder:"请选择是否在线",options:p(j)},null,8,["value","options"])]),_:1})]),_:1}),f(s,{span:6},{default:u(()=>[f(d,{label:"视图库类型",name:"type"},{default:u(()=>[f(r,{value:p(C).type,"onUpdate:value":t[2]||(t[2]=e=>p(C).type=e),placeholder:"请选择视图库类型",options:p(E)},null,8,["value","options"])]),_:1})]),_:1}),f(s,{span:6},{default:u(()=>[f(S,{type:"primary",onClick:t[3]||(t[3]=e=>p(P).refresh(!0))},{default:u(()=>t[7]||(t[7]=[y("查询")])),_:1}),f(S,{style:{margin:"0 8px"},onClick:t[4]||(t[4]=()=>p(O).resetFields())},{default:u(()=>t[8]||(t[8]=[y("重置")])),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),f($,{ref_key:"table",ref:P,columns:D,data:R,alert:w.alert.show,bordered:"","row-key":e=>e.id,"tool-config":x,"row-selection":w.rowSelection},{operator:u(()=>[f(U,null,{default:u(()=>[a.hasPerm("viidCascadePlatformAdd")?(m(),_(S,{key:0,type:"primary",onClick:t[5]||(t[5]=e=>p(g).onOpen())},{icon:u(()=>[f(V)]),default:u(()=>[t[9]||(t[9]=y(" 新增 "))]),_:1})):v("",!0),a.hasPerm("viidCascadePlatformBatchDelete")?(m(),_(A,{key:1,buttonName:"批量删除",icon:"DeleteOutlined",selectedRowKeys:p(b),onBatchCallBack:T},null,8,["selectedRowKeys"])):v("",!0)]),_:1})]),bodyCell:u(({column:e,record:l})=>["isRegister"===e.dataIndex?(m(),c(I,{key:0},[y(h(a.$TOOL.dictTypeData("VIID_REGISTER",l.isRegister)),1)],64)):v("",!0),"isOnline"===e.dataIndex?(m(),c(I,{key:1},[y(h(a.$TOOL.dictTypeData("VIID_ONLINE",l.isOnline)),1)],64)):v("",!0),"type"===e.dataIndex?(m(),c(I,{key:2},[y(h(a.$TOOL.dictTypeData("VIID_TYPE",l.type)),1)],64)):v("",!0),"action"===e.dataIndex?(m(),c(I,{key:3},[a.hasPerm("viidCascadePlatformEdit")?(m(),c("a",{key:0,onClick:e=>p(g).onOpen(l)},"编辑",8,k)):v("",!0),a.hasPerm(["viidCascadePlatformEdit","viidCascadePlatformDelete"],"and")?(m(),_(B,{key:1,type:"vertical"})):v("",!0),f(F,{title:"确定要删除吗？",onConfirm:e=>(e=>{let a=[{id:e.id}];i.viidCascadePlatformDelete(a).then(()=>{P.value.refresh(!0)})})(l)},{default:u(()=>[a.hasPerm("viidCascadePlatformDelete")?(m(),_(S,{key:0,type:"link",danger:"",size:"small"},{default:u(()=>t[10]||(t[10]=[y("删除")])),_:1})):v("",!0)]),_:2},1032,["onConfirm"])],64)):v("",!0)]),_:1},8,["alert","row-key","row-selection"])]),_:1}),f(l,{ref_key:"formRef",ref:g,onSuccessful:t[6]||(t[6]=e=>p(P).refresh(!0))},null,512)],64)}}});export{O as default};
