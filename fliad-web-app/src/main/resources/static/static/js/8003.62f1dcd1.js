/*! For license information please see 8003.62f1dcd1.js.LICENSE.txt */
(self.webpackChunk_flowgram_ai_demo_free_layout=self.webpackChunk_flowgram_ai_demo_free_layout||[]).push([["8003"],{96743:function(e,n,r){var i=r(99351);e.exports={Graph:i.Graph,json:r(32377),alg:r(67174),version:i.version}},45944:function(e){e.exports=function(e){var n,r={},i=[];return e.nodes().forEach(function(s){n=[],function i(s){r.hasOwnProperty(s)||(r[s]=!0,n.push(s),e.successors(s).forEach(i),e.predecessors(s).forEach(i))}(s),n.length&&i.push(n)}),i}},53933:function(e){function n(e,n,r,s){for(var o=[[e,!1]];o.length>0;){var a=o.pop();a[1]?s.push(a[0]):r.hasOwnProperty(a[0])||(r[a[0]]=!0,o.push([a[0],!0]),i(n(a[0]),e=>o.push([e,!1])))}}function r(e,n,r,s){for(var o=[e];o.length>0;){var a=o.pop();r.hasOwnProperty(a)||(r[a]=!0,s.push(a),i(n(a),e=>o.push(e)))}}function i(e,n){for(var r=e.length;r--;)n(e[r],r,e);return e}e.exports=function(e,i,s){Array.isArray(i)||(i=[i]);var o=e.isDirected()?n=>e.successors(n):n=>e.neighbors(n),a="post"===s?n:r,l=[],h={};return i.forEach(n=>{if(!e.hasNode(n))throw Error("Graph does not have node: "+n);a(n,o,h,l)}),l}},39552:function(e,n,r){var i=r(34318);e.exports=function(e,n,r){return e.nodes().reduce(function(s,o){return s[o]=i(e,o,n,r),s},{})}},34318:function(e,n,r){var i=r(36316);e.exports=function(e,n,r,o){return function(e,n,r,s){var o,a,l={},h=new i,c=function(e){var n=e.v!==o?e.v:e.w,i=l[n],s=r(e),c=a.distance+s;if(s<0)throw Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+s);c<i.distance&&(i.distance=c,i.predecessor=o,h.decrease(n,c))};for(e.nodes().forEach(function(e){var r=e===n?0:1/0;l[e]={distance:r},h.add(e,r)});h.size()>0&&(a=l[o=h.removeMin()]).distance!==1/0;)s(o).forEach(c);return l}(e,String(n),r||s,o||function(n){return e.outEdges(n)})};var s=()=>1},52839:function(e,n,r){var i=r(34168);e.exports=function(e){return i(e).filter(function(n){return n.length>1||1===n.length&&e.hasEdge(n[0],n[0])})}},88929:function(e){e.exports=function(e,r,i){var s,o,a,l,h;return s=e,o=r||n,a=i||function(n){return e.outEdges(n)},l={},(h=s.nodes()).forEach(function(e){l[e]={},l[e][e]={distance:0},h.forEach(function(n){e!==n&&(l[e][n]={distance:1/0})}),a(e).forEach(function(n){var r=n.v===e?n.w:n.v,i=o(n);l[e][r]={distance:i,predecessor:e}})}),h.forEach(function(e){var n=l[e];h.forEach(function(r){var i=l[r];h.forEach(function(r){var s=i[e],o=n[r],a=i[r],l=s.distance+o.distance;l<a.distance&&(a.distance=l,a.predecessor=o.predecessor)})})}),l};var n=()=>1},67174:function(e,n,r){e.exports={components:r(45944),dijkstra:r(34318),dijkstraAll:r(39552),findCycles:r(52839),floydWarshall:r(88929),isAcyclic:r(7681),postorder:r(67448),preorder:r(79439),prim:r(15456),tarjan:r(34168),topsort:r(99441)}},7681:function(e,n,r){var i=r(99441);e.exports=function(e){try{i(e)}catch(e){if(e instanceof i.CycleException)return!1;throw e}return!0}},67448:function(e,n,r){var i=r(53933);e.exports=function(e,n){return i(e,n,"post")}},79439:function(e,n,r){var i=r(53933);e.exports=function(e,n){return i(e,n,"pre")}},15456:function(e,n,r){var i=r(46239),s=r(36316);e.exports=function(e,n){var r,o=new i,a={},l=new s;function h(e){var i=e.v===r?e.w:e.v,s=l.priority(i);if(void 0!==s){var o=n(e);o<s&&(a[i]=r,l.decrease(i,o))}}if(0===e.nodeCount())return o;e.nodes().forEach(function(e){l.add(e,1/0),o.setNode(e)}),l.decrease(e.nodes()[0],0);for(var c=!1;l.size()>0;){if(r=l.removeMin(),a.hasOwnProperty(r))o.setEdge(r,a[r]);else if(c)throw Error("Input graph is not connected: "+e);else c=!0;e.nodeEdges(r).forEach(h)}return o}},34168:function(e){e.exports=function(e){var n=0,r=[],i={},s=[];return e.nodes().forEach(function(o){i.hasOwnProperty(o)||function o(a){var l=i[a]={onStack:!0,lowlink:n,index:n++};if(r.push(a),e.successors(a).forEach(function(e){i.hasOwnProperty(e)?i[e].onStack&&(l.lowlink=Math.min(l.lowlink,i[e].index)):(o(e),l.lowlink=Math.min(l.lowlink,i[e].lowlink))}),l.lowlink===l.index){var h,c=[];do i[h=r.pop()].onStack=!1,c.push(h);while(a!==h);s.push(c)}}(o)}),s}},99441:function(e){function n(e){var n={},i={},s=[];if(e.sinks().forEach(function o(a){if(i.hasOwnProperty(a))throw new r;n.hasOwnProperty(a)||(i[a]=!0,n[a]=!0,e.predecessors(a).forEach(o),delete i[a],s.push(a))}),Object.keys(n).length!==e.nodeCount())throw new r;return s}class r extends Error{constructor(){super(...arguments)}}e.exports=n,n.CycleException=r},36316:function(e){e.exports=class{_arr=[];_keyIndices={};size(){return this._arr.length}keys(){return this._arr.map(function(e){return e.key})}has(e){return this._keyIndices.hasOwnProperty(e)}priority(e){var n=this._keyIndices[e];if(void 0!==n)return this._arr[n].priority}min(){if(0===this.size())throw Error("Queue underflow");return this._arr[0].key}add(e,n){var r=this._keyIndices;if(e=String(e),!r.hasOwnProperty(e)){var i=this._arr,s=i.length;return r[e]=s,i.push({key:e,priority:n}),this._decrease(s),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key}decrease(e,n){var r=this._keyIndices[e];if(n>this._arr[r].priority)throw Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[r].priority+" New: "+n);this._arr[r].priority=n,this._decrease(r)}_heapify(e){var n=this._arr,r=2*e,i=r+1,s=e;r<n.length&&(s=n[r].priority<n[s].priority?r:s,i<n.length&&(s=n[i].priority<n[s].priority?i:s),s!==e&&(this._swap(e,s),this._heapify(s)))}_decrease(e){for(var n,r=this._arr,i=r[e].priority;0!==e&&!(r[n=e>>1].priority<i);)this._swap(e,n),e=n}_swap(e,n){var r=this._arr,i=this._keyIndices,s=r[e],o=r[n];r[e]=o,r[n]=s,i[o.key]=e,i[s.key]=n}}},46239:function(e){"use strict";function n(e,n){e[n]?e[n]++:e[n]=1}function r(e,n){--e[n]||delete e[n]}function i(e,n,r,i){var s=""+n,o=""+r;if(!e&&s>o){var a=s;s=o,o=a}return s+"\x01"+o+"\x01"+(void 0===i?"\0":i)}function s(e,n){return i(e,n.v,n.w,n.name)}e.exports=class{_isDirected=!0;_isMultigraph=!1;_isCompound=!1;_label;_defaultNodeLabelFn=()=>void 0;_defaultEdgeLabelFn=()=>void 0;_nodes={};_in={};_preds={};_out={};_sucs={};_edgeObjs={};_edgeLabels={};_nodeCount=0;_edgeCount=0;_parent;_children;constructor(e){e&&(this._isDirected=!e.hasOwnProperty("directed")||e.directed,this._isMultigraph=!!e.hasOwnProperty("multigraph")&&e.multigraph,this._isCompound=!!e.hasOwnProperty("compound")&&e.compound),this._isCompound&&(this._parent={},this._children={},this._children["\0"]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(e){return this._label=e,this}graph(){return this._label}setDefaultNodeLabel(e){return this._defaultNodeLabelFn=e,"function"!=typeof e&&(this._defaultNodeLabelFn=()=>e),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var e=this;return this.nodes().filter(n=>0===Object.keys(e._in[n]).length)}sinks(){var e=this;return this.nodes().filter(n=>0===Object.keys(e._out[n]).length)}setNodes(e,n){var r=arguments,i=this;return e.forEach(function(e){r.length>1?i.setNode(e,n):i.setNode(e)}),this}setNode(e,n){return this._nodes.hasOwnProperty(e)?arguments.length>1&&(this._nodes[e]=n):(this._nodes[e]=arguments.length>1?n:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount),this}node(e){return this._nodes[e]}hasNode(e){return this._nodes.hasOwnProperty(e)}removeNode(e){var n=this;if(this._nodes.hasOwnProperty(e)){var r=e=>n.removeEdge(n._edgeObjs[e]);delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],this.children(e).forEach(function(e){n.setParent(e)}),delete this._children[e]),Object.keys(this._in[e]).forEach(r),delete this._in[e],delete this._preds[e],Object.keys(this._out[e]).forEach(r),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this}setParent(e,n){if(!this._isCompound)throw Error("Cannot set parent in a non-compound graph");if(void 0===n)n="\0";else{n+="";for(var r=n;void 0!==r;r=this.parent(r))if(r===e)throw Error("Setting "+n+" as parent of "+e+" would create a cycle");this.setNode(n)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=n,this._children[n][e]=!0,this}_removeFromParentsChildList(e){delete this._children[this._parent[e]][e]}parent(e){if(this._isCompound){var n=this._parent[e];if("\0"!==n)return n}}children(e="\0"){if(this._isCompound){var n=this._children[e];if(n)return Object.keys(n)}else if("\0"===e)return this.nodes();else if(this.hasNode(e))return[]}predecessors(e){var n=this._preds[e];if(n)return Object.keys(n)}successors(e){var n=this._sucs[e];if(n)return Object.keys(n)}neighbors(e){var n=this.predecessors(e);if(n){let i=new Set(n);for(var r of this.successors(e))i.add(r);return Array.from(i.values())}}isLeaf(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length}filterNodes(e){var n=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});n.setGraph(this.graph());var r=this;Object.entries(this._nodes).forEach(function([r,i]){e(r)&&n.setNode(r,i)}),Object.values(this._edgeObjs).forEach(function(e){n.hasNode(e.v)&&n.hasNode(e.w)&&n.setEdge(e,r.edge(e))});var i={};return this._isCompound&&n.nodes().forEach(e=>n.setParent(e,function e(s){var o=r.parent(s);return void 0===o||n.hasNode(o)?(i[s]=o,o):o in i?i[o]:e(o)}(e))),n}setDefaultEdgeLabel(e){return this._defaultEdgeLabelFn=e,"function"!=typeof e&&(this._defaultEdgeLabelFn=()=>e),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(e,n){var r=this,i=arguments;return e.reduce(function(e,s){return i.length>1?r.setEdge(e,s,n):r.setEdge(e,s),s}),this}setEdge(){var e,r,s,o,a=!1,l=arguments[0];"object"==typeof l&&null!==l&&"v"in l?(e=l.v,r=l.w,s=l.name,2==arguments.length&&(o=arguments[1],a=!0)):(e=l,r=arguments[1],s=arguments[3],arguments.length>2&&(o=arguments[2],a=!0)),e=""+e,r=""+r,void 0!==s&&(s=""+s);var h=i(this._isDirected,e,r,s);if(this._edgeLabels.hasOwnProperty(h))return a&&(this._edgeLabels[h]=o),this;if(void 0!==s&&!this._isMultigraph)throw Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(r),this._edgeLabels[h]=a?o:this._defaultEdgeLabelFn(e,r,s);var c=function(e,n,r,i){var s=""+n,o=""+r;if(!e&&s>o){var a=s;s=o,o=a}var l={v:s,w:o};return i&&(l.name=i),l}(this._isDirected,e,r,s);return e=c.v,r=c.w,Object.freeze(c),this._edgeObjs[h]=c,n(this._preds[r],e),n(this._sucs[e],r),this._in[r][h]=c,this._out[e][h]=c,this._edgeCount++,this}edge(e,n,r){var o=1==arguments.length?s(this._isDirected,arguments[0]):i(this._isDirected,e,n,r);return this._edgeLabels[o]}edgeAsObj(){let e=this.edge(...arguments);return"object"!=typeof e?{label:e}:e}hasEdge(e,n,r){var o=1==arguments.length?s(this._isDirected,arguments[0]):i(this._isDirected,e,n,r);return this._edgeLabels.hasOwnProperty(o)}removeEdge(e,n,o){var a=1==arguments.length?s(this._isDirected,arguments[0]):i(this._isDirected,e,n,o),l=this._edgeObjs[a];return l&&(e=l.v,n=l.w,delete this._edgeLabels[a],delete this._edgeObjs[a],r(this._preds[n],e),r(this._sucs[e],n),delete this._in[n][a],delete this._out[e][a],this._edgeCount--),this}inEdges(e,n){var r=this._in[e];if(r){var i=Object.values(r);return n?i.filter(e=>e.v===n):i}}outEdges(e,n){var r=this._out[e];if(r){var i=Object.values(r);return n?i.filter(e=>e.w===n):i}}nodeEdges(e,n){var r=this.inEdges(e,n);if(r)return r.concat(this.outEdges(e,n))}}},99351:function(e,n,r){e.exports={Graph:r(46239),version:r(19207)}},32377:function(e,n,r){var i=r(46239);e.exports={write:function(e){var n,r,i={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:(n=e).nodes().map(function(e){var r=n.node(e),i=n.parent(e),s={v:e};return void 0!==r&&(s.value=r),void 0!==i&&(s.parent=i),s}),edges:(r=e).edges().map(function(e){var n=r.edge(e),i={v:e.v,w:e.w};return void 0!==e.name&&(i.name=e.name),void 0!==n&&(i.value=n),i})};return void 0!==e.graph()&&(i.value=structuredClone(e.graph())),i},read:function(e){var n=new i(e.options).setGraph(e.value);return e.nodes.forEach(function(e){n.setNode(e.v,e.value),e.parent&&n.setParent(e.v,e.parent)}),e.edges.forEach(function(e){n.setEdge({v:e.v,w:e.w,name:e.name},e.value)}),n}}},19207:function(e){e.exports="2.2.2"},96165:function(e,n,r){"use strict";r.d(n,{_:()=>i});let i="semi"},79613:function(e,n,r){"use strict";r.d(n,{A:()=>l});var i=r(63950),s=r.n(i),o=r(39290);class a{static get cssClasses(){return{}}static get strings(){return{}}static get numbers(){return{}}static get defaultAdapter(){return{getProp:s(),getProps:s(),getState:s(),getStates:s(),setState:s(),getContext:s(),getContexts:s(),getCache:s(),setCache:s(),getCaches:s(),stopPropagation:s(),persistEvent:s()}}constructor(e){this._adapter=Object.assign(Object.assign({},a.defaultAdapter),e)}getProp(e){return this._adapter.getProp(e)}getProps(){return this._adapter.getProps()}getState(e){return this._adapter.getState(e)}getStates(){return this._adapter.getStates()}setState(e,n){return this._adapter.setState(Object.assign({},e),n)}getContext(e){return this._adapter.getContext(e)}getContexts(){return this._adapter.getContexts()}getCaches(){return this._adapter.getCaches()}getCache(e){return this._adapter.getCache(e)}setCache(e,n){return e&&this._adapter.setCache(e,n)}stopPropagation(e){this._adapter.stopPropagation(e)}_isControlledComponent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"value";return e in this.getProps()}_isInProps(e){return e in this.getProps()}init(e){}destroy(){}log(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(0,o.A)(e,...r)}_persistEvent(e){this._adapter.persistEvent(e)}}let l=a},51188:function(e,n,r){"use strict";r.d(n,{P$:()=>o,Y7:()=>s,nL:()=>a});var i=r(96165);let s={PREFIX:`${i._}-input`},o={SIZE:["small","large","default"],DEFAULT_SIZE:"default",STATUS:["default","error","warning","success"],CLEARBTN_CLICKED_EVENT_FLAG:"__fromClearBtn",MODE:["password"]},a={}},45789:function(e,n,r){"use strict";r.d(n,{A:()=>o});var i=r(1882),s=r.n(i);function o(e){let{value:n,maxLength:r,getValueLength:i}=e;if(!s()(i))return n.slice(0,r);{let e=0,s=n.length;for(;e<s;){let o=e+Math.floor((s-e)/2);i(n.slice(0,o+1))>r?s=o:e=o+1}return n.slice(0,e)}}},81783:function(e,n,r){"use strict";function i(e){return Object.keys(e).reduce((n,r)=>("data-"===r.substr(0,5)&&(n[r]=e[r]),n),{})}r.d(n,{A:()=>i})},7460:function(e,n,r){"use strict";function i(e){try{return e instanceof HTMLElement}catch(n){return"object"==typeof e&&1===e.nodeType&&"object"==typeof e.style&&"object"==typeof e.ownerDocument}}r.d(n,{A:()=>i})},24330:function(e,n,r){"use strict";r.d(n,{Ay:()=>o,Qg:()=>s,jD:()=>i});let i="Enter",s="Escape",o={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229}},39290:function(e,n,r){"use strict";r.d(n,{A:()=>o});var i=r(58156),s=r.n(i);let o=function(e){if("development"===s()(process,"env.NODE_ENV")){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];console.log(e,...r)}}},41393:function(e,n,r){"use strict";r.d(n,{A:()=>c,T:()=>h});var i=r(96540),s=r(53978),o=r.n(s),a=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};let l=i.forwardRef((e,n)=>{let{svg:r,spin:s=!1,rotate:l,style:h,className:c,prefixCls:u="semi",type:d,size:p="default"}=e,f=a(e,["svg","spin","rotate","style","className","prefixCls","type","size"]),g=o()(`${u}-icon`,{[`${u}-icon-extra-small`]:"extra-small"===p,[`${u}-icon-small`]:"small"===p,[`${u}-icon-default`]:"default"===p,[`${u}-icon-large`]:"large"===p,[`${u}-icon-extra-large`]:"extra-large"===p,[`${u}-icon-spinning`]:!0===s,[`${u}-icon-${d}`]:!!d},c),m={};return Number.isSafeInteger(l)&&(m.transform=`rotate(${l}deg)`),Object.assign(m,h),i.createElement("span",Object.assign({role:"img",ref:n,"aria-label":d,className:g,style:m},f),r)});l.elementType="Icon";let h=(e,n)=>{let r=i.forwardRef((r,s)=>i.createElement(l,Object.assign({svg:i.createElement(e),type:n,ref:s},r)));return r.elementType="Icon",r},c=l},87686:function(e,n,r){"use strict";r.d(n,{A:()=>s});var i=r(96540);let s=(0,r(41393).T)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.08 7.6a1.5 1.5 0 0 1 2.12 0l5.66 5.65 5.66-5.65a1.5 1.5 0 1 1 2.12 2.12l-6.72 6.72a1.5 1.5 0 0 1-2.12 0L4.08 9.72a1.5 1.5 0 0 1 0-2.12Z",fill:"currentColor"}))},"chevron_down")},69230:function(e,n,r){"use strict";r.d(n,{A:()=>s});var i=r(96540);let s=(0,r(41393).T)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.44 19.8a1.5 1.5 0 0 1 0-2.13l5.66-5.65-5.66-5.66a1.5 1.5 0 1 1 2.12-2.12l6.72 6.72a1.5 1.5 0 0 1 0 2.12L9.56 19.8a1.5 1.5 0 0 1-2.12 0Z",fill:"currentColor"}))},"chevron_right")},89480:function(e,n,r){"use strict";r.d(n,{A:()=>s});var i=r(96540);let s=(0,r(41393).T)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23a11 11 0 1 0 0-22 11 11 0 0 0 0 22Zm5.04-6.14a1.5 1.5 0 0 1-2.13.04l-2.87-2.78L9.26 17A1.5 1.5 0 0 1 7.1 14.9l2.78-2.87L7 9.26A1.5 1.5 0 1 1 9.1 7.1l2.87 2.78L14.74 7A1.5 1.5 0 0 1 16.9 9.1l-2.78 2.87L17 14.74c.6.58.61 1.53.04 2.12Z",fill:"currentColor"}))},"clear")},25769:function(e,n,r){"use strict";r.d(n,{A:()=>s});var i=r(96540);let s=(0,r(41393).T)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{d:"M17.66 19.78a1.5 1.5 0 0 0 2.12-2.12L14.12 12l5.66-5.66a1.5 1.5 0 0 0-2.12-2.12L12 9.88 6.34 4.22a1.5 1.5 0 1 0-2.12 2.12L9.88 12l-5.66 5.66a1.5 1.5 0 0 0 2.12 2.12L12 14.12l5.66 5.66Z",fill:"currentColor"}))},"close")},53860:function(e,n,r){"use strict";r.d(n,{A:()=>s});var i=r(96540);let s=(0,r(41393).T)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{d:"M7 4c0-1.1.9-2 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2h-1V8c0-2-1-3-3-3H7V4Z",fill:"currentColor"}),i.createElement("path",{d:"M5 7a2 2 0 0 0-2 2v10c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2H5Z",fill:"currentColor"}))},"copy")},15369:function(e,n,r){"use strict";r.d(n,{A:()=>s});var i=r(96540);let s=(0,r(41393).T)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23 12a11 11 0 1 1-22 0 11 11 0 0 1 22 0Zm-11 9a9 9 0 1 0 0-18 9 9 0 0 0 0 18ZM8.11 8.11a1 1 0 0 1 1.42 0L12 10.6l2.47-2.48a1 1 0 1 1 1.42 1.42L13.4 12l2.48 2.47a1 1 0 0 1-1.42 1.42L12 13.4 9.53 15.9a1 1 0 0 1-1.42-1.42L10.6 12 8.1 9.53a1 1 0 0 1 0-1.42Z",fill:"currentColor"}))},"cross_circle_stroked")},61880:function(e,n,r){"use strict";r.d(n,{A:()=>s});var i=r(96540);let s=(0,r(41393).T)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 5V4h4v1h-4ZM8 5V3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2h4a1 1 0 1 1 0 2h-1v14a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V7H4a1 1 0 0 1 0-2h4Zm7 2H7v13h10V7h-2ZM9 9.5c0-.28.22-.5.5-.5h1c.28 0 .5.22.5.5v7a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-7Zm4 0c0-.28.22-.5.5-.5h1c.28 0 .5.22.5.5v7a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-7Z",fill:"currentColor"}))},"delete_stroked")},41945:function(e,n,r){"use strict";r.d(n,{A:()=>s});var i=r(96540);let s=(0,r(41393).T)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{d:"M10 2a1.5 1.5 0 0 1 0 3H7.12l3.94 3.94a1.5 1.5 0 0 1-2.12 2.12L5 7.12V10a1.5 1.5 0 0 1-3 0V3.5C2 2.67 2.67 2 3.5 2H10Z",fill:"currentColor"}),i.createElement("path",{d:"M19 14a1.5 1.5 0 0 1 3 0v6.5c0 .83-.67 1.5-1.5 1.5H14a1.5 1.5 0 0 1 0-3h2.88l-3.94-3.94a1.5 1.5 0 0 1 2.12-2.12L19 16.88V14Z",fill:"currentColor"}))},"expand")},87315:function(e,n,r){"use strict";r.d(n,{A:()=>s});var i=r(96540);let s=(0,r(41393).T)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{d:"M9 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",fill:"currentColor"}),i.createElement("path",{d:"M9 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",fill:"currentColor"}),i.createElement("path",{d:"M11 19a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z",fill:"currentColor"}),i.createElement("path",{d:"M15 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",fill:"currentColor"}),i.createElement("path",{d:"M17 12a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z",fill:"currentColor"}),i.createElement("path",{d:"M15 21a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",fill:"currentColor"}))},"handle")},71725:function(e,n,r){"use strict";r.d(n,{A:()=>s});var i=r(96540);let s=(0,r(41393).T)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23a11 11 0 1 0 0-22 11 11 0 0 0 0 22Zm2-16a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm-5 3.75c0-.41.34-.75.75-.75h2.75a1 1 0 0 1 1 1v5.5h.75a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5h.75v-5h-.75a.75.75 0 0 1-.75-.75Z",fill:"currentColor"}))},"info_circle")},91662:function(e,n,r){"use strict";r.d(n,{A:()=>s});var i=r(96540);let s=(0,r(41393).T)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2a6.5 6.5 0 0 0-6.5 6.5V10H5a2 2 0 0 0-2 2v8c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2h-.5V8.5A6.5 6.5 0 0 0 12 2Zm3.5 8V8.5a3.5 3.5 0 1 0-7 0V10h7Z",fill:"currentColor"}))},"lock")},52601:function(e,n,r){"use strict";r.d(n,{A:()=>s});var i=r(96540);let s=(0,r(41393).T)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{d:"M2 12c0-.83.67-1.5 1.5-1.5h17a1.5 1.5 0 0 1 0 3h-17A1.5 1.5 0 0 1 2 12Z",fill:"currentColor"}))},"minus")},99832:function(e,n,r){"use strict";r.d(n,{A:()=>s});var i=r(96540);let s=(0,r(41393).T)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{d:"M7 12a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0Z",fill:"currentColor"}),i.createElement("path",{d:"M14.5 12a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0Z",fill:"currentColor"}),i.createElement("path",{d:"M19.5 14.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z",fill:"currentColor"}))},"more")},2971:function(e,n,r){"use strict";r.d(n,{A:()=>s});var i=r(96540);let s=(0,r(41393).T)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{d:"M5 2.9a1 1 0 0 1 1.57-.82l13.23 9.1a1 1 0 0 1 0 1.64l-13.23 9.1A1 1 0 0 1 5 21.1V2.9Z",fill:"currentColor"}))},"play")},9217:function(e,n,r){"use strict";r.d(n,{A:()=>s});var i=r(96540);let s=(0,r(41393).T)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{d:"M20.5 13.5a1.5 1.5 0 0 0 0-3h-7v-7a1.5 1.5 0 0 0-3 0v7h-7a1.5 1.5 0 0 0 0 3h7v7a1.5 1.5 0 0 0 3 0v-7h7Z",fill:"currentColor"}))},"plus")},42773:function(e,n,r){"use strict";r.d(n,{A:()=>s});var i=r(96540);let s=(0,r(41393).T)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.44 2.44a1.5 1.5 0 0 0 0 2.12L16.88 7H9.25C5.16 7 2 10.58 2 14.5S5.16 22 9.25 22h3.25a1.5 1.5 0 0 0 0-3H9.25C6.98 19 5 16.93 5 14.5S6.98 10 9.25 10h7.63l-2.44 2.44a1.5 1.5 0 0 0 2.12 2.12l5-5a1.5 1.5 0 0 0 0-2.12l-5-5a1.5 1.5 0 0 0-2.12 0Z",fill:"currentColor"}))},"redo")},97424:function(e,n,r){"use strict";r.d(n,{A:()=>s});var i=r(96540);let s=(0,r(41393).T)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{d:"M2.44 2.44a1.5 1.5 0 0 0 0 2.12L6.88 9H4a1.5 1.5 0 0 0 0 3h6.5a1.5 1.5 0 0 0 1.5-1.5V4a1.5 1.5 0 0 0-3 0v2.88L4.56 2.44a1.5 1.5 0 0 0-2.12 0Z",fill:"currentColor"}),i.createElement("path",{d:"M20 12a1.5 1.5 0 0 1 0 3h-2.88l4.44 4.44a1.5 1.5 0 1 1-2.12 2.12L15 17.12V20a1.5 1.5 0 1 1-3 0v-6.5a1.5 1.5 0 0 1 1.5-1.5H20Z",fill:"currentColor"}))},"shrink")},5434:function(e,n,r){"use strict";r.d(n,{A:()=>s});var i=r(96540);let s=(0,r(41393).T)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{d:"M6.95 7.72h10.13c.4 0 .64.45.42.78l-5.07 7.6a.5.5 0 0 1-.83 0L6.54 8.5a.5.5 0 0 1 .41-.78Z",fill:"currentColor"}))},"small_triangle_down")},63891:function(e,n,r){"use strict";r.d(n,{A:()=>s});var i=r(96540);let s=(0,r(41393).T)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{d:"M16.32 6.96v10.13a.5.5 0 0 1-.78.41l-7.6-5.06a.5.5 0 0 1 0-.83l7.6-5.07a.5.5 0 0 1 .78.42Z",fill:"currentColor"}))},"small_triangle_left")},82661:function(e,n,r){"use strict";r.d(n,{A:()=>s});var i=r(96540);let s=(0,r(41393).T)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("g",{clipPath:"url(#clip_spin)"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.2 3.79A8.5 8.5 0 0 0 5 16.81a1.5 1.5 0 1 1-2.48 1.7 11.5 11.5 0 1 1 20.6-3.53 1.5 1.5 0 0 1-2.91-.78A8.5 8.5 0 0 0 14.2 3.79Z",fill:"currentColor"})),i.createElement("defs",null,i.createElement("radialGradient",{cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(12 12) rotate(15) scale(9.5 9.51825)"},i.createElement("stop",null),i.createElement("stop",{offset:.301257,stopOpacity:0,stopColor:"currentColor"}),i.createElement("stop",{offset:.466753,stopOpacity:1,stopColor:"currentColor"})),i.createElement("clipPath",{id:"clip_spin"},i.createElement("rect",{width:24,height:24,fill:"currentColor"}))))},"spin")},88751:function(e,n,r){"use strict";r.d(n,{A:()=>s});var i=r(96540);let s=(0,r(41393).T)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.56 2.44a1.5 1.5 0 0 1 0 2.12L7.12 7h7.63C18.84 7 22 10.58 22 14.5S18.84 22 14.75 22H11.5a1.5 1.5 0 0 1 0-3h3.25c2.27 0 4.25-2.07 4.25-4.5S17.02 10 14.75 10H7.12l2.44 2.44a1.5 1.5 0 0 1-2.12 2.12l-5-5a1.5 1.5 0 0 1 0-2.12l5-5a1.5 1.5 0 0 1 2.12 0Z",fill:"currentColor"}))},"undo")},71417:function(e,n,r){"use strict";r.d(n,{A:()=>s});var i=r(96540);let s=(0,r(41393).T)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{d:"M5.5 7.5A6.5 6.5 0 0 1 18.48 7h-3.02a3.5 3.5 0 0 0-6.96.5V10H19a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h.5V7.5Z",fill:"currentColor"}))},"unlock")},7459:function(e,n,r){"use strict";r.d(n,{Ay$:()=>i});let i=r(41393).A},39944:function(e,n,r){"use strict";r.d(n,{A:()=>l});var i=r(96540),s=r(39290),o=r(81783);let{hasOwnProperty:a}=Object.prototype;class l extends i.Component{constructor(e){super(e),this.isControlled=e=>!!(e&&this.props&&"object"==typeof this.props&&a.call(this.props,e)),this.setStateAsync=e=>new Promise(n=>{this.setState(e,n)}),this.cache={},this.foundation=null}componentDidMount(){this.foundation&&"function"==typeof this.foundation.init&&this.foundation.init()}componentWillUnmount(){this.foundation&&"function"==typeof this.foundation.destroy&&this.foundation.destroy(),this.cache={}}get adapter(){return{getContext:e=>{if(this.context&&e)return this.context[e]},getContexts:()=>this.context,getProp:e=>this.props[e],getProps:()=>this.props,getState:e=>this.state[e],getStates:()=>this.state,setState:(e,n)=>this.setState(Object.assign({},e),n),getCache:e=>e&&this.cache[e],getCaches:()=>this.cache,setCache:(e,n)=>e&&(this.cache[e]=n),stopPropagation:e=>{try{e.stopPropagation(),e.nativeEvent&&e.nativeEvent.stopImmediatePropagation()}catch(e){}},persistEvent:e=>{e&&e.persist&&"function"==typeof e.persist&&e.persist()}}}log(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(0,s.A)(e,...r)}getDataAttr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return(0,o.A)(e)}}l.propTypes={},l.defaultProps={}},97606:function(e,n,r){"use strict";r.d(n,{Ct:()=>function e(n,r){return h(this,void 0,void 0,function*(){return 0===r?void(yield n()):void(yield new Promise(i=>{setTimeout(()=>h(this,void 0,void 0,function*(){yield e(n,r-1),i()}),0)}))})},XJ:()=>f,bQ:()=>g,bq:()=>d,dG:()=>c,iq:()=>p,uR:()=>u});var i=r(58156),s=r.n(i);r(63560),r(89647);var o=r(96540),a=r(7460),l=r(86744),h=function(e,n,r,i){return new(r||(r=Promise))(function(s,o){function a(e){try{h(i.next(e))}catch(e){o(e)}}function l(e){try{h(i.throw(e))}catch(e){o(e)}}function h(e){var n;e.done?s(e.value):((n=e.value)instanceof r?n:new r(function(e){e(n)})).then(a,l)}h((i=i.apply(e,n||[])).next())})};function c(e,n){e&&"function"==typeof e.stopPropagation&&e.stopPropagation(),!n&&e.nativeEvent&&"function"==typeof e.nativeEvent.stopImmediatePropagation&&e.nativeEvent.stopImmediatePropagation()}let u=e=>o.isValidElement(e)&&"Icon"===s()(e.type,"elementType");function d(){return document?document.activeElement:null}function p(e){return(0,a.A)(e)?Array.from(e.querySelectorAll("input:not([disabled]):not([tabindex='-1']),textarea:not([disabled]):not([tabindex='-1']),button:not([disabled]):not([tabindex='-1']),a[href]:not([tabindex='-1']),select:not([disabled]):not([tabindex='-1']),area[href]:not([tabindex='-1']),iframe:not([tabindex='-1']),object:not([tabindex='-1']),*[tabindex]:not([tabindex='-1']),*[contenteditable]:not([tabindex='-1'])")):[]}function f(){return globalThis&&"[object Window]"===Object.prototype.toString.call(globalThis)?window.innerWidth-document.documentElement.clientWidth:0}function g(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=()=>{var n,r;return(null==(r=null==(n=null===l.A||void 0===l.A?void 0:l.A.config)?void 0:n.overrideDefaultProps)?void 0:r[e])||{}};return new Proxy(Object.assign({},n),{get(e,n,i){let s=r();return n in s?s[n]:Reflect.get(e,n,i)},set:(e,n,r,i)=>Reflect.set(e,n,r,i),ownKeys(){let e=r();return Array.from(new Set([...Reflect.ownKeys(n),...Object.keys(e)]))},getOwnPropertyDescriptor(e,n){let i=r();return n in i?Reflect.getOwnPropertyDescriptor(i,n):Reflect.getOwnPropertyDescriptor(e,n)}})}},86744:function(e,n,r){"use strict";r.d(n,{A:()=>i});let i=new class{constructor(){this.config={}}}},12156:function(e,n,r){"use strict";let i,s;r.d(n,{y8:()=>ha,sG:()=>op,m_:()=>nm,f7:()=>hF,o5:()=>hG,vw:()=>rC,AM:()=>nx,PH:()=>hI,dO:()=>lL,pd:()=>t2.A,e2:()=>eq,tU:()=>l0,ms:()=>oD,YI:()=>o9,Ex:()=>ew,$n:()=>ez,Sc:()=>n9,cG:()=>oy,In:()=>oI,l6:()=>lc,K0:()=>ej,DD:()=>lv,EA:()=>lN,Nt:()=>ou,fs:()=>oW,eu:()=>eu,vx:()=>oa});var o,a,l,h,c,u,d,p,f,g,m,y,O,b,x,w,S,_,k,C,E,T,P,A,M,N,D,I,$,R,L,Q,j,V,z=r(96540),B=r(53978),F=r.n(B),Z=r(5556),q=r.n(Z),W=r(96165);let X={PREFIX:`${W._}-avatar`},U=["circle","square"],Y=["extra-extra-small","extra-small","small","default","medium","large","extra-large"];var G=r(79613);function H(e,n){e&&console.warn(`Warning: ${n}`)}class K extends G.A{constructor(e){super(Object.assign({},e)),this.handleFocusVisible=e=>{let{target:n}=e;try{n.matches(":focus-visible")&&this._adapter.setFocusVisible(!0)}catch(e){H(!0,"Warning: [Semi Avatar] The current browser does not support the focus-visible")}},this.handleBlur=()=>{this._adapter.setFocusVisible(!1)},this.changeScale=()=>{let{gap:e}=this.getProps(),n=this._adapter.getAvatarNode(),r=null==n?void 0:n.firstChild,[i,s]=[(null==n?void 0:n.offsetWidth)||0,(null==r?void 0:r.offsetWidth)||0];0!==i&&0!==s&&2*e<i&&this._adapter.setScale(i-2*e>s?1:(i-2*e)/s)}}init(){let{children:e}=this.getProps();"string"==typeof e&&this.changeScale()}destroy(){}handleImgLoadError(){let{onError:e}=this.getProps();!1!==(e?e():void 0)&&this._adapter.notifyImgState(!1)}handleEnter(e){this._adapter.notifyEnter(e)}handleLeave(e){this._adapter.notifyLeave(e)}}function J(){}var ee=r(39944),et=r(58156),en=r.n(et);function er(e){e.stopPropagation(),e.preventDefault()}function ei(e,n){for(let r=0;r<e.length;r++)e[r]===n?(e[r].tabIndex=0,e[r].focus()):e[r].tabIndex=-1}var es=r(97606);function eo(e){return`${e}-${new Date().getTime()}-${Math.random()}`}function ea(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{prefix:n="",length:r=7}=e,i="0123456789abcdefghijklmnopqrstuvwxyz",s=i.length,o="";for(let e=0;e<r;e++){let e=Math.floor(Math.random()*s);o+=i.charAt(e)}return n?`${n}-${o}`:o}let el=e=>{let{gradientStart:n,gradientEnd:r}=e,i=ea();return z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"51",height:"52",viewBox:"0 0 51 52",fill:"none"},z.createElement("g",{filter:"url(#filter0_d_6_2)"},z.createElement("path",{d:"M40.4918 46.5592C44.6795 43.176 46.261 34.1333 47.5301 25.6141C49.5854 11.8168 39.6662 1 25.8097 1C11.2857 1 3 11.4279 3 25.3518C3 33.7866 6.29361 43.8947 10.4602 46.5592C12.5868 47.9192 12.5868 47.9051 25.8097 47.9192C38.3651 47.9282 38.5352 48.14 40.4918 46.5592Z",fill:`url(#${i})`})),z.createElement("defs",null,z.createElement("filter",{id:"filter0_d_6_2",x:"0.789215",y:"0.447304",width:"49.2216",height:"51.3549",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},z.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),z.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),z.createElement("feOffset",{dy:"1.65809"}),z.createElement("feGaussianBlur",{stdDeviation:"1.10539"}),z.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"}),z.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_6_2"}),z.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_6_2",result:"shape"})),z.createElement("linearGradient",{id:i,x1:"17.671",y1:"31.7392",x2:"17.671",y2:"47.9333",gradientUnits:"userSpaceOnUse"},z.createElement("stop",{stopColor:n}),z.createElement("stop",{offset:"1",stopColor:r}))))};var eh=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};let ec=X.PREFIX;class eu extends ee.A{constructor(e){super(e),this.handleFocusVisible=e=>{this.foundation.handleFocusVisible(e)},this.handleBlur=e=>{this.foundation.handleBlur()},this.getContent=()=>{let{children:e,onClick:n,imgAttr:r,src:i,srcSet:s,alt:o}=this.props,{isImgExist:a}=this.state,l=e,h=n!==J,c=i&&a,u={tabIndex:0,onKeyDown:this.handleKeyDown,onFocus:this.handleFocusVisible,onBlur:this.handleBlur};if(c){let e=h?`clickable Avatar: ${o}`:o,n=Object.assign(Object.assign({src:i,srcSet:s,onError:this.handleError},r),{className:F()({[`${ec}-no-focus-visible`]:h})}),a=h?Object.assign(Object.assign({},n),u):n;l=z.createElement("img",Object.assign({alt:e},a))}else if("string"==typeof e){let n=null!=o?o:e,r={role:"img","aria-label":h?`clickable Avatar: ${n}`:n,className:F()(`${ec}-label`,{[`${ec}-no-focus-visible`]:h})},i=h?Object.assign(Object.assign({},r),u):r,s={transform:`scale(${this.state.scale})`};l=z.createElement("span",{className:`${ec}-content`,style:s},z.createElement("span",Object.assign({},i,{"x-semi-prop":"children"}),e))}return l},this.renderBottomSlot=()=>{var e,n;if(!this.props.bottomSlot)return null;if(this.props.bottomSlot.render)return this.props.bottomSlot.render();let r=null!=(e=this.props.bottomSlot.render)?e:()=>{var e;let n={};return this.props.bottomSlot.bgColor&&(n.backgroundColor=this.props.bottomSlot.bgColor),this.props.bottomSlot.textColor&&(n.color=this.props.bottomSlot.textColor),z.createElement("span",{style:n,className:F()(`${ec}-bottom_slot-shape_${this.props.bottomSlot.shape}`,`${ec}-bottom_slot-shape_${this.props.bottomSlot.shape}-${this.props.size}`,null!=(e=this.props.bottomSlot.className)?e:"")},this.props.bottomSlot.text)};return z.createElement("div",{className:F()([`${ec}-bottom_slot`]),style:null!=(n=this.props.bottomSlot.style)?n:{}},r())},this.renderTopSlot=()=>{var e,n,r,i;if(!this.props.topSlot)return null;if(this.props.topSlot.render)return this.props.topSlot.render();let s={};return this.props.topSlot.textColor&&(s.color=this.props.topSlot.textColor),z.createElement("div",{style:null!=(e=this.props.topSlot.style)?e:{},className:F()([`${ec}-top_slot-wrapper`,null!=(n=this.props.topSlot.className)?n:"",{[`${ec}-animated`]:this.props.contentMotion}])},z.createElement("div",{className:F()([`${ec}-top_slot-bg`,`${ec}-top_slot-bg-${this.props.size}`])},z.createElement("div",{className:F()([`${ec}-top_slot-bg-svg`,`${ec}-top_slot-bg-svg-${this.props.size}`])},z.createElement(el,{gradientStart:null!=(r=this.props.topSlot.gradientStart)?r:"var(--semi-color-primary)",gradientEnd:null!=(i=this.props.topSlot.gradientEnd)?i:"var(--semi-color-primary)"}))),z.createElement("div",{className:F()([`${ec}-top_slot`])},z.createElement("div",{style:s,className:F()([`${ec}-top_slot-content`,`${ec}-top_slot-content-${this.props.size}`])},this.props.topSlot.text)))},this.state={isImgExist:!0,hoverContent:"",focusVisible:!1,scale:1},this.onEnter=this.onEnter.bind(this),this.onLeave=this.onLeave.bind(this),this.handleError=this.handleError.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.getContent=this.getContent.bind(this),this.avatarRef=z.createRef()}get adapter(){return Object.assign(Object.assign({},super.adapter),{notifyImgState:e=>{this.setState({isImgExist:e})},notifyEnter:e=>{let{hoverMask:n}=this.props;this.setState({hoverContent:n},()=>{let{onMouseEnter:n}=this.props;n&&n(e)})},notifyLeave:e=>{this.setState({hoverContent:""},()=>{let{onMouseLeave:n}=this.props;n&&n(e)})},setFocusVisible:e=>{this.setState({focusVisible:e})},setScale:e=>{this.setState({scale:e})},getAvatarNode:()=>{var e;return null==(e=this.avatarRef)?void 0:e.current}})}componentDidMount(){this.foundation=new K(this.adapter),this.foundation.init()}componentDidUpdate(e){if(this.props.src&&this.props.src!==e.src){let e=new Image(0,0);e.src=this.props.src,e.onload=()=>{this.setState({isImgExist:!0})},e.onerror=()=>{this.setState({isImgExist:!1})},e.onabort=()=>{this.setState({isImgExist:!1})}}"string"==typeof this.props.children&&this.props.children!==e.children&&this.foundation.changeScale()}componentWillUnmount(){this.foundation.destroy()}onEnter(e){this.foundation.handleEnter(e)}onLeave(e){this.foundation.handleLeave(e)}handleError(){this.foundation.handleImgLoadError()}handleKeyDown(e){let{onClick:n}=this.props;switch(e.key){case"Enter":n(e),er(e);break;case"Escape":e.target.blur()}}render(){var e;let n=this.props,{shape:r,children:i,size:s,color:o,className:a,hoverMask:l,onClick:h,imgAttr:c,src:u,srcSet:d,style:p,alt:f,gap:g,bottomSlot:m,topSlot:y,border:O,contentMotion:b}=n,x=eh(n,["shape","children","size","color","className","hoverMask","onClick","imgAttr","src","srcSet","style","alt","gap","bottomSlot","topSlot","border","contentMotion"]),{isImgExist:w,hoverContent:S,focusVisible:_}=this.state,k={};Y.includes(s)||(k={width:s,height:s}),k=Object.assign(Object.assign({},k),p);let C=m||y||O,E={onClick:h,onMouseEnter:this.onEnter,onMouseLeave:this.onLeave},T=u&&w,P=F()(ec,{[`${ec}-${r}`]:r,[`${ec}-${s}`]:s,[`${ec}-${o}`]:o&&!T,[`${ec}-img`]:T,[`${ec}-focus`]:_,[`${ec}-animated`]:b},a),A=S?z.createElement("div",{className:`${ec}-hover`,"x-semi-prop":"hoverContent"},S):null,M=z.createElement("span",Object.assign({},x,{style:C?{}:k,className:P},C?{}:E,{role:"listitem",ref:this.avatarRef}),this.getContent(),A);if(O){let n={};"object"==typeof O&&(null==O?void 0:O.color)&&(n.borderColor=null==O?void 0:O.color),M=z.createElement("div",{style:Object.assign({position:"relative"},k)},M,z.createElement("span",{style:n,className:F()([`${ec}-additionalBorder`,`${ec}-additionalBorder-${s}`,{[`${ec}-${r}`]:r}])}),"object"==typeof this.props.border&&this.props.border.motion&&z.createElement("span",{style:n,className:F()([`${ec}-additionalBorder`,`${ec}-additionalBorder-${s}`,{[`${ec}-${r}`]:r,[`${ec}-additionalBorder-animated`]:"object"==typeof this.props.border&&(null==(e=this.props.border)?void 0:e.motion)}])}))}return C?z.createElement("span",Object.assign({className:F()([`${ec}-wrapper`]),style:k},E),M,y&&["extra-small","small","default","medium","large","extra-large"].includes(s)&&"circle"===r&&this.renderTopSlot(),m&&["extra-small","small","default","medium","large","extra-large"].includes(s)&&this.renderBottomSlot()):M}}eu.__SemiComponentName__="Avatar",eu.defaultProps=(0,es.bQ)(eu.__SemiComponentName__,{size:"medium",color:"grey",shape:"circle",gap:3,onClick:J,onMouseEnter:J,onMouseLeave:J}),eu.propTypes={children:q().node,color:q().oneOf(["grey","red","pink","purple","violet","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","white"]),shape:q().oneOf(U),size:q().oneOf(Y),hoverMask:q().node,className:q().string,style:q().object,gap:q().number,imgAttr:q().object,src:q().string,srcSet:q().string,alt:q().string,onError:q().func,onClick:q().func,onMouseEnter:q().func,onMouseLeave:q().func,bottomSlot:q().shape({render:q().func,shape:q().oneOf(["circle","square"]),text:q().node,bgColor:q().string,textColor:q().string,className:q().string,style:q().object}),topSlot:q().shape({render:q().func,gradientStart:q().string,gradientEnd:q().string,text:q().node,textColor:q().string,className:q().string,style:q().object}),border:q().oneOfType([q().shape({color:q().string,motion:q().bool}),q().bool]),contentMotion:q().bool},eu.elementType="Avatar";var ed=r(63950),ep=r.n(ed),ef=r(85015),eg=r.n(ef),em=r(98023),ey=r.n(em);let eO=z.createContext({}),ev={PREFIX:`${W._}-badge`};var eb=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};let ex=ev.PREFIX;class ew extends z.PureComponent{render(){let e,{direction:n}=this.context,r=this.props,{count:i,dot:s,type:o,countClassName:a,countStyle:l,theme:h,position:c="rtl"===n?"leftTop":"rightTop",overflowCount:u,style:d,children:p,className:f}=r,g=eb(r,["count","dot","type","countClassName","countStyle","theme","position","overflowCount","style","children","className"]),m=i&&!(ey()(i)||eg()(i)),y=null!=i,O=F()(a,{[`${ex}-${o}`]:!m,[`${ex}-${h}`]:!m,[`${ex}-${c}`]:!!c&&!!p,[`${ex}-block`]:!p,[`${ex}-dot`]:s,[`${ex}-count`]:!s&&!m&&y,[`${ex}-custom`]:m});return e=ey()(i)?u&&u<i?`${u}+`:`${i}`:i,z.createElement("span",Object.assign({className:F()(ex,f)},g),p,z.createElement("span",{className:O,style:d||l,"x-semi-prop":"count"},s?null:e))}}ew.contextType=eO,ew.propTypes={count:q().node,dot:q().bool,type:q().oneOf(["success","primary","secondary","tertiary","warning","danger"]),theme:q().oneOf(["solid","light","inverted"]),position:q().oneOf(["leftTop","leftBottom","rightTop","rightBottom"]),overflowCount:q().number,style:q().object,className:q().string,children:q().node,onClick:q().func,onMouseEnter:q().func,onMouseLeave:q().func,countClassName:q().string,countStyle:q().object},ew.defaultProps={dot:!1,type:"primary",theme:"solid",className:"",onClick:()=>ep(),onMouseEnter:()=>ep(),onMouseLeave:()=>ep()};var eS=r(90179),e_=r.n(eS);let ek={PREFIX:`${W._}-button`},eC={sizes:["default","small","large"],iconPositions:["left","right"],htmlTypes:["button","reset","submit"],btnTypes:["primary","secondary","tertiary","warning","danger"],themes:["solid","borderless","light","outline"],DEFAULT_ICON_SIZE:"default",DEFAULT_ICON_POSITION:"left"};var eE=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};let eT=eC.sizes,{htmlTypes:eP,btnTypes:eA}=eC;class eM extends z.PureComponent{render(){let e=this.props,{children:n,block:r,htmlType:i,loading:s,circle:o,className:a,style:l,disabled:h,size:c,theme:u,type:d,prefixCls:p,iconPosition:f}=e,g=eE(e,["children","block","htmlType","loading","circle","className","style","disabled","size","theme","type","prefixCls","iconPosition"]),m=Object.assign(Object.assign({disabled:h},e_()(g,["x-semi-children-alias"])),{className:F()(p,{[`${p}-${d}`]:!h&&d,[`${p}-disabled`]:h,[`${p}-size-large`]:"large"===c,[`${p}-size-small`]:"small"===c,[`${p}-light`]:"light"===u,[`${p}-block`]:r,[`${p}-circle`]:o,[`${p}-borderless`]:"borderless"===u,[`${p}-outline`]:"outline"===u,[`${p}-${d}-disabled`]:h&&d},a),type:i,"aria-disabled":h}),y={};return a&&a.includes("-with-icon")||(y["x-semi-prop"]=this.props["x-semi-children-alias"]||"children"),z.createElement("button",Object.assign({},m,{onClick:this.props.onClick,onMouseDown:this.props.onMouseDown,style:l}),z.createElement("span",Object.assign({className:F()(`${p}-content`,this.props.contentClassName),onClick:e=>h&&e.stopPropagation()},y),n))}}function eN(e){return null==e}eM.defaultProps={disabled:!1,size:"default",type:"primary",theme:"light",block:!1,htmlType:"button",onMouseDown:J,onClick:J,onMouseEnter:J,onMouseLeave:J,prefixCls:ek.PREFIX},eM.propTypes={children:q().node,disabled:q().bool,prefixCls:q().string,style:q().object,size:q().oneOf(eT),type:q().oneOf(eA),block:q().bool,onClick:q().func,onMouseDown:q().func,circle:q().bool,loading:q().bool,htmlType:q().oneOf(eP),theme:q().oneOf(eC.themes),className:q().string,onMouseEnter:q().func,onMouseLeave:q().func,"aria-label":q().string,contentClassName:q().string},W._;var eD=r(86744),eI=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};let e$=-1,eR=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{id:n,className:r,customIconCls:i}=e,s=eI(e,["id","className","customIconCls"]),o=en()(eD.A,"config.overrideDefaultProps.Spin.indicator");if(o&&z.isValidElement(o))return z.cloneElement(o,{className:F()({[i]:i,[r]:r})});let a=n;eN(a)&&(a=++e$);let l=`linearGradient-${a}`;return z.createElement("svg",Object.assign({},s,{className:r,width:"48",height:"48",viewBox:"0 0 36 36",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,"data-icon":"spin"}),z.createElement("defs",null,z.createElement("linearGradient",{x1:"0%",y1:"100%",x2:"100%",y2:"100%",id:l},z.createElement("stop",{stopColor:"currentColor",stopOpacity:"0",offset:"0%"}),z.createElement("stop",{stopColor:"currentColor",stopOpacity:"0.50",offset:"39.9430698%"}),z.createElement("stop",{stopColor:"currentColor",offset:"100%"}))),z.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},z.createElement("rect",{fillOpacity:"0.01",fill:"none",x:"0",y:"0",width:"36",height:"36"}),z.createElement("path",{d:"M34,18 C34,9.163444 26.836556,2 18,2 C11.6597233,2 6.18078805,5.68784135 3.59122325,11.0354951",stroke:`url(#${l})`,strokeWidth:"4",strokeLinecap:"round"})))};var eL=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};class eQ extends z.PureComponent{render(){let e=this.props,{children:n,iconPosition:r,iconSize:i,iconStyle:s,style:o,icon:a,noHorizontalPadding:l,theme:h,className:c,prefixCls:u,loading:d}=e,p=eL(e,["children","iconPosition","iconSize","iconStyle","style","icon","noHorizontalPadding","theme","className","prefixCls","loading"]),f=Object.assign({},o);Array.isArray(l)?(l.includes("left")&&(f.paddingLeft=0),l.includes("right")&&(f.paddingRight=0)):!0===l?(f.paddingLeft=0,f.paddingRight=0):"string"==typeof l&&("left"===l&&(f.paddingLeft=0),"right"===l&&(f.paddingRight=0));let g=null,m=null;d&&!p.disabled?m=z.createElement(eR,{customIconCls:`${u}-content-loading-icon`}):z.isValidElement(a)&&(m=a);let y=F()({[`${u}-content-left`]:"right"===r,[`${u}-content-right`]:"left"===r}),O=this.props["x-semi-children-alias"]||"children",b=null!=n?z.createElement("span",{className:y,"x-semi-prop":O},n):null;g="left"===r?z.createElement(z.Fragment,null,m,b):z.createElement(z.Fragment,null,b,m);let x=F()(c,`${u}-with-icon`,{[`${u}-with-icon-only`]:null==b||""===b,[`${u}-loading`]:d});return z.createElement(eM,Object.assign({},p,{className:x,theme:h,style:f}),g)}}eQ.defaultProps={iconPosition:eC.DEFAULT_ICON_POSITION,prefixCls:ek.PREFIX,loading:!1,noHorizontalPadding:!1,onMouseEnter:ep(),onMouseLeave:ep()},eQ.elementType="IconButton",eQ.propTypes={iconStyle:q().object,style:q().object,loading:q().bool,prefixCls:q().string,icon:q().oneOfType([q().object,q().string,q().node]),iconSize:q().oneOf(["extra-small","small","default","large","extra-large","custom"]),noHorizontalPadding:q().oneOfType([q().bool,q().string,q().array]),children:q().node,theme:q().string,iconPosition:q().oneOf(eC.iconPositions),className:q().string,onMouseEnter:q().func,onMouseLeave:q().func};let ej=eQ;class eV extends z.PureComponent{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e)}render(){let e=Object.assign({},this.props),n=!!e.icon,r=!!e.loading,i=!!e.disabled;return n||r&&!i?z.createElement(ej,Object.assign({},e)):z.createElement(eM,Object.assign({},e))}}eV.__SemiComponentName__="Button",eV.propTypes=Object.assign(Object.assign({},eM.propTypes),ej.propTypes),eV.defaultProps=(0,es.bQ)(eV.__SemiComponentName__),eV.elementType="Button";let ez=eV;var eB=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};let eF=ek.PREFIX,eZ=eC.sizes;class eq extends ee.A{getInnerWithLine(e){let n=[];return e.length>1?(e.slice(0,-1).forEach((e,r)=>{let i="Button"===en()(e,"type.elementType"),s=en()(e,"props"),{type:o,theme:a,disabled:l}=null!=s?s:{};if(i&&"outline"!==a){let i=F()(`${eF}-group-line`,`${eF}-group-line-${null!=a?a:"light"}`,`${eF}-group-line-${null!=o?o:"primary"}`,{[`${eF}-group-line-disabled`]:l});n.push(e,z.createElement("span",{className:i,key:`line-${r}`}))}else n.push(e)}),n.push(e.slice(-1)),n):e}render(){let e,n=this.props,{children:r,disabled:i,size:s,type:o,className:a,style:l,"aria-label":h}=n,c=eB(n,["children","disabled","size","type","className","style","aria-label"]),u=[],d=F()(`${eF}-group`,a);return r&&(e=(Array.isArray(r)?r:[r]).map((e,n)=>{var r;return(0,z.isValidElement)(e)?(0,z.cloneElement)(e,Object.assign(Object.assign(Object.assign({disabled:i,size:s,type:o},e.props),c),{key:null!=(r=e.key)?r:n})):e}),u=this.getInnerWithLine(e)),z.createElement("div",{className:d,style:l,role:"group","aria-label":h},u)}}eq.propTypes={children:q().node,disabled:q().bool,type:q().string,size:q().oneOf(eZ),theme:q().oneOf(eC.themes),"aria-label":q().string},eq.defaultProps={size:"default"};var eW=r(23805),eX=r.n(eW),eU=r(1882),eY=r.n(eU),eG=r(62193),eH=r.n(eG),eK=r(2404),eJ=r.n(eK),e0=r(38440),e1=r.n(e0),e2=r(40961),e5=r(79859),e4=r.n(e5),e3=r(86139),e6=r.n(e3),e9=r(62216),e7=r.n(e9),e8=r(66245),te=r.n(e8),tt=r(44383),tn=r.n(tt),tr=r(5187),ti=r.n(tr),ts=r(94506),to=r.n(ts),ta=r(63375),tl=r.n(ta);let th={PREFIX:`${W._}-tree`,PREFIX_OPTION:`${W._}-tree-option`},tc="_SEMI_TREE_SPLIT_";function tu(e){return!ti()(e)&&!e7()(e)}function td(e,n,r){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=[],o=!!i,a=en()(r,"key","key"),l=en()(r,"children","children");return e7()(e)?[]:(!function e(h){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return h.map((u,d)=>{var p;let f=(p=c?c.pos:"0",`${p}-${d}`),g=u[a],m={};r&&Object.entries(e_()(r,"children")).forEach(e=>{let[n,r]=e,i=u[r];e7()(i)||(m[n]=i)});let y=Object.assign(Object.assign(Object.assign({},tn()(u,["key","label","value","icon","disabled","isLeaf"])),m),{parent:c,pos:f,children:null,data:u,_innerDataTag:!0,isEnd:[...c?c.isEnd:[],d===h.length-1]}),O="boolean"==typeof i;return(!o||!O&&i.has(g))&&s.push(y),n.has(g)&&(!o||!O&&i.has(g))?y.children=e(u[l]||[],y):y.children=[],y})}(e),s)}function tp(e,n){let r={},i={},s={},o=en()(n,"value","value");return!function(e,n,r){let i=en()(r,"key","key"),s=en()(r,"children","children"),o=(r,a,l)=>{var h;let c=r?r[s]:e,u=r?(h=l.pos,`${h}-${a}`):"0";if(r){let e=en()(r,i,null);n({data:Object.assign({},r),ind:a,pos:u,key:null!==e?e:u,parentPos:l.node?l.pos:null,level:Number(l.level)+1})}c&&c.forEach((e,n)=>{o(e,n,{node:r,pos:u,level:l?Number(l.level)+1:-1})})};o(null)}(e,e=>{let{pos:n,key:a,parentPos:l}=e,h=Object.assign({},e),c=en()(h,`data.${o}`,null);null!==c&&(s[c]=a),r[n]=h,i[a]=h,h.parent=r[l],h.parent&&(h.parent.children=h.parent.children||[],h.parent.children.push(h))},n),{posEntities:r,keyEntities:i,valueEntities:s}}function tf(e,n){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!tu(e))return[];if(!r&&Array.isArray(e)?e=e.length?[e[0]]:[]:Array.isArray(e)||(e=[e]),eH()(n))return e;let i=[];return e.forEach(e=>{e in n?i.push(n[e]):e&&i.push(e)}),i}function tg(e,n){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=[],s=e=>{if(!e)return;let{children:r}=e;tu(r)&&r.forEach(e=>{i.push(e.key),s(n[e.key])})};return e.forEach(e=>{r&&i.push(e),s(n[e])}),i}function tm(e,n){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=[];return e.forEach(e=>{n[e]&&n[e].parent&&i.push(n[e].parent.key)}),function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=[];return e&&e.forEach(e=>{let s=n[e];s&&s.children&&s.children.forEach(e=>{r.length&&r.includes(e.key)||i.push(e.key)})}),i}(tl()(i),n,r?[]:e)}function ty(e,n){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=[],s=e=>{e.parent&&(i.push(e.parent.key),s(e.parent))};return e.forEach(e=>{n[e]&&s(n[e]),r&&i.push(e)}),i}function tO(e,n){let r=Array.isArray(e)?e:[e],i=new Set([...tg(r,n,!0)]),s=new Set([]),o=[],a=function(e,n){let r={};return e.forEach(e=>{if(!n[e])return;let{level:i}=n[e];r[i]?r[i].push(e):r[i]=[e]}),r}(r,n),l=e=>{let{key:r,parent:l,level:h}=e;if(!l||o.includes(r))return;let c=tm([r],n);if(o=[...o,...c],c.every(e=>i.has(e)))i.add(l.key),h-1 in a&&h?a[h-1].push(l.key):a[h-1]=[l.key];else{let e=ty([r],n,!1);s=new Set([...s,...e])}};for(;!eH()(a);){let e=to()(Object.keys(a).map(e=>Number(e)));a[e].forEach(e=>l(n[e])),delete a[e]}return{checkedKeys:i,halfCheckedKeys:s}}function tv(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return new Set((Array.isArray(e)||(e=[e]),r)?ty(e,n,!0):e)}function tb(e,n,r,i){return new Set(ty(tf(e,i,r),n,!1))}function tx(e,n,r){let i="show",s=[...e],o=[...n];if(1!==Math.abs(s.length-o.length))return{motionType:i,motionKeys:[]};let a=[];return s.length>o.length?(i="hide",a=te()(s,o)):a=te()(o,s),{motionType:1===a.length?i:"show",motionKeys:1===a.length?tg(a,r,!1):[]}}function tw(e,n,r,i){if(!r)return!0;let s=r,o=n;return"boolean"==typeof r&&(s=(e,n)=>{let r=e.toLowerCase();return null==n?void 0:n.toString().toLowerCase().includes(r)}),i&&(o=n[i]),s(e,o,n)}function tS(e,n){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0,s=[],o=new Set(e);return r?e.forEach(e=>{n[e]&&!tu(n[e].children)&&s.push(e),!n[e]&&i&&s.push(e)}):e.forEach(e=>{if(!n[e]){i&&s.push(e);return}let{parent:r}=n[e];r&&o.has(r.key)||s.push(e)}),s}function t_(e,n,r){let i=[],s=e=>{r[e].children&&r[e].children.forEach(e=>{let{key:r}=e;i.push(r),n.has(r)&&s(r)})};return s(e),i}function tk(e,n,r,i){let s=tg([e],n,!0),o=n[e];r=new Set([...r,e]);let a=e=>{if(!e.parent)return;let{key:s}=e;if(tm([s],n).every(e=>r.has(e))){let n=e.parent;r.add(n.key),a(n)}else{let e=ty([s],n,!1);i=new Set([...i,...e])}};return a(o),{checkedKeys:new Set([...r,...s]),halfCheckedKeys:i}}function tC(e,n,r,i){let s=tg([e],n,!0),o=n[e];s.forEach(e=>{r.has(e)&&r.delete(e),i.has(e)&&i.delete(e)});let a=e=>{let s=e.parent;if(!s||!r.has(s.key)&&!i.has(s.key))return;let{key:o}=e,l=tm([o],n).some(e=>r.has(e)||i.has(e)),h=ty([o],n,!1);l?h.forEach(e=>{r.has(e)&&(r.delete(e),i.add(e))}):(r.has(s.key)&&r.delete(s.key),i.has(s.key)&&i.delete(s.key),a(s))};return o&&a(o),{checkedKeys:r,halfCheckedKeys:i}}function tE(e){let{showFilteredOnly:n,keyEntities:r,inputValue:i,treeData:s,filterTreeNode:o,filterProps:a,prevExpandedKeys:l,keyMaps:h}=e,c=[],u=ty(c=Object.values(r).filter(e=>tw(i,e.data,o,a)).map(e=>e.key),r,!1);if(l.length){let e=l.filter(e=>!!r[e]);u=u.concat(e)}let d=new Set([...tg(c,r,!0),...u]);return{flattenNodes:td(s,new Set(u),h,n&&d),filteredKeys:new Set(c),filteredExpandedKeys:new Set(u),filteredShownKeys:d}}function tT(e,n){let r=en()(n,"value","value"),i=en()(n,"key","key");return Array.isArray(e)?e.map(e=>en()(e,r,e[i])):en()(e,r,e[i])}function tP(e,n,r){return n&&tu(e)?tT(e,r):e}function tA(e,n){return[...e].filter(e=>e in n)}function tM(e,n){let r=en()(n,"disabled","disabled"),{checkedKeys:i}=tO(Object.keys(e).filter(n=>e[n].data[r]),e);return i}function tN(e,n){let{clientY:r}=e,{top:i,bottom:s,height:o}=n.nodeInstance.getBoundingClientRect();return r<=i+.45*o?-1:+(r>=s-.45*o)}let tD={PREFIX:`${W._}-cascader`,PREFIX_OPTION:`${W._}-cascader-option`},tI="click",t$="hover",tR="leafOnly",tL="none",tQ="trigger",tj="related",tV="unRelated",tz="_SEMI_CASCADER_SPLIT_";function tB(e){return e.join(tz)}function tF(e){let n={},r=(i,s,o)=>{let a=i?i.children:e,l=null;if(i){let e=o?`${o.key}${tz}${i.value}`:`${i.value}`,r=o?(h=o.pos,`${h}-${s}`):`${s}`;var h,c=l={data:Object.assign({},i),ind:s,key:e,pos:r,level:o?o.level+1:0,parentKey:o?o.key:null,path:o?[...o.path,e]:[e],valuePath:o?[...o.valuePath,i.value]:[i.value]};let{key:a,parentKey:u}=c,d=Object.assign({},c);n[a]=d,d.parent=n[u],d.parent&&(d.parent.children=d.parent.children||[],d.parent.children.push(d))}a&&a.forEach((e,n)=>{r(e,n,l)})};return r(null),n}function tZ(e,n){return n?tR:e?"autoMergeValue":tL}var tq=r(24330);let tW=function(e){return en()(e,"key")===tq.jD};class tX extends G.A{constructor(e){super(Object.assign({},e)),this.handleKeyDown=e=>{e.key===tq.Qg&&this.getState("isOpen")&&this.close(e)},this.updateSearching=e=>{this._adapter.updateStates({isSearching:!1})},this.handleTagRemoveByKey=e=>{var n,r;let{keyEntities:i}=this.getStates(),{disabled:s}=this.getProps();if(s)return;let o=null!=(n=i[e])?n:{};(null==(r=null==o?void 0:o.data)?void 0:r.disable)||this._handleMultipleSelect(o),this._adapter.rePositionDropdown()},this.handleTagRemoveInTrigger=e=>{let{treeData:n}=this.getStates(),r=function(e,n){let r=e.split("-").map(e=>Number(e)),i=n,s=[];return r.forEach((e,n)=>{var r;i=0===n?i[e]:null==(r=null==i?void 0:i.children)?void 0:r[e],s.push(null==i?void 0:i.value)}),tB(s)}(e,n);this.handleTagRemoveByKey(r)}}init(){let e=this.getProp("open")||this.getProp("defaultOpen");this.collectOptions(!0),this._adapter.updateLoadingKeyRefValue(new Set),this._adapter.updateLoadedKeyRefValue(new Set),e&&!this._isDisabled()&&this.open()}_setEmptyContentMinWidth(){let e,{style:n}=this.getProps();e=n&&ey()(n.width)||n&&eg()(n.width)&&!n.width.includes("%")?n.width:this._adapter.getTriggerWidth(),this._adapter.setEmptyContentMinWidth(e)}destroy(){this._adapter.unregisterClickOutsideHandler()}_isDisabled(){return this.getProp("disabled")}_isFilterable(){return!!this.getProp("filterTreeNode")}_notifyChange(e){let{onChangeWithObject:n,multiple:r}=this.getProps(),i=n?[]:"value";if(r){let n=[];e.forEach(e=>{let r=this.getItemPropPath(e,i);n.push(r)}),this._adapter.notifyChange(n)}else{let n=!e7()(e)&&"key"in e?this.getItemPropPath(e.key,i):[];this._adapter.notifyChange(n)}}_isLeaf(e){return this.getProp("loadData")?!!e.isLeaf:!e.children||!e.children.length}_clearInput(){this._adapter.updateInputValue("")}_notifyBlur(e){this._adapter.notifyBlur(e)}_notifyFocus(e){this._adapter.notifyFocus(e)}_isOptionDisabled(e,n){return ty([e],n,!0).some(e=>n[e].data.disabled)}getItemPropPath(e,n,r){let i=r||this.getState("keyEntities"),s=i[e],o=[];if(s)if(s._notExist)o=s.path;else{let e=s.path;o=Array.isArray(n)?e.map(e=>i[e].data):e.map(e=>i[e].data[n])}return o}_getCacheValue(e){let n,{selectedKeys:r}=this.getStates(),i=Array.from(r)[0];if(eH()(e[i]))if(e4()(i,"not-exist-")){let r=i.match(/not-exist-(\S*)/)[1];n=eH()(e[r])?r:e[r].valuePath}else n=i;else n=e[i].valuePath;return n}collectOptions(){let e,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{treeData:r,value:i,defaultValue:s}=this.getProps(),o=tF(r);this._adapter.rePositionDropdown(),n?e=s:eH()(o)||(e=this._getCacheValue(o));let a=this._isControlledComponent()?e7()(i)?[]:i:e;ti()(a)||e7()(a)?this._adapter.updateStates({keyEntities:o}):this.updateSelectedKey(a,o)}handleValueChange(e){let{keyEntities:n}=this.getStates();this.updateSelectedKey(e,n)}_getClearSelectedKey(e){let n={},{searchPlaceholder:r,placeholder:i,multiple:s}=this.getProps();return n.selectedKeys=new Set([]),n.activeKeys=new Set([]),n.filteredKeys=new Set([]),e&&!s&&(n.inputPlaceHolder=r||i||"",n.inputValue=""),n}updateSelectedKey(e,n){let{changeOnSelect:r,onChangeWithObject:i,multiple:s}=this.getProps(),{activeKeys:o,loading:a,keyEntities:l,selectedKeys:h}=this.getStates(),c=this._adapter.getLoadingKeyRefValue(),u=this._isFilterable(),d=[...o].filter(e=>c.has(e)),p=Array.isArray(e)?e:[e],f=i&&eX()(p[0])?p.map(e=>e.value):p,g=function(e){if(null==e?void 0:e.length)if(Array.isArray(e[0]))return e.map(e=>tB(e));else return[tB(e)];return[]}(f),m={},y=g.length>0?g[0]:void 0,O=y?n[y]:void 0;if(O)if(r||this._isLeaf(O.data)){if(m.selectedKeys=new Set([y]),d.length||(m.activeKeys=new Set(O.path)),u&&!s){let e=this.renderDisplayText(y,n);m.inputPlaceHolder=e}}else eJ()(g,Array.from(h))&&(m=this._getClearSelectedKey(u));else if(e&&e.length){let e=f[f.length-1],r=`not-exist-${e}`;if(m.selectedKeys=new Set([r]),u&&!s){let e=this._defaultRenderText(f);m.inputPlaceHolder=e}n[r]={data:{label:e,value:e},key:r,path:f,_notExist:!0}}else if(a||(null==c?void 0:c.size)){m.keyEntities=e6()(l,n),this._adapter.updateStates(m);return}else m=this._getClearSelectedKey(u);m.keyEntities=n,this._adapter.updateStates(m)}open(){let e=this._isFilterable(),{multiple:n}=this.getProps();this._adapter.openMenu(),e&&(this._clearInput(),n||this.toggle2SearchInput(!0)),this._isControlledComponent()&&this.reCalcActiveKeys(),this._adapter.notifyDropdownVisibleChange(!0),this._adapter.registerClickOutsideHandler(e=>this.close(e)),this._setEmptyContentMinWidth()}reCalcActiveKeys(){let{selectedKeys:e,activeKeys:n,keyEntities:r}=this.getStates(),i=r[[...e][0]];if(!i)return;let s=new Set(i.path);eJ()(s,n)||this._adapter.updateStates({activeKeys:s})}close(e,n){let{multiple:r}=this.getProps();if(this._adapter.closeMenu(),this._adapter.notifyDropdownVisibleChange(!1),this._adapter.unregisterClickOutsideHandler(),this._isFilterable()){let{selectedKeys:e,isSearching:i}=this.getStates(),s="";n&&!r?s=this.renderDisplayText(n):e.size&&!r&&(s=this.renderDisplayText([...e][0])),this._adapter.updateStates({inputValue:s}),r||this.toggle2SearchInput(!1),r||this._adapter.updateFocusState(!1)}this._notifyBlur(e)}focus(){let{filterTreeNode:e}=this.getProps();e&&this._adapter.focusInput(),this._adapter.updateFocusState(!0)}blur(){let{filterTreeNode:e}=this.getProps();e&&this._adapter.blurInput(),this._adapter.updateFocusState(!1)}toggle2SearchInput(e){e?this._adapter.toggleInputShow(e,()=>this.focus()):this._adapter.toggleInputShow(e,()=>void 0)}handleItemClick(e,n){this._isDisabled()||(this.handleSingleSelect(e,n),this._adapter.rePositionDropdown())}handleItemHover(e,n){this._isDisabled()||this.handleShowNextByHover(n)}handleShowNextByHover(e){let{keyEntities:n}=this.getStates(),{data:r,key:i}=e,s=this._isLeaf(r),o=n[i].path;this._adapter.updateStates({activeKeys:new Set(o)}),s||this.notifyIfLoadData(e)}onItemCheckboxClick(e){this._isDisabled()||(this._handleMultipleSelect(e),this._adapter.rePositionDropdown())}handleClick(e){let n=this._isDisabled(),r=this._isFilterable(),{isOpen:i}=this.getStates();n||(i?i&&!r&&this.close(e):(this.open(),this._notifyFocus(e)))}handleSelectionEnterPress(e){tW(e)&&this.handleClick(e)}toggleHoverState(e){this._adapter.toggleHovering(e)}_defaultRenderText(e,n){let r=this.getProp("separator");return n&&"function"==typeof n?n(e):e.join(r)}renderDisplayText(e,n){let r=this.getProp("displayRender"),i=this.getProp("displayProp"),s=this.getItemPropPath(e,i,n);return this._defaultRenderText(s,r)}handleNodeLoad(e){let{data:n,key:r}=e,i=new Set(this._adapter.getLoadingKeyRefValue()),s=new Set(this._adapter.getLoadedKeyRefValue()).add(r),o=new Set([...i]);o.delete(r),this._adapter.notifyOnLoad(s,n),this._adapter.updateLoadingKeyRefValue(o),this._adapter.updateLoadedKeyRefValue(s),this._adapter.updateStates({loadingKeys:o,loadedKeys:s})}notifyIfLoadData(e){let{data:n,key:r}=e;if(this._adapter.updateStates({loading:!1}),!n.isLeaf&&!n.children&&this.getProp("loadData")){let n=this._adapter.getLoadedKeyRefValue(),i=new Set(this._adapter.getLoadingKeyRefValue());if(n.has(r)||i.has(r))return;this._adapter.updateStates({loading:!0});let{keyEntities:s}=this.getStates(),o=this.getItemPropPath(r,[],s),a=i.add(r);this._adapter.updateLoadingKeyRefValue(a),this._adapter.updateStates({loadingKeys:a}),this._adapter.notifyLoadData(o,this.handleNodeLoad.bind(this,e))}}handleSingleSelect(e,n){let{changeOnSelect:r,filterLeafOnly:i,multiple:s,enableLeafClick:o}=this.getProps(),{keyEntities:a,selectedKeys:l,isSearching:h}=this.getStates(),c=this._isFilterable(),{data:u,key:d}=n,p=this._isLeaf(u),f=a[d].path,g=[d],m=d!==[...l][0];if(!p&&!r&&!h){this._adapter.updateStates({activeKeys:new Set(f)}),this.notifyIfLoadData(n);return}if(s)this._adapter.updateStates({activeKeys:new Set(f)}),p&&o&&this.onItemCheckboxClick(n);else if(this._adapter.notifySelect(u.value),m){if(this._notifyChange(n),this.notifyIfLoadData(n),this._isControlledComponent()){this._adapter.updateStates({activeKeys:new Set(f)}),p&&this.close(e);return}this._adapter.updateStates({activeKeys:new Set(f),selectedKeys:new Set(g)});let r=this.renderDisplayText(d);c&&this._adapter.updateInputPlaceHolder(r),p?this.close(e,d):!i&&h&&this.close(e,d)}else this.close(e)}_handleMultipleSelect(e){let{checkRelation:n}=this.getProps();n===tj?this._handleRelatedMultipleSelect(e):"unRelated"===n&&this._handleUnRelatedMultipleSelect(e),this._adapter.updateStates({inputValue:""})}_handleRelatedMultipleSelect(e){let{key:n}=e,{checkedKeys:r,keyEntities:i,resolvedCheckedKeys:s}=this.getStates(),{autoMergeValue:o,max:a,disableStrictly:l,leafOnly:h}=this.getProps(),c=r.has(n),u=l?this.calcCheckedStatus(!c,n):!c,{checkedKeys:d,halfCheckedKeys:p}=l?this.calcNonDisabledCheckedKeys(n,u):this.calcCheckedKeys(n,u),f=tZ(o,h),g=f===tL,m=new Set(tS(d,i,f===tR)),y=g?d:m;if(ey()(a)){if(g){if(r.size<d.size&&d.size>a){let e=[];d.forEach(n=>{e.push(i[n])}),this._adapter.notifyOnExceed(e);return}}else if(s.size<m.size&&m.size>a){let e=[];m.forEach(n=>{e.push(i[n])}),this._adapter.notifyOnExceed(e);return}}this._isControlledComponent()||this._adapter.updateStates({checkedKeys:d,halfCheckedKeys:p,resolvedCheckedKeys:m}),this._notifyChange(y),u&&this._notifySelect(y)}_handleUnRelatedMultipleSelect(e){let n,{key:r}=e,{checkedKeys:i,keyEntities:s}=this.getStates(),{max:o}=this.getProps(),a=new Set(i);if(i.has(r))a.delete(r),n=!1;else{if(ey()(o)&&i.size>=o){let e=[];i.forEach(n=>{e.push(s[n])}),this._adapter.notifyOnExceed(e);return}a.add(r),n=!0}this._isControlledComponent()||this._adapter.updateStates({checkedKeys:a}),this._notifyChange(a),n&&this._notifySelect(a)}calcNonDisabledCheckedKeys(e,n){let{keyEntities:r,disabledKeys:i}=this.getStates(),s=new Set(this.getState("checkedKeys")),o=tS(tg([e],r,!1),r,!0);if(!o.some(e=>i.has(e)))return this.calcCheckedKeys(e,n);let a=o.filter(e=>!i.has(e));return tO(n?[...a,...s]:te()(tS([...s],r,!0),a),r)}calcCheckedStatus(e,n){if(!e)return e;let{checkedKeys:r,keyEntities:i,disabledKeys:s}=this.getStates(),o=tS(tg([n],i,!1),i,!0);return o.some(e=>s.has(e))?!o.filter(e=>!s.has(e)).every(e=>r.has(e)):e}_notifySelect(e){let{keyEntities:n}=this.getStates(),r=[];e.forEach(e=>{var i,s;let o=null==(s=null==(i=n[e])?void 0:i.data)?void 0:s.value;void 0!==o&&r.push(o)});let i=1===r.length?r[0]:r;this._adapter.notifySelect(i)}calcCheckedKeys(e,n){let{keyEntities:r}=this.getStates(),i=new Set(this.getState("checkedKeys")),s=new Set(this.getState("halfCheckedKeys"));return n?tk(e,r,i,s):tC(e,r,i,s)}handleInputChange(e){this._adapter.updateInputValue(e);let{keyEntities:n}=this.getStates(),{treeNodeFilterProp:r,filterTreeNode:i,filterLeafOnly:s}=this.getProps(),o=[];e&&(o=Object.values(n).filter(n=>{let s,{key:o,_notExist:a,data:l}=n;if(a)return!1;let h=this.getItemPropPath(o,r);if(!i)return!0;let c=i;return"boolean"==typeof i?(c=(e,n)=>{let r=e.toLowerCase();return n.toLowerCase().includes(r)},s=h.join("")):s=h.join(),c(e,s,l)}).filter(e=>i&&!s||this._isLeaf(e)).map(e=>e.key)),this._adapter.updateStates({isSearching:!!e,filteredKeys:new Set(o)}),this._adapter.notifyOnSearch(e),this._adapter.rePositionDropdown()}handleClear(){let{isSearching:e}=this.getStates(),{searchPlaceholder:n,placeholder:r,multiple:i}=this.getProps(),s=this._isFilterable(),o=this._isControlledComponent(),a={};i?(a.isSearching=!1,this._adapter.updateInputValue(""),this._adapter.notifyOnSearch(""),a.checkedKeys=new Set([]),a.halfCheckedKeys=new Set([]),a.selectedKeys=new Set([]),a.activeKeys=new Set([]),a.resolvedCheckedKeys=new Set([]),this._adapter.notifyChange([])):s&&e?(a.isSearching=!1,this._adapter.updateInputValue(""),this._adapter.notifyOnSearch("")):(s&&(a.inputValue="",a.inputPlaceHolder=n||r||"",this._adapter.updateInputValue(""),this._adapter.notifyOnSearch("")),o||(a.selectedKeys=new Set([])),a.activeKeys=new Set([]),a.filteredKeys=new Set([]),this._adapter.notifyChange([])),this._adapter.updateStates(a),this._adapter.notifyClear(),this._adapter.rePositionDropdown()}handleClearEnterPress(e){tW(e)&&this.handleClear()}getRenderData(){let{keyEntities:e,isSearching:n}=this.getStates(),r=this._isFilterable();return n&&r?this.getFilteredData():Object.values(e).filter(e=>null===e.parentKey&&!e._notExist).sort((e,n)=>parseInt(e.ind,10)-parseInt(n.ind,10))}getFilteredData(){let{treeNodeFilterProp:e,filterSorter:n}=this.getProps(),{filteredKeys:r,keyEntities:i,inputValue:s}=this.getStates(),o=[];return[...r].forEach(n=>{let r=i[n];if(!r)return;let s=this.getItemPropPath(n,[]),a=s.map(n=>n[e]),l=this._isOptionDisabled(n,i);o.push({data:r.data,pathData:s,key:n,disabled:l,searchText:a})}),eY()(n)&&o.sort((e,r)=>n(e.pathData,r.pathData,s)),o}handleListScroll(e,n){let{activeKeys:r,keyEntities:i}=this.getStates(),s=[...r][r.size-1],o=s?en()(i,[s,"data"],null):null;this._adapter.notifyListScroll(e,{panelIndex:n,activeNode:o})}}let tU={PREFIX:`${W._}-tooltip`},tY=["top","topLeft","topRight","left","leftTop","leftBottom","right","rightTop","rightBottom","bottom","bottomLeft","bottomRight","leftTopOver","rightTopOver","leftBottomOver","rightBottomOver"],tG="disabled",tH={offsetX:0,offsetY:2,width:24,height:7},tK={PREFIX:`${W._}-popover`,ARROW:`${W._}-popover-icon-arrow`},tJ={ARROW_BOUNDING:Object.assign(Object.assign({},tH),{offsetY:6,offsetX:0,height:8}),SPACING:4,SPACING_WITH_ARROW:10,DEFAULT_Z_INDEX:1030};var t0=r(89480),t1=r(87686),t2=r(79500),t5=r(76135),t4=r.n(t5),t3=r(7350),t6=r.n(t3);class t9{constructor(){this._eventMap=new Map}on(e,n){return e&&"function"==typeof n&&(this._eventMap.has(e)||this._eventMap.set(e,[]),this._eventMap.get(e).push(n)),this}once(e,n){var r=this;if(e&&"function"==typeof n){let i=function(){n(...arguments),r.off(e,i)};this.on(e,i)}}off(e,n){if(e)if("function"==typeof n){let r=this._eventMap.get(e);if(Array.isArray(r)&&r.length){let e=-1;for(;(e=r.findIndex(e=>e===n))>-1;)r.splice(e,1)}}else eN(n)&&this._eventMap.delete(e);return this}emit(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return!!this._eventMap.has(e)&&([...this._eventMap.get(e)].forEach(e=>e(...r)),!0)}}let t7=/top/i,t8=/right/i,ne=/bottom/i,nt=/left/i,nn={left:0,top:0,height:0,width:0,scrollLeft:0,scrollTop:0};class nr extends G.A{constructor(e){var n;super(Object.assign({},e)),n=this,this.removePortal=()=>{this._adapter.removePortal()},this.setDisplayNone=(e,n)=>{this._adapter.setDisplayNone(e,n)},this.updateStateIfCursorOnTrigger=e=>{var n,r;if(null==(n=null==e?void 0:e.matches)?void 0:n.call(e,":hover")){let e=this._adapter.getEventName(),n=this.getState("triggerEventSet");null==(r=n[e.mouseEnter])||r.call(n)}},this.onResize=()=>{this.getState("visible")&&this.calcPosition()},this.delayShow=()=>{let e=this.getProp("mouseEnterDelay");this.clearDelayTimer(),e>0?this._timer=setTimeout(()=>{this.show(),this.clearDelayTimer()},e):this.show()},this.show=()=>{if(this._initContainerPosition(),this._adapter.getAnimatingState())return;let e=this.getProp("content"),n=this.getProp("trigger"),r=this.getProp("clickTriggerToHide"),{visible:i,displayNone:s}=this.getStates();if(s&&this.setDisplayNone(!1),!i){if(this.clearDelayTimer(),this._adapter.on("portalInserted",()=>{this.calcPosition()}),"hover"===n){let e=()=>{var r;let i=this._adapter.getTriggerDOM();!n||(null==(r=null==i?void 0:i.matches)?void 0:r.call(i,":hover"))||this.hide(),this._adapter.off("portalInserted",e)};this._adapter.on("portalInserted",e)}this._adapter.on("positionUpdated",()=>{this._togglePortalVisible(!0)}),this._adapter.insertPortal(e,{left:-9999,top:-9999}),"custom"===n&&this._adapter.registerClickOutsideHandler(()=>{}),("click"===n||r||"contextMenu"===n)&&this._adapter.registerClickOutsideHandler(this.hide),this._bindScrollEvent(),this._bindResizeEvent()}},this.calcPosition=function(e,r,i){let s=!(arguments.length>3)||void 0===arguments[3]||arguments[3];e=(eH()(e)?n._adapter.getTriggerBounding():e)||Object.assign({},nn),i=(eH()(i)?n._adapter.getPopupContainerRect():i)||Object.assign({},nn),r=(eH()(r)?n._adapter.getWrapperBounding():r)||Object.assign({},nn);let o=n.calcPosStyle({triggerRect:e,wrapperRect:r,containerRect:i}),a=n.getProp("position");if(n.getProp("autoAdjustOverflow")){let{position:s,isHeightOverFlow:l,isWidthOverFlow:h}=n.adjustPosIfNeed(a,o,e,r,i);(a!==s||l||h)&&(a=s,o=n.calcPosStyle({triggerRect:e,wrapperRect:r,containerRect:i,position:a,spacing:null,isOverFlow:[l,h]}))}return s&&n._mounted&&n._adapter.setPosition(Object.assign(Object.assign({},o),{position:a})),o},this.delayHide=()=>{let e=this.getProp("mouseLeaveDelay");this.clearDelayTimer(),e>0?this._timer=setTimeout(()=>{this.hide(),this.clearDelayTimer()},e):this.hide()},this.hide=()=>{this.clearDelayTimer(),this._togglePortalVisible(!1),this._adapter.off("portalInserted"),this._adapter.off("positionUpdated")},this.handleContainerKeydown=e=>{let{guardFocus:n,closeOnEsc:r}=this.getProps();switch(e&&e.key){case"Escape":r&&this._handleEscKeyDown(e);break;case"Tab":if(n){let n=this._adapter.getContainer(),r=this._adapter.getFocusableElements(n);r.length&&(e.shiftKey?this._handleContainerShiftTabKeyDown(r,e):this._handleContainerTabKeyDown(r,e))}}},this._timer=null}init(){let{wrapperId:e}=this.getProps();this._mounted=!0,this._bindEvent(),this._shouldShow(),e||this._adapter.setId()}destroy(){this._mounted=!1,this.unBindEvent()}_bindEvent(){let e=this.getProp("trigger"),{triggerEventSet:n,portalEventSet:r}=this._generateEvent(e);this._bindTriggerEvent(n),this._bindPortalEvent(r),this._bindResizeEvent()}unBindEvent(){this._adapter.unregisterClickOutsideHandler(),this.unBindResizeEvent(),this.unBindScrollEvent(),clearTimeout(this._timer)}_bindTriggerEvent(e){this._adapter.registerTriggerEvent(e)}_bindPortalEvent(e){this._adapter.registerPortalEvent(e)}_bindResizeEvent(){this._adapter.registerResizeHandler(this.onResize)}unBindResizeEvent(){this._adapter.unregisterResizeHandler(this.onResize)}_adjustPos(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"reverse",i=arguments.length>3?arguments[3]:void 0;switch(r){case"reverse":default:return this._reversePos(e,n);case"expand":return this._expandPos(e,i);case"reduce":return this._reducePos(e)}}_reversePos(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n){if(t7.test(e))return e.replace("top","bottom").replace("Top","Bottom");else if(ne.test(e))return e.replace("bottom","top").replace("Bottom","Top")}else if(nt.test(e))return e.replace("left","right").replace("Left","Right");else if(t8.test(e))return e.replace("right","left").replace("Right","Left");return e}_expandPos(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;return e.concat(n)}_reducePos(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=["Top","Bottom","Left","Right"].find(n=>e.endsWith(n));return n?e.replace(n,""):e}clearDelayTimer(){this._timer&&(clearTimeout(this._timer),this._timer=null)}_generateEvent(e){let n=this._adapter.getEventName(),r={[n.keydown]:e=>{this._handleTriggerKeydown(e)}},i={};switch(e){case"focus":r[n.focus]=()=>{this.delayShow()},r[n.blur]=()=>{this.delayHide()},i=r;break;case"click":r[n.click]=()=>{this.show()},i={};break;case"hover":r[n.mouseEnter]=()=>{this.setCache("isClickToHide",!1),this.delayShow()},r[n.mouseLeave]=()=>{this.delayHide()},r[n.focus]=()=>{let{disableFocusListener:e}=this.getProps();e||this.delayShow()},r[n.blur]=()=>{let{disableFocusListener:e}=this.getProps();e||this.delayHide()},i=Object.assign({},r),this.getProp("clickToHide")&&(i[n.click]=()=>{this.setCache("isClickToHide",!0),this.hide()},i[n.mouseEnter]=()=>{this.getCache("isClickToHide")||this.delayShow()});break;case"custom":break;case"contextMenu":r[n.contextMenu]=e=>{e.preventDefault(),this.show()}}return{triggerEventSet:r,portalEventSet:i}}_shouldShow(){this.getProp("visible")&&this.show()}_togglePortalVisible(e){let n=this.getState("visible"),r=this.getState("isInsert");(n!==e||r!==e)&&this._adapter.togglePortalVisible(e,()=>{e&&this._adapter.setInitialFocus(),this._adapter.notifyVisibleChange(e)})}_roundPixel(e){return"number"==typeof e?Math.round(e):e}calcTransformOrigin(e,n,r,i){if(e&&n&&null!=r&&null!=i){if(this.getProp("transformFromCenter")){if(["topLeft","bottomLeft"].includes(e))return`${this._roundPixel(n.width/2)}px ${-(100*i)}%`;if(["topRight","bottomRight"].includes(e))return`calc(100% - ${this._roundPixel(n.width/2)}px) ${-(100*i)}%`;if(["leftTop","rightTop"].includes(e))return`${-(100*r)}% ${this._roundPixel(n.height/2)}px`;if(["leftBottom","rightBottom"].includes(e))return`${-(100*r)}% calc(100% - ${this._roundPixel(n.height/2)}px)`}return`${-(100*r)}% ${-(100*i)}%`}return null}calcPosStyle(e){var n;let r,i,{spacing:s,isOverFlow:o}=e,{innerWidth:a}=window,l=(eH()(e.triggerRect)?e.triggerRect:this._adapter.getTriggerBounding())||Object.assign({},nn),h=(eH()(e.containerRect)?e.containerRect:this._adapter.getPopupContainerRect())||Object.assign({},nn),c=(eH()(e.wrapperRect)?e.wrapperRect:this._adapter.getWrapperBounding())||Object.assign({},nn),u=null!=e.position?e.position:this.getProp("position"),d=null!=s?s:this.getProp("spacing"),{arrowPointAtCenter:p,showArrow:f,arrowBounding:g}=this.getProps(),m=f&&p,y=d,O=0;if("number"!=typeof d){let e=u.includes("top")||u.includes("bottom");y=e?d.y:d.x,O=e?d.x:d.y}let b=en()(g,"width",24),x=en()(g,"width",24),w=en()(g,"offsetY",0),S=0,_=0,k=l.left+l.width/2,C=l.top+l.height/2,E=6+b/2,T=6+x/2,P=c.height-h.height,A=c.width-h.width,M=P>0?P:0,N=A>0?A:0,D=o&&o[0],I=o&&o[1],$=k-h.left<h.right-k,R=C-h.top<h.bottom-C,L=c.width>a,Q=Math.abs((null==c?void 0:c.width)-(null==(n=this._adapter.getContainer())?void 0:n.clientWidth))>1;switch(Q&&(y=y*c.width/this._adapter.getContainer().clientWidth),u){case"top":r=I?$?h.left+c.width/2:h.right-c.width/2+N:k+O,i=D?h.bottom+M:l.top-y,S=-.5,_=-1;break;case"topLeft":r=I?L?h.left:h.right-c.width:m?k-E+O:l.left+O,i=D?h.bottom+M:l.top-y,_=-1;break;case"topRight":r=I?h.right+N:m?k+E+O:l.right+O,i=D?h.bottom+M:l.top-y,_=-1,S=-1;break;case"left":r=I?h.right+N-y+E:l.left-y,i=D?R?h.top+c.height/2:h.bottom-c.height/2+M:C+O,S=-1,_=-.5;break;case"leftTop":r=I?h.right+N-y+E:l.left-y,i=D?h.top:m?C-T+O:l.top+O,S=-1;break;case"leftBottom":r=I?h.right+N-y+E:l.left-y,i=D?h.bottom+M:m?C+T+O:l.bottom+O,S=-1,_=-1;break;case"bottom":r=I?$?h.left+c.width/2:h.right-c.width/2+N:k+O,i=D?h.top+T-y:l.top+l.height+y,S=-.5;break;case"bottomLeft":r=I?L?h.left:h.right-c.width:m?k-E+O:l.left+O,i=D?h.top+T-y:l.top+l.height+y;break;case"bottomRight":r=I?h.right+N:m?k+E+O:l.right+O,i=D?h.top+T-y:l.top+l.height+y,S=-1;break;case"right":r=I?h.left-y+E:l.right+y,i=D?R?h.top+c.height/2:h.bottom-c.height/2+M:C+O,_=-.5;break;case"rightTop":r=I?h.left-y+E:l.right+y,i=D?h.top:m?C-T+O:l.top+O;break;case"rightBottom":r=I?h.left-y+E:l.right+y,i=D?h.bottom+M:m?C+T+O:l.bottom+O,_=-1;break;case"leftTopOver":r=l.left-y,i=l.top-y;break;case"rightTopOver":r=l.right+y,i=l.top-y,S=-1;break;case"leftBottomOver":r=l.left-y,i=l.bottom+y,_=-1;break;case"rightBottomOver":r=l.right+y,i=l.bottom+y,S=-1,_=-1}let j=this.calcTransformOrigin(u,l,S,_),V=this._adapter.containerIsBody();if(r-=h.left,i-=h.top,Q&&(r/=c.width/this._adapter.getContainer().clientWidth),Q&&(i/=c.height/this._adapter.getContainer().clientHeight),V&&!this._adapter.containerIsRelativeOrAbsolute()){let e=this._adapter.getDocumentElementBounding();r+=h.left-e.left,i+=h.top-e.top}r=V?r:r+h.scrollLeft,i=V?i:i+h.scrollTop;let z=l.height;if(this.getProp("showArrow")&&!p&&z<=(x/2+w)*2){let e=z/2-(w+x/2);(u.includes("Top")||u.includes("Bottom"))&&!u.includes("Over")&&(i=u.includes("Top")?i+e:i-e)}let B={left:this._roundPixel(r),top:this._roundPixel(i)},F="";return null!=S&&(F+=`translateX(${100*S}%) `,Object.defineProperty(B,"translateX",{enumerable:!1,value:S})),null!=_&&(F+=`translateY(${100*_}%) `,Object.defineProperty(B,"translateY",{enumerable:!1,value:_})),null!=j&&(B.transformOrigin=j),F&&(B.transform=F),B}isLR(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.includes("left")||e.includes("right")}isTB(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.includes("top")||e.includes("bottom")}isReverse(e,n,r){return e<r&&n>r}isOverFlow(e,n,r){return e<r&&n<r}isHalfOverFlow(e,n,r){return e<r||n<r}isHalfAllEnough(e,n,r){return e>=r||n>=r}getReverse(e,n,r,i){return e&&i||r}adjustPosIfNeed(e,n,r,i,s){let{innerWidth:o,innerHeight:a}=window,{margin:l}=this.getProps(),h="number"==typeof l?l:l.marginLeft,c="number"==typeof l?l:l.marginTop,u="number"==typeof l?l:l.marginRight,d="number"==typeof l?l:l.marginBottom,p=!1,f=!1,g=this.getProp("spacing"),m=g,y=0;if("number"!=typeof g){let n=e.includes("top")||e.includes("bottom");m=n?g.y:g.x,y=n?g.x:g.y}if(i.width>0&&i.height>0){let n=r.left,l=r.right,g=r.top,O=r.bottom,b=o-n,x=a-g,w=o-l,S=a-O,_=i.width>r.width,k=i.height>r.height,C=g-c<i.height+m&&S-d>i.height+m,E=n-h<i.width+m&&w-u>i.width+m,T=S-d<i.height+m&&g-c>i.height+m,P=w-u<i.width+m&&n-h>i.width+m;x-d<i.height+m&&i.height,O-c<i.height+m&&i.height;let A=x<i.height+y&&O>i.height+y,M=O<i.height+y&&x>i.height+y,N=b<i.width+y&&l>i.width+y,D=l<i.width+y&&b>i.width+y,I=x<i.height+m&&O>i.height+m,$=O<i.height+m&&x>i.height+m,R=b<i.width&&l>i.width,L=l<i.width&&b>i.width,Q=g-s.top,j=n-s.left,V=Q+r.height,z=j+r.width,B=s.bottom-O,F=s.right-l,Z=B+r.height,q=F+r.width,W=this.isReverse(Q-c,B-d,i.height+m),X=this.isReverse(j-h,F-u,i.width+m),U=this.isReverse(B-d,Q-c,i.height+m),Y=this.isReverse(F-u,j-h,i.width+m);this.isReverse(Z-d,V-c,i.height+m),this.isReverse(V-c,Z-d,i.height+m);let G=this.isReverse(Z,V,i.height+y),H=this.isReverse(V,Z,i.height+y),K=this.isReverse(q,z,i.width+y),J=this.isReverse(z,q,i.width+y),ee=r.height/2,et=r.width/2,en=this.isOverFlow(g-c,S-d,i.height+m),er=this.isOverFlow(n-h,w-u,i.width+m),ei=this.isOverFlow(O-c,x-d,i.height+m),es=this.isOverFlow(l-h,b-u,i.width+m),eo=this.isHalfOverFlow(O-ee,x-ee,(i.height+y)/2),ea=this.isHalfOverFlow(l-et,b-et,(i.width+y)/2),el=this.isHalfAllEnough(O-ee,x-ee,(i.height+y)/2),eh=this.isHalfAllEnough(l-et,b-et,(i.width+y)/2),ec=this.isOverFlow(Q-c,B-d,i.height+m),eu=this.isOverFlow(j-h,F-u,i.width+m),ed=this.isOverFlow(V-c,Z-d,i.height+m),ep=this.isOverFlow(z-h,q-u,i.width+m),ef=this.isHalfOverFlow(V-ee,Z-ee,(i.height+y)/2),eg=this.isHalfOverFlow(z-et,q-et,(i.width+y)/2),em=this.isHalfAllEnough(V-ee,Z-ee,(i.height+y)/2),ey=this.isHalfAllEnough(z-et,q-et,(i.width+y)/2),eO=this.getReverse(en,ec,C,W),ev=this.getReverse(er,eu,E,X),eb=this.getReverse(en,ec,T,U),ex=this.getReverse(er,eu,P,Y),ew=this.getReverse(ei,ed,A,G),eS=this.getReverse(ei,ed,M,H),e_=this.getReverse(es,ep,N,K),ek=this.getReverse(es,ep,D,J),eC=eo&&ef,eE=ea&&eg;switch(e){case"top":eO&&(e=this._adjustPos(e,!0)),eE&&(e_||ek)&&(e=this._adjustPos(e,!0,"expand",e_?"Right":"Left"));break;case"topLeft":eO&&(e=this._adjustPos(e,!0)),e_&&_&&(e=this._adjustPos(e)),f&&(eh||ey)&&(e=this._adjustPos(e,!0,"reduce"));break;case"topRight":eO&&(e=this._adjustPos(e,!0)),ek&&_&&(e=this._adjustPos(e)),f&&(eh||ey)&&(e=this._adjustPos(e,!0,"reduce"));break;case"left":ev&&(e=this._adjustPos(e)),eC&&(ew||eS)&&(e=this._adjustPos(e,!1,"expand",ew?"Bottom":"Top"));break;case"leftTop":ev&&(e=this._adjustPos(e)),ew&&k&&(e=this._adjustPos(e,!0)),p&&(el||em)&&(e=this._adjustPos(e,!1,"reduce"));break;case"leftBottom":ev&&(e=this._adjustPos(e)),eS&&k&&(e=this._adjustPos(e,!0)),p&&(el||em)&&(e=this._adjustPos(e,!1,"reduce"));break;case"bottom":eb&&(e=this._adjustPos(e,!0)),eE&&(e_||ek)&&(e=this._adjustPos(e,!0,"expand",e_?"Right":"Left"));break;case"bottomLeft":eb&&(e=this._adjustPos(e,!0)),e_&&_&&(e=this._adjustPos(e)),f&&(eh||ey)&&(e=this._adjustPos(e,!0,"reduce"));break;case"bottomRight":eb&&(e=this._adjustPos(e,!0)),ek&&_&&(e=this._adjustPos(e)),f&&(eh||ey)&&(e=this._adjustPos(e,!0,"reduce"));break;case"right":ex&&(e=this._adjustPos(e)),eC&&(ew||eS)&&(e=this._adjustPos(e,!1,"expand",ew?"Bottom":"Top"));break;case"rightTop":ex&&(e=this._adjustPos(e)),ew&&k&&(e=this._adjustPos(e,!0)),p&&(el||em)&&(e=this._adjustPos(e,!1,"reduce"));break;case"rightBottom":ex&&(e=this._adjustPos(e)),eS&&k&&(e=this._adjustPos(e,!0)),p&&(el||em)&&(e=this._adjustPos(e,!1,"reduce"));break;case"leftTopOver":I&&(e=this._adjustPos(e,!0)),R&&(e=this._adjustPos(e));break;case"leftBottomOver":$&&(e=this._adjustPos(e,!0)),R&&(e=this._adjustPos(e));break;case"rightTopOver":I&&(e=this._adjustPos(e,!0)),L&&(e=this._adjustPos(e));break;case"rightBottomOver":$&&(e=this._adjustPos(e,!0)),L&&(e=this._adjustPos(e))}this.isTB(e)&&(p=en&&ec,f="top"===e||"bottom"===e?ea&&eg||l<0||w<0:es&&ep||l<0||w<0),this.isLR(e)&&(f=er&&eu,p="left"===e||"right"===e?eo&&ef||g<0||x<0:ei&&ed||g<0||x<0)}return{position:e,isHeightOverFlow:p,isWidthOverFlow:f}}_bindScrollEvent(){this._adapter.registerScrollHandler(()=>this.calcPosition())}unBindScrollEvent(){this._adapter.unregisterScrollHandler()}_initContainerPosition(){!this._adapter.getContainerPosition()&&this._adapter.containerIsBody()&&this._adapter.updateContainerPosition()}_handleTriggerKeydown(e){let{closeOnEsc:n,disableArrowKeyDown:r}=this.getProps(),i=this._adapter.getContainer(),s=this._adapter.getFocusableElements(i),o=s.length;switch(e&&e.key){case"Escape":er(e),n&&this._handleEscKeyDown(e);break;case"ArrowUp":!r&&o&&this._handleTriggerArrowUpKeydown(s,e);break;case"ArrowDown":!r&&o&&this._handleTriggerArrowDownKeydown(s,e)}}focusTrigger(){let{trigger:e,returnFocusOnClose:n,preventScroll:r}=this.getProps();if(n&&"custom"!==e){let e=this._adapter.getTriggerNode();e&&"focus"in e&&e.focus({preventScroll:r})}}_handleEscKeyDown(e){let{trigger:n}=this.getProps();"custom"!==n&&(this.focusTrigger(),this.hide()),this._adapter.notifyEscKeydown(e)}_handleContainerTabKeyDown(e,n){let{preventScroll:r}=this.getProps(),i=this._adapter.getActiveElement();e[e.length-1]===i&&(e[0].focus({preventScroll:r}),n.preventDefault())}_handleContainerShiftTabKeyDown(e,n){let{preventScroll:r}=this.getProps(),i=this._adapter.getActiveElement();e[0]===i&&(e[e.length-1].focus({preventScroll:r}),n.preventDefault())}_handleTriggerArrowDownKeydown(e,n){let{preventScroll:r}=this.getProps();e[0].focus({preventScroll:r}),n.preventDefault()}_handleTriggerArrowUpKeydown(e,n){let{preventScroll:r}=this.getProps();e[e.length-1].focus({preventScroll:r}),n.preventDefault()}}var ni=r(7460);class ns extends z.PureComponent{constructor(e,n){var r;super(e),r=this,this.initContainer=function(e){var n,i;let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{if(!r.el||!(null==(n=r.state)?void 0:n.container)||!Array.from(r.state.container.childNodes).includes(r.el)){r.el=document.createElement("div");let n=(r.props.getPopupContainer||e.getPopupContainer||(()=>document.body))();return n.appendChild(r.el),r.addStyle(r.props.style),r.addClass(r.props.prefixCls,e,r.props.className),n}}catch(e){if(!s)throw e}return null==(i=r.state)?void 0:i.container},this.addStyle=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r.el)for(let n of Object.keys(e))r.el.style[n]=e[n]},this.addClass=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.context,{direction:i}=n;for(var s=arguments.length,o=Array(s>2?s-2:0),a=2;a<s;a++)o[a-2]=arguments[a];let l=F()(e,...o,{[`${e}-rtl`]:"rtl"===i});r.el&&(r.el.className=l)},this.state={container:this.initContainer(n,!0)}}componentDidMount(){let e=this.initContainer(this.context);e!==this.state.container&&this.setState({container:e})}componentDidUpdate(e){let{didUpdate:n}=this.props;n&&n(e)}componentWillUnmount(){let{container:e}=this.state;e&&e.removeChild(this.el)}render(){let{state:e,props:n}=this;return e.container?(0,e2.createPortal)(n.children,this.el):null}}ns.contextType=eO,ns.defaultProps={prefixCls:`${W._}-portal`},ns.propTypes={children:q().node,prefixCls:q().string,getPopupContainer:q().func,className:q().string,didUpdate:q().func};var no=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};let na=e=>{let{className:n,style:r}=e,i=no(e,["className","style"]);return z.createElement("svg",Object.assign({"aria-hidden":!0,className:n,style:r},i,{width:"24",height:"7",viewBox:"0 0 24 7",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}),z.createElement("path",{d:"M24 0V1C20 1 18.5 2 16.5 4C14.5 6 14 7 12 7C10 7 9.5 6 7.5 4C5.5 2 4 1 0 1V0H24Z"}))};var nl=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};let nh=e=>{let{className:n,style:r}=e,i=nl(e,["className","style"]);return z.createElement("svg",Object.assign({"aria-hidden":!0,className:n,style:r},i,{width:"7",height:"24",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"}),z.createElement("path",{d:"M0 0L1 0C1 4, 2 5.5, 4 7.5S7,10 7,12S6 14.5, 4 16.5S1,20 1,24L0 24L0 0z"}))},nc=q().shape({offsetX:q().number,offsetY:q().number,width:q().number,height:q().number});class nu extends z.Component{constructor(e){super(e),this.handleAnimationStart=()=>{var e,n;null==(n=(e=this.props).onAnimationStart)||n.call(e)},this.handleAnimationEnd=()=>{this.setState({currentClassName:this.props.endClassName,extraStyle:{animationFillMode:this.props.fillMode},isAnimating:!1},()=>{var e,n;null==(n=(e=this.props).onAnimationEnd)||n.call(e,!1)})},this.state={currentClassName:this.props.startClassName,extraStyle:{animationFillMode:this.props.fillMode},isAnimating:!0}}componentDidMount(){var e,n,r,i;null==(n=(e=this.props).onAnimationStart)||n.call(e),this.props.motion||(null==(i=(r=this.props).onAnimationEnd)||i.call(r,!1),this.setState({isAnimating:!1}))}componentDidUpdate(e,n,r){let i=Object.keys(this.props).filter(n=>!eJ()(this.props[n],e[n]));i.includes("animationState"),(i.includes("startClassName")||i.includes("replayKey")||i.includes("motion"))&&this.setState({currentClassName:this.props.startClassName,extraStyle:{animationFillMode:this.props.fillMode},isAnimating:!0},()=>{var e,n,r,i;null==(n=(e=this.props).onAnimationStart)||n.call(e),this.props.motion||(null==(i=(r=this.props).onAnimationEnd)||i.call(r,this.state.isAnimating),this.setState({isAnimating:!1}))})}render(){var e;return this.props.motion?this.props.children({animationClassName:null!=(e=this.state.currentClassName)?e:"",animationStyle:this.state.extraStyle,animationEventsNeedBind:{onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},isAnimating:this.state.isAnimating}):this.props.children({animationClassName:"",animationStyle:{},animationEventsNeedBind:{},isAnimating:this.state.isAnimating})}}nu.defaultProps={motion:!0,replayKey:""};var nd=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};let np=tU.PREFIX,nf=["flex","block","table","flow-root","grid"],ng=()=>document.body;class nm extends ee.A{constructor(e){super(e),this.isAnimating=!1,this.cachedLatestTransitionState="enter",this.setContainerEl=e=>this.containerEl={current:e},this.isSpecial=e=>{if((0,ni.A)(e))return!!e.disabled;if((0,z.isValidElement)(e)){if(en()(e,"props.disabled"))return tG;let n=en()(e,"props.loading"),r=!eH()(e)&&!eH()(e.type)&&("Button"===en()(e,"type.elementType")||"IconButton"===en()(e,"type.elementType"));if(n&&r)return"loading"}return!1},this.didLeave=()=>{this.props.keepDOM?this.foundation.setDisplayNone(!0):this.foundation.removePortal(),this.foundation.unBindEvent()},this.renderIcon=()=>{let{placement:e}=this.state,{showArrow:n,prefixCls:r,style:i}=this.props,s=null,o=F()([`${r}-icon-arrow`]),a=en()(i,"backgroundColor"),l=(null==e?void 0:e.includes("left"))||(null==e?void 0:e.includes("right"))?z.createElement(nh,null):z.createElement(na,null);return n&&(s=(0,z.isValidElement)(n)?n:z.cloneElement(l,{className:o,style:{color:a,fill:"currentColor"}})),s},this.handlePortalInnerClick=e=>{this.props.clickToHide&&this.foundation.hide(),this.props.stopPropagation&&(0,es.dG)(e)},this.handlePortalMouseDown=e=>{this.props.stopPropagation&&(0,es.dG)(e)},this.handlePortalFocus=e=>{this.props.stopPropagation&&(0,es.dG)(e)},this.handlePortalBlur=e=>{this.props.stopPropagation&&(0,es.dG)(e)},this.handlePortalInnerKeyDown=e=>{this.foundation.handleContainerKeydown(e)},this.renderContentNode=e=>{let n={initialFocusRef:this.initialFocusRef};return eY()(e)?e(n):e},this.renderPortal=()=>{let{containerStyle:e={},visible:n,portalEventSet:r,placement:i,displayNone:s,transitionState:o,id:a,isPositionUpdated:l}=this.state,{prefixCls:h,content:c,showArrow:u,style:d,motion:p,role:f,zIndex:g}=this.props,m=this.renderContentNode(c),{className:y}=this.props,O=this.context.direction,b=F()(y,{[`${h}-wrapper`]:!0,[`${h}-wrapper-show`]:n,[`${h}-with-arrow`]:!!u,[`${h}-rtl`]:"rtl"===O}),x=this.renderIcon(),w=e_()(e,p?["transformOrigin"]:void 0),S=en()(e,"transformOrigin"),_=en()(d,"opacity",null),k=_||1,C=z.createElement(nu,{fillMode:"forwards",animationState:o,motion:p&&l,startClassName:"enter"===o?`${np}-animation-show`:`${np}-animation-hide`,onAnimationStart:()=>this.isAnimating=!0,onAnimationEnd:()=>{var e,n;"leave"===o&&(this.didLeave(),null==(n=(e=this.props).afterClose)||n.call(e)),this.isAnimating=!1}},e=>{let{animationStyle:n,animationClassName:o,animationEventsNeedBind:h}=e;return z.createElement("div",Object.assign({className:F()(b,o),style:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n),s?{display:"none"}:{}),{transformOrigin:S}),d),_?{opacity:l?k:"0"}:{})},r,h,{role:f,"x-placement":i,id:a}),z.createElement("div",{className:`${np}-content`},m),x)});return z.createElement(ns,{getPopupContainer:this.props.getPopupContainer,style:{zIndex:g}},z.createElement("div",{tabIndex:-1,className:`${W._}-portal-inner`,style:w,ref:this.setContainerEl,onClick:this.handlePortalInnerClick,onFocus:this.handlePortalFocus,onBlur:this.handlePortalBlur,onMouseDown:this.handlePortalMouseDown,onKeyDown:this.handlePortalInnerKeyDown},C))},this.wrapSpan=e=>{let{wrapperClassName:n}=this.props,r=en()(e,"props.style.display"),i=en()(e,"props.block"),s={};return"string"!=typeof e&&(s.display="inline-block"),(i||nf.includes(r))&&(s.width="100%"),z.createElement("span",{className:n,style:s},e)},this.mergeEvents=(e,n)=>{let r={};return t4()(n,(n,i)=>{"function"==typeof n&&(r[i]=function(){n(...arguments),e&&"function"==typeof e[i]&&e[i](...arguments)})}),r},this.getPopupId=()=>this.state.id,this.state={visible:!1,transitionState:"",triggerEventSet:{},portalEventSet:{},containerStyle:{},isInsert:!1,placement:e.position||"top",transitionStyle:{},isPositionUpdated:!1,id:e.wrapperId,displayNone:!1},this.foundation=new nr(this.adapter),this.eventManager=new t9,this.triggerEl=z.createRef(),this.containerEl=z.createRef(),this.initialFocusRef=z.createRef(),this.clickOutsideHandler=null,this.resizeHandler=null,this.isWrapped=!1,this.containerPosition=void 0}get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{on:function(){return e.eventManager.on(...arguments)},off:function(){return e.eventManager.off(...arguments)},getAnimatingState:()=>this.isAnimating,insertPortal:(e,n)=>{var{position:r}=n,i=nd(n,["position"]);this.cachedLatestTransitionState="enter",this.setState({isInsert:!0,transitionState:"enter",containerStyle:Object.assign(Object.assign({},this.state.containerStyle),i)},()=>{setTimeout(()=>{"enter"===this.cachedLatestTransitionState&&this.eventManager.emit("portalInserted")},0)})},removePortal:()=>{this.setState({isInsert:!1,isPositionUpdated:!1})},getEventName:()=>({mouseEnter:"onMouseEnter",mouseLeave:"onMouseLeave",mouseOut:"onMouseOut",mouseOver:"onMouseOver",click:"onClick",focus:"onFocus",blur:"onBlur",keydown:"onKeyDown",contextMenu:"onContextMenu"}),registerTriggerEvent:e=>{this.setState({triggerEventSet:e})},registerPortalEvent:e=>{this.setState({portalEventSet:e})},getTriggerBounding:()=>{let e=this.adapter.getTriggerNode();return this.triggerEl.current=e,e&&e.getBoundingClientRect()},getPopupContainerRect:()=>{let e=this.getPopupContainer(),n=null;return e&&(0,ni.A)(e)&&(n=Object.assign(Object.assign({},function(e){if(e&&"object"==typeof e)if("function"==typeof e.toJSON)return e.toJSON();else return["left","top","right","bottom","width","height"].reduce((n,r)=>(n[r]=e[r],n),{})}(e.getBoundingClientRect())),{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop})),n},containerIsBody:()=>this.getPopupContainer()===document.body,containerIsRelative:()=>{let e=this.getPopupContainer();return"relative"===window.getComputedStyle(e).getPropertyValue("position")},containerIsRelativeOrAbsolute:()=>["relative","absolute"].includes(this.containerPosition),getWrapperBounding:()=>{let e=this.containerEl&&this.containerEl.current;return e&&e.getBoundingClientRect()},getDocumentElementBounding:()=>document.documentElement.getBoundingClientRect(),setPosition:e=>{var{position:n}=e,r=nd(e,["position"]);this.setState({containerStyle:Object.assign(Object.assign({},this.state.containerStyle),r),placement:n,isPositionUpdated:!0},()=>{this.eventManager.emit("positionUpdated")})},setDisplayNone:(e,n)=>{this.setState({displayNone:e},n)},updatePlacementAttr:e=>{this.setState({placement:e})},togglePortalVisible:(e,n)=>{let r={};r.transitionState=e?"enter":"leave",r.visible=e,this.cachedLatestTransitionState=r.transitionState,this.mounted&&this.setState(r,()=>{n()})},registerClickOutsideHandler:e=>{this.clickOutsideHandler&&this.adapter.unregisterClickOutsideHandler(),this.clickOutsideHandler=n=>{if(!this.mounted)return!1;let r=this.triggerEl&&this.triggerEl.current,i=this.containerEl&&this.containerEl.current;r=e2.findDOMNode(r),i=e2.findDOMNode(i);let s=n.target,o=n.composedPath&&n.composedPath()||[s],a=!!this.props.clickTriggerToHide&&(r&&r.contains(s)||o.includes(r));(r&&!r.contains(s)&&i&&!i.contains(s)&&!(o.includes(i)||o.includes(r))||a)&&(this.props.onClickOutSide(n),e())},window.addEventListener("mousedown",this.clickOutsideHandler)},unregisterClickOutsideHandler:()=>{this.clickOutsideHandler&&(window.removeEventListener("mousedown",this.clickOutsideHandler),this.clickOutsideHandler=null)},registerResizeHandler:e=>{this.resizeHandler&&this.adapter.unregisterResizeHandler(),this.resizeHandler=t6()(n=>{if(!this.mounted)return!1;e(n)},10),window.addEventListener("resize",this.resizeHandler,!1)},unregisterResizeHandler:()=>{this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler,!1),this.resizeHandler=null)},notifyVisibleChange:e=>{this.props.onVisibleChange(e)},registerScrollHandler:e=>{this.scrollHandler&&this.adapter.unregisterScrollHandler(),this.scrollHandler=t6()(n=>{if(!this.mounted)return!1;let r=this.adapter.getTriggerNode();n.target.contains(r)&&e({x:n.target.scrollLeft,y:n.target.scrollTop})},10),window.addEventListener("scroll",this.scrollHandler,!0)},unregisterScrollHandler:()=>{this.scrollHandler&&(window.removeEventListener("scroll",this.scrollHandler,!0),this.scrollHandler=null)},canMotion:()=>!!this.props.motion,updateContainerPosition:()=>{let e=document.body.getAttribute("data-position");if(e){this.containerPosition=e;return}requestAnimationFrame(()=>{let e=this.getPopupContainer();if(e&&(0,ni.A)(e)){let n=window.getComputedStyle(e).getPropertyValue("position");document.body.setAttribute("data-position",n),this.containerPosition=n}})},getContainerPosition:()=>this.containerPosition,getContainer:()=>this.containerEl&&this.containerEl.current,getTriggerNode:()=>{let e=this.triggerEl.current;return(0,ni.A)(this.triggerEl.current)||(e=e2.findDOMNode(this.triggerEl.current)),e},getFocusableElements:e=>(0,es.iq)(e),getActiveElement:()=>(0,es.bq)(),setInitialFocus:()=>{let{preventScroll:e}=this.props,n=en()(this,"initialFocusRef.current");n&&"focus"in n&&n.focus({preventScroll:e})},notifyEscKeydown:e=>{this.props.onEscKeyDown(e)},setId:()=>{this.setState({id:ea()})},getTriggerDOM:()=>this.triggerEl.current?e2.findDOMNode(this.triggerEl.current):null})}componentDidMount(){this.mounted=!0,this.getPopupContainer=this.props.getPopupContainer||this.context.getPopupContainer||ng,this.foundation.init(),(0,es.Ct)(()=>{let e=this.triggerEl.current;!e||e instanceof HTMLElement||(e=(0,e2.findDOMNode)(e)),this.foundation.updateStateIfCursorOnTrigger(e)},1)}componentWillUnmount(){this.mounted=!1,this.foundation.destroy()}focusTrigger(){this.foundation.focusTrigger()}rePosition(){return this.foundation.calcPosition()}componentDidUpdate(e,n){H(this.props.mouseLeaveDelay<this.props.mouseEnterDelay,"[Semi Tooltip] 'mouseLeaveDelay' cannot be less than 'mouseEnterDelay', which may cause the dropdown layer to not be hidden."),e.visible!==this.props.visible&&(["hover","focus"].includes(this.props.trigger)?this.props.visible?this.foundation.delayShow():this.foundation.delayHide():this.props.visible?this.foundation.show():this.foundation.hide()),eJ()(e.rePosKey,this.props.rePosKey)||this.rePosition()}render(){let{isInsert:e,triggerEventSet:n,visible:r,id:i}=this.state,{wrapWhenSpecial:s,role:o,trigger:a}=this.props,{children:l}=this.props,h=Object.assign({},en()(l,"props.style")),c={};if(s){let e=this.isSpecial(l);e?(h.pointerEvents="none",e===tG&&(c.cursor="not-allowed"),l=(0,z.cloneElement)(l,{style:h}),"custom"!==a&&(l=this.wrapSpan(l)),this.isWrapped=!0):(0,z.isValidElement)(l)||(l=this.wrapSpan(l),this.isWrapped=!0)}let u={};"dialog"===o?(u["aria-expanded"]=r?"true":"false",u["aria-haspopup"]="dialog",u["aria-controls"]=i):u["aria-describedby"]=i;let d=z.cloneElement(l,Object.assign(Object.assign(Object.assign(Object.assign({},u),l.props),this.mergeEvents(l.props,n)),{style:Object.assign(Object.assign({},en()(l,"props.style")),c),className:F()(en()(l,"props.className")),ref:e=>{this.triggerEl.current=e;let{ref:n}=l;"function"==typeof n?n(e):n&&"object"==typeof n&&(n.current=e)},tabIndex:l.props.tabIndex||0,"data-popupid":i}));return z.createElement(z.Fragment,null,e?this.renderPortal():null,d)}}nm.contextType=eO,nm.propTypes={children:q().node,motion:q().bool,autoAdjustOverflow:q().bool,position:q().oneOf(tY),getPopupContainer:q().func,mouseEnterDelay:q().number,mouseLeaveDelay:q().number,trigger:q().oneOf(["hover","focus","click","custom","contextMenu"]).isRequired,className:q().string,wrapperClassName:q().string,clickToHide:q().bool,clickTriggerToHide:q().bool,visible:q().bool,style:q().object,content:q().oneOfType([q().node,q().func]),prefixCls:q().string,onVisibleChange:q().func,onClickOutSide:q().func,spacing:q().oneOfType([q().number,q().object]),margin:q().oneOfType([q().number,q().object]),showArrow:q().oneOfType([q().bool,q().node]),zIndex:q().number,rePosKey:q().oneOfType([q().string,q().number]),arrowBounding:nc,transformFromCenter:q().bool,arrowPointAtCenter:q().bool,stopPropagation:q().bool,role:q().string,wrapWhenSpecial:q().bool,guardFocus:q().bool,returnFocusOnClose:q().bool,preventScroll:q().bool,keepDOM:q().bool},nm.__SemiComponentName__="Tooltip",nm.defaultProps=(0,es.bQ)(nm.__SemiComponentName__,{arrowBounding:tH,autoAdjustOverflow:!0,arrowPointAtCenter:!0,trigger:"hover",transformFromCenter:!0,position:"top",prefixCls:np,role:"tooltip",mouseEnterDelay:50,mouseLeaveDelay:50,motion:!0,onVisibleChange:ep(),onClickOutSide:ep(),spacing:8,margin:0,showArrow:!0,wrapWhenSpecial:!0,zIndex:1060,closeOnEsc:!1,guardFocus:!1,returnFocusOnClose:!1,onEscKeyDown:ep(),disableFocusListener:!1,disableArrowKeyDown:!1,keepDOM:!1});var ny=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};let nO=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{position:n="",className:r,arrowStyle:i,popStyle:s}=e,o=ny(e,["position","className","arrowStyle","popStyle"]),a=0===n.indexOf("top")||0===n.indexOf("bottom"),l=F()(r,tK.ARROW),h=en()(i,"borderOpacity"),c=en()(i,"backgroundColor",en()(s,"backgroundColor")),u=en()(i,"borderColor",en()(s,"borderColor")),d=Object.assign(Object.assign({},o),{width:tJ.ARROW_BOUNDING.width,height:tJ.ARROW_BOUNDING.height,xmlns:"http://www.w3.org/2000/svg",className:l});return a?z.createElement("svg",Object.assign({},d),z.createElement("path",{d:"M0 0.5L0 1.5C4 1.5, 5.5 3, 7.5 5S10,8 12,8S14.5 7, 16.5 5S20,1.5 24,1.5L24 0.5L0 0.5z",style:{fill:u,opacity:h}}),z.createElement("path",{d:"M0 0L0 1C4 1, 5.5 2, 7.5 4S10,7 12,7S14.5  6, 16.5 4S20,1 24,1L24 0L0 0z",style:{fill:c}})):z.createElement("svg",Object.assign({},d),z.createElement("path",{d:"M0.5 0L1.5 0C1.5 4, 3 5.5, 5 7.5S8,10 8,12S7 14.5, 5 16.5S1.5,20 1.5,24L0.5 24L0.5 0z",style:{fill:u,opacity:h}}),z.createElement("path",{d:"M0 0L1 0C1 4, 2 5.5, 4 7.5S7,10 7,12S6 14.5, 4 16.5S1,20 1,24L0 24L0 0z",style:{fill:c}}))};nO.propTypes={position:q().string,className:q().string,arrowStyle:q().object,popStyle:q().object};var nv=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};class nb extends z.PureComponent{constructor(e){super(e),this.focusTrigger=()=>{var e;null==(e=this.tooltipRef.current)||e.focusTrigger()},this.renderPopCard=e=>{let{initialFocusRef:n}=e,{content:r,contentClassName:i,prefixCls:s}=this.props,{direction:o}=this.context,a=F()(s,i,{[`${s}-rtl`]:"rtl"===o}),l=this.renderContentNode({initialFocusRef:n,content:r});return z.createElement("div",{className:a},z.createElement("div",{className:`${s}-content`},l))},this.renderContentNode=e=>{let{initialFocusRef:n,content:r}=e;return eY()(r)?r({initialFocusRef:n}):r},this.tooltipRef=z.createRef()}render(){let e=this.props,{children:n,prefixCls:r,showArrow:i,arrowStyle:s={},arrowBounding:o,position:a,style:l,trigger:h}=e,c=nv(e,["children","prefixCls","showArrow","arrowStyle","arrowBounding","position","style","trigger"]),{spacing:u}=this.props,d=!!i&&z.createElement(nO,Object.assign({},{position:a,className:"",popStyle:l,arrowStyle:s}));return eN(u)&&(u=i?tJ.SPACING_WITH_ARROW:tJ.SPACING),z.createElement(nm,Object.assign({guardFocus:!0,ref:this.tooltipRef},c,{trigger:h,position:a,style:l,content:this.renderPopCard,prefixCls:r,spacing:u,showArrow:d,arrowBounding:o,role:"click"===h||"custom"===h?"dialog":"tooltip"}),n)}}nb.contextType=eO,nb.propTypes={children:q().node,content:q().oneOfType([q().node,q().func]),visible:q().bool,autoAdjustOverflow:q().bool,motion:q().bool,position:q().oneOf(["top","topLeft","topRight","left","leftTop","leftBottom","right","rightTop","rightBottom","bottom","bottomLeft","bottomRight","leftTopOver","rightTopOver"]),margin:q().oneOfType([q().number,q().object]),mouseEnterDelay:q().number,mouseLeaveDelay:q().number,trigger:q().oneOf(["hover","focus","click","custom","contextMenu"]).isRequired,contentClassName:q().oneOfType([q().string,q().array]),onVisibleChange:q().func,onClickOutSide:q().func,style:q().object,spacing:q().oneOfType([q().number,q().object]),zIndex:q().number,showArrow:q().bool,arrowStyle:q().shape({borderColor:q().string,backgroundColor:q().string,borderOpacity:q().oneOfType([q().string,q().number])}),arrowPointAtCenter:q().bool,arrowBounding:q().object,prefixCls:q().string,guardFocus:q().bool,disableArrowKeyDown:q().bool},nb.__SemiComponentName__="Popover",nb.defaultProps=(0,es.bQ)(nb.__SemiComponentName__,{arrowBounding:tJ.ARROW_BOUNDING,showArrow:!1,autoAdjustOverflow:!0,zIndex:tJ.DEFAULT_Z_INDEX,motion:!0,trigger:"hover",cancelText:"No",okText:"Yes",position:"bottom",prefixCls:tK.PREFIX,onClickOutSide:ep(),onEscKeyDown:ep(),closeOnEsc:!0,returnFocusOnClose:!0,guardFocus:!0,disableFocusListener:!0});let nx=nb,nw=z.createContext(null);var nS={lessThanXSeconds:{one:"不到 1 秒",other:"不到 {{count}} 秒"},xSeconds:{one:"1 秒",other:"{{count}} 秒"},halfAMinute:"半分钟",lessThanXMinutes:{one:"不到 1 分钟",other:"不到 {{count}} 分钟"},xMinutes:{one:"1 分钟",other:"{{count}} 分钟"},xHours:{one:"1 小时",other:"{{count}} 小时"},aboutXHours:{one:"大约 1 小时",other:"大约 {{count}} 小时"},xDays:{one:"1 天",other:"{{count}} 天"},aboutXWeeks:{one:"大约 1 个星期",other:"大约 {{count}} 个星期"},xWeeks:{one:"1 个星期",other:"{{count}} 个星期"},aboutXMonths:{one:"大约 1 个月",other:"大约 {{count}} 个月"},xMonths:{one:"1 个月",other:"{{count}} 个月"},aboutXYears:{one:"大约 1 年",other:"大约 {{count}} 年"},xYears:{one:"1 年",other:"{{count}} 年"},overXYears:{one:"超过 1 年",other:"超过 {{count}} 年"},almostXYears:{one:"将近 1 年",other:"将近 {{count}} 年"}};function n_(e){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.width?String(n.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}var nk={date:n_({formats:{full:"y'年'M'月'd'日' EEEE",long:"y'年'M'月'd'日'",medium:"yyyy-MM-dd",short:"yy-MM-dd"},defaultWidth:"full"}),time:n_({formats:{full:"zzzz a h:mm:ss",long:"z a h:mm:ss",medium:"a h:mm:ss",short:"a h:mm"},defaultWidth:"full"}),dateTime:n_({formats:{full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},defaultWidth:"full"})};function nC(e,n){if(n.length<e)throw TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+n.length+" present")}function nE(e){return(nE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var nT={};function nP(e,n){nC(1,arguments);var r,i,s,o,a,l,h,c,u=function(e){if(null===e||!0===e||!1===e)return NaN;var n=Number(e);return isNaN(n)?n:n<0?Math.ceil(n):Math.floor(n)}(null!=(r=null!=(i=null!=(s=null!=(o=null==n?void 0:n.weekStartsOn)?o:null==n||null==(a=n.locale)||null==(l=a.options)?void 0:l.weekStartsOn)?s:nT.weekStartsOn)?i:null==(h=nT.locale)||null==(c=h.options)?void 0:c.weekStartsOn)?r:0);if(!(u>=0&&u<=6))throw RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=function(e){nC(1,arguments);var n=Object.prototype.toString.call(e);return e instanceof Date||"object"===nE(e)&&"[object Date]"===n?new Date(e.getTime()):"number"==typeof e||"[object Number]"===n?new Date(e):(("string"==typeof e||"[object String]"===n)&&"undefined"!=typeof console&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(Error().stack)),new Date(NaN))}(e),p=d.getUTCDay();return d.setUTCDate(d.getUTCDate()-(7*(p<u)+p-u)),d.setUTCHours(0,0,0,0),d}function nA(e,n,r){var i="eeee p";return!function(e,n,r){nC(2,arguments);var i=nP(e,r),s=nP(n,r);return i.getTime()===s.getTime()}(e,n,r)?e.getTime()>n.getTime()?"'下个'"+i:"'上个'"+i:i}var nM={lastWeek:nA,yesterday:"'昨天' p",today:"'今天' p",tomorrow:"'明天' p",nextWeek:nA,other:"PP p"};function nN(e){return function(n,r){var i;if("formatting"===(null!=r&&r.context?String(r.context):"standalone")&&e.formattingValues){var s=e.defaultFormattingWidth||e.defaultWidth,o=null!=r&&r.width?String(r.width):s;i=e.formattingValues[o]||e.formattingValues[s]}else{var a=e.defaultWidth,l=null!=r&&r.width?String(r.width):e.defaultWidth;i=e.values[l]||e.values[a]}return i[e.argumentCallback?e.argumentCallback(n):n]}}function nD(e){return function(n){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=i.width,o=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],a=n.match(o);if(!a)return null;var l=a[0],h=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(h)?function(e,n){for(var r=0;r<e.length;r++)if(n(e[r]))return r}(h,function(e){return e.test(l)}):function(e,n){for(var r in e)if(e.hasOwnProperty(r)&&n(e[r]))return r}(h,function(e){return e.test(l)});return r=e.valueCallback?e.valueCallback(c):c,{value:r=i.valueCallback?i.valueCallback(r):r,rest:n.slice(l.length)}}}let nI={code:"zh-CN",currency:"CNY",dateFnsLocale:{code:"zh-CN",formatDistance:function(e,n,r){var i,s=nS[e];if(i="string"==typeof s?s:1===n?s.one:s.other.replace("{{count}}",String(n)),null!=r&&r.addSuffix)if(r.comparison&&r.comparison>0)return i+"内";else return i+"前";return i},formatLong:nk,formatRelative:function(e,n,r,i){var s=nM[e];return"function"==typeof s?s(n,r,i):s},localize:{ordinalNumber:function(e,n){var r=Number(e);switch(null==n?void 0:n.unit){case"date":return r.toString()+"日";case"hour":return r.toString()+"时";case"minute":return r.toString()+"分";case"second":return r.toString()+"秒";default:return"第 "+r.toString()}},era:nN({values:{narrow:["前","公元"],abbreviated:["前","公元"],wide:["公元前","公元"]},defaultWidth:"wide"}),quarter:nN({values:{narrow:["1","2","3","4"],abbreviated:["第一季","第二季","第三季","第四季"],wide:["第一季度","第二季度","第三季度","第四季度"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:nN({values:{narrow:["一","二","三","四","五","六","七","八","九","十","十一","十二"],abbreviated:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],wide:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},defaultWidth:"wide"}),day:nN({values:{narrow:["日","一","二","三","四","五","六"],short:["日","一","二","三","四","五","六"],abbreviated:["周日","周一","周二","周三","周四","周五","周六"],wide:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},defaultWidth:"wide"}),dayPeriod:nN({values:{narrow:{am:"上",pm:"下",midnight:"凌晨",noon:"午",morning:"早",afternoon:"下午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"},wide:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"}},defaultWidth:"wide",formattingValues:{narrow:{am:"上",pm:"下",midnight:"凌晨",noon:"午",morning:"早",afternoon:"下午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"},wide:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(o={matchPattern:/^(第\s*)?\d+(日|时|分|秒)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.match(o.matchPattern);if(!r)return null;var i=r[0],s=e.match(o.parsePattern);if(!s)return null;var a=o.valueCallback?o.valueCallback(s[0]):s[0];return{value:a=n.valueCallback?n.valueCallback(a):a,rest:e.slice(i.length)}}),era:nD({matchPatterns:{narrow:/^(前)/i,abbreviated:/^(前)/i,wide:/^(公元前|公元)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^(前)/i,/^(公元)/i]},defaultParseWidth:"any"}),quarter:nD({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^第[一二三四]刻/i,wide:/^第[一二三四]刻钟/i},defaultMatchWidth:"wide",parsePatterns:{any:[/(1|一)/i,/(2|二)/i,/(3|三)/i,/(4|四)/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:nD({matchPatterns:{narrow:/^(一|二|三|四|五|六|七|八|九|十[二一])/i,abbreviated:/^(一|二|三|四|五|六|七|八|九|十[二一]|\d|1[12])月/i,wide:/^(一|二|三|四|五|六|七|八|九|十[二一])月/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^一/i,/^二/i,/^三/i,/^四/i,/^五/i,/^六/i,/^七/i,/^八/i,/^九/i,/^十(?!(一|二))/i,/^十一/i,/^十二/i],any:[/^一|1/i,/^二|2/i,/^三|3/i,/^四|4/i,/^五|5/i,/^六|6/i,/^七|7/i,/^八|8/i,/^九|9/i,/^十(?!(一|二))|10/i,/^十一|11/i,/^十二|12/i]},defaultParseWidth:"any"}),day:nD({matchPatterns:{narrow:/^[一二三四五六日]/i,short:/^[一二三四五六日]/i,abbreviated:/^周[一二三四五六日]/i,wide:/^星期[一二三四五六日]/i},defaultMatchWidth:"wide",parsePatterns:{any:[/日/i,/一/i,/二/i,/三/i,/四/i,/五/i,/六/i]},defaultParseWidth:"any"}),dayPeriod:nD({matchPatterns:{any:/^(上午?|下午?|午夜|[中正]午|早上?|下午|晚上?|凌晨|)/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^上午?/i,pm:/^下午?/i,midnight:/^午夜/i,noon:/^[中正]午/i,morning:/^早上/i,afternoon:/^下午/i,evening:/^晚上?/i,night:/^凌晨/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:4}},Pagination:{pageSize:"每页条数：${pageSize}",total:"总页数：${total}",jumpTo:"跳至",page:"页"},Modal:{confirm:"确定",cancel:"取消"},Tabs:{more:"更多"},TimePicker:{placeholder:{time:"请选择时间",timeRange:"请选择时间范围"},begin:"开始时间",end:"结束时间",hour:"时",minute:"分",second:"秒",AM:"上午",PM:"下午"},DatePicker:{placeholder:{date:"请选择日期",dateTime:"请选择日期及时间",dateRange:["开始日期","结束日期"],dateTimeRange:["开始日期","结束日期"],monthRange:["开始月份","结束月份"]},presets:"快捷选择",footer:{confirm:"确定",cancel:"取消"},selectDate:"返回选择日期",selectTime:"选择时间",year:"年",month:"月",day:"日",monthText:"${year}年 ${month}",months:{1:"1月",2:"2月",3:"3月",4:"4月",5:"5月",6:"6月",7:"7月",8:"8月",9:"9月",10:"10月",11:"11月",12:"12月"},fullMonths:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},weeks:{Mon:"一",Tue:"二",Wed:"三",Thu:"四",Fri:"五",Sat:"六",Sun:"日"},localeFormatToken:{FORMAT_SWITCH_DATE:"yyyy-MM-dd"}},Navigation:{collapseText:"收起侧边栏",expandText:"展开侧边栏"},Popconfirm:{confirm:"确定",cancel:"取消"},Table:{emptyText:"暂无数据",pageText:"显示第 ${currentStart} 条-第 ${currentEnd} 条，共 ${total} 条",descend:"点击降序",ascend:"点击升序",cancelSort:"取消排序"},Select:{emptyText:"暂无数据",createText:"创建"},Cascader:{emptyText:"暂无数据"},Tree:{emptyText:"暂无数据",searchPlaceholder:"搜索"},List:{emptyText:"暂无数据"},Calendar:{allDay:"全天",AM:"上午${time}时",PM:"下午${time}时",datestring:"日",remaining:"还有${remained}项"},Upload:{mainText:"点击上传文件或拖拽文件到这里",illegalTips:"不支持此类型文件",legalTips:"松手开始上传",retry:"重试",replace:"替换文件",clear:"清空",selectedFiles:"已选择文件",illegalSize:"文件尺寸不合法",fail:"上传失败"},TreeSelect:{searchPlaceholder:"搜索"},Typography:{copy:"复制",copied:"复制成功",expand:"展开",collapse:"收起"},Transfer:{emptyLeft:"暂无数据",emptySearch:"无搜索结果",emptyRight:"暂无内容，可从左侧勾选",placeholder:"搜索",clear:"清空",selectAll:"全选",clearSelectAll:"取消全选",total:"总个数：${total}",selected:"已选个数：${total}"},Form:{optional:"（可选）"},Image:{preview:"预览",loading:"加载中",loadError:"加载失败",prevTip:"上一张",nextTip:"下一张",zoomInTip:"放大",zoomOutTip:"缩小",rotateTip:"旋转",downloadTip:"下载",adaptiveTip:"适应页面",originTip:"原始尺寸"},Chat:{deleteConfirm:"确认删除该会话吗？",clearContext:"上下文已清除",copySuccess:"复制成功",stop:"停止",copy:"复制",copied:"复制成功",dropAreaText:"将文件放到这里"},UserGuide:{skip:"跳过",next:"下一步",prev:"上一步",finish:"完成"},InputNumber:{},JsonViewer:{search:"查找",replace:"替换",replaceAll:"全部替换"},VideoPlayer:{rateChange:"切换速率至 ${rate}",qualityChange:"切换清晰度至${quality}",routeChange:"切换线路至${route}",mirror:"镜像",cancelMirror:"取消镜像",loading:"加载中...",stall:"加载失败",noResource:"暂无资源",videoError:"视频加载错误"}};class n$ extends z.Component{renderChildren(e,n){let{componentName:r}=this.props,i=e;(null==e?void 0:e.code)||(i=nI);let s=en()(nI,"dateFnsLocale"),o=en()(i,"dateFnsLocale",s),a=en()(i,"currency");return n(i[r],i.code,o,a)}render(){let{children:e}=this.props;return z.createElement(eO.Consumer,null,n=>{let{locale:r}=n;return z.createElement(nw.Consumer,null,n=>this.renderChildren(r||n,e))})}}n$.propTypes={componentName:q().string.isRequired,children:q().any},n$.defaultProps={componentName:""};var nR=r(69230),nL=r(41393);let nQ=(0,nL.T)(function(e){return z.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),z.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.35 4.27c.68.47.86 1.4.38 2.08l-10 14.5a1.5 1.5 0 0 1-2.33.17l-6.5-7a1.5 1.5 0 0 1 2.2-2.04l5.23 5.63 8.94-12.96a1.5 1.5 0 0 1 2.08-.38Z",fill:"currentColor"}))},"tick"),nj=`${W._}-spin`;class nV extends G.A{static get spinDefaultAdapter(){return{getProp:()=>void 0,setLoading:e=>void 0}}constructor(e){super(Object.assign(Object.assign({},nV.spinDefaultAdapter),e))}updateLoadingIfNeedDelay(){let{spinning:e,delay:n}=this._adapter.getProps(),{delay:r}=this._adapter.getStates();if(r){let r=this;this._timer=setTimeout(()=>{r._adapter.setState({loading:e,delay:0})},n)}}destroy(){this._timer&&(clearTimeout(this._timer),this._timer=null)}}var nz=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};let nB={PREFIX:nj}.PREFIX;class nF extends ee.A{constructor(e){super(e),this.foundation=new nV(this.adapter),this.state={delay:e.delay,loading:!0}}static getDerivedStateFromProps(e){return e.delay?!1===e.spinning?{delay:0,loading:!1}:{delay:e.delay}:{loading:e.spinning}}get adapter(){return Object.assign(Object.assign({},super.adapter),{setLoading:e=>{this.setState({loading:e})}})}componentWillUnmount(){this.foundation.destroy()}renderSpin(){let{indicator:e,tip:n}=this.props,{loading:r}=this.state;return r?z.createElement("div",{className:`${nB}-wrapper`},e?z.createElement("div",{className:`${nB}-animate`,"x-semi-prop":"indicator"},e):z.createElement(eR,null),n?z.createElement("div",{"x-semi-prop":"tip"},n):null):null}render(){this.foundation.updateLoadingIfNeedDelay();let e=this.props,{children:n,style:r,wrapperClassName:i,childStyle:s,size:o}=e,a=nz(e,["children","style","wrapperClassName","childStyle","size"]),{loading:l}=this.state,h=F()(nB,i,{[`${nB}-${o}`]:o,[`${nB}-block`]:n,[`${nB}-hidden`]:!l});return z.createElement("div",Object.assign({className:h,style:r},this.getDataAttr(a)),this.renderSpin(),z.createElement("div",{className:`${nB}-children`,style:s,"x-semi-prop":"children"},n))}}nF.propTypes={size:q().oneOf(["small","middle","large"]),spinning:q().bool,children:q().node,indicator:q().node,delay:q().number,tip:q().node,wrapperClassName:q().string,childStyle:q().object,style:q().object},nF.__SemiComponentName__="Spin",nF.defaultProps=(0,es.bQ)(nF.__SemiComponentName__,{size:"middle",spinning:!0,children:null,indicator:null,delay:0});var nZ=r(53812),nq=r.n(nZ);let nW={PREFIX:`${W._}-checkbox`,INNER:`${W._}-checkbox-inner`,TEXT:`${W._}-checkbox-text`,INPUT:`${W._}-checkbox-input`,CHECKED:`${W._}-checkbox-checked`,DISABLED:`${W._}-checkbox-disabled`,BUTTON:`${W._}-checkbox-button`,WRAPPER:""},nX={PREFIX:`${W._}-checkboxGroup`,INNER:`${W._}-checkboxGroup-inner`,TEXT:`${W._}-checkboxGroup-text`,INPUT:`${W._}-checkboxGroup-input`,CHECKED:`${W._}-checkboxGroup-checked`,DISABLED:`${W._}-checkboxGroup-disabled`},nU="default",nY="card",nG="pureCard";class nH extends G.A{constructor(e){super(Object.assign({},e)),this.clickState=!1,this.handleFocusVisible=e=>{let{target:n}=e;try{if(this.clickState){this.clickState=!1;return}n.matches(":focus-visible")&&this._adapter.setFocusVisible(!0)}catch(e){H(!0,"Warning: [Semi Checkbox] The current browser does not support the focus-visible")}},this.handleBlur=()=>{this.clickState=!1,this._adapter.setFocusVisible(!1)}}init(){let{children:e,extra:n,extraId:r,addonId:i}=this.getProps();e&&!i&&this._adapter.setAddonId(),n&&!r&&this._adapter.setExtraId()}notifyChange(e,n){let r=this._adapter.generateEvent(e,n);this._adapter.notifyChange(r)}handleChange(e){if(this.getProp("disabled"))return;if((null==e?void 0:e.type)==="click"&&(this.clickState=!0),this._adapter.focusCheckboxEntity(),this._adapter.getIsInGroup()){this._adapter.getGroupDisabled()||this.handleChangeInGroup(e);return}let n=!this.getState("checked");this._isControlledComponent("checked")||this.setChecked(n),this.notifyChange(n,e)}handleChangeInGroup(e){let{value:n}=this.getProps(),r=this._adapter.getGroupValue().includes(n),i=this._adapter.generateEvent(!r,e);this._adapter.notifyChange(i),this._adapter.notifyGroupChange(i)}handleEnterPress(e){tW(e)&&this.handleChange(e)}setChecked(e){this._adapter.setNativeControlChecked(e)}destroy(){}}let nK=z.createContext({}),nJ=(0,nL.T)(function(e){return z.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),z.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.41 7.3c.66.51.78 1.45.28 2.11l-6.5 8.5a1.5 1.5 0 0 1-2.37.01l-3.5-4.5a1.5 1.5 0 1 1 2.36-1.84L10 14.54l5.32-6.95a1.5 1.5 0 0 1 2.1-.28Z",fill:"currentColor"}))},"checkbox_tick"),n0=(0,nL.T)(function(e){return z.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),z.createElement("path",{d:"M5 12.5c0-.83.67-1.5 1.5-1.5h11a1.5 1.5 0 0 1 0 3h-11A1.5 1.5 0 0 1 5 12.5Z",fill:"currentColor"}))},"checkbox_indeterminate");class n1 extends z.PureComponent{blur(){this.inputEntity.blur()}focus(){let{preventScroll:e}=this.props;this.inputEntity.focus({preventScroll:e})}render(){let{indeterminate:e,checked:n,disabled:r,prefixCls:i,name:s,isPureCardType:o,addonId:a,extraId:l,focusInner:h,onInputFocus:c,onInputBlur:u}=this.props,d=i||nW.PREFIX,p=F()({[`${d}-inner`]:!0,[`${d}-inner-checked`]:!!n,[`${d}-inner-pureCardType`]:o},nW.WRAPPER),f=F()({[`${d}-inner-display`]:!0,[`${d}-focus`]:h,[`${d}-focus-border`]:h&&!n}),g=n?z.createElement(nJ,null):e?z.createElement(n0,null):null,m={type:"checkbox","aria-label":this.props["aria-label"],"aria-disabled":r,"aria-checked":n,"aria-labelledby":a,"aria-describedby":l||this.props["aria-describedby"],"aria-invalid":this.props["aria-invalid"],"aria-errormessage":this.props["aria-errormessage"],"aria-required":this.props["aria-required"],className:nW.INPUT,onChange:ep(),checked:n,disabled:r,onFocus:c,onBlur:u};return s&&(m.name=s),z.createElement("span",{className:p},z.createElement("input",Object.assign({},m,{ref:e=>{this.inputEntity=e}})),z.createElement("span",{className:f},g))}}n1.contextType=nK,n1.propTypes={"aria-describedby":q().string,"aria-errormessage":q().string,"aria-invalid":q().bool,"aria-labelledby":q().string,"aria-required":q().bool,checked:q().bool,disabled:q().bool,onChange:q().func,children:q().node,grouped:q().bool,value:q().any,isPureCardType:q().bool,addonId:q().string,extraId:q().string,focusInner:q().bool,onInputFocus:q().func,onInputBlur:q().func,preventScroll:q().bool},n1.defaultProps={onChange:ep()};class n2 extends ee.A{get adapter(){return Object.assign(Object.assign({},super.adapter),{setNativeControlChecked:e=>{this.setState({checked:e})},notifyChange:e=>{let{onChange:n}=this.props;n&&n(e)},generateEvent:(e,n)=>{let{props:r}=this;return{target:Object.assign(Object.assign({},r),{checked:e}),stopPropagation:()=>{n.stopPropagation()},preventDefault:()=>{n.preventDefault()},nativeEvent:{stopImmediatePropagation:()=>{n.nativeEvent&&"function"==typeof n.nativeEvent.stopImmediatePropagation&&n.nativeEvent.stopImmediatePropagation()}}}},getIsInGroup:()=>this.isInGroup(),getGroupValue:()=>this.context&&this.context.checkboxGroup.value||[],notifyGroupChange:e=>{this.context.checkboxGroup.onChange(e)},getGroupDisabled:()=>this.context&&this.context.checkboxGroup.disabled,setAddonId:()=>{this.setState({addonId:ea({prefix:"addon"})})},setExtraId:()=>{this.setState({extraId:ea({prefix:"extra"})})},setFocusVisible:e=>{this.setState({focusVisible:e})},focusCheckboxEntity:()=>{this.focus()}})}constructor(e){super(e),this.handleChange=e=>this.foundation.handleChange(e),this.handleEnterPress=e=>this.foundation.handleEnterPress(e),this.handleFocusVisible=e=>{this.foundation.handleFocusVisible(e)},this.handleBlur=e=>{this.foundation.handleBlur()},this.state={checked:e.checked||e.defaultChecked||!1,addonId:e.addonId,extraId:e.extraId,focusVisible:!1},this.checkboxEntity=null,this.foundation=new nH(this.adapter)}componentDidUpdate(e){this.props.checked!==e.checked&&(e7()(this.props.checked)?this.foundation.setChecked(!1):nq()(this.props.checked)&&this.foundation.setChecked(this.props.checked))}isInGroup(){return!!(this.context&&this.context.checkboxGroup&&"value"in this.props)}focus(){this.checkboxEntity&&this.checkboxEntity.focus()}blur(){this.checkboxEntity&&this.checkboxEntity.blur()}render(){let{disabled:e,style:n,prefixCls:r,className:i,indeterminate:s,children:o,onMouseEnter:a,onMouseLeave:l,extra:h,value:c,role:u,tabIndex:d,id:p,type:f}=this.props,{checked:g,addonId:m,extraId:y,focusVisible:O}=this.state,b={checked:g,disabled:e},x=this.isInGroup();if(x){this.context.checkboxGroup.value&&(b.checked=(this.context.checkboxGroup.value||[]).includes(c)),this.context.checkboxGroup.disabled&&(b.disabled=this.context.checkboxGroup.disabled||this.props.disabled);let{isCardType:e,isPureCardType:n}=this.context.checkboxGroup;b.isCardType=e,b.isPureCardType=n,b.name=this.context.checkboxGroup.name}else b.isPureCardType=f===nG,b.isCardType=f===nY||b.isPureCardType;let w=r||nW.PREFIX,S=b.isCardType||b.isPureCardType,_=F()(w,{[`${w}-disabled`]:b.disabled,[`${w}-indeterminate`]:s,[`${w}-checked`]:b.checked,[`${w}-unChecked`]:!b.checked,[`${w}-cardType`]:b.isCardType,[`${w}-cardType_disabled`]:b.disabled&&b.isCardType,[`${w}-cardType_enable`]:!(b.disabled&&b.isCardType),[`${w}-cardType_checked`]:b.isCardType&&b.checked&&!b.disabled,[`${w}-cardType_checked_disabled`]:b.isCardType&&b.checked&&b.disabled,[i]:!!i,[`${w}-focus`]:O&&S}),k=F()(`${w}-extra`,{[`${w}-cardType_extra_noChildren`]:b.isCardType&&!o});x&&this.context.checkboxGroup.name;let C=this.props["x-semi-children-alias"]||"children";return z.createElement("span",Object.assign({role:u,tabIndex:d,style:n,className:_,id:p,onMouseEnter:a,onMouseLeave:l,onClick:this.handleChange,onKeyPress:this.handleEnterPress,"aria-labelledby":this.props["aria-labelledby"]},this.getDataAttr(this.props)),z.createElement(n1,Object.assign({},this.props,b,{addonId:o&&m,extraId:h&&y,isPureCardType:b.isPureCardType,ref:e=>{this.checkboxEntity=e},focusInner:O&&!S,onInputFocus:this.handleFocusVisible,onInputBlur:this.handleBlur})),o||h?z.createElement("div",{className:`${w}-content`},o?z.createElement("span",{id:m,className:`${w}-addon`,"x-semi-prop":C},o):null,h?z.createElement("div",{id:y,className:k,"x-semi-prop":"extra"},h):null):null)}}n2.contextType=nK,n2.propTypes={"aria-describedby":q().string,"aria-errormessage":q().string,"aria-invalid":q().bool,"aria-labelledby":q().string,"aria-required":q().bool,checked:q().bool,defaultChecked:q().bool,disabled:q().bool,indeterminate:q().bool,onChange:q().func,value:q().any,style:q().object,className:q().string,prefixCls:q().string,onMouseEnter:q().func,onMouseLeave:q().func,extra:q().node,index:q().number,"aria-label":q().string,tabIndex:q().number,preventScroll:q().bool,type:q().string},n2.defaultProps={defaultChecked:!1,indeterminate:!1,onChange:ep(),onMouseEnter:ep(),onMouseLeave:ep(),type:"default"},n2.elementType="Checkbox";let n5=n2;class n4 extends G.A{static get checkboxGroupDefaultAdapter(){return{}}constructor(e){super(Object.assign(Object.assign({},n4.checkboxGroupDefaultAdapter),e))}init(){let{defaultValue:e,value:n}=this.getProps();void 0===e||Array.isArray(e)||H(!0,"Warning: [Semi CheckboxGroup] defaultValue should be an Array"),void 0===n||Array.isArray(n)||H(!0,"Warning: [Semi CheckboxGroup] value should be an Array")}notifyChange(e){this._adapter.notifyChange(e)}handleChange(e){let n=this.getState("value"),r=[];Array.isArray(n)||(r=[n]),r=e.target.checked?[...n,e.target.value]:n.filter((n,r)=>n!==e.target.value),"value"in this.getProps()||this._adapter.updateGroupValue(r),this.notifyChange(r)}getFormatName(){return this.getProp("name")||"default"}handlePropValueChange(e){Array.isArray(e)?this._adapter.updateGroupValue(e):(void 0===e&&this._adapter.updateGroupValue([]),H(!0,"Warning: [Semi CheckboxGroup] value should be an Array"))}destroy(){}}class n3 extends ee.A{get adapter(){return Object.assign(Object.assign({},super.adapter),{updateGroupValue:e=>{this.setState({value:e})},notifyChange:e=>{this.props.onChange&&this.props.onChange(e)}})}constructor(e){super(e),this.state={value:e.value||e.defaultValue},this.foundation=new n4(this.adapter),this.onChange=this.onChange.bind(this)}componentDidMount(){this.foundation.init()}componentDidUpdate(e){eJ()(e.value,this.props.value)||this.foundation.handlePropValueChange(this.props.value)}componentWillUnmount(){this.foundation.destroy()}onChange(e){this.foundation.handleChange(e)}render(){let e,{children:n,options:r,prefixCls:i,direction:s,className:o,id:a,style:l,type:h,disabled:c}=this.props,u=h===nG,d=h===nY||u,p=i||nX.PREFIX,f=F()({[p]:!0,[`${p}-wrapper`]:!0,[`${p}-${s}`]:s,[`${p}-${s}-cardType`]:s&&d,[`${p}-${s}-pureCardType`]:s&&u},o),g=this.state.value.slice();return r?e=(r||[]).map((e,n)=>"string"==typeof e?z.createElement(n5,{role:"listitem",key:n,disabled:this.props.disabled,value:e,prefixCls:i},e):z.createElement(n5,{role:"listitem",key:n,disabled:e.disabled||this.props.disabled,value:e.value,prefixCls:i,extra:e.extra,className:e.className,style:e.style,onChange:e.onChange},e.label)):n&&(e=z.Children.toArray(n).map((e,n)=>z.cloneElement(e,{key:n,role:"listitem"}))),z.createElement("div",Object.assign({id:a,role:"list","aria-label":this.props["aria-label"],className:f,style:l,"aria-labelledby":this.props["aria-labelledby"],"aria-describedby":this.props["aria-describedby"]},this.getDataAttr(this.props)),z.createElement(nK.Provider,{value:{checkboxGroup:{onChange:this.onChange,value:g,disabled:this.props.disabled,name:this.foundation.getFormatName(),isCardType:d,isPureCardType:u}}},e))}}n3.propTypes={"aria-describedby":q().string,"aria-errormessage":q().string,"aria-invalid":q().bool,"aria-labelledby":q().string,"aria-required":q().bool,defaultValue:q().array,disabled:q().bool,name:q().string,options:q().array,value:q().array,onChange:q().func,children:q().node,prefixCls:q().string,direction:q().oneOf(["horizontal","vertical"]),className:q().string,type:q().oneOf([nU,nY,nG]),style:q().object},n3.defaultProps={disabled:!1,onChange:()=>{},type:nU,defaultValue:[],direction:"vertical"};class n6 extends n5{}n6.Group=n3;let n9=n6;function n7(){return(n7=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)({}).hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(null,arguments)}function n8(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(e,n){return(re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e})(e,n)}var rt=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function rn(e,n){if(e.length!==n.length)return!1;for(var r,i,s=0;s<e.length;s++)if(!((r=e[s])===(i=n[s])||rt(r)&&rt(i))&&1)return!1;return!0}let rr=function(e,n){void 0===n&&(n=rn);var r,i,s=[],o=!1;return function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return o&&r===this&&n(a,s)||(i=e.apply(this,a),o=!0,r=this,s=a),i}};var ri="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function rs(e){cancelAnimationFrame(e.id)}var ro=-1;function ra(e){if(void 0===e&&(e=!1),-1===ro||e){var n=document.createElement("div"),r=n.style;r.width="50px",r.height="50px",r.overflow="scroll",document.body.appendChild(n),ro=n.offsetWidth-n.clientWidth,document.body.removeChild(n)}return ro}var rl=null;function rh(e){if(void 0===e&&(e=!1),null===rl||e){var n=document.createElement("div"),r=n.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";var i=document.createElement("div"),s=i.style;s.width="100px",s.height="100px",n.appendChild(i),document.body.appendChild(n),n.scrollLeft>0?rl="positive-descending":(n.scrollLeft=1,rl=0===n.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(n)}return rl}var rc=function(e,n){return e},ru=function(e,n){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,n.instance},rd=(h=(a={getItemOffset:function(e,n){return n*e.itemSize},getItemSize:function(e,n){return e.itemSize},getEstimatedTotalSize:function(e){var n=e.itemCount;return e.itemSize*n},getOffsetForIndexAndAlignment:function(e,n,r,i,s,o){var a=e.direction,l=e.height,h=e.itemCount,c=e.itemSize,u=e.layout,d=e.width,p="horizontal"===a||"horizontal"===u?d:l,f=Math.max(0,h*c-p),g=Math.min(f,n*c),m=Math.max(0,n*c-p+c+o);switch("smart"===r&&(r=i>=m-p&&i<=g+p?"auto":"center"),r){case"start":return g;case"end":return m;case"center":var y=Math.round(m+(g-m)/2);if(y<Math.ceil(p/2))return 0;if(y>f+Math.floor(p/2))return f;return y;default:if(i>=m&&i<=g)return i;if(i<m)return m;return g}},getStartIndexForOffset:function(e,n){return Math.max(0,Math.min(e.itemCount-1,Math.floor(n/e.itemSize)))},getStopIndexForStartIndex:function(e,n,r){var i=e.direction,s=e.height,o=e.itemCount,a=e.itemSize,l=e.layout,h=e.width,c=Math.ceil((("horizontal"===i||"horizontal"===l?h:s)+r-n*a)/a);return Math.max(0,Math.min(o-1,n+c-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}}).getItemOffset,c=a.getEstimatedTotalSize,u=a.getItemSize,d=a.getOffsetForIndexAndAlignment,p=a.getStartIndexForOffset,f=a.getStopIndexForStartIndex,g=a.initInstanceProps,m=a.shouldResetStyleCacheOnItemSizeChange,y=a.validateProps,(l=function(e){function n(n){var r;return(r=e.call(this,n)||this)._instanceProps=g(r.props,n8(r)),r._outerRef=void 0,r._resetIsScrollingTimeoutId=null,r.state={instance:n8(r),isScrolling:!1,scrollDirection:"forward",scrollOffset:"number"==typeof r.props.initialScrollOffset?r.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},r._callOnItemsRendered=void 0,r._callOnItemsRendered=rr(function(e,n,i,s){return r.props.onItemsRendered({overscanStartIndex:e,overscanStopIndex:n,visibleStartIndex:i,visibleStopIndex:s})}),r._callOnScroll=void 0,r._callOnScroll=rr(function(e,n,i){return r.props.onScroll({scrollDirection:e,scrollOffset:n,scrollUpdateWasRequested:i})}),r._getItemStyle=void 0,r._getItemStyle=function(e){var n,i=r.props,s=i.direction,o=i.itemSize,a=i.layout,l=r._getItemStyleCache(m&&o,m&&a,m&&s);if(l.hasOwnProperty(e))n=l[e];else{var c=h(r.props,e,r._instanceProps),d=u(r.props,e,r._instanceProps),p="horizontal"===s||"horizontal"===a,f="rtl"===s,g=p?c:0;l[e]=n={position:"absolute",left:f?void 0:g,right:f?g:void 0,top:p?0:c,height:p?"100%":d,width:p?d:"100%"}}return n},r._getItemStyleCache=void 0,r._getItemStyleCache=rr(function(e,n,r){return{}}),r._onScrollHorizontal=function(e){var n=e.currentTarget,i=n.clientWidth,s=n.scrollLeft,o=n.scrollWidth;r.setState(function(e){if(e.scrollOffset===s)return null;var n=r.props.direction,a=s;if("rtl"===n)switch(rh()){case"negative":a=-s;break;case"positive-descending":a=o-i-s}return a=Math.max(0,Math.min(a,o-i)),{isScrolling:!0,scrollDirection:e.scrollOffset<a?"forward":"backward",scrollOffset:a,scrollUpdateWasRequested:!1}},r._resetIsScrollingDebounced)},r._onScrollVertical=function(e){var n=e.currentTarget,i=n.clientHeight,s=n.scrollHeight,o=n.scrollTop;r.setState(function(e){if(e.scrollOffset===o)return null;var n=Math.max(0,Math.min(o,s-i));return{isScrolling:!0,scrollDirection:e.scrollOffset<n?"forward":"backward",scrollOffset:n,scrollUpdateWasRequested:!1}},r._resetIsScrollingDebounced)},r._outerRefSetter=function(e){var n=r.props.outerRef;r._outerRef=e,"function"==typeof n?n(e):null!=n&&"object"==typeof n&&n.hasOwnProperty("current")&&(n.current=e)},r._resetIsScrollingDebounced=function(){var e,n,i;null!==r._resetIsScrollingTimeoutId&&rs(r._resetIsScrollingTimeoutId),e=r._resetIsScrolling,n=ri(),r._resetIsScrollingTimeoutId=i={id:requestAnimationFrame(function r(){ri()-n>=150?e.call(null):i.id=requestAnimationFrame(r)})}},r._resetIsScrolling=function(){r._resetIsScrollingTimeoutId=null,r.setState({isScrolling:!1},function(){r._getItemStyleCache(-1,null)})},r}n.prototype=Object.create(e.prototype),n.prototype.constructor=n,re(n,e),n.getDerivedStateFromProps=function(e,n){return ru(e,n),y(e),null};var r=n.prototype;return r.scrollTo=function(e){e=Math.max(0,e),this.setState(function(n){return n.scrollOffset===e?null:{scrollDirection:n.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},r.scrollToItem=function(e,n){void 0===n&&(n="auto");var r=this.props,i=r.itemCount,s=r.layout,o=this.state.scrollOffset;e=Math.max(0,Math.min(e,i-1));var a=0;if(this._outerRef){var l=this._outerRef;a="vertical"===s?l.scrollWidth>l.clientWidth?ra():0:l.scrollHeight>l.clientHeight?ra():0}this.scrollTo(d(this.props,e,n,o,this._instanceProps,a))},r.componentDidMount=function(){var e=this.props,n=e.direction,r=e.initialScrollOffset,i=e.layout;if("number"==typeof r&&null!=this._outerRef){var s=this._outerRef;"horizontal"===n||"horizontal"===i?s.scrollLeft=r:s.scrollTop=r}this._callPropsCallbacks()},r.componentDidUpdate=function(){var e=this.props,n=e.direction,r=e.layout,i=this.state,s=i.scrollOffset;if(i.scrollUpdateWasRequested&&null!=this._outerRef){var o=this._outerRef;if("horizontal"===n||"horizontal"===r)if("rtl"===n)switch(rh()){case"negative":o.scrollLeft=-s;break;case"positive-ascending":o.scrollLeft=s;break;default:var a=o.clientWidth,l=o.scrollWidth;o.scrollLeft=l-a-s}else o.scrollLeft=s;else o.scrollTop=s}this._callPropsCallbacks()},r.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&rs(this._resetIsScrollingTimeoutId)},r.render=function(){var e=this.props,n=e.children,r=e.className,i=e.direction,s=e.height,o=e.innerRef,a=e.innerElementType,l=e.innerTagName,h=e.itemCount,u=e.itemData,d=e.itemKey,p=void 0===d?rc:d,f=e.layout,g=e.outerElementType,m=e.outerTagName,y=e.style,O=e.useIsScrolling,b=e.width,x=this.state.isScrolling,w="horizontal"===i||"horizontal"===f,S=w?this._onScrollHorizontal:this._onScrollVertical,_=this._getRangeToRender(),k=_[0],C=_[1],E=[];if(h>0)for(var T=k;T<=C;T++)E.push((0,z.createElement)(n,{data:u,key:p(T,u),index:T,isScrolling:O?x:void 0,style:this._getItemStyle(T)}));var P=c(this.props,this._instanceProps);return(0,z.createElement)(g||m||"div",{className:r,onScroll:S,ref:this._outerRefSetter,style:n7({position:"relative",height:s,width:b,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:i},y)},(0,z.createElement)(a||l||"div",{children:E,ref:o,style:{height:w?"100%":P,pointerEvents:x?"none":void 0,width:w?P:"100%"}}))},r._callPropsCallbacks=function(){if("function"==typeof this.props.onItemsRendered&&this.props.itemCount>0){var e=this._getRangeToRender(),n=e[0],r=e[1],i=e[2],s=e[3];this._callOnItemsRendered(n,r,i,s)}if("function"==typeof this.props.onScroll){var o=this.state,a=o.scrollDirection,l=o.scrollOffset,h=o.scrollUpdateWasRequested;this._callOnScroll(a,l,h)}},r._getRangeToRender=function(){var e=this.props,n=e.itemCount,r=e.overscanCount,i=this.state,s=i.isScrolling,o=i.scrollDirection,a=i.scrollOffset;if(0===n)return[0,0,0,0];var l=p(this.props,a,this._instanceProps),h=f(this.props,l,a,this._instanceProps);return[Math.max(0,l-(s&&"backward"!==o?1:Math.max(1,r))),Math.max(0,Math.min(n-1,h+(s&&"forward"!==o?1:Math.max(1,r)))),l,h]},n}(z.PureComponent)).defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},l);let rp=e=>{let{index:n,data:r,style:i}=e,{visibleOptions:s,renderOption:o}=r;return o(s[n],n,i)},rf=tD.PREFIX_OPTION;class rg extends z.PureComponent{constructor(){var e;super(...arguments),e=this,this.onClick=(e,n)=>{let{onItemClick:r}=this.props;n.data.disabled||"disabled"in n&&n.disabled||r(e,n)},this.handleItemEnterPress=(e,n)=>{tW(e)&&this.onClick(e,n)},this.onHover=(e,n)=>{let{showNext:r,onItemHover:i}=this.props;n.data.disabled||r===t$&&i(e,n)},this.onCheckboxChange=(e,n)=>{let{onItemCheckboxClick:r}=this.props;e.stopPropagation(),e.nativeEvent&&"function"==typeof e.nativeEvent.stopImmediatePropagation&&e.nativeEvent.stopImmediatePropagation(),r(n)},this.getItemStatus=e=>{let{activeKeys:n,selectedKeys:r,loadedKeys:i,loadingKeys:s}=this.props,o={active:!1,selected:!1,loading:!1};return n.has(e)&&(o.active=!0),r.has(e)&&(o.selected=!0),s.has(e)&&!i.has(e)&&(o.loading=!0),o},this.renderIcon=function(n){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e=>e+(r?` ${rf}-icon-left`:"");switch(n){case"child":let{expandIcon:s}=e.props;if(s)return s;return z.createElement(nR.A,{className:i(`${rf}-icon ${rf}-icon-expand`)});case"tick":return z.createElement(nQ,{className:i(`${rf}-icon ${rf}-icon-active`)});case"loading":return z.createElement(nF,{wrapperClassName:i(`${rf}-spin-icon`)});case"empty":return z.createElement("span",{"aria-hidden":!0,className:i(`${rf}-icon ${rf}-icon-empty`)});default:return null}},this.highlight=e=>{let n=[],{keyword:r,separator:i}=this.props;return e.forEach((s,o)=>{"string"==typeof s&&e4()(s,r)?s.split(r).forEach((e,i)=>{i>0&&n.push(z.createElement("span",{className:`${rf}-label-highlight`,key:`${i}-${o}`},r)),n.push(e)}):n.push(s),o!==e.length-1&&n.push(i)}),n},this.renderFlattenOptionItem=(e,n,r)=>{var i;let{multiple:s,selectedKeys:o,checkedKeys:a,halfCheckedKeys:l,keyword:h,filterRender:c,virtualize:u}=this.props,{searchText:d,key:p,disabled:f,pathData:g}=e,m=o.has(p),y=F()(rf,{[`${rf}-flatten`]:!c,[`${rf}-disabled`]:f,[`${rf}-select`]:m&&!s}),O=n=>{this.onClick(n,e)},b=n=>this.handleItemEnterPress(n,e),x=n=>this.onCheckboxChange(n,e);if(c){let n={className:y,inputValue:h,disabled:f,data:g,checkStatus:{checked:a.has(e.key),halfChecked:l.has(e.key)},selected:m,onClick:O,onCheck:x},s=c(n),o=u?{key:p,style:Object.assign(Object.assign({},null!=(i=s.props.style)?i:{}),r)}:{key:p};return z.cloneElement(s,o)}return z.createElement("li",{role:"menuitem",className:y,style:r,key:p,onClick:O,onKeyPress:b},z.createElement("span",{className:`${rf}-label`},!s&&this.renderIcon("empty"),s&&z.createElement(n9,{onChange:x,disabled:f,indeterminate:l.has(e.key),checked:a.has(e.key),className:`${rf}-label-checkbox`}),this.highlight(d)))},this.renderFlattenOption=e=>{let{virtualize:n}=this.props;return z.createElement("ul",{className:`${rf}-list`,key:"flatten-list"},n?this.renderVirtualizeList(e):e.map(e=>this.renderFlattenOptionItem(e)))},this.renderVirtualizeList=e=>{var n;let{direction:r}=this.context,{virtualize:i}=this.props;return z.createElement(rd,{height:i.height,itemCount:e.length,itemSize:i.itemSize,itemData:{visibleOptions:e,renderOption:this.renderFlattenOptionItem},width:null!=(n=i.width)?n:"100%",style:{direction:r}},rp)}}renderItem(e){let n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],{multiple:i,checkedKeys:s,halfCheckedKeys:o}=this.props,a=r.length;return r.push(z.createElement("ul",{role:"menu",className:`${rf}-list`,key:e[0].key,onScroll:e=>this.props.onListScroll(e,a)},e.map(e=>{let{data:r,key:a,parentKey:l}=e,{children:h,label:c,disabled:u,isLeaf:d}=r,{active:p,selected:f,loading:g}=this.getItemStatus(a),m=!!h&&h.length,y=m||this.props.loadData&&!d;p&&m&&(n=e);let O=F()(rf,{[`${rf}-active`]:p&&!f,[`${rf}-select`]:f&&!i,[`${rf}-disabled`]:u}),b=l?{"aria-owns":`cascaderItem-${l}`}:{};return z.createElement("li",Object.assign({role:"menuitem",id:`cascaderItem-${a}`,"aria-expanded":p,"aria-haspopup":!!y,"aria-disabled":u},b,{className:O,key:a,onClick:n=>{this.onClick(n,e)},onKeyPress:n=>this.handleItemEnterPress(n,e),onMouseEnter:n=>{this.onHover(n,e)}}),z.createElement("span",{className:`${rf}-label`},f&&!i&&this.renderIcon("tick"),!f&&!i&&this.renderIcon("empty"),i&&z.createElement(n9,{onChange:n=>this.onCheckboxChange(n,e),disabled:u,indeterminate:o.has(e.key),checked:s.has(e.key),className:`${rf}-label-checkbox`}),z.createElement("span",null,c)),y?this.renderIcon(g?"loading":"child",!0):null)}))),n&&r.concat(this.renderItem(n.children,r)),r}renderEmpty(){let{emptyContent:e}=this.props;return null===e?null:z.createElement(n$,{componentName:"Cascader"},n=>z.createElement("ul",{className:`${rf} ${rf}-empty`,key:"empty-list"},z.createElement("span",{className:`${rf}-label`,"x-semi-prop":"emptyContent"},e||n.emptyText)))}render(){let e,{data:n,searchable:r}=this.props,{direction:i}=this.context,s=!n||!n.length,o=F()({[`${rf}-lists`]:!0,[`${rf}-lists-rtl`]:"rtl"===i,[`${rf}-lists-empty`]:s});return e=s?this.renderEmpty():r?this.renderFlattenOption(n):this.renderItem(n),z.createElement("div",{className:o},e)}}rg.contextType=eO,rg.propTypes={data:q().array,emptyContent:q().node,searchable:q().bool,onItemClick:q().func,onItemHover:q().func,multiple:q().bool,showNext:q().oneOf([tI,t$]),checkedKeys:q().object,halfCheckedKeys:q().object,onItemCheckboxClick:q().func,separator:q().string,keyword:q().string,virtualize:q().object,expandIcon:q().node},rg.defaultProps={empty:!1};var rm=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};class ry extends z.PureComponent{render(){let e=this.props,{triggerRender:n,componentName:r}=e;return n(Object.assign({},rm(e,["triggerRender","componentName"])))}}ry.propTypes={triggerRender:q().func.isRequired,componentName:q().string,componentProps:q().object,value:q().any,inputValue:q().string,placeholder:q().oneOfType([q().string,q().array]),className:q().string,style:q().object};let rO={PREFIX:`${W._}-tag`},rv=["default","small","large"],rb=["square","circle"];var rx=r(25769),rw=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};let rS=rO.PREFIX,r_=["grey","red","pink","purple","violet","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","white"],rk=["light","solid","ghost"];class rC extends z.Component{constructor(e){super(e),this.state={visible:!0},this.close=this.close.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this)}static getDerivedStateFromProps(e){return"visible"in e?{visible:e.visible}:null}setVisible(e){"visible"in this.props||this.setState({visible:e})}close(e,n,r){let{onClose:i}=this.props;e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),i&&i(n,e,r),e.defaultPrevented||this.setVisible(!1)}handleKeyDown(e){let{closable:n,onClick:r,onKeyDown:i}=this.props;switch(e.key){case"Backspace":case"Delete":n&&this.close(e,this.props.children,this.props.tagKey),er(e);break;case"Enter":r(e),er(e);break;case"Escape":e.target.blur()}i&&i(e)}renderAvatar(){let{avatarShape:e,avatarSrc:n}=this.props;return z.createElement(eu,{src:n,shape:e})}render(){let e=this.props,{tagKey:n,children:r,size:i,color:s,closable:o,visible:a,onClose:l,onClick:h,className:c,type:u,shape:d,avatarSrc:p,avatarShape:f,tabIndex:g,prefixIcon:m,suffixIcon:y}=e,O=rw(e,["tagKey","children","size","color","closable","visible","onClose","onClick","className","type","shape","avatarSrc","avatarShape","tabIndex","prefixIcon","suffixIcon"]),{visible:b}=this.state,x=h!==rC.defaultProps.onClick||o,w={role:"button",tabIndex:g||0,onKeyDown:this.handleKeyDown},S=Object.assign(Object.assign({},O),{onClick:h,tabIndex:g,className:F()(rS,{[`${rS}-default`]:"default"===i,[`${rS}-small`]:"small"===i,[`${rS}-large`]:"large"===i,[`${rS}-square`]:"square"===d,[`${rS}-circle`]:"circle"===d,[`${rS}-${u}`]:u,[`${rS}-${s}-${u}`]:s&&u,[`${rS}-closable`]:o,[`${rS}-invisible`]:!b,[`${rS}-avatar-${f}`]:p},c)}),_=x?Object.assign(Object.assign({},S),w):S,k=o?z.createElement("div",{className:`${rS}-close`,onClick:e=>this.close(e,r,n)},z.createElement(rx.A,{size:"small"})):null,C=eg()(r),E=F()(`${rS}-content`,`${rS}-content-${C?"ellipsis":"center"}`);return z.createElement("div",Object.assign({"aria-label":this.props["aria-label"]||C?`${o?"Closable ":""}Tag: ${r}`:""},_),m?z.createElement("div",{className:`${rS}-prefix-icon`},m):null,p?this.renderAvatar():null,z.createElement("div",{className:E},r),y?z.createElement("div",{className:`${rS}-suffix-icon`},y):null,k)}}rC.defaultProps={size:rv[0],color:r_[0],closable:!1,type:rk[0],onClose:()=>void 0,onClick:()=>void 0,onMouseEnter:()=>void 0,style:{},className:"",shape:"square",avatarShape:"square",prefixIcon:null,suffixIcon:null},rC.propTypes={children:q().node,tagKey:q().oneOfType([q().string,q().number]),size:q().oneOf(rv),color:q().oneOf(r_),type:q().oneOf(rk),closable:q().bool,visible:q().bool,onClose:q().func,onClick:q().func,prefixIcon:q().node,suffixIcon:q().node,style:q().object,className:q().string,avatarSrc:q().string,avatarShape:q().oneOf(rb),"aria-label":q().string};var rE=r(56449),rT=r.n(rE);let rP={PREFIX:`${W._}-tagInput`},rA=(e,n)=>{let r=[];if(eg()(n)||ey()(n))r=e.split(n);else if(rT()(n)){let i=n[0];r=e;for(let e=1;e<n.length;e++)r=r.split(n[e]).join(i);r=r.split(i)}else r.push(e);return r};class rM extends G.A{constructor(e){super(Object.assign({},e)),this.handleInputChange=e=>{let{value:n}=e.target,{entering:r}=this.getStates();r?this._onInputChange(n,e):this._checkInputChangeValid(n)&&this._onInputChange(n,e)},this.handleInputCompositionStart=e=>{let{maxLength:n}=this.getProps();ey()(n)&&this._adapter.setEntering(!0)},this.handleInputCompositionEnd=e=>{let{value:n}=e.target,{maxLength:r,onInputExceed:i,separator:s}=this.getProps();if(!ey()(r))return;this._adapter.setEntering(!1);let o=!0,a=rA(n,s),l=0;for(;l<a.length;l++)if(a[l].length>r){o=!1,eY()(i)&&i(n);break}if(o)this._adapter.setInputValue(n);else{let e=a.slice(0,l);l<a.length&&e.push(a[l].slice(0,r)),this._adapter.setInputValue(e.join(s))}},this._checkInputChangeValid=e=>{let{maxLength:n,onInputExceed:r,separator:i}=this._adapter.getProps(),{inputValue:s}=this._adapter.getStates(),o=!0;if(ey()(n)){let a=rA(e,i),l=rA(s,i),h=Math.max(a.length,l.length);for(let i=0;i<h;i++)if(!e7()(a[i])&&(e7()(l[i])||a[i].length>l[i].length)&&a[i].length>n){o=!1,eY()(r)&&r(e);break}}return o},this.handleKeyDown=e=>{let{inputValue:n,tagsArray:r}=this._adapter.getStates(),i=e.keyCode;i===tq.Ay.ENTER&&(e.preventDefault(),""!==n&&this._handleAddTags(e));let{length:s}=r;if(i===tq.Ay.BACKSPACE&&""===n&&s>0){let e=r.slice(0,s-1),n=r[s-1];this._onRemove(e,n,s-1)}this._adapter.notifyKeyDown(e)}}_handleAddTags(e){let{separator:n,max:r,onExceed:i,allowDuplicates:s}=this._adapter.getProps(),{inputValue:o,tagsArray:a}=this._adapter.getStates(),l=rA(o,n);l=l.filter((e,n)=>!(!s&&(a.includes(e)||l.indexOf(e)!==n))&&eg()(e)&&""!==e.trim());let h=a.concat(l);ey()(r)&&h.length>r&&(eY()(i)&&i(h),h=h.slice(0,r),l=l.slice(0,r-a.length)),l.length>0&&this._onAdd(h,l),this._onInputChange("",e)}handleInputBlur(e){let{addOnBlur:n}=this._adapter.getProps();!0===n&&this._handleAddTags(e),this._adapter.setFocusing(!1),this._adapter.notifyBlur(e)}handleInputFocus(e){this._adapter.setFocusing(!0),this._adapter.notifyFocus(e)}handleClearEnterPress(e){tW(e)&&this.handleClearBtn(e)}handleClearBtn(e){let{inputValue:n,tagsArray:r}=this._adapter.getStates();r.length>0&&(this._adapter.setTagsArray([]),this._adapter.notifyTagChange([])),n.length>0&&this._onInputChange("",e),e.stopPropagation()}handleTagClose(e){let{tagsArray:n}=this._adapter.getStates(),r=[...n];r.splice(e,1);let i=n[e];this._onRemove(r,i,e)}handleInputMouseEnter(){this._adapter.setHovering(!0)}handleInputMouseLeave(){this._adapter.setHovering(!1)}handleClick(e){let{disabled:n}=this.getProps();!n&&(this._adapter.getClickOutsideHandler()||(this._adapter.setActive(!0),this._adapter.registerClickOutsideHandler(e=>this.clickOutsideCallBack())))}clickOutsideCallBack(){this._adapter.unregisterClickOutsideHandler(),this._adapter.setActive(!1)}handleClickPrefixOrSuffix(e){let{disabled:n}=this._adapter.getProps(),{isFocus:r}=this._adapter.getStates();n||r||this._adapter.toggleFocusing(!0)}handlePreventMouseDown(e){e&&eY()(e.preventDefault)&&e.preventDefault()}_onRemove(e,n,r){this._isControlledComponent()||this._adapter.setTagsArray(e),this._adapter.notifyTagChange(e),this._adapter.notifyTagRemove(n,r)}_onAdd(e,n){this._isControlledComponent()||this._adapter.setTagsArray(e),this._adapter.notifyTagChange(e),this._adapter.notifyTagAdd(n)}_onInputChange(e,n){this._adapter.setInputValue(e),this._adapter.notifyInputChange(e,n)}handleSortEnd(e){let{oldIndex:n,newIndex:r}=e,{tagsArray:i}=this.getStates(),s=function(e,n,r){let i=e.slice();return i.splice(r<0?i.length+r:r,0,i.splice(n,1)[0]),i}(i,n,r);this._isControlledComponent()||this._adapter.setTagsArray(s),this._adapter.notifyTagChange(s)}}let rN={PREFIX:`${W._}-typography`},rD=["primary","secondary","danger","warning","success","tertiary","quaternary"],rI=["normal","small","inherit"],r$=["normal","extended"],rR=[1,2,3,4,5,6];var rL=r(55364),rQ=r.n(rL),rj=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};let rV=rN.PREFIX;class rz extends z.PureComponent{render(){let e=this.props,{component:n,className:r,children:i,forwardRef:s}=e,o=rj(e,["component","className","children","forwardRef"]),a=F()(rV,r);return z.createElement(n,Object.assign({className:a,ref:s},o),i)}}rz.defaultProps={component:"article",style:{},className:""},rz.propTypes={component:q().string,style:q().object,className:q().string};var rB=r(98621),rF=r.n(rB),rZ=r(53860);let rq=rN.PREFIX;class rW extends z.PureComponent{constructor(e){super(e),this.copy=e=>{let{content:n,duration:r,onCopy:i}=this.props,s=rF()(n);i&&i(e,n,s),this.setCopied(n,r)},this.setCopied=(e,n)=>{this.setState({copied:!0,item:e}),this._timeId=setTimeout(()=>{this.resetCopied()},1e3*n)},this.resetCopied=()=>{this._timeId&&(clearTimeout(this._timeId),this._timeId=null,this.setState({copied:!1,item:""}))},this.renderSuccessTip=()=>{let{successTip:e}=this.props;return void 0!==e?e:z.createElement(n$,{componentName:"Typography"},e=>z.createElement("span",null,z.createElement(nQ,null),e.copied))},this.renderCopyIcon=()=>{let{icon:e}=this.props,n={role:"button",tabIndex:0,onClick:this.copy,onKeyPress:e=>tW(e)&&this.copy(e)},r=z.createElement("a",{className:`${rq}-action-copy-icon`},z.createElement(rZ.A,Object.assign({onClick:this.copy},n)));return z.isValidElement(e)?z.cloneElement(e,n):r},this.state={copied:!1,item:""}}componentWillUnmount(){this._timeId&&(clearTimeout(this._timeId),this._timeId=null)}render(){let{style:e,className:n,forwardRef:r,copyTip:i,render:s}=this.props,{copied:o}=this.state,a=F()(n,{[`${rq}-action-copy`]:!o,[`${rq}-action-copied`]:o});return s?s(o,this.copy,this.props):z.createElement(n$,{componentName:"Typography"},n=>z.createElement("span",{style:Object.assign({marginLeft:"4px"},e),className:a,ref:r},o?this.renderSuccessTip():z.createElement(nm,{content:void 0!==i?i:n.copy},this.renderCopyIcon())))}}function rX(e){if(!e)return 0;let n=e.match(/^\d*(\.\d*)?/);return n?Number(n[0]):0}rW.propTypes={content:q().string,onCopy:q().func,successTip:q().node,copyTip:q().node,duration:q().number,style:q().object,className:q().string,icon:q().node},rW.defaultProps={content:"",onCopy:J,duration:3,style:{},className:""};let rU=function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0,h=arguments.length>7?arguments[7]:void 0;if(0===r.length)return"";i||((i=document.createElement("div")).setAttribute("aria-hidden","true"),document.body.appendChild(i));let c=window.getComputedStyle(e),u=Array.prototype.slice.apply(c).map(e=>`${e}: ${c.getPropertyValue(e)};`).join(""),d=Math.round(rX(c.lineHeight)*(n+1)+rX(c.paddingTop)+rX(c.paddingBottom));function p(){let e=i.scrollWidth<=i.offsetWidth,r=i.scrollHeight<d;return 1===n?e&&r:r}i.setAttribute("style",u),i.style.position="fixed",i.style.left="0","auto"===c.getPropertyValue("width")&&e.offsetWidth&&(i.style.width=`${e.offsetWidth}px`),i.style.height="auto",i.style.top="-999999px",i.style.zIndex="-1000",h&&(i.style.fontWeight="600"),i.style.textOverflow="clip",i.style.webkitLineClamp="none",i.innerHTML="";let f=document.createElement("span"),g=document.createTextNode(r);if(f.appendChild(g),a.length>0){let e=document.createTextNode(a);f.appendChild(e)}function m(e,n){let r=e.length;return n?"end"===l?e.slice(0,n)+o:e.slice(0,n)+o+e.slice(r-n,r):o}i.appendChild(f),Object.values(e_()(s,"expand")).map(e=>e&&i.appendChild(e.cloneNode(!0)));let y=r;return p()||(i.innerHTML="",i.appendChild(f),Object.values(s).map(e=>e&&i.appendChild(e.cloneNode(!0))),y=function e(n,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.length,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=Math.floor((i+s)/2);if(n.textContent=m(r,l),i>=s-1&&s>0)for(let e=s;e>=i;e-=1){let i=m(r,e);if(n.textContent=i,p())return i}else if(0===s)return o;return p()?e(n,r,l,s,l):e(n,r,i,l,a)}(g,r,0,"middle"===l?Math.floor(r.length/2):r.length)),i.innerHTML="",y},rY=z.createContext("normal");(O=A||(A={})).Width="width",O.Height="height",O.All="all";class rG extends ee.A{constructor(e){var n;super(e),n=this,this.formerPropertyValue=new Map,this.getElement=()=>{try{return(0,e2.findDOMNode)(this.childNode||this)}catch(e){return null}},this.handleResizeEventTriggered=e=>{var n,r,i,s;if(this.props.observerProperty===A.All)null==(r=(n=this.props).onResize)||r.call(n,e);else{let n=[];for(let r of e)this.formerPropertyValue.has(r.target)?r.contentRect[this.props.observerProperty]!==this.formerPropertyValue.get(r.target)&&(this.formerPropertyValue.set(r.target,r.contentRect[this.props.observerProperty]),n.push(r)):(this.formerPropertyValue.set(r.target,r.contentRect[this.props.observerProperty]),n.push(r));n.length>0&&(null==(s=(i=this.props).onResize)||s.call(i,n))}},this.observeElement=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=n.getElement();if(n.observer||(n.observer=new ResizeObserver(n.handleResizeEventTriggered)),!(r&&r instanceof Element))return void n.observer.disconnect();(r!==n.element||e)&&(n.observer.disconnect(),n.element=r,n.observer.observe(r),n.props.observeParent&&r.parentNode&&r.parentNode.ownerDocument&&r.parentNode.ownerDocument.defaultView&&r.parentNode instanceof r.parentNode.ownerDocument.defaultView.HTMLElement&&(n._parentNode=r.parentNode,n.observer.observe(n._parentNode)))},this.mergeRef=(e,n)=>{this.childNode=n,"function"==typeof e?e(n):"object"==typeof e&&e&&"current"in e&&(e.current=n)},globalThis.ResizeObserver&&(this.observer=new ResizeObserver(this.handleResizeEventTriggered))}componentDidMount(){var e;null==(e=this.observeElement)||e.call(this)}componentDidUpdate(e){var n;null==(n=this.observeElement)||n.call(this,this.props.observeParent!==e.observeParent)}componentWillUnmount(){this.observer&&(this.observer.disconnect(),this.observer=null,this.element=null)}render(){let e=z.Children.only(this.props.children),{ref:n}=e;return z.cloneElement(e,{ref:e=>this.mergeRef(n,e)})}}rG.propTypes={onResize:q().func,observeParent:q().bool,observerProperty:q().string,delayTick:q().number},rG.defaultProps={onResize:()=>{},observeParent:!1,observerProperty:"all",delayTick:0};var rH=function(e,n,r,i){return new(r||(r=Promise))(function(s,o){function a(e){try{h(i.next(e))}catch(e){o(e)}}function l(e){try{h(i.throw(e))}catch(e){o(e)}}function h(e){var n;e.done?s(e.value):((n=e.value)instanceof r?n:new r(function(e){e(n)})).then(a,l)}h((i=i.apply(e,n||[])).next())})},rK=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};let rJ=rN.PREFIX;class r0 extends z.Component{constructor(e){super(e),this.observerTakingEffect=!1,this.onResize=e=>rH(this,void 0,void 0,function*(){return this.rafId&&window.cancelAnimationFrame(this.rafId),new Promise(e=>{this.rafId=window.requestAnimationFrame(()=>rH(this,void 0,void 0,function*(){yield this.getEllipsisState(),e()}))})}),this.canUseCSSEllipsis=()=>{let{copyable:e}=this.props,{expandable:n,expandText:r,pos:i,suffix:s}=this.getEllipsisOpt();return!n&&e7()(r)&&!e&&"end"===i&&!s.length},this.shouldTruncated=e=>!!e&&!(e<1)&&(e<=1?this.compareSingleRow():this.wrapperRef.current.scrollHeight>this.wrapperRef.current.offsetHeight),this.compareSingleRow=()=>{if(!(document&&document.createRange))return!1;let e=this.wrapperRef.current,n=e.getBoundingClientRect().width,r=Array.from(e.childNodes),i=document.createRange(),s=r.reduce((e,n)=>{var r;return i.selectNodeContents(n),e+(null!=(r=i.getBoundingClientRect().width)?r:0)},0);return i.detach(),s>n},this.showTooltip=()=>{var e,n;let{isOverflowed:r,isTruncated:i,expanded:s}=this.state,{showTooltip:o,expandable:a,expandText:l}=this.getEllipsisOpt(),h=this.canUseCSSEllipsis(),c=!a&&e7()(l)&&!s&&(h?r:i)&&o;if(!c)return c;let u={type:"tooltip"};return"object"==typeof o?o.type&&"popover"===o.type.toLowerCase()?rQ()({opts:{showArrow:!0}},o,{opts:{className:F()({[`${rJ}-ellipsis-popover`]:!0,[null==(e=null==o?void 0:o.opts)?void 0:e.className]:!!(null==(n=null==o?void 0:o.opts)?void 0:n.className)})}}):Object.assign(Object.assign({},u),o):u},this.onHover=()=>{if(this.canUseCSSEllipsis()){let{rows:e,suffix:n,pos:r}=this.getEllipsisOpt(),i=this.shouldTruncated(e);this.setState({isOverflowed:i,isTruncated:!1});return}},this.getEllipsisState=()=>rH(this,void 0,void 0,function*(){let{rows:e,suffix:n,pos:r}=this.getEllipsisOpt(),{children:i,strong:s}=this.props;if(!this.wrapperRef||!this.wrapperRef.current)return void(yield this.onResize());let{expanded:o}=this.state;if(this.canUseCSSEllipsis())return;if(ti()(i))return new Promise(e=>{this.setState({isTruncated:!1,isOverflowed:!1},e)});if(H("children"in this.props&&"string"!=typeof i,"[Semi Typography] Only children with pure text could be used with ellipsis at this moment."),!e||e<0||o)return;let a={expand:this.expandRef.current,copy:this.copyRef&&this.copyRef.current},l=Array.isArray(i)?i.join(""):String(i),h=rU(this.wrapperRef.current,e,l,a,"...",n,r,s);return new Promise(e=>{this.setState({isOverflowed:!1,ellipsisContent:h,isTruncated:l!==h},e)})}),this.toggleOverflow=e=>{let{onExpand:n,expandable:r,collapsible:i}=this.getEllipsisOpt(),{expanded:s}=this.state;n&&n(!s,e),(r&&!s||i&&s)&&this.setState({expanded:!s})},this.getEllipsisOpt=()=>{let{ellipsis:e}=this.props;return e?Object.assign({rows:1,expandable:!1,pos:"end",suffix:"",showTooltip:!1,collapsible:!1,expandText:e.expandable?this.expandStr:void 0,collapseText:e.collapsible?this.collapseStr:void 0},"object"==typeof e?e:null):{}},this.renderExpandable=()=>{let e,{expanded:n,isTruncated:r}=this.state;if(!r)return null;let{expandText:i,expandable:s,collapseText:o,collapsible:a}=this.getEllipsisOpt(),l=!s&&e7()(i),h=!a&&e7()(o);return(n||l?n&&!h&&(e=o):e=i,l&&h)?null:z.createElement("a",{role:"button",tabIndex:0,className:`${rJ}-ellipsis-expand`,key:"expand",ref:this.expandRef,"aria-label":e,onClick:this.toggleOverflow,onKeyPress:e=>tW(e)&&this.toggleOverflow(e)},e)},this.getEllipsisStyle=()=>{let{ellipsis:e,component:n}=this.props;if(!e)return{ellipsisCls:"",ellipsisStyle:{}};let{rows:r}=this.getEllipsisOpt(),{expanded:i}=this.state,s=!i&&this.canUseCSSEllipsis();return{ellipsisCls:F()({[`${rJ}-ellipsis`]:!0,[`${rJ}-ellipsis-single-line`]:1===r,[`${rJ}-ellipsis-multiple-line`]:r>1,[`${rJ}-ellipsis-multiple-line-text`]:r>1&&"span"===n,[`${rJ}-ellipsis-overflow-ellipsis`]:1===r&&s,[`${rJ}-ellipsis-overflow-ellipsis-text`]:1===r&&s&&"span"===n}),ellipsisStyle:s&&r>1?{WebkitLineClamp:r}:{}}},this.renderEllipsisText=e=>{let{suffix:n}=e,{children:r}=this.props,{isTruncated:i,expanded:s,ellipsisContent:o}=this.state;return s||!i?z.createElement("span",{onMouseEnter:this.onHover},r,n&&n.length?n:null):z.createElement("span",{onMouseEnter:this.onHover},o,n)},this.state={editable:!1,copied:!1,isOverflowed:!1,ellipsisContent:e.children,expanded:!1,isTruncated:!1,prevChildren:null},this.wrapperRef=z.createRef(),this.expandRef=z.createRef(),this.copyRef=z.createRef()}componentDidMount(){this.props.ellipsis&&this.onResize().then(()=>(0,es.Ct)(()=>this.observerTakingEffect=!0,1))}static getDerivedStateFromProps(e,n){let{prevChildren:r}=n,i={};return i.prevChildren=e.children,e.ellipsis&&r!==e.children&&(i.isOverflowed=!1,i.ellipsisContent=e.children,i.expanded=!1,i.isTruncated=!0),i}componentDidUpdate(e){this.props.children!==e.children&&(this.forceUpdate(),this.props.ellipsis&&this.onResize())}componentWillUnmount(){this.rafId&&window.cancelAnimationFrame(this.rafId)}renderOperations(){return z.createElement(z.Fragment,null,this.renderExpandable(),this.renderCopy())}renderCopy(){var e;let n,{copyable:r,children:i}=this.props;if(!r)return null;let s=null!=(e=null==r?void 0:r.content)?e:i,o=!1;Array.isArray(s)?(n="",s.forEach(e=>{"object"==typeof e&&(o=!0),n+=String(e)})):("object"!=typeof s||(o=!0),n=String(s)),H(o,"Content to be copied in Typography is a object, it will case a [object Object] mistake when copy to clipboard.");let a=Object.assign({content:n,duration:3},"object"==typeof r?r:null);return z.createElement(rW,Object.assign({},a,{forwardRef:this.copyRef}))}renderIcon(){let{icon:e,size:n}=this.props,r="inherit"===n?this.context:n;return e?z.createElement("span",{className:`${rJ}-icon`,"x-semi-prop":"icon"},(0,es.uR)(e)?z.cloneElement(e,{size:"small"===r?"small":"default"}):e):null}renderContent(){let e=this.props,{component:n,children:r,className:i,type:s,spacing:o,disabled:a,style:l,ellipsis:h,icon:c,size:u,link:d,heading:p,weight:f}=e,g=rK(e,["component","children","className","type","spacing","disabled","style","ellipsis","icon","size","link","heading","weight"]),m=e_()(g,["strong","editable","mark","copyable","underline","code","delete"]),y="inherit"===u?this.context:u,O=this.renderIcon(),b=this.getEllipsisOpt(),{ellipsisCls:x,ellipsisStyle:w}=this.getEllipsisStyle(),S=h?this.renderEllipsisText(b):r,_=F()({[`${rJ}-link-text`]:d,[`${rJ}-link-underline`]:this.props.underline&&d});S=((e,n)=>{let{mark:r,code:i,underline:s,strong:o,link:a,disabled:l}=e,h=n,c=(e,n)=>{let r={};e&&("object"==typeof e&&(r=Object.assign({},e)),h=z.createElement(n,r,h))};return c(r,"mark"),c(i,"code"),c(s&&!a,"u"),c(o,"strong"),c(e.delete,"del"),c(a,l?"span":"a"),h})(this.props,z.createElement(z.Fragment,null,O,this.props.link?z.createElement("span",{className:_},S):S));let k=eg()(p)&&/^h[1-6]$/.test(p),C=F()(i,x,{[`${rJ}-${s}`]:s&&!d,[`${rJ}-${y}`]:y,[`${rJ}-link`]:d,[`${rJ}-disabled`]:a,[`${rJ}-${o}`]:o,[`${rJ}-${p}`]:k,[`${rJ}-${p}-weight-${f}`]:k&&f&&isNaN(Number(f))}),E=Object.assign(Object.assign({},isNaN(Number(f))?{}:{fontWeight:f}),l);return z.createElement(rz,Object.assign({className:C,style:Object.assign(Object.assign({},E),w),component:n,forwardRef:this.wrapperRef},m),S,this.renderOperations())}renderTipWrapper(){let{children:e}=this.props,n=this.showTooltip(),r=this.renderContent();if(!n)return r;{let{type:i,opts:s,renderTooltip:o}=n;return eY()(o)?o(e,r):"popover"===i.toLowerCase()?z.createElement(nx,Object.assign({content:e,position:"top"},s),r):z.createElement(nm,Object.assign({content:e,position:"top"},s),r)}}render(){var e=this;let{size:n}=this.props,r="inherit"===n?this.context:n,i=z.createElement(rY.Provider,{value:r},z.createElement(n$,{componentName:"Typography"},e=>(this.expandStr=e.expand,this.collapseStr=e.collapse,this.renderTipWrapper())));return this.props.ellipsis?z.createElement(rG,{onResize:function(){e.observerTakingEffect&&e.onResize(...arguments)},observeParent:!0,observerProperty:A.Width},i):i}}r0.propTypes={children:q().node,copyable:q().oneOfType([q().shape({text:q().string,onCopy:q().func,successTip:q().node,copyTip:q().node}),q().bool]),delete:q().bool,disabled:q().bool,ellipsis:q().oneOfType([q().shape({rows:q().number,expandable:q().bool,expandText:q().string,onExpand:q().func,suffix:q().string,showTooltip:q().oneOfType([q().shape({type:q().string,opts:q().object}),q().bool]),collapsible:q().bool,collapseText:q().string,pos:q().oneOf(["end","middle"])}),q().bool]),mark:q().bool,underline:q().bool,link:q().oneOfType([q().object,q().bool]),spacing:q().oneOf(r$),strong:q().bool,size:q().oneOf(rI),type:q().oneOf(rD),style:q().object,className:q().string,icon:q().oneOfType([q().node,q().string]),heading:q().string,component:q().string},r0.defaultProps={children:null,copyable:!1,delete:!1,disabled:!1,ellipsis:!1,icon:"",mark:!1,underline:!1,strong:!1,link:!1,type:"primary",spacing:"normal",size:"normal",style:{},className:""},r0.contextType=rY;let r1=rN.PREFIX;class r2 extends z.PureComponent{render(){let{className:e}=this.props,n=F()(e,`${r1}-paragraph`);return z.createElement(r0,Object.assign({component:"p"},this.props,{className:n}))}}r2.propTypes={copyable:q().oneOfType([q().object,q().bool]),delete:q().bool,disabled:q().bool,ellipsis:q().oneOfType([q().object,q().bool]),mark:q().bool,link:q().oneOfType([q().object,q().bool]),underline:q().bool,strong:q().bool,type:q().oneOf(rD),size:q().oneOf(rI),spacing:q().oneOf(r$),style:q().object,className:q().string,component:q().string},r2.defaultProps={copyable:!1,delete:!1,disabled:!1,ellipsis:!1,mark:!1,underline:!1,strong:!1,link:!1,type:"primary",size:"normal",spacing:"normal",style:{},className:""};var r5=r(87315);let r4="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function r3(e){let n=Object.prototype.toString.call(e);return"[object Window]"===n||"[object global]"===n}function r6(e){return"nodeType"in e}function r9(e){var n,r;return e?r3(e)?e:r6(e)&&null!=(n=null==(r=e.ownerDocument)?void 0:r.defaultView)?n:window:window}function r7(e){let{Document:n}=r9(e);return e instanceof n}function r8(e){return!r3(e)&&e instanceof r9(e).HTMLElement}function ie(e){return e instanceof r9(e).SVGElement}function it(e){return e?r3(e)?e.document:r6(e)?r7(e)?e:r8(e)||ie(e)?e.ownerDocument:document:document:document}let ir=r4?z.useLayoutEffect:z.useEffect;function ii(e){let n=(0,z.useRef)(e);return ir(()=>{n.current=e}),(0,z.useCallback)(function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return null==n.current?void 0:n.current(...r)},[])}function is(e,n){void 0===n&&(n=[e]);let r=(0,z.useRef)(e);return ir(()=>{r.current!==e&&(r.current=e)},n),r}function io(e,n){let r=(0,z.useRef)();return(0,z.useMemo)(()=>{let n=e(r.current);return r.current=n,n},[...n])}function ia(e){let n=ii(e),r=(0,z.useRef)(null),i=(0,z.useCallback)(e=>{e!==r.current&&(null==n||n(e,r.current)),r.current=e},[]);return[r,i]}function il(e){let n=(0,z.useRef)();return(0,z.useEffect)(()=>{n.current=e},[e]),n.current}let ih={};function ic(e,n){return(0,z.useMemo)(()=>{if(n)return n;let r=null==ih[e]?0:ih[e]+1;return ih[e]=r,e+"-"+r},[e,n])}function iu(e){return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((n,r)=>{for(let[i,s]of Object.entries(r)){let r=n[i];null!=r&&(n[i]=r+e*s)}return n},{...n})}}let id=iu(1),ip=iu(-1);function ig(e){if(!e)return!1;let{KeyboardEvent:n}=r9(e.target);return n&&e instanceof n}function im(e){if(function(e){if(!e)return!1;let{TouchEvent:n}=r9(e.target);return n&&e instanceof n}(e)){if(e.touches&&e.touches.length){let{clientX:n,clientY:r}=e.touches[0];return{x:n,y:r}}else if(e.changedTouches&&e.changedTouches.length){let{clientX:n,clientY:r}=e.changedTouches[0];return{x:n,y:r}}}return"clientX"in e&&"clientY"in e?{x:e.clientX,y:e.clientY}:null}let iy=Object.freeze({Translate:{toString(e){if(!e)return;let{x:n,y:r}=e;return"translate3d("+(n?Math.round(n):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;let{scaleX:n,scaleY:r}=e;return"scaleX("+n+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[iy.Translate.toString(e),iy.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:n,duration:r,easing:i}=e;return n+" "+r+"ms "+i}}}),iO="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]",iv={display:"none"};function ib(e){let{id:n,value:r}=e;return z.createElement("div",{id:n,style:iv},r)}function ix(e){let{id:n,announcement:r,ariaLiveType:i="assertive"}=e;return z.createElement("div",{id:n,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":i,"aria-atomic":!0},r)}let iw=(0,z.createContext)(null),iS={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},i_={onDragStart(e){let{active:n}=e;return"Picked up draggable item "+n.id+"."},onDragOver(e){let{active:n,over:r}=e;return r?"Draggable item "+n.id+" was moved over droppable area "+r.id+".":"Draggable item "+n.id+" is no longer over a droppable area."},onDragEnd(e){let{active:n,over:r}=e;return r?"Draggable item "+n.id+" was dropped over droppable area "+r.id:"Draggable item "+n.id+" was dropped."},onDragCancel(e){let{active:n}=e;return"Dragging was cancelled. Draggable item "+n.id+" was dropped."}};function ik(e){let{announcements:n=i_,container:r,hiddenTextDescribedById:i,screenReaderInstructions:s=iS}=e,{announce:o,announcement:a}=function(){let[e,n]=(0,z.useState)("");return{announce:(0,z.useCallback)(e=>{null!=e&&n(e)},[]),announcement:e}}(),l=ic("DndLiveRegion"),[h,c]=(0,z.useState)(!1);(0,z.useEffect)(()=>{c(!0)},[]);var u=(0,z.useMemo)(()=>({onDragStart(e){let{active:r}=e;o(n.onDragStart({active:r}))},onDragMove(e){let{active:r,over:i}=e;n.onDragMove&&o(n.onDragMove({active:r,over:i}))},onDragOver(e){let{active:r,over:i}=e;o(n.onDragOver({active:r,over:i}))},onDragEnd(e){let{active:r,over:i}=e;o(n.onDragEnd({active:r,over:i}))},onDragCancel(e){let{active:r,over:i}=e;o(n.onDragCancel({active:r,over:i}))}}),[o,n]);let d=(0,z.useContext)(iw);if((0,z.useEffect)(()=>{if(!d)throw Error("useDndMonitor must be used within a children of <DndContext>");return d(u)},[u,d]),!h)return null;let p=z.createElement(z.Fragment,null,z.createElement(ib,{id:i,value:s.draggable}),z.createElement(ix,{id:l,announcement:a}));return r?(0,e2.createPortal)(p,r):p}function iC(){}function iE(e,n){return(0,z.useMemo)(()=>({sensor:e,options:null!=n?n:{}}),[e,n])}(b=M||(M={})).DragStart="dragStart",b.DragMove="dragMove",b.DragEnd="dragEnd",b.DragCancel="dragCancel",b.DragOver="dragOver",b.RegisterDroppable="registerDroppable",b.SetDroppableDisabled="setDroppableDisabled",b.UnregisterDroppable="unregisterDroppable";let iT=Object.freeze({x:0,y:0});function iP(e,n){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function iA(e,n){let{data:{value:r}}=e,{data:{value:i}}=n;return r-i}function iM(e,n){let{data:{value:r}}=e,{data:{value:i}}=n;return i-r}function iN(e){let{left:n,top:r,height:i,width:s}=e;return[{x:n,y:r},{x:n+s,y:r},{x:n,y:r+i},{x:n+s,y:r+i}]}function iD(e,n){if(!e||0===e.length)return null;let[r]=e;return n?r[n]:r}function iI(e,n,r){return void 0===n&&(n=e.left),void 0===r&&(r=e.top),{x:n+.5*e.width,y:r+.5*e.height}}let i$=e=>{let{collisionRect:n,droppableRects:r,droppableContainers:i}=e,s=iI(n,n.left,n.top),o=[];for(let e of i){let{id:n}=e,i=r.get(n);if(i){let r=iP(iI(i),s);o.push({id:n,data:{droppableContainer:e,value:r}})}}return o.sort(iA)},iR=e=>{let{collisionRect:n,droppableRects:r,droppableContainers:i}=e,s=[];for(let e of i){let{id:i}=e,o=r.get(i);if(o){let r=function(e,n){let r=Math.max(n.top,e.top),i=Math.max(n.left,e.left),s=Math.min(n.left+n.width,e.left+e.width),o=Math.min(n.top+n.height,e.top+e.height);if(i<s&&r<o){let a=n.width*n.height,l=e.width*e.height,h=(s-i)*(o-r);return Number((h/(a+l-h)).toFixed(4))}return 0}(o,n);r>0&&s.push({id:i,data:{droppableContainer:e,value:r}})}}return s.sort(iM)};function iL(e,n){return e&&n?{x:e.left-n.left,y:e.top-n.top}:iT}let iQ=function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((e,n)=>({...e,top:e.top+ +n.y,bottom:e.bottom+ +n.y,left:e.left+ +n.x,right:e.right+ +n.x}),{...e})};function ij(e){if(e.startsWith("matrix3d(")){let n=e.slice(9,-1).split(/, /);return{x:+n[12],y:+n[13],scaleX:+n[0],scaleY:+n[5]}}if(e.startsWith("matrix(")){let n=e.slice(7,-1).split(/, /);return{x:+n[4],y:+n[5],scaleX:+n[0],scaleY:+n[3]}}return null}let iV={ignoreTransform:!1};function iz(e,n){void 0===n&&(n=iV);let r=e.getBoundingClientRect();if(n.ignoreTransform){let{transform:n,transformOrigin:i}=r9(e).getComputedStyle(e);n&&(r=function(e,n,r){let i=ij(n);if(!i)return e;let{scaleX:s,scaleY:o,x:a,y:l}=i,h=e.left-a-(1-s)*parseFloat(r),c=e.top-l-(1-o)*parseFloat(r.slice(r.indexOf(" ")+1)),u=s?e.width/s:e.width,d=o?e.height/o:e.height;return{width:u,height:d,top:c,right:h+u,bottom:c+d,left:h}}(r,n,i))}let{top:i,left:s,width:o,height:a,bottom:l,right:h}=r;return{top:i,left:s,width:o,height:a,bottom:l,right:h}}function iB(e){return iz(e,{ignoreTransform:!0})}function iF(e,n){let r=[];return e?function i(s){var o;if(null!=n&&r.length>=n||!s)return r;if(r7(s)&&null!=s.scrollingElement&&!r.includes(s.scrollingElement))return r.push(s.scrollingElement),r;if(!r8(s)||ie(s)||r.includes(s))return r;let a=r9(e).getComputedStyle(s);return(s!==e&&function(e,n){void 0===n&&(n=r9(e).getComputedStyle(e));let r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(e=>{let i=n[e];return"string"==typeof i&&r.test(i)})}(s,a)&&r.push(s),void 0===(o=a)&&(o=r9(s).getComputedStyle(s)),"fixed"===o.position)?r:i(s.parentNode)}(e):r}function iZ(e){let[n]=iF(e,1);return null!=n?n:null}function iq(e){return r4&&e?r3(e)?e:r6(e)?r7(e)||e===it(e).scrollingElement?window:r8(e)?e:null:null:null}function iW(e){return r3(e)?e.scrollX:e.scrollLeft}function iX(e){return r3(e)?e.scrollY:e.scrollTop}function iU(e){return{x:iW(e),y:iX(e)}}function iY(e){return!!r4&&!!e&&e===document.scrollingElement}function iG(e){let n={x:0,y:0},r=iY(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},i={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},s=e.scrollTop<=n.y,o=e.scrollLeft<=n.x;return{isTop:s,isLeft:o,isBottom:e.scrollTop>=i.y,isRight:e.scrollLeft>=i.x,maxScroll:i,minScroll:n}}(x=N||(N={}))[x.Forward=1]="Forward",x[x.Backward=-1]="Backward";let iH={x:.2,y:.2};function iK(e){return e.reduce((e,n)=>id(e,iU(n)),iT)}function iJ(e,n){if(void 0===n&&(n=iz),!e)return;let{top:r,left:i,bottom:s,right:o}=n(e);iZ(e)&&(s<=0||o<=0||r>=window.innerHeight||i>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}let i0=[["x",["left","right"],function(e){return e.reduce((e,n)=>e+iW(n),0)}],["y",["top","bottom"],function(e){return e.reduce((e,n)=>e+iX(n),0)}]];class i1{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;let r=iF(n),i=iK(r);for(let[n,s,o]of(this.rect={...e},this.width=e.width,this.height=e.height,i0))for(let e of s)Object.defineProperty(this,e,{get:()=>{let s=o(r),a=i[n]-s;return this.rect[e]+a},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class i2{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var n;return null==(n=this.target)?void 0:n.removeEventListener(...e)})},this.target=e}add(e,n,r){var i;null==(i=this.target)||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function i5(e,n){let r=Math.abs(e.x),i=Math.abs(e.y);return"number"==typeof n?Math.sqrt(r**2+i**2)>n:"x"in n&&"y"in n?r>n.x&&i>n.y:"x"in n?r>n.x:"y"in n&&i>n.y}function i4(e){e.preventDefault()}function i3(e){e.stopPropagation()}(w=D||(D={})).Click="click",w.DragStart="dragstart",w.Keydown="keydown",w.ContextMenu="contextmenu",w.Resize="resize",w.SelectionChange="selectionchange",w.VisibilityChange="visibilitychange",(S=I||(I={})).Space="Space",S.Down="ArrowDown",S.Right="ArrowRight",S.Left="ArrowLeft",S.Up="ArrowUp",S.Esc="Escape",S.Enter="Enter",S.Tab="Tab";let i6={start:[I.Space,I.Enter],cancel:[I.Esc],end:[I.Space,I.Enter,I.Tab]},i9=(e,n)=>{let{currentCoordinates:r}=n;switch(e.code){case I.Right:return{...r,x:r.x+25};case I.Left:return{...r,x:r.x-25};case I.Down:return{...r,y:r.y+25};case I.Up:return{...r,y:r.y-25}}};class i7{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;let{event:{target:n}}=e;this.props=e,this.listeners=new i2(it(n)),this.windowListeners=new i2(r9(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(D.Resize,this.handleCancel),this.windowListeners.add(D.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(D.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&iJ(r),n(iT)}handleKeyDown(e){if(ig(e)){let{active:n,context:r,options:i}=this.props,{keyboardCodes:s=i6,coordinateGetter:o=i9,scrollBehavior:a="smooth"}=i,{code:l}=e;if(s.end.includes(l))return void this.handleEnd(e);if(s.cancel.includes(l))return void this.handleCancel(e);let{collisionRect:h}=r.current,c=h?{x:h.left,y:h.top}:iT;this.referenceCoordinates||(this.referenceCoordinates=c);let u=o(e,{active:n,context:r.current,currentCoordinates:c});if(u){let n=ip(u,c),i={x:0,y:0},{scrollableAncestors:s}=r.current;for(let r of s){let s=e.code,{isTop:o,isRight:l,isLeft:h,isBottom:c,maxScroll:d,minScroll:p}=iG(r),f=function(e){if(e===document.scrollingElement){let{innerWidth:e,innerHeight:n}=window;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}let{top:n,left:r,right:i,bottom:s}=e.getBoundingClientRect();return{top:n,left:r,right:i,bottom:s,width:e.clientWidth,height:e.clientHeight}}(r),g={x:Math.min(s===I.Right?f.right-f.width/2:f.right,Math.max(s===I.Right?f.left:f.left+f.width/2,u.x)),y:Math.min(s===I.Down?f.bottom-f.height/2:f.bottom,Math.max(s===I.Down?f.top:f.top+f.height/2,u.y))},m=s===I.Right&&!l||s===I.Left&&!h,y=s===I.Down&&!c||s===I.Up&&!o;if(m&&g.x!==u.x){let e=r.scrollLeft+n.x,o=s===I.Right&&e<=d.x||s===I.Left&&e>=p.x;if(o&&!n.y)return void r.scrollTo({left:e,behavior:a});o?i.x=r.scrollLeft-e:i.x=s===I.Right?r.scrollLeft-d.x:r.scrollLeft-p.x,i.x&&r.scrollBy({left:-i.x,behavior:a});break}if(y&&g.y!==u.y){let e=r.scrollTop+n.y,o=s===I.Down&&e<=d.y||s===I.Up&&e>=p.y;if(o&&!n.x)return void r.scrollTo({top:e,behavior:a});o?i.y=r.scrollTop-e:i.y=s===I.Down?r.scrollTop-d.y:r.scrollTop-p.y,i.y&&r.scrollBy({top:-i.y,behavior:a});break}}this.handleMove(e,id(ip(u,this.referenceCoordinates),i))}}}handleMove(e,n){let{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){let{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){let{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function i8(e){return!!(e&&"distance"in e)}function se(e){return!!(e&&"delay"in e)}i7.activators=[{eventName:"onKeyDown",handler:(e,n,r)=>{let{keyboardCodes:i=i6,onActivation:s}=n,{active:o}=r,{code:a}=e.nativeEvent;if(i.start.includes(a)){let n=o.activatorNode.current;return(!n||e.target===n)&&(e.preventDefault(),null==s||s({event:e.nativeEvent}),!0)}return!1}}];class st{constructor(e,n,r){var i;void 0===r&&(r=function(e){let{EventTarget:n}=r9(e);return e instanceof n?e:it(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;let{event:s}=e,{target:o}=s;this.props=e,this.events=n,this.document=it(o),this.documentListeners=new i2(this.document),this.listeners=new i2(r),this.windowListeners=new i2(r9(o)),this.initialCoordinates=null!=(i=im(s))?i:iT,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){let{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(D.Resize,this.handleCancel),this.windowListeners.add(D.DragStart,i4),this.windowListeners.add(D.VisibilityChange,this.handleCancel),this.windowListeners.add(D.ContextMenu,i4),this.documentListeners.add(D.Keydown,this.handleKeydown),n){if(null!=r&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(se(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(i8(n))return void this.handlePending(n)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){let{active:r,onPending:i}=this.props;i(r,e,this.initialCoordinates,n)}handleStart(){let{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(D.Click,i3,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(D.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;let{activated:r,initialCoordinates:i,props:s}=this,{onMove:o,options:{activationConstraint:a}}=s;if(!i)return;let l=null!=(n=im(e))?n:iT,h=ip(i,l);if(!r&&a){if(i8(a)){if(null!=a.tolerance&&i5(h,a.tolerance))return this.handleCancel();if(i5(h,a.distance))return this.handleStart()}return se(a)&&i5(h,a.tolerance)?this.handleCancel():void this.handlePending(a,h)}e.cancelable&&e.preventDefault(),o(l)}handleEnd(){let{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){let{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===I.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}let sn={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class sr extends st{constructor(e){let{event:n}=e;super(e,sn,it(n.target))}}sr.activators=[{eventName:"onPointerDown",handler:(e,n)=>{let{nativeEvent:r}=e,{onActivation:i}=n;return!!r.isPrimary&&0===r.button&&(null==i||i({event:r}),!0)}}];let si={move:{name:"mousemove"},end:{name:"mouseup"}};(_=$||($={}))[_.RightClick=2]="RightClick";class ss extends st{constructor(e){super(e,si,it(e.event.target))}}ss.activators=[{eventName:"onMouseDown",handler:(e,n)=>{let{nativeEvent:r}=e,{onActivation:i}=n;return r.button!==$.RightClick&&(null==i||i({event:r}),!0)}}];let so={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class sa extends st{constructor(e){super(e,so)}static setup(){return window.addEventListener(so.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(so.move.name,e)};function e(){}}}sa.activators=[{eventName:"onTouchStart",handler:(e,n)=>{let{nativeEvent:r}=e,{onActivation:i}=n,{touches:s}=r;return!(s.length>1)&&(null==i||i({event:r}),!0)}}],(k=R||(R={}))[k.Pointer=0]="Pointer",k[k.DraggableRect=1]="DraggableRect",(C=L||(L={}))[C.TreeOrder=0]="TreeOrder",C[C.ReversedTreeOrder=1]="ReversedTreeOrder";let sl={x:{[N.Backward]:!1,[N.Forward]:!1},y:{[N.Backward]:!1,[N.Forward]:!1}};(E=Q||(Q={}))[E.Always=0]="Always",E[E.BeforeDragging=1]="BeforeDragging",E[E.WhileDragging=2]="WhileDragging",(j||(j={})).Optimized="optimized";let sh=new Map;function sc(e,n){return io(r=>e?r||("function"==typeof n?n(e):e):null,[n,e])}function su(e){let{callback:n,disabled:r}=e,i=ii(n),s=(0,z.useMemo)(()=>{if(r||"undefined"==typeof window||void 0===window.ResizeObserver)return;let{ResizeObserver:e}=window;return new e(i)},[r]);return(0,z.useEffect)(()=>()=>null==s?void 0:s.disconnect(),[s]),s}function sd(e){return new i1(iz(e),e)}function sp(e,n,r){void 0===n&&(n=sd);let[i,s]=(0,z.useState)(null);function o(){s(i=>{if(!e)return null;if(!1===e.isConnected){var s;return null!=(s=null!=i?i:r)?s:null}let o=n(e);return JSON.stringify(i)===JSON.stringify(o)?i:o})}let a=function(e){let{callback:n,disabled:r}=e,i=ii(n),s=(0,z.useMemo)(()=>{if(r||"undefined"==typeof window||void 0===window.MutationObserver)return;let{MutationObserver:e}=window;return new e(i)},[i,r]);return(0,z.useEffect)(()=>()=>null==s?void 0:s.disconnect(),[s]),s}({callback(n){if(e)for(let r of n){let{type:n,target:i}=r;if("childList"===n&&i instanceof HTMLElement&&i.contains(e)){o();break}}}}),l=su({callback:o});return ir(()=>{o(),e?(null==l||l.observe(e),null==a||a.observe(document.body,{childList:!0,subtree:!0})):(null==l||l.disconnect(),null==a||a.disconnect())},[e]),i}let sf=[];function sg(e,n){void 0===n&&(n=[]);let r=(0,z.useRef)(null);return(0,z.useEffect)(()=>{r.current=null},n),(0,z.useEffect)(()=>{let n=e!==iT;n&&!r.current&&(r.current=e),!n&&r.current&&(r.current=null)},[e]),r.current?ip(e,r.current):iT}function sm(e){return(0,z.useMemo)(()=>e?function(e){let n=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:n,bottom:r,width:n,height:r}}(e):null,[e])}let sy=[];function sO(e){if(!e)return null;if(e.children.length>1)return e;let n=e.children[0];return r8(n)?n:e}let sv=[{sensor:sr,options:{}},{sensor:i7,options:{}}],sb={current:{}},sx={draggable:{measure:iB},droppable:{measure:iB,strategy:Q.WhileDragging,frequency:j.Optimized},dragOverlay:{measure:iz}};class sw extends Map{get(e){var n;return null!=e&&null!=(n=super.get(e))?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return null!=(n=null==(r=this.get(e))?void 0:r.node.current)?n:void 0}}let sS={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new sw,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:iC},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:sx,measureDroppableContainers:iC,windowRect:null,measuringScheduled:!1},s_={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:iC,draggableNodes:new Map,over:null,measureDroppableContainers:iC},sk=(0,z.createContext)(s_),sC=(0,z.createContext)(sS);function sE(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new sw}}}function sT(e,n){switch(n.type){case M.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:n.initialCoordinates,active:n.active}};case M.DragMove:if(null==e.draggable.active)return e;return{...e,draggable:{...e.draggable,translate:{x:n.coordinates.x-e.draggable.initialCoordinates.x,y:n.coordinates.y-e.draggable.initialCoordinates.y}}};case M.DragEnd:case M.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case M.RegisterDroppable:{let{element:r}=n,{id:i}=r,s=new sw(e.droppable.containers);return s.set(i,r),{...e,droppable:{...e.droppable,containers:s}}}case M.SetDroppableDisabled:{let{id:r,key:i,disabled:s}=n,o=e.droppable.containers.get(r);if(!o||i!==o.key)return e;let a=new sw(e.droppable.containers);return a.set(r,{...o,disabled:s}),{...e,droppable:{...e.droppable,containers:a}}}case M.UnregisterDroppable:{let{id:r,key:i}=n,s=e.droppable.containers.get(r);if(!s||i!==s.key)return e;let o=new sw(e.droppable.containers);return o.delete(r),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function sP(e){let{disabled:n}=e,{active:r,activatorEvent:i,draggableNodes:s}=(0,z.useContext)(sk),o=il(i),a=il(null==r?void 0:r.id);return(0,z.useEffect)(()=>{if(!n&&!i&&o&&null!=a){if(!ig(o)||document.activeElement===o.target)return;let e=s.get(a);if(!e)return;let{activatorNode:n,node:r}=e;(n.current||r.current)&&requestAnimationFrame(()=>{for(let e of[n.current,r.current]){if(!e)continue;let n=e.matches(iO)?e:e.querySelector(iO);if(n){n.focus();break}}})}},[i,n,s,a,o]),null}function sA(e,n){let{transform:r,...i}=n;return null!=e&&e.length?e.reduce((e,n)=>n({transform:e,...i}),r):r}let sM=(0,z.createContext)({...iT,scaleX:1,scaleY:1});(T=V||(V={}))[T.Uninitialized=0]="Uninitialized",T[T.Initializing=1]="Initializing",T[T.Initialized=2]="Initialized";let sN=(0,z.memo)(function(e){var n,r,i,s,o,a;let{id:l,accessibility:h,autoScroll:c=!0,children:u,sensors:d=sv,collisionDetection:p=iR,measuring:f,modifiers:g,...m}=e,[y,O]=(0,z.useReducer)(sT,void 0,sE),[b,x]=function(){let[e]=(0,z.useState)(()=>new Set),n=(0,z.useCallback)(n=>(e.add(n),()=>e.delete(n)),[e]);return[(0,z.useCallback)(n=>{let{type:r,event:i}=n;e.forEach(e=>{var n;return null==(n=e[r])?void 0:n.call(e,i)})},[e]),n]}(),[w,S]=(0,z.useState)(V.Uninitialized),_=w===V.Initialized,{draggable:{active:k,nodes:C,translate:E},droppable:{containers:T}}=y,P=null!=k?C.get(k):null,A=(0,z.useRef)({initial:null,translated:null}),D=(0,z.useMemo)(()=>{var e;return null!=k?{id:k,data:null!=(e=null==P?void 0:P.data)?e:sb,rect:A}:null},[k,P]),I=(0,z.useRef)(null),[$,j]=(0,z.useState)(null),[B,F]=(0,z.useState)(null),Z=is(m,Object.values(m)),q=ic("DndDescribedBy",l),W=(0,z.useMemo)(()=>T.getEnabled(),[T]),X=(0,z.useMemo)(()=>({draggable:{...sx.draggable,...null==f?void 0:f.draggable},droppable:{...sx.droppable,...null==f?void 0:f.droppable},dragOverlay:{...sx.dragOverlay,...null==f?void 0:f.dragOverlay}}),[null==f?void 0:f.draggable,null==f?void 0:f.droppable,null==f?void 0:f.dragOverlay]),{droppableRects:U,measureDroppableContainers:Y,measuringScheduled:G}=function(e,n){let{dragging:r,dependencies:i,config:s}=n,[o,a]=(0,z.useState)(null),{frequency:l,measure:h,strategy:c}=s,u=(0,z.useRef)(e),d=function(){switch(c){case Q.Always:return!1;case Q.BeforeDragging:return r;default:return!r}}(),p=is(d),f=(0,z.useCallback)(function(e){void 0===e&&(e=[]),p.current||a(n=>null===n?e:n.concat(e.filter(e=>!n.includes(e))))},[p]),g=(0,z.useRef)(null),m=io(n=>{if(d&&!r)return sh;if(!n||n===sh||u.current!==e||null!=o){let n=new Map;for(let r of e){if(!r)continue;if(o&&o.length>0&&!o.includes(r.id)&&r.rect.current){n.set(r.id,r.rect.current);continue}let e=r.node.current,i=e?new i1(h(e),e):null;r.rect.current=i,i&&n.set(r.id,i)}return n}return n},[e,o,r,d,h]);return(0,z.useEffect)(()=>{u.current=e},[e]),(0,z.useEffect)(()=>{d||f()},[r,d]),(0,z.useEffect)(()=>{o&&o.length>0&&a(null)},[JSON.stringify(o)]),(0,z.useEffect)(()=>{d||"number"!=typeof l||null!==g.current||(g.current=setTimeout(()=>{f(),g.current=null},l))},[l,d,f,...i]),{droppableRects:m,measureDroppableContainers:f,measuringScheduled:null!=o}}(W,{dragging:_,dependencies:[E.x,E.y],config:X.droppable}),H=function(e,n){let r=null!=n?e.get(n):void 0,i=r?r.node.current:null;return io(e=>{var r;return null==n?null:null!=(r=null!=i?i:e)?r:null},[i,n])}(C,k),K=(0,z.useMemo)(()=>B?im(B):null,[B]),J=function(){let e=(null==$?void 0:$.autoScrollEnabled)===!1,n="object"==typeof c?!1===c.enabled:!1===c,r=_&&!e&&!n;return"object"==typeof c?{...c,enabled:r}:{enabled:r}}(),ee=sc(H,X.draggable.measure);!function(e){let{activeNode:n,measure:r,initialRect:i,config:s=!0}=e,o=(0,z.useRef)(!1),{x:a,y:l}="boolean"==typeof s?{x:s,y:s}:s;ir(()=>{if(!a&&!l||!n){o.current=!1;return}if(o.current||!i)return;let e=null==n?void 0:n.node.current;if(!e||!1===e.isConnected)return;let s=iL(r(e),i);if(a||(s.x=0),l||(s.y=0),o.current=!0,Math.abs(s.x)>0||Math.abs(s.y)>0){let n=iZ(e);n&&n.scrollBy({top:s.y,left:s.x})}},[n,a,l,i,r])}({activeNode:null!=k?C.get(k):null,config:J.layoutShiftCompensation,initialRect:ee,measure:X.draggable.measure});let et=sp(H,X.draggable.measure,ee),en=sp(H?H.parentElement:null),er=(0,z.useRef)({activatorEvent:null,active:null,activeNode:H,collisionRect:null,collisions:null,droppableRects:U,draggableNodes:C,draggingNode:null,draggingNodeRect:null,droppableContainers:T,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ei=T.getNodeFor(null==(n=er.current.over)?void 0:n.id),es=function(e){let{measure:n}=e,[r,i]=(0,z.useState)(null),s=su({callback:(0,z.useCallback)(e=>{for(let{target:r}of e)if(r8(r)){i(e=>{let i=n(r);return e?{...e,width:i.width,height:i.height}:i});break}},[n])}),[o,a]=ia((0,z.useCallback)(e=>{let r=sO(e);null==s||s.disconnect(),r&&(null==s||s.observe(r)),i(r?n(r):null)},[n,s]));return(0,z.useMemo)(()=>({nodeRef:o,rect:r,setRef:a}),[r,o,a])}({measure:X.dragOverlay.measure}),eo=null!=(r=es.nodeRef.current)?r:H,ea=_?null!=(i=es.rect)?i:et:null,el=!!(es.nodeRef.current&&es.rect),eh=function(e){let n=sc(e);return iL(e,n)}(el?null:et),ec=sm(eo?r9(eo):null),eu=function(e){let n=(0,z.useRef)(e),r=io(r=>e?r&&r!==sf&&e&&n.current&&e.parentNode===n.current.parentNode?r:iF(e):sf,[e]);return(0,z.useEffect)(()=>{n.current=e},[e]),r}(_?null!=ei?ei:H:null),ed=function(e,n){void 0===n&&(n=iz);let[r]=e,i=sm(r?r9(r):null),[s,o]=(0,z.useState)(sy);function a(){o(()=>e.length?e.map(e=>iY(e)?i:new i1(n(e),e)):sy)}let l=su({callback:a});return ir(()=>{null==l||l.disconnect(),a(),e.forEach(e=>null==l?void 0:l.observe(e))},[e]),s}(eu),ep=sA(g,{transform:{x:E.x-eh.x,y:E.y-eh.y,scaleX:1,scaleY:1},activatorEvent:B,active:D,activeNodeRect:et,containerNodeRect:en,draggingNodeRect:ea,over:er.current.over,overlayNodeRect:es.rect,scrollableAncestors:eu,scrollableAncestorRects:ed,windowRect:ec}),ef=K?id(K,E):null,eg=function(e){let[n,r]=(0,z.useState)(null),i=(0,z.useRef)(e),s=(0,z.useCallback)(e=>{let n=iq(e.target);n&&r(e=>e?(e.set(n,iU(n)),new Map(e)):null)},[]);return(0,z.useEffect)(()=>{let n=i.current;if(e!==n){o(n);let a=e.map(e=>{let n=iq(e);return n?(n.addEventListener("scroll",s,{passive:!0}),[n,iU(n)]):null}).filter(e=>null!=e);r(a.length?new Map(a):null),i.current=e}return()=>{o(e),o(n)};function o(e){e.forEach(e=>{let n=iq(e);null==n||n.removeEventListener("scroll",s)})}},[s,e]),(0,z.useMemo)(()=>e.length?n?Array.from(n.values()).reduce((e,n)=>id(e,n),iT):iK(e):iT,[e,n])}(eu),em=sg(eg),ey=sg(eg,[et]),eO=id(ep,em),ev=ea?iQ(ea,ep):null,eb=D&&ev?p({active:D,collisionRect:ev,droppableRects:U,droppableContainers:W,pointerCoordinates:ef}):null,ex=iD(eb,"id"),[ew,eS]=(0,z.useState)(null),e_=(o=el?ep:id(ep,ey),a=null!=(s=null==ew?void 0:ew.rect)?s:null,{...o,scaleX:a&&et?a.width/et.width:1,scaleY:a&&et?a.height/et.height:1}),ek=(0,z.useRef)(null),eC=(0,z.useCallback)((e,n)=>{let{sensor:r,options:i}=n;if(null==I.current)return;let s=C.get(I.current);if(!s)return;let o=e.nativeEvent,a=new r({active:I.current,activeNode:s,event:o,options:i,context:er,onAbort(e){if(!C.get(e))return;let{onDragAbort:n}=Z.current,r={id:e};null==n||n(r),b({type:"onDragAbort",event:r})},onPending(e,n,r,i){if(!C.get(e))return;let{onDragPending:s}=Z.current,o={id:e,constraint:n,initialCoordinates:r,offset:i};null==s||s(o),b({type:"onDragPending",event:o})},onStart(e){let n=I.current;if(null==n)return;let r=C.get(n);if(!r)return;let{onDragStart:i}=Z.current,s={activatorEvent:o,active:{id:n,data:r.data,rect:A}};(0,e2.unstable_batchedUpdates)(()=>{null==i||i(s),S(V.Initializing),O({type:M.DragStart,initialCoordinates:e,active:n}),b({type:"onDragStart",event:s}),j(ek.current),F(o)})},onMove(e){O({type:M.DragMove,coordinates:e})},onEnd:l(M.DragEnd),onCancel:l(M.DragCancel)});function l(e){return async function(){let{active:n,collisions:r,over:i,scrollAdjustedTranslate:s}=er.current,a=null;if(n&&s){let{cancelDrop:l}=Z.current;a={activatorEvent:o,active:n,collisions:r,delta:s,over:i},e===M.DragEnd&&"function"==typeof l&&await Promise.resolve(l(a))&&(e=M.DragCancel)}I.current=null,(0,e2.unstable_batchedUpdates)(()=>{O({type:e}),S(V.Uninitialized),eS(null),j(null),F(null),ek.current=null;let n=e===M.DragEnd?"onDragEnd":"onDragCancel";if(a){let e=Z.current[n];null==e||e(a),b({type:n,event:a})}})}}ek.current=a},[C]),eE=(0,z.useCallback)((e,n)=>(r,i)=>{let s=r.nativeEvent,o=C.get(i);null!==I.current||!o||s.dndKit||s.defaultPrevented||!0===e(r,n.options,{active:o})&&(s.dndKit={capturedBy:n.sensor},I.current=i,eC(r,n))},[C,eC]),eT=(0,z.useMemo)(()=>d.reduce((e,n)=>{let{sensor:r}=n;return[...e,...r.activators.map(e=>({eventName:e.eventName,handler:eE(e.handler,n)}))]},[]),[d,eE]);(0,z.useEffect)(()=>{if(!r4)return;let e=d.map(e=>{let{sensor:n}=e;return null==n.setup?void 0:n.setup()});return()=>{for(let n of e)null==n||n()}},d.map(e=>{let{sensor:n}=e;return n})),ir(()=>{et&&w===V.Initializing&&S(V.Initialized)},[et,w]),(0,z.useEffect)(()=>{let{onDragMove:e}=Z.current,{active:n,activatorEvent:r,collisions:i,over:s}=er.current;if(!n||!r)return;let o={active:n,activatorEvent:r,collisions:i,delta:{x:eO.x,y:eO.y},over:s};(0,e2.unstable_batchedUpdates)(()=>{null==e||e(o),b({type:"onDragMove",event:o})})},[eO.x,eO.y]),(0,z.useEffect)(()=>{let{active:e,activatorEvent:n,collisions:r,droppableContainers:i,scrollAdjustedTranslate:s}=er.current;if(!e||null==I.current||!n||!s)return;let{onDragOver:o}=Z.current,a=i.get(ex),l=a&&a.rect.current?{id:a.id,rect:a.rect.current,data:a.data,disabled:a.disabled}:null,h={active:e,activatorEvent:n,collisions:r,delta:{x:s.x,y:s.y},over:l};(0,e2.unstable_batchedUpdates)(()=>{eS(l),null==o||o(h),b({type:"onDragOver",event:h})})},[ex]),ir(()=>{er.current={activatorEvent:B,active:D,activeNode:H,collisionRect:ev,collisions:eb,droppableRects:U,draggableNodes:C,draggingNode:eo,draggingNodeRect:ea,droppableContainers:T,over:ew,scrollableAncestors:eu,scrollAdjustedTranslate:eO},A.current={initial:ea,translated:ev}},[D,H,eb,ev,C,eo,ea,U,T,ew,eu,eO]),function(e){let{acceleration:n,activator:r=R.Pointer,canScroll:i,draggingRect:s,enabled:o,interval:a=5,order:l=L.TreeOrder,pointerCoordinates:h,scrollableAncestors:c,scrollableAncestorRects:u,delta:d,threshold:p}=e,f=function(e){let{delta:n,disabled:r}=e,i=il(n);return io(e=>{if(r||!i||!e)return sl;let s={x:Math.sign(n.x-i.x),y:Math.sign(n.y-i.y)};return{x:{[N.Backward]:e.x[N.Backward]||-1===s.x,[N.Forward]:e.x[N.Forward]||1===s.x},y:{[N.Backward]:e.y[N.Backward]||-1===s.y,[N.Forward]:e.y[N.Forward]||1===s.y}}},[r,n,i])}({delta:d,disabled:!o}),[g,m]=function(){let e=(0,z.useRef)(null);return[(0,z.useCallback)((n,r)=>{e.current=setInterval(n,r)},[]),(0,z.useCallback)(()=>{null!==e.current&&(clearInterval(e.current),e.current=null)},[])]}(),y=(0,z.useRef)({x:0,y:0}),O=(0,z.useRef)({x:0,y:0}),b=(0,z.useMemo)(()=>{switch(r){case R.Pointer:return h?{top:h.y,bottom:h.y,left:h.x,right:h.x}:null;case R.DraggableRect:return s}},[r,s,h]),x=(0,z.useRef)(null),w=(0,z.useCallback)(()=>{let e=x.current;if(!e)return;let n=y.current.x*O.current.x,r=y.current.y*O.current.y;e.scrollBy(n,r)},[]),S=(0,z.useMemo)(()=>l===L.TreeOrder?[...c].reverse():c,[l,c]);(0,z.useEffect)(()=>{if(!o||!c.length||!b)return void m();for(let e of S){if((null==i?void 0:i(e))===!1)continue;let r=u[c.indexOf(e)];if(!r)continue;let{direction:s,speed:o}=function(e,n,r,i,s){let{top:o,left:a,right:l,bottom:h}=r;void 0===i&&(i=10),void 0===s&&(s=iH);let{isTop:c,isBottom:u,isLeft:d,isRight:p}=iG(e),f={x:0,y:0},g={x:0,y:0},m={height:n.height*s.y,width:n.width*s.x};return!c&&o<=n.top+m.height?(f.y=N.Backward,g.y=i*Math.abs((n.top+m.height-o)/m.height)):!u&&h>=n.bottom-m.height&&(f.y=N.Forward,g.y=i*Math.abs((n.bottom-m.height-h)/m.height)),!p&&l>=n.right-m.width?(f.x=N.Forward,g.x=i*Math.abs((n.right-m.width-l)/m.width)):!d&&a<=n.left+m.width&&(f.x=N.Backward,g.x=i*Math.abs((n.left+m.width-a)/m.width)),{direction:f,speed:g}}(e,r,b,n,p);for(let e of["x","y"])f[e][s[e]]||(o[e]=0,s[e]=0);if(o.x>0||o.y>0){m(),x.current=e,g(w,a),y.current=o,O.current=s;return}}y.current={x:0,y:0},O.current={x:0,y:0},m()},[n,w,i,m,o,a,JSON.stringify(b),JSON.stringify(f),g,c,S,u,JSON.stringify(p)])}({...J,delta:E,draggingRect:ev,pointerCoordinates:ef,scrollableAncestors:eu,scrollableAncestorRects:ed});let eP=(0,z.useMemo)(()=>({active:D,activeNode:H,activeNodeRect:et,activatorEvent:B,collisions:eb,containerNodeRect:en,dragOverlay:es,draggableNodes:C,droppableContainers:T,droppableRects:U,over:ew,measureDroppableContainers:Y,scrollableAncestors:eu,scrollableAncestorRects:ed,measuringConfiguration:X,measuringScheduled:G,windowRect:ec}),[D,H,et,B,eb,en,es,C,T,U,ew,Y,eu,ed,X,G,ec]),eA=(0,z.useMemo)(()=>({activatorEvent:B,activators:eT,active:D,activeNodeRect:et,ariaDescribedById:{draggable:q},dispatch:O,draggableNodes:C,over:ew,measureDroppableContainers:Y}),[B,eT,D,et,O,q,C,ew,Y]);return z.createElement(iw.Provider,{value:x},z.createElement(sk.Provider,{value:eA},z.createElement(sC.Provider,{value:eP},z.createElement(sM.Provider,{value:e_},u)),z.createElement(sP,{disabled:(null==h?void 0:h.restoreFocus)===!1})),z.createElement(ik,{...h,hiddenTextDescribedById:q}))}),sD=(0,z.createContext)(null),sI="button";function s$(){return(0,z.useContext)(sC)}let sR={timeout:25};function sL(e){let{animation:n,children:r}=e,[i,s]=(0,z.useState)(null),[o,a]=(0,z.useState)(null),l=il(r);return r||i||!l||s(l),ir(()=>{if(!o)return;let e=null==i?void 0:i.key,r=null==i?void 0:i.props.id;if(null==e||null==r)return void s(null);Promise.resolve(n(r,o)).then(()=>{s(null)})},[n,i,o]),z.createElement(z.Fragment,null,r,i?(0,z.cloneElement)(i,{ref:a}):null)}let sQ={x:0,y:0,scaleX:1,scaleY:1};function sj(e){let{children:n}=e;return z.createElement(sk.Provider,{value:s_},z.createElement(sM.Provider,{value:sQ},n))}let sV={position:"fixed",touchAction:"none"},sz=e=>ig(e)?"transform 250ms ease":void 0,sB=(0,z.forwardRef)((e,n)=>{let{as:r,activatorEvent:i,adjustScale:s,children:o,className:a,rect:l,style:h,transform:c,transition:u=sz}=e;if(!l)return null;let d=s?c:{...c,scaleX:1,scaleY:1},p={...sV,width:l.width,height:l.height,top:l.top,left:l.left,transform:iy.Transform.toString(d),transformOrigin:s&&i?function(e,n){let r=im(e);if(!r)return"0 0";let i={x:(r.x-n.left)/n.width*100,y:(r.y-n.top)/n.height*100};return i.x+"% "+i.y+"%"}(i,l):void 0,transition:"function"==typeof u?u(i):u,...h};return z.createElement(r,{className:a,style:p,ref:n},o)}),sF={duration:250,easing:"ease",keyframes:e=>{let{transform:{initial:n,final:r}}=e;return[{transform:iy.Transform.toString(n)},{transform:iy.Transform.toString(r)}]},sideEffects:(s={styles:{active:{opacity:"0"}}},e=>{let{active:n,dragOverlay:r}=e,i={},{styles:o,className:a}=s;if(null!=o&&o.active)for(let[e,r]of Object.entries(o.active))void 0!==r&&(i[e]=n.node.style.getPropertyValue(e),n.node.style.setProperty(e,r));if(null!=o&&o.dragOverlay)for(let[e,n]of Object.entries(o.dragOverlay))void 0!==n&&r.node.style.setProperty(e,n);return null!=a&&a.active&&n.node.classList.add(a.active),null!=a&&a.dragOverlay&&r.node.classList.add(a.dragOverlay),function(){for(let[e,r]of Object.entries(i))n.node.style.setProperty(e,r);null!=a&&a.active&&n.node.classList.remove(a.active)}})},sZ=0,sq=z.memo(e=>{var n;let{adjustScale:r=!1,children:i,dropAnimation:s,style:o,transition:a,modifiers:l,wrapperElement:h="div",className:c,zIndex:u=999}=e,{activatorEvent:d,active:p,activeNodeRect:f,containerNodeRect:g,draggableNodes:m,droppableContainers:y,dragOverlay:O,over:b,measuringConfiguration:x,scrollableAncestors:w,scrollableAncestorRects:S,windowRect:_}=s$(),k=(0,z.useContext)(sM),C=(n=null==p?void 0:p.id,(0,z.useMemo)(()=>{if(null!=n)return++sZ},[n])),E=sA(l,{activatorEvent:d,active:p,activeNodeRect:f,containerNodeRect:g,draggingNodeRect:O.rect,over:b,overlayNodeRect:O.rect,scrollableAncestors:w,scrollableAncestorRects:S,transform:k,windowRect:_}),T=sc(f),P=function(e){let{config:n,draggableNodes:r,droppableContainers:i,measuringConfiguration:s}=e;return ii((e,o)=>{if(null===n)return;let a=r.get(e);if(!a)return;let l=a.node.current;if(!l)return;let h=sO(o);if(!h)return;let{transform:c}=r9(o).getComputedStyle(o),u=ij(c);if(!u)return;let d="function"==typeof n?n:function(e){let{duration:n,easing:r,sideEffects:i,keyframes:s}={...sF,...e};return e=>{let{active:o,dragOverlay:a,transform:l,...h}=e;if(!n)return;let c={x:a.rect.left-o.rect.left,y:a.rect.top-o.rect.top},u={scaleX:1!==l.scaleX?o.rect.width*l.scaleX/a.rect.width:1,scaleY:1!==l.scaleY?o.rect.height*l.scaleY/a.rect.height:1},d={x:l.x-c.x,y:l.y-c.y,...u},p=s({...h,active:o,dragOverlay:a,transform:{initial:l,final:d}}),[f]=p,g=p[p.length-1];if(JSON.stringify(f)===JSON.stringify(g))return;let m=null==i?void 0:i({active:o,dragOverlay:a,...h}),y=a.node.animate(p,{duration:n,easing:r,fill:"forwards"});return new Promise(e=>{y.onfinish=()=>{null==m||m(),e()}})}}(n);return iJ(l,s.draggable.measure),d({active:{id:e,data:a.data,node:l,rect:s.draggable.measure(l)},draggableNodes:r,dragOverlay:{node:o,rect:s.dragOverlay.measure(h)},droppableContainers:i,measuringConfiguration:s,transform:u})})}({config:s,draggableNodes:m,droppableContainers:y,measuringConfiguration:x}),A=T?O.setRef:void 0;return z.createElement(sj,null,z.createElement(sL,{animation:P},p&&C?z.createElement(sB,{key:C,id:p.id,ref:A,as:h,activatorEvent:d,adjustScale:r,className:c,transition:a,rect:T,style:{zIndex:u,...o},transform:E},i):null))});function sW(e,n,r){let i=e.slice();return i.splice(r<0?i.length+r:r,0,i.splice(n,1)[0]),i}function sX(e){return null!==e&&e>=0}let sU=e=>{let{rects:n,activeIndex:r,overIndex:i,index:s}=e,o=sW(n,i,r),a=n[s],l=o[s];return l&&a?{x:l.left-a.left,y:l.top-a.top,scaleX:l.width/a.width,scaleY:l.height/a.height}:null},sY="Sortable",sG=z.createContext({activeIndex:-1,containerId:sY,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:sU,disabled:{draggable:!1,droppable:!1}});function sH(e){let{children:n,id:r,items:i,strategy:s=sU,disabled:o=!1}=e,{active:a,dragOverlay:l,droppableRects:h,over:c,measureDroppableContainers:u}=s$(),d=ic(sY,r),p=null!==l.rect,f=(0,z.useMemo)(()=>i.map(e=>"object"==typeof e&&"id"in e?e.id:e),[i]),g=null!=a,m=a?f.indexOf(a.id):-1,y=c?f.indexOf(c.id):-1,O=(0,z.useRef)(f),b=!function(e,n){if(e===n)return!0;if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==n[r])return!1;return!0}(f,O.current),x=-1!==y&&-1===m||b,w="boolean"==typeof o?{draggable:o,droppable:o}:o;ir(()=>{b&&g&&u(f)},[b,f,g,u]),(0,z.useEffect)(()=>{O.current=f},[f]);let S=(0,z.useMemo)(()=>({activeIndex:m,containerId:d,disabled:w,disableTransforms:x,items:f,overIndex:y,useDragOverlay:p,sortedRects:f.reduce((e,n,r)=>{let i=h.get(n);return i&&(e[r]=i),e},Array(f.length)),strategy:s}),[m,d,w.draggable,w.droppable,x,f,y,h,p,s]);return z.createElement(sG.Provider,{value:S},n)}let sK=e=>{let{id:n,items:r,activeIndex:i,overIndex:s}=e;return sW(r,i,s).indexOf(n)},sJ=e=>{let{containerId:n,isSorting:r,wasDragging:i,index:s,items:o,newIndex:a,previousItems:l,previousContainerId:h,transition:c}=e;return!!c&&!!i&&(l===o||s!==a)&&(!!r||a!==s&&n===h)},s0={duration:200,easing:"ease"},s1="transform",s2=iy.Transition.toString({property:s1,duration:0,easing:"linear"}),s5={roleDescription:"sortable"};function s4(e){if(!e)return!1;let n=e.data.current;return!!n&&"sortable"in n&&"object"==typeof n.sortable&&"containerId"in n.sortable&&"items"in n.sortable&&"index"in n.sortable}let s3=[I.Down,I.Right,I.Up,I.Left];function s6(e,n){return!!s4(e)&&!!s4(n)&&e.data.current.sortable.containerId===n.data.current.sortable.containerId}function s9(e){return z.createElement("div",Object.assign({style:{overflow:"auto"}},e))}let s7={coordinateGetter:(e,n)=>{let{context:{active:r,collisionRect:i,droppableRects:s,droppableContainers:o,over:a,scrollableAncestors:l}}=n;if(s3.includes(e.code)){if(e.preventDefault(),!r||!i)return;let n=[];o.getEnabled().forEach(r=>{if(!r||null!=r&&r.disabled)return;let o=s.get(r.id);if(o)switch(e.code){case I.Down:i.top<o.top&&n.push(r);break;case I.Up:i.top>o.top&&n.push(r);break;case I.Left:i.left>o.left&&n.push(r);break;case I.Right:i.left<o.left&&n.push(r)}});let u=(e=>{let{collisionRect:n,droppableRects:r,droppableContainers:i}=e,s=iN(n),o=[];for(let e of i){let{id:n}=e,i=r.get(n);if(i){let r=iN(i),a=Number((s.reduce((e,n,i)=>e+iP(r[i],n),0)/4).toFixed(4));o.push({id:n,data:{droppableContainer:e,value:a}})}}return o.sort(iA)})({active:r,collisionRect:i,droppableRects:s,droppableContainers:n,pointerCoordinates:null}),d=iD(u,"id");if(d===(null==a?void 0:a.id)&&u.length>1&&(d=u[1].id),null!=d){let e=o.get(r.id),n=o.get(d),a=n?s.get(n.id):null,u=null==n?void 0:n.node.current;if(u&&a&&e&&n){var h,c;let r=iF(u).some((e,n)=>l[n]!==e),s=s6(e,n),o=(h=e,c=n,!!s4(h)&&!!s4(c)&&!!s6(h,c)&&h.data.current.sortable.index<c.data.current.sortable.index),d=r||!s?{x:0,y:0}:{x:o?i.width-a.width:0,y:o?i.height-a.height:0},p={x:a.left,y:a.top};return d.x&&d.y?p:ip(p,d)}}}}};function s8(e){let{items:n,onSortEnd:r,adjustScale:i,renderItem:s,transition:o,collisionDetection:a=i$,strategy:l=sU,useDragOverlay:h=!0,dragOverlayCls:c,container:u=s9,prefix:d="semi-sortable"}=e,[p,f]=(0,z.useState)(null),g=function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0,z.useMemo)(()=>[...n].filter(e=>null!=e),[...n])}(iE(ss),iE(sa),iE(i7,s7)),m=(0,z.useCallback)(e=>n.indexOf(e),[n]),y=(0,z.useMemo)(()=>p?m(p):-1,[m,p]),O=(0,z.useCallback)(e=>{let{active:n}=e;n&&f(n.id)},[]),b=(0,z.useCallback)(e=>{let{over:n}=e;if(f(null),n){let e=m(n.id);y!==e&&r({oldIndex:y,newIndex:e})}},[y,m,r]),x=(0,z.useCallback)(()=>{f(null)},[]);return z.createElement(sN,{sensors:g,collisionDetection:a,onDragStart:O,onDragEnd:b,onDragCancel:x,autoScroll:{order:L.ReversedTreeOrder}},z.createElement(sH,{items:n,strategy:l},z.createElement(u,null,n.map((e,n)=>z.createElement(oe,{key:e,id:e,index:n,renderItem:s,useDragOverlay:h,prefix:d,transition:o})))),h?(0,e2.createPortal)(z.createElement(sq,{adjustScale:i,style:{zIndex:void 0},className:c},p?s({id:p,sortableHandle:e=>e}):null),document.body):null)}function oe(e){let{animateLayoutChanges:n,id:r,renderItem:i,prefix:s,transition:o}=e,{listeners:a,setNodeRef:l,transform:h,transition:c,active:u,isOver:d,attributes:p}=function(e){var n,r,i,s;let{animateLayoutChanges:o=sJ,attributes:a,disabled:l,data:h,getNewIndex:c=sK,id:u,strategy:d,resizeObserverConfig:p,transition:f=s0}=e,{items:g,containerId:m,activeIndex:y,disabled:O,disableTransforms:b,sortedRects:x,overIndex:w,useDragOverlay:S,strategy:_}=(0,z.useContext)(sG),k=(n=l,r=O,"boolean"==typeof n?{draggable:n,droppable:!1}:{draggable:null!=(i=null==n?void 0:n.draggable)?i:r.draggable,droppable:null!=(s=null==n?void 0:n.droppable)?s:r.droppable}),C=g.indexOf(u),E=(0,z.useMemo)(()=>({sortable:{containerId:m,index:C,items:g},...h}),[m,h,C,g]),T=(0,z.useMemo)(()=>g.slice(g.indexOf(u)),[g,u]),{rect:P,node:A,isOver:N,setNodeRef:D}=function(e){let{data:n,disabled:r=!1,id:i,resizeObserverConfig:s}=e,o=ic("Droppable"),{active:a,dispatch:l,over:h,measureDroppableContainers:c}=(0,z.useContext)(sk),u=(0,z.useRef)({disabled:r}),d=(0,z.useRef)(!1),p=(0,z.useRef)(null),f=(0,z.useRef)(null),{disabled:g,updateMeasurementsFor:m,timeout:y}={...sR,...s},O=is(null!=m?m:i),b=su({callback:(0,z.useCallback)(()=>{if(!d.current){d.current=!0;return}null!=f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{c(Array.isArray(O.current)?O.current:[O.current]),f.current=null},y)},[y]),disabled:g||!a}),[x,w]=ia((0,z.useCallback)((e,n)=>{b&&(n&&(b.unobserve(n),d.current=!1),e&&b.observe(e))},[b])),S=is(n);return(0,z.useEffect)(()=>{b&&x.current&&(b.disconnect(),d.current=!1,b.observe(x.current))},[x,b]),(0,z.useEffect)(()=>(l({type:M.RegisterDroppable,element:{id:i,key:o,disabled:r,node:x,rect:p,data:S}}),()=>l({type:M.UnregisterDroppable,key:o,id:i})),[i]),(0,z.useEffect)(()=>{r!==u.current.disabled&&(l({type:M.SetDroppableDisabled,id:i,key:o,disabled:r}),u.current.disabled=r)},[i,o,r,l]),{active:a,rect:p,isOver:(null==h?void 0:h.id)===i,node:x,over:h,setNodeRef:w}}({id:u,data:E,disabled:k.droppable,resizeObserverConfig:{updateMeasurementsFor:T,...p}}),{active:I,activatorEvent:$,activeNodeRect:R,attributes:L,setNodeRef:Q,listeners:j,isDragging:V,over:B,setActivatorNodeRef:F,transform:Z}=function(e){let{id:n,data:r,disabled:i=!1,attributes:s}=e,o=ic("Draggable"),{activators:a,activatorEvent:l,active:h,activeNodeRect:c,ariaDescribedById:u,draggableNodes:d,over:p}=(0,z.useContext)(sk),{role:f=sI,roleDescription:g="draggable",tabIndex:m=0}=null!=s?s:{},y=(null==h?void 0:h.id)===n,O=(0,z.useContext)(y?sM:sD),[b,x]=ia(),[w,S]=ia(),_=(0,z.useMemo)(()=>a.reduce((e,r)=>{let{eventName:i,handler:s}=r;return e[i]=e=>{s(e,n)},e},{}),[a,n]),k=is(r);return ir(()=>(d.set(n,{id:n,key:o,node:b,activatorNode:w,data:k}),()=>{let e=d.get(n);e&&e.key===o&&d.delete(n)}),[d,n]),{active:h,activatorEvent:l,activeNodeRect:c,attributes:(0,z.useMemo)(()=>({role:f,tabIndex:m,"aria-disabled":i,"aria-pressed":!!y&&f===sI||void 0,"aria-roledescription":g,"aria-describedby":u.draggable}),[i,f,m,y,g,u.draggable]),isDragging:y,listeners:i?void 0:_,node:b,over:p,setNodeRef:x,setActivatorNodeRef:S,transform:O}}({id:u,data:E,attributes:{...s5,...a},disabled:k.draggable}),q=function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0,z.useMemo)(()=>e=>{n.forEach(n=>n(e))},n)}(D,Q),W=!!I,X=W&&!b&&sX(y)&&sX(w),U=!S&&V,Y=U&&X?Z:null,G=X?null!=Y?Y:(null!=d?d:_)({rects:x,activeNodeRect:R,activeIndex:y,overIndex:w,index:C}):null,H=sX(y)&&sX(w)?c({id:u,items:g,activeIndex:y,overIndex:w}):C,K=null==I?void 0:I.id,J=(0,z.useRef)({activeId:K,items:g,newIndex:H,containerId:m}),ee=g!==J.current.items,et=o({active:I,containerId:m,isDragging:V,isSorting:W,id:u,index:C,items:g,newIndex:J.current.newIndex,previousItems:J.current.items,previousContainerId:J.current.containerId,transition:f,wasDragging:null!=J.current.activeId}),en=function(e){let{disabled:n,index:r,node:i,rect:s}=e,[o,a]=(0,z.useState)(null),l=(0,z.useRef)(r);return ir(()=>{if(!n&&r!==l.current&&i.current){let e=s.current;if(e){let n=iz(i.current,{ignoreTransform:!0}),r={x:e.left-n.left,y:e.top-n.top,scaleX:e.width/n.width,scaleY:e.height/n.height};(r.x||r.y)&&a(r)}}r!==l.current&&(l.current=r)},[n,r,i,s]),(0,z.useEffect)(()=>{o&&a(null)},[o]),o}({disabled:!et,index:C,node:A,rect:P});return(0,z.useEffect)(()=>{W&&J.current.newIndex!==H&&(J.current.newIndex=H),m!==J.current.containerId&&(J.current.containerId=m),g!==J.current.items&&(J.current.items=g)},[W,H,m,g]),(0,z.useEffect)(()=>{if(K===J.current.activeId)return;if(K&&!J.current.activeId){J.current.activeId=K;return}let e=setTimeout(()=>{J.current.activeId=K},50);return()=>clearTimeout(e)},[K]),{active:I,activeIndex:y,attributes:L,data:E,rect:P,index:C,newIndex:H,items:g,isOver:N,isSorting:W,isDragging:V,listeners:j,node:A,overIndex:w,over:B,setNodeRef:q,setActivatorNodeRef:F,setDroppableNodeRef:D,setDraggableNodeRef:Q,transform:null!=en?en:G,transition:en||ee&&J.current.newIndex===C?s2:(!U||ig($))&&f&&(W||et)?iy.Transition.toString({...f,property:s1}):void 0}}({id:r,animateLayoutChanges:n,transition:o}),f=(0,z.useCallback)(e=>()=>z.createElement("span",Object.assign({},a,{style:{lineHeight:0},onMouseDown:e=>{a.onMouseDown(e),e.preventDefault(),e.stopPropagation()}}),z.createElement(e,null)),[a]),g=F()(`${s}-sortable-item`,{[`${s}-sortable-item-over`]:d,[`${s}-sortable-item-active`]:(null==u?void 0:u.id)===r}),m=(0,z.useMemo)(()=>ti()(o)?void 0:{transform:iy.Transform.toString(Object.assign(Object.assign({},h),{scaleX:1,scaleY:1})),transition:c},[o,h,c]);return z.createElement("div",Object.assign({ref:l,style:m,className:g},p),i({id:r,sortableHandle:f}))}var ot=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};let on=rP.PREFIX;function or(e){return z.createElement("div",Object.assign({className:`${on}-sortable-list`},e))}class oi extends ee.A{constructor(e){super(e),this.handleInputChange=e=>{this.foundation.handleInputChange(e)},this.handleKeyDown=e=>{this.foundation.handleKeyDown(e)},this.handleInputFocus=e=>{this.foundation.handleInputFocus(e)},this.handleInputBlur=e=>{this.foundation.handleInputBlur(e)},this.handleClearBtn=e=>{this.foundation.handleClearBtn(e)},this.handleClearEnterPress=e=>{this.foundation.handleClearEnterPress(e)},this.handleTagClose=e=>{this.foundation.handleTagClose(e)},this.handleInputMouseLeave=e=>{this.foundation.handleInputMouseLeave()},this.handleClick=e=>{this.foundation.handleClick(e)},this.handleInputMouseEnter=e=>{this.foundation.handleInputMouseEnter()},this.handleClickPrefixOrSuffix=e=>{this.foundation.handleClickPrefixOrSuffix(e)},this.handlePreventMouseDown=e=>{this.foundation.handlePreventMouseDown(e)},this.getAllTags=()=>{let{tagsArray:e}=this.state;return e.map((e,n)=>this.renderTag(e,n))},this.renderTag=(e,n,r)=>{let{size:i,disabled:s,renderTagItem:o,showContentTooltip:a,draggable:l}=this.props,{active:h}=this.state,c=h&&l,u=F()(`${on}-wrapper-tag`,{[`${on}-wrapper-tag-size-${i}`]:i,[`${on}-wrapper-tag-icon`]:c}),d=F()(`${on}-wrapper-typo`,{[`${on}-wrapper-typo-disabled`]:s}),p=F()({[`${on}-drag-item`]:c,[`${on}-wrapper-tag-icon`]:c}),f=r&&r(()=>z.createElement(r5.A,{className:`${on}-drag-handler`})),g=c?e:`${n}${e}`,m=()=>{s||this.handleTagClose(n)};return eY()(o)?z.createElement("div",{className:p,key:g},c&&r?z.createElement(f,null):null,o(e,n,m)):z.createElement(rC,{className:u,color:"white",size:"small"===i?"small":"large",type:"light",onClose:m,closable:!s,key:g,visible:!0,"aria-label":`${!s?"Closable ":""}Tag: ${e}`},c&&r?z.createElement(f,null):null,z.createElement(r2,{className:d,ellipsis:{showTooltip:a,rows:1}},e))},this.renderSortTag=e=>{let{id:n,sortableHandle:r}=e,{tagsArray:i}=this.state,s=i.indexOf(n);return this.renderTag(n,s,r)},this.onSortEnd=e=>{this.foundation.handleSortEnd(e)},this.handleInputCompositionStart=e=>{this.foundation.handleInputCompositionStart(e)},this.handleInputCompositionEnd=e=>{this.foundation.handleInputCompositionEnd(e)},this.foundation=new rM(this.adapter),this.state={tagsArray:e.defaultValue||[],inputValue:"",focusing:!1,hovering:!1,active:!1,entering:!1},this.inputRef=z.createRef(),this.tagInputRef=z.createRef(),this.clickOutsideHandler=null}static getDerivedStateFromProps(e,n){let{value:r,inputValue:i}=e,{tagsArray:s}=n;return{tagsArray:rT()(r)?r:"value"in e&&!r?[]:s,inputValue:eg()(i)?i:n.inputValue}}get adapter(){return Object.assign(Object.assign({},super.adapter),{setInputValue:e=>{this.setState({inputValue:e})},setTagsArray:e=>{this.setState({tagsArray:e})},setFocusing:e=>{this.setState({focusing:e})},toggleFocusing:e=>{let{preventScroll:n}=this.props,r=this.inputRef&&this.inputRef.current;e?r&&r.focus({preventScroll:n}):r&&r.blur(),this.setState({focusing:e})},setHovering:e=>{this.setState({hovering:e})},setActive:e=>{this.setState({active:e})},setEntering:e=>{this.setState({entering:e})},getClickOutsideHandler:()=>this.clickOutsideHandler,notifyBlur:e=>{this.props.onBlur(e)},notifyFocus:e=>{this.props.onFocus(e)},notifyInputChange:(e,n)=>{this.props.onInputChange(e,n)},notifyTagChange:e=>{this.props.onChange(e)},notifyTagAdd:e=>{this.props.onAdd(e)},notifyTagRemove:(e,n)=>{this.props.onRemove(e,n)},notifyKeyDown:e=>{this.props.onKeyDown(e)},registerClickOutsideHandler:e=>{let n=n=>{let r=this.tagInputRef&&this.tagInputRef.current,i=n.target,s=n.composedPath&&n.composedPath()||[i];!r||r.contains(i)||s.includes(r)||e(n)};this.clickOutsideHandler=n,document.addEventListener("click",n,!1)},unregisterClickOutsideHandler:()=>{document.removeEventListener("click",this.clickOutsideHandler,!1),this.clickOutsideHandler=null}})}componentDidMount(){let{disabled:e,autoFocus:n,preventScroll:r}=this.props;!e&&n&&(this.inputRef.current.focus({preventScroll:r}),this.foundation.handleClick()),this.foundation.init()}renderClearBtn(){let{hovering:e,tagsArray:n,inputValue:r}=this.state,{showClear:i,disabled:s,clearIcon:o}=this.props,a=F()(`${on}-clearBtn`,{[`${on}-clearBtn-invisible`]:!e||""===r&&0===n.length||s});return i?z.createElement("div",{role:"button",tabIndex:0,"aria-label":"Clear TagInput value",className:a,onClick:e=>this.handleClearBtn(e),onKeyPress:e=>this.handleClearEnterPress(e)},o||z.createElement(t0.A,null)):null}renderPrefix(){let{prefix:e,insetLabel:n,insetLabelId:r}=this.props,i=e||n;if(ti()(i)||e7()(i))return null;let s=F()(`${on}-prefix`,{[`${on}-inset-label`]:n,[`${on}-prefix-text`]:i&&eg()(i),[`${on}-prefix-icon`]:(0,es.uR)(i)});return z.createElement("div",{className:s,onMouseDown:this.handlePreventMouseDown,onClick:this.handleClickPrefixOrSuffix,id:r,"x-semi-prop":"prefix"},i)}renderSuffix(){let{suffix:e}=this.props;if(ti()(e)||e7()(e))return null;let n=F()(`${on}-suffix`,{[`${on}-suffix-text`]:e&&eg()(e),[`${on}-suffix-icon`]:(0,es.uR)(e)});return z.createElement("div",{className:n,onMouseDown:this.handlePreventMouseDown,onClick:this.handleClickPrefixOrSuffix,"x-semi-prop":"suffix"},e)}renderTags(){let{disabled:e,maxTagCount:n,showRestTagsPopover:r,restTagsPopoverProps:i={},draggable:s,expandRestTagsOnClick:o}=this.props,{tagsArray:a,active:l}=this.state,h=F()(`${on}-wrapper-n`,{[`${on}-wrapper-n-disabled`]:e}),c=this.getAllTags(),u=[],d=[...c];(!l||!o)&&n&&n<c.length&&(d=c.slice(0,n),u=c.slice(n));let p=z.createElement("span",{className:h},"+",a.length-n),f=c.map((e,n)=>({item:e,key:a[n]}));return l&&s&&f.length>0?z.createElement(s8,{items:a,onSortEnd:this.onSortEnd,renderItem:this.renderSortTag,container:or,prefix:on,transition:null,dragOverlayCls:`${on}-right-item-drag-item-move`}):z.createElement(z.Fragment,null,d,u.length>0&&(r?z.createElement(nx,Object.assign({content:u,showArrow:!0,trigger:"hover",position:"top",autoAdjustOverflow:!0},i),p):p))}blur(){this.inputRef.current.blur(),this.foundation.clickOutsideCallBack()}focus(){let{preventScroll:e,disabled:n}=this.props;this.inputRef.current.focus({preventScroll:e}),n||this.foundation.handleClick()}render(){let e=this.props,{size:n,style:r,className:i,disabled:s,placeholder:o,validateStatus:a,prefix:l,insetLabel:h,suffix:c}=e,u=ot(e,["size","style","className","disabled","placeholder","validateStatus","prefix","insetLabel","suffix"]),{focusing:d,hovering:p,tagsArray:f,inputValue:g,active:m}=this.state,y=F()(on,i,{[`${on}-focus`]:d||m,[`${on}-disabled`]:s,[`${on}-hover`]:p&&!s,[`${on}-error`]:"error"===a,[`${on}-warning`]:"warning"===a,[`${on}-small`]:"small"===n,[`${on}-large`]:"large"===n,[`${on}-with-prefix`]:!!l||!!h,[`${on}-with-suffix`]:!!c}),O=F()(`${on}-wrapper-input`,`${on}-wrapper-input-${n}`),b=F()(`${on}-wrapper`);return z.createElement("div",Object.assign({ref:this.tagInputRef,style:r,className:y,"aria-disabled":s,"aria-label":this.props["aria-label"],"aria-invalid":"error"===a,onMouseEnter:e=>{this.handleInputMouseEnter(e)},onMouseLeave:e=>{this.handleInputMouseLeave(e)},onClick:e=>{this.handleClick(e)}},this.getDataAttr(u)),this.renderPrefix(),z.createElement("div",{className:b},this.renderTags(),z.createElement(t2.A,{"aria-label":"input value",ref:this.inputRef,className:O,disabled:s,value:g,size:n,placeholder:0===f.length?o:"",onKeyDown:e=>{this.handleKeyDown(e)},onChange:(e,n)=>{this.handleInputChange(n)},onBlur:e=>{this.handleInputBlur(e)},onFocus:e=>{this.handleInputFocus(e)},onCompositionStart:this.handleInputCompositionStart,onCompositionEnd:this.handleInputCompositionEnd})),this.renderClearBtn(),this.renderSuffix())}}oi.propTypes={children:q().node,clearIcon:q().node,style:q().object,className:q().string,disabled:q().bool,allowDuplicates:q().bool,max:q().number,maxTagCount:q().number,maxLength:q().number,showRestTagsPopover:q().bool,restTagsPopoverProps:q().object,showContentTooltip:q().oneOfType([q().shape({type:q().string,opts:q().object}),q().bool]),defaultValue:q().array,value:q().array,inputValue:q().string,placeholder:q().string,separator:q().oneOfType([q().string,q().array]),showClear:q().bool,addOnBlur:q().bool,draggable:q().bool,expandRestTagsOnClick:q().bool,autoFocus:q().bool,renderTagItem:q().func,onBlur:q().func,onFocus:q().func,onChange:q().func,onInputChange:q().func,onExceed:q().func,onInputExceed:q().func,onAdd:q().func,onRemove:q().func,onKeyDown:q().func,size:q().oneOf(["large","default","small"]),validateStatus:q().oneOf(["success","default","error","warning"]),prefix:q().oneOfType([q().string,q().node]),suffix:q().oneOfType([q().string,q().node]),"aria-label":q().string,preventScroll:q().bool},oi.defaultProps={showClear:!1,addOnBlur:!1,allowDuplicates:!0,showRestTagsPopover:!0,autoFocus:!1,draggable:!1,expandRestTagsOnClick:!0,showContentTooltip:!0,separator:",",size:"default",validateStatus:"default",onBlur:ep(),onFocus:ep(),onChange:ep(),onInputChange:ep(),onExceed:ep(),onInputExceed:ep(),onAdd:ep(),onRemove:ep(),onKeyDown:ep()};let os=tD.PREFIX;class oo extends ee.A{constructor(e){super(e),this.search=e=>{this.handleInputChange(e)},this.handleInputChange=e=>{this.foundation.handleInputChange(e)},this.handleTagRemoveInTrigger=e=>{this.foundation.handleTagRemoveInTrigger(e)},this.handleTagClose=(e,n,r)=>{n.preventDefault(),this.foundation.handleTagRemoveByKey(r)},this.renderTagItem=(e,n)=>{let{keyEntities:r,disabledKeys:i}=this.state,{size:s,disabled:o,displayProp:a,displayRender:l,disableStrictly:h}=this.props;if(r[e]){let c=o||r[e].data.disabled||h&&i.has(e),u=F()(`${os}-selection-tag`,{[`${os}-selection-tag-disabled`]:c});return eY()(l)?l(r[e],n):z.createElement(rC,{size:"default"===s?"large":s,key:`tag-${e}-${n}`,color:"white",tagKey:e,className:u,closable:!0,onClose:this.handleTagClose},r[e].data[a])}return null},this.onRemoveInTagInput=e=>{this.foundation.handleTagRemoveByKey(e)},this.handleItemClick=(e,n)=>{this.foundation.handleItemClick(e,n)},this.handleItemHover=(e,n)=>{this.foundation.handleItemHover(e,n)},this.onItemCheckboxClick=e=>{this.foundation.onItemCheckboxClick(e)},this.handleListScroll=(e,n)=>{this.foundation.handleListScroll(e,n)},this.renderContent=()=>{let{inputValue:e,isSearching:n,activeKeys:r,selectedKeys:i,checkedKeys:s,halfCheckedKeys:o,loadedKeys:a,loadingKeys:l}=this.state,{filterTreeNode:h,dropdownClassName:c,dropdownStyle:u,loadData:d,emptyContent:p,separator:f,topSlot:g,bottomSlot:m,showNext:y,multiple:O,filterRender:b,virtualizeInSearch:x,expandIcon:w}=this.props,S=F()(c,`${os}-popover`),_=this.foundation.getRenderData(),k=_&&_.length?u:Object.assign(Object.assign({},u),{minWidth:this.state.emptyContentMinWidth});return z.createElement("div",{className:S,role:"listbox",style:k,onKeyDown:this.foundation.handleKeyDown},g,z.createElement(rg,{activeKeys:r,selectedKeys:i,separator:f,loadedKeys:a,loadingKeys:l,onItemClick:this.handleItemClick,onItemHover:this.handleItemHover,showNext:y,onItemCheckboxClick:this.onItemCheckboxClick,onListScroll:this.handleListScroll,searchable:!!h&&n,keyword:e,emptyContent:p,loadData:d,data:_,multiple:O,checkedKeys:s,halfCheckedKeys:o,filterRender:b,virtualize:x,expandIcon:w}),m)},this.renderPlusN=e=>{let{disabled:n,showRestTagsPopover:r,restTagsPopoverProps:i}=this.props,s=F()(`${os}-selection-n`,{[`${os}-selection-n-disabled`]:n}),o=z.createElement("span",{className:s},"+",e.length);return r?z.createElement(nx,Object.assign({content:e,showArrow:!0,trigger:"hover",position:"top",autoAdjustOverflow:!0},i),o):o},this.renderMultipleTags=()=>{let{autoMergeValue:e,maxTagCount:n,checkRelation:r}=this.props,{checkedKeys:i,resolvedCheckedKeys:s}=this.state,o=this.mergeType===tL||r===tV?i:s,a=[],l=[];return[...o].forEach((e,r)=>{let i=!ey()(n)||n>=r+1,s=this.renderTagItem(e,r);i?a.push(s):l.push(s)}),z.createElement(z.Fragment,null,a,!eH()(l)&&this.renderPlusN(l))},this.renderDisplayText=()=>{let{displayProp:e,separator:n,displayRender:r}=this.props,{selectedKeys:i}=this.state,s="";if(i.size){let o=this.foundation.getItemPropPath([...i][0],e);s=r&&"function"==typeof r?r(o):o.map((e,r)=>z.createElement(z.Fragment,{key:`${e}-${r}`},r<o.length-1?z.createElement(z.Fragment,null,e,n):e))}return s},this.renderSelectContent=()=>{let{placeholder:e,filterTreeNode:n,multiple:r,searchPosition:i}=this.props,{checkedKeys:s}=this.state;if(!(n&&i===tQ))if(r)return 0===s.size?z.createElement("span",{className:`${os}-selection-placeholder`},e):this.renderMultipleTags();else{let n=this.renderDisplayText(),r=F()({[`${os}-selection-placeholder`]:!n});return z.createElement("span",{className:r},n||e)}return r?this.renderTagInput():this.renderInput()},this.renderSuffix=()=>{let{suffix:e}=this.props,n=F()({[`${os}-suffix`]:!0,[`${os}-suffix-text`]:e&&eg()(e),[`${os}-suffix-icon`]:(0,es.uR)(e)});return z.createElement("div",{className:n,"x-semi-prop":"suffix"},e)},this.renderPrefix=()=>{let{prefix:e,insetLabel:n,insetLabelId:r}=this.props,i=e||n,s=F()({[`${os}-prefix`]:!0,[`${os}-inset-label`]:n,[`${os}-prefix-text`]:i&&eg()(i),[`${os}-prefix-icon`]:(0,es.uR)(i)});return z.createElement("div",{className:s,id:r,"x-semi-prop":"prefix,insetLabel"},i)},this.renderCustomTrigger=()=>{var e;let n,{disabled:r,triggerRender:i,multiple:s}=this.props,{selectedKeys:o,inputValue:a,inputPlaceHolder:l,resolvedCheckedKeys:h,checkedKeys:c,keyEntities:u}=this.state;return s?this.mergeType===tL?(n=new Set,c.forEach(e=>{var r;n.add(null==(r=u[e])?void 0:r.pos)})):(n=new Set,h.forEach(e=>{var r;n.add(null==(r=u[e])?void 0:r.pos)})):n=null==(e=u[[...o][0]])?void 0:e.pos,z.createElement(ry,{value:n,inputValue:a,onChange:this.handleInputChange,onClear:this.handleClear,placeholder:l,disabled:r,triggerRender:i,componentName:"Cascader",componentProps:Object.assign({},this.props),onSearch:this.handleInputChange,onRemove:this.handleTagRemoveInTrigger})},this.handleMouseOver=()=>{this.foundation.toggleHoverState(!0)},this.handleMouseLeave=()=>{this.foundation.toggleHoverState(!1)},this.handleClear=e=>{e&&e.stopPropagation(),this.foundation.handleClear()},this.handleClearEnterPress=e=>{e&&e.stopPropagation(),this.foundation.handleClearEnterPress(e)},this.showClearBtn=()=>{let{showClear:e,disabled:n,multiple:r}=this.props,{selectedKeys:i,isOpen:s,isHovering:o,checkedKeys:a,inputValue:l}=this.state,h=i.size,c=r&&a.size;return e&&(l||h||c)&&!n&&(s||o)},this.renderClearBtn=()=>{let e=F()(`${os}-clearbtn`),{clearIcon:n}=this.props;return this.showClearBtn()?z.createElement("div",{className:e,onClick:this.handleClear,onKeyPress:this.handleClearEnterPress,role:"button",tabIndex:0},n||z.createElement(t0.A,null)):null},this.renderArrow=()=>{let{arrowIcon:e}=this.props;return this.showClearBtn()?null:e?z.createElement("div",{className:F()(`${os}-arrow`),"x-semi-prop":"arrowIcon"},e):null},this.renderSelection=()=>{let{disabled:e,multiple:n,filterTreeNode:r,style:i,size:s,className:o,validateStatus:a,prefix:l,suffix:h,insetLabel:c,triggerRender:u,showClear:d,id:p,borderless:f}=this.props,{isOpen:g,isFocus:m,isInput:y,checkedKeys:O}=this.state,b="function"==typeof u,x=b?F()(o):F()(os,o,{[`${os}-borderless`]:f,[`${os}-focus`]:m||g&&!y,[`${os}-disabled`]:e,[`${os}-single`]:!0,[`${os}-filterable`]:!!r,[`${os}-error`]:"error"===a,[`${os}-warning`]:"warning"===a,[`${os}-small`]:"small"===s,[`${os}-large`]:"large"===s,[`${os}-with-prefix`]:l||c,[`${os}-with-suffix`]:h}),w=F()(`${os}-selection`,{[`${os}-selection-multiple`]:n&&!eH()(O)}),S=b?this.renderCustomTrigger():[z.createElement(z.Fragment,{key:"prefix"},l||c?this.renderPrefix():null),z.createElement(z.Fragment,{key:"selection"},z.createElement("div",{className:w},this.renderSelectContent())),z.createElement(z.Fragment,{key:"suffix"},h?this.renderSuffix():null),z.createElement(z.Fragment,{key:"clearbtn"},this.renderClearBtn()),z.createElement(z.Fragment,{key:"arrow"},this.renderArrow())];return z.createElement("div",Object.assign({className:x,style:i,ref:this.triggerRef,onClick:e=>this.foundation.handleClick(e),onKeyPress:e=>this.foundation.handleSelectionEnterPress(e),"aria-invalid":this.props["aria-invalid"],"aria-errormessage":this.props["aria-errormessage"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-describedby":this.props["aria-describedby"],"aria-required":this.props["aria-required"],id:p,onKeyDown:this.foundation.handleKeyDown},d?{onMouseEnter:()=>this.handleMouseOver(),onMouseLeave:()=>this.handleMouseLeave()}:{},{role:"combobox",tabIndex:0},this.getDataAttr(this.props)),S)},this.state={emptyContentMinWidth:null,disabledKeys:new Set,isOpen:e.defaultOpen,rePosKey:0,keyEntities:{},selectedKeys:new Set([]),activeKeys:new Set([]),filteredKeys:new Set([]),inputValue:"",isSearching:!1,inputPlaceHolder:e.searchPlaceholder||e.placeholder,prevProps:{},isHovering:!1,checkedKeys:new Set([]),halfCheckedKeys:new Set([]),resolvedCheckedKeys:new Set([]),loadedKeys:new Set,loadingKeys:new Set,loading:!1,showInput:!1},this.options={},this.isEmpty=!1,this.mergeType=tZ(e.autoMergeValue,e.leafOnly),this.inputRef=z.createRef(),this.triggerRef=z.createRef(),this.optionsRef=z.createRef(),this.clickOutsideHandler=null,this.foundation=new tX(this.adapter),this.loadingKeysRef=z.createRef(),this.loadedKeysRef=z.createRef()}get adapter(){var e=this;return Object.assign(Object.assign(Object.assign(Object.assign({},super.adapter),{updateInputValue:e=>{this.setState({inputValue:e})},updateInputPlaceHolder:e=>{this.setState({inputPlaceHolder:e})},focusInput:()=>{let{preventScroll:e}=this.props;this.inputRef&&this.inputRef.current&&this.inputRef.current.focus({preventScroll:e})},blurInput:()=>{this.inputRef&&this.inputRef.current&&this.inputRef.current.blur()}}),{registerClickOutsideHandler:e=>{let n=n=>{let r=this.optionsRef&&this.optionsRef.current,i=this.triggerRef&&this.triggerRef.current,s=e2.findDOMNode(r),o=n.target,a=n.composedPath&&n.composedPath()||[o];!s||s.contains(o)&&s.contains(o.parentNode)||!i||i.contains(o)||a.includes(i)||a.includes(s)||e(n)};this.clickOutsideHandler=n,document.addEventListener("mousedown",n,!1)},unregisterClickOutsideHandler:()=>{document.removeEventListener("mousedown",this.clickOutsideHandler,!1)},rePositionDropdown:()=>{let{rePosKey:e}=this.state;e+=1,this.setState({rePosKey:e})}}),{setEmptyContentMinWidth:e=>{this.setState({emptyContentMinWidth:e})},getTriggerWidth:()=>{let e=this.triggerRef.current;return e&&e.getBoundingClientRect().width},updateStates:e=>{this.setState(Object.assign({},e))},openMenu:()=>{this.setState({isOpen:!0})},closeMenu:e=>{this.setState({isOpen:!1},()=>{e&&e()})},updateSelection:e=>this.setState({selectedKeys:e}),notifyChange:e=>{this.props.onChange&&this.props.onChange(e)},notifySelect:e=>{this.props.onSelect&&this.props.onSelect(e)},notifyOnSearch:e=>{this.props.onSearch&&this.props.onSearch(e)},notifyFocus:function(){e.props.onFocus&&e.props.onFocus(...arguments)},notifyBlur:function(){e.props.onBlur&&e.props.onBlur(...arguments)},notifyDropdownVisibleChange:e=>{this.props.onDropdownVisibleChange(e)},toggleHovering:e=>{this.setState({isHovering:e})},notifyLoadData:(e,n)=>{let{loadData:r}=this.props;r&&new Promise(i=>{r(e).then(()=>{setTimeout(()=>{n(),this.setState({loading:!1}),i()})})})},notifyOnLoad:(e,n)=>{let{onLoad:r}=this.props;r&&r(e,n)},notifyListScroll:(e,n)=>{let{panelIndex:r,activeNode:i}=n;this.props.onListScroll(e,{panelIndex:r,activeNode:i})},notifyOnExceed:e=>this.props.onExceed(e),notifyClear:()=>this.props.onClear(),toggleInputShow:(e,n)=>{this.setState({showInput:e},()=>{n()})},updateFocusState:e=>{this.setState({isFocus:e})},updateLoadingKeyRefValue:e=>{this.loadingKeysRef.current=e},getLoadingKeyRefValue:()=>this.loadingKeysRef.current,updateLoadedKeyRefValue:e=>{this.loadedKeysRef.current=e},getLoadedKeyRefValue:()=>this.loadedKeysRef.current})}static getDerivedStateFromProps(e,n){let{multiple:r,value:i,defaultValue:s,onChangeWithObject:o,leafOnly:a,autoMergeValue:l,checkRelation:h,searchPlaceholder:c,placeholder:u}=e,{prevProps:d}=n,p=n.keyEntities||{},f={},g=c||u;g!==n.inputPlaceHolder&&(f.inputPlaceHolder=g);let m=n=>{let r=eH()(d)&&n in e,i=d&&!eJ()(d[n],e[n]);return r||i},y=(e,n)=>{let r=[];Array.isArray(e)?r=Array.isArray(e[0])?e:[e]:void 0!==e&&(r=[[e]]);let i=[];return r.forEach(e=>{let n=o&&eX()(e[0])?e.map(e=>null==e?void 0:e.value):e;n.length>0&&i.push(n)}),i.reduce((e,r)=>{let i=tB(r);return n[i]&&e.push(i),e},[])};if(r){let r=m("treeData")||(()=>{let n=!d&&"treeData"in e,r=d&&d.treeData!==e.treeData;return n||r})(),o=m("value")||eH()(d)&&s;if(r||o){r&&(f.treeData=e.treeData,f.keyEntities=p=tF(e.treeData));let c=n.checkedKeys;if(o?c=y(m("value")?i:s,p):r&&"value"in e&&(c=y(i,p)),e1()(c)&&(c=[...c]),h===tj){let n=tO(c,p),r=new Set(n.checkedKeys),i=new Set(n.halfCheckedKeys);e.disableStrictly&&(f.disabledKeys=tM(p));let s=tZ(l,a)===tR;f.checkedKeys=r,f.halfCheckedKeys=i,f.resolvedCheckedKeys=new Set(tS(r,p,s))}else f.checkedKeys=new Set(c);f.prevProps=e}}return f}componentDidMount(){this.foundation.init()}componentWillUnmount(){this.foundation.destroy()}componentDidUpdate(e){if(this.props.multiple)return;let n=!1;eJ()(e.treeData,this.props.treeData)||(n=!0,this.foundation.collectOptions()),e.value===this.props.value||n||this.foundation.handleValueChange(this.props.value)}renderTagInput(){let{size:e,disabled:n,placeholder:r,maxTagCount:i,showRestTagsPopover:s,restTagsPopoverProps:o,checkRelation:a}=this.props,{inputValue:l,checkedKeys:h,keyEntities:c,resolvedCheckedKeys:u,inputPlaceHolder:d}=this.state,p=F()(`${os}-tagInput-wrapper`),f=this.mergeType===tL||a===tV?h:u;return z.createElement(oi,{className:p,ref:this.inputRef,disabled:n,size:e,value:[...f],showRestTagsPopover:s,restTagsPopoverProps:o,maxTagCount:i,renderTagItem:this.renderTagItem,inputValue:l,onInputChange:this.handleInputChange,onRemove:this.onRemoveInTagInput,placeholder:d,expandRestTagsOnClick:!1})}renderInput(){let{size:e,disabled:n}=this.props,r=F()(`${os}-input`),{inputValue:i,inputPlaceHolder:s,showInput:o}=this.state,a={disabled:n,value:i,className:r,onChange:this.handleInputChange},l=F()({[`${os}-search-wrapper`]:!0,[`${os}-search-wrapper-${e}`]:"default"!==e}),h=this.renderDisplayText(),c=F()({[`${os}-selection-placeholder`]:!h,[`${os}-selection-text-hide`]:o&&i,[`${os}-selection-text-inactive`]:o&&!i});return z.createElement("div",{className:l},z.createElement("span",{className:c},h||s),o&&z.createElement(t2.A,Object.assign({ref:this.inputRef,size:e},a)))}close(){this.foundation.close()}open(){this.foundation.open()}focus(){this.foundation.focus()}blur(){this.foundation.blur()}render(){let{zIndex:e,getPopupContainer:n,autoAdjustOverflow:r,stopPropagation:i,mouseLeaveDelay:s,mouseEnterDelay:o,position:a,motion:l,dropdownMargin:h}=this.props,{isOpen:c,rePosKey:u}=this.state,{direction:d}=this.context,p=this.renderContent(),f=this.renderSelection();return z.createElement(nx,{getPopupContainer:n,zIndex:e,motion:l,margin:h,ref:this.optionsRef,content:p,visible:c,trigger:"custom",rePosKey:u,position:null!=a?a:"rtl"===d?"bottomRight":"bottomLeft",autoAdjustOverflow:r,stopPropagation:i,mouseLeaveDelay:s,mouseEnterDelay:o,afterClose:()=>this.foundation.updateSearching(!1)},f)}}oo.__SemiComponentName__="Cascader",oo.contextType=eO,oo.propTypes={"aria-labelledby":q().string,"aria-invalid":q().bool,"aria-errormessage":q().string,"aria-describedby":q().string,"aria-required":q().bool,"aria-label":q().string,arrowIcon:q().node,borderless:q().bool,clearIcon:q().node,changeOnSelect:q().bool,defaultValue:q().oneOfType([q().string,q().array]),disabled:q().bool,dropdownClassName:q().string,dropdownStyle:q().object,dropdownMargin:q().oneOfType([q().number,q().object]),emptyContent:q().node,motion:q().bool,filterTreeNode:q().oneOfType([q().func,q().bool]),filterLeafOnly:q().bool,placeholder:q().string,searchPlaceholder:q().string,size:q().oneOf(["small","large","default"]),style:q().object,className:q().string,treeData:q().arrayOf(q().shape({value:q().oneOfType([q().string,q().number]),label:q().any})),treeNodeFilterProp:q().string,suffix:q().node,prefix:q().node,insetLabel:q().node,insetLabelId:q().string,id:q().string,displayProp:q().string,displayRender:q().func,onChange:q().func,onSearch:q().func,onSelect:q().func,onBlur:q().func,onFocus:q().func,children:q().node,getPopupContainer:q().func,zIndex:q().number,value:q().oneOfType([q().string,q().number,q().array]),validateStatus:q().oneOf(["success","default","error","warning"]),showNext:q().oneOf([tI,t$]),stopPropagation:q().oneOfType([q().bool,q().string]),showClear:q().bool,defaultOpen:q().bool,autoAdjustOverflow:q().bool,onDropdownVisibleChange:q().func,triggerRender:q().func,onListScroll:q().func,onChangeWithObject:q().bool,bottomSlot:q().node,topSlot:q().node,multiple:q().bool,autoMergeValue:q().bool,maxTagCount:q().number,showRestTagsPopover:q().bool,restTagsPopoverProps:q().object,max:q().number,separator:q().string,onExceed:q().func,onClear:q().func,loadData:q().func,onLoad:q().func,loadedKeys:q().array,disableStrictly:q().bool,leafOnly:q().bool,enableLeafClick:q().bool,preventScroll:q().bool,position:q().string,searchPosition:q().string},oo.defaultProps=(0,es.bQ)(oo.__SemiComponentName__,{borderless:!1,leafOnly:!1,arrowIcon:z.createElement(t1.A,null),stopPropagation:!0,motion:!0,defaultOpen:!1,zIndex:tJ.DEFAULT_Z_INDEX,showClear:!1,autoClearSearchValue:!0,changeOnSelect:!1,disableStrictly:!1,autoMergeValue:!0,multiple:!1,filterTreeNode:!1,filterLeafOnly:!0,showRestTagsPopover:!1,restTagsPopoverProps:{},separator:" / ",size:"default",treeNodeFilterProp:"label",displayProp:"label",treeData:[],showNext:tI,onExceed:ep(),onClear:ep(),onDropdownVisibleChange:ep(),onListScroll:ep(),enableLeafClick:!1,"aria-label":"Cascader",searchPosition:tQ,checkRelation:tj});let oa=oo;class ol extends G.A{constructor(e){super(Object.assign({},e)),this.updateDOMInRenderTree=e=>{this._adapter.setDOMInRenderTree(e)},this.updateDOMHeight=e=>{this._adapter.setDOMHeight(e)},this.updateVisible=e=>{this._adapter.setVisible(e)},this.updateIsTransitioning=e=>{this._adapter.setIsTransitioning(e)}}}let oh={PREFIX:`${W._}-collapsible`};class oc extends ee.A{constructor(e){super(e),this.domRef=z.createRef(),this.hasBeenRendered=!1,this.handleResize=e=>{let n=e[0];if(n){let e=oc.getEntryInfo(n);this.foundation.updateDOMHeight(e.height),this.foundation.updateDOMInRenderTree(e.isShown)}},this.isChildrenInRenderTree=()=>!!this.domRef.current&&this.domRef.current.offsetHeight>0,this.state={domInRenderTree:!1,domHeight:0,visible:this.props.isOpen,isTransitioning:!1},this.foundation=new ol(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{setDOMInRenderTree:e=>{this.state.domInRenderTree!==e&&this.setState({domInRenderTree:e})},setDOMHeight:e=>{this.state.domHeight!==e&&this.setState({domHeight:e})},setVisible:e=>{this.state.visible!==e&&this.setState({visible:e})},setIsTransitioning:e=>{this.state.isTransitioning!==e&&this.setState({isTransitioning:e})}})}componentDidMount(){super.componentDidMount(),this.resizeObserver=new ResizeObserver(this.handleResize),this.resizeObserver.observe(this.domRef.current);let e=this.isChildrenInRenderTree();this.foundation.updateDOMInRenderTree(e),e&&this.foundation.updateDOMHeight(this.domRef.current.scrollHeight)}componentDidUpdate(e,n,r){let i=Object.keys(tn()(this.props,["reCalcKey","isOpen"])).filter(n=>!eJ()(this.props[n],e[n])),s=Object.keys(tn()(this.state,["domInRenderTree"])).filter(e=>!eJ()(this.state[e],n[e]));i.includes("reCalcKey")&&this.foundation.updateDOMHeight(this.domRef.current.scrollHeight),s.includes("domInRenderTree")&&this.state.domInRenderTree&&this.foundation.updateDOMHeight(this.domRef.current.scrollHeight),i.includes("isOpen")&&(this.props.isOpen||!this.props.motion)&&this.foundation.updateVisible(this.props.isOpen),this.props.motion&&e.isOpen!==this.props.isOpen&&this.foundation.updateIsTransitioning(!0)}componentWillUnmount(){super.componentWillUnmount(),this.resizeObserver.disconnect()}render(){let e=Object.assign({overflow:"hidden",height:this.props.isOpen?this.state.domHeight:this.props.collapseHeight,opacity:this.props.isOpen||!this.props.fade||0!==this.props.collapseHeight?1:0,transitionDuration:`${this.props.motion&&this.state.isTransitioning?this.props.duration:0}ms`},this.props.style),n=F()(`${oh.PREFIX}-wrapper`,{[`${oh.PREFIX}-transition`]:this.props.motion&&this.state.isTransitioning},this.props.className),r=this.props.keepDOM&&(!this.props.lazyRender||this.hasBeenRendered)||0!==this.props.collapseHeight||this.state.visible||this.props.isOpen;return r&&!this.hasBeenRendered&&(this.hasBeenRendered=!0),z.createElement("div",Object.assign({className:n,style:e,onTransitionEnd:()=>{var e,n;this.props.isOpen||this.foundation.updateVisible(!1),this.foundation.updateIsTransitioning(!1),null==(n=(e=this.props).onMotionEnd)||n.call(e)}},this.getDataAttr(this.props)),z.createElement("div",{"x-semi-prop":"children",ref:this.domRef,style:{overflow:"hidden"},id:this.props.id},r&&this.props.children))}}oc.__SemiComponentName__="Collapsible",oc.defaultProps=(0,es.bQ)(oc.__SemiComponentName__,{isOpen:!1,duration:250,motion:!0,keepDOM:!1,lazyRender:!1,collapseHeight:0,fade:!1}),oc.getEntryInfo=e=>{let n;n=e.borderBoxSize?0!==e.borderBoxSize[0].blockSize||0!==e.borderBoxSize[0].inlineSize:0!==e.contentRect.height||0!==e.contentRect.width;return{isShown:n,height:e.borderBoxSize?Math.ceil(e.borderBoxSize[0].blockSize):e.target.clientHeight}},oc.propTypes={motion:q().bool,children:q().node,isOpen:q().bool,duration:q().number,keepDOM:q().bool,collapseHeight:q().number,style:q().object,className:q().string,reCalcKey:q().oneOfType([q().string,q().number])};let ou=oc;var od=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};eO.Consumer;class op extends z.Component{constructor(e){super(e)}renderChildren(){let{direction:e,children:n}=this.props;return"rtl"===e?z.createElement("div",{className:`${W._}-rtl`},n):n}render(){let e=this.props,{children:n,direction:r}=e,i=od(e,["children","direction"]);return z.createElement(eO.Provider,{value:Object.assign({direction:r},i)},this.renderChildren())}}op.propTypes={locale:q().object,timeZone:q().oneOfType([q().string,q().number]),getPopupContainer:q().func,direction:q().oneOf(["ltr","rtl"])},op.defaultProps={locale:nI,direction:"ltr"};let of={PREFIX:`${W._}`};var og=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};let om=of.PREFIX,oy=e=>{let{layout:n="horizontal",dashed:r,align:i="center",className:s,margin:o,style:a,children:l}=e,h=og(e,["layout","dashed","align","className","margin","style","children"]),c=F()(`${om}-divider`,s,{[`${om}-divider-horizontal`]:"horizontal"===n,[`${om}-divider-vertical`]:"vertical"===n,[`${om}-divider-dashed`]:!!r,[`${om}-divider-with-text`]:l&&"horizontal"===n,[`${om}-divider-with-text-${i}`]:l&&"horizontal"===n}),u={};return void 0!==o&&("vertical"===n?u={marginLeft:o,marginRight:o}:"horizontal"===n&&(u={marginTop:o,marginBottom:o})),z.createElement("div",Object.assign({},h,{className:c,style:Object.assign(Object.assign({},u),a)}),l&&"horizontal"===n?"string"==typeof l?z.createElement("span",{className:`${om}-divider_inner-text`,"x-semi-prop":"children"},l):l:null)},oO={PREFIX:`${W._}-dropdown`,SELECTED:`${W._}-dropdown-item-selected`,DISABLED:`${W._}-dropdown-item-disabled`};class ov extends G.A{handleVisibleChange(e){this._adapter.setPopVisible(e),this._adapter.notifyVisibleChange(e);let{trigger:n}=this.getProps();if(e&&"click"===n){let e=this._adapter.getPopupId();this.setFocusToFirstMenuItem(e)}}getMenuItemNodes(e){let n=document.getElementById(e);return n?Array.from(n.getElementsByTagName("li")).filter(e=>"false"===e.ariaDisabled):null}setFocusToFirstMenuItem(e){let n=this.getMenuItemNodes(e);n&&n.length>0&&ei(n,n[0])}setFocusToLastMenuItem(e){let n=this.getMenuItemNodes(e);n&&n.length>0&&ei(n,n[n.length-1])}handleKeyDown(e){var n,r;let i=null==(r=null==(n=e.target)?void 0:n.attributes["data-popupid"])?void 0:r.value,{visible:s}=this._adapter.getStates();switch(e.key){case" ":case"Enter":e.target.click();break;case"ArrowDown":this.setFocusToFirstMenuItem(i),s&&er(e);break;case"ArrowUp":this.setFocusToLastMenuItem(i),s&&er(e)}}}class ob extends G.A{constructor(){super(...arguments),this.menuItemNodes=null,this.firstChars=[]}handleEscape(e){"custom"===this._adapter.getContext("trigger")&&(e&&function(e,n){for(let r=0;r<e.length;r++){let i=e[r].attributes["data-popupid"];if(i&&i.value===n)return e[r]}return null}(document.querySelectorAll("[data-popupid]"),e.id)).focus()}setFocusByFirstCharacter(e,n){var r,i,s;let o,a,l=(r=this.menuItemNodes,i=this.firstChars,s=n,r&&i&&s&&!(s.length>1)?(s=s.toLowerCase(),(o=r.indexOf(e)+1)>=r.length&&(o=0),-1===(a=i.indexOf(s,o))&&(a=i.indexOf(s,0)),a>=0?a:-1):-1);l>=0&&ei(this.menuItemNodes,this.menuItemNodes[l])}onMenuKeydown(e){var n,r,i;let s=function(e,n){if(!e)return null;for(;e.parentElement&&en()(e.parentElement,"attributes.role.value","")!==n;)e=e.parentElement;return e.parentElement}(e.target,"tooltip");this.menuItemNodes||(this.menuItemNodes=[...e.target.parentNode.getElementsByTagName("li")].filter(e=>"true"!==e.ariaDisabled)),0===this.firstChars.length&&this.menuItemNodes.forEach(e=>{var n;this.firstChars.push(null==(n=e.textContent.trim()[0])?void 0:n.toLowerCase())});let o=this.menuItemNodes.find(e=>0===e.tabIndex);switch(e.key){case" ":case"Enter":e.target.click();break;case"Escape":this.handleEscape(s);break;case"ArrowUp":let a,l;n=this.menuItemNodes,n.length>0&&(o===n[0]?a=n[n.length-1]:(l=n.indexOf(o),a=n[l-1]),ei(n,a)),er(e);break;case"ArrowDown":let h,c;r=this.menuItemNodes,r.length>0&&(o===r[r.length-1]?h=r[0]:(c=r.indexOf(o),h=r[c+1]),ei(r,h)),er(e);break;default:1===(i=e.key).length&&i.match(/\S/)&&this.setFocusByFirstCharacter(o,e.key)}}}let ox=z.createContext({level:0});var ow=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};let oS=oO.PREFIX;class o_ extends ee.A{constructor(e){super(e),this.foundation=new ob(this.adapter)}get adapter(){return Object.assign({},super.adapter)}render(){let e=this.props,{children:n,className:r,style:i}=e,s=ow(e,["children","className","style"]);return z.createElement("ul",Object.assign({role:"menu","aria-orientation":"vertical"},s,{className:F()(`${oS}-menu`,r),style:i,onKeyDown:e=>this.foundation.onMenuKeydown(e)}),n)}}o_.propTypes={children:q().node,className:q().string,style:q().object},o_.contextType=ox;let ok=oO.PREFIX;class oC extends ee.A{render(){let{children:e,disabled:n,className:r,forwardRef:i,style:s,type:o,active:a,icon:l,onKeyDown:h,showTick:c,hover:u}=this.props,{showTick:d}=this.context,p=null!=d?d:c,f=F()(r,{[`${ok}-item`]:!0,[`${ok}-item-disabled`]:n,[`${ok}-item-hover`]:u,[`${ok}-item-withTick`]:p,[`${ok}-item-${o}`]:o,[`${ok}-item-active`]:a}),g={};n||["onClick","onMouseEnter","onMouseLeave","onContextMenu"].forEach(e=>{1!==this.context.level&&"onClick"===e?g.onMouseDown=n=>{var r,i;0===n.button&&(null==(i=(r=this.props)[e])||i.call(r,n))}:g[e]=this.props[e]});let m=null;switch(!0){case p&&a:m=z.createElement(nQ,null);break;case p&&!a:m=z.createElement(nQ,{style:{color:"transparent"}});break;default:m=null}let y=null;return l&&(y=z.createElement("div",{className:`${ok}-item-icon`},l)),z.createElement("li",Object.assign({role:"menuitem",tabIndex:-1,"aria-disabled":n},g,{onKeyDown:h,ref:e=>i(e),className:f,style:s},this.getDataAttr(this.props)),m,y,e)}}oC.propTypes={children:q().oneOfType([q().string,q().node]),name:q().string,disabled:q().bool,selected:q().bool,onClick:q().func,onMouseEnter:q().func,onMouseLeave:q().func,onContextMenu:q().func,className:q().string,style:q().object,forwardRef:q().func,type:q().oneOf(["primary","secondary","tertiary","warning","danger"]),active:q().bool,icon:q().node},oC.contextType=ox,oC.defaultProps={disabled:!1,divided:!1,selected:!1,onMouseEnter:ep(),onMouseLeave:ep(),forwardRef:ep()},oC.elementType="Dropdown.Item";let oE=oO.PREFIX,oT=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{style:n,className:r}=e;return z.createElement("div",{className:F()(`${oE}-divider`,r),style:n})};oT.propTypes={style:q().object,className:q().string};let oP=oO.PREFIX;class oA extends z.PureComponent{render(){let{className:e,style:n,children:r}=this.props,{showTick:i}=this.context,s=F()({[`${oP}-title`]:!0,[`${oP}-title-withTick`]:i},e);return z.createElement("div",{className:s,style:n},r)}}oA.propTypes={children:q().node,className:q().string,style:q().object},oA.contextType=ox;var oM=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};class oN extends ee.A{constructor(e){super(e),this.handleVisibleChange=e=>this.foundation.handleVisibleChange(e),this.state={popVisible:e.visible},this.foundation=new ov(this.adapter),this.tooltipRef=z.createRef()}get adapter(){return Object.assign(Object.assign({},super.adapter),{setPopVisible:e=>this.setState({popVisible:e}),notifyVisibleChange:e=>{var n,r;return null==(r=(n=this.props).onVisibleChange)?void 0:r.call(n,e)},getPopupId:()=>this.tooltipRef.current.getPopupId()})}renderContent(){let{render:e,menu:n,contentClassName:r,style:i,showTick:s,prefixCls:o,trigger:a}=this.props,l=F()(o,r),{level:h=0}=this.context,c=null;return z.isValidElement(e)?c=e:Array.isArray(n)&&(c=this.renderMenu()),z.createElement(ox.Provider,{value:{showTick:s,level:h+1,trigger:a}},z.createElement("div",{className:l,style:i},z.createElement("div",{className:`${o}-content`,"x-semi-prop":"render"},c)))}renderMenu(){let{menu:e}=this.props,n=e.map((e,n)=>{switch(e.node){case"title":{let{name:r,node:i}=e,s=oM(e,["name","node"]);return z.createElement(oN.Title,Object.assign({},s,{key:i+r+n}),r)}case"item":{let{node:r,name:i}=e,s=oM(e,["node","name"]);return z.createElement(oN.Item,Object.assign({},s,{key:r+i+n}),i)}case"divider":return z.createElement(oN.Divider,{key:e.node+n});default:return null}});return z.createElement(oN.Menu,null,n)}renderPopCard(){let{render:e,contentClassName:n,style:r,showTick:i,prefixCls:s}=this.props,o=F()(s,n),{level:a=0}=this.context;return z.createElement(ox.Provider,{value:{showTick:i,level:a+1}},z.createElement("div",{className:o,style:r},z.createElement("div",{className:`${s}-content`},e)))}render(){let e=this.props,{children:n,position:r,trigger:i,onVisibleChange:s,zIndex:o,className:a,motion:l,margin:h,style:c,prefixCls:u}=e,d=oM(e,["children","position","trigger","onVisibleChange","zIndex","className","motion","margin","style","prefixCls"]),{spacing:p}=this.props,{level:f}=this.context,{popVisible:g}=this.state,m=this.renderContent();return f>0?p="number"==typeof p?p:2:null==p&&(p=4),z.createElement(nm,Object.assign({zIndex:o,motion:l,margin:h,content:m,className:a,prefixCls:u,spacing:p,position:r,trigger:i,onVisibleChange:this.handleVisibleChange,showArrow:!1,returnFocusOnClose:!0,ref:this.tooltipRef},d),z.isValidElement(n)?z.cloneElement(n,{className:F()(en()(n,"props.className"),{[`${u}-showing`]:g}),"aria-haspopup":!0,"aria-expanded":g,onKeyDown:e=>{this.foundation.handleKeyDown(e);let r=en()(n,"props.onKeyDown");r&&r(e)}}):n)}}oN.Menu=o_,oN.Item=oC,oN.Divider=oT,oN.Title=oA,oN.contextType=ox,oN.propTypes={children:q().node,contentClassName:q().oneOfType([q().string,q().array]),className:q().string,getPopupContainer:q().func,margin:q().oneOfType([q().number,q().object]),mouseEnterDelay:q().number,mouseLeaveDelay:q().number,menu:q().array,motion:q().oneOfType([q().bool,q().func,q().object]),onVisibleChange:q().func,prefixCls:q().string,position:q().oneOf(tY),rePosKey:q().oneOfType([q().string,q().number]),render:q().node,spacing:q().oneOfType([q().number,q().object]),showTick:q().bool,style:q().object,trigger:q().oneOf(["hover","focus","click","custom","contextMenu"]),visible:q().bool,zIndex:q().number},oN.__SemiComponentName__="Dropdown",oN.defaultProps=(0,es.bQ)(oN.__SemiComponentName__,{onVisibleChange:ep(),prefixCls:oO.PREFIX,zIndex:1060,motion:!0,trigger:"hover",position:"bottom",mouseLeaveDelay:100,showTick:!1,closeOnEsc:!0,onEscKeyDown:ep()});let oD=oN,oI=r(7459).Ay$,o$=null,oR={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},oL=e=>{Object.keys(oR).forEach(n=>{e.style.setProperty(n,oR[n],"important")})},oQ=(e,n)=>{let r=e.scrollHeight;return"border-box"===n.sizingStyle.boxSizing?r+n.borderSize:r-n.paddingSize},oj=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width"];var oV=r(45789);class oz extends G.A{static get textAreaDefaultAdapter(){return{notifyChange:ep(),setValue:ep(),toggleFocusing:ep(),toggleHovering:ep(),notifyFocus:ep(),notifyBlur:ep(),notifyKeyDown:ep(),notifyEnterPress:ep()}}constructor(e){super(Object.assign(Object.assign({},oz.textAreaDefaultAdapter),e)),this.compositionEnter=!1,this._changeValue=(e,n)=>{this._isControlledComponent()||this._adapter.setValue(e),this._adapter.notifyChange(e,n)},this.getNextValue=e=>{let{maxLength:n,minLength:r,getValueLength:i}=this._adapter.getProps();return eY()(i)?n?this.handleVisibleMaxLength(e):(r&&this.handleVisibleMinLength(e),e):e},this.handleCompositionStart=e=>{this.compositionEnter=!0,this._adapter.notifyCompositionStart(e)},this.handleCompositionEnd=e=>{this.compositionEnter=!1,this._adapter.notifyCompositionEnd(e);let{getValueLength:n,maxLength:r,minLength:i}=this.getProps();if(!eY()(n))return;let s=e.target.value;if(r){let n=this.handleVisibleMaxLength(s);n!==s&&this._changeValue(n,e)}i&&this.handleVisibleMinLength(s)},this.handleCompositionUpdate=e=>{this._adapter.notifyCompositionUpdate(e)},this.resizeTextarea=()=>{var e;let{height:n}=this.getStates(),{rows:r,autosize:i}=this.getProps(),s=this._adapter.getRef(),o=(e=>{let n=window.getComputedStyle(e);if(null===n)return null;let r=tn()(n,oj),{boxSizing:i}=r;if(""===i)return null;let s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}})(s);if(!o)return;let[a,l]=null!==i&&"object"==typeof i?[null!=(e=null==i?void 0:i.minRows)?e:r,null==i?void 0:i.maxRows]:[r],h=function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;o$||((o$=document.createElement("textarea")).setAttribute("tab-index","-1"),o$.setAttribute("aria-hidden","true"),oL(o$)),null===o$.parentNode&&document.body.appendChild(o$);let{paddingSize:s,borderSize:o,sizingStyle:a}=e,{boxSizing:l}=a;Object.keys(a).forEach(e=>{o$.style[e]=a[e]}),oL(o$),o$.value=n;let h=oQ(o$,e);o$.value="x";let c=oQ(o$,e)-s-o,u=c*r;"border-box"===l&&(u=u+s+o),h=Math.max(u,h);let d=c*i;return"border-box"===l&&(d=d+s+o),h=Math.min(d,h)}(o,s.value||s.placeholder||"x",a,l);if(n!==h){this._adapter.notifyHeightUpdate(h),s.style.height=`${h}px`;return}}}destroy(){}handleValueChange(e){this._adapter.setValue(e)}handleChange(e,n){let{maxLength:r,minLength:i,getValueLength:s}=this._adapter.getProps(),o=e;this.compositionEnter||(o=this.getNextValue(o)),this._changeValue(o,n)}handleVisibleMinLength(e){let{minLength:n,getValueLength:r}=this._adapter.getProps(),{minLength:i}=this._adapter.getStates();if(ey()(n)&&n>=0&&eY()(r)&&eg()(e)){let s=r(e);if(s<n){let r=e.length+(n-s);r!==i&&this._adapter.setMinLength(r)}else i!==n&&this._adapter.setMinLength(n)}}handleVisibleMaxLength(e){let{maxLength:n,getValueLength:r}=this._adapter.getProps();if(ey()(n)&&n>=0&&eg()(e)){if(eY()(r)){if(r(e)>n)return console.warn("[Semi TextArea] The input character is truncated because the input length exceeds the maximum length limit"),this.handleTruncateValue(e,n)}else if(e.length>n)return console.warn("[Semi TextArea] The input character is truncated because the input length exceeds the maximum length limit"),e.slice(0,n);return e}}handleTruncateValue(e,n){let{getValueLength:r}=this._adapter.getProps();return(0,oV.A)({value:e,maxLength:n,getValueLength:r})}handleFocus(e){let{value:n}=this.getStates();this._adapter.toggleFocusing(!0),this._adapter.notifyFocus(n,e)}handleBlur(e){let{value:n}=this.getStates(),{maxLength:r}=this.getProps(),i=n;r&&(i=this.handleVisibleMaxLength(n))!==n&&(this._isControlledComponent()||this._adapter.setValue(i),this._adapter.notifyChange(i,e)),this._adapter.toggleFocusing(!1),this._adapter.notifyBlur(i,e)}handleKeyDown(e){let{disabledEnterStartNewLine:n}=this.getProps();n&&"Enter"===e.key&&!e.shiftKey&&e.preventDefault(),this._adapter.notifyKeyDown(e),13===e.keyCode&&this._adapter.notifyPressEnter(e)}handleMouseEnter(e){this._adapter.toggleHovering(!0)}handleMouseLeave(e){this._adapter.toggleHovering(!1)}isAllowClear(){let{value:e,isFocus:n,isHover:r}=this._adapter.getStates(),{showClear:i,disabled:s,readonly:o}=this._adapter.getProps();return e&&i&&!s&&(n||r)&&!o}handleClear(e){let{isFocus:n}=this.getStates();this._isControlledComponent("value")?this._adapter.setState({isFocus:!1}):this._adapter.setState({value:"",isFocus:!1}),n&&this._adapter.notifyBlur("",e),this._adapter.notifyChange("",e),this._adapter.notifyClear(e),this.stopPropagation(e)}}var oB=r(51188),oF=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};let oZ=oB.Y7.PREFIX;class oq extends ee.A{constructor(e){super(e),this.handleClear=e=>{this.foundation.handleClear(e)},this.setRef=e=>{this.libRef.current=e;let{forwardRef:n}=this.props;"function"==typeof n?n(e):n&&"object"==typeof n&&(n.current=e)};let n="value"in e?e.value:e.defaultValue;this.state={value:n,isFocus:!1,isHover:!1,height:0,minLength:e.minLength,cachedValue:e.value},this.focusing=!1,this.foundation=new oz(this.adapter),this.libRef=z.createRef(),this.throttledResizeTextarea=t6()(this.foundation.resizeTextarea,10)}get adapter(){return Object.assign(Object.assign({},super.adapter),{setValue:e=>this.setState({value:e},()=>{this.props.autosize&&this.foundation.resizeTextarea()}),getRef:()=>this.libRef.current,toggleFocusing:e=>this.setState({isFocus:e}),toggleHovering:e=>this.setState({isHover:e}),notifyChange:(e,n)=>{this.props.onChange(e,n)},notifyClear:e=>this.props.onClear(e),notifyBlur:(e,n)=>this.props.onBlur(n),notifyFocus:(e,n)=>this.props.onFocus(n),notifyKeyDown:e=>{this.props.onKeyDown(e)},notifyHeightUpdate:e=>{this.setState({height:e}),this.props.onResize({height:e})},notifyPressEnter:e=>{this.props.onEnterPress&&this.props.onEnterPress(e)},notifyCompositionStart:e=>this.props.onCompositionStart(e),notifyCompositionEnd:e=>this.props.onCompositionEnd(e),notifyCompositionUpdate:e=>this.props.onCompositionUpdate(e),setMinLength:e=>this.setState({minLength:e})})}static getDerivedStateFromProps(e,n){let r={};return e.value!==n.cachedValue&&(r.value=e.value,r.cachedValue=e.value),r}componentWillUnmount(){var e,n;this.throttledResizeTextarea&&(null==(n=null==(e=this.throttledResizeTextarea)?void 0:e.cancel)||n.call(e),this.throttledResizeTextarea=null)}componentDidUpdate(e,n){(this.props.value!==e.value||this.props.placeholder!==e.placeholder)&&this.props.autosize&&this.foundation.resizeTextarea()}renderClearBtn(){let{showClear:e}=this.props,n=this.foundation.isAllowClear(),r=F()(`${oZ}-clearbtn`,{[`${oZ}-clearbtn-hidden`]:!n});return e?z.createElement("div",{className:r,onClick:this.handleClear},z.createElement(t0.A,null)):null}renderCounter(){let e,n,r,i,{showCounter:s,maxCount:o,getValueLength:a}=this.props;if(s||o){let{value:s}=this.state;n=s?eY()(a)?a(s):s.length:0,r=o||null,i=F()(`${oZ}-textarea-counter`,{[`${oZ}-textarea-counter-exceed`]:n>r}),e=z.createElement("div",{className:i},n,r?"/":null,r)}else e=null;return e}render(){let e=this.props,{autosize:n,placeholder:r,onEnterPress:i,onResize:s,disabled:o,readonly:a,className:l,showCounter:h,validateStatus:c,maxCount:u,defaultValue:d,style:p,forwardRef:f,getValueLength:g,maxLength:m,minLength:y,showClear:O,borderless:b,autoFocus:x}=e,w=oF(e,["autosize","placeholder","onEnterPress","onResize","disabled","readonly","className","showCounter","validateStatus","maxCount","defaultValue","style","forwardRef","getValueLength","maxLength","minLength","showClear","borderless","autoFocus"]),{isFocus:S,value:_,minLength:k}=this.state,C=F()(l,`${oZ}-textarea-wrapper`,{[`${oZ}-textarea-borderless`]:b,[`${oZ}-textarea-wrapper-disabled`]:o,[`${oZ}-textarea-wrapper-readonly`]:a,[`${oZ}-textarea-wrapper-${c}`]:!!c,[`${oZ}-textarea-wrapper-focus`]:S}),E=F()(`${oZ}-textarea`,{[`${oZ}-textarea-disabled`]:o,[`${oZ}-textarea-readonly`]:a,[`${oZ}-textarea-autosize`]:eX()(n)?e7()(null==n?void 0:n.maxRows):n,[`${oZ}-textarea-showClear`]:O}),T=Object.assign(Object.assign({},e_()(w,"insetLabel","insetLabelId","getValueLength","onClear","showClear","disabledEnterStartNewLine")),{autoFocus:x||this.props.autofocus,className:E,disabled:o,readOnly:a,placeholder:r||null,onChange:e=>this.foundation.handleChange(e.target.value,e),onFocus:e=>this.foundation.handleFocus(e),onBlur:e=>this.foundation.handleBlur(e.nativeEvent),onKeyDown:e=>this.foundation.handleKeyDown(e),value:null==_?"":_,onCompositionStart:this.foundation.handleCompositionStart,onCompositionEnd:this.foundation.handleCompositionEnd,onCompositionUpdate:this.foundation.handleCompositionUpdate});return eY()(g)||(T.maxLength=m),k&&(T.minLength=k),z.createElement("div",{className:C,style:p,onMouseEnter:e=>this.foundation.handleMouseEnter(e),onMouseLeave:e=>this.foundation.handleMouseLeave(e)},n?z.createElement(rG,{onResize:this.throttledResizeTextarea},z.createElement("textarea",Object.assign({},T,{ref:this.setRef}))):z.createElement("textarea",Object.assign({},T,{ref:this.setRef})),this.renderClearBtn(),this.renderCounter())}}oq.propTypes={autosize:q().oneOfType([q().bool,q().object]),borderless:q().bool,placeholder:q().string,value:q().string,rows:q().number,cols:q().number,maxCount:q().number,onEnterPress:q().func,validateStatus:q().string,className:q().string,style:q().object,showClear:q().bool,onClear:q().func,onResize:q().func,onCompositionStart:q().func,onCompositionEnd:q().func,onCompositionUpdate:q().func,getValueLength:q().func,disabledEnterStartNewLine:q().bool},oq.defaultProps={autosize:!1,borderless:!1,rows:4,cols:20,showCounter:!1,showClear:!1,onEnterPress:ep(),onChange:ep(),onBlur:ep(),onFocus:ep(),onKeyDown:ep(),onResize:ep(),onClear:ep(),onCompositionStart:ep(),onCompositionEnd:ep(),onCompositionUpdate:ep()};let oW=z.forwardRef((e,n)=>z.createElement(oq,Object.assign({},e,{forwardRef:n})));var oX=r(11741),oU=r.n(oX);r(35880),r(73357),r(42072),r(61448),r(63560);var oY=r(13222),oG=r.n(oY),oH=r(99374),oK=r.n(oH);let oJ=Object.assign({},oB.Y7),o0=Object.assign(Object.assign({},oB.nL),{DEFAULT_STEP:1,DEFAULT_SHIFT_STEP:10,DEFAULT_PRESS_TIMEOUT:250,DEFAULT_PRESS_INTERVAL:0,MOUSE_BUTTON_LEFT:0}),o1=Object.assign({},oB.P$);function o2(e,n){var r=-n;let i=Math.pow(10,Math.max((e.toString().split(".")[1]||"").length,(r.toString().split(".")[1]||"").length));return Math.round(e*i+r*i)/i}class o5 extends G.A{constructor(){super(...arguments),this._decimalPointSymbol=void 0,this._currencySymbol=""}init(){this._isCurrency()&&this._setCurrencySymbol(),this._setInitValue()}destroy(){this._unregisterInterval(),this._unregisterTimer(),this._adapter.unregisterGlobalEvent("mouseup")}isControlled(){return this._isControlledComponent("value")}_isCurrency(){let{currency:e}=this.getProps();return!0===e||"string"==typeof e&&""!==e.trim()}_getFinalCurrency(){let{currency:e}=this.getProps();return!0===e?this.getProp("defaultCurrency"):e}_doInput(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=e,s=e,o=!0,a=this.isControlled();"number"!=typeof e&&(o=!isNaN(s=this.doParse(e,!1))),o&&(i=s,a||this._adapter.setNumber(s)),a||this._adapter.setValue(e,r),this.getProp("keepFocus")&&this._adapter.setFocusing(!0,()=>{this._adapter.setClickUpOrDown(!0)}),this.notifyChange(i,n)}_registerInterval(e){let n=this.getProp("pressInterval")||o0.DEFAULT_PRESS_INTERVAL;this._intervalHasRegistered=!0,this._interval=setInterval(()=>{"function"==typeof e&&this._intervalHasRegistered&&e()},n)}_unregisterInterval(){this._interval&&(this._intervalHasRegistered=!1,clearInterval(this._interval),this._interval=null)}_registerTimer(e){let n=this.getProp("pressTimeout")||o0.DEFAULT_PRESS_TIMEOUT;this._timerHasRegistered=!0,this._timer=setTimeout(()=>{this._timerHasRegistered&&"function"==typeof e&&e()},n)}_unregisterTimer(){this._timer&&(this._timerHasRegistered=!1,clearTimeout(this._timer),this._timer=null)}_setCurrencySymbol(){let{localeCode:e,currencyDisplay:n}=this.getProps();for(let r of new Intl.NumberFormat(e,{style:"currency",currency:this._getFinalCurrency()||this.getCurrencyByLocaleCode(),currencyDisplay:n}).formatToParts(1234.5))"decimal"===r.type&&(this._decimalPointSymbol=r.value,console.log("this._decimalPointSymbol: ",this._decimalPointSymbol)),"currency"===r.type&&(this._currencySymbol=r.value)}handleInputFocus(e){this.getState("value"),this._adapter.recordCursorPosition(),this._adapter.setFocusing(!0,null),this._adapter.setClickUpOrDown(!1),this._adapter.notifyFocus(e)}handleInputChange(e,n){let r,i=this.doParse(e,!0,!0,!0),s=this.doParse(e,!1,!1,!1),o=this.afterParser(e);this._adapter.recordCursorPosition();let a=s,l=e;if(""===e)this.isControlled()||(a=null);else if(this.isValidNumber(s)&&this.isValidNumber(i))r=s,l=this.doFormat(s,!1);else{if("number"!=typeof s||isNaN(s))l=this.doFormat(o,!1);else{l=this.doFormat(s,!1);let e=o.lastIndexOf("."),n=o.length-1-e,r=this._getPrecLen(s);if(r){if(r<n)for(let e=0;e<n-r;e++)l+="0"}else l+=e>-1?o.slice(e):"";a=s}r=o}this.isControlled()||null!==a&&("number"!=typeof a||isNaN(a))||this._adapter.setNumber(a),this._adapter.setValue(this.isControlled()&&!this._isCurrency()?l:this.doFormat(o,!1),()=>{this._adapter.restoreCursor()}),this.notifyChange(r,n)}handleInputKeyDown(e){let n=e.keyCode;if(n===tq.Ay.UP||n===tq.Ay.DOWN){this._adapter.setClickUpOrDown(!0),this._adapter.recordCursorPosition();let r=n===tq.Ay.UP?this.add(null,e):this.minus(null,e);this._doInput(r,e,()=>{this._adapter.restoreCursor()}),e.preventDefault()}this._adapter.notifyKeyDown(e)}handleInputBlur(e){let n=oG()(this.getState("value")),r=this.getState("number");if(null!=r||null!=n&&""!==n){let i,s,o=this.doParse(n,!1,!0,!0),a=!1,l=!1;this.isValidNumber(o)&&r!==o&&(i=o,this.isControlled()||(r=i),a=!0);let h=this.doFormat(r,!0,!0);if(h!==n&&(s=h,l=!0),l||a){let n=null!=s?s:i;null!=s&&this._adapter.setValue(s),null==i||this._isControlledComponent("value")||this._adapter.setNumber(i),this.notifyChange(n,e)}}this._adapter.setFocusing(!1),this._adapter.notifyBlur(e)}handleInputMouseEnter(e){this._adapter.setHovering(!0)}handleInputMouseLeave(e){this._adapter.setHovering(!1)}handleInputMouseMove(e){this._adapter.setHovering(!0)}handleMouseUp(e){this._unregisterInterval(),this._unregisterTimer(),this._adapter.unregisterGlobalEvent("mouseup")}handleUpClick(e){let{readonly:n}=this.getProps();this._isMouseButtonLeft(e)&&!n&&(this._adapter.setClickUpOrDown(!0),e&&(this._persistEvent(e),e.stopPropagation(),this._preventDefault(e)),this.upClick(e),this._registerTimer(()=>{this._registerInterval(()=>{this.upClick(e)})}))}handleDownClick(e){let{readonly:n}=this.getProps();this._isMouseButtonLeft(e)&&!n&&(this._adapter.setClickUpOrDown(!0),e&&(this._persistEvent(e),e.stopPropagation(),this._preventDefault(e)),this.downClick(e),this._registerTimer(()=>{this._registerInterval(()=>{this.downClick(e)})}))}_isMouseButtonLeft(e){return en()(e,"button")===o0.MOUSE_BUTTON_LEFT}_preventDefault(e){let n=this._adapter.getProp("keepFocus"),r=this._adapter.getProp("innerButtons");(n||r)&&e.preventDefault()}handleMouseLeave(e){this._adapter.registerGlobalEvent("mouseup",()=>{this.handleMouseUp(e)})}upClick(e){let n=this.add(null,e);this._doInput(n,e),this._adapter.notifyUpClick(n,e)}downClick(e){let n=this.minus(null,e);this._doInput(n,e),this._adapter.notifyDownClick(n,e)}_setInitValue(){let{defaultValue:e,value:n}=this.getProps(),r=this._isControlledComponent("value")?n:e,i=this.doParse(this._isCurrency()?r:oG()(r),!1,!0,!0),s=null;"number"!=typeof i||isNaN(i)||(s=i);let o="number"==typeof s?this.doFormat(s,!0,!0):"";this._adapter.setNumber(s),this._adapter.setValue(o),eg()(o)&&o!==String(null!=r?r:"")&&this.notifyChange(o,null)}add(e,n){let r=n&&n.shiftKey?this.getProp("shiftStep"):this.getProp("step");e=null==e?r:Number(e);let i=Math.abs(oK()(e)),s=this.getState("number"),o=this.toNumber(s)||0,a=this.getProp("min"),l=this.getProp("max"),h=this._getPrecLen(a),c=this._getPrecLen(l),u=Math.pow(10,Math.max(h,c,this._getPrecLen(o),this._getPrecLen(e)));return e<0?Math.abs(o2(a,o))>=i&&(o=(o*u+e*u)/u):e>0&&Math.abs(o2(l,o))>=i&&(o=(o*u+e*u)/u),"number"==typeof a&&a>o&&(o=a),"number"==typeof l&&l<o&&(o=l),this.doFormat(o,!0,!0)}minus(e,n){let r=n&&n.shiftKey?this.getProp("shiftStep"):this.getProp("step");return e=null==e?r:Number(e),this.add(-e,n)}_getPrecLen(e){"string"!=typeof e&&(e=String(Math.abs(Number(e||""))));let n=e.indexOf(".")+1;return n?e.length-n:0}_adjustPrec(e){let n=this.getProp("precision");return"number"!=typeof n||""===e||null===e||Number.isNaN(Number(e))||(e=Number(e).toFixed(n)),oG()(e)}formatCurrency(e){let{localeCode:n,minimumFractionDigits:r,precision:i,maximumFractionDigits:s,currencyDisplay:o,showCurrencySymbol:a}=this.getProps(),l=e;"string"==typeof e&&Number.isNaN(Number(e))&&(l=this.parseInternationalCurrency(e));let h=new Intl.NumberFormat(n,{style:"currency",currency:this._getFinalCurrency()||this.getCurrencyByLocaleCode(),currencyDisplay:o,minimumFractionDigits:r||i||void 0,maximumFractionDigits:s||i||void 0}).format(Number(l));return a?h:h.replace(this._currencySymbol,"").trim()}doFormat(){let e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{formatter:s}=this.getProps();return e=this._isCurrency()&&i?this.formatCurrency(n):r?this._adjustPrec(n):oG()(n),"function"==typeof s&&(e=s(e)),e}fetchMinOrMax(e){let{min:n,max:r}=this.getProps();return e<n?n:e>r?r:e}parseInternationalCurrency(e){let n=e.replace(this._currencySymbol,"").replace(RegExp(`[^\\d${this._decimalPointSymbol}\\-]`,"g"),"");return this._decimalPointSymbol&&"."!==this._decimalPointSymbol&&(n=n.replace(this._decimalPointSymbol,".")),parseFloat(n)}doParse(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this._isCurrency()&&"string"==typeof e&&(e=this.parseInternationalCurrency(e)),"number"==typeof e)return i&&(e=this.fetchMinOrMax(e)),r&&(e=this._adjustPrec(e)),oK()(e);let s=this.getProp("parser");if("function"==typeof s&&(e=s(e)),n&&"string"==typeof e){let n=-1===e.indexOf(".")||e.indexOf(".")>-1&&("0"===e||e.lastIndexOf("0")<e.length-1),r=e.lastIndexOf(".")<e.length-1&&e.split("").filter(e=>"."===e).length<2;if(!n||!r)return NaN}return(r&&(e=this._adjustPrec(e)),"string"==typeof e&&e.length)?i?this.fetchMinOrMax(oK()(e)):oK()(e):NaN}afterParser(e){let n=this.getProp("parser");return"string"==typeof e&&"function"==typeof n?oG()(n(e)):oG()(e)}toNumber(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if("number"==typeof e)return e;if("string"==typeof e){let{parser:r}=this.getProps();this._isCurrency()&&(e=this.parseInternationalCurrency(e)),"function"==typeof r&&(e=r(e)),n&&(e=this._adjustPrec(e))}return oK()(e)}isValidNumber(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if("number"==typeof e&&!isNaN(e)){let{min:r,max:i,precision:s}=this.getProps(),o=this._getPrecLen(e);if(e>=r&&e<=i&&(!n||"number"==typeof s&&o<=s||"number"!=typeof s))return!0}return!1}isValidString(e){if("string"==typeof e&&e.length){let n=this.doParse(e);return this.isValidNumber(n)}return!1}notifyChange(e,n){if(null==e||""===e)this._adapter.notifyChange("",n);else{let r=this.toNumber(e,!0);"number"!=typeof r||isNaN(r)?this._adapter.notifyChange(this.afterParser(e),n):(this._adapter.notifyChange(r,n),this.notifyNumberChange(r,n))}}notifyNumberChange(e,n){let{number:r}=this.getStates();this.isValidNumber(e)&&e!==r&&this._adapter.notifyNumberChange(e,n)}updateStates(e,n){this._adapter.updateStates(e,n)}getCurrencyByLocaleCode(){let{localeCode:e}=this.getProps(),n={"zh-CN":"CNY","zh-HK":"HKD","zh-TW":"TWD","ja-JP":"JPY","ko-KR":"KRW","th-TH":"THB","vi-VN":"VND","ms-MY":"MYR","id-ID":"IDR","hi-IN":"INR","ar-SA":"SAR","en-GB":"GBP","de-DE":"EUR","fr-FR":"EUR","it-IT":"EUR","es-ES":"EUR","pt-PT":"EUR","ru-RU":"RUB","en-US":"USD","en-CA":"CAD","es-MX":"MXN","pt-BR":"BRL","es-AR":"ARS","en-AU":"AUD","en-NZ":"NZD","en-ZA":"ZAR","ar-EG":"EGP"};if(n[e])return n[e];let r=e.split("-")[0],i={en:"USD",zh:"CNY",es:"EUR",fr:"EUR",de:"EUR",it:"EUR",ja:"JPY",ko:"KRW",ru:"RUB",ar:"SAR"};return i[r]?i[r]:"USD"}}let o4=(0,nL.T)(function(e){return z.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),z.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.64 16.44a1.5 1.5 0 0 1-2.12 0l-5.66-5.66-5.66 5.66a1.5 1.5 0 1 1-2.12-2.12L10.8 7.6a1.5 1.5 0 0 1 2.12 0l6.72 6.72a1.5 1.5 0 0 1 0 2.12Z",fill:"currentColor"}))},"chevron_up");var o3=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};class o6 extends ee.A{get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{setValue:(e,n)=>this.setState({value:e},n),setNumber:(e,n)=>this.setState({number:e},n),setFocusing:(e,n)=>this.setState({focusing:e},n),setHovering:e=>this.setState({hovering:e}),notifyChange:function(){return e.props.onChange(...arguments)},notifyNumberChange:function(){return e.props.onNumberChange(...arguments)},notifyBlur:e=>this.props.onBlur(e),notifyFocus:e=>this.props.onFocus(e),notifyUpClick:(e,n)=>this.props.onUpClick(e,n),notifyDownClick:(e,n)=>this.props.onDownClick(e,n),notifyKeyDown:e=>this.props.onKeyDown(e),registerGlobalEvent:(e,n)=>{e&&"function"==typeof n&&(this.adapter.unregisterGlobalEvent(e),this.adapter.setCache(e,n),document.addEventListener(e,n))},unregisterGlobalEvent:e=>{if(e){let n=this.adapter.getCache(e);document.removeEventListener(e,n),this.adapter.setCache(e,null)}},getInputCharacter:e=>this.inputNode.value[e],recordCursorPosition:()=>{try{this.inputNode&&(this.cursorStart=this.inputNode.selectionStart,this.cursorEnd=this.inputNode.selectionEnd,this.currentValue=this.inputNode.value,this.cursorBefore=this.inputNode.value.substring(0,this.cursorStart),this.cursorAfter=this.inputNode.value.substring(this.cursorEnd))}catch(e){console.warn(e)}},restoreByAfter:e=>{if(eN(e))return!1;let n=this.inputNode.value,r=n.lastIndexOf(e);return -1!==r&&r+e.length===n.length&&(this.adapter.fixCaret(r,r),!0)},restoreCursor:function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.cursorAfter;return!eN(n)&&Array.prototype.some.call(n,(r,i)=>{let s=n.substring(i);return e.adapter.restoreByAfter(s)})},fixCaret:(e,n)=>{if(void 0!==e&&void 0!==n&&this.inputNode&&this.inputNode.value)try{let r=this.inputNode.selectionStart,i=this.inputNode.selectionEnd;(e!==r||n!==i)&&this.inputNode.setSelectionRange(e,n)}catch(e){}},setClickUpOrDown:e=>{this.clickUpOrDown=e},updateStates:(e,n)=>{this.setState(e,n)}})}constructor(e){super(e),this.setInputRef=e=>{let{forwardedRef:n}=this.props;this.inputNode=e,n&&"object"==typeof n?n.current=e:"function"==typeof n&&n(e)},this.handleInputFocus=e=>this.foundation.handleInputFocus(e),this.handleInputChange=(e,n)=>this.foundation.handleInputChange(e,n),this.handleInputBlur=e=>this.foundation.handleInputBlur(e),this.handleInputKeyDown=e=>this.foundation.handleInputKeyDown(e),this.handleInputMouseEnter=e=>this.foundation.handleInputMouseEnter(e),this.handleInputMouseLeave=e=>this.foundation.handleInputMouseLeave(e),this.handleInputMouseMove=e=>this.foundation.handleInputMouseMove(e),this.handleUpClick=e=>this.foundation.handleUpClick(e),this.handleDownClick=e=>this.foundation.handleDownClick(e),this.handleMouseUp=e=>this.foundation.handleMouseUp(e),this.handleMouseLeave=e=>this.foundation.handleMouseLeave(e),this.renderButtons=()=>{let{prefixCls:e,disabled:n,innerButtons:r,max:i,min:s}=this.props,{hovering:o,focusing:a,number:l}=this.state,h=n||l===i,c=n||l===s,u=F()(`${e}-number-suffix-btns`,{[`${e}-number-suffix-btns-inner`]:r,[`${e}-number-suffix-btns-inner-hover`]:r&&o&&!a}),d=F()(`${e}-number-button`,`${e}-number-button-up`,{[`${e}-number-button-up-disabled`]:n,[`${e}-number-button-up-not-allowed`]:h}),p=F()(`${e}-number-button`,`${e}-number-button-down`,{[`${e}-number-button-down-disabled`]:n,[`${e}-number-button-down-not-allowed`]:c});return z.createElement("div",{className:u},z.createElement("span",{className:d,onMouseDown:h?ep():this.handleUpClick,onMouseUp:this.handleMouseUp,onMouseLeave:this.handleMouseLeave},z.createElement(o4,{size:"extra-small"})),z.createElement("span",{className:p,onMouseDown:c?ep():this.handleDownClick,onMouseUp:this.handleMouseUp,onMouseLeave:this.handleMouseLeave},z.createElement(t1.A,{size:"extra-small"})))},this.renderSuffix=()=>{let{innerButtons:e,suffix:n}=this.props,{hovering:r,focusing:i}=this.state;return e&&(r||i)?this.renderButtons():n},this.state={value:"",number:null,focusing:!!e.autofocus,hovering:!1},this.inputNode=null,this.foundation=new o5(this.adapter),this.clickUpOrDown=!1}componentDidUpdate(e){let n,{value:r,preventScroll:i}=this.props,{focusing:s}=this.state;if(r!==e.value&&!((e,n)=>{let{isNaN:r}=Number;return r(e)&&r(n)})(r,e.value)){if(eN(r)||""===r)n="",this.foundation.updateStates({value:n,number:null});else{let e=r;"number"==typeof r&&(e=this.foundation.doFormat(r));let i=this.foundation.doParse(e,!1,!0,!0),o="number"==typeof r?r:this.foundation.doParse(e,!1,!1,!1);if(s)if(this.foundation.isValidNumber(i)&&i!==this.state.number){let e={number:i};this.clickUpOrDown&&(e.value=this.foundation.doFormat(e.number,!0),n=e.value),this.foundation.updateStates(e,()=>this.adapter.restoreCursor())}else oU()(o)?this.foundation.updateStates({value:e}):(n=this.foundation.doFormat(o,!1),this.foundation.updateStates({value:n}));else this.foundation.isValidNumber(i)?(n=this.foundation.doFormat(i,!0,!0),this.foundation.updateStates({number:i,value:n})):(n="",this.foundation.updateStates({number:null,value:n}))}n&&eg()(n)&&n!==String(this.props.value)&&(this.foundation._isCurrency()?this.foundation.doParse(n)!==("string"==typeof this.props.value?this.foundation.doParse(this.props.value):this.props.value)&&this.foundation.notifyChange(n,null):this.foundation.notifyChange(n,null))}this.clickUpOrDown&&this.props.keepFocus&&this.state.focusing&&document.activeElement!==this.inputNode&&this.inputNode.focus({preventScroll:i})}render(){let e=this.props,{disabled:n,className:r,prefixCls:i,min:s,max:o,step:a,shiftStep:l,precision:h,formatter:c,parser:u,forwardedRef:d,onUpClick:p,onDownClick:f,pressInterval:g,pressTimeout:m,suffix:y,size:O,hideButtons:b,innerButtons:x,style:w,onNumberChange:S,keepFocus:_,defaultValue:k}=e,C=o3(e,["disabled","className","prefixCls","min","max","step","shiftStep","precision","formatter","parser","forwardedRef","onUpClick","onDownClick","pressInterval","pressTimeout","suffix","size","hideButtons","innerButtons","style","onNumberChange","keepFocus","defaultValue"]),{value:E,number:T}=this.state,P=F()(r,`${i}-number`,{[`${i}-number-size-${O}`]:O}),A=this.renderButtons(),M={"aria-disabled":n,step:a};return T&&(M["aria-valuenow"]=T),o!==1/0&&(M["aria-valuemax"]=o),s!==-1/0&&(M["aria-valuemin"]=s),z.createElement("div",{className:P,style:w,onMouseMove:e=>this.handleInputMouseMove(e),onMouseEnter:e=>this.handleInputMouseEnter(e),onMouseLeave:e=>this.handleInputMouseLeave(e)},z.createElement(t2.A,Object.assign({role:"spinbutton"},M,C,{size:O,disabled:n,ref:this.setInputRef,value:E,onFocus:this.handleInputFocus,onChange:this.handleInputChange,onBlur:this.handleInputBlur,onKeyDown:this.handleInputKeyDown,suffix:this.renderSuffix()})),b||x?null:A)}}o6.propTypes={"aria-label":q().string,"aria-labelledby":q().string,"aria-invalid":q().bool,"aria-errormessage":q().string,"aria-describedby":q().string,"aria-required":q().bool,autofocus:q().bool,clearIcon:q().node,className:q().string,defaultValue:q().oneOfType([q().number,q().string]),disabled:q().bool,formatter:q().func,forwardedRef:q().any,hideButtons:q().bool,innerButtons:q().bool,insetLabel:q().node,insetLabelId:q().string,keepFocus:q().bool,max:q().number,min:q().number,parser:q().func,precision:q().number,prefixCls:q().string,pressInterval:q().number,pressTimeout:q().number,preventScroll:q().bool,shiftStep:q().number,showCurrencySymbol:q().bool,step:q().number,style:q().object,suffix:q().any,value:q().oneOfType([q().number,q().string]),onBlur:q().func,onChange:q().func,onDownClick:q().func,onKeyDown:q().func,onNumberChange:q().func,onUpClick:q().func},o6.defaultProps={forwardedRef:ep(),innerButtons:!1,keepFocus:!1,max:1/0,min:-1/0,prefixCls:oJ.PREFIX,pressInterval:o0.DEFAULT_PRESS_TIMEOUT,pressTimeout:o0.DEFAULT_PRESS_TIMEOUT,shiftStep:o0.DEFAULT_SHIFT_STEP,showCurrencySymbol:!0,size:o1.DEFAULT_SIZE,step:o0.DEFAULT_STEP,onBlur:ep(),onChange:ep(),onDownClick:ep(),onFocus:ep(),onKeyDown:ep(),onNumberChange:ep(),onUpClick:ep()};let o9=(P=z.forwardRef(function(e,n){return z.createElement(n$,{componentName:"InputNumber"},(r,i,s,o)=>z.createElement(o6,Object.assign({localeCode:i,defaultCurrency:o},e,{forwardedRef:n})))}),P&&("function"==typeof P||"object"==typeof P)&&o6&&!0&&Object.entries(o6).forEach(e=>{let[n,r]=e;P[n]=r}),P),o7=["default","error","warning","success"],o8={PREFIX:`${W._}-select`,PREFIX_OPTION:`${W._}-select-option`,PREFIX_GROUP:`${W._}-select-group`},ae="trigger",at="dropdown";var an=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};class ar extends G.A{constructor(e){super(Object.assign({},e)),this._keydownHandler=null}init(){this._setDropdownWidth();let e=this.getProp("defaultOpen"),n=this.getProp("open"),r=this._collectOptions();this._setDefaultSelection(r),(e||n)&&this.open(void 0,r),this.getProp("autoFocus")&&this.focus()}focus(){let e=this._isFilterable(),n=this._isMultiple();this._adapter.updateFocusState(!0),this._adapter.setIsFocusInContainer(!1),e&&n?this.focusInput():e&&!n?this.toggle2SearchInput(!0):this._focusTrigger()}_focusTrigger(){this._adapter.focusTrigger()}destroy(){this._adapter.unregisterClickOutsideHandler()}_setDropdownWidth(){let e,{style:n,dropdownMatchSelectWidth:r}=this.getProps();r&&(e=n&&ey()(n.width)||n&&eg()(n.width)&&!n.width.includes("%")?n.width:this._adapter.getTriggerWidth(),this._adapter.setOptionWrapperWidth(e))}_collectOptions(){let e=this._adapter.getOptionsFromChildren();return this._adapter.updateOptions(e),this._adapter.rePositionDropdown(),e}_setDefaultSelection(e){let{value:n}=this.getProps(),{defaultValue:r}=this.getProps();this._isControlledComponent()||(n=r),this._update(n,e)}handleOptionListChange(){let e=this._collectOptions(),{selections:n}=this.getStates();this.updateOptionsActiveStatus(n,e);let{defaultActiveFirstOption:r}=this.getProps();r&&this._adapter.updateFocusIndex(0)}handleOptionListChangeHadDefaultValue(){let e,n=this.getState("selections"),{onChangeWithObject:r}=this.getProps(),i=this._isMultiple();switch(!0){case i&&!!n.size:try{e=[...n].map(e=>r?e[1]:e[1].value)}catch(n){e=[]}break;case i&&!n.size:e=[];break;case!i&&!!n.size:try{e=r?[...n][0][1]:[...n][0][1].value}catch(e){}case!i&&!n.size:}let s=this._adapter.getOptionsFromChildren();this._update(e,s)}handleValueChange(e){let n,{allowCreate:r,autoClearSearchValue:i,remote:s}=this.getProps(),{inputValue:o}=this.getStates();r&&this._isControlledComponent()?(n=this.getState("options")).forEach(e=>e._show=!0):n=this._adapter.getOptionsFromChildren(),this._adapter.rePositionDropdown(),this._isFilterable()&&!i&&o&&!s&&(n=this._filterOption(n,o)),this._update(e,n)}_update(e,n){let r;this._isMultiple()?(r=this._updateMultiple(e,n),this.updateOverflowItemCount(r.size)):r=this._updateSingle(e,n),this._adapter.updateSelection(r),this.updateOptionsActiveStatus(r,n)}_updateSingle(e,n){let r=new Map,{onChangeWithObject:i}=this.getProps(),s=i&&void 0!==e?e.value:e,o=n.filter(e=>e.value===s),a=!o.length&&null!=s;if(o.length){let e=Object.assign({},o[0]);r.set(e.label,e)}else if(a){let n={value:e,label:e,_notExist:!0,_scrollIndex:-1};i&&(n=Object.assign(Object.assign({},e),{_notExist:!0,_scrollIndex:-1})),r.set(n.label,n)}return r}_updateMultiple(e,n){let r=this.getState("selections"),i=[],s=Array.isArray(e);this.checkMultipleProps(),r.size&&(i=[...r].map(e=>e[1]));let o=new Map,a=e,{onChangeWithObject:l}=this.getProps();return l&&s&&(a=e.map(e=>e.value)),s&&a.length&&a.forEach((r,s)=>{let a=n.findIndex(e=>e.value===r);if(-1!==a)o.set(n[a].label,n[a]);else{let n=i.findIndex(e=>e.value===r);if(-1!==n){let r=i[n];if(l){let n=Object.assign({},e[s]);eJ()(n,r)?o.set(r.label,r):o.set(n.label,n)}else o.set(r.label,r)}else{let n={value:r,label:r,_notExist:!0};l&&(n=Object.assign(Object.assign({},e[s]),{_notExist:!0})),o.set(n.label,Object.assign(Object.assign({},n),{_scrollIndex:-1}))}}}),o}_isMultiple(){return this.getProp("multiple")}_isDisabled(){return this.getProp("disabled")}_isFilterable(){return!!this.getProp("filter")}handleClick(e){let{clickToHide:n}=this.getProps(),{isOpen:r}=this.getStates();this._isDisabled()||(r?r&&n?this.close({event:e}):r&&!n&&this.focusInput():(this.open(),this._notifyFocus(e)))}open(e,n){let r=this._isFilterable(),i=n||this.getState("options");if(r){let e=this._filterOption(i,"").filter(e=>!e._inputCreateOnly);this._adapter.updateOptions(e),this.toggle2SearchInput(!0)}else this._adapter.updateFocusState(!0);this._adapter.openMenu(()=>{let{searchPosition:e,autoFocus:n}=this.getProps();n&&e===at&&this._adapter.focusDropdownInput()}),this._setDropdownWidth(),this._adapter.notifyDropdownVisibleChange(!0),this.bindKeyBoardEvent(),this._adapter.registerClickOutsideHandler(e=>{this.close({event:e}),this._notifyBlur(e),this._adapter.updateFocusState(!1)})}toggle2SearchInput(e){e?this._adapter.toggleInputShow(e,()=>this.focusInput()):this._adapter.toggleInputShow(e,()=>void 0)}close(e){let{event:n,closeCb:r,notToggleInput:i}=e||{},{isFocus:s}=this.getStates();this._adapter.closeMenu(),this._adapter.notifyDropdownVisibleChange(!1),this._adapter.setIsFocusInContainer(!1),s&&this._focusTrigger(),this._adapter.unregisterClickOutsideHandler();let o=this._isFilterable();o&&!i&&this.toggle2SearchInput(!1),this._adapter.once("popoverClose",()=>{o&&this.clearInput(n),r&&r()})}onSelect(e,n,r){this._isDisabled()||(e._inputCreateOnly&&this._adapter.notifyCreate(e),this._isMultiple()?this._handleMultipleSelect(e,r):this._handleSingleSelect(e,r),this._adapter.updateFocusIndex(n))}_handleSingleSelect(e,n){var{value:r,label:i}=e,s=an(e,["value","label"]);let o=new Map().set(i,Object.assign({value:r,label:i},s));this._notifySelect(r,Object.assign({value:r,label:i},s));let a=this._isFilterable();this._isControlledComponent()?this.close({event:n,notToggleInput:!0,closeCb:()=>{this._notifyChange(o),a&&this.toggle2SearchInput(!1)}}):(this._adapter.updateSelection(o),this._notifyChange(o),this.close({event:n,closeCb:()=>{this.updateOptionsActiveStatus(o)}}))}_handleMultipleSelect(e,n){var{value:r,label:i}=e,s=an(e,["value","label"]);let o=this._adapter.getMaxLimit(),a=this._adapter.getSelections(),{autoClearSearchValue:l}=this.getProps();if(a.has(i))this._notifyDeselect(r,Object.assign({value:r,label:i},s)),a.delete(i);else{if(o&&a.size===o)return void this._adapter.notifyMaxLimit(Object.assign({value:r,label:i},e_()(s,"_scrollIndex")));this._notifySelect(r,Object.assign({value:r,label:i},s)),a.set(i,Object.assign({value:r,label:i},s))}if(this._isControlledComponent())this._notifyChange(a),this._isFilterable()&&(l&&this.clearInput(n),this.focusInput());else{this._adapter.updateSelection(a),this.updateOverflowItemCount(a.size),this._adapter.rePositionDropdown();let{options:e}=this.getStates();this._isFilterable()&&(l&&(this.clearInput(n),e=this._filterOption(e,"")),this.focusInput()),this.updateOptionsActiveStatus(a,e),this._notifyChange(a)}}clearSelected(){let e=new Map;this._isControlledComponent()||(this._adapter.updateSelection(e),this.updateOptionsActiveStatus(e)),this._notifyChange(e),this._adapter.notifyClear();let{isOpen:n}=this.getStates();n&&this._adapter.rePositionDropdown()}updateOptionsActiveStatus(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getState("options"),{allowCreate:r}=this.getProps(),i=n.map(n=>(e.has(n.label)?(n._selected=!0,r&&delete n._inputCreateOnly):(n._inputCreateOnly&&(n._show=!1),n._selected=!1),n));this._adapter.updateOptions(i)}removeTag(e){let n=this._adapter.getSelections();n.delete(e.label),this._isControlledComponent()?this._notifyDeselect(e.value,e):(this._notifyDeselect(e.value,e),this._adapter.updateSelection(n),this.updateOverflowItemCount(n.size),this.updateOptionsActiveStatus(n),this._adapter.rePositionDropdown()),this._notifyChange(n)}clearInput(e){let{inputValue:n}=this.getStates();if(""!==n){this._adapter.updateInputValue(""),this._adapter.notifySearch("",e);let{options:n}=this.getStates(),{remote:r}=this.getProps(),i=n;r||(i=this._filterOption(n,"")),this._adapter.updateOptions(i)}}focusInput(){this._adapter.focusInput(),this._adapter.updateFocusState(!0),this._adapter.setIsFocusInContainer(!1)}handleInputChange(e,n){this._adapter.updateInputValue(e);let{options:r,isOpen:i}=this.getStates(),{allowCreate:s,remote:o}=this.getProps(),a=r;o||(a=this._filterOption(r,e)),a=this._createOptionByInput(s,a,e),this._adapter.updateOptions(a),this._adapter.notifySearch(e,n),this._isMultiple()&&this._adapter.rePositionDropdown()}_filterOption(e,n){let r=this.getProp("filter");if(!r)return e;if("boolean"==typeof r&&r){let r=n.toLowerCase();return e.map(e=>{let n=e.label.toString().toLowerCase(),i=e._parentGroup&&e._parentGroup.label,s=n.includes(r),o=eg()(i)&&i.toLowerCase().includes(r);return s||o?e._show=!0:e._show=!1,e})}if("function"==typeof r)return e.map(e=>(r(n,e)?e._show=!0:e._show=!1,e))}_createOptionByInput(e,n,r){if(e)if(r){let e=-1,i=-1;n.forEach((n,s)=>{(n._show||n._inputCreateOnly)&&(n.label===r&&(i=s),n._inputCreateOnly&&(e=s,n.value=r,n.label=r,n._show=!0))}),-1===e&&-1===i&&n.push({_show:!0,_selected:!1,value:r,label:r,_inputCreateOnly:!0}),-1!==i&&(n=n.filter(e=>!e._inputCreateOnly))}else n=n.filter(e=>!e._inputCreateOnly);return n}bindKeyBoardEvent(){this._keydownHandler=e=>{this._handleKeyDown(e)},this._adapter.registerKeyDown(this._keydownHandler)}unBindKeyBoardEvent(){this._keydownHandler&&this._adapter.unregisterKeyDown()}_handleKeyDown(e){let n=e.keyCode,{loading:r,filter:i,multiple:s,disabled:o}=this.getProps(),{isOpen:a}=this.getStates();if(!r&&!o)switch(n){case tq.Ay.UP:e.preventDefault(),this._handleArrowKeyDown(-1);break;case tq.Ay.DOWN:e.preventDefault(),this._handleArrowKeyDown(1);break;case tq.Ay.BACKSPACE:this._handleBackspaceKeyDown();break;case tq.Ay.ENTER:er(e),this._handleEnterKeyDown(e);break;case tq.Ay.ESC:a&&this.close({event:e}),i&&!s&&this._focusTrigger();break;case tq.Ay.TAB:this._handleTabKeyDown(e)}}handleContainerKeyDown(e){let n=e.keyCode,{isOpen:r}=this.getStates();n===tq.Ay.TAB&&r&&this._handleTabKeyDown(e)}_getEnableFocusIndex(e){let{focusIndex:n,options:r}=this.getStates(),i=r.filter(e=>e._show),s=i.length,o=n+e;if(o<0&&(o=s-1),o>=s&&(o=0),e>0){let e=-1;for(let n=0;n<i.length&&(i[n].disabled||(e=n),!(e>=o));n++);o=e}else{let e=i.length;for(let n=s-1;n>=0&&(i[n].disabled||(e=n),!(e<=o));n--);o=e}this._adapter.updateFocusIndex(o),this._adapter.updateScrollTop(o)}_handleArrowKeyDown(e){let{isOpen:n}=this.getStates();n?this._getEnableFocusIndex(e):this.open()}_handleTabKeyDown(e){let{isOpen:n}=this.getStates();if(this._adapter.updateFocusState(!1),n){let n=this._adapter.getContainer(),r=this._adapter.getFocusableElements(n);r.length>0?e.shiftKey?this._handlePanelOpenShiftTabKeyDown(r,e):this._handlePanelOpenTabKeyDown(r,e):(this.close({event:e}),this._notifyBlur(e))}else this._notifyBlur(e)}_handlePanelOpenTabKeyDown(e,n){let r=this._adapter.getActiveElement();this._adapter.getIsFocusInContainer()?r===e[e.length-1]&&(this._focusTrigger(),this.close({event:n}),er(n)):(e[0].focus(),this._adapter.setIsFocusInContainer(!0),er(n))}_handlePanelOpenShiftTabKeyDown(e,n){let r=this._adapter.getActiveElement();this._adapter.getIsFocusInContainer()?r===e[0]&&(this._focusTrigger(),this._adapter.setIsFocusInContainer(!1),er(n)):(this.close({event:n}),this._notifyBlur(n))}_handleEnterKeyDown(e){let{isOpen:n,options:r,focusIndex:i}=this.getStates();if(n)if(-1!==i){let n=r.filter(e=>e._show),{length:s}=n;if(s<=i)return;if(n&&s){let r=n[i];if(r.disabled)return;this.onSelect(r,i,e)}}else this.close({event:e});else this.open()}_handleBackspaceKeyDown(){if(this._isMultiple()){let e=this._adapter.getSelections(),{inputValue:n}=this.getStates(),r=e.size;if(r&&!n){let n=[...e.keys()],i=r-1,s=n[i],o=e.get(s),a=!1;if(o.disabled&&0===i)return;for(;o.disabled&&0!==i;)i-=1,s=n[i],o=e.get(s),0==i&&o.disabled&&(a=!0);a||this.removeTag(o)}}}_notifyChange(e){let n,{onChangeWithObject:r}=this.getProps(),i=this.getState("selections"),s=[...e.values()],o=this._isMultiple();if(this._diffSelections(e,i,o))switch(!0){case r:this._notifyChangeWithObject(e);break;case!r&&!o:n=s.length?s[0].value:void 0,this._adapter.notifyChange(n);break;case!r&&o:n=s.length?s.map(e=>e.value):[],this._adapter.notifyChange(n)}}_removeInternalKey(e){let n=Object.assign({},e);return delete n._parentGroup,delete n._show,delete n._selected,delete n._scrollIndex,delete n._keyInJsx,"_keyInOptionList"in n&&(n.key=n._keyInOptionList,delete n._keyInOptionList),n}_notifySelect(e,n){let r=this._removeInternalKey(n);this._adapter.notifySelect(e,r)}_notifyDeselect(e,n){let r=this._removeInternalKey(n);this._adapter.notifyDeselect(e,r)}_diffSelections(e,n,r){let i=!0,s=!0;if(!r){let r=[...e.values()],o=[...n.values()],a=r[0]?r[0].value:r[0],l=o[0]?o[0].value:o[0];s=!eJ()(a,l);let h=r[0]?r[0].label:r[0],c=o[0]?o[0].label:o[0];i=!eJ()(h,c)}return s||i}_notifyChangeWithObject(e){this.getState("selections");let n=[];for(let r of e.entries()){let e=Object.assign({label:r[0]},r[1]);e=this._removeInternalKey(e),n.push(e)}this._isMultiple()?this._adapter.notifyChange(n):this._adapter.notifyChange(n[0])}_notifyBlur(e){this._adapter.notifyBlur(e)}_notifyFocus(e){this._adapter.notifyFocus(e)}handleMouseEnter(e){this._adapter.updateHovering(!0),this._adapter.notifyMouseEnter(e)}handleMouseLeave(e){this._adapter.updateHovering(!1),this._adapter.notifyMouseLeave(e)}handleClearClick(e){let{filter:n,searchPosition:r}=this.getProps();n&&r===ae&&this.clearInput(e),this.focus(),this.clearSelected(),e.stopPropagation()}handleKeyPress(e){e&&e.key===tq.jD&&this.handleClick(e)}handleClearBtnEnterPress(e){tW(e)&&this.handleClearClick(e)}handleOptionMouseEnter(e){this._adapter.updateFocusIndex(e)}handleListScroll(e){this._adapter.notifyListScroll(e)}handleTriggerFocus(e){this.bindKeyBoardEvent(),this._adapter.setIsFocusInContainer(!1)}handleTriggerBlur(e){let{filter:n,autoFocus:r}=this.getProps(),{isOpen:i,isFocus:s}=this.getStates();s&&!i&&(this._notifyBlur(e),this._adapter.updateFocusState(!1))}handleInputBlur(e){let{filter:n,autoFocus:r}=this.getProps(),{showInput:i,isOpen:s}=this.getStates(),o=this._isMultiple();n&&!o&&(i||r)&&!s&&this.toggle2SearchInput(!1)}selectAll(){let{options:e}=this.getStates(),{onChangeWithObject:n}=this.getProps(),r=[];if(!this._isMultiple())return void console.warn(`[Semi Select]: It seems that you have called the selectAll method in the single-selection Select.
                Please note that this is not a legal way to use it`);r=n?e:e.map(e=>e.value),this.handleValueChange(r),this._adapter.notifyChange(r)}checkMultipleProps(e){if(this._isMultiple()){let{defaultValue:n,value:r}=e||this.getProps(),i=r||n;eN(i)||Array.isArray(i)||H(!0,"[Semi Select] defaultValue/value should be array type in multiple mode")}}updateScrollTop(){this._adapter.updateScrollTop()}updateOverflowItemCount(e,n){let{maxTagCount:r,ellipsisTrigger:i}=this.getProps();i&&(n?this._adapter.updateOverflowItemCount(n):"number"==typeof r&&(e-r>0?this._adapter.updateOverflowItemCount(e-r):this._adapter.updateOverflowItemCount(0)))}updateIsFullTags(){let{isFullTags:e}=this.getStates();e||this._adapter.setState({isFullTags:!0})}handlePopoverClose(){this._adapter.emit("popoverClose")}handleSlotMouseEnter(){this._adapter.updateFocusIndex(-1)}}let ai=rO.PREFIX;class as extends z.PureComponent{renderNTag(e,n){let{size:r,showPopover:i,popoverProps:s,onPlusNMouseEnter:o}=this.props,a=z.createElement(rC,{closable:!1,size:r,color:"grey",style:{backgroundColor:"transparent"},key:"_+n",onMouseEnter:o},"+",e);return i&&(a=z.createElement(nx,Object.assign({showArrow:!0,content:n,trigger:"hover",position:"top",autoAdjustOverflow:!0,className:`${ai}-rest-group-popover`},s,{key:"_+n_Popover"}),a)),a}renderMergeTags(e){let{maxTagCount:n,tagList:r,restCount:i}=this.props,s=i||r.length-n,o=e,a=e.slice(0,n),l=e.slice(n),h=null;return s>0&&(h=this.renderNTag(s,l),a.push(h),o=a),o}renderAllTags(){let{tagList:e,size:n,mode:r,avatarShape:i,onTagClose:s}=this.props;return e.map(e=>{if("custom"===r)return e;let o=Object.assign({},e);return o.size||(o.size=n),o.avatarShape||(o.avatarShape=i),o.tagKey||("string"==typeof o.children||"number"==typeof o.children?o.tagKey=o.children:o.tagKey=Math.random()),z.createElement(rC,Object.assign({},o,{key:o.tagKey,onClose:(e,n,r)=>{o.onClose&&o.onClose(e,n,r),s&&s(e,n,r)}}))})}render(){let{style:e,className:n,maxTagCount:r,size:i}=this.props,s=F()({[`${ai}-group`]:!0,[`${ai}-group-max`]:r,[`${ai}-group-small`]:"small"===i,[`${ai}-group-large`]:"large"===i},n),o=this.renderAllTags(),a=void 0===r?o:this.renderMergeTags(o);return z.createElement("div",{style:e,className:s},a)}}as.defaultProps={style:{},className:"",size:rv[0],avatarShape:"square",onTagClose:()=>void 0,onPlusNMouseEnter:()=>void 0},as.propTypes={children:q().node,style:q().object,className:q().string,maxTagCount:q().number,restCount:q().number,tagList:q().array,size:q().oneOf(rv),mode:q().string,onTagClose:q().func,showPopover:q().bool,popoverProps:q().object,avatarShape:q().oneOf(rb)};let ao={PREFIX:W._+"-overflow-list"},aa={COLLAPSE:"collapse",SCROLL:"scroll"},al={START:"start",END:"end"},ah={BOUNDARY_SET:Object.values(al),POSITION_SET:["vertical","horizontal"],MODE_SET:Object.values(aa),MODE_MAP:aa,BOUNDARY_MAP:al,OVERFLOW_DIR:{NONE:0,GROW:1,SHRINK:2}};class ac extends z.PureComponent{componentDidMount(){let{items:e}=this.props;this.cachedKeys=Object.keys(e);let{root:n,threshold:r,rootMargin:i,option:s,onIntersect:o}=this.props;this.observer=new IntersectionObserver(o,Object.assign({root:n,threshold:r,rootMargin:i},s)),this.observeElement()}componentDidUpdate(){let{items:e}=this.props,n=Object.keys(e);eJ()(this.cachedKeys,n)||(this.observeElement(!0),this.cachedKeys=n)}componentWillUnmount(){this.observer&&(this.observer.disconnect(),this.observer=null)}observeElement(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{items:n}=this.props;if(eH()(n))return void this.observer.disconnect();e&&this.observer.disconnect(),Object.keys(n).forEach(e=>{let r=n[e];r&&(0,ni.A)(r)&&this.observer.observe(r)})}render(){let{children:e}=this.props;return e}}ac.propTypes={onIntersect:q().func,option:q().object,root:q().any,threshold:q().number,rootMargin:q().string,items:q().object},ac.defaultProps={onIntersect:()=>void 0,threshold:.75,rootMargin:"0px",option:{},items:{}};var au=Function.prototype.toString,ad=Object.create,ap=Object.prototype.toString,af=function(){function e(){this._keys=[],this._values=[]}return e.prototype.has=function(e){return!!~this._keys.indexOf(e)},e.prototype.get=function(e){return this._values[this._keys.indexOf(e)]},e.prototype.set=function(e,n){this._keys.push(e),this._values.push(n)},e}(),ag="undefined"!=typeof WeakMap?function(){return new WeakMap}:function(){return new af};function am(e){if(!e)return ad(null);var n=e.constructor;if(n===Object)return e===Object.prototype?{}:ad(e);if(n&&~au.call(n).indexOf("[native code]"))try{return new n}catch(e){}return ad(e)}var ay="g"===/test/g.flags?function(e){return e.flags}:function(e){var n="";return e.global&&(n+="g"),e.ignoreCase&&(n+="i"),e.multiline&&(n+="m"),e.unicode&&(n+="u"),e.sticky&&(n+="y"),n};function aO(e){var n=ap.call(e);return n.substring(8,n.length-1)}var av="undefined"!=typeof Symbol?function(e){return e[Symbol.toStringTag]||aO(e)}:aO,ab=Object.defineProperty,ax=Object.getOwnPropertyDescriptor,aw=Object.getOwnPropertyNames,aS=Object.getOwnPropertySymbols,a_=Object.prototype,ak=a_.hasOwnProperty,aC=a_.propertyIsEnumerable,aE="function"==typeof aS,aT=aE?function(e){return aw(e).concat(aS(e))}:aw;function aP(e,n,r){for(var i=aT(e),s=0,o=i.length,a=void 0,l=void 0;s<o;++s)if("callee"!==(a=i[s])&&"caller"!==a){if(!(l=ax(e,a))){n[a]=r.copier(e[a],r);continue}l.get||l.set||(l.value=r.copier(l.value,r));try{ab(n,a,l)}catch(e){n[a]=l.value}}return n}function aA(e,n){return e.slice(0)}function aM(e,n){var r=new n.Constructor;return n.cache.set(e,r),e.forEach(function(e,i){r.set(i,n.copier(e,n))}),r}function aN(e,n){return new n.Constructor(e.valueOf())}function aD(e,n){return e}function aI(e,n){var r=new n.Constructor;return n.cache.set(e,r),e.forEach(function(e){r.add(n.copier(e,n))}),r}var a$=Array.isArray,aR=Object.assign,aL=Object.getPrototypeOf||function(e){return e.__proto__},aQ={array:function(e,n){var r=new n.Constructor;n.cache.set(e,r);for(var i=0,s=e.length;i<s;++i)r[i]=n.copier(e[i],n);return r},arrayBuffer:aA,blob:function(e,n){return e.slice(0,e.size,e.type)},dataView:function(e,n){return new n.Constructor(aA(e.buffer))},date:function(e,n){return new n.Constructor(e.getTime())},error:aD,map:aM,object:aE?function(e,n){var r=am(n.prototype);for(var i in n.cache.set(e,r),e)ak.call(e,i)&&(r[i]=n.copier(e[i],n));for(var s=aS(e),o=0,a=s.length,l=void 0;o<a;++o)l=s[o],aC.call(e,l)&&(r[l]=n.copier(e[l],n));return r}:function(e,n){var r=am(n.prototype);for(var i in n.cache.set(e,r),e)ak.call(e,i)&&(r[i]=n.copier(e[i],n));return r},regExp:function(e,n){var r=new n.Constructor(e.source,ay(e));return r.lastIndex=e.lastIndex,r},set:aI},aj=aR({},aQ,{array:function(e,n){var r=new n.Constructor;return n.cache.set(e,r),aP(e,r,n)},map:function(e,n){return aP(e,aM(e,n),n)},object:function(e,n){var r=am(n.prototype);return n.cache.set(e,r),aP(e,r,n)},set:function(e,n){return aP(e,aI(e,n),n)}});function aV(e){var n,r={Arguments:(n=aR({},aQ,e)).object,Array:n.array,ArrayBuffer:n.arrayBuffer,Blob:n.blob,Boolean:aN,DataView:n.dataView,Date:n.date,Error:n.error,Float32Array:n.arrayBuffer,Float64Array:n.arrayBuffer,Int8Array:n.arrayBuffer,Int16Array:n.arrayBuffer,Int32Array:n.arrayBuffer,Map:n.map,Number:aN,Object:n.object,Promise:aD,RegExp:n.regExp,Set:n.set,String:aN,WeakMap:aD,WeakSet:aD,Uint8Array:n.arrayBuffer,Uint8ClampedArray:n.arrayBuffer,Uint16Array:n.arrayBuffer,Uint32Array:n.arrayBuffer,Uint64Array:n.arrayBuffer},i=r.Array,s=r.Object;function o(e,n){if(n.prototype=n.Constructor=void 0,!e||"object"!=typeof e)return e;if(n.cache.has(e))return n.cache.get(e);if(n.prototype=aL(e),n.Constructor=n.prototype&&n.prototype.constructor,!n.Constructor||n.Constructor===Object)return s(e,n);if(a$(e))return i(e,n);var o=r[av(e)];return o?o(e,n):"function"==typeof e.then?e:s(e,n)}return function(e){return o(e,{Constructor:void 0,cache:ag(),copier:o,prototype:void 0})}}aV(aR({},aj,{}));var az=aV({});let aB=ah.BOUNDARY_MAP;ah.OVERFLOW_DIR;class aF extends G.A{constructor(e){super(Object.assign({},e)),this.previousY=void 0,this.isScrollMode=()=>{let{renderMode:e}=this.getProps();return"scroll"===e},this.getReversedItems=()=>{let{items:e}=this.getProps();return az(e).reverse()}}getOverflowItem(){let{items:e}=this.getProps(),{visibleState:n,overflow:r}=this.getStates();if(!this.isScrollMode())return r;let i=e.map(e=>{let{key:r}=e;return!!n.get(r)}),s=i.indexOf(!0),o=i.lastIndexOf(!0),a=[];return a[0]=s>=0?e.slice(0,s):[],a[1]=o>=0?e.slice(o+1,e.length):e.slice(),a}handleIntersect(e){let n=az(this.getState("visibleState")),r={};e.forEach(e=>{let i=en()(e,"target.dataset.scrollkey"),s=e.isIntersecting;r[i]=e,n.set(i,s)});let i=!1;for(let e of n.values())if(e){i=!0;break}let s=i,[o]=e,a=o.boundingClientRect.y;if(!s&&void 0!==this.previousY&&a!==this.previousY){this.previousY=a;return}this.previousY=a,this._adapter.updateVisibleState(n),this._adapter.notifyIntersect(r)}handleCollapseOverflow(){let{minVisibleItems:e,collapseFrom:n}=this.getProps(),{overflowWidth:r,containerWidth:i,pivot:s,overflowStatus:o}=this.getStates(),{items:a,onOverflow:l}=this.getProps(),h=r,c=0,u=!1;for(let e of this._adapter.getItemSizeMap().values()){if((h+=e)>i){u=!0;break}if(c===a.length-1){this._adapter.updateStates({overflowStatus:"normal",pivot:a.length-1,visible:a,overflow:[]});break}c++}if(u){let r=Math.max(e,c),i=n===aB.START,o=i?this.getReversedItems().slice(0,r).reverse():a.slice(0,r),h=i?this.getReversedItems().slice(r).reverse():a.slice(r);this._adapter.updateStates({overflowStatus:"overflowed",pivot:r,visible:o,overflow:h}),s!==r&&l(h);return}}}let aZ=ao.PREFIX,aq=ah.BOUNDARY_MAP,aW=ah.OVERFLOW_DIR,aX=ah.MODE_MAP;class aU extends ee.A{constructor(e){var n;super(e),n=this,this.scroller=null,this.spacer=null,this.isScrollMode=()=>{let{renderMode:e}=this.props;return e===aX.SCROLL},this.resize=function(){var e;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=null==(e=r[0])?void 0:e.target.clientWidth;n.setState({containerWidth:i,overflowStatus:"calculating"})},this.reintersect=e=>{this.foundation.handleIntersect(e)},this.mergeRef=(e,n,r)=>{this.itemRefs[r]=n,"function"==typeof e?e(n):"object"==typeof e&&e&&"current"in e&&(e.current=n)},this.renderOverflow=()=>{let e=this.foundation.getOverflowItem();return this.props.overflowRenderer(e)},this.getItemKey=(e,n)=>{let{itemKey:r}=this.props;return eY()(r)?r(e):en()(e,r||"key",n)},this.renderItemList=()=>{let{className:e,wrapperClassName:n,wrapperStyle:r,style:i,visibleItemRenderer:s,renderMode:o,collapseFrom:a}=this.props,{visible:l,overflowStatus:h}=this.state,c=this.renderOverflow();if(!this.isScrollMode()&&(Array.isArray(c)&&(c=z.createElement(z.Fragment,null,c)),z.isValidElement(c))){let e=z.cloneElement(c);c=z.createElement(rG,{onResize:e=>{let[n]=e;this.setState({overflowWidth:n.target.clientWidth,overflowStatus:"calculating"})}},z.createElement("div",{className:`${aZ}-overflow`},e))}let u=o===aX.SCROLL?(()=>{let e=[z.createElement("div",{className:F()(n,`${aZ}-scroll-wrapper`),ref:e=>{this.scroller=e},style:Object.assign({},r),key:`${aZ}-scroll-wrapper`},l.map(s).map(e=>{let{forwardRef:n,key:r}=e;return z.cloneElement(e,{ref:e=>this.mergeRef(n,e,r),"data-scrollkey":`${r}`,key:r})}))];return"both"===this.props.overflowRenderDirection?(e.unshift(c[0]),e.push(c[1])):"start"===this.props.overflowRenderDirection?(e.unshift(c[1]),e.unshift(c[0])):(e.push(c[0]),e.push(c[1])),e})():[a===aq.START?c:null,l.map((e,n)=>{let{key:r}=e,i=s(e,n),o=z.cloneElement(i);return z.createElement(rG,{key:null!=r?r:n,onResize:r=>{let[i]=r;return this.onItemResize(i,e,n)}},z.createElement("div",{key:null!=r?r:n,className:`${aZ}-item`},o))}),a===aq.END?c:null];return z.createElement("div",{className:F()(`${aZ}`,e),style:Object.assign(Object.assign({},i),o===aX.COLLAPSE?{maxWidth:"100%",visibility:"calculating"===h?"hidden":"visible"}:null)},...u)},this.onItemResize=(e,n,r)=>{let i=this.getItemKey(n,r),s=this.itemSizeMap.get(i);s?s!==e.target.clientWidth&&(this.itemSizeMap.set(i,e.target.clientWidth),this.setState({overflowStatus:"calculating"})):this.itemSizeMap.set(i,e.target.clientWidth);let{maxCount:o}=this.state;this.itemSizeMap.size===o&&this.setState({overflowStatus:"calculating"})},this.state={direction:aW.GROW,lastOverflowCount:0,overflow:[],visible:[],containerWidth:0,visibleState:new Map,itemSizeMap:new Map,overflowStatus:"calculating",pivot:-1,overflowWidth:0,maxCount:0},this.foundation=new aF(this.adapter),this.previousWidths=new Map,this.itemRefs={},this.itemSizeMap=new Map}static getDerivedStateFromProps(e,n){let{prevProps:r}=n,i={};i.prevProps=e;let s=n=>!r&&n in e||r&&!eJ()(r[n],e[n]);if(s("items")||s("style")){if(i.direction=aW.GROW,i.lastOverflowCount=0,i.maxCount=0,e.renderMode===aX.SCROLL)i.visible=e.items,i.overflow=[];else{let r=e.items.length;0!==Math.floor(n.containerWidth/4)&&(r=Math.min(r,Math.floor(n.containerWidth/4)));let s=e.collapseFrom===aq.START,o=s?az(e.items).reverse().slice(0,r):e.items.slice(0,r),a=s?az(e.items).reverse().slice(r):e.items.slice(r);i.visible=o,i.overflow=a,i.maxCount=r}i.pivot=-1,i.overflowStatus="calculating"}return i}get adapter(){return Object.assign(Object.assign({},super.adapter),{updateVisibleState:e=>{this.setState({visibleState:e},()=>{var n,r;null==(r=(n=this.props).onVisibleStateChange)||r.call(n,e)})},updateStates:e=>{this.setState(Object.assign({},e))},notifyIntersect:e=>{this.props.onIntersect&&this.props.onIntersect(e)},getItemSizeMap:()=>this.itemSizeMap})}componentDidUpdate(e,n){let r=e.items.map(e=>e.key),i=this.props.items.map(e=>e.key);eJ()(r,i)||(this.itemRefs={},this.setState({visibleState:new Map}));let{overflow:s,containerWidth:o,visible:a,overflowStatus:l}=this.state;this.isScrollMode()||"calculating"!==l||this.foundation.handleCollapseOverflow()}render(){let e=this.renderItemList(),{renderMode:n}=this.props;return n===aX.SCROLL?z.createElement(ac,{onIntersect:this.reintersect,root:this.scroller,threshold:this.props.threshold,items:this.itemRefs},e):z.createElement(rG,{onResize:this.resize},e)}}aU.__SemiComponentName__="OverflowList",aU.defaultProps=(0,es.bQ)(aU.__SemiComponentName__,{collapseFrom:"end",minVisibleItems:0,overflowRenderer:()=>null,renderMode:"collapse",threshold:.75,visibleItemRenderer:()=>null,onOverflow:()=>null,overflowRenderDirection:"both"}),aU.propTypes={className:q().string,collapseFrom:q().oneOf(ah.BOUNDARY_SET),direction:q().oneOf(ah.POSITION_SET),items:q().array,minVisibleItems:q().number,onIntersect:q().func,onOverflow:q().func,overflowRenderer:q().func,renderMode:q().oneOf(ah.MODE_SET),style:q().object,threshold:q().number,visibleItemRenderer:q().func,wrapperClassName:q().string,wrapperStyle:q().object,collapseMask:q().object,overflowRenderDirection:q().string};let aY={PREFIX:`${W._}-space`},aG="loose",aH="medium",aK="tight",aJ=e=>{let n=[];return z.Children.forEach(e,e=>{null!=e&&(Array.isArray(e)?n=n.concat(aJ(e)):(0,z.isValidElement)(e)&&e.type&&"Symbol(react.fragment)"===e.type.toString()&&e.props?n=n.concat(aJ(e.props.children)):n.push(e))}),n};var a0=r(81783);let a1=aY.PREFIX;class a2 extends z.PureComponent{render(){let{children:e=null,style:n,className:r,spacing:i,wrap:s,align:o,vertical:a}=this.props,l=Object.assign({},n),h="",c="";eg()(i)?(h=i,c=i):ey()(i)?(l.rowGap=i,l.columnGap=i):rT()(i)&&(eg()(i[0])?h=i[0]:ey()(i[0])&&(l.columnGap=`${i[0]}px`),eg()(i[1])?c=i[1]:ey()(i[1])&&(l.rowGap=`${i[1]}px`));let u=F()(a1,r,{[`${a1}-align-${o}`]:o,[`${a1}-vertical`]:a,[`${a1}-horizontal`]:!a,[`${a1}-wrap`]:(!s||!a)&&s,[`${a1}-tight-horizontal`]:h===aK,[`${a1}-tight-vertical`]:c===aK,[`${a1}-medium-horizontal`]:h===aH,[`${a1}-medium-vertical`]:c===aH,[`${a1}-loose-horizontal`]:h===aG,[`${a1}-loose-vertical`]:c===aG}),d=aJ(e),p=(0,a0.A)(this.props);return z.createElement("div",Object.assign({},p,{className:u,style:l,"x-semi-prop":"children"}),d)}}a2.propTypes={wrap:q().bool,align:q().oneOf(["start","end","center","baseline"]),vertical:q().bool,spacing:q().oneOfType([q().string,q().number,q().array]),children:q().node,style:q().object,className:q().string},a2.defaultProps={vertical:!1,wrap:!1,spacing:"tight",align:"center"};class a5 extends z.PureComponent{render(){return z.createElement(r0,Object.assign({component:"span"},this.props))}}a5.propTypes={copyable:q().oneOfType([q().object,q().bool]),delete:q().bool,disabled:q().bool,icon:q().oneOfType([q().node,q().string]),ellipsis:q().oneOfType([q().object,q().bool]),mark:q().bool,underline:q().bool,link:q().oneOfType([q().object,q().bool]),strong:q().bool,type:q().oneOf(rD),size:q().oneOf(rI),style:q().object,className:q().string,code:q().bool,component:q().string,weight:q().number},a5.defaultProps={copyable:!1,delete:!1,disabled:!1,icon:"",ellipsis:!1,mark:!1,underline:!1,strong:!1,link:!1,type:"primary",style:{},size:"normal",className:""};var a4=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};let a3=(e,n,r,i)=>{let s=e.props;if(!e||!s)return null;let o=Object.assign(Object.assign({value:s.value,label:s.label||s.children||s.value,_show:!0,_selected:!1,_scrollIndex:r},s),{_parentGroup:n});return o._keyInJsx=i||e.key,o},a6=e=>{let{index:n,data:r,style:i}=e,{visibleOptions:s,renderOption:o}=r;return o(s[n],n,i)},a9={PREFIX:`${W._}-highlight`};class a7 extends G.A{constructor(e){super(Object.assign({},e)),this.findAll=e=>{let{autoEscape:n=!0,caseSensitive:r=!1,searchWords:i,sourceString:s}=e;eg()(i)&&(i=[i]);let o=this.findChunks({autoEscape:n,caseSensitive:r,searchWords:i,sourceString:s}),a=this.combineChunks({chunks:o});return this.fillInChunks({chunksToHighlight:a,totalLength:s?s.length:0})},this.findChunks=e=>{let{autoEscape:n,caseSensitive:r,searchWords:i,sourceString:s}=e;return i.map(e=>"string"==typeof e?{text:e}:e).filter(e=>e.text).reduce((e,i)=>{let o,a=i.text;n&&(a=a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"));let l=new RegExp(a,r?"g":"gi");for(;o=l.exec(s);){let n=o.index,r=l.lastIndex;r>n&&e.push({highlight:!0,start:n,end:r,className:i.className,style:i.style}),o.index===l.lastIndex&&l.lastIndex++}return e},[])},this.combineChunks=e=>{let{chunks:n}=e;return n.sort((e,n)=>e.start-n.start).reduce((e,n)=>{if(0===e.length)return[n];{let r=e.pop();if(n.start<=r.end){let i=Math.max(r.end,n.end);e.push({highlight:!0,start:r.start,end:i,className:r.className||n.className,style:Object.assign(Object.assign({},r.style),n.style)})}else e.push(r,n);return e}},[])},this.fillInChunks=e=>{let{chunksToHighlight:n,totalLength:r}=e,i=[],s=(e,n,r,s,o)=>{n-e>0&&i.push({start:e,end:n,highlight:r,className:s,style:o})};if(0===n.length)s(0,r,!1);else{let e=0;n.forEach(n=>{s(e,n.start,!1),s(n.start,n.end,!0,n.className,n.style),e=n.end}),s(e,r,!1)}return i}}}let a8=a9.PREFIX;class le extends z.PureComponent{constructor(){super(...arguments),this.getHighLightTextHTML=e=>{let{sourceString:n="",searchWords:r=[],option:i={autoEscape:!0,caseSensitive:!1}}=e,s=new a7().findAll(Object.assign({sourceString:n,searchWords:r},i)),o=i.highlightTag||"mark",a=i.highlightClassName||"",l=i.highlightStyle||{};return s.map((e,r)=>{let{end:i,start:s,highlight:h,style:c,className:u}=e,d=n.substr(s,i-s);return h?z.createElement(o,{style:Object.assign(Object.assign({},l),c),className:`${a} ${u||""}`.trim(),key:d+r},d):d})}}render(){let{searchWords:e,sourceString:n,component:r,highlightClassName:i,highlightStyle:s,caseSensitive:o,autoEscape:a}=this.props,l=F()({[`${a8}-tag`]:!0},i);return this.getHighLightTextHTML({sourceString:n,searchWords:e,option:{highlightTag:r,highlightClassName:l,highlightStyle:s,caseSensitive:o,autoEscape:a}})}}le.propTypes={style:q().object,className:q().string,autoEscape:q().bool,caseSensitive:q().bool,sourceString:q().string,searchWords:q().arrayOf(q().string),highlightStyle:q().object,highlightClassName:q().string,component:q().string},le.defaultProps={component:"mark",autoEscape:!0,caseSensitive:!1,sourceString:""};var lt=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};class ln extends z.PureComponent{onClick(e,n){var{value:r,label:i,children:s}=e,o=lt(e,["value","label","children"]);let{props:a}=this;a.disabled||a.onSelect(Object.assign(Object.assign({},o),{value:r,label:i||s}),n)}renderOptionContent(e){let{config:n,children:r,inputValue:i,prefixCls:s}=e;return eg()(r)&&i?z.createElement(le,{searchWords:n.searchWords,sourceString:n.sourceString,highlightClassName:n.highlightClassName}):r}render(){let e=this.props,{children:n,disabled:r,value:i,selected:s,label:o,empty:a,emptyContent:l,onSelect:h,focused:c,showTick:u,className:d,style:p,onMouseEnter:f,prefixCls:g,renderOptionItem:m,inputValue:y,semiOptionId:O}=e,b=lt(e,["children","disabled","value","selected","label","empty","emptyContent","onSelect","focused","showTick","className","style","onMouseEnter","prefixCls","renderOptionItem","inputValue","semiOptionId"]),x=F()(g,{[`${g}-disabled`]:r,[`${g}-selected`]:s,[`${g}-focused`]:c,[`${g}-empty`]:a,[d]:d}),w=F()([`${g}-icon`]);if(a)return null===l?null:z.createElement(n$,{componentName:"Select"},e=>z.createElement("div",{className:x,"x-semi-prop":"emptyContent"},l||e.emptyText));if("function"==typeof m){let e=F()(d,{[`${g}-custom`]:!0,[`${g}-custom-selected`]:s});return m(Object.assign({disabled:r,focused:c,selected:s,style:p,label:o,value:i,inputValue:y,onMouseEnter:e=>f(e),onClick:e=>this.onClick(Object.assign({value:i,label:o,children:n},b),e),className:e},b))}let S={searchWords:[y],sourceString:n,highlightClassName:`${g}-keyword`};return z.createElement("div",Object.assign({className:x,onClick:e=>{this.onClick(Object.assign({value:i,label:o,children:n},b),e)},onMouseEnter:e=>f&&f(e),role:"option",id:O,"aria-selected":s?"true":"false","aria-disabled":r?"true":"false",style:p},(0,a0.A)(b)),u?z.createElement("div",{className:w},z.createElement(nQ,null)):null,eg()(n)?z.createElement("div",{className:`${g}-text`},this.renderOptionContent({children:n,config:S,inputValue:y,prefixCls:g})):n)}}ln.isSelectOption=!0,ln.propTypes={children:q().node,disabled:q().bool,value:q().oneOfType([q().string,q().number]),selected:q().bool,label:q().node,empty:q().bool,emptyContent:q().node,onSelect:q().func,focused:q().bool,showTick:q().bool,className:q().string,style:q().object,onMouseEnter:q().func,prefixCls:q().string,renderOptionItem:q().func,inputValue:q().string},ln.defaultProps={prefixCls:o8.PREFIX_OPTION};var lr=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};let li=o8.PREFIX_GROUP;class ls extends ee.A{render(){let e=this.props,{label:n,className:r,style:i}=e,s=lr(e,["label","className","style"]),o=F()(r,{[li]:!0});return n||"number"==typeof n?z.createElement("div",Object.assign({className:o,style:i},this.getDataAttr(s)),n):null}}ls.isSelectOptionGroup=!0,ls.propTypes={children:q().oneOfType([q().array,q().node]),label:q().node,className:q().string,style:q().object};let lo=(0,nL.T)(function(e){return z.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),z.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.5 2a8.5 8.5 0 1 0 4.86 15.48l4.08 4.08a1.5 1.5 0 1 0 2.12-2.12l-4.08-4.08A8.5 8.5 0 0 0 10.5 2ZM5 10.5a5.5 5.5 0 1 1 11 0 5.5 5.5 0 0 1-11 0Z",fill:"currentColor"}))},"search");var la=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};let ll=o8.PREFIX;class lh extends ee.A{constructor(e){super(e),this.setOptionContainerEl=e=>this.optionContainerEl={current:e},this.handleInputChange=(e,n)=>this.foundation.handleInputChange(e,n),this.getTagItem=(e,n,r)=>{let{size:i,disabled:s}=this.props,o=e[0],{value:a}=e[1],l=e[1].disabled||s,h=(e,n)=>{n&&"function"==typeof n.preventDefault&&n.preventDefault(),this.foundation.removeTag({label:o,value:a})},{content:c,isRenderInTag:u}=r(e[1],{index:n,disabled:l,onClose:h});return u?z.createElement(rC,Object.assign({},{disabled:l,closable:!l,onClose:h},{color:"white",size:i||"large",key:a,tabIndex:-1}),c):z.createElement(z.Fragment,{key:a},c)},this.state={isOpen:!1,isFocus:!1,options:[],selections:new Map,dropdownMinWidth:null,optionKey:0,inputValue:"",showInput:!1,focusIndex:e.defaultActiveFirstOption?0:-1,keyboardEventSet:{},optionGroups:[],isHovering:!1,isFocusInContainer:!1,isFullTags:!1,overflowItemCount:0},this.selectOptionListID="",this.selectID="",this.virtualizeListRef=z.createRef(),this.inputRef=z.createRef(),this.dropdownInputRef=z.createRef(),this.triggerRef=z.createRef(),this.optionsRef=z.createRef(),this.optionContainerEl=z.createRef(),this.clickOutsideHandler=null,this.onSelect=this.onSelect.bind(this),this.onClear=this.onClear.bind(this),this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.renderOption=this.renderOption.bind(this),this.onKeyPress=this.onKeyPress.bind(this),this.eventManager=new t9,this.foundation=new ar(this.adapter)}get adapter(){var e=this;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},super.adapter),{registerKeyDown:e=>{this.setState({keyboardEventSet:{onKeyDown:e}})},unregisterKeyDown:()=>{this.setState({keyboardEventSet:{}})},updateFocusIndex:e=>{this.setState({focusIndex:e})},scrollToFocusOption:()=>{}}),{updateInputValue:e=>{this.setState({inputValue:e})},toggleInputShow:(e,n)=>{this.setState({showInput:e},()=>{n()})},focusInput:()=>{let{preventScroll:e}=this.props;this.inputRef&&this.inputRef.current&&this.inputRef.current.focus({preventScroll:e})},focusDropdownInput:()=>{let{preventScroll:e}=this.props;this.dropdownInputRef&&this.dropdownInputRef.current&&this.dropdownInputRef.current.focus({preventScroll:e})}}),{notifyMaxLimit:e=>this.props.onExceed(e),getMaxLimit:()=>this.props.max,registerClickOutsideHandler:e=>{let n=n=>{let r=this.optionsRef&&this.optionsRef.current,i=this.triggerRef&&this.triggerRef.current,s=e2.findDOMNode(r),o=n.target,a=n.composedPath&&n.composedPath()||[o];s&&s.contains(o)||i&&i.contains(o)||a.includes(i)||a.includes(s)||e(n)};this.clickOutsideHandler=n,document.addEventListener("mousedown",n,!1)},unregisterClickOutsideHandler:()=>{this.clickOutsideHandler&&(document.removeEventListener("mousedown",this.clickOutsideHandler,!1),this.clickOutsideHandler=null)},rePositionDropdown:()=>{let{optionKey:e}=this.state;e+=1,this.setState({optionKey:e})},notifyDeselect:(e,n)=>{delete n._parentGroup,this.props.onDeselect(e,n)}}),{on:(e,n)=>this.eventManager.on(e,n),off:e=>this.eventManager.off(e),once:(e,n)=>this.eventManager.once(e,n),emit:e=>this.eventManager.emit(e),getOptionsFromChildren:function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.children,r=[],i=[],{optionList:s}=e.props;if(s&&s.length)i=s.map((e,n)=>Object.assign({_show:!0,_selected:!1,_scrollIndex:n},e)),r[0]={children:i,label:""};else{let e=(e=>{let n=[],r=[],i={label:"",children:[],_show:!1},s=z.Children.toArray(e);s=s.filter(e=>e&&e.props);let o="",a=-1;return s.forEach(e=>{if(e.type.isSelectOption){o="option";let n=a3(e,void 0,++a);i.children.push(n),r.push(n)}else if(e.type.isSelectOptionGroup){o="group";let i=e.props,{children:s}=i,l=a4(i,["children"]);l.key=e.key;let h=[];Array.isArray(s)?h=s.map(e=>e.key):h.push(s.key);let c=(s=z.Children.toArray(s)).map((n,r)=>{let i=n.key;return null===h[r]&&(i=e.key+""+n.key),a3(n,l,++a,i)}),u=Object.assign(Object.assign({},e.props),{children:c,key:e.key});n.push(u),r=r.concat(c)}else H(!0,"[Semi Select] The children of `Select` should be `Select.Option` or `Select.OptionGroup`")}),"option"===o&&(n=[i]),{optionGroups:n,options:r}})(n);r=e.optionGroups,i=e.options}return e.setState({optionGroups:r}),i},updateOptions:e=>{this.setState({options:e})},openMenu:e=>{this.setState({isOpen:!0},()=>{null==e||e()})},closeMenu:()=>{this.setState({isOpen:!1})},getTriggerWidth:()=>{let e=this.triggerRef.current;return e&&e.getBoundingClientRect().width},setOptionWrapperWidth:e=>{this.setState({dropdownMinWidth:e})},updateSelection:e=>{this.setState({selections:e})},getSelections:()=>new Map(this.state.selections),notifyChange:e=>{this.props.onChange(e)},notifySelect:(e,n)=>{delete n._parentGroup,this.props.onSelect(e,n)},notifyDropdownVisibleChange:e=>{this.props.onDropdownVisibleChange(e)},notifySearch:(e,n)=>{this.props.onSearch(e,n)},notifyCreate:e=>{this.props.onCreate(e)},notifyMouseEnter:e=>{this.props.onMouseEnter(e)},notifyMouseLeave:e=>{this.props.onMouseLeave(e)},notifyFocus:e=>{this.props.onFocus(e)},notifyBlur:e=>{this.props.onBlur(e)},notifyClear:()=>{this.props.onClear()},notifyListScroll:e=>{this.props.onListScroll(e)},updateHovering:e=>{this.setState({isHovering:e})},updateFocusState:e=>{this.setState({isFocus:e})},updateOverflowItemCount:e=>{this.setState({overflowItemCount:e})},focusTrigger:()=>{try{let{preventScroll:e}=this.props;this.triggerRef.current.focus({preventScroll:e})}catch(e){}},getContainer:()=>this.optionContainerEl&&this.optionContainerEl.current,getFocusableElements:e=>(0,es.iq)(e),getActiveElement:()=>(0,es.bq)(),setIsFocusInContainer:e=>{this.setState({isFocusInContainer:e})},getIsFocusInContainer:()=>this.state.isFocusInContainer,updateScrollTop:e=>{let n;"renderOptionItem"in this.props?(n=`.${ll}-option-custom-selected`,void 0!==e&&(n=`.${ll}-option-custom:nth-child(${e+1})`)):(n=`.${ll}-option-selected`,void 0!==e&&(n=`.${ll}-option:nth-child(${e+1})`));let r=document.querySelector(`#${ll}-${this.selectOptionListID} ${n}`);if(Array.isArray(r)&&(r=r[0]),r){let e=r.parentNode;e.scrollTop=r.offsetTop-e.offsetTop-e.clientHeight/2+r.clientHeight/2}}})}componentDidMount(){this.foundation.init(),this.selectOptionListID=ea(),this.selectID=this.props.id||ea()}componentWillUnmount(){this.foundation.destroy()}componentDidUpdate(e,n){let r=z.Children.toArray(e.children).map(e=>e.key),i=z.Children.toArray(this.props.children).map(e=>e.key),s=!1;eJ()(r,i)&&eJ()(e.optionList,this.props.optionList)||(s=!0,this.foundation.handleOptionListChange()),(!eJ()(this.props.value,e.value)||s)&&("value"in this.props?this.foundation.handleValueChange(this.props.value):this.foundation.handleOptionListChangeHadDefaultValue())}renderTriggerInput(){let{size:e,multiple:n,disabled:r,inputProps:i,filter:s}=this.props,o=en()(i,"className"),a=F()(`${ll}-input`,{[`${ll}-input-single`]:!n,[`${ll}-input-multiple`]:n},o),{inputValue:l,focusIndex:h}=this.state,c=Object.assign({value:l,disabled:r,className:a,onChange:this.handleInputChange},i);return n&&(c.style={width:l?`${16*l.length}px`:"2px"}),z.createElement(t2.A,Object.assign({ref:this.inputRef,size:e,"aria-activedescendant":-1!==h?`${this.selectID}-option-${h}`:"",onFocus:e=>{n&&s&&this.setState({isFocus:!0}),e.stopPropagation()},onBlur:e=>this.foundation.handleInputBlur(e)},c))}renderDropdownInput(){let{size:e,multiple:n,disabled:r,inputProps:i,filter:s,searchPosition:o,searchPlaceholder:a}=this.props,{inputValue:l,focusIndex:h}=this.state,c=F()(`${ll}-dropdown-search-wrapper`,{}),u=en()(i,"className"),d=Object.assign(Object.assign({value:l,disabled:r,className:F()(`${ll}-dropdown-input`,{[`${ll}-dropdown-input-single`]:!n,[`${ll}-dropdown-input-multiple`]:n},u),onChange:this.handleInputChange,placeholder:a,showClear:!0},i),{onKeyDown:e=>this.foundation._handleKeyDown(e)});return z.createElement("div",{className:c},z.createElement(t2.A,Object.assign({ref:this.dropdownInputRef,prefix:z.createElement(lo,null),"aria-activedescendant":-1!==h?`${this.selectID}-option-${h}`:""},d)))}close(){this.foundation.close()}open(){this.foundation.open()}clearInput(){this.foundation.clearInput()}selectAll(){this.foundation.selectAll()}deselectAll(){this.foundation.clearSelected()}focus(){this.foundation.focus()}onSelect(e,n,r){this.foundation.onSelect(e,n,r)}onClear(e){e.nativeEvent.stopImmediatePropagation(),this.foundation.handleClearClick(e)}search(e,n){this.handleInputChange(e,n)}renderEmpty(){return z.createElement(ln,{empty:!0,emptyContent:this.props.emptyContent})}renderLoading(){let e=`${ll}-loading-wrapper`;return z.createElement("div",{className:e},z.createElement(nF,null))}renderOption(e,n,r){let i,{focusIndex:s,inputValue:o}=this.state,{renderOptionItem:a}=this.props,l=n===s,h=r||{};return e.style&&(h=Object.assign(Object.assign({},h),e.style)),e._inputCreateOnly?i=this.renderCreateOption(e,l,n,r):("key"in e&&(e._keyInOptionList=e.key),i=z.createElement(ln,Object.assign({showTick:!0},e,{selected:e._selected,onSelect:(e,r)=>this.onSelect(e,n,r),focused:l,onMouseEnter:()=>this.onOptionHover(n),style:h,key:e._keyInOptionList||e._keyInJsx||e.label+e.value+n,renderOptionItem:a,inputValue:o,semiOptionId:`${this.selectID}-option-${n}`}),e.label)),i}renderCreateOption(e,n,r,i){let{renderCreateItem:s}=this.props;if(void 0===s)return z.createElement(ln,Object.assign({key:e.key||e.label+e.value,onSelect:(e,n)=>this.onSelect(e,r,n),onMouseEnter:()=>this.onOptionHover(r),showTick:!0},e,{focused:n,style:i}),z.createElement(n$,{componentName:"Select"},n=>z.createElement(z.Fragment,null,z.createElement("span",{className:`${ll}-create-tips`},n.createText),e.value)));let o=s(e.value,n,i);return z.createElement("div",{role:"button","aria-label":"Use the input box to create an optional item",onClick:n=>this.onSelect(e,r,n),key:e.key||e.label},o)}onOptionHover(e){this.foundation.handleOptionMouseEnter(e)}renderWithGroup(e){let n=[],r=new Map;return e.forEach((e,i)=>{let s=e._parentGroup,o=this.renderOption(e,i);if(s&&!r.has(s.label)){let e="string"==typeof s.label||"number"==typeof s.label?s.label:s.key,i=z.createElement(ls,Object.assign({},s,{key:e}));r.set(s.label,!0),n.push(i)}n.push(o)}),n}renderVirtualizeList(e){let{virtualize:n}=this.props,{direction:r}=this.context,{height:i,width:s,itemSize:o}=n;return z.createElement(rd,{ref:this.virtualizeListRef,height:i||270,itemCount:e.length,itemSize:o,itemData:{visibleOptions:e,renderOption:this.renderOption},width:s||"100%",style:{direction:r}},a6)}renderOptions(e){let{dropdownMinWidth:n,options:r,selections:i}=this.state,{maxHeight:s,dropdownClassName:o,dropdownStyle:a,outerTopSlot:l,innerTopSlot:h,outerBottomSlot:c,innerBottomSlot:u,loading:d,virtualize:p,multiple:f,emptyContent:g,searchPosition:m,filter:y}=this.props,O=r.filter(e=>e._show),b=this.renderWithGroup(O);p&&(b=this.renderVirtualizeList(O));let x=Object.assign({minWidth:n},a),w=F()({[`${ll}-option-list`]:!0,[`${ll}-option-list-chosen`]:i.size}),S=!r.length||!r.some(e=>e._show);return z.createElement("div",{id:`${ll}-${this.selectOptionListID}`,className:F()({[`${ll}-option-list-wrapper`]:!(S&&null===g)},o),style:x,ref:this.setOptionContainerEl,onKeyDown:e=>this.foundation.handleContainerKeyDown(e)},l?z.createElement("div",{className:`${ll}-option-list-outer-top-slot`,onMouseEnter:()=>this.foundation.handleSlotMouseEnter()},l):null,m===at&&y?this.renderDropdownInput():null,z.createElement("div",{style:{maxHeight:`${s}px`},className:w,role:"listbox","aria-multiselectable":f,onScroll:e=>this.foundation.handleListScroll(e)},h?z.createElement("div",{className:`${ll}-option-list-inner-top-slot`,onMouseEnter:()=>this.foundation.handleSlotMouseEnter()},h):null,d?this.renderLoading():S?this.renderEmpty():b,u?z.createElement("div",{className:`${ll}-option-list-inner-bottom-slot`,onMouseEnter:()=>this.foundation.handleSlotMouseEnter()},u):null),c?z.createElement("div",{className:`${ll}-option-list-outer-bottom-slot`,onMouseEnter:()=>this.foundation.handleSlotMouseEnter()},c):null)}renderSingleSelection(e,n){let{renderSelectedItem:r,searchPosition:i}=this.props,{placeholder:s}=this.props,{showInput:o,inputValue:a}=this.state,l="",h=[...e];void 0===r&&(r=e=>e.label),h.length&&(l=r(h[0][1]));let c=i===ae,u=F()({[`${ll}-selection-text`]:!0,[`${ll}-selection-placeholder`]:!l&&0!==l,[`${ll}-selection-text-hide`]:a&&o&&c,[`${ll}-selection-text-inactive`]:!a&&o&&c}),d=`${ll}-content-wrapper`;return z.createElement(z.Fragment,null,z.createElement("div",{className:d},z.createElement("span",{className:u,"x-semi-prop":"placeholder"},l||0===l?l:s),n&&o&&c?this.renderTriggerInput():null))}renderTag(e,n,r){let{size:i,disabled:s}=this.props,{renderSelectedItem:o}=this.props,a=e[0],{value:l}=e[1],h=e[1].disabled||s,c=(e,n)=>{n&&"function"==typeof n.preventDefault&&n.preventDefault(),this.foundation.removeTag({label:a,value:l})};void 0===o&&(o=e=>({isRenderInTag:!0,content:e.label}));let{content:u,isRenderInTag:d}=o(e[1],{index:n,disabled:h,onClose:c}),p=r&&!eY()(this.props.renderSelectedItem)?z.createElement(a5,{size:"small",ellipsis:{rows:1,showTooltip:{type:"popover",opts:{style:{width:"auto",fontSize:12}}}}},u):u;return d?z.createElement(rC,Object.assign({},{disabled:h,closable:!h,onClose:c},{color:"white",size:i||"large",key:l,style:{maxWidth:"100%"}}),p):z.createElement(z.Fragment,{key:l},p)}renderNTag(e,n){let{size:r,showRestTagsPopover:i,restTagsPopoverProps:s}=this.props,o=z.createElement(rC,{closable:!1,size:r||"large",color:"grey",className:`${ll}-content-wrapper-collapse-tag`,key:`_+${e}`,style:{marginRight:0,flexShrink:0}},"+",e);return i&&(o=z.createElement(nx,Object.assign({showArrow:!0,content:z.createElement(a2,{spacing:2,wrap:!0,style:{maxWidth:"400px"}},n.map((e,n)=>this.renderTag(e,n))),trigger:"hover",position:"top",autoAdjustOverflow:!0},s,{key:`_+${e}_Popover`}),o)),o}renderOverflow(e,n){return e.length&&e[0]?this.renderTag(e[0],n,!0):null}handleOverflow(e){let{overflowItemCount:n,selections:r}=this.state,{maxTagCount:i}=this.props,s=r.size-i>0?r.size-i+e.length-1:e.length-1;n!==s&&this.foundation.updateOverflowItemCount(r.size,s)}renderCollapsedTags(e,n){let{overflowItemCount:r}=this.state,i="number"==typeof n?e.slice(0,n):e;return z.createElement("div",{className:`${ll}-content-wrapper-collapse`},z.createElement(aU,{items:i,key:String(e.length),overflowRenderer:e=>this.renderOverflow(e,n-1),onOverflow:e=>this.handleOverflow(e),visibleItemRenderer:(e,n)=>this.renderTag(e,n)}),r>0&&this.renderNTag(r,e.slice(e.length-r)))}renderOneLineTags(e,n){let r,{renderSelectedItem:i}=this.props,{showRestTagsPopover:s,restTagsPopoverProps:o,maxTagCount:a}=this.props,{isFullTags:l}=this.state;if(void 0===i&&(i=e=>({isRenderInTag:!0,content:e.label})),s){let h=(l?e:e.slice(0,a)).map((e,n)=>this.getTagItem(e,n,i));r=z.createElement(as,{tagList:h,maxTagCount:n,restCount:l?void 0:e.length-a,size:"large",mode:"custom",showPopover:s,popoverProps:o,onPlusNMouseEnter:()=>{this.foundation.updateIsFullTags()}})}else{let s=e.slice(0,a).map((e,n)=>this.getTagItem(e,n,i));r=z.createElement(as,{tagList:s,maxTagCount:n,restCount:e.length-a,size:"large",mode:"custom"})}return r}renderMultipleSelection(e,n){let{renderSelectedItem:r,searchPosition:i}=this.props,{placeholder:s,maxTagCount:o,expandRestTagsOnClick:a,ellipsisTrigger:l}=this.props,{inputValue:h,isOpen:c}=this.state,u=[...e];void 0===r&&(r=e=>({isRenderInTag:!0,content:e.label}));let d=F()({[`${ll}-content-wrapper`]:!0,[`${ll}-content-wrapper-one-line`]:o&&!c,[`${ll}-content-wrapper-empty`]:!u.length}),p=F()({[`${ll}-selection-text`]:!0,[`${ll}-selection-placeholder`]:!u.length,[`${ll}-selection-text-hide`]:u&&u.length}),f=s&&!h?z.createElement("span",{className:p},s):null,g=u.length>o?o:void 0,m=!o,y=l?this.renderCollapsedTags(u,g):this.renderOneLineTags(u,g),O=m||a&&c?u.map((e,n)=>this.renderTag(e,n)):y;return z.createElement(z.Fragment,null,z.createElement("div",{className:d},u&&u.length?O:f,n&&i===ae?this.renderTriggerInput():null))}onMouseEnter(e){this.foundation.handleMouseEnter(e)}onMouseLeave(e){this.foundation.handleMouseLeave(e)}onKeyPress(e){this.foundation.handleKeyPress(e)}handlePopoverVisibleChange(e){let{virtualize:n}=this.props,{selections:r}=this.state;if(e)if(n){let e=-1;if(r.forEach(n=>{let r=en()(n,"_scrollIndex");ey()(r)&&r>=0&&(e=-1!==e&&e<r?e:r)}),-1!==e)try{this.virtualizeListRef.current.scrollToItem(e,"center")}catch(e){}}else this.foundation.updateScrollTop()}renderSuffix(){let{suffix:e}=this.props,n=F()({[`${ll}-suffix`]:!0,[`${ll}-suffix-text`]:e&&eg()(e),[`${ll}-suffix-icon`]:(0,es.uR)(e)});return z.createElement("div",{className:n,"x-semi-prop":"suffix"},e)}renderPrefix(){let{prefix:e,insetLabel:n,insetLabelId:r}=this.props,i=e||n,s=F()({[`${ll}-prefix`]:!0,[`${ll}-inset-label`]:n,[`${ll}-prefix-text`]:i&&eg()(i),[`${ll}-prefix-icon`]:(0,es.uR)(i)});return z.createElement("div",{className:s,id:r,"x-semi-prop":"prefix,insetLabel"},i)}renderSelection(){let e=this.props,{disabled:n,multiple:r,filter:i,style:s,id:o,size:a,className:l,validateStatus:h,showArrow:c,suffix:u,prefix:d,insetLabel:p,placeholder:f,triggerRender:g,arrowIcon:m,clearIcon:y,borderless:O}=e,b=la(e,["disabled","multiple","filter","style","id","size","className","validateStatus","showArrow","suffix","prefix","insetLabel","placeholder","triggerRender","arrowIcon","clearIcon","borderless"]),{selections:x,isOpen:w,keyboardEventSet:S,inputValue:_,isHovering:k,isFocus:C,showInput:E,focusIndex:T}=this.state,P="function"==typeof g,A=!!i,M=P?F()(l):F()(ll,l,{[`${ll}-borderless`]:O,[`${ll}-open`]:w,[`${ll}-focus`]:C,[`${ll}-disabled`]:n,[`${ll}-single`]:!r,[`${ll}-multiple`]:r,[`${ll}-filterable`]:A,[`${ll}-small`]:"small"===a,[`${ll}-large`]:"large"===a,[`${ll}-error`]:"error"===h,[`${ll}-warning`]:"warning"===h,[`${ll}-no-arrow`]:!c,[`${ll}-with-prefix`]:d||p,[`${ll}-with-suffix`]:u}),N=this.props.showClear&&(x.size||_)&&!n&&(k||w),D=c?z.createElement("div",{className:`${ll}-arrow`,"x-semi-prop":"arrowIcon"},m):z.createElement("div",{className:`${ll}-arrow-empty`}),I=y||z.createElement(t0.A,null),$=P?z.createElement(ry,{value:Array.from(x.values()),inputValue:_,onChange:this.handleInputChange,onSearch:this.handleInputChange,onRemove:e=>this.foundation.removeTag(e),onClear:this.onClear,disabled:n,triggerRender:g,placeholder:f,componentName:"Select",componentProps:Object.assign({},this.props)}):[z.createElement(z.Fragment,{key:"prefix"},d||p?this.renderPrefix():null),z.createElement(z.Fragment,{key:"selection"},z.createElement("div",{className:F()(`${ll}-selection`)},r?this.renderMultipleSelection(x,A):this.renderSingleSelection(x,A))),z.createElement(z.Fragment,{key:"suffix"},u?this.renderSuffix():null),z.createElement(z.Fragment,{key:"clearicon"},N?z.createElement("div",{className:F()(`${ll}-clear`),onClick:this.onClear},I):D)],R=n||A&&E||A&&r?-1:0;return z.createElement("div",Object.assign({role:"combobox","aria-disabled":n,"aria-expanded":w,"aria-controls":`${ll}-${this.selectOptionListID}`,"aria-haspopup":"listbox","aria-label":x.size?"selected":"","aria-invalid":this.props["aria-invalid"],"aria-errormessage":this.props["aria-errormessage"],"aria-labelledby":this.props["aria-labelledby"],"aria-describedby":this.props["aria-describedby"],"aria-required":this.props["aria-required"],className:M,ref:e=>this.triggerRef.current=e,onClick:e=>this.foundation.handleClick(e),style:s,id:this.selectID,tabIndex:R,"aria-activedescendant":-1!==T?`${this.selectID}-option-${T}`:"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onFocus:e=>this.foundation.handleTriggerFocus(e),onBlur:e=>this.foundation.handleTriggerBlur(e),onKeyPress:this.onKeyPress},S,this.getDataAttr(b)),$)}render(){let{direction:e}=this.context,{children:n,position:r="rtl"===e?"bottomRight":"bottomLeft",zIndex:i,getPopupContainer:s,motion:o,autoAdjustOverflow:a,mouseLeaveDelay:l,mouseEnterDelay:h,spacing:c,stopPropagation:u,dropdownMargin:d}=this.props,{isOpen:p,optionKey:f}=this.state,g=this.renderSelection();return z.createElement(nx,{getPopupContainer:s,motion:o,margin:d,autoAdjustOverflow:a,mouseLeaveDelay:l,mouseEnterDelay:h,zIndex:i,ref:this.optionsRef,content:()=>this.renderOptions(n),visible:p,trigger:"custom",rePosKey:f,position:r,spacing:c,stopPropagation:u,disableArrowKeyDown:!0,onVisibleChange:e=>this.handlePopoverVisibleChange(e),afterClose:()=>this.foundation.handlePopoverClose()},g)}}lh.contextType=eO,lh.Option=ln,lh.OptGroup=ls,lh.propTypes={"aria-describedby":q().string,"aria-errormessage":q().string,"aria-invalid":q().bool,"aria-labelledby":q().string,"aria-required":q().bool,autoFocus:q().bool,autoClearSearchValue:q().bool,borderless:q().bool,children:q().node,clearIcon:q().node,defaultValue:q().oneOfType([q().string,q().number,q().array,q().object]),ellipsisTrigger:q().bool,value:q().oneOfType([q().string,q().number,q().array,q().object]),placeholder:q().node,onChange:q().func,multiple:q().bool,filter:q().oneOfType([q().func,q().bool]),max:q().number,maxTagCount:q().number,maxHeight:q().oneOfType([q().string,q().number]),style:q().object,className:q().string,size:q().oneOf(["small","large","default"]),disabled:q().bool,emptyContent:q().node,expandRestTagsOnClick:q().bool,onDropdownVisibleChange:q().func,zIndex:q().number,position:q().oneOf(tY),onSearch:q().func,getPopupContainer:q().func,dropdownClassName:q().string,dropdownStyle:q().object,dropdownMargin:q().oneOfType([q().number,q().object]),outerTopSlot:q().node,innerTopSlot:q().node,inputProps:q().object,outerBottomSlot:q().node,innerBottomSlot:q().node,optionList:q().array,dropdownMatchSelectWidth:q().bool,loading:q().bool,defaultOpen:q().bool,validateStatus:q().oneOf(o7),defaultActiveFirstOption:q().bool,triggerRender:q().func,stopPropagation:q().bool,searchPosition:q().string,motion:q().bool,onChangeWithObject:q().bool,suffix:q().node,prefix:q().node,insetLabel:q().node,insetLabelId:q().string,showClear:q().bool,showArrow:q().bool,renderSelectedItem:q().func,allowCreate:q().bool,renderCreateItem:q().func,onMouseEnter:q().func,onMouseLeave:q().func,clickToHide:q().bool,onExceed:q().func,onCreate:q().func,remote:q().bool,onDeselect:q().func,onSelect:q().func,autoAdjustOverflow:q().bool,mouseEnterDelay:q().number,mouseLeaveDelay:q().number,spacing:q().oneOfType([q().number,q().object]),onBlur:q().func,onFocus:q().func,onClear:q().func,virtualize:q().object,renderOptionItem:q().func,onListScroll:q().func,arrowIcon:q().node,preventScroll:q().bool},lh.__SemiComponentName__="Select",lh.defaultProps=(0,es.bQ)(lh.__SemiComponentName__,{stopPropagation:!0,motion:!0,borderless:!1,zIndex:tJ.DEFAULT_Z_INDEX,filter:!1,multiple:!1,disabled:!1,defaultOpen:!1,allowCreate:!1,placeholder:"",onDropdownVisibleChange:ep(),onChangeWithObject:!1,onChange:ep(),onSearch:ep(),onMouseEnter:ep(),onMouseLeave:ep(),onDeselect:ep(),onSelect:ep(),onCreate:ep(),onExceed:ep(),onFocus:ep(),onBlur:ep(),onClear:ep(),onListScroll:ep(),maxHeight:270,dropdownMatchSelectWidth:!0,defaultActiveFirstOption:!0,showArrow:!0,showClear:!1,searchPosition:ae,remote:!1,autoAdjustOverflow:!0,autoClearSearchValue:!0,arrowIcon:z.createElement(t1.A,{"aria-label":""}),showRestTagsPopover:!1,restTagsPopoverProps:{},expandRestTagsOnClick:!1,ellipsisTrigger:!1});let lc=lh,lu={PREFIX:`${W._}-sidesheet`,DIALOG:`${W._}-modal`};var ld=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};let lp=0,lf=lu.PREFIX;class lg extends z.PureComponent{constructor(){super(...arguments),this.onMaskClick=e=>{e.target===e.currentTarget&&this.close(e)},this.close=e=>{let{onClose:n}=this.props;n&&n(e)}}componentDidMount(){this.sideSheetId=`sidesheet-${lp++}`}componentWillUnmount(){clearTimeout(this.timeoutId)}getMaskElement(){var e;let{mask:n,maskStyle:r,maskClosable:i}=this.props;return n?z.createElement("div",Object.assign({"aria-hidden":!0,key:"mask",className:F()(`${lf}-mask`,null!=(e=this.props.maskClassName)?e:""),style:r,onClick:i?this.onMaskClick:null},this.props.maskExtraProps)):null}renderHeader(){let e,n,{title:r,closable:i,headerStyle:s,closeIcon:o}=this.props;if(r&&(e=z.createElement("div",{className:`${lf}-title`,"x-semi-prop":"title"},this.props.title)),i){let e=o||z.createElement(rx.A,null);n=z.createElement(ej,{className:`${lf}-close`,key:"close-btn",onClick:this.close,type:"tertiary",icon:e,theme:"borderless",size:"small"})}return z.createElement("div",{className:`${lf}-header`,role:"heading","aria-level":1,style:Object.assign({},s)},e,n)}getDialogElement(){var e;let n=ld(this.props,[]),r={};n.width&&(r.width=n.width,n.mask||(r.width="100%")),n.height&&(r.height=n.height);let i=this.renderHeader();return z.createElement("div",Object.assign({key:"dialog-element",role:"dialog",tabIndex:-1,className:F()(`${lf}-inner`,`${lf}-inner-wrap`,null!=(e=this.props.dialogClassName)?e:"",`${lf}-size-${n.size}`),style:Object.assign(Object.assign({},n.style),r)},this.props.wrapperExtraProps),z.createElement("div",{className:`${lf}-content`},i,z.createElement("div",{className:`${lf}-body`,style:n.bodyStyle,"x-semi-prop":"children"},n.children),n.footer?z.createElement("div",{className:`${lf}-footer`,"x-semi-prop":"footer"},n.footer):null))}render(){let e=this.props,{mask:n,className:r,width:i,onClose:s,maskStyle:o,maskClosable:a,maskClassName:l,title:h,closable:c,headerStyle:u,height:d,style:p,size:f,bodyStyle:g,dialogClassName:m,children:y,footer:O,maskExtraProps:b,wrapperExtraProps:x}=e,w=ld(e,["mask","className","width","onClose","maskStyle","maskClosable","maskClassName","title","closable","headerStyle","height","style","size","bodyStyle","dialogClassName","children","footer","maskExtraProps","wrapperExtraProps"]),S=F()(r,{[`${lf}-fixed`]:!n,[`${lf}-size-${this.props.size}`]:!n}),_={};!n&&i&&(_.width=i);let k=(0,a0.A)(w);return z.createElement("div",Object.assign({className:S,style:_},k),this.getMaskElement(),this.getDialogElement())}}lg.propTypes={onClose:q().func,closeIcon:q().node},lg.defaultProps={onClose:ep()};class lm extends G.A{constructor(e){super(Object.assign(Object.assign({},lm.defaultAdapter),e)),this.toggleDisplayNone=e=>{this._adapter.toggleDisplayNone(e)}}get defaultAdapter(){return{handleCancel:ep(),beforeShow:ep(),afterHide:ep()}}destroy(){this.afterHide()}handleCancel(e){this._adapter.notifyCancel(e)}beforeShow(){this.getProp("disableScroll")&&this._adapter.disabledBodyScroll(),this._adapter.setOnKeyDownListener()}afterHide(){this.getProp("disableScroll")&&this._adapter.enabledBodyScroll(),this._adapter.removeKeyDownListener()}handleKeyDown(e){let{closeOnEsc:n}=this.getProps();if(n&&e.keyCode===tq.Ay.ESC){e.stopPropagation(),this.handleCancel(e);return}}onVisibleChange(e){this._adapter.notifyVisibleChange(e)}}var ly=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};let lO=lu.PREFIX;class lv extends ee.A{constructor(e){super(e),this.handleCancel=e=>{this.foundation.handleCancel(e)},this.handleKeyDown=e=>{this.foundation.handleKeyDown(e)},this.updateState=()=>{this.foundation.toggleDisplayNone(!this.props.visible)},this.state={displayNone:!this.props.visible},this.foundation=new lm(this.adapter),this.bodyOverflow="",this.scrollBarWidth=0,this.originBodyWidth="100%"}get adapter(){return Object.assign(Object.assign({},super.adapter),{disabledBodyScroll:()=>{let{getPopupContainer:e}=this.props;this.bodyOverflow=document.body.style.overflow||"",e||"hidden"===this.bodyOverflow||(document.body.style.overflow="hidden",document.body.style.width=`calc(${this.originBodyWidth||"100%"} - ${this.scrollBarWidth}px)`)},enabledBodyScroll:()=>{let{getPopupContainer:e}=this.props;e||"hidden"===this.bodyOverflow||(document.body.style.overflow=this.bodyOverflow,document.body.style.width=this.originBodyWidth)},notifyCancel:e=>{this.props.onCancel&&this.props.onCancel(e)},notifyVisibleChange:e=>{this.props.afterVisibleChange(e)},setOnKeyDownListener:()=>{window&&window.addEventListener("keydown",this.handleKeyDown)},removeKeyDownListener:()=>{window&&window.removeEventListener("keydown",this.handleKeyDown)},toggleDisplayNone:e=>{e!==this.state.displayNone&&this.setState({displayNone:e})}})}static getDerivedStateFromProps(e,n){let r={};return e.visible&&n.displayNone&&(r.displayNone=!1),e.visible||e.motion||n.displayNone||(r.displayNone=!0),r}componentDidMount(){this.scrollBarWidth=(0,es.XJ)(),this.originBodyWidth=document.body.style.width,this.props.visible&&this.foundation.beforeShow()}componentDidUpdate(e,n,r){!e.visible&&this.props.visible&&this.foundation.beforeShow(),e.visible&&!this.props.visible&&this.foundation.afterHide(),n.displayNone!==this.state.displayNone&&this.foundation.onVisibleChange(!this.state.displayNone)}componentWillUnmount(){this.props.visible&&this.foundation.destroy()}renderContent(){let e=this.props,{placement:n,className:r,children:i,width:s,height:o,motion:a,visible:l,style:h,maskStyle:c,size:u,zIndex:d,getPopupContainer:p,keepDOM:f}=e,g=ly(e,["placement","className","children","width","height","motion","visible","style","maskStyle","size","zIndex","getPopupContainer","keepDOM"]),m={zIndex:d};p&&(m={zIndex:d,position:"static"});let{direction:y}=this.context,O="left"===n||"right"===n,b="top"===n||"bottom"===n,x=F()(lO,r,{[`${lO}-${n}`]:n,[`${lO}-popup`]:p,[`${lO}-horizontal`]:b,[`${lO}-rtl`]:"rtl"===y,[`${lO}-hidden`]:f&&this.state.displayNone}),w=Object.assign(Object.assign(Object.assign({},O?s?{width:s}:{}:{width:"100%"}),g),{visible:l,motion:!1,size:u,className:x,height:b?o||448:"100%",onClose:this.handleCancel}),S=this.props.visible||this.props.keepDOM||this.props.motion&&!this.state.displayNone;return z.createElement(nu,{motion:this.props.motion,animationState:l?"enter":"leave",startClassName:l?`${lO}-animation-mask_show`:`${lO}-animation-mask_hide`,onAnimationEnd:this.updateState},e=>{let{animationClassName:n,animationEventsNeedBind:r}=e;return z.createElement(nu,{motion:this.props.motion,animationState:l?"enter":"leave",startClassName:l?`${lO}-animation-content_show_${this.props.placement}`:`${lO}-animation-content_hide_${this.props.placement}`,onAnimationEnd:this.updateState},e=>{let{animationClassName:s,animationStyle:o,animationEventsNeedBind:a}=e;return S?z.createElement(ns,{getPopupContainer:p,style:m},z.createElement(lg,Object.assign({},w,{maskExtraProps:r,wrapperExtraProps:a,dialogClassName:s,maskClassName:n,maskStyle:Object.assign({},c),style:Object.assign(Object.assign({},o),h)}),i)):z.createElement(z.Fragment,null)})})}render(){let{zIndex:e,getPopupContainer:n,visible:r}=this.props;return this.renderContent()}}lv.contextType=eO,lv.propTypes={bodyStyle:q().object,headerStyle:q().object,children:q().node,className:q().string,closable:q().bool,disableScroll:q().bool,getPopupContainer:q().func,height:q().oneOfType([q().number,q().string]),mask:q().bool,maskClosable:q().bool,maskStyle:q().object,motion:q().oneOfType([q().bool,q().object,q().func]),onCancel:q().func,placement:q().oneOf(["top","right","bottom","left"]),size:q().oneOf(["small","medium","large"]),style:q().object,title:q().node,visible:q().bool,width:q().oneOfType([q().number,q().string]),zIndex:q().number,afterVisibleChange:q().func,closeOnEsc:q().bool,footer:q().node,keepDOM:q().bool,"aria-label":q().string},lv.__SemiComponentName__="SideSheet",lv.defaultProps=(0,es.bQ)(lv.__SemiComponentName__,{visible:!1,motion:!0,mask:!0,placement:"right",closable:!0,footer:null,zIndex:1e3,maskClosable:!0,size:"small",disableScroll:!0,closeOnEsc:!1,afterVisibleChange:ep(),keepDOM:!1});let lb={PREFIX:`${W._}-skeleton`};var lx=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};let lw=e=>n=>r=>z.createElement(n,Object.assign({type:e},r));class lS extends z.PureComponent{render(){let e=this.props,{prefixCls:n,className:r,type:i,size:s,shape:o}=e,a=lx(e,["prefixCls","className","type","size","shape"]),l=F()(r,`${n}-${i}`,{[`${n}-${i}-${s}`]:"AVATAR"===i.toUpperCase()},{[`${n}-${i}-${o}`]:"AVATAR"===i.toUpperCase()});return z.createElement("div",Object.assign({className:l},a))}}lS.propTypes={type:q().string,prefixCls:q().string,style:q().object,className:q().string,size:q().oneOf(Y),shape:q().oneOf(U)},lS.defaultProps={prefixCls:lb.PREFIX,size:"medium",shape:"circle"};let l_=lw("avatar")(lS),lk=lw("image")(lS),lC=lw("title")(lS),lE=lw("button")(lS);class lT extends z.PureComponent{render(){let{prefixCls:e,className:n,style:r,rows:i}=this.props,s=F()(n,`${e}-paragraph`);return z.createElement("ul",{className:s,style:r},[...Array(i)].map((e,n)=>z.createElement("li",{key:n})))}}lT.propTypes={rows:q().number,prefixCls:q().string,style:q().object,className:q().string},lT.defaultProps={prefixCls:lb.PREFIX,rows:4};var lP=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};let lA=lb.PREFIX;class lM extends z.PureComponent{render(){let e=this.props,{placeholder:n,active:r,children:i,className:s,loading:o,style:a}=e,l=lP(e,["placeholder","active","children","className","loading","style"]),h=F()(lA,{[`${lA}-active`]:!!r},s);return o?z.createElement("div",Object.assign({className:h,style:a},l,{"x-semi-prop":"placeholder"}),n):i}}lM.Avatar=l_,lM.Title=lC,lM.Button=lE,lM.Paragraph=lT,lM.Image=lk,lM.defaultProps={loading:!0},lM.propTypes={active:q().bool,placeholder:q().node,style:q().object,className:q().string,loading:q().bool,children:q().node};let lN=lM;class lD extends G.A{constructor(e){super(Object.assign({},e)),this.handleFocusVisible=e=>{let{target:n}=e;try{n.matches(":focus-visible")&&this._adapter.setFocusVisible(!0)}catch(e){H(!0,"Warning: [Semi Switch] The current browser does not support the focus-visible")}},this.handleBlur=()=>{this._adapter.setFocusVisible(!1)}}init(){let{disabled:e}=this.getProps();this.setDisabled(e)}setChecked(e){this._adapter.setNativeControlChecked(e)}setDisabled(e){this._adapter.setNativeControlDisabled(e)}handleChange(e,n){void 0!==this.getProps().checked||this._adapter.setNativeControlChecked(e),this._adapter.notifyChange(e,n)}destroy(){}}let lI={PREFIX:`${W._}-switch`,FOCUS:`${W._}-switch-focus`,LARGE:`${W._}-switch-large`,SMALL:`${W._}-switch-small`,CHECKED:`${W._}-switch-checked`,DISABLED:`${W._}-switch-disabled`,ACTIVE:`${W._}-switch-active`,KNOB:`${W._}-switch-knob`,NATIVE_CONTROL:`${W._}-switch-native-control`,CHECKED_TEXT:`${W._}-switch-checked-text`,UNCHECKED_TEXT:`${W._}-switch-unchecked-text`,LOADING_SPIN:`${W._}-switch-loading-spin`,LOADING:`${W._}-switch-loading`};var l$=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};class lR extends ee.A{constructor(e){super(e),this.handleFocusVisible=e=>{this.foundation.handleFocusVisible(e)},this.handleBlur=e=>{this.foundation.handleBlur()},this.state={nativeControlChecked:e.defaultChecked||e.checked,nativeControlDisabled:!1,focusVisible:!1},this.switchRef=z.createRef(),this.foundation=new lD(this.adapter)}componentDidMount(){this.foundation.init()}componentDidUpdate(e){this.props.checked!==e.checked&&this.foundation.setChecked(this.props.checked),this.props.disabled!==e.disabled&&this.foundation.setDisabled(this.props.disabled)}componentWillUnmount(){this.foundation.destroy()}get adapter(){return Object.assign(Object.assign({},super.adapter),{setNativeControlChecked:e=>{this.setState({nativeControlChecked:e})},setNativeControlDisabled:e=>{this.setState({nativeControlDisabled:e})},setFocusVisible:e=>{this.setState({focusVisible:e})},notifyChange:(e,n)=>{this.props.onChange(e,n)}})}render(){let{nativeControlChecked:e,nativeControlDisabled:n,focusVisible:r}=this.state,i=this.props,{className:s,style:o,onMouseEnter:a,onMouseLeave:l,size:h,checkedText:c,uncheckedText:u,loading:d,id:p}=i,f=l$(i,["className","style","onMouseEnter","onMouseLeave","size","checkedText","uncheckedText","loading","id"]),g=F()(s,{[lI.PREFIX]:!0,[lI.CHECKED]:e,[lI.DISABLED]:n,[lI.LARGE]:"large"===h,[lI.SMALL]:"small"===h,[lI.LOADING]:d,[lI.FOCUS]:r}),m={type:"checkbox",className:lI.NATIVE_CONTROL,disabled:n||d,checked:e||!1},y=c&&e&&"small"!==h,O=u&&!e&&"small"!==h;return z.createElement("div",Object.assign({className:g,style:o,onMouseEnter:a,onMouseLeave:l},this.getDataAttr(f)),d?z.createElement(nF,{wrapperClassName:lI.LOADING_SPIN,size:"default"===h?"middle":h}):z.createElement("div",{className:lI.KNOB,"aria-hidden":!0}),y?z.createElement("div",{className:lI.CHECKED_TEXT,"x-semi-prop":"checkedText"},c):null,O?z.createElement("div",{className:lI.UNCHECKED_TEXT,"x-semi-prop":"uncheckedText"},u):null,z.createElement("input",Object.assign({},m,{ref:this.switchRef,id:p,role:"switch","aria-checked":e,"aria-invalid":this.props["aria-invalid"],"aria-errormessage":this.props["aria-errormessage"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-describedby":this.props["aria-describedby"],"aria-disabled":this.props.disabled,onChange:e=>this.foundation.handleChange(e.target.checked,e),onFocus:e=>this.handleFocusVisible(e),onBlur:e=>this.handleBlur(e)})))}}lR.propTypes={"aria-label":q().string,"aria-labelledby":q().string,"aria-invalid":q().bool,"aria-errormessage":q().string,"aria-describedby":q().string,className:q().string,checked:q().bool,checkedText:q().node,defaultChecked:q().bool,disabled:q().bool,loading:q().bool,onChange:q().func,onMouseEnter:q().func,onMouseLeave:q().func,style:q().object,size:q().oneOf(["default","small","large"]),uncheckedText:q().node,id:q().string},lR.defaultProps={disabled:!1,className:"",onChange:ep(),loading:!1,onMouseEnter:ep(),onMouseLeave:ep(),size:"default"};let lL=lR,lQ={TABS:`${W._}-tabs`,TABS_BAR:`${W._}-tabs-bar`,TABS_BAR_LINE:`${W._}-tabs-bar-line`,TABS_BAR_CARD:`${W._}-tabs-bar-card`,TABS_BAR_BUTTON:`${W._}-tabs-bar-button`,TABS_BAR_SLASH:`${W._}-tabs-bar-slash`,TABS_BAR_EXTRA:`${W._}-tabs-bar-extra`,TABS_TAB:`${W._}-tabs-tab`,TABS_TAB_ACTIVE:`${W._}-tabs-tab-active`,TABS_TAB_DISABLED:`${W._}-tabs-tab-disabled`,TABS_CONTENT:`${W._}-tabs-content`,TABS_CONTENT_ANIMATED:`${W._}-tabs-content-animated`,TABS_CONTENT_NO_ANIMATED:`${W._}-tabs-content-no-animated`,TABS_PANE:`${W._}-tabs-pane`,TABS_PANE_INACTIVE:`${W._}-tabs-pane-inactive`,TABS_PANE_ACTIVE:`${W._}-tabs-pane-active`,TABS_PANE_MOTION_OVERLAY:`${W._}-tabs-pane-motion-overlay`,TABS_PANE_ANIMATING:`${W._}-tabs-pane-animating`,TABS_PANE_ANIMATE_LEFT_SHOW:`${W._}-tabs-pane-animate-leftShow`,TABS_PANE_ANIMATE_RIGHT_SHOW:`${W._}-tabs-pane-animate-rightShow`,TABS_PANE_ANIMATE_TOP_SHOW:`${W._}-tabs-pane-animate-topShow`,TABS_PANE_ANIMATE_BOTTOM_SHOW:`${W._}-tabs-pane-animate-bottomShow`},lj=["line","card","button","slash"],lV=["small","medium","large"],lz=["top","left"];class lB extends G.A{constructor(e){super(Object.assign({},e)),this.destroy=ep(),this.handlePrevent=e=>{e.stopPropagation(),e.preventDefault()},this.handleKeyDown=(e,n,r)=>{let{preventScroll:i}=this.getProps(),s=[...e.target.parentNode.childNodes].filter(e=>en()(e,"attributes.data-tabkey.value","").includes("semiTab")&&"true"!==en()(e,"attributes.aria-disabled.value",""));switch(e.key){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":this.determineOrientation(e,s);break;case"Backspace":case"Delete":this.handleDeleteKeyDown(e,s,n,r);break;case"Enter":case" ":this.handleTabClick(n,e),this.handlePrevent(e);break;case"Home":s[0].focus({preventScroll:i}),this.handlePrevent(e);break;case"End":s[s.length-1].focus({preventScroll:i}),this.handlePrevent(e)}}}init(){this._adapter.collectPane()}_notifyChange(e){let{activeKey:n}=this.getStates();n!==e&&this._adapter.notifyChange(e)}handleTabClick(e,n){this._isInProps("activeKey")?this._notifyChange(e):(this._notifyChange(e),this.handleNewActiveKey(e)),this._adapter.notifyTabClick(e,n)}handleNewActiveKey(e){let{activeKey:n}=this.getStates();n!==e&&this._adapter.setNewActiveKey(e)}getDefaultActiveKey(){let e=this.getProps();return"activeKey"in e?e.activeKey:"defaultActiveKey"in e?e.defaultActiveKey:this._adapter.getDefaultActiveKeyFromChildren()}handleTabListChange(){this._adapter.collectPane()}handleTabPanesChange(){this._adapter.collectPane(),this._adapter.collectActiveKey()}handleTabDelete(e){this._adapter.notifyTabDelete(e)}determineOrientation(e,n){let{tabPosition:r}=this.getProps();"left"===r?("ArrowUp"===e.key||"ArrowDown"===e.key)&&(this.switchTabOnArrowPress(e,n),this.handlePrevent(e)):("ArrowLeft"===e.key||"ArrowRight"===e.key)&&(this.switchTabOnArrowPress(e,n),this.handlePrevent(e))}handleDeleteKeyDown(e,n,r,i){let{preventScroll:s}=this.getProps();if(i){this.handleTabDelete(r);let i=n.indexOf(e.target);1!==n.length&&n[i+1>=n.length?i-1:i+1].focus({preventScroll:s})}}switchTabOnArrowPress(e,n){let{preventScroll:r}=this.getProps(),i=n.indexOf(e.target),s={ArrowLeft:-1,ArrowUp:-1,ArrowRight:1,ArrowDown:1};s[e.key]&&void 0!==i&&(n[i+s[e.key]]?n[i+s[e.key]].focus({preventScroll:r}):"ArrowLeft"===e.key||"ArrowUp"===e.key?n[n.length-1].focus({preventScroll:r}):("ArrowRight"===e.key||"ArrowDown"==e.key)&&n[0].focus({preventScroll:r}))}}let lF=(0,nL.T)(function(e){return z.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),z.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.28 4.24a1.5 1.5 0 0 1 0 2.12l-5.66 5.66 5.66 5.65a1.5 1.5 0 1 1-2.12 2.13l-6.72-6.72a1.5 1.5 0 0 1 0-2.12l6.72-6.72a1.5 1.5 0 0 1 2.12 0Z",fill:"currentColor"}))},"chevron_left");var lZ=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};let lq=(0,z.forwardRef)((e,n)=>{let{tab:r,size:i,type:s,icon:o,selected:a,closable:l,disabled:h,itemKey:c,deleteTabItem:u,tabPosition:d,handleKeyDown:p,onClick:f}=e,g=lZ(e,["tab","size","type","icon","selected","closable","disabled","itemKey","deleteTabItem","tabPosition","handleKeyDown","onClick"]),m=(0,z.useMemo)(()=>l?z.createElement(rx.A,{"aria-label":"Close",role:"button",className:`${lQ.TABS_TAB}-icon-close`,onClick:e=>u(c,e)}):null,[s,l,u,c]),y=(0,z.useCallback)(e=>z.createElement("span",{className:`${lQ.TABS_BAR}-icon`},e),[]),O=(0,z.useCallback)(e=>{p&&p(e,c,l)},[p,c,l]),b=(0,z.useCallback)(e=>{!h&&f&&f(c,e)},[c,h,f]),x=o?y(o):null,w=F()(lQ.TABS_TAB,`${lQ.TABS_TAB}-${s}`,`${lQ.TABS_TAB}-${d}`,`${lQ.TABS_TAB}-single`,{[lQ.TABS_TAB_ACTIVE]:a,[lQ.TABS_TAB_DISABLED]:h,[`${lQ.TABS_TAB}-small`]:"small"===i,[`${lQ.TABS_TAB}-medium`]:"medium"===i});return z.createElement("div",Object.assign({role:"tab",id:`semiTab${c}`,"data-tabkey":`semiTab${c}`,"aria-controls":`semiTabPanel${c}`,"aria-disabled":h?"true":"false","aria-selected":a?"true":"false",tabIndex:a?0:-1,onKeyDown:O,onClick:b,className:w},g,{ref:n}),x,r,m)});lq.elementType="Tabs.TabItem";var lW=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};class lX extends z.Component{constructor(e){var n;super(e),n=this,this.handleItemClick=(e,n)=>{this.props.onTabClick(e,n)},this.handleKeyDown=(e,n,r)=>{this.props.handleKeyDown(e,n,r)},this.renderTabItem=e=>{let{size:n,type:r,deleteTabItem:i,handleKeyDown:s,tabPosition:o}=this.props,a=this._isActive(e.itemKey);return z.createElement(lq,Object.assign({},tn()(e,["disabled","icon","itemKey","tab","closable"]),{key:this._getBarItemKeyByItemKey(e.itemKey),selected:a,size:n,type:r,tabPosition:o,handleKeyDown:s,deleteTabItem:i,onClick:this.handleItemClick}))},this.scrollTabItemIntoViewByKey=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"nearest",i=arguments.length>2?arguments[2]:void 0,s=document.querySelector(`[data-uuid="${n.state.uuid}"] .${lQ.TABS_TAB}[data-scrollkey="${e}"]`);null==s||s.scrollIntoView({behavior:i||"smooth",block:r,inline:r})},this.scrollActiveTabItemIntoView=(e,n)=>{let r=this._getBarItemKeyByItemKey(this.props.activeKey);this.scrollTabItemIntoViewByKey(r,e,n)},this.renderTabComponents=e=>e.map(e=>this.renderTabItem(e)),this.handleArrowClick=(e,n)=>{let r="start"===n?e.pop():e.shift();if(!r)return;let i=this._getBarItemKeyByItemKey(r.itemKey);this.scrollTabItemIntoViewByKey(i)},this.renderCollapse=(e,n,r)=>{var i;let s=F()({[`${lQ.TABS_BAR}-arrow-${r}`]:r,[`${lQ.TABS_BAR}-arrow`]:!0});if(eH()(e))return z.createElement("div",{role:"presentation",className:s},z.createElement(ez,{disabled:!0,icon:n,theme:"borderless"}));let{dropdownClassName:o,dropdownStyle:a,showRestInDropdown:l,dropdownProps:h}=this.props,{rePosKey:c}=this.state,u=!e.length,d=z.createElement(oD.Menu,null,e.map(e=>{let{icon:n,tab:r,itemKey:i}=e,s=n?this.renderIcon(e.icon):null;return z.createElement(oD.Item,{key:i,onClick:e=>this.handleItemClick(i,e),active:this._isActive(i)},s,r)})),p=z.createElement("div",{role:"presentation",className:s,onClick:n=>this.handleArrowClick(e,r)},z.createElement(ez,{disabled:u,icon:n,theme:"borderless"})),f=F()(o,{[`${lQ.TABS_BAR}-dropdown`]:!0}),g=null!=(i=null==h?void 0:h[r])?i:{};return z.createElement(z.Fragment,null,l?z.createElement(oD,Object.assign({className:f,clickToHide:!0,clickTriggerToHide:!0,key:`${c}-${r}`,position:"start"===r?"bottomLeft":"bottomRight",render:u?null:d,showTick:!0,style:a,trigger:"hover",disableFocusListener:!0},g),p):p)},this.renderOverflow=e=>e.map((e,n)=>{let r=0===n?"start":"end",i=0===n?z.createElement(lF,null):z.createElement(nR.A,null),s=this.renderCollapse(e,i,r);return this.props.renderArrow?this.props.renderArrow(e,r,()=>this.handleArrowClick(e,r),s):s}),this.renderCollapsedTab=()=>{let{list:e}=this.props,n=e.map(e=>{let{itemKey:n}=e;return Object.assign({key:this._getBarItemKeyByItemKey(n),active:this._isActive(n)},e)});return z.createElement(aU,{items:n,overflowRenderDirection:this.props.arrowPosition,wrapperStyle:this.props.visibleTabsStyle,overflowRenderer:this.renderOverflow,renderMode:"scroll",className:`${lQ.TABS_BAR}-overflow-list`,visibleItemRenderer:this.renderTabItem,onVisibleStateChange:e=>{var n,r;let i=new Map;e.forEach((e,n)=>{i.set(this._getItemKeyByBarItemKey(n),e)}),this.isFirstShowInViewport&&Array.from(i.values()).some(e=>e)&&(this.scrollActiveTabItemIntoView("nearest","auto"),this.isFirstShowInViewport=!1),null==(r=(n=this.props).onVisibleTabsChange)||r.call(n,i)}})},this.renderWithMoreTrigger=()=>{let e,{list:n,more:r}=this.props,i=[],s=z.createElement("div",{className:F()({[`${lQ.TABS_BAR}-more-trigger`]:!0,[`${lQ.TABS_BAR}-more-trigger-${this.props.type}`]:!0})},z.createElement(n$,{componentName:"Tabs"},(e,n)=>z.createElement("div",{className:`${lQ.TABS_BAR}-more-trigger-content`},z.createElement("div",null,e.more),z.createElement(t1.A,{className:`${lQ.TABS_BAR}-more-trigger-content-icon`}))));if("number"==typeof r)e=n.length-Math.min(r,n.length),i=n.slice(0,e).map(e=>this.renderTabItem(e));else if("object"==typeof r)e=n.length-Math.min(r.count,n.length),i=n.slice(0,e).map(e=>this.renderTabItem(e)),r.render&&(s=r.render());else if(void 0!==r)throw Error("[Semi Tabs]: invalid tab props format: more");return z.createElement(z.Fragment,null,i,this.renderMoreDropdown(n.slice(e),null==r?void 0:r.dropdownProps,s))},this.renderMoreDropdown=(e,n,r)=>z.createElement(oD,Object.assign({trigger:"hover",showTick:!0,position:"bottomLeft",className:`${lQ.TABS_BAR}-more-dropdown-${this.props.type}`,clickToHide:!0,menu:e.map(e=>({node:"item",name:e.tab,icon:e.icon,onClick:n=>this.props.onTabClick(e.itemKey,n),active:this.props.activeKey===e.itemKey}))},n),r),this._isActive=e=>e===this.props.activeKey,this._getBarItemKeyByItemKey=e=>`${e}-bar`,this._getItemKeyByBarItemKey=e=>e.replace(/-bar$/,""),this.state={endInd:e.list.length,rePosKey:0,startInd:0,uuid:"",currentVisibleItems:[]},this.isFirstShowInViewport=!0}componentDidMount(){this.setState({uuid:function(){var e,n;try{return null!=(n=null==(e=null==crypto?void 0:crypto.randomUUID)?void 0:e.call(crypto))?n:String(-99990013e3).replace(/[018]/g,e=>(Number(e)^crypto.getRandomValues(new Uint8Array(1))[0]&15>>Number(e)/4).toString(16))}catch(e){return eo("semi")}}()})}componentDidUpdate(e){e.activeKey!==this.props.activeKey&&this.props.collapsible&&this.scrollActiveTabItemIntoView()}renderIcon(e){return z.createElement("span",null,e)}renderExtra(){let{tabBarExtraContent:e,type:n,size:r}=this.props,i=e&&e.props?e.props.style:{},s=F()(lQ.TABS_BAR_EXTRA,{[`${lQ.TABS_BAR}-${n}-extra`]:n,[`${lQ.TABS_BAR}-${n}-extra-${r}`]:r});if(e){let n=Object.assign(Object.assign({},{float:"right"}),i);return z.createElement("div",{className:s,style:n,"x-semi-prop":"tabBarExtraContent"},e)}return null}render(){let e=this.props,{type:n,style:r,className:i,list:s,tabPosition:o,more:a,collapsible:l}=e,h=lW(e,["type","style","className","list","tabPosition","more","collapsible"]),c=F()(i,{[lQ.TABS_BAR]:!0,[lQ.TABS_BAR_LINE]:"line"===n,[lQ.TABS_BAR_CARD]:"card"===n,[lQ.TABS_BAR_BUTTON]:"button"===n,[lQ.TABS_BAR_SLASH]:"slash"===n,[`${lQ.TABS_BAR}-${o}`]:o,[`${lQ.TABS_BAR}-collapse`]:l}),u=this.renderExtra(),d=l?this.renderCollapsedTab():a?this.renderWithMoreTrigger():this.renderTabComponents(s);return z.createElement("div",Object.assign({role:"tablist","aria-orientation":"left"===o?"vertical":"horizontal",className:c,style:r},(0,a0.A)(h),{"data-uuid":this.state.uuid}),d,u)}}lX.propTypes={activeKey:q().string,className:q().string,collapsible:q().bool,list:q().array,onTabClick:q().func,size:q().oneOf(lV),style:q().object,tabBarExtraContent:q().node,tabPosition:q().oneOf(lz),type:q().oneOf(lj),closable:q().bool,deleteTabItem:q().func,more:q().oneOfType([q().number,q().object])};let lU=z.createContext({});var lY=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};class lG extends z.PureComponent{constructor(){super(...arguments),this.ref=(0,z.createRef)(),this.getDirection=(e,n,r,i)=>{if(null!==n&&null!==e&&Array.isArray(r)&&r.length){let s=r.findIndex(n=>n.itemKey===e),o=r.findIndex(e=>e.itemKey===n),a=r.findIndex(e=>e.itemKey===i);return s===o?a>s:o<s}return!1},this.shouldRender=()=>{let{itemKey:e}=this.props,{activeKey:n,lazyRender:r}=this.context;return this._active=this._active||n===e,!r||this._active}}render(){let{tabPaneMotion:e,tabPosition:n,prevActiveKey:r}=this.context,i=this.props,{className:s,style:o,children:a,itemKey:l,tabIndex:h}=i,c=lY(i,["className","style","children","itemKey","tabIndex"]),u=this.context.activeKey===l,d=F()(s,{[lQ.TABS_PANE_INACTIVE]:!u,[lQ.TABS_PANE_ACTIVE]:u,[lQ.TABS_PANE]:!0}),p=this.shouldRender(),f=(()=>{let e=this.getDirection(this.context.activeKey,l,this.context.panes,r);if("top"===n)if(e)return lQ.TABS_PANE_ANIMATE_RIGHT_SHOW;else return lQ.TABS_PANE_ANIMATE_LEFT_SHOW;return e?lQ.TABS_PANE_ANIMATE_BOTTOM_SHOW:lQ.TABS_PANE_ANIMATE_TOP_SHOW})(),g=!this.context.panes.find(e=>e.itemKey===r),m=e&&u&&!g&&!this.context.forceDisableMotion;return z.createElement("div",Object.assign({ref:this.ref,role:"tabpanel",id:`semiTabPanel${l}`,"aria-labelledby":`semiTab${l}`,className:d,style:o,"aria-hidden":u?"false":"true",tabIndex:h||0},(0,a0.A)(c),{"x-semi-prop":"children"}),z.createElement(nu,{motion:m,animationState:u?"enter":"leave",startClassName:f},e=>{let{animationClassName:n,animationEventsNeedBind:r}=e;return z.createElement("div",Object.assign({className:F()(lQ.TABS_PANE_MOTION_OVERLAY,n),"x-semi-prop":"children"},r),p?a:null)}))}}lG.isTabPane=!0,lG.contextType=lU,lG.propTypes={className:q().string,style:q().object,children:q().node,disabled:q().bool,itemKey:q().string,tab:q().node,icon:q().node,closable:q().bool};var lH=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};let lK=["className","style","disabled","itemKey","tab","icon"];class lJ extends ee.A{constructor(e){super(e),this.setContentRef=e=>{this.contentRef={current:e}},this.getPanes=()=>{let{tabList:e,children:n}=this.props;return Array.isArray(e)&&e.length?e:z.Children.map(n,e=>{if(e){let{tab:n,icon:r,disabled:i,itemKey:s,closable:o}=e.props;return{tab:n,icon:r,disabled:i,itemKey:s,closable:o}}})},this.onTabClick=(e,n)=>{this.foundation.handleTabClick(e,n)},this.rePosChildren=(e,n)=>{let r=[],i=z.Children.toArray(e);return e.length&&(r.push(...i.filter(e=>e.props&&e.props.itemKey===n)),r.push(...i.filter(e=>e.props&&e.props.itemKey!==n))),r},this.getActiveItem=()=>{let{activeKey:e}=this.state,{children:n,tabList:r}=this.props;return r||!Array.isArray(n)?n:z.Children.toArray(n).filter(n=>!(0,z.isValidElement)(n)||!n.type||!n.type.isTabPane||n.props.itemKey===e)},this.deleteTabItem=(e,n)=>{n.stopPropagation(),this.foundation.handleTabDelete(e)},this.foundation=new lB(this.adapter),this.state={activeKey:this.foundation.getDefaultActiveKey(),panes:this.getPanes(),prevActiveKey:null,forceDisableMotion:!1},this.contentRef=(0,z.createRef)(),this.contentHeight="auto"}get adapter(){return Object.assign(Object.assign({},super.adapter),{collectPane:()=>{let e=this.getPanes();this.setState({panes:e})},collectActiveKey:()=>{let{tabList:e,children:n,activeKey:r}=this.props;if(void 0!==r)return;let{activeKey:i}=this.state,s=this.getPanes();-1===s.findIndex(e=>e.itemKey===i)&&(s.length>0?this.setState({activeKey:s[0].itemKey}):this.setState({activeKey:""}))},notifyTabClick:(e,n)=>{this.props.onTabClick(e,n)},notifyChange:e=>{this.props.onChange(e)},setNewActiveKey:e=>{this.setState({activeKey:e})},getDefaultActiveKeyFromChildren:()=>{let{tabList:e,children:n}=this.props,r="";return(e||z.Children.toArray(n).map(e=>(0,z.isValidElement)(e)?e.props:null)).forEach(e=>{!e||r||e.disabled||(r=e.itemKey)}),r},notifyTabDelete:e=>{this.props.onTabClose&&this.props.onTabClose(e)}})}static getDerivedStateFromProps(e,n){let r={};return eN(e.activeKey)||e.activeKey===n.activeKey||(n.prevActiveKey=n.activeKey,r.activeKey=e.activeKey),r}componentDidUpdate(e,n){let r=z.Children.toArray(e.children).map(e=>tn()((0,z.isValidElement)(e)?e.props:null,lK)),i=z.Children.toArray(this.props.children).map(e=>tn()((0,z.isValidElement)(e)?e.props:null,lK)),s=this.props.tabList||e.tabList;if(eJ()(this.props.tabList,e.tabList)||this.foundation.handleTabListChange(),n.activeKey!==this.state.activeKey&&n.activeKey!==this.state.prevActiveKey&&this.setState({prevActiveKey:n.activeKey}),e.activeKey!==this.props.activeKey){let e=(()=>{let e=new Set(r.map(e=>e.itemKey));return i.map(e=>e.itemKey).filter(n=>!e.has(n))})();this.setState({forceDisableMotion:e.includes(this.props.activeKey)})}eJ()(r,i)||s||this.foundation.handleTabPanesChange()}render(){let e=this.props,{children:n,className:r,collapsible:i,contentStyle:s,keepDOM:o,lazyRender:a,renderTabBar:l,showRestInDropdown:h,size:c,style:u,tabBarClassName:d,tabBarExtraContent:p,tabBarStyle:f,tabPaneMotion:g,tabPosition:m,type:y,more:O,onVisibleTabsChange:b,visibleTabsStyle:x,arrowPosition:w,renderArrow:S,dropdownProps:_}=e,k=lH(e,["children","className","collapsible","contentStyle","keepDOM","lazyRender","renderTabBar","showRestInDropdown","size","style","tabBarClassName","tabBarExtraContent","tabBarStyle","tabPaneMotion","tabPosition","type","more","onVisibleTabsChange","visibleTabsStyle","arrowPosition","renderArrow","dropdownProps"]),{panes:C,activeKey:E}=this.state,T=F()(r,{[lQ.TABS]:!0,[`${lQ.TABS}-${m}`]:m}),P=F()({[lQ.TABS_CONTENT]:!0,[`${lQ.TABS_CONTENT}-${m}`]:m}),A={activeKey:E,className:d,collapsible:i,list:C,onTabClick:this.onTabClick,showRestInDropdown:h,size:c,style:f,tabBarExtraContent:p,tabPosition:m,type:y,deleteTabItem:this.deleteTabItem,handleKeyDown:this.foundation.handleKeyDown,more:O,onVisibleTabsChange:b,visibleTabsStyle:x,arrowPosition:w,renderArrow:S,dropdownProps:_},M=l?l(A,lX):z.createElement(lX,Object.assign({},A)),N=o?n:this.getActiveItem();return z.createElement("div",Object.assign({className:T,style:u},this.getDataAttr(k)),M,z.createElement(lU.Provider,{value:{activeKey:E,lazyRender:a,panes:C,tabPaneMotion:g,tabPosition:m,prevActiveKey:this.state.prevActiveKey,forceDisableMotion:this.state.forceDisableMotion}},z.createElement("div",{ref:this.setContentRef,className:P,style:Object.assign({},s)},N)))}}lJ.TabPane=lG,lJ.TabItem=lq,lJ.propTypes={activeKey:q().string,className:q().string,collapsible:q().bool,contentStyle:q().oneOfType([q().object]),defaultActiveKey:q().string,keepDOM:q().bool,lazyRender:q().bool,onChange:q().func,onTabClick:q().func,renderTabBar:q().func,showRestInDropdown:q().bool,size:q().oneOf(lV),style:q().object,tabBarClassName:q().string,tabBarExtraContent:q().node,tabBarStyle:q().object,tabList:q().array,tabPaneMotion:q().bool,tabPosition:q().oneOf(lz),type:q().oneOf(lj),onTabClose:q().func,preventScroll:q().bool,more:q().oneOfType([q().number,q().object]),arrowPosition:q().string,renderArrow:q().func,dropdownProps:q().object},lJ.__SemiComponentName__="Tabs",lJ.defaultProps=(0,es.bQ)(lJ.__SemiComponentName__,{children:[],collapsible:!1,keepDOM:!0,lazyRender:!1,onChange:()=>void 0,onTabClick:()=>void 0,size:"large",tabPaneMotion:!0,tabPosition:"top",type:"line",onTabClose:()=>void 0,showRestInDropdown:!0,arrowPosition:"both"});let l0=lJ;class l1 extends G.A{constructor(e){super(Object.assign(Object.assign({},l1.defaultAdapter),e)),this.handleMouseInSideChange=e=>{this._adapter.handleMouseInSideChange(e)},this.getInputWrapperRect=()=>this._adapter.getInputWrapperRect()}hasToast(e){return this._adapter.getState("list").map(e=>{let{id:n}=e;return n}).includes(e)}addToast(e){let n=this._adapter.getState("list");n.push(e),this._adapter.updateToast(n,[],[])}updateToast(e,n){let r=this._adapter.getState("list"),i=(r=r.map(r=>r.id===e?Object.assign(Object.assign({},r),n):r)).filter(n=>n.id===e);this._adapter.updateToast(r,[],i)}removeToast(e){let n=this._adapter.getState("list"),r=[];n=n.filter(n=>n.id!==e||(r.push(n),!1)),this._adapter.updateToast(n,r,[])}destroyAll(){let e=this._adapter.getState("list");e.length>0&&this._adapter.updateToast([],e,[])}}let l2=`${W._}-toast`,l5={PREFIX:l2,WRAPPER:`${l2}-wrapper`,LIST:`${l2}-list`},l4=["normal","light"],l3=["ltr","rtl"];class l6 extends G.A{constructor(e){super(Object.assign(Object.assign({},l6.defaultAdapter),e)),this._timer=null,this._id=null}init(){this.startCloseTimer_(),this._id=this._adapter.getProp("id")}destroy(){this.clearCloseTimer_()}startCloseTimer_(){let e=this._adapter.getProp("duration");e&&ey()(e)&&(this._timer=setTimeout(()=>{this.close()},1e3*e))}close(e){e&&e.stopPropagation(),this._adapter.notifyWrapperToRemove(this._id),this._adapter.notifyClose()}clearCloseTimer_(){this._timer&&(clearTimeout(this._timer),this._timer=null)}restartCloseTimer(){this.clearCloseTimer_(),this.startCloseTimer_()}}let l9=(0,nL.T)(function(e){return z.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),z.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m10.23 2.4-8.7 16.67A2 2 0 0 0 3.3 22h17.4a2 2 0 0 0 1.77-2.93L13.77 2.4a2 2 0 0 0-3.54 0ZM13.14 14a1.15 1.15 0 0 1-2.28 0l-.58-4.03a1.73 1.73 0 1 1 3.44 0l-.58 4.03Zm.36 4.49a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z",fill:"currentColor"}))},"alert_triangle"),l7=(0,nL.T)(function(e){return z.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),z.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23a11 11 0 1 0 0-22 11 11 0 0 0 0 22Zm5.88-13.18-6.2 7.6a1.5 1.5 0 0 1-2.37 0l-3.5-4a1.5 1.5 0 1 1 2.37-1.84l2.3 2.46L15.5 8a1.5 1.5 0 1 1 2.38 1.82Z",fill:"currentColor"}))},"tick_circle");var l8=r(71725);let he=(0,nL.T)(function(e){return z.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),z.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23 12a11 11 0 1 1-22 0 11 11 0 0 1 22 0Zm-9.5 5.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0ZM12 5a1.9 1.9 0 0 0-1.89 2l.3 5.5a1.59 1.59 0 0 0 3.17 0l.3-5.5c.07-1.09-.8-2-1.88-2Z",fill:"currentColor"}))},"alert_circle"),ht=l5.PREFIX;class hn extends ee.A{constructor(e){super(e),this.toastEle=z.createRef(),this.clearCloseTimer=()=>{this.foundation.clearCloseTimer_()},this.startCloseTimer=()=>{this.foundation.startCloseTimer_()},this.restartCloseTimer=()=>{this.foundation.restartCloseTimer()},this.state={},this.foundation=new l6(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{notifyWrapperToRemove:e=>{this.props.close(e)},notifyClose:()=>{this.props.onClose()}})}componentDidMount(){this.foundation.init()}componentWillUnmount(){this.foundation.destroy()}close(e){this.foundation.close(e)}renderIcon(){let{type:e,icon:n}=this.props,r={warning:z.createElement(l9,null),success:z.createElement(l7,null),info:z.createElement(l8.A,null),error:z.createElement(he,null)}[e],i="large",s=F()(`${ht}-icon`,`${ht}-icon-${e}`);return n?(0,es.uR)(n)?z.cloneElement(n,{size:i,className:`${ht}-icon`}):n:e&&r?z.cloneElement(r,{size:i,className:s}):null}render(){let{content:e,type:n,theme:r,showClose:i,textMaxWidth:s,className:o,style:a}=this.props,l=this.props.direction||this.context.direction,h=F()(ht,o,{[`${ht}-${n}`]:!0,[`${ht}-${r}`]:"light"===r,[`${ht}-rtl`]:"rtl"===l}),c={};c.maxWidth=s;let u=this.props.positionInList?this.props.positionInList.length-this.props.positionInList.index-1:0,d=z.createElement("div",{ref:this.toastEle,role:"alert","aria-label":`${n||"default"} type`,className:h,style:Object.assign(Object.assign({},a),{transform:`translate3d(0,0,${-10*u}px)`}),onMouseEnter:this.clearCloseTimer,onMouseLeave:this.startCloseTimer,onAnimationStart:this.props.onAnimationStart,onAnimationEnd:this.props.onAnimationEnd},z.createElement("div",{className:`${ht}-content`},this.renderIcon(),z.createElement("span",{className:`${ht}-content-text`,style:c,"x-semi-prop":"content"},e),i&&z.createElement("div",{className:`${ht}-close-button`},z.createElement(ej,{onClick:e=>this.close(e),type:"tertiary",icon:z.createElement(rx.A,{"x-semi-prop":"icon"}),theme:"borderless",size:"small"}))));if(!this.props.stack)return d;{let e=this.props.stackExpanded&&this.toastEle.current&&getComputedStyle(this.toastEle.current).height||0;return z.createElement("div",{className:`${ht}-zero-height-wrapper`,style:{height:e}},d)}}}hn.contextType=eO,hn.propTypes={onClose:q().func,content:q().node,close:q().func,duration:q().number,theme:q().oneOf(l4),type:q().oneOf(["warning","success","info","error","default"]),textMaxWidth:q().oneOfType([q().string,q().number]),style:q().object,className:q().string,showClose:q().bool,stack:q().bool,stackExpanded:q().bool,icon:q().node,direction:q().oneOf(l3)},hn.__SemiComponentName__="Toast",hn.defaultProps=(0,es.bQ)(hn.__SemiComponentName__,{onClose:ep(),content:"",close:ep(),duration:3,textMaxWidth:450,showClose:!0,stack:!1,stackExpanded:!1,theme:"normal"});var hr=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};let hi=z.forwardRef((e,n)=>{var{afterClose:r}=e,i=hr(e,["afterClose"]);let[s,o]=(0,z.useState)(!0);return z.useImperativeHandle(n,()=>({close:()=>{o(!1)}})),(0,z.useEffect)(()=>{s||r(i.id)},[s]),s?z.createElement(hn,Object.assign({},i,{close:()=>{o(!1)}})):null}),hs={motion:!0,zIndex:1010,duration:3};function ho(){let[e,n]=function(){let[e,n]=z.useState([]);return[e,function(e,r){return n(n=>[{element:e,config:r},...n]),e=>{n(n=>n.filter(n=>{let{config:r}=n;return r.id!==e}))}}]}(),r=(0,z.useRef)(new Map),i=e=>{let i,s=eo("semi_toast_"),o=Object.assign(Object.assign({},e),{id:s});return i=n(z.createElement(hi,Object.assign({},o,{key:s,afterClose:e=>i(e),ref:e=>{var n;r.current.set(s,{close:null!=(n=null==e?void 0:e.close)?n:ep()})}})),Object.assign({},o)),s};return[{success:e=>i(Object.assign(Object.assign(Object.assign({},hs),e),{type:"success"})),info:e=>i(Object.assign(Object.assign(Object.assign({},hs),e),{type:"info"})),error:e=>i(Object.assign(Object.assign(Object.assign({},hs),e),{type:"error"})),warning:e=>i(Object.assign(Object.assign(Object.assign({},hs),e),{type:"warning"})),open:e=>i(Object.assign(Object.assign(Object.assign({},hs),e),{type:"default"})),close:e=>(e=>{var n;let{close:i}=null!=(n=r.current.get(e))?n:{};null==i||i()})(e)},z.createElement(z.Fragment,null,Array.isArray(e)&&e.length?z.createElement(z.Fragment,null,e.map(e=>e.element)):null)]}let ha=(class{static create(e){var n;let r=((n=class e extends ee.A{constructor(e){super(e),this.stack=!1,this.innerWrapperRef=z.createRef(),this.handleMouseEnter=e=>{this.stack&&this.foundation.handleMouseInSideChange(!0)},this.handleMouseLeave=e=>{var n;this.stack&&(null==(n=this.foundation.getInputWrapperRect())?void 0:n.height)&&this.foundation.handleMouseInSideChange(!1)},this.state={list:[],removedItems:[],updatedItems:[],mouseInSide:!1},this.foundation=new l1(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{updateToast:(e,n,r)=>{this.setState({list:e,removedItems:n,updatedItems:r})},handleMouseInSideChange:e=>{this.setState({mouseInSide:e})},getInputWrapperRect:()=>{var e;return null==(e=this.innerWrapperRef.current)?void 0:e.getBoundingClientRect()}})}static create(n){var r;let i=null!=(r=n.id)?r:eo("toast");if(e.ref){let r=document.querySelector(`#${this.wrapperId}`);["top","left","bottom","right"].map(e=>{e in n&&(r.style[e]="number"==typeof n[e]?`${n[e]}px`:n[e])}),!!n.stack!==e.ref.stack&&(e.ref.stack=!!n.stack),e.ref.has(i)?e.ref.update(i,Object.assign(Object.assign({},n),{id:i})):e.ref.add(Object.assign(Object.assign({},n),{id:i}))}else{let r=document.createElement("div");this.wrapperId||(this.wrapperId=eo("toast-wrapper").slice(0,26)),r.className=l5.WRAPPER,r.id=this.wrapperId,r.style.zIndex=String("number"==typeof n.zIndex?n.zIndex:e.defaultOpts.zIndex),["top","left","bottom","right"].map(i=>{if(i in e.defaultOpts||i in n){let s=n[i]?n[i]:e.defaultOpts[i];r.style[i]="number"==typeof s?`${s}px`:s}}),e.defaultOpts.getPopupContainer?e.defaultOpts.getPopupContainer().appendChild(r):document.body.appendChild(r),e2.render(z.createElement(e,{ref:n=>e.ref=n}),r,()=>{e.ref.add(Object.assign(Object.assign({},n),{id:i})),e.ref.stack=!!n.stack})}return i}static close(n){e.ref&&e.ref.remove(n)}static destroyAll(){if(e.ref){e.ref.destroyAll();let n=document.querySelector(`#${this.wrapperId}`);e2.unmountComponentAtNode(n),n&&n.parentNode.removeChild(n),e.ref=null,this.wrapperId=null}}static getWrapperId(){return this.wrapperId}static info(n){return"string"==typeof n&&(n={content:n}),this.create(Object.assign(Object.assign(Object.assign({},e.defaultOpts),n),{type:"info"}))}static warning(n){return"string"==typeof n&&(n={content:n}),this.create(Object.assign(Object.assign(Object.assign({},e.defaultOpts),n),{type:"warning"}))}static error(n){return"string"==typeof n&&(n={content:n}),this.create(Object.assign(Object.assign(Object.assign({},e.defaultOpts),n),{type:"error"}))}static success(n){return"string"==typeof n&&(n={content:n}),this.create(Object.assign(Object.assign(Object.assign({},e.defaultOpts),n),{type:"success"}))}static config(n){["top","left","bottom","right"].forEach(r=>{r in n&&(e.defaultOpts[r]=n[r])}),"string"==typeof n.theme&&l4.includes(n.theme)&&(e.defaultOpts.theme=n.theme),"number"==typeof n.zIndex&&(e.defaultOpts.zIndex=n.zIndex),"number"==typeof n.duration&&(e.defaultOpts.duration=n.duration),"function"==typeof n.getPopupContainer&&(e.defaultOpts.getPopupContainer=n.getPopupContainer)}has(e){return this.foundation.hasToast(e)}add(e){return this.foundation.addToast(e)}update(e,n){return this.foundation.updateToast(e,n)}remove(e){return this.foundation.removeToast(e)}destroyAll(){return this.foundation.destroyAll()}render(){let{list:e}=this.state,{removedItems:n,updatedItems:r}=this.state;e=Array.from(new Set([...e,...n]));let i=r.map(e=>{let{id:n}=e;return n}),s=e=>{var n;(null==(n=null==e?void 0:e.foundation)?void 0:n._id)&&i.includes(e.foundation._id)&&e.foundation.restartCloseTimer()};return z.createElement(z.Fragment,null,z.createElement("div",{className:F()({[`${l5.PREFIX}-innerWrapper`]:!0,[`${l5.PREFIX}-innerWrapper-hover`]:this.state.mouseInSide}),ref:this.innerWrapperRef,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},e.map((r,i)=>{let o=void 0!==n.find(e=>e.id===r.id);return z.createElement(nu,{key:r.id,motion:r.motion,animationState:o?"leave":"enter",startClassName:o?`${l5.PREFIX}-animation-hide`:`${l5.PREFIX}-animation-show`},n=>{let{animationClassName:a,animationEventsNeedBind:l,isAnimating:h}=n;return o&&!h?null:z.createElement(hn,Object.assign({},r,{stack:this.stack,stackExpanded:this.state.mouseInSide,positionInList:{length:e.length,index:i},className:F()({[r.className]:!!r.className,[a]:!0})},l,{style:Object.assign({},r.style),close:e=>this.remove(e),ref:s}))})})))}}).defaultOpts={motion:!0,zIndex:1010,content:""},n.propTypes={content:q().node,duration:q().number,onClose:q().func,icon:q().node,direction:q().oneOf(l3),stack:q().bool},n.defaultProps={},n);return r.useToast=ho,e&&r.config(e),r}}).create();class hl extends G.A{constructor(e){super(Object.assign({},e)),this.clearDragState=()=>{this._adapter.updateState({dragOverNodeKey:"",dragging:!1})}}_isMultiple(){return this.getProp("multiple")}_isAnimated(){return this.getProp("motion")}_isDisabled(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.getProp("disabled")||e.disabled}_isExpandControlled(){return!e7()(this.getProp("expandedKeys"))}_isLoadControlled(){return!e7()(this.getProp("loadedKeys"))}_isFilterable(){return!!this.getProp("filterTreeNode")}_showFilteredOnly(){let{inputValue:e}=this.getStates(),{showFilteredOnly:n}=this.getProps();return!!e&&n}getTreeNodeProps(e){let{expandedKeys:n=new Set([]),selectedKeys:r=[],checkedKeys:i=new Set([]),halfCheckedKeys:s=new Set([]),realCheckedKeys:o=new Set([]),keyEntities:a={},filteredKeys:l=new Set([]),inputValue:h="",loadedKeys:c=new Set([]),loadingKeys:u=new Set([]),filteredExpandedKeys:d=new Set([]),disabledKeys:p=new Set([])}=this.getStates(),{treeNodeFilterProp:f,checkRelation:g}=this.getProps(),m=a[e];if(!m)return null;let y=!1,O=!1;"related"===g?(y=i.has(e),O=s.has(e)):"unRelated"===g&&(y=o.has(e),O=!1);let b={eventKey:e,expanded:h?d.has(e):n.has(e),selected:r.includes(e),checked:y,halfChecked:O,pos:String(m?m.pos:""),level:m.level,filtered:l.has(e),loading:u.has(e)&&!c.has(e),loaded:c.has(e),keyword:h,treeNodeFilterProp:f};return this.getProp("disableStrictly")&&p.has(e)&&(b.disabled=!0),b}notifyJsonChange(e,n){let r=this.getProp("treeDataSimpleJson"),i=(!Array.isArray(e)?[e]:e).map(e=>e.replaceAll(tc,".")),s=tn()(r,i);this._adapter.notifyChange(s)}constructDataForValue(e){let{keyMaps:n}=this.getProps();return{[en()(n,"key","key")]:e,[en()(n,"label","label")]:e}}findDataForValue(e){let{value:n,defaultValue:r,keyMaps:i}=this.getProps(),s=en()(i,"value","value"),o=en()(i,"key","key"),a=[];return n?a=Array.isArray(n)?n:[n]:r&&(a=Array.isArray(r)?r:[r]),a.find(n=>n[s]===e||n[o]===e)}getDataForKeyNotInKeyEntities(e){let{onChangeWithObject:n}=this.getProps();return n?this.findDataForValue(e):this.constructDataForValue(e)}notifyMultipleChange(e,n){let r,{keyEntities:i}=this.getStates(),{leafOnly:s,checkRelation:o,keyMaps:a,autoMergeValue:l}=this.getProps(),h=[];"related"===o?h=l?tS(e,i,s,!0):e:"unRelated"===o&&(h=e);let c=h.map(e=>i[e]?i[e].data:this.getDataForKeyNotInKeyEntities(e));r=this.getProp("onChangeWithObject")?c:tT(c,a),this._adapter.notifyChange(r)}notifyChange(e,n){let r=this._isMultiple(),{keyMaps:i}=this.getProps(),{keyEntities:s}=this.getStates();if(this.getProp("treeDataSimpleJson"))this.notifyJsonChange(e,n);else if(r)this.notifyMultipleChange(e,n);else{let n;if(this.getProp("onChangeWithObject"))n=en()(s,e).data;else{let{data:r}=en()(s,e);n=tT(r,i)}this._adapter.notifyChange(n)}}handleInputChange(e){this._adapter.updateInputValue(e);let{expandedKeys:n,selectedKeys:r,keyEntities:i,treeData:s}=this.getStates(),{showFilteredOnly:o,filterTreeNode:a,treeNodeFilterProp:l,keyMaps:h}=this.getProps(),c="label"!==l?l:en()(h,"label","label"),u=[],d=[],p=[],f=new Set([]);e?(d=ty(u=Object.values(i).filter(n=>tw(e,n.data,a,c)).map(e=>e.key),i,!1),f=new Set([...tg(u,i,!0),...d]),p=td(s,new Set(d),h,o&&f)):((d=ty(r,i)).forEach(e=>n.add(e)),p=td(s,n,h));let g=new Set(d);this._adapter.notifySearch(e,Array.from(g)),this._adapter.updateState({expandedKeys:n,flattenNodes:p,motionKeys:new Set([]),filteredKeys:new Set(u),filteredExpandedKeys:g,filteredShownKeys:f})}handleNodeSelect(e,n){this._isDisabled(n)||(this._isMultiple()?this.handleMultipleSelect(e,n):this.handleSingleSelect(e,n))}handleNodeRightClick(e,n){this._adapter.notifyRightClick(e,n.data)}handleNodeDoubleClick(e,n){this._adapter.notifyDoubleClick(e,n.data)}handleSingleSelect(e,n){let r=[...this.getState("selectedKeys")],{selected:i,eventKey:s,data:o}=n;this._adapter.notifySelect(s,!0,o),i||!r.includes(s)&&(r=[s],this.notifyChange(s,e),this._isControlledComponent()||this._adapter.updateState({selectedKeys:r}))}calcCheckedKeys(e,n){let{keyEntities:r}=this.getStates(),i=new Set(this.getState("checkedKeys")),s=new Set(this.getState("halfCheckedKeys"));return n?tk(e,r,i,s):tC(e,r,i,s)}calcCheckedStatus(e,n){if(!e)return e;let{checkedKeys:r,keyEntities:i,disabledKeys:s}=this.getStates(),o=tS(tg([n],i,!1),i,!0);return o.some(e=>s.has(e))?!o.filter(e=>!s.has(e)).every(e=>r.has(e)):e}calcNonDisabledCheckedKeys(e,n){let{keyEntities:r,disabledKeys:i}=this.getStates(),s=new Set(this.getState("checkedKeys")),o=tS(tg([e],r,!1),r,!0);if(!o.some(e=>i.has(e)))return this.calcCheckedKeys(e,n);let a=o.filter(e=>!i.has(e));return tO(n?[...a,...s]:te()(tS([...s],r,!0,!0),a),r)}handleMultipleSelect(e,n){let{disableStrictly:r,checkRelation:i}=this.getProps(),{realCheckedKeys:s}=this.getStates(),{checked:o,eventKey:a,data:l}=n;if("related"===i){let n=r?this.calcCheckedStatus(!o,a):!o,{checkedKeys:i,halfCheckedKeys:s}=r?this.calcNonDisabledCheckedKeys(a,n):this.calcCheckedKeys(a,n);this._adapter.notifySelect(a,n,l),this.notifyChange([...i],e),this._isControlledComponent()||this._adapter.updateState({checkedKeys:i,halfCheckedKeys:s})}else if("unRelated"===i){let n,r=new Set(s);s.has(a)?(r.delete(a),n=!1):(r.add(a),n=!0),this._adapter.notifySelect(a,n,l),this.notifyChange([...r],e),this._isControlledComponent()||this._adapter.updateState({realCheckedKeys:r})}}setExpandedStatus(e){let{inputValue:n,treeData:r,filteredShownKeys:i,keyEntities:s}=this.getStates(),{keyMaps:o}=this.getProps(),a=!!n,l=this._showFilteredOnly(),h=a?"filteredExpandedKeys":"expandedKeys",c=new Set(this.getState(h)),u="show",{eventKey:d,expanded:p,data:f}=e;if(p?c.has(d)&&(c.delete(d),u="hide"):c.add(d),this._adapter.cacheFlattenNodes("hide"===u&&this._isAnimated()),!this._isExpandControlled()){let e=td(r,c,o,a&&l&&i),n=this._isAnimated()?t_(d,c,s):[],p={[h]:c,flattenNodes:e,motionKeys:new Set(n),motionType:u};this._adapter.updateState(p)}return{expandedKeys:c,expanded:!p,data:f}}handleNodeExpand(e,n){let{loadData:r}=this.getProps();if(!r&&(!n.children||!n.children.length))return;let{expandedKeys:i,data:s,expanded:o}=this.setExpandedStatus(n);this._adapter.notifyExpand(i,{expanded:o,node:s})}handleNodeLoad(e,n,r,i){let{loadData:s,onLoad:o}=this.getProps(),{key:a}=r;return!s||e.has(a)||n.has(a)?{}:(s(r).then(()=>{let e=new Set(this.getState("loadedKeys")),n=new Set(this.getState("loadingKeys")),s=e.add(a),l=new Set([...n]);l.delete(a),o&&o(s,r),this._isLoadControlled()||this._adapter.updateState({loadedKeys:s}),this._adapter.setState({loadingKeys:l}),i()}),{loadingKeys:n.add(a)})}getDragEventNodeData(e){return Object.assign(Object.assign({},e.data),tn()(e,["expanded","pos","children"]))}triggerDragEvent(e,n,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=this.getProp(e);s&&s(Object.assign({event:n,node:this.getDragEventNodeData(r)},i))}handleNodeDragStart(e,n){let{keyEntities:r}=this.getStates(),{hideDraggingNode:i,renderDraggingNode:s}=this.getProps(),{eventKey:o,nodeInstance:a,data:l}=n;if(i||s){let n;"function"==typeof s?n=s(a,l):i&&((n=a.cloneNode(!0)).style.opacity=0),document.body.appendChild(n),e.dataTransfer.setDragImage(n,0,0)}this._adapter.setDragNode(n),this._adapter.updateState({dragging:!0,dragNodesKeys:new Set(tg([o],r,!0))}),this.triggerDragEvent("onDragStart",e,n)}handleNodeDragEnter(e,n,r){let{dragging:i,dragNodesKeys:s}=this.getStates(),{autoExpandWhenDragEnter:o}=this.getProps(),{pos:a,eventKey:l,expanded:h}=n;if(!r||s.has(l))return;let c=tN(e,n);if(r.eventKey===l&&0===c)return void this._adapter.updateState({dragOverNodeKey:"",dropPosition:null});setTimeout(()=>{if(this._adapter.updateState({dragOverNodeKey:l,dropPosition:c}),!o||h)return void this.triggerDragEvent("onDragEnter",e,n);this.delayedDragEnterLogic||(this.delayedDragEnterLogic={}),Object.keys(this.delayedDragEnterLogic).forEach(e=>{clearTimeout(this.delayedDragEnterLogic[e])}),this.delayedDragEnterLogic[a]=window.setTimeout(()=>{if(!i)return;let{expandedKeys:r}=this.setExpandedStatus(n);this.triggerDragEvent("onDragEnter",e,n,{expandedKeys:[...r]})},400)},0)}handleNodeDragOver(e,n,r){let{dropPosition:i,dragNodesKeys:s,dragOverNodeKey:o}=this.getStates(),{eventKey:a}=n;if(!s.has(a)){if(r&&a===o){let r=tN(e,n);if(i===r)return;this._adapter.updateState({dropPosition:r})}this.triggerDragEvent("onDragOver",e,n)}}handleNodeDragLeave(e,n){this._adapter.updateState({dragOverNodeKey:""}),this.triggerDragEvent("onDragLeave",e,n)}handleNodeDragEnd(e,n){this.clearDragState(),this.triggerDragEvent("onDragEnd",e,n),this._adapter.setDragNode(null)}handleNodeDrop(e,n,r){let{dropPosition:i,dragNodesKeys:s}=this.getStates(),{eventKey:o,pos:a}=n;if(this.clearDragState(),s.has(o))return;let l={dragNode:r?this.getDragEventNodeData(r):null,dragNodesKeys:[...s],dropPosition:function(e,n){let r=e.split("-");return n+Number(r[r.length-1])}(a,i),dropToGap:0!==i};this.triggerDragEvent("onDrop",e,n,l),this._adapter.setDragNode(null)}}var hh=r(11331),hc=r.n(hh),hu=r(89647),hd=r.n(hu);function hp(e){return hd()(e,e=>{if(hc()(e)&&!e._innerDataTag||z.isValidElement(e))return e})}let hf=th.PREFIX;class hg extends z.PureComponent{constructor(e){super(e),this._onResize=e=>{let n=e&&e[1]&&e[1].target;if(n){let e=en()(n,"offsetHeight")||0,r=window.getComputedStyle(n)||{},i=parseInt(en()(r,"paddingTop"),10)||0,s=parseInt(en()(r,"paddingBottom"),10)||0;this.state.height!==e-i-s&&this.setState({height:e-i-s})}},this.state={height:this.props.defaultHeight||0}}componentDidMount(){let{height:e}=this.state;if("number"==typeof e)return}render(){let{children:e,defaultWidth:n,defaultHeight:r}=this.props,{height:i}=this.state,s=!1;return(0===i||"number"!=typeof i)&&(s=!0),z.createElement(rG,{observeParent:!0,onResize:this._onResize},z.createElement("div",{style:{height:r,overflow:"visible"},className:`${hf}-auto-wrapper`},!s&&e({height:i,width:n})))}}hg.propTypes={defaultHeight:q().oneOfType([q().number,q().string]),defaultWidth:q().oneOfType([q().number,q().string])},hg.defaultProps={defaultHeight:"100%",defaultWidth:"100%"};let hm=z.createContext(null);var hy=r(38221),hO=r.n(hy);let hv=(0,nL.T)(function(e){return z.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),z.createElement("path",{d:"m20.56 9.66-7.8 8.97a1 1 0 0 1-1.51 0L3.44 9.66A1 1 0 0 1 4.19 8h15.62a1 1 0 0 1 .75 1.66Z",fill:"currentColor"}))},"tree_triangle_down"),hb=(0,nL.T)(function(e){return z.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),z.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2a1 1 0 0 0-1-1H6a2 2 0 0 0-2 2v18c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V10a1 1 0 0 0-1-1h-5a2 2 0 0 1-2-2V2ZM7 8a1 1 0 0 1 1-1h1a1 1 0 0 1 0 2H8a1 1 0 0 1-1-1Zm0 5a1 1 0 0 1 1-1h8a1 1 0 1 1 0 2H8a1 1 0 0 1-1-1Zm1 4a1 1 0 1 0 0 2h8a1 1 0 1 0 0-2H8Zm11.07-9.5H14.5a1 1 0 0 1-1-1V1.93a.8.8 0 0 1 1.37-.56l4.76 4.76a.8.8 0 0 1-.56 1.37Z",fill:"currentColor"}))},"file"),hx=(0,nL.T)(function(e){return z.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),z.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 5a3 3 0 0 1 3-3h3.3a2 2 0 0 1 1.25.44l1.13.9a3 3 0 0 0 1.87.66H18c2 0 3 2 3 4H7.53A2 2 0 0 0 5.6 9.48L2.57 20.76C2.21 20.26 2 19.66 2 19V5Zm20.17 5H9.5a2 2 0 0 0-1.92 1.44l-2.7 9.28A1 1 0 0 0 5.82 22H18.5a2 2 0 0 0 1.92-1.44l2.7-9.28a1 1 0 0 0-.95-1.28Z",fill:"currentColor"}))},"folder_open"),hw=(0,nL.T)(function(e){return z.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),z.createElement("path",{d:"M5 2a3 3 0 0 0-3 3v3h20c0-2-1-4-3-4h-6.45a3 3 0 0 1-1.87-.66l-1.13-.9A2 2 0 0 0 8.3 2H5Z",fill:"currentColor"}),z.createElement("path",{d:"M22 10H2v9a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-9Z",fill:"currentColor"}))},"folder"),hS=z.memo(e=>{let{prefixcls:n,level:r,isEnd:i,showLine:s}=e,o=`${n}-indent-unit`,a=[];for(let e=0;e<r;e+=1)a.push(z.createElement("span",{key:e,className:F()(o,{[`${o}-end`]:i[e]})}));return z.createElement("span",{"aria-hidden":"true",className:F()(`${n}-indent`,{[`${n}-indent-show-line`]:s})},a)});var h_=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};let hk=th.PREFIX_OPTION;class hC extends z.PureComponent{constructor(e){super(e),this.onSelect=e=>{let{onNodeSelect:n}=this.context;n(e,this.props)},this.onExpand=e=>{let{onNodeExpand:n}=this.context;e&&e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),n(e,this.props)},this.onCheck=e=>{var n,r;if(this.isDisabled())return;let{onNodeCheck:i}=this.context;e.stopPropagation(),null==(r=null==(n=e.nativeEvent)?void 0:n.stopImmediatePropagation)||r.call(n),i(e,this.props)},this.handleCheckEnterPress=e=>{tW(e)&&this.onCheck(e)},this.onContextMenu=e=>{let{onNodeRightClick:n}=this.context;n(e,this.props)},this.onClick=e=>{let{expandAction:n}=this.context;if("doubleClick"===n)return void this.debounceSelect(e);this.onSelect(e),"click"===n&&this.onExpand(e)},this.handleliEnterPress=e=>{tW(e)&&this.onClick(e)},this.onDoubleClick=e=>{let{expandAction:n,onNodeDoubleClick:r}=this.context;e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),eY()(r)&&r(e,this.props),"doubleClick"===n&&this.onExpand(e)},this.onDragStart=e=>{let{onNodeDragStart:n}=this.context;e.stopPropagation(),n(e,Object.assign(Object.assign({},this.props),{nodeInstance:this.refNode}));try{e.dataTransfer.setData("text/plain","")}catch(e){}},this.onDragEnter=e=>{let{onNodeDragEnter:n}=this.context;e.preventDefault(),e.stopPropagation(),n(e,Object.assign(Object.assign({},this.props),{nodeInstance:this.refNode}))},this.onDragOver=e=>{let{onNodeDragOver:n}=this.context;e.preventDefault(),e.stopPropagation(),n(e,Object.assign(Object.assign({},this.props),{nodeInstance:this.refNode}))},this.onDragLeave=e=>{let{onNodeDragLeave:n}=this.context;e.stopPropagation(),n(e,Object.assign(Object.assign({},this.props),{nodeInstance:this.refNode}))},this.onDragEnd=e=>{let{onNodeDragEnd:n}=this.context;e.stopPropagation(),n(e,Object.assign(Object.assign({},this.props),{nodeInstance:this.refNode}))},this.onDrop=e=>{let{onNodeDrop:n}=this.context;e.preventDefault(),e.stopPropagation(),n(e,Object.assign(Object.assign({},this.props),{nodeInstance:this.refNode}))},this.getNodeChildren=()=>{let{children:e}=this.props;return e||[]},this.isLeaf=()=>{let{isLeaf:e,loaded:n}=this.props,{loadData:r}=this.context,i=0!==this.getNodeChildren().length;return!1!==e&&(e||!r&&!i||r&&n&&!i)},this.isDisabled=()=>{let{disabled:e}=this.props,{treeDisabled:n}=this.context;return!1!==e&&!!(n||e)},this.renderSwitcher=()=>this.isLeaf()?z.createElement("span",{className:F()(`${hk}-switcher`)},z.createElement("span",{className:`${hk}-switcher-leaf-line`})):null,this.renderRealLabel=()=>{let{renderLabel:e}=this.context,{label:n,keyword:r,data:i,filtered:s,treeNodeFilterProp:o}=this.props;return eY()(e)?e(n,i,r):eg()(n)&&s&&r?z.createElement(le,{highlightClassName:`${hk}-highlight`,component:"span",sourceString:n,searchWords:[r]}):n},this.setRef=e=>{this.refNode=e},this.state={},this.debounceSelect=hO()(this.onSelect,500,{leading:!0,trailing:!1})}renderArrow(){var e,n;let r=!this.isLeaf(),{loading:i,expanded:s,showLine:o,expandIcon:a}=this.props;if(i)return z.createElement(nF,{wrapperClassName:`${hk}-spin-icon`});if(r){if(a)if("function"==typeof a)return a({onClick:this.onExpand,className:`${hk}-expand-icon`,expanded:s});else{if(!z.isValidElement(a))return a;let r=F()(`${hk}-expand-icon`,{[null==(e=null==a?void 0:a.props)?void 0:e.className]:null==(n=null==a?void 0:a.props)?void 0:n.className});return z.cloneElement(a,{onClick:this.onExpand,className:r})}return z.createElement(hv,{role:"button","aria-label":`${s?"Expand":"Collapse"} the tree item`,className:`${hk}-expand-icon`,size:"small",onClick:this.onExpand})}return o?this.renderSwitcher():z.createElement("span",{className:`${hk}-empty-icon`})}renderCheckbox(){let{checked:e,halfChecked:n,eventKey:r}=this.props,i=this.isDisabled();return z.createElement("div",{role:"none",onClick:this.onCheck,onKeyPress:this.handleCheckEnterPress},z.createElement(n5,{"aria-label":"Toggle the checked state of checkbox",value:r,indeterminate:n,checked:e,disabled:!!i}))}renderIcon(){let{directory:e,treeIcon:n}=this.context,{expanded:r,icon:i,data:s}=this.props;return i?i:n?"function"==typeof n?n(this.props):n:e?this.isLeaf()?z.createElement(hb,{className:`${hk}-item-icon`}):r?z.createElement(hx,{className:`${hk}-item-icon`}):z.createElement(hw,{className:`${hk}-item-icon`}):null}renderEmptyNode(){let{emptyContent:e}=this.props,n=F()(hk,{[`${hk}-empty`]:!0});return z.createElement("ul",{className:n},z.createElement("li",{className:`${hk}-label ${hk}-label-empty`,"x-semi-prop":"emptyContent"},e))}render(){let e=this.props,{eventKey:n,expanded:r,selected:i,checked:s,halfChecked:o,loading:a,active:l,level:h,empty:c,filtered:u,treeNodeFilterProp:d,display:p,style:f,isEnd:g,showLine:m}=e,y=h_(e,["eventKey","expanded","selected","checked","halfChecked","loading","active","level","empty","filtered","treeNodeFilterProp","display","style","isEnd","showLine"]);if(c)return this.renderEmptyNode();let{multiple:O,draggable:b,renderFullLabel:x,dragOverNodeKey:w,dropPosition:S,labelEllipsis:_}=this.context,k=g[g.length-1],C=this.isDisabled(),E=w===n&&-1===S,T=w===n&&1===S,P=F()(hk,{[`${hk}-level-${h+1}`]:!0,[`${hk}-fullLabel-level-${h+1}`]:x,[`${hk}-collapsed`]:!r,[`${hk}-disabled`]:!!C,[`${hk}-selected`]:i,[`${hk}-active`]:!O&&l,[`${hk}-ellipsis`]:_,[`${hk}-drag-over`]:!C&&w===n&&0===S,[`${hk}-draggable`]:!C&&b&&!x,[`${hk}-fullLabel-draggable`]:!C&&b&&x,[`${hk}-fullLabel-drag-over-gap-top`]:!C&&E&&x,[`${hk}-fullLabel-drag-over-gap-bottom`]:!C&&T&&x,[`${hk}-tree-node-last-leaf`]:k}),A={onClick:this.onClick,onContextMenu:this.onContextMenu,onDoubleClick:this.onDoubleClick,className:P,onExpand:this.onExpand,data:y.data,level:h,onCheck:this.onCheck,style:f,expandIcon:this.renderArrow(),checkStatus:{checked:s,halfChecked:o},expandStatus:{expanded:r,loading:a},filtered:u,searchWord:y.keyword},M={onDoubleClick:this.onDoubleClick,onDragStart:b?this.onDragStart:void 0,onDragEnter:b?this.onDragEnter:void 0,onDragOver:b?this.onDragOver:void 0,onDragLeave:b?this.onDragLeave:void 0,onDrop:b?this.onDrop:void 0,onDragEnd:b?this.onDragEnd:void 0,draggable:!C&&b||void 0};if(x){let e=x(Object.assign({},A));return b?z.cloneElement(e,Object.assign({ref:this.setRef},M)):eH()(f)?e:z.cloneElement(e,{style:Object.assign(Object.assign({},en()(e,["props","style"])),f)})}let N=F()(`${hk}-label`,{[`${hk}-drag-over-gap-top`]:!C&&E,[`${hk}-drag-over-gap-bottom`]:!C&&T}),D=en()(y,["data","children","length"]),I=eg()(y.pos)?Number(y.pos.split("-")[h+1])+1:1;return z.createElement("li",Object.assign({className:P,role:"treeitem","aria-disabled":C,"aria-checked":s,"aria-selected":i,"aria-setsize":D,"aria-posinset":I,"aria-expanded":r,"aria-level":h+1,"data-key":n,onClick:this.onClick,onKeyPress:this.handleliEnterPress,onContextMenu:this.onContextMenu,onDoubleClick:this.onDoubleClick,ref:this.setRef,style:f},M),z.createElement(hS,{showLine:m,prefixcls:hk,level:h,isEnd:g}),this.renderArrow(),z.createElement("span",{className:N},O?this.renderCheckbox():null,this.renderIcon(),z.createElement("span",{className:`${hk}-label-text`},this.renderRealLabel())))}}hC.contextType=hm,hC.propTypes={expanded:q().bool,selected:q().bool,checked:q().bool,halfChecked:q().bool,active:q().bool,disabled:q().bool,loaded:q().bool,loading:q().bool,isLeaf:q().bool,pos:q().string,children:q().oneOfType([q().array,q().object]),icon:q().node,directory:q().bool,keyword:q().string,treeNodeFilterProp:q().string,selectedKey:q().string,motionKey:q().oneOfType([q().string,q().arrayOf(q().string)]),isEnd:q().arrayOf(q().bool),showLine:q().bool,expandIcon:q().oneOfType([q().node,q().func])},hC.defaultProps={selectedKey:"",motionKey:""};var hE=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};let hT=function(e){let{open:n,children:r}=e,i=hE(e,["open","children"]),[s,o]=(0,z.useState)(e.open);return(0,z.useEffect)(()=>{setTimeout(()=>{o(!e.open)},0)},[]),z.createElement(ou,Object.assign({},i,{isOpen:s}),r)};class hP extends z.PureComponent{constructor(e){super(e),this.onMotionEnd=()=>{"function"==typeof this.props.onMotionEnd&&this.props.onMotionEnd(),this.setState({transitionNodes:[]})},this.state={transitionNodes:[]}}static getDerivedStateFromProps(e,n){let{flattenNodes:r=[],motionKeys:i,motionType:s,flattenList:o=[]}=e,a=!eJ()(n.cachedMotionKeys,i)||!eJ()(n.cachedData.map(e=>e.key),r.map(e=>e.key)),l=[...i];if(!a||!l.length)return null;let h=[],c=[],u=0;return("hide"===s&&o?o:r).forEach((e,n)=>{let r=e.key;i.has(r)?(c.push(e),r===l[0]&&(u=n)):h.push(e)}),h.splice(u,0,c),{transitionNodes:h,cachedData:r,cachedMotionKeys:i,cachedMotionType:s}}render(){let{flattenNodes:e,motionType:n,searchTargetIsDeep:r,renderTreeNode:i}=this.props,{transitionNodes:s}=this.state;return(s.length&&!r?s:e).map(e=>{let r=Array.isArray(e);if(r&&!e.length)return null;if(r&&e.length){let r=e[0].key;return z.createElement(hT,{open:"hide"===n,duration:200,motion:!!n,key:`motion-${r}`,onMotionEnd:this.onMotionEnd},e.map(e=>i(e)))}return i(e)})}}hP.contextType=hm;var hA=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};let hM=th.PREFIX,hN={key:q().string,value:q().oneOfType([q().string,q().number]),label:q().any,isLeaf:q().bool,children:q().array};hN.children=q().arrayOf(q().shape(hN));class hD extends ee.A{constructor(e){super(e),this.search=e=>{this.foundation.handleInputChange(e)},this.scrollTo=e=>{var n;let{key:r,align:i="center"}=e,{flattenNodes:s}=this.state;if(r){let e=null==s?void 0:s.findIndex(e=>e.key===r);e>=0&&(null==(n=this.virtualizedListRef.current)||n.scrollToItem(e,i))}},this.renderEmpty=()=>{let{emptyContent:e}=this.props;return e?z.createElement(hC,{empty:!0,emptyContent:this.props.emptyContent}):z.createElement(n$,{componentName:"Tree"},e=>z.createElement(hC,{empty:!0,emptyContent:en()(e,"emptyText")}))},this.onNodeSelect=(e,n)=>{this.foundation.handleNodeSelect(e,n)},this.onNodeLoad=e=>new Promise(n=>{this.setState(r=>{let{loadedKeys:i=new Set([]),loadingKeys:s=new Set([])}=r;return this.foundation.handleNodeLoad(i,s,e,n)})}),this.onNodeCheck=(e,n)=>{this.foundation.handleNodeSelect(e,n)},this.onNodeExpand=(e,n)=>{this.foundation.handleNodeExpand(e,n)},this.onNodeRightClick=(e,n)=>{this.foundation.handleNodeRightClick(e,n)},this.onNodeDoubleClick=(e,n)=>{this.foundation.handleNodeDoubleClick(e,n)},this.onNodeDragStart=(e,n)=>{this.foundation.handleNodeDragStart(e,n)},this.onNodeDragEnter=(e,n)=>{this.foundation.handleNodeDragEnter(e,n,this.dragNode)},this.onNodeDragOver=(e,n)=>{this.foundation.handleNodeDragOver(e,n,this.dragNode)},this.onNodeDragLeave=(e,n)=>{this.foundation.handleNodeDragLeave(e,n)},this.onNodeDragEnd=(e,n)=>{this.foundation.handleNodeDragEnd(e,n)},this.onNodeDrop=(e,n)=>{this.foundation.handleNodeDrop(e,n,this.dragNode)},this.getTreeNodeRequiredProps=()=>{let{expandedKeys:e,selectedKeys:n,checkedKeys:r,halfCheckedKeys:i,keyEntities:s,filteredKeys:o}=this.state;return{expandedKeys:e||new Set,selectedKeys:n||[],checkedKeys:r||new Set,halfCheckedKeys:i||new Set,filteredKeys:o||new Set,keyEntities:s}},this.getTreeNodeKey=e=>{let{data:n}=e,{key:r}=n;return r},this.renderTreeNode=(e,n,r)=>{let{data:i,key:s}=e,o=this.foundation.getTreeNodeProps(s);if(!o)return null;let{keyMaps:a,showLine:l,expandIcon:h}=this.props,c=tn()(e,["key","label","disabled","isLeaf","icon","isEnd"]),u=i[en()(a,"children","children")];return e7()(u)||(c.children=u),z.createElement(hC,Object.assign({},o,i,c,{showLine:l,data:i,expandIcon:h,style:eH()(r)?{}:r}))},this.itemKey=(e,n)=>n[e].key,this.option=e=>{let{index:n,style:r,data:i}=e;return this.renderTreeNode(i[n],n,r)},this.state={inputValue:"",keyEntities:{},treeData:[],flattenNodes:[],selectedKeys:[],checkedKeys:new Set,halfCheckedKeys:new Set,realCheckedKeys:new Set([]),motionKeys:new Set([]),motionType:"hide",expandedKeys:new Set(e.expandedKeys),filteredKeys:new Set,filteredExpandedKeys:new Set,filteredShownKeys:new Set,prevProps:null,loadedKeys:new Set,loadingKeys:new Set,cachedFlattenNodes:void 0,cachedKeyValuePairs:{},disabledKeys:new Set,dragging:!1,dragNodesKeys:new Set,dragOverNodeKey:null,dropPosition:null},this.inputRef=z.createRef(),this.optionsRef=z.createRef(),this.foundation=new hl(this.adapter),this.dragNode=null,this.virtualizedListRef=z.createRef()}static getDerivedStateFromProps(e,n){var r;let i,{prevProps:s}=n,{keyMaps:o}=e,a=n.keyEntities||{},l=n.cachedKeyValuePairs||{},h=!!(e.filterTreeNode&&n.inputValue&&n.inputValue.length),c={prevProps:e},u="expandedKeys"in e,d=n=>{let r=!s&&n in e,i=s&&!eJ()(s[n],e[n]);return r||i},p=d("treeData"),f=d("treeDataSimpleJson");if(p||e.draggable&&(()=>{let n=!s&&"treeData"in e,r=s&&s.treeData!==e.treeData;return n||r})()){c.treeData=i=e.treeData;let n=tp(i,o);c.keyEntities=Object.assign({},n.keyEntities),a=c.keyEntities,c.cachedKeyValuePairs=Object.assign({},n.valueEntities),l=c.cachedKeyValuePairs}else if(f){c.treeData=i=function(e){let n=[],r=(e,n,i,s)=>{let o=[...i,e],a={key:o.join(tc),label:e,value:n};if(eX()(n)){let e=[];Object.entries(n).forEach(n=>{r(n[0],n[1],o,e)}),a.children=e}s.push(a)};return Object.entries(e).forEach(e=>r(e[0],e[1],[],n)),n}(e.treeDataSimpleJson);let n=tp(i,o);c.keyEntities=Object.assign({},n.keyEntities),a=c.keyEntities,c.cachedKeyValuePairs=Object.assign({},n.valueEntities),l=c.cachedKeyValuePairs}i&&e.motion&&s&&e.motion&&(c.motionKeys=new Set([]),c.motionType=null);let g=f||p,m=g&&e.expandAll;if(h){let r;if(i&&(r=tE({treeData:i,inputValue:n.inputValue,filterTreeNode:e.filterTreeNode,filterProps:e.treeNodeFilterProp,showFilteredOnly:e.showFilteredOnly,keyEntities:c.keyEntities,prevExpandedKeys:[...n.filteredExpandedKeys],keyMaps:o}),c.flattenNodes=r.flattenNodes,c.motionKeys=new Set([]),c.filteredKeys=r.filteredKeys,c.filteredShownKeys=r.filteredShownKeys,c.filteredExpandedKeys=r.filteredExpandedKeys),e.expandedKeys){if(c.filteredExpandedKeys=tv(e.expandedKeys,a,e.autoExpandParent||!s),s&&e.motion){let r=n?n.filteredExpandedKeys:new Set([]);if(!i){let i=tx(r,c.filteredExpandedKeys,a),{motionKeys:s}=i,{motionType:o}=i;e.showFilteredOnly&&(s=s.filter(e=>n.filteredShownKeys.has(e))),"hide"===o&&(c.cachedFlattenNodes=hp(n.flattenNodes)),c.motionKeys=new Set(s),c.motionType=o}}c.flattenNodes=td(i||n.treeData,c.filteredExpandedKeys||n.filteredExpandedKeys,o,e.showFilteredOnly&&n.filteredShownKeys)}}else{if(d("expandedKeys")||s&&d("autoExpandParent")){if(c.expandedKeys=tv(e.expandedKeys,a,e.autoExpandParent||!s),s&&e.motion&&!i){let{motionKeys:e,motionType:r}=tx(n.expandedKeys,c.expandedKeys,a);c.motionKeys=new Set(e),c.motionType=r,"hide"===r&&(c.cachedFlattenNodes=hp(n.flattenNodes))}}else!s&&(e.defaultExpandAll||e.expandAll)||m?c.expandedKeys=new Set(Object.keys(a)):!s&&e.defaultExpandedKeys?c.expandedKeys=tv(e.defaultExpandedKeys,a):!s&&e.defaultValue?c.expandedKeys=tb(e.defaultValue,a,e.multiple,l):!s&&e.value?c.expandedKeys=tb(e.value,a,e.multiple,l):!u&&g&&e.value&&!(n.treeData&&(null==(r=n.treeData)?void 0:r.length)>0&&e.loadData)&&(c.expandedKeys=tb(e.value,a,e.multiple,l));if(c.expandedKeys||delete c.expandedKeys,i||c.expandedKeys){let e=td(i||n.treeData,c.expandedKeys||n.expandedKeys,o);c.flattenNodes=e}}let y=e.onChangeWithObject,O=e.multiple;if(O){let r;if(d("value")?r=tf(tP(e.value,y,o),l,O):!s&&e.defaultValue?r=tf(tP(e.defaultValue,y,o),l,O):i&&(r=e.value?tf(tP(e.value,y,o)||[],l,O):tA("related"===e.checkRelation?n.checkedKeys:n.realCheckedKeys,a)),r){if("unRelated"===e.checkRelation)c.realCheckedKeys=new Set(r);else if("related"===e.checkRelation){let{checkedKeys:e,halfCheckedKeys:n}=tO(r,a);c.checkedKeys=e,c.halfCheckedKeys=n}}}else d("value")?c.selectedKeys=tf(tP(e.value,y,o),l,O):!s&&e.defaultValue?c.selectedKeys=tf(tP(e.defaultValue,y,o),l,O):i&&e.value&&(c.selectedKeys=tf(tP(e.value,y,o)||"",l,O));return d("loadedKeys")&&(c.loadedKeys=new Set(e.loadedKeys)),i&&e.disableStrictly&&"related"===e.checkRelation&&(c.disabledKeys=tM(a,o)),c}get adapter(){return Object.assign(Object.assign(Object.assign({},super.adapter),{updateInputValue:e=>{this.setState({inputValue:e})},focusInput:()=>{let{preventScroll:e}=this.props;this.inputRef&&this.inputRef.current&&this.inputRef.current.focus({preventScroll:e})}}),{updateState:e=>{this.setState(Object.assign({},e))},notifyExpand:(e,n)=>{let{expanded:r,node:i}=n;this.props.onExpand&&this.props.onExpand([...e],{expanded:r,node:i}),r&&this.props.loadData&&this.onNodeLoad(i)},notifySelect:(e,n,r)=>{this.props.onSelect&&this.props.onSelect(e,n,r)},notifyChange:e=>{this.props.onChange&&this.props.onChange(e)},notifySearch:(e,n)=>{this.props.onSearch&&this.props.onSearch(e,n)},notifyRightClick:(e,n)=>{this.props.onContextMenu&&this.props.onContextMenu(e,n)},notifyDoubleClick:(e,n)=>{this.props.onDoubleClick&&this.props.onDoubleClick(e,n)},cacheFlattenNodes:e=>{this.setState({cachedFlattenNodes:e?hp(this.state.flattenNodes):void 0})},setDragNode:e=>{this.dragNode=e}})}renderInput(){let{searchClassName:e,searchStyle:n,searchRender:r,searchPlaceholder:i,showClear:s}=this.props;if(!1===r)return null;let o=F()(`${hM}-input`),{inputValue:a}=this.state,l={value:a,className:o,onChange:e=>this.search(e),prefix:z.createElement(lo,null),showClear:s,placeholder:i},h=F()(`${hM}-search-wrapper`,e);return z.createElement("div",{className:h,style:n},z.createElement(n$,{componentName:"Tree"},e=>(l.placeholder=i||en()(e,"searchPlaceholder"),eY()(r))?r(Object.assign({},l)):z.createElement(t2.A,Object.assign({"aria-label":"Filter Tree",ref:this.inputRef},l))))}renderNodeList(){let{flattenNodes:e,cachedFlattenNodes:n,motionKeys:r,motionType:i}=this.state,{virtualize:s,motion:o}=this.props,{direction:a}=this.context;if(!eH()(e))return!s||eH()(s)?z.createElement(hP,{flattenNodes:e,flattenList:n,motionKeys:o?r:new Set([]),motionType:i,onMotionEnd:this.onMotionEnd,renderTreeNode:this.renderTreeNode}):z.createElement(hg,{defaultHeight:s.height,defaultWidth:s.width},n=>{let{height:r,width:i}=n;return z.createElement(rd,{ref:this.virtualizedListRef,itemCount:e.length,itemSize:s.itemSize,height:r,width:i,itemKey:this.itemKey,itemData:e,className:`${hM}-virtual-list`,style:{direction:a}},this.option)})}render(){let{keyEntities:e,motionKeys:n,motionType:r,inputValue:i,filteredKeys:s,dragOverNodeKey:o,dropPosition:a,checkedKeys:l,realCheckedKeys:h}=this.state,c=this.props,{blockNode:u,className:d,style:p,filterTreeNode:f,disabled:g,icon:m,directory:y,multiple:O,showFilteredOnly:b,showLine:x,motion:w,expandAction:S,loadData:_,renderLabel:k,draggable:C,renderFullLabel:E,labelEllipsis:T,virtualize:P,checkRelation:A}=c,M=hA(c,["blockNode","className","style","filterTreeNode","disabled","icon","directory","multiple","showFilteredOnly","showLine","motion","expandAction","loadData","renderLabel","draggable","renderFullLabel","labelEllipsis","virtualize","checkRelation"]),N=F()(`${hM}-wrapper`,d),D=F()(`${hM}-option-list`,{[`${hM}-option-list-block`]:u}),I=!!i&&!s.size,$=eH()(e)||b&&I,R={role:$?"none":"tree"};return"tree"===R.role&&(R["aria-multiselectable"]=!!O),z.createElement(hm.Provider,{value:{treeDisabled:g,treeIcon:m,motion:w,motionKeys:n,motionType:r,filterTreeNode:f,keyEntities:e,onNodeClick:this.onNodeClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeRightClick:this.onNodeRightClick,onNodeDoubleClick:this.onNodeDoubleClick,renderTreeNode:this.renderTreeNode,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop,expandAction:S,directory:y,multiple:O,showFilteredOnly:b,isSearching:!!i,loadData:_,onNodeLoad:this.onNodeLoad,renderLabel:k,draggable:C,renderFullLabel:E,dragOverNodeKey:o,dropPosition:a,labelEllipsis:void 0===T?P:T}},z.createElement("div",Object.assign({"aria-label":this.props["aria-label"],className:N,style:p},this.getDataAttr(M)),f?this.renderInput():null,z.createElement("div",Object.assign({className:D},R),$?this.renderEmpty():O?z.createElement(n3,{value:Array.from("related"===A?l:h)},this.renderNodeList()):this.renderNodeList())))}}hD.contextType=eO,hD.propTypes={autoMergeValue:q().bool,blockNode:q().bool,className:q().string,showClear:q().bool,defaultExpandAll:q().bool,defaultExpandedKeys:q().array,defaultValue:q().oneOfType([q().string,q().array]),directory:q().bool,disabled:q().bool,emptyContent:q().node,expandAll:q().bool,expandedKeys:q().array,filterTreeNode:q().oneOfType([q().func,q().bool]),icon:q().node,onChangeWithObject:q().bool,motion:q().bool,multiple:q().bool,onChange:q().func,onExpand:q().func,onSearch:q().func,onSelect:q().func,onContextMenu:q().func,onDoubleClick:q().func,searchClassName:q().string,searchPlaceholder:q().string,searchStyle:q().object,selectedKey:q().string,showFilteredOnly:q().bool,showLine:q().bool,style:q().object,treeData:q().arrayOf(q().shape(hN)),keyMaps:q().object,treeDataSimpleJson:q().object,treeNodeFilterProp:q().string,value:q().oneOfType([q().string,q().number,q().array,q().object]),virtualize:q().object,autoExpandParent:q().bool,expandAction:q().oneOf([!1,"click","doubleClick"]),searchRender:q().oneOfType([q().func,q().bool]),renderLabel:q().func,renderFullLabel:q().func,leafOnly:q().bool,loadedKeys:q().array,loadData:q().func,onLoad:q().func,disableStrictly:q().bool,draggable:q().bool,autoExpandWhenDragEnter:q().bool,hideDraggingNode:q().bool,renderDraggingNode:q().func,onDragEnd:q().func,onDragEnter:q().func,onDragLeave:q().func,onDragOver:q().func,onDragStart:q().func,onDrop:q().func,labelEllipsis:q().bool,checkRelation:q().string,"aria-label":q().string,preventScroll:q().bool},hD.defaultProps={showClear:!0,disabled:!1,blockNode:!0,multiple:!1,filterTreeNode:!1,autoExpandParent:!1,treeNodeFilterProp:"label",defaultExpandAll:!1,expandAll:!1,onChangeWithObject:!1,motion:!0,leafOnly:!1,showFilteredOnly:!1,showLine:!1,expandAction:!1,disableStrictly:!1,draggable:!1,autoExpandWhenDragEnter:!0,checkRelation:"related",autoMergeValue:!0},hD.TreeNode=hC;let hI=hD,h$={PREFIX:`${W._}-tree-select`,PREFIX_TREE:`${W._}-tree`,PREFIX_OPTION:`${W._}-tree-select-option`},hR="dropdown",hL="trigger";class hQ extends G.A{constructor(e){super(Object.assign({},e)),this.handleKeyDown=e=>{e.key===tq.Qg&&this.getState("isOpen")&&this.close(e)},this._registerClickOutsideHandler=()=>{this._adapter.registerClickOutsideHandler(e=>{this.handlerTriggerBlur(e),this.close(e)})},this.clearInputValue=()=>{let{inputValue:e}=this.getStates();e&&this._adapter.updateInputValue("")},this.onClickSingleTriggerSearchItem=e=>{this.focusInput(!0)}}init(){let{searchAutoFocus:e,searchPosition:n,filterTreeNode:r}=this.getProps(),i=e&&n===hL&&r;this._setDropdownWidth();let s=!this._isDisabled();(this.getProp("defaultOpen")||i)&&s&&(this.open(),this._registerClickOutsideHandler()),i&&s&&this.handleTriggerFocus(null)}destroy(){this._adapter.unregisterClickOutsideHandler()}_setDropdownWidth(){let e,{style:n,dropdownMatchSelectWidth:r}=this.getProps();r&&(e=n&&ey()(n.width)||n&&eg()(n.width)&&!n.width.includes("%")?n.width:this._adapter.getTriggerWidth(),this._adapter.setOptionWrapperWidth(e))}_isMultiple(){return this.getProp("multiple")}_isAnimated(){return this.getProp("motionExpand")}_isDisabled(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.getProp("disabled")||e.disabled}_isExpandControlled(){return this.getProp("expandedKeys")}_isSelectToClose(){return!this.getProp("expandAction")}_isLoadControlled(){return this.getProp("loadedKeys")}_showFilteredOnly(){let{inputValue:e}=this.getStates(),{showFilteredOnly:n}=this.getProps();return!!e&&n}findDataForValue(e){let{value:n,defaultValue:r,keyMaps:i}=this.getProps(),s=en()(i,"value","value"),o=en()(i,"key","key"),a=[];return n?a=Array.isArray(n)?n:[n]:r&&(a=Array.isArray(r)?r:[r]),a.find(n=>n[s]===e||n[o]===e)}constructDataForValue(e){let{treeNodeLabelProp:n,keyMaps:r}=this.getProps();return{[en()(r,"key","key")]:e,[en()(r,"label",n)]:e}}getDataForKeyNotInKeyEntities(e){let{onChangeWithObject:n}=this.getProps();return n?this.findDataForValue(e):this.constructDataForValue(e)}getTreeNodeProps(e){let{expandedKeys:n=new Set([]),selectedKeys:r=[],checkedKeys:i=new Set([]),halfCheckedKeys:s=new Set([]),realCheckedKeys:o=new Set([]),keyEntities:a={},filteredKeys:l=new Set([]),inputValue:h="",loadedKeys:c,loadingKeys:u,filteredExpandedKeys:d=new Set([]),disabledKeys:p=new Set([])}=this.getStates(),{treeNodeFilterProp:f,checkRelation:g}=this.getProps(),m=a[e];if(!m)return null;let y=!1,O=!1;"related"===g?(y=i.has(e),O=s.has(e)):"unRelated"===g&&(y=o.has(e),O=!1);let b={eventKey:e,expanded:h?d.has(e):n.has(e),selected:r.includes(e),checked:y,halfChecked:O,pos:String(m?m.pos:""),level:m.level,filtered:l.has(e),keyword:h,treeNodeFilterProp:f,loading:u.has(e)&&!c.has(e),loaded:c.has(e)};return this.getProp("disableStrictly")&&p.has(e)&&(b.disabled=!0),b}handleNodeLoad(e,n,r,i){let{loadData:s}=this.getProps(),{key:o}=r;return!s||e.has(o)||n.has(o)?{}:(s(r).then(()=>{let e=new Set(this.getState("loadedKeys")),n=new Set(this.getState("loadingKeys")),s=e.add(o),a=new Set([...n]);a.delete(o),this._adapter.notifyLoad(s,r),this._isLoadControlled()||this._adapter.updateState({loadedKeys:s}),this._adapter.setState({loadingKeys:a}),i()}),{loadingKeys:n.add(o)})}focusInput(e){this._adapter.updateInputFocus(e)}_notifyMultipleChange(e,n){let{keyEntities:r}=this.getStates(),{leafOnly:i,checkRelation:s,keyMaps:o,autoMergeValue:a}=this.getProps(),l=[];"related"===s?l=a?tS(e,r,i,!0):e:"unRelated"===s&&(l=e);let h=l.map(e=>r[e]&&r[e].key===e?r[e].data:this.getDataForKeyNotInKeyEntities(e));if(this.getProp("onChangeWithObject"))this._adapter.notifyChangeWithObject(h,n);else{let e=tT(h,o);this._adapter.notifyChange(e,h,n)}}_notifyChange(e,n){let{keyEntities:r}=this.getStates(),{keyMaps:i}=this.getProps();if(this._isMultiple()&&Array.isArray(e))this._notifyMultipleChange(e,n);else{let s=e7()(e)?e:r[e].data,o=e7()(e)?e:tT(s,i);this.getProp("onChangeWithObject")?this._adapter.notifyChangeWithObject(s,n):this._adapter.notifyChange(o,s,n)}}_notifyFocus(e){this._adapter.notifyFocus(e)}handleTriggerFocus(e){this._adapter.updateIsFocus(!0),this._notifyFocus(e),this._registerClickOutsideHandler()}_notifyBlur(e){this._adapter.notifyBlur(e)}handlerTriggerBlur(e){this.getState("isFocus")&&(this._adapter.updateIsFocus(!1),this._notifyBlur(e),this._adapter.unregisterClickOutsideHandler())}toggleHoverState(e){this._adapter.toggleHovering(e)}open(){this._adapter.openMenu(),this._setDropdownWidth()}close(e){this._adapter.closeMenu(),this.getProp("motionExpand")&&this._adapter.updateState({motionKeys:new Set([])})}handleClick(e){let n=this._isDisabled(),{isOpen:r,inputValue:i,isFocus:s}=this.getStates(),{searchPosition:o,clickTriggerToHide:a}=this.getProps();if(!n)if(s||this.handleTriggerFocus(e),r){if("trigger"===o&&i)return;a&&this.close(e)}else this.open()}handleSelectionEnterPress(e){tW(e)&&this.handleClick(e)}handleClear(e){let{searchPosition:n,filterTreeNode:r}=this.getProps(),{inputValue:i,selectedKeys:s}=this.getStates(),o=this._isMultiple(),a=this._isControlledComponent();this._notifyChange(o?[]:void 0,e),a||(this._adapter.rePositionDropdown(),this._adapter.updateState({selectedKeys:[],checkedKeys:new Set,halfCheckedKeys:new Set,realCheckedKeys:new Set([])})),r&&n===hL&&""!==i&&(eH()(s)?this.handleInputChange(""):this.clearInput()),this._adapter.notifyClear(e)}handleClearEnterPress(e){tW(e)&&this.handleClear(e)}removeTag(e){let{disableStrictly:n,checkRelation:r,keyMaps:i}=this.getProps(),{keyEntities:s,disabledKeys:o,realCheckedKeys:a}=this.getStates(),l=s[e]&&s[e].key===e?s[e].data:this.getDataForKeyNotInKeyEntities(e);if(!(l[en()(i,"disabled","disabled")]||n&&o.has(e))){if("unRelated"===r){let n=new Set(a);n.delete(e),this._notifyChange([...n],null),this._isControlledComponent()||(this._adapter.updateState({realCheckedKeys:n}),this._adapter.rePositionDropdown())}else if("related"===r){let{checkedKeys:n,halfCheckedKeys:r}=this.calcCheckedKeys(e,!1);this._notifyChange([...n],null),this._isControlledComponent()||(this._adapter.updateState({checkedKeys:n,halfCheckedKeys:r}),this._adapter.rePositionDropdown())}this._adapter.notifySelect(e,!1,l),this._adapter.rePositionDropdown()}}clearInput(){let{flattenNodes:e,expandedKeys:n,selectedKeys:r,keyEntities:i,treeData:s}=this.getStates(),{keyMaps:o}=this.getProps(),a=new Set(n);this._isExpandControlled();let l=ty(r,i,!1);l.forEach(e=>a.add(e));let h=td(s,a,o);this._adapter.updateState({expandedKeys:a,flattenNodes:h,inputValue:"",motionKeys:new Set([]),filteredKeys:new Set([]),filteredExpandedKeys:new Set(l),filteredShownKeys:new Set([])}),this._adapter.rePositionDropdown()}handleInputChange(e){this._adapter.updateInputValue(e);let{flattenNodes:n,expandedKeys:r,selectedKeys:i,keyEntities:s,treeData:o}=this.getStates(),{showFilteredOnly:a,filterTreeNode:l,treeNodeFilterProp:h,keyMaps:c}=this.getProps(),u="label"!==h?h:en()(c,"label","label"),d=new Set(r),p=[],f=[],g=[],m=[],y=new Set([]);if(e){let n=Object.values(s).filter(n=>{let{data:r}=n;return tw(e,r,l,u)});p=n.map(e=>e.data),g=ty(f=n.map(e=>e.key),s,!1),y=new Set([...tg(f,s,!0),...g]),m=td(o,new Set(g),c,a&&y)}else(g=ty(i,s,!1)).forEach(e=>d.add(e)),m=td(o,d,c);let O=new Set(g);this._adapter.notifySearch(e,Array.from(O),p),this._adapter.updateState({expandedKeys:d,flattenNodes:m,motionKeys:new Set([]),filteredKeys:new Set(f),filteredExpandedKeys:O,filteredShownKeys:y}),this._adapter.rePositionDropdown()}handleNodeSelect(e,n){this._isDisabled(n)||(this._isMultiple()?this.handleMultipleSelect(e,n):this.handleSingleSelect(e,n))}handleSingleSelect(e,n){let r=[...this.getState("selectedKeys")],{clickToHide:i}=this.getProps(),{selected:s,eventKey:o,data:a}=n;this._adapter.notifySelect(o,!0,a),r.includes(o)||s||(r=[o],this._notifyChange(o,e),this._isControlledComponent()||this._adapter.updateState({selectedKeys:r})),i&&(this._isSelectToClose()||!a.children)&&(this.close(e),this.handlerTriggerBlur(e))}calcCheckedKeys(e,n){let{keyEntities:r}=this.getStates(),i=new Set(this.getState("checkedKeys")),s=new Set(this.getState("halfCheckedKeys"));return n?tk(e,r,i,s):tC(e,r,i,s)}handleMultipleSelect(e,n){let{searchPosition:r,disableStrictly:i,checkRelation:s}=this.getProps(),{inputValue:o,realCheckedKeys:a}=this.getStates(),{checked:l,eventKey:h,data:c}=n;if("related"===s){let n=i?this.calcCheckedStatus(!l,h):!l,{checkedKeys:r,halfCheckedKeys:s}=i?this.calcNonDisabledCheckedKeys(h,n):this.calcCheckedKeys(h,n);this._adapter.notifySelect(h,n,c),this._notifyChange([...r],e),this._isControlledComponent()||(this._adapter.updateState({checkedKeys:r,halfCheckedKeys:s}),this._adapter.rePositionDropdown())}else if("unRelated"===s){let n,r=new Set(a);a.has(h)?(r.delete(h),n=!1):(r.add(h),n=!0),this._adapter.notifySelect(h,n,c),this._notifyChange([...r],e),this._isControlledComponent()||(this._adapter.updateState({realCheckedKeys:r}),this._adapter.rePositionDropdown())}r===hL&&""!==o&&this._adapter.updateState({inputValue:""})}calcNonDisabledCheckedKeys(e,n){let{keyEntities:r,disabledKeys:i}=this.getStates(),s=new Set(this.getState("checkedKeys")),o=tS(tg([e],r,!1),r,!0);if(!o.some(e=>i.has(e)))return this.calcCheckedKeys(e,n);let a=o.filter(e=>!i.has(e));return tO(n?[...a,...s]:te()(tS([...s],r,!0,!0),a),r)}calcCheckedStatus(e,n){if(!e)return e;let{checkedKeys:r,keyEntities:i,disabledKeys:s}=this.getStates(),o=tS(tg([n],i,!1),i,!0);return o.some(e=>s.has(e))?!o.filter(e=>!s.has(e)).every(e=>r.has(e)):e}handleNodeExpandInSearch(e,n){let{treeData:r,filteredShownKeys:i,keyEntities:s}=this.getStates(),{keyMaps:o}=this.getProps(),a=this._showFilteredOnly(),l=new Set(this.getState("filteredExpandedKeys")),h="show",{eventKey:c,expanded:u,data:d}=n;if(u?l.has(c)&&(l.delete(c),h="hide"):l.add(c),this._adapter.cacheFlattenNodes("hide"===h&&this._isAnimated()),!this._isExpandControlled()){let e=td(r,l,o,a&&i),n=this._isAnimated()?t_(c,l,s):[],u={filteredExpandedKeys:l,flattenNodes:e,motionKeys:new Set(n),motionType:h};this._adapter.updateState(u)}this._adapter.notifyExpand(l,{expanded:!u,node:d})}handleNodeExpand(e,n){let{loadData:r,keyMaps:i}=this.getProps(),{inputValue:s,keyEntities:o}=this.getStates();if(!r&&(!n.children||!n.children.length))return;let a=this._isExpandControlled();if(s)return void this.handleNodeExpandInSearch(e,n);let{treeData:l}=this.getStates(),h=new Set(this.getState("expandedKeys")),c="show",{eventKey:u,expanded:d,data:p}=n;if(d?h.has(u)&&(h.delete(u),c="hide"):h.add(u),this._adapter.cacheFlattenNodes("hide"===c&&this._isAnimated()),!a){let e=td(l,h,i),n=this._isAnimated()?t_(u,h,o):[],r={expandedKeys:h,flattenNodes:e,motionKeys:new Set(n),motionType:c};this._adapter.updateState(r)}this._adapter.notifyExpand(h,{expanded:!d,node:p})}getRenderTextInSingle(){let e,{renderSelectedItem:n,treeNodeLabelProp:r,keyMaps:i}=this.getProps(),{selectedKeys:s,keyEntities:o}=this.getStates(),a=en()(i,"label",r),l=eY()(n)?n:e=>en()(e,a,null);if(s.length){let n=s[0];e=o[n]&&o[n].key===n?o[n].data:this.getDataForKeyNotInKeyEntities(n)}return e?l(e):null}handleInputTriggerBlur(){this._adapter.updateState({inputTriggerFocus:!1})}handleInputTriggerFocus(){this.clearInput(),this._adapter.updateState({inputTriggerFocus:!0})}setLoadKeys(e,n){this._adapter.updateLoadKeys(e,n)}handlePopoverVisibleChange(e){let{filterTreeNode:n,searchAutoFocus:r,searchPosition:i}=this.getProps();!1===e&&n&&this.clearInputValue(),n&&i===hR&&e&&r&&this.focusInput(!0)}handleAfterClose(){let{filterTreeNode:e}=this.getProps();e&&this.clearInput()}}var hj=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};let hV=h$.PREFIX,hz=h$.PREFIX_TREE;class hB extends ee.A{constructor(e){super(e),this.renderSuffix=()=>{let{suffix:e}=this.props,n=F()({[`${hV}-suffix`]:!0,[`${hV}-suffix-text`]:e&&eg()(e),[`${hV}-suffix-icon`]:(0,es.uR)(e)});return z.createElement("div",{className:n,"x-semi-prop":"suffix"},e)},this.renderPrefix=()=>{let{prefix:e,insetLabel:n,insetLabelId:r}=this.props,i=e||n,s=F()({[`${hV}-prefix`]:!0,[`${hV}-inset-label`]:n,[`${hV}-prefix-text`]:i&&eg()(i),[`${hV}-prefix-icon`]:(0,es.uR)(i)});return z.createElement("div",{className:s,id:r,"x-semi-prop":"prefix,insetLabel"},i)},this.renderContent=()=>{let{dropdownMinWidth:e}=this.state,{dropdownStyle:n,dropdownClassName:r}=this.props,i=Object.assign({minWidth:e},n),s=F()(r,`${hV}-popover`);return z.createElement("div",{className:s,style:i,onKeyDown:this.foundation.handleKeyDown},this.renderTree())},this.removeTag=e=>{this.foundation.removeTag(e)},this.handleClick=e=>{this.foundation.handleClick(e)},this.getDataForKeyNotInKeyEntities=e=>this.foundation.getDataForKeyNotInKeyEntities(e),this.handleSelectionEnterPress=e=>{this.foundation.handleSelectionEnterPress(e)},this.hasValue=()=>{let{multiple:e,checkRelation:n}=this.props,{realCheckedKeys:r,checkedKeys:i,selectedKeys:s}=this.state,o=!1;return e?"related"===n?o=!!i.size:"unRelated"===n&&(o=!!r.size):o=!!s.length,o},this.showClearBtn=()=>{let{showClear:e,disabled:n,searchPosition:r}=this.props,{inputValue:i,isOpen:s,isHovering:o}=this.state;return e&&(this.hasValue()||r===hL&&i)&&!n&&(s||o)},this.renderTagList=e=>{let{keyEntities:n,disabledKeys:r}=this.state,{treeNodeLabelProp:i,leafOnly:s,disabled:o,disableStrictly:a,size:l,renderSelectedItem:h,keyMaps:c}=this.props,u=en()(c,"label",i),d=eY()(h)?h:e=>({isRenderInTag:!0,content:en()(e,u,null)}),p=[];return e.forEach((e,i)=>{let s=n[e]&&n[e].key===e?n[e].data:this.getDataForKeyNotInKeyEntities(e),h=(n,r)=>{r&&"function"==typeof r.preventDefault&&r.preventDefault(),this.removeTag(e)},{content:c,isRenderInTag:u}=s?d(s,{index:i,onClose:h}):{};if(ti()(c)||e7()(c))return;let f={closable:!(o||s.disabled||a&&r.has(s.key)),color:"white",visible:!0,onClose:h,key:`tag-${e}-${i}`,size:"small"===l?"small":"large"};u?p.push(z.createElement(rC,Object.assign({},f),c)):p.push(c)}),p},this.renderSingleTriggerSearchItem=()=>{let{placeholder:e,disabled:n}=this.props,{inputTriggerFocus:r}=this.state,i=this.foundation.getRenderTextInSingle(),s=F()(`${hV}-selection-TriggerSearchItem`,{[`${hV}-selection-TriggerSearchItem-placeholder`]:(r||!i)&&!n,[`${hV}-selection-TriggerSearchItem-disabled`]:n});return z.createElement("span",{className:s,onClick:this.foundation.onClickSingleTriggerSearchItem},i||e)},this.renderSingleTriggerSearch=()=>{let{inputValue:e}=this.state;return z.createElement(z.Fragment,null,this.renderInput(),!e&&this.renderSingleTriggerSearchItem())},this.renderSelectContent=e=>{let{multiple:n,placeholder:r,maxTagCount:i,searchPosition:s,filterTreeNode:o,showRestTagsPopover:a,restTagsPopoverProps:l}=this.props;if(o&&s===hL)return n?this.renderTagInput(e):this.renderSingleTriggerSearch();if(!n||!this.hasValue()){let e=this.foundation.getRenderTextInSingle(),n=F()(`${hV}-selection-content`,{[`${hV}-selection-placeholder`]:!e});return z.createElement("span",{className:n},e||r)}let h=this.renderTagList(e);return z.createElement(as,{maxTagCount:i,tagList:h,size:"large",mode:"custom",showPopover:a,popoverProps:l})},this.handleClear=e=>{e&&e.stopPropagation(),this.foundation.handleClear(e)},this.handleClearEnterPress=e=>{e&&e.stopPropagation(),this.foundation.handleClearEnterPress(e)},this.handleMouseOver=e=>{this.foundation.toggleHoverState(!0)},this.handleMouseLeave=e=>{this.foundation.toggleHoverState(!1)},this.search=e=>{let{isOpen:n}=this.state;n||this.foundation.open(),this.foundation.handleInputChange(e)},this.close=()=>{this.foundation.close(null)},this.renderArrow=()=>{let e=this.showClearBtn(),{arrowIcon:n}=this.props;return e?null:n?z.createElement("div",{className:F()(`${hV}-arrow`),"x-semi-prop":"arrowIcon"},n):null},this.renderClearBtn=()=>{let e=this.showClearBtn(),{clearIcon:n}=this.props,r=F()(`${hV}-clearbtn`);return e?z.createElement("div",{role:"button",tabIndex:0,"aria-label":"Clear TreeSelect value",className:r,onClick:this.handleClear,onKeyPress:this.handleClearEnterPress},n||z.createElement(t0.A,null)):null},this.renderSelection=()=>{let e,n=this.props,{disabled:r,multiple:i,filterTreeNode:s,validateStatus:o,prefix:a,suffix:l,style:h,size:c,insetLabel:u,className:d,placeholder:p,showClear:f,leafOnly:g,searchPosition:m,triggerRender:y,borderless:O,autoMergeValue:b,checkRelation:x}=n,w=hj(n,["disabled","multiple","filterTreeNode","validateStatus","prefix","suffix","style","size","insetLabel","className","placeholder","showClear","leafOnly","searchPosition","triggerRender","borderless","autoMergeValue","checkRelation"]),{inputValue:S,selectedKeys:_,checkedKeys:k,keyEntities:C,isFocus:E,realCheckedKeys:T}=this.state,P=!!s,A="function"==typeof y,M=m===hL&&P,N=M&&eH()(k),D=M&&!eH()(k),I=A?F()(d):F()(hV,{[`${hV}-borderless`]:O,[`${hV}-focus`]:E,[`${hV}-disabled`]:r,[`${hV}-single`]:!i,[`${hV}-multiple`]:i,[`${hV}-multiple-tagInput-empty`]:i&&N,[`${hV}-multiple-tagInput-notEmpty`]:i&&D,[`${hV}-filterable`]:P,[`${hV}-error`]:"error"===o,[`${hV}-warning`]:"warning"===o,[`${hV}-small`]:"small"===c,[`${hV}-large`]:"large"===c,[`${hV}-with-prefix`]:a||u,[`${hV}-with-suffix`]:l,[`${hV}-with-suffix`]:l},d),$=[];i?b?"related"===x?$=tS([...k],C,g,!0):"unRelated"===x&&($=[...T]):$=[...k]:$=_,e=A?z.createElement(ry,{inputValue:S,value:$.map(e=>en()(C,[e,"data"])),disabled:r,placeholder:p,onClear:this.handleClear,componentName:"TreeSelect",triggerRender:y,componentProps:Object.assign({},this.props),onSearch:this.search,onRemove:this.removeTag}):[z.createElement(z.Fragment,{key:"prefix"},a||u?this.renderPrefix():null),z.createElement(z.Fragment,{key:"selection"},z.createElement("div",{className:`${hV}-selection`},this.renderSelectContent($))),z.createElement(z.Fragment,{key:"suffix"},l?this.renderSuffix():null),z.createElement(z.Fragment,{key:"clearBtn"},f||M&&S?this.renderClearBtn():null),z.createElement(z.Fragment,{key:"arrow"},this.renderArrow())];let R=r?null:0;return z.createElement("div",Object.assign({role:"combobox","aria-disabled":r,"aria-haspopup":"tree",tabIndex:R,className:I,style:h,ref:this.triggerRef,onClick:this.handleClick,onKeyPress:this.handleSelectionEnterPress,onKeyDown:this.foundation.handleKeyDown,"aria-invalid":this.props["aria-invalid"],"aria-errormessage":this.props["aria-errormessage"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-describedby":this.props["aria-describedby"],"aria-required":this.props["aria-required"]},f?{onMouseEnter:e=>this.handleMouseOver(e),onMouseLeave:e=>this.handleMouseLeave(e)}:{},this.getDataAttr(w)),e)},this.renderTagItem=(e,n)=>{let{keyEntities:r,disabledKeys:i}=this.state,{size:s,leafOnly:o,disabled:a,disableStrictly:l,renderSelectedItem:h,treeNodeLabelProp:c,keyMaps:u}=this.props,d=en()(u,"label",c),p=tS([e],r,o,!0).map(n=>r[e]&&r[e].key===e?r[e].data:this.getDataForKeyNotInKeyEntities(e)),f=tT(p,u),g=F()(`${hV}-selection-tag`,{[`${hV}-selection-tag-disabled`]:a}),m=!eH()(p)&&!eH()(p[0]),y=l&&m&&i.has(p[0].key),O=m&&!p[0].disabled&&!a&&!y,b=(n,r)=>{r.preventDefault(),this.removeTag(e)},x={size:"small"===s?"small":"large",key:`tag-${f}-${n}`,color:"white",className:g,closable:O,onClose:b},w=p[0],S=eY()(h)?h:e=>({isRenderInTag:!0,content:en()(e,d,null)});if(eY()(S)){let{content:e,isRenderInTag:r}=w?S(w,{index:n,onClose:b}):{};return r?z.createElement(rC,Object.assign({},x),e):e}return z.createElement(rC,Object.assign({},x),f)},this.renderTagInput=e=>{let{disabled:n,size:r,searchAutoFocus:i,placeholder:s,maxTagCount:o,showRestTagsPopover:a,restTagsPopoverProps:l,searchPosition:h,filterTreeNode:c,preventScroll:u}=this.props,{inputValue:d}=this.state;return z.createElement(oi,{maxTagCount:o,disabled:n,onInputChange:e=>this.search(e),ref:this.tagInputRef,placeholder:s,value:e,inputValue:d,size:r,showRestTagsPopover:a,restTagsPopoverProps:l,autoFocus:c&&h===hL?i:void 0,renderTagItem:(e,n)=>this.renderTagItem(e,n),onRemove:e=>this.removeTag(e),expandRestTagsOnClick:!1,preventScroll:u})},this.renderInput=()=>{let{searchPlaceholder:e,searchRender:n,showSearchClear:r,searchPosition:i,searchAutoFocus:s,multiple:o,disabled:a,preventScroll:l}=this.props,{inputValue:h,inputTriggerFocus:c}=this.state,u=i===hR,d={value:h,className:F()({[`${hz}-input`]:u,[`${hV}-inputTrigger`]:!u}),preventScroll:l,onChange:e=>this.search(e)},p={showClear:r,prefix:z.createElement(lo,null)},f=u?p:{autofocus:s,onFocus:e=>this.foundation.handleInputTriggerFocus(),onBlur:e=>this.foundation.handleInputTriggerBlur(),disabled:a},g=F()({[`${hz}-search-wrapper`]:u,[`${hV}-triggerSingleSearch-wrapper`]:!u&&!o,[`${hV}-triggerSingleSearch-upper`]:!u&&c}),m="function"==typeof n||"boolean"==typeof n;return m&&!n?null:z.createElement("div",{className:g},z.createElement(n$,{componentName:"TreeSelect"},r=>{let i=u?e||r.searchPlaceholder:"";return m?n(Object.assign(Object.assign(Object.assign({},f),d),{placeholder:i})):z.createElement(t2.A,Object.assign({"aria-label":"Filter TreeSelect item",ref:this.inputRef,placeholder:i},d,f))}))},this.renderEmpty=()=>{let{emptyContent:e}=this.props;return null===e?null:e?z.createElement(hC,{empty:!0,emptyContent:this.props.emptyContent}):z.createElement(n$,{componentName:"Tree"},e=>z.createElement(hC,{empty:!0,emptyContent:e.emptyText}))},this.onNodeLoad=e=>new Promise(n=>this.foundation.setLoadKeys(e,n)),this.onNodeSelect=(e,n)=>{this.foundation.handleNodeSelect(e,n)},this.onNodeCheck=(e,n)=>{this.foundation.handleNodeSelect(e,n)},this.onNodeExpand=(e,n)=>{this.foundation.handleNodeExpand(e,n)},this.getTreeNodeRequiredProps=()=>{let{expandedKeys:e,selectedKeys:n,checkedKeys:r,halfCheckedKeys:i,keyEntities:s,filteredKeys:o}=this.state;return{expandedKeys:e||new Set,selectedKeys:n||[],checkedKeys:r||new Set,halfCheckedKeys:i||new Set,filteredKeys:o||new Set,keyEntities:s}},this.getTreeNodeKey=e=>{let{data:n}=e,{key:r}=n;return r},this.handlePopoverVisibleChange=e=>{this.foundation.handlePopoverVisibleChange(e)},this.afterClose=()=>{this.foundation.handleAfterClose()},this.renderTreeNode=(e,n,r)=>{let{data:i,key:s}=e,o=this.foundation.getTreeNodeProps(s),{showLine:a}=this.props;if(!o)return null;let l=tn()(e,["key","label","disabled","isLeaf","icon","isEnd"]),{keyMaps:h,expandIcon:c}=this.props,u=i[en()(h,"children","children")];return e7()(u)||(l.children=u),z.createElement(hC,Object.assign({},o,i,l,{data:i,style:r,showLine:a,expandIcon:c}))},this.itemKey=(e,n)=>{let{visibleOptions:r}=n;return r[e].key},this.renderNodeList=()=>{let{flattenNodes:e,cachedFlattenNodes:n,motionKeys:r,motionType:i,filteredKeys:s}=this.state,{direction:o}=this.context,{virtualize:a,motionExpand:l}=this.props,h="expandedKeys"in this.props;if(!a||eH()(a))return z.createElement(hP,{flattenNodes:e,flattenList:n,motionKeys:l?r:new Set([]),motionType:i,searchTargetIsDeep:h&&l&&eH()(r)&&!eH()(s),onMotionEnd:this.onMotionEnd,renderTreeNode:this.renderTreeNode});let c={visibleOptions:e,renderOption:this.renderTreeNode};return z.createElement(hg,{defaultHeight:a.height,defaultWidth:a.width},n=>{let{height:r,width:i}=n;return z.createElement(rd,{itemCount:e.length,itemSize:a.itemSize,height:r,width:i,itemKey:this.itemKey,itemData:c,className:`${hz}-virtual-list`,style:{direction:o}},a6)})},this.renderTree=()=>{let{keyEntities:e,motionKeys:n,motionType:r,inputValue:i,filteredKeys:s,flattenNodes:o,checkedKeys:a,realCheckedKeys:l}=this.state,{loadData:h,filterTreeNode:c,disabled:u,multiple:d,showFilteredOnly:p,motionExpand:f,outerBottomSlot:g,outerTopSlot:m,expandAction:y,labelEllipsis:O,virtualize:b,optionListStyle:x,searchPosition:w,renderLabel:S,renderFullLabel:_,checkRelation:k,emptyContent:C}=this.props,E=F()(`${hz}-wrapper`),T=!!i&&!s.size,P=eH()(o)||p&&T,A=F()(`${hz}-option-list ${hz}-option-list-block`,{[`${hz}-option-list-hidden`]:null===C&&P});return z.createElement(hm.Provider,{value:{loadData:h,treeDisabled:u,motion:f,motionKeys:n,motionType:r,expandAction:y,filterTreeNode:c,keyEntities:e,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeRightClick:ep(),onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,renderTreeNode:this.renderTreeNode,multiple:d,showFilteredOnly:p,isSearching:!!i,renderLabel:S,renderFullLabel:_,labelEllipsis:void 0===O?b:O}},z.createElement("div",{className:E},m,!m&&c&&w===hR&&this.renderInput(),z.createElement("div",{className:A,role:"tree","aria-multiselectable":!!d,style:x},P?this.renderEmpty():d?z.createElement(n3,{value:Array.from("related"===k?a:l)},this.renderNodeList()):this.renderNodeList()),g))},this.state={inputTriggerFocus:!1,isOpen:!1,isFocus:!1,rePosKey:0,dropdownMinWidth:null,inputValue:"",keyEntities:{},treeData:[],flattenNodes:[],cachedFlattenNodes:void 0,selectedKeys:[],checkedKeys:new Set,halfCheckedKeys:new Set,realCheckedKeys:new Set([]),disabledKeys:new Set,motionKeys:new Set([]),motionType:"hide",expandedKeys:new Set(e.expandedKeys),filteredKeys:new Set,filteredExpandedKeys:new Set,filteredShownKeys:new Set,prevProps:null,isHovering:!1,cachedKeyValuePairs:{},loadedKeys:new Set,loadingKeys:new Set},this.inputRef=z.createRef(),this.tagInputRef=z.createRef(),this.triggerRef=z.createRef(),this.optionsRef=z.createRef(),this.clickOutsideHandler=null,this.foundation=new hQ(this.adapter),this.treeSelectID=Math.random().toString(36).slice(2),this.onMotionEnd=()=>{this.adapter.rePositionDropdown()}}static getDerivedStateFromProps(e,n){let r,{prevProps:i,rePosKey:s}=n,{keyMaps:o}=e,a=n=>!i&&n in e||i&&!eJ()(i[n],e[n]),l=e.onChangeWithObject,h=n.keyEntities||{},c=n.cachedKeyValuePairs||{},u={prevProps:e},d=a("treeData"),p=a("expandedKeys"),f=!!(e.filterTreeNode&&n.inputValue&&n.inputValue.length);if(d){u.treeData=r=e.treeData;let n=tp(r,o);u.keyEntities=Object.assign({},n.keyEntities),h=u.keyEntities,u.cachedKeyValuePairs=Object.assign({},n.valueEntities),c=u.cachedKeyValuePairs}r&&e.motion&&!eJ()(Object.keys(u.keyEntities),Object.keys(n.keyEntities))&&i&&e.motion&&(u.motionKeys=new Set([]),u.motionType=null);let g=d&&e.expandAll;if(f){let s;if(r&&(s=tE({treeData:r,inputValue:n.inputValue,filterTreeNode:e.filterTreeNode,filterProps:e.treeNodeFilterProp,showFilteredOnly:e.showFilteredOnly,keyEntities:u.keyEntities,prevExpandedKeys:[...n.filteredExpandedKeys],keyMaps:o}),u.flattenNodes=s.flattenNodes,u.motionKeys=new Set([]),u.filteredKeys=s.filteredKeys,u.filteredShownKeys=s.filteredShownKeys,u.filteredExpandedKeys=s.filteredExpandedKeys),e.expandedKeys){if(u.filteredExpandedKeys=tv(e.expandedKeys,h,e.autoExpandParent||!i),i&&e.motion){let i=n?n.filteredExpandedKeys:new Set([]);if(!r){let r=tx(i,u.filteredExpandedKeys,h),{motionKeys:s}=r,{motionType:o}=r;e.showFilteredOnly&&(s=s.filter(e=>n.filteredShownKeys.has(e))),"hide"===o&&(u.cachedFlattenNodes=hp(n.flattenNodes)),u.motionKeys=new Set(s),u.motionType=o}}u.flattenNodes=td(r||n.treeData,u.filteredExpandedKeys||n.filteredExpandedKeys,o,e.showFilteredOnly&&n.filteredShownKeys)}}else{if(p||i&&a("autoExpandParent")){if(u.expandedKeys=tv(e.expandedKeys,h,e.autoExpandParent||!i),i&&e.motion&&!r){let{motionKeys:e,motionType:r}=tx(n.expandedKeys,u.expandedKeys,h);u.motionKeys=new Set(e),u.motionType=r,"hide"===r&&(u.cachedFlattenNodes=hp(n.flattenNodes))}}else!i&&(e.defaultExpandAll||e.expandAll)||g?u.expandedKeys=new Set(Object.keys(h)):!i&&e.defaultExpandedKeys?u.expandedKeys=tv(e.defaultExpandedKeys,h):!i&&e.defaultValue?u.expandedKeys=tb(tP(e.defaultValue,l,o),h,e.multiple,c):!i&&e.value&&(u.expandedKeys=tb(tP(e.value,l,o),h,e.multiple,c));if(u.expandedKeys||delete u.expandedKeys,r||u.expandedKeys){let e=td(r||n.treeData,u.expandedKeys||n.expandedKeys,o);u.flattenNodes=e}}let m=e.multiple;if(m){let s;if(a("value")?s=tf(tP(e.value,l,o),c,m):!i&&e.defaultValue?s=tf(tP(e.defaultValue,l,o),c,m):r&&(s=e.value?tf(tP(e.value,l,o)||[],c,m):tA("related"===e.checkRelation?n.checkedKeys:n.realCheckedKeys,h)),s){if("unRelated"===e.checkRelation)u.realCheckedKeys=new Set(s);else if("related"===e.checkRelation){let{checkedKeys:e,halfCheckedKeys:n}=tO(s,h);u.checkedKeys=e,u.halfCheckedKeys=n}}}else a("value")?u.selectedKeys=tf(tP(e.value,l,o),c,m):!i&&e.defaultValue?u.selectedKeys=tf(tP(e.defaultValue,l,o),c,m):r&&(e.value?u.selectedKeys=tf(tP(e.value,l,o)||"",c,m):u.selectedKeys=tA(n.selectedKeys,h));return a("loadedKeys")&&(u.loadedKeys=new Set(e.loadedKeys)),(d||a("value"))&&(u.rePosKey=s+1),r&&e.disableStrictly&&"related"===e.checkRelation&&(u.disabledKeys=tM(h,o)),u}get adapter(){var e=this;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},super.adapter),{updateInputValue:e=>{this.setState({inputValue:e})}}),{registerClickOutsideHandler:e=>{this.adapter.unregisterClickOutsideHandler();let n=n=>{let r=this.optionsRef&&this.optionsRef.current,i=this.triggerRef&&this.triggerRef.current,s=e2.findDOMNode(r),o=n.target,a=n.composedPath&&n.composedPath()||[o];!s||s.contains(o)&&s.contains(o.parentNode)||!i||i.contains(o)||a.includes(i)||a.includes(s)||e(n)};this.clickOutsideHandler=n,document.addEventListener("mousedown",n,!1)},unregisterClickOutsideHandler:()=>{this.clickOutsideHandler&&(document.removeEventListener("mousedown",this.clickOutsideHandler,!1),this.clickOutsideHandler=null)},rePositionDropdown:()=>{let{rePosKey:e}=this.state;e+=1,this.setState({rePosKey:e})}}),{updateState:e=>{this.setState(Object.assign({},e))},notifySelect:(e,n,r)=>{this.props.onSelect&&this.props.onSelect(e,n,r)},notifySearch:(e,n,r)=>{this.props.onSearch&&this.props.onSearch(e,n,r)},cacheFlattenNodes:e=>{this.setState({cachedFlattenNodes:e?hp(this.state.flattenNodes):void 0})},notifyLoad:(e,n)=>{let{onLoad:r}=this.props;eY()(r)&&r(e,n)},notifyClear:e=>{this.props.onClear&&this.props.onClear(e)}}),{updateLoadKeys:(e,n)=>{this.setState(r=>{let{loadedKeys:i,loadingKeys:s}=r;return this.foundation.handleNodeLoad(i,s,e,n)})},updateState:e=>{this.setState(Object.assign({},e))},openMenu:()=>{this.setState({isOpen:!0},()=>{this.props.onVisibleChange(!0)})},closeMenu:e=>{this.setState({isOpen:!1},()=>{e&&e(),this.props.onVisibleChange(!1)})},getTriggerWidth:()=>{let e=this.triggerRef.current;return e&&e.getBoundingClientRect().width},setOptionWrapperWidth:e=>{this.setState({dropdownMinWidth:e})},notifyChange:(e,n,r)=>{this.props.onChange&&this.props.onChange(e,n,r)},notifyChangeWithObject:(e,n)=>{this.props.onChange&&this.props.onChange(e,n)},notifyExpand:(e,n)=>{let{expanded:r,node:i}=n;this.props.onExpand&&this.props.onExpand([...e],{expanded:r,node:i}),r&&this.props.loadData&&this.onNodeLoad(i)},notifyFocus:function(){e.props.onFocus&&e.props.onFocus(...arguments)},notifyBlur:function(){e.props.onBlur&&e.props.onBlur(...arguments)},toggleHovering:e=>{this.setState({isHovering:e})},updateInputFocus:e=>{if(e){if(this.inputRef&&this.inputRef.current){let{preventScroll:e}=this.props;this.inputRef.current.focus({preventScroll:e})}this.tagInputRef&&this.tagInputRef.current&&this.tagInputRef.current.focus()}else this.inputRef&&this.inputRef.current&&this.inputRef.current.blur(),this.tagInputRef&&this.tagInputRef.current&&this.tagInputRef.current.blur()},updateIsFocus:e=>{this.setState({isFocus:e})}})}componentDidMount(){this.foundation.init()}componentWillUnmount(){this.foundation.destroy()}render(){let e=this.renderContent(),{motion:n,zIndex:r,mouseLeaveDelay:i,mouseEnterDelay:s,autoAdjustOverflow:o,stopPropagation:a,getPopupContainer:l,dropdownMargin:h,position:c}=this.props,{isOpen:u,rePosKey:d}=this.state,p=this.renderSelection();return z.createElement(nx,{stopPropagation:a,getPopupContainer:l,zIndex:r,motion:n,margin:h,ref:this.optionsRef,content:e,visible:u,trigger:"custom",rePosKey:d,position:c||"bottomLeft",autoAdjustOverflow:o,mouseLeaveDelay:i,mouseEnterDelay:s,onVisibleChange:this.handlePopoverVisibleChange,afterClose:this.afterClose},p)}}hB.contextType=eO,hB.propTypes={"aria-describedby":q().string,"aria-errormessage":q().string,"aria-invalid":q().bool,"aria-labelledby":q().string,"aria-required":q().bool,borderless:q().bool,loadedKeys:q().arrayOf(q().string),loadData:q().func,onLoad:q().func,arrowIcon:q().node,clearIcon:q().node,defaultOpen:q().bool,defaultValue:q().oneOfType([q().string,q().array,q().object]),defaultExpandAll:q().bool,defaultExpandedKeys:q().array,expandAll:q().bool,disabled:q().bool,disableStrictly:q().bool,filterTreeNode:q().oneOfType([q().func,q().bool]),multiple:q().bool,searchPlaceholder:q().string,searchAutoFocus:q().bool,virtualize:q().object,treeNodeFilterProp:q().string,onChange:q().func,onClear:q().func,onSearch:q().func,onSelect:q().func,onExpand:q().func,onChangeWithObject:q().bool,onBlur:q().func,onFocus:q().func,value:q().oneOfType([q().string,q().number,q().array,q().object]),expandedKeys:q().array,autoExpandParent:q().bool,showClear:q().bool,showSearchClear:q().bool,autoAdjustOverflow:q().bool,showFilteredOnly:q().bool,showLine:q().bool,motionExpand:q().bool,emptyContent:q().node,keyMaps:q().object,leafOnly:q().bool,treeData:q().arrayOf(q().shape({key:q().string,value:q().oneOfType([q().string,q().number]),label:q().any})),dropdownClassName:q().string,dropdownStyle:q().object,dropdownMargin:q().oneOfType([q().number,q().object]),motion:q().bool,placeholder:q().string,maxTagCount:q().number,size:q().oneOf(["small","large","default"]),className:q().string,style:q().object,treeNodeLabelProp:q().string,suffix:q().node,prefix:q().node,insetLabel:q().node,insetLabelId:q().string,zIndex:q().number,getPopupContainer:q().func,dropdownMatchSelectWidth:q().bool,validateStatus:q().oneOf(o7),mouseEnterDelay:q().number,mouseLeaveDelay:q().number,triggerRender:q().func,stopPropagation:q().oneOfType([q().bool,q().string]),outerBottomSlot:q().node,outerTopSlot:q().node,onVisibleChange:q().func,expandAction:q().oneOf(["click","doubleClick",!1]),searchPosition:q().oneOf([hR,hL]),clickToHide:q().bool,renderLabel:q().func,renderFullLabel:q().func,labelEllipsis:q().bool,optionListStyle:q().object,searchRender:q().oneOfType([q().func,q().bool]),renderSelectedItem:q().func,checkRelation:q().string,"aria-label":q().string,showRestTagsPopover:q().bool,restTagsPopoverProps:q().object,preventScroll:q().bool,clickTriggerToHide:q().bool,autoMergeValue:q().bool},hB.defaultProps={borderless:!1,searchPosition:hR,arrowIcon:z.createElement(t1.A,null),autoExpandParent:!1,autoAdjustOverflow:!0,stopPropagation:!0,motion:!0,motionExpand:!0,expandAll:!1,zIndex:tJ.DEFAULT_Z_INDEX,disableStrictly:!1,multiple:!1,filterTreeNode:!1,size:"default",treeNodeFilterProp:"label",onChangeWithObject:!1,treeNodeLabelProp:"label",dropdownMatchSelectWidth:!0,defaultOpen:!1,showSearchClear:!0,showClear:!1,onVisibleChange:ep(),expandAction:!1,clickToHide:!0,searchAutoFocus:!1,checkRelation:"related","aria-label":"TreeSelect",showRestTagsPopover:!1,restTagsPopoverProps:{},clickTriggerToHide:!0,autoMergeValue:!0};let hF=hB;var hZ=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};class hq extends z.PureComponent{render(){let e=this.props,{heading:n}=e,r=hZ(e,["heading"]),i=-1!==rR.indexOf(n)?`h${n}`:"h1";return z.createElement(r0,Object.assign({component:i,heading:i},r))}}hq.propTypes={copyable:q().oneOfType([q().object,q().bool]),delete:q().bool,disabled:q().bool,ellipsis:q().oneOfType([q().object,q().bool]),mark:q().bool,link:q().oneOfType([q().object,q().bool]),underline:q().bool,strong:q().bool,type:q().oneOf(rD),heading:q().oneOf(rR),style:q().object,className:q().string,component:q().string,weight:q().oneOfType([q().oneOf(["light","regular","medium","semibold","bold","default"]),q().number])},hq.defaultProps={copyable:!1,delete:!1,disabled:!1,ellipsis:!1,mark:!1,underline:!1,strong:!1,link:!1,type:"primary",heading:1,style:{},className:""};class hW{constructor(e,n,r,i,s){this.ruleMethods={"bytes-decimal":e=>{let n=0;for(;e>=1e3;)e/=1e3,n++;return`${this.truncatePrecision(e)} ${["B","KB","MB","GB","TB","PB","EB","ZB","YB"][n]}`},"bytes-binary":e=>{let n=0;for(;e>=1024;)e/=1024,n++;return`${this.truncatePrecision(e)} ${["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"][n]}`},percentages:e=>`${this.truncatePrecision(100*e)}%`,exponential:e=>{let n=e.toExponential(this.precision+2).split("e");return`${this.truncatePrecision(Number(n[0]))}e${n[1]}`}},this.truncateMethods={ceil:Math.ceil,floor:Math.floor,round:Math.round},this.isDiyParser=void 0!==s,this.content=e,this.rule=n,this.precision=r,this.truncate=i,this.parser=s}format(){return this.isDiyParser?this.parser(this.content):"text"===this.rule?hX(this.content).map(e=>hU(e)?this.truncatePrecision(e):e).join(""):"numbers"===this.rule?hX(this.content).filter(e=>hU(e)).map(e=>this.truncatePrecision(e)).join(","):hX(this.content).map(e=>hU(e)?this.ruleMethods[this.rule](Number(e)):e).join("")}truncatePrecision(e){let n=this.truncateMethods[this.truncate](Number(e)*Math.pow(10,this.precision))/Math.pow(10,this.precision),r=n.toString().split(".");if(1===r.length)return n.toFixed(this.precision);let i=r[1].length;return i<this.precision?`${r[0]}.${r[1]}${"0".repeat(this.precision-i)}`:n.toString()}}function hX(e){return e.match(/(-?[0-9]*\.?[0-9]+([eE]-?[0-9]+)?)|([^-\d\.]+)/g)||[]}function hU(e){return!(isNaN(Number(e))||""===e.replace(/\s+/g,""))}class hY extends z.PureComponent{formatNodeDFS(e){return Array.isArray(e)||(e=[e]),1===(e=e.map(e=>"string"==typeof e||"number"==typeof e?new hW(String(e),this.props.rule,this.props.precision,this.props.truncate,this.props.parser).format():"function"==typeof e?this.formatNodeDFS(e()):"object"==typeof e&&"children"in e.props?Object.assign(Object.assign({},e),{props:Object.assign(Object.assign({},e.props),{children:this.formatNodeDFS(e.props.children)})}):e)).length?e[0]:e}render(){let e=Object.assign({},this.props);return delete e.rule,delete e.parser,e.children=this.formatNodeDFS(this.props.children),z.createElement(r0,Object.assign({component:"span"},e))}}hY.propTypes={rule:q().oneOf(["text","numbers","bytes-decimal","bytes-binary","percentages","exponential"]),precision:q().number,truncate:q().oneOf(["ceil","floor","round"]),parser:q().func,copyable:q().oneOfType([q().object,q().bool]),delete:q().bool,disabled:q().bool,icon:q().oneOfType([q().node,q().string]),mark:q().bool,underline:q().bool,link:q().oneOfType([q().object,q().bool]),strong:q().bool,type:q().oneOf(rD),size:q().oneOf(rI),style:q().object,className:q().string,code:q().bool,component:q().string},hY.defaultProps={rule:"text",precision:0,truncate:"round",parser:void 0,copyable:!1,delete:!1,icon:"",mark:!1,underline:!1,strong:!1,link:!1,type:"primary",style:{},size:"normal",className:""},rz.Text=a5,rz.Title=hq,rz.Paragraph=r2,rz.Numeral=hY;let hG=rz},79500:function(e,n,r){"use strict";r.d(n,{A:()=>j});var i=r(62216),s=r.n(i),o=r(1882),a=r.n(o),l=r(63950),h=r.n(l),c=r(85015),u=r.n(c),d=r(96540),p=r(53978),f=r.n(p),g=r(5556),m=r.n(g),y=r(98023),O=r.n(y),b=r(63560),x=r.n(b),w=r(79613),S=r(51188),_=r(24330),k=r(45789);class C extends w.A{static get inputDefaultAdapter(){return{notifyChange:h(),setValue:h()}}constructor(e){super(Object.assign(Object.assign({},C.inputDefaultAdapter),e)),this.compositionEnter=!1,this.getNextValue=e=>{let{maxLength:n,minLength:r,getValueLength:i}=this._adapter.getProps();return a()(i)?n?this.handleVisibleMaxLength(e):(r&&this.handleVisibleMinLength(e),e):e},this.changeInput=(e,n)=>{this._isControlledComponent()||this._adapter.setValue(e),this._adapter.notifyChange(e,n)},this.handleCompositionStart=e=>{this.compositionEnter=!0,this._adapter.notifyCompositionStart(e)},this.handleCompositionEnd=e=>{let n=e.target.value;this.compositionEnter=!1,this._adapter.notifyCompositionEnd(e);let{getValueLength:r,maxLength:i,minLength:s}=this.getProps();if(a()(r)){if(i){let r=this.handleVisibleMaxLength(n);r!==n&&this.changeInput(r,e)}s&&this.handleVisibleMinLength(n)}},this.handleCompositionUpdate=e=>{this._adapter.notifyCompositionUpdate(e)}}destroy(){this._timer&&(clearTimeout(this._timer),this._timer=null)}setDisable(){}setValue(e){this._adapter.setValue(e)}handleChange(e,n){let r=e;this.compositionEnter||(r=this.getNextValue(r)),this.changeInput(r,n)}handleVisibleMinLength(e){let{minLength:n,getValueLength:r}=this._adapter.getProps(),{minLength:i}=this._adapter.getStates();if(O()(n)&&n>=0&&a()(r)&&u()(e)){let s=r(e);if(s<n){let r=e.length+(n-s);r!==i&&this._adapter.setMinLength(r)}else i!==n&&this._adapter.setMinLength(n)}}handleVisibleMaxLength(e){let{maxLength:n,getValueLength:r}=this._adapter.getProps();return O()(n)&&n>=0&&a()(r)&&u()(e)&&r(e)>n?(console.warn("[Semi Input] The input character is truncated because the input length exceeds the maximum length limit"),this.handleTruncateValue(e,n)):e}handleTruncateValue(e,n){let{getValueLength:r}=this._adapter.getProps();return(0,k.A)({value:e,maxLength:n,getValueLength:r})}handleClear(e){let n=e;this._isControlledComponent("value")?this._adapter.setState({isFocus:!1}):this._adapter.setState({value:"",isFocus:!1}),n&&"object"==typeof n||(n={}),x()(n,S.P$.CLEARBTN_CLICKED_EVENT_FLAG,!0),this._adapter.notifyChange("",n),this._adapter.notifyClear(n),n&&this.stopPropagation(n)}handleClick(e){let{disabled:n}=this._adapter.getProps(),{isFocus:r}=this._adapter.getStates();n||r||this._adapter.isEventTarget(e)&&(this._adapter.focusInput(),this._adapter.toggleFocusing(!0))}handleModeChange(e){"password"===e?this._adapter.setEyeClosed(!0):this._adapter.setEyeClosed(!1)}handleClickEye(e){let n=this._adapter.getState("eyeClosed");this._adapter.focusInput(),this._adapter.toggleFocusing(!0),this._adapter.setEyeClosed(!n)}handleInputType(e){let n=this._adapter.getProp("mode"),r=this._adapter.getState("eyeClosed");return"password"===n?r?"password":"text":e}handleMouseDown(e){e.preventDefault()}handleMouseUp(e){e.preventDefault()}handleBlur(e){let{value:n}=this.getStates();this._adapter.toggleFocusing(!1),this._adapter.notifyBlur(n,e)}handleFocus(e){let{value:n}=this.getStates();this._adapter.toggleFocusing(!0),this._adapter.notifyFocus(n,e)}handleInput(e){this._adapter.notifyInput(e)}handleKeyDown(e){this._adapter.notifyKeyDown(e)}handleKeyUp(e){this._adapter.notifyKeyUp(e)}handleKeyPress(e){this._adapter.notifyKeyPress(e),e.key===_.jD&&this._adapter.notifyEnterPress(e)}isAllowClear(){let{value:e,isFocus:n,isHovering:r}=this._adapter.getStates(),{showClear:i,disabled:s,showClearIgnoreDisabled:o}=this._adapter.getProps();return e&&i&&(!s||o)&&(n||r)}handleClickPrefixOrSuffix(e){let{disabled:n}=this._adapter.getProps(),{isFocus:r}=this._adapter.getStates();n||r||(this._adapter.focusInput(),this._adapter.toggleFocusing(!0))}handlePreventMouseDown(e){e&&a()(e.preventDefault)&&e.preventDefault()}handleModeEnterPress(e){["Enter"," "].includes(null==e?void 0:e.key)&&(this.handlePreventMouseDown(e),this.handleClickEye(e))}}var E=r(97606),T=r(39944),P=r(89480),A=r(41393);let M=(0,A.T)(function(e){return d.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.7 3.7a1 1 0 0 0-1.4-1.4L17.3 5.26A11.59 11.59 0 0 0 12 4C5 4 1 10 1 12c0 1.18 1.38 3.73 3.94 5.64L2.3 20.3a1 1 0 1 0 1.42 1.42l18-18ZM7.84 14.77l1.46-1.47a3 3 0 0 1 4-4l1.47-1.46a5 5 0 0 0-6.93 6.93Z",fill:"currentColor"}),d.createElement("path",{d:"M12 20c-1.22 0-2.35-.18-3.38-.5l2.57-2.57a5 5 0 0 0 5.75-5.75l3.56-3.56C22.13 9.27 23 11.07 23 12c0 2-4 8-11 8Z",fill:"currentColor"}))},"eye_closed_solid"),N=(0,A.T)(function(e){return d.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 4C5 4 1 10 1 12s4 8 11 8 11-6 11-8-4-8-11-8Zm5 8a5 5 0 1 1-10 0 5 5 0 0 1 10 0Zm-5 3a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z",fill:"currentColor"}))},"eye_opened");var D=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>n.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r};let I=S.Y7.PREFIX,$=S.P$.SIZE,R=S.P$.STATUS,L=S.P$.MODE;class Q extends T.A{constructor(e){super(e),this.handleClear=e=>{this.foundation.handleClear(e)},this.handleClick=e=>{this.foundation.handleClick(e)},this.handleMouseOver=e=>{this.setState({isHovering:!0})},this.handleMouseLeave=e=>{this.setState({isHovering:!1})},this.handleModeChange=e=>{this.foundation.handleModeChange(e)},this.handleClickEye=e=>{this.foundation.handleClickEye(e)},this.handleMouseDown=e=>{this.foundation.handleMouseDown(e)},this.handleMouseUp=e=>{this.foundation.handleMouseUp(e)},this.handleModeEnterPress=e=>{this.foundation.handleModeEnterPress(e)},this.handleClickPrefixOrSuffix=e=>{this.foundation.handleClickPrefixOrSuffix(e)},this.handlePreventMouseDown=e=>{this.foundation.handlePreventMouseDown(e)};let n="value"in e?e.value:e.defaultValue;this.state={value:n,cachedValue:e.value,disabled:!1,props:{},isFocus:!1,isHovering:!1,eyeClosed:"password"===e.mode,minLength:e.minLength},this.inputRef=d.createRef(),this.prefixRef=d.createRef(),this.suffixRef=d.createRef(),this.foundation=new C(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{setValue:e=>this.setState({value:e}),setEyeClosed:e=>this.setState({eyeClosed:e}),toggleFocusing:e=>{this.setState({isFocus:e})},focusInput:()=>{let{preventScroll:e}=this.props,n=this.inputRef&&this.inputRef.current;n&&n.focus({preventScroll:e})},toggleHovering:e=>this.setState({isHovering:e}),getIfFocusing:()=>this.state.isFocus,notifyChange:(e,n)=>this.props.onChange(e,n),notifyBlur:(e,n)=>this.props.onBlur(n),notifyFocus:(e,n)=>this.props.onFocus(n),notifyInput:e=>this.props.onInput(e),notifyKeyPress:e=>this.props.onKeyPress(e),notifyKeyDown:e=>this.props.onKeyDown(e),notifyKeyUp:e=>this.props.onKeyUp(e),notifyEnterPress:e=>this.props.onEnterPress(e),notifyClear:e=>this.props.onClear(e),notifyCompositionStart:e=>this.props.onCompositionStart(e),notifyCompositionEnd:e=>this.props.onCompositionEnd(e),notifyCompositionUpdate:e=>this.props.onCompositionUpdate(e),setMinLength:e=>this.setState({minLength:e}),isEventTarget:e=>e&&e.target===e.currentTarget})}static getDerivedStateFromProps(e,n){let r={};return e.value!==n.cachedValue&&(r.value=e.value,r.cachedValue=e.value),r}componentDidUpdate(e){let{mode:n}=this.props;e.mode!==n&&this.handleModeChange(n)}componentDidMount(){let{disabled:e,autoFocus:n,preventScroll:r}=this.props;!e&&(n||this.props.autofocus)&&this.inputRef.current.focus({preventScroll:r})}renderPrepend(){let{addonBefore:e}=this.props;if(e){let n=f()({[`${I}-prepend`]:!0,[`${I}-prepend-text`]:e&&u()(e),[`${I}-prepend-icon`]:(0,E.uR)(e)});return d.createElement("div",{className:n,"x-semi-prop":"addonBefore"},e)}return null}renderAppend(){let{addonAfter:e}=this.props;if(e){let n=f()({[`${I}-append`]:!0,[`${I}-append-text`]:e&&u()(e),[`${I}-append-icon`]:(0,E.uR)(e)});return d.createElement("div",{className:n,"x-semi-prop":"addonAfter"},e)}return null}renderClearBtn(){let e=f()(`${I}-clearbtn`),{clearIcon:n}=this.props;return this.foundation.isAllowClear()?d.createElement("div",{className:e,onMouseDown:this.handleClear},n||d.createElement(P.A,null)):null}renderModeBtn(){let{eyeClosed:e}=this.state,{mode:n,disabled:r}=this.props,i=f()(`${I}-modebtn`),s=e?d.createElement(M,null):d.createElement(N,null);return"password"!==n||r?null:d.createElement("div",{role:"button",tabIndex:0,"aria-label":e?"Show password":"Hidden password",className:i,onClick:this.handleClickEye,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onKeyPress:this.handleModeEnterPress},s)}renderPrefix(){let{prefix:e,insetLabel:n,insetLabelId:r}=this.props,i=e||n;if(!i)return null;let s=f()({[`${I}-prefix`]:!0,[`${I}-inset-label`]:n,[`${I}-prefix-text`]:i&&u()(i),[`${I}-prefix-icon`]:(0,E.uR)(i)});return d.createElement("div",{className:s,onMouseDown:this.handlePreventMouseDown,onClick:this.handleClickPrefixOrSuffix,id:r,"x-semi-prop":"prefix,insetLabel"},i)}renderSuffix(e){let{suffix:n,hideSuffix:r}=this.props;if(!n)return null;let i=f()({[`${I}-suffix`]:!0,[`${I}-suffix-text`]:n&&u()(n),[`${I}-suffix-icon`]:(0,E.uR)(n),[`${I}-suffix-hidden`]:e&&!!r});return d.createElement("div",{className:i,onMouseDown:this.handlePreventMouseDown,onClick:this.handleClickPrefixOrSuffix,"x-semi-prop":"suffix"},n)}getInputRef(){let{forwardRef:e}=this.props;if(!s()(e)){if("function"==typeof e)return n=>{e(n),this.inputRef={current:n}};else if("[object Object]"===Object.prototype.toString.call(e))return this.inputRef=e,e}return this.inputRef}render(){let e=this.props,{addonAfter:n,addonBefore:r,autoFocus:i,clearIcon:s,className:o,disabled:l,defaultValue:h,placeholder:c,prefix:u,mode:p,insetLabel:g,insetLabelId:m,validateStatus:y,type:O,readonly:b,size:x,suffix:w,style:S,showClear:_,onEnterPress:k,onClear:C,hideSuffix:T,inputStyle:P,forwardRef:A,maxLength:M,getValueLength:N,preventScroll:$,borderless:R,showClearIgnoreDisabled:L,onlyBorder:Q}=e,j=D(e,["addonAfter","addonBefore","autoFocus","clearIcon","className","disabled","defaultValue","placeholder","prefix","mode","insetLabel","insetLabelId","validateStatus","type","readonly","size","suffix","style","showClear","onEnterPress","onClear","hideSuffix","inputStyle","forwardRef","maxLength","getValueLength","preventScroll","borderless","showClearIgnoreDisabled","onlyBorder"]),{value:V,isFocus:z,minLength:B}=this.state,F=this.foundation.isAllowClear(),Z=(0,E.uR)(w),q=this.getInputRef(),W=`${I}-wrapper`,X=f()(W,o,{[`${I}-wrapper__with-prefix`]:u||g,[`${I}-wrapper__with-suffix`]:w,[`${I}-wrapper__with-suffix-hidden`]:F&&!!T,[`${I}-wrapper__with-suffix-icon`]:Z,[`${I}-wrapper__with-append`]:r,[`${I}-wrapper__with-prepend`]:n,[`${I}-wrapper__with-append-only`]:r&&!n,[`${I}-wrapper__with-prepend-only`]:!r&&n,[`${W}-readonly`]:b,[`${W}-disabled`]:l,[`${W}-warning`]:"warning"===y,[`${W}-error`]:"error"===y,[`${W}-focus`]:z,[`${W}-clearable`]:_,[`${W}-modebtn`]:"password"===p,[`${W}-hidden`]:"hidden"===O,[`${W}-${x}`]:x,[`${I}-borderless`]:R,[`${I}-only_border`]:null!=Q}),U=f()(I,{[`${I}-${x}`]:x,[`${I}-disabled`]:l,[`${I}-sibling-clearbtn`]:this.foundation.isAllowClear(),[`${I}-sibling-modebtn`]:"password"===p}),Y=Object.assign(Object.assign({},j),{style:P,className:U,disabled:l,readOnly:b,type:this.foundation.handleInputType(O),placeholder:c,onInput:e=>this.foundation.handleInput(e),onChange:e=>this.foundation.handleChange(e.target.value,e),onFocus:e=>this.foundation.handleFocus(e),onBlur:e=>this.foundation.handleBlur(e),onKeyUp:e=>this.foundation.handleKeyUp(e),onKeyDown:e=>this.foundation.handleKeyDown(e),onKeyPress:e=>this.foundation.handleKeyPress(e),onCompositionStart:this.foundation.handleCompositionStart,onCompositionEnd:this.foundation.handleCompositionEnd,onCompositionUpdate:this.foundation.handleCompositionUpdate,value:null==V?"":V});a()(N)||(Y.maxLength=M),B&&(Y.minLength=B),"error"===y&&(Y["aria-invalid"]="true");let G=Object.assign({},S);return void 0!==Q&&(G=Object.assign({borderWidth:Q},S)),d.createElement("div",{className:X,style:G,onMouseEnter:e=>this.handleMouseOver(e),onMouseLeave:e=>this.handleMouseLeave(e),onClick:e=>this.handleClick(e)},this.renderPrepend(),this.renderPrefix(),d.createElement("input",Object.assign({},Y,{ref:q})),this.renderClearBtn(),this.renderSuffix(F),this.renderModeBtn(),this.renderAppend())}}Q.propTypes={"aria-label":m().string,"aria-labelledby":m().string,"aria-invalid":m().bool,"aria-errormessage":m().string,"aria-describedby":m().string,"aria-required":m().bool,addonBefore:m().node,addonAfter:m().node,clearIcon:m().node,prefix:m().node,suffix:m().node,mode:m().oneOf(L),value:m().any,defaultValue:m().any,disabled:m().bool,readonly:m().bool,autoFocus:m().bool,type:m().string,showClear:m().bool,hideSuffix:m().bool,placeholder:m().any,size:m().oneOf($),className:m().string,style:m().object,validateStatus:m().oneOf(R),onClear:m().func,onChange:m().func,onBlur:m().func,onFocus:m().func,onInput:m().func,onKeyDown:m().func,onKeyUp:m().func,onKeyPress:m().func,onEnterPress:m().func,onCompositionStart:m().func,onCompositionEnd:m().func,onCompositionUpdate:m().func,insetLabel:m().node,insetLabelId:m().string,inputStyle:m().object,getValueLength:m().func,preventScroll:m().bool,borderless:m().bool},Q.defaultProps={addonBefore:"",addonAfter:"",prefix:"",suffix:"",readonly:!1,type:"text",showClear:!1,hideSuffix:!1,placeholder:"",size:"default",className:"",onClear:h(),onChange:h(),onBlur:h(),onFocus:h(),onInput:h(),onKeyDown:h(),onKeyUp:h(),onKeyPress:h(),onEnterPress:h(),onCompositionStart:h(),onCompositionEnd:h(),onCompositionUpdate:h(),validateStatus:"default",borderless:!1};let j=d.forwardRef((e,n)=>d.createElement(Q,Object.assign({},e,{forwardRef:n})))},64428:function(e,n,r){"use strict";r.d(n,{kE:()=>u,tx:()=>h});var i=r(67055),s=r(81376),o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l=0,h=Symbol("BackgroundConfig"),c=class extends s.Wd{constructor(){super(...arguments),this._patternId=`gedit-background-pattern-${l++}`,this.node=i.Si.createDivWithClass("gedit-flow-background-layer"),this.grid=document.createElement("div")}get gridSize(){return this.options.gridSize??20}get dotSize(){return this.options.dotSize??1}get dotColor(){return this.options.dotColor??"#eceeef"}get dotOpacity(){return this.options.dotOpacity??.5}get backgroundColor(){return this.options.backgroundColor??"transparent"}get dotFillColor(){return this.options.dotFillColor??this.dotColor}get logoConfig(){return this.options.logo}get zoom(){return this.config.finalScale}onReady(){let{firstChild:e}=this.pipelineNode;this.pipelineNode.insertBefore(this.node,e),this.playgroundConfigEntity.updateConfig({minZoom:.1,maxZoom:2}),this.grid.style.zIndex="-1",this.grid.style.position="relative",this.node.appendChild(this.grid),this.grid.className="gedit-grid-svg","transparent"!==this.backgroundColor&&(this.node.style.backgroundColor=this.backgroundColor)}getScaleUnit(){let{zoom:e}=this;return{realSize:this.gridSize,renderSize:Math.round(this.gridSize*e*100)/100,zoom:e}}autorun(){let e=this.playgroundConfigEntity.config,n=this.getScaleUnit(),r=10*n.renderSize,o=e.width+2*r,a=e.height+2*r,{scrollX:l}=e,{scrollY:h}=e,c=this.getScrollDelta(l,r),u=this.getScrollDelta(h,r);i.Si.setStyle(this.node,{left:l-s.kS,top:h-s.kS}),this.drawGrid(n,o,a),this.setSVGStyle(this.grid,{width:o,height:a,left:s.kS-c-r,top:s.kS-u-r})}calculateLogoPosition(e,n){if(!this.logoConfig)return{x:0,y:0};let{position:r="center",offset:i={x:0,y:0}}=this.logoConfig,s=this.playgroundConfigEntity.config,o=10*this.getScaleUnit().renderSize,{scrollX:a,scrollY:l}=s,h=this.getScrollDelta(a,o),c=this.getScrollDelta(l,o),u=o+h,d=o+c,p=u+s.width/2,f=d+s.height/2,g=0,m=0;switch(r){case"center":g=p,m=f;break;case"top-left":g=u+100,m=d+100;break;case"top-right":g=u+s.width-100,m=d+100;break;case"bottom-left":g=u+100,m=d+s.height-100;break;case"bottom-right":g=u+s.width-100,m=d+s.height-100}return{x:g+i.x,y:m+i.y}}getLogoSize(){if(!this.logoConfig)return 0;let{size:e="medium"}=this.logoConfig;if("number"==typeof e)return e;switch(e){case"small":return 24;case"medium":default:return 48;case"large":return 72}}hexToRgb(e){let n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null}adjustBrightness(e,n){let r=this.hexToRgb(e);if(!r)return e;let i=e=>Math.max(0,Math.min(255,Math.round(e+(255-e)*n)));return`#${i(r.r).toString(16).padStart(2,"0")}${i(r.g).toString(16).padStart(2,"0")}${i(r.b).toString(16).padStart(2,"0")}`}generateNeumorphismFilter(e,n,r,i,s,o,a){let l=a?-i:i,h=a?i:-i;return`
      <defs>
        <filter id="${e}" x="-50%" y="-50%" width="200%" height="200%">
          <feDropShadow dx="${l}" dy="${l}" stdDeviation="${s}" flood-color="${n}" flood-opacity="${o}"/>
          <feDropShadow dx="${h}" dy="${h}" stdDeviation="${s}" flood-color="${r}" flood-opacity="${o}"/>
        </filter>
      </defs>`}generateLogoSVG(e,n){if(!this.logoConfig)return"";let{text:r,imageUrl:i,opacity:s=.1,color:o="#cccccc",fontSize:a,fontFamily:l="Arial, sans-serif",fontWeight:h="normal",neumorphism:c}=this.logoConfig,u=this.calculateLogoPosition(e,n),d=this.getLogoSize(),p="";if(i)p=`
        <image
          href="${i}"
          x="${u.x-d/2}"
          y="${u.y-d/2}"
          width="${d}"
          height="${d}"
          opacity="${s}"
        />`;else if(r){let e=a??Math.max(d/2,12);if(c?.enabled){let{textColor:n,lightShadowColor:i,darkShadowColor:o,shadowOffset:a=6,shadowBlur:d=12,intensity:f=.3,raised:g=!0}=c,m="transparent"!==this.backgroundColor?this.backgroundColor:"#f0f0f0",y=n||m,O=i||this.adjustBrightness(m,.2),b=o||this.adjustBrightness(m,-.2),x=`neumorphism-${this._patternId}`;p+=this.generateNeumorphismFilter(x,O,b,a,d,f,g),p+=`
          <text
            x="${u.x}"
            y="${u.y}"
            font-family="${l}"
            font-size="${e}"
            font-weight="${h}"
            fill="${y}"
            opacity="${s}"
            text-anchor="middle"
            dominant-baseline="middle"
            filter="url(#${x})"
          >${r}</text>`}else p=`
          <text
            x="${u.x}"
            y="${u.y}"
            font-family="${l}"
            font-size="${e}"
            font-weight="${h}"
            fill="${o}"
            opacity="${s}"
            text-anchor="middle"
            dominant-baseline="middle"
          >${r}</text>`}return p}drawGrid(e,n,r){let i=e.renderSize;if(!this.grid)return;let s=this.dotSize*this.zoom,o='<svg width="100%" height="100%">';"transparent"!==this.backgroundColor&&(o+=`<rect width="100%" height="100%" fill="${this.backgroundColor}"/>`);let a=[`cx="${s}"`,`cy="${s}"`,`r="${s}"`,`stroke="${this.dotColor}"`,this.options.dotFillColor&&this.dotFillColor!==this.dotColor?`fill="${this.dotFillColor}"`:"",`fill-opacity="${this.dotOpacity}"`].filter(Boolean).join(" ");o+=`
      <pattern id="${this._patternId}" width="${i}" height="${i}" patternUnits="userSpaceOnUse">
        <circle ${a} />
      </pattern>
      <rect width="100%" height="100%" fill="url(#${this._patternId})"/>`;let l=this.generateLogoSVG(n,r);l&&(o+=l),o+="</svg>",this.grid.innerHTML=o}setSVGStyle(e,n){e&&(e.style.width=`${n.width}px`,e.style.height=`${n.height}px`,e.style.left=`${n.left}px`,e.style.top=`${n.top}px`)}getScrollDelta(e,n){return e>=0?e%n:n-Math.abs(e)%n}};c.type="WorkflowBackgroundLayer",((e,n,r,i)=>{for(var s,l=i>1?void 0:i?a(n,r):n,h=e.length-1;h>=0;h--)(s=e[h])&&(l=(i?s(n,r,l):s(l))||l);return i&&l&&o(n,r,l)})([(0,s.Lb)(s.d0)],c.prototype,"playgroundConfigEntity",2);var u=(0,s.XY)({onBind:(e,n)=>{e.bind(h).toConstantValue(n)},onInit:(e,n)=>{e.playground.registerLayer(c,n)}})},81376:function(e,n,r){"use strict";r.d(n,{D9:()=>m,_1:()=>ns,EI:()=>ea,WW:()=>tD,fz:()=>tC,Oj:()=>nd,PR:()=>tY,Yc:()=>eh,FX:()=>ne,cz:()=>g,kS:()=>tq,id:()=>t5,Tj:()=>x.Tj,W_:()=>ng,uB:()=>p,d0:()=>tW,A7:()=>tA,gj:()=>tT,NM:()=>z,oW:()=>G,iE:()=>tJ,Nu:()=>x.Nu,b6:()=>x.b6,ot:()=>tm,wC:()=>Y,cw:()=>nh,q1:()=>K,Q7:()=>et,JF:()=>tu,XY:()=>t8,Zy:()=>ty,bf:()=>t9,hZ:()=>ei,y:()=>tp,GF:()=>x.GF,gK:()=>tc,SB:()=>np,rJ:()=>nc,$t:()=>O,Ub:()=>tk,h1:()=>nf,An:()=>tZ,Ju:()=>V,Wd:()=>tU,yj:()=>t4,q_:()=>tB,Cy:()=>nu,Kf:()=>t$,Lb:()=>t_,QF:()=>ni});var i,s,o,a,l,h,c,u,d,p,f,g,m,y,O,b,x=r(67055),w=r(36833),S=r(11812),_=r(2543),k={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return .5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin((e-.1)*5*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin((e-1.1)*5*Math.PI)+1}},Back:{In:function(e){return e*e*(2.70158*e-1.70158)},Out:function(e){return--e*e*(2.70158*e+1.70158)+1},InOut:function(e){return(e*=2)<1?e*e*(3.5949095*e-2.5949095)*.5:.5*((e-=2)*e*(3.5949095*e+2.5949095)+2)}},Bounce:{In:function(e){return 1-k.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*k.Bounce.In(2*e):.5*k.Bounce.Out(2*e-1)+.5}}},C="undefined"==typeof self&&"undefined"!=typeof process&&process.hrtime?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return new Date().getTime()},E=function(){function e(){this._tweens={},this._tweensAddedDuringUpdate={}}return e.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(n){return e._tweens[n]})},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},e.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},e.prototype.update=function(e,n){void 0===e&&(e=C()),void 0===n&&(n=!1);var r=Object.keys(this._tweens);if(0===r.length)return!1;for(;r.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<r.length;i++){var s=this._tweens[r[i]],o=!n;s&&!1===s.update(e,o)&&!n&&delete this._tweens[r[i]]}r=Object.keys(this._tweensAddedDuringUpdate)}return!0},e}(),T={Linear:function(e,n){var r=e.length-1,i=r*n,s=Math.floor(i),o=T.Utils.Linear;return n<0?o(e[0],e[1],i):n>1?o(e[r],e[r-1],r-i):o(e[s],e[s+1>r?r:s+1],i-s)},Bezier:function(e,n){for(var r=0,i=e.length-1,s=Math.pow,o=T.Utils.Bernstein,a=0;a<=i;a++)r+=s(1-n,i-a)*s(n,a)*e[a]*o(i,a);return r},CatmullRom:function(e,n){var r=e.length-1,i=r*n,s=Math.floor(i),o=T.Utils.CatmullRom;return e[0]===e[r]?(n<0&&(s=Math.floor(i=r*(1+n))),o(e[(s-1+r)%r],e[s],e[(s+1)%r],e[(s+2)%r],i-s)):n<0?e[0]-(o(e[0],e[0],e[1],e[1],-i)-e[0]):n>1?e[r]-(o(e[r],e[r],e[r-1],e[r-1],i-r)-e[r]):o(e[s?s-1:0],e[s],e[r<s+1?r:s+1],e[r<s+2?r:s+2],i-s)},Utils:{Linear:function(e,n,r){return(n-e)*r+e},Bernstein:function(e,n){var r=T.Utils.Factorial;return r(e)/r(n)/r(e-n)},Factorial:(i=[1],function(e){var n=1;if(i[e])return i[e];for(var r=e;r>1;r--)n*=r;return i[e]=n,n}),CatmullRom:function(e,n,r,i,s){var o=(r-e)*.5,a=(i-n)*.5,l=s*s;return s*l*(2*n-2*r+o+a)+(-3*n+3*r-2*o-a)*l+o*s+n}}},P=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),A=new E,M=function(){function e(e,n){void 0===n&&(n=A),this._object=e,this._group=n,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=k.Linear.None,this._interpolationFunction=T.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=P.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.to=function(e,n){return this._valuesEnd=Object.create(e),void 0!==n&&(this._duration=n),this},e.prototype.duration=function(e){return this._duration=e,this},e.prototype.start=function(e){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var n in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==e?"string"==typeof e?C()+parseFloat(e):e:C(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},e.prototype._setupProperties=function(e,n,r,i){for(var s in r){var o=e[s],a=Array.isArray(o),l=a?"array":typeof o,h=!a&&Array.isArray(r[s]);if("undefined"!==l&&"function"!==l){if(h){var c=r[s];if(0===c.length)continue;c=c.map(this._handleRelativeValue.bind(this,o)),r[s]=[o].concat(c)}if(("object"===l||a)&&o&&!h){for(var u in n[s]=a?[]:{},o)n[s][u]=o[u];i[s]=a?[]:{},this._setupProperties(o,n[s],r[s],i[s])}else void 0===n[s]&&(n[s]=o),a||(n[s]*=1),h?i[s]=r[s].slice().reverse():i[s]=n[s]||0}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying&&(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object)),this},e.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},e.prototype.pause=function(e){return void 0===e&&(e=C()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this)),this},e.prototype.resume=function(e){return void 0===e&&(e=C()),this._isPaused&&this._isPlaying&&(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this)),this},e.prototype.stopChainedTweens=function(){for(var e=0,n=this._chainedTweens.length;e<n;e++)this._chainedTweens[e].stop();return this},e.prototype.group=function(e){return this._group=e,this},e.prototype.delay=function(e){return this._delayTime=e,this},e.prototype.repeat=function(e){return this._initialRepeat=e,this._repeat=e,this},e.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},e.prototype.yoyo=function(e){return this._yoyo=e,this},e.prototype.easing=function(e){return this._easingFunction=e,this},e.prototype.interpolation=function(e){return this._interpolationFunction=e,this},e.prototype.chain=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._chainedTweens=e,this},e.prototype.onStart=function(e){return this._onStartCallback=e,this},e.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},e.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},e.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},e.prototype.onStop=function(e){return this._onStopCallback=e,this},e.prototype.update=function(e,n){if(void 0===e&&(e=C()),void 0===n&&(n=!0),this._isPaused)return!0;var r,i,s=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>s)return!1;n&&this.start(e)}if(this._goToEnd=!1,e<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),i=(e-this._startTime)/this._duration,i=0===this._duration||i>1?1:i;var o=this._easingFunction(i);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,o),this._onUpdateCallback&&this._onUpdateCallback(this._object,i),1===i)if(this._repeat>0){for(r in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!=typeof this._valuesEnd[r]||(this._valuesStartRepeat[r]=this._valuesStartRepeat[r]+parseFloat(this._valuesEnd[r])),this._yoyo&&this._swapEndStartRepeatValues(r),this._valuesStart[r]=this._valuesStartRepeat[r];this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object)}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var a=0,l=this._chainedTweens.length;a<l;a++)this._chainedTweens[a].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(e,n,r,i){for(var s in r)if(void 0!==n[s]){var o=n[s]||0,a=r[s],l=Array.isArray(e[s]),h=Array.isArray(a);!l&&h?e[s]=this._interpolationFunction(a,i):"object"==typeof a&&a?this._updateProperties(e[s],o,a,i):"number"==typeof(a=this._handleRelativeValue(o,a))&&(e[s]=o+(a-o)*i)}},e.prototype._handleRelativeValue=function(e,n){return"string"!=typeof n?n:"+"===n.charAt(0)||"-"===n.charAt(0)?e+parseFloat(n):parseFloat(n)},e.prototype._swapEndStartRepeatValues=function(e){var n=this._valuesStartRepeat[e],r=this._valuesEnd[e];"string"==typeof r?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(r):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=n},e}(),N=(P.nextId,A.getAll.bind(A),A.removeAll.bind(A),A.add.bind(A),A.remove.bind(A),A.update.bind(A));r(94266);var D=r(96540),I=r(87875),$=r(40961),R=Object.defineProperty,L=Object.getOwnPropertyDescriptor,Q=(e,n,r,i)=>{for(var s,o=i>1?void 0:i?L(n,r):n,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i?s(n,r,o):s(o))||o);return i&&o&&R(n,r,o),o};(o=(s=p||(p={})).Default||(s.Default={})).ZOOM_IN="ZOOM_IN",o.ZOOM_OUT="ZOOM_OUT",o.DELETE="DELETE",o.COPY="COPY",o.PASTE="PASTE",o.UNDO="UNDO",o.REDO="REDO",o.VIEW_CLOSE_ALL_WIDGET="view.closeAllWidget",o.VIEW_CLOSE_CURRENT_WIDGET="view.closeCurrentWidget",o.VIEW_REOPEN_LAST_WIDGET="view.reopenLastWidget",o.VIEW_CLOSE_OTHER_WIDGET="view.closeOtherWidget",o.VIEW_CLOSE_BOTTOM_PANEL="view.closeBottomPannel",o.VIEW_OPEN_NEXT_TAB="view.openNextTab",o.VIEW_OEPN_LAST_TAB="view.openLastTab",o.VIEW_FULL_SCREEN="view.fullScreen",o.VIEW_SAVING_WIDGET_CLOSE_CONFIRM="view.savingWidgetCloseConfirm",o.VIEW_SHORTCUTS="view.shortcuts",o.VIEW_PREFERENCES="view.preferences",o.VIEW_LOG="view.log",o.VIEW_PROBLEMS="view.problems",s.is=function(e){return!!e&&e===Object(e)&&"id"in e};var j=Symbol("CommandContribution");(f||(f={})).findSimple=function(e,n){for(let r of e.values())if(r.id===n.id&&r.args.length===n.args.length&&r.args.every((e,r)=>n[r]===e))return r};var V=class{constructor(){this._handlers={},this._commands={},this._commandExecutings=new Set,this.toUnregisterCommands=new Map,this.onDidExecuteCommandEmitter=new x.vl,this.onDidExecuteCommand=this.onDidExecuteCommandEmitter.event,this.onWillExecuteCommandEmitter=new x.vl,this.onWillExecuteCommand=this.onWillExecuteCommandEmitter.event}init(){for(let e of this.contributions)e.registerCommands(this)}get commands(){let e=[];for(let n of this.commandIds){let r=this.getCommand(n);r&&e.push(r)}return e}get commandIds(){return Object.keys(this._commands)}registerCommand(e,n){let r="string"==typeof e?{id:e}:e;if(this._commands[r.id])return console.warn(`A command ${r.id} is already registered.`),x.jG.NULL;let i=new x.Vd(this.doRegisterCommand(r));return n&&i.push(this.registerHandler(r.id,n)),this.toUnregisterCommands.set(r.id,i),i.push(x.jG.create(()=>this.toUnregisterCommands.delete(r.id))),i}unregisterCommand(e){let n=p.is(e)?e.id:e,r=this.toUnregisterCommands.get(n);r&&r.dispose()}registerHandler(e,n){let r=this._handlers[e];return r||(this._handlers[e]=r=[]),r.unshift(n),{dispose:()=>{let e=r.indexOf(n);e>=0&&r.splice(e,1)}}}isVisible(e,...n){return void 0!==this.getVisibleHandler(e,...n)}isEnabled(e,...n){return void 0!==this.getActiveHandler(e,...n)}isToggled(e,...n){return void 0!==this.getToggledHandler(e,...n)}async executeCommand(e,...n){let r=this.getActiveHandler(e,...n),i={id:e,args:n};if(f.findSimple(this._commandExecutings,i))return i.promise;if(r)try{this._commandExecutings.add(i),this.onWillExecuteCommandEmitter.fire({commandId:e,args:n});let s=r.execute(...n);i.promise=s;let o=await s;return this.onDidExecuteCommandEmitter.fire({commandId:e,args:n}),o}finally{this._commandExecutings.delete(i)}}getVisibleHandler(e,...n){let r=this._handlers[e];if(r)for(let e of r)try{if(!e.isVisible||e.isVisible(...n))return e}catch(e){console.error(e)}}getActiveHandler(e,...n){let r=this._handlers[e];if(r)for(let e of r)try{if(!e.isEnabled||e.isEnabled(...n))return e}catch(e){console.error(e)}}getAllHandlers(e){let n=this._handlers[e];return n?n.slice():[]}getToggledHandler(e,...n){let r=this._handlers[e];if(r)for(let e of r)try{if(e.isToggled&&e.isToggled(...n))return e}catch(e){console.error(e)}}getCommand(e){return this._commands[e]}doRegisterCommand(e){return this._commands[e.id]=e,{dispose:()=>{delete this._commands[e.id]}}}updateCommand(e,n){this._commands[e]&&(this._commands[e]={...this._commands[e],...n})}dispose(){this.onWillExecuteCommandEmitter.dispose(),this.onDidExecuteCommandEmitter.dispose()}};Q([(0,S.tt)(j),(0,S.lq)()],V.prototype,"contributions",2),V=Q([(0,S._G)()],V);var z=Symbol("CommandService"),B=new S.i0(e=>{(0,x.Tj)(e,j),e(V).toSelf().inSingletonScope(),e(z).toService(V),e("CommandRegistryFactory").toFactory(e=>()=>e.container.get(V))}),F=Object.defineProperty,Z=Object.getOwnPropertyDescriptor,q=(e,n,r,i)=>{for(var s,o=i>1?void 0:i?Z(n,r):n,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i?s(n,r,o):s(o))||o);return i&&o&&F(n,r,o),o},W=(e,n)=>(r,i)=>n(r,i,e),X=Object.__proto__,U=0,Y=class{constructor(e){this.onEntityChangeEmitter=new x.vl,this.onDataChangeEmitter=new x.vl,this.initializeDataKeys=[],this.dataManager=new Map,this.toDispose=new x.Vd,this.preDispose=new x.Vd,this.onEntityChange=this.onEntityChangeEmitter.event,this.onDataChange=this.onDataChangeEmitter.event,this._changeLockedTimes=0,this.isInitialized=!0,this._version=U++,this._savedInManager=!0,this.entityManager=e.entityManager,this._id=e.id||(0,w.Ak)(),this._savedInManager=void 0===e.savedInManager||e.savedInManager,this.isInitialized=!0,this.toDispose.push(this.onEntityChangeEmitter),this.toDispose.push(this.onDataChangeEmitter),this.register(),e.datas&&e.datas.forEach(e=>this.addData(e.registry,e.data)),this.isInitialized=!1}getDefaultDataRegistries(){return[]}get changeLocked(){return this._changeLockedTimes>0}set changeLocked(e){this._changeLockedTimes=e?this._changeLockedTimes+1:this._changeLockedTimes-1,this._changeLockedTimes<0&&(this._changeLockedTimes=0)}get type(){if(!this.constructor.type)throw Error(`Entity Registry need a type: ${this.constructor.name}`);return this.constructor.type}get context(){return this.entityManager.context}addInitializeData(e,n){this.isInitialized=!0,e.forEach(e=>this.addData(e,n)),this.isInitialized=!1}get version(){return this._version}toJSON(){let e=[];for(let n of this.dataManager.values())e.push({type:n.type,data:n.toJSON()});return{type:this.type,id:this.id,dataList:e}}fromJSON(e){e&&e.id&&e.type&&(this.changeLocked=!0,this.reset(),e.dataList&&e.dataList.forEach(e=>{let n=this.entityManager.getDataRegistryByType(e.type);n&&this.addData(n).update(e.data)}),this.changeLocked=!1,this.fireChange())}get id(){return this._id}dispose(){this.preDispose.dispose(),this.toDispose.dispose()}get disposed(){return this.toDispose.disposed}reset(){for(let e of(this.changeLocked=!0,this.dataManager.values()))this.initializeDataKeys.includes(e.type)||e.dispose();this.register(),this.changeLocked=!1,this.fireChange()}get onDispose(){return this.toDispose.onDispose}fireChange(){this.changeLocked||this.isInitialized||this.disposed||(this._version++,this._version>=Number.MAX_SAFE_INTEGER&&(this._version=0),this.onEntityChangeEmitter.fire(this))}addData(e,n){this.entityManager.registerEntityData(e);let r=this.dataManager.get(e.type);if(r)return n&&this.updateData(e,n),r;let i=this.entityManager.getDataInjector(e);r=new e(this,i?.()),this.isInitialized&&this.initializeDataKeys.push(r.type),this.dataManager.set(e.type,r),this.toDispose.push(r),r.onDataChange(()=>{let e={type:"update",data:r,entity:this};this.onDataChangeEmitter.fire(e),this.fireChange()}),r.toDispose.push(x.jG.create(()=>{this.initializeDataKeys.includes(e.type)||this.dataManager.delete(e.type);let n={type:"delete",data:r,entity:this};this.onDataChangeEmitter.fire(n),this.fireChange()})),r.changeLocked=!0,this.updateData(e,n||r.getDefaultData()),r.changeLocked=!1;let s={type:"add",data:r,entity:this};return this.onDataChangeEmitter.fire(s),r}get savedInManager(){return this._savedInManager}updateData(e,n){let r=this.dataManager.get(e.type);r&&r.update(n)}getData(e){return this.dataManager.get(e.type)}hasData(e){return this.dataManager.has(e.type)}removeData(e){if(this.initializeDataKeys.includes(e.type))return;let n=this.dataManager.get(e.type);n&&n.dispose()}getService(e){return this.entityManager.getService(e)}register(){this.getDefaultDataRegistries().forEach(e=>this.addData(e))}};Y.type="Entity",(a=Y||(Y={})).getType=function(e){return e.type},a.checkDataChanged=function(e,n){return x.Gs.isChanged(e,n)},a.isRegistryOf=function(e,n){if(e===n)return!0;let r=e.__proto__;for(;r&&r!==X;){if(r.prototype===n.prototype)return!0;r=r.__proto__}return!1};var G=class extends x.nB{constructor(e,n){super(),this.opts=n,this.onDataChangeEmitter=new x.vl,this.onWillChangeEmitter=new x.vl,this._changeLocked=!1,this._version=0,this.onDataChange=this.onDataChangeEmitter.event,this.onWillChange=this.onWillChangeEmitter.event,this.entity=e,this._data=this.getDefaultData(),this.toDispose.push(this.onDataChangeEmitter),this.toDispose.push(this.onWillChangeEmitter)}get type(){if(!this.constructor.type)throw Error(`Entity Data Registry need a type: ${this.constructor.name}`);return this.constructor.type}get data(){return this._data}update(e,n){2==arguments.length?this._data[e]!==n&&(this.fireWillChange(),this._data[e]=n,this.fireChange()):this.checkChanged(e)&&(this.fireWillChange(),"object"!=typeof e?this._data=e:this._data={...this._data,...e},this.fireChange())}fullyUpdate(e){x.Gs.isChanged(this._data,e,1,!1)&&(this.fireWillChange(),this._data=e,this.fireChange())}checkChanged(e){return Y.checkDataChanged(this._data,e)}toJSON(){return this.data}fromJSON(e){this.update(e)}get changeLocked(){return this._changeLocked}set changeLocked(e){this._changeLocked=e}fireWillChange(){this.onWillChangeEmitter.fire(this)}fireChange(){this._changeLocked||(this._version++,this._version>=Number.MAX_SAFE_INTEGER&&(this._version=0),this.onDataChangeEmitter.fire(this))}bindChange(e,n){this.toDispose.push(e.onDataChange(()=>{n&&n(),this.fireChange()}))}get version(){return this._version}};G.type="EntityData";var H=class extends G{getDefaultData(){return x.Sj.createDefault(x.Im)}get x(){return this.data.x}get y(){return this.data.y}set x(e){this.update("x",e)}set y(e){this.update("y",e)}};H.type="OriginData";var K=class extends G{getDefaultData(){return x.Sj.createDefault(x.hR)}get x(){return this.data.x}get y(){return this.data.y}set x(e){this.update("x",e)}set y(e){this.update("y",e)}};K.type="PositionData";var J=class extends G{getDefaultData(){return x.Sj.createDefault(x.gE)}};J.type="RotationData";var ee=class extends G{getDefaultData(){return x.Sj.createDefault(x.Yx)}get x(){return this.data.x}get y(){return this.data.y}set x(e){this.update("x",e)}set y(e){this.update("y",e)}};ee.type="ScaleData";var et=class extends G{getDefaultData(){return x.Sj.createDefault(x.f1)}get width(){return this.data.width}get height(){return this.data.height}set width(e){this.update("width",e)}set height(e){this.update("height",e)}get locked(){return!!this.data.locked}set locked(e){this.update("locked",e)}};et.type="SizeData";var en=class extends G{getDefaultData(){return x.Sj.createDefault(x.eL)}get x(){return this.data.x}get y(){return this.data.y}set x(e){this.update("x",e)}set y(e){this.update("y",e)}};en.type="SkewData";var{fixZero:er}=x.bR;(e=>{function n(e,n){return n&&n.apply(e,e),er(e),e}function r(e,r){let{size:i,origin:s}=e;return n({x:-(i.width*s.x),y:-(i.height*s.y)},r)}function i(e,r){let{size:i,origin:s}=e;return n({x:-(i.width*s.x)+i.width,y:-(i.height*s.y)},r)}function s(e,r){let{size:i,origin:s}=e;return n({x:-(i.width*s.x),y:-(i.height*s.y)+i.height},r)}function o(e,r){let{size:i,origin:s}=e;return n({x:-(i.width*s.x)+i.width,y:-(i.height*s.y)+i.height},r)}e.getPointWithMatrix=n,e.getBounds=function(e,n){let a=new x.M_;if(!n||n.isSimple()){let{size:r,origin:i}=e;a.x=-(r.width*i.x)+(n?.tx||0),a.y=-(r.height*i.y)+(n?.ty||0),a.width=r.width,a.height=r.height,er(a)}else{let l=r(e,n),h=i(e,n),c=s(e,n),u=o(e,n);a.x=Math.min(l.x,h.x,c.x,u.x),a.y=Math.min(l.y,h.y,c.y,u.y),a.width=Math.max(l.x,h.x,c.x,u.x)-a.x,a.height=Math.max(l.y,h.y,c.y,u.y)-a.y}return a},e.applyMatrix=function(e,r){let i=new x.M_;if(r.isSimple())i.x=e.x+r.tx,i.y=e.y+r.ty,i.width=e.width,i.height=e.height,er(i);else{let s=n(e.leftTop,r),o=n(e.rightTop,r),a=n(e.leftBottom,r),l=n(e.rightBottom,r);i.x=Math.min(s.x,o.x,a.x,l.x),i.y=Math.min(s.y,o.y,a.y,l.y),i.width=Math.max(s.x,o.x,a.x,l.x)-i.x,i.height=Math.max(s.y,o.y,a.y,l.y)-i.y}return i},e.getLeftPointFromBounds=function(e,n){let a=r(e,n),l=i(e,n);return[a,l,s(e,n),o(e,n)].sort((e,n)=>e.x-n.x)[0]},e.getTopPointFromBounds=function(e,n){let a=r(e,n),l=i(e,n);return[a,l,s(e,n),o(e,n)].sort((e,n)=>e.y-n.y)[0]},e.getCenter=function(e,r){let{size:i,origin:s}=e;return n({x:-(i.width*s.x)+i.width/2,y:-(i.height*s.y)+i.height/2},r)},e.getTopLeft=r,e.getTopCenter=function(e,r){let{size:i,origin:s}=e;return n({x:-(i.width*s.x)+i.width/2,y:-(i.height*s.y)},r)},e.getTopRight=i,e.getLeftCenter=function(e,r){let{size:i,origin:s}=e;return n({x:-(i.width*s.x),y:-(i.height*s.y)+i.height/2},r)},e.getRightCenter=function(e,r){let{size:i,origin:s}=e;return n({x:-(i.width*s.x)+i.width,y:-(i.height*s.y)+i.height/2},r)},e.getBottomLeft=s,e.getBottomCenter=function(e,r){let{size:i,origin:s}=e;return n({x:-(i.width*s.x)+i.width/2,y:-(i.height*s.y)+i.height},r)},e.getBottomRight=o})(g||(g={}));var ei=class extends G{constructor(e){super(e),this._worldTransform=new x.uq,this._localTransform=new x.uq,this.mutationCache=new Map,this.sizeToScale=!1,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0,this.bindChange(this.entity.addData(K)),this.bindChange(this.entity.addData(et)),this.bindChange(this.entity.addData(H)),this.bindChange(this.entity.addData(ee)),this.bindChange(this.entity.addData(en),()=>this.updateSkew()),this.bindChange(this.entity.addData(J),()=>this.updateSkew())}get children(){return this._children||[]}clearChildren(){this._children&&this._children.slice().forEach(e=>{e.setParent(void 0)})}get isContainer(){return!!this._children&&this._children.length>0}fireChange(){this.changeLocked||(this._localID++,this.mutationCache.clear(),super.fireChange())}get localTransform(){return this.updateLocalTransformMatrix(),this._localTransform}get worldTransform(){return this.updateTransformMatrix(),this._worldTransform}getDefaultData(){return x.Sj.createDefault(x.Sl)}update(e){e.position&&this.entity.updateData(K,e.position),e.size&&this.entity.updateData(et,e.size),e.origin&&this.entity.updateData(H,e.origin),e.scale&&this.entity.updateData(ee,e.scale),e.skew&&this.entity.updateData(en,e.skew),void 0!==e.rotation&&this.entity.updateData(J,e.rotation)}get position(){return this.entity.getData(K)}set position(e){this.entity.updateData(K,e)}get size(){return this.entity.getData(et)}set size(e){this.entity.updateData(et,e)}get origin(){return this.entity.getData(H)}set origin(e){this.entity.updateData(H,e)}get scale(){return this.entity.getData(ee)}set scale(e){this.entity.updateData(ee,e)}get skew(){return this.entity.getData(en)}set skew(e){this.entity.updateData(en,e)}get rotation(){return this.entity.getData(J).data}set rotation(e){this.entity.updateData(J,e)}get data(){return x.QV.toJSON(this)}updateSkew(){let{rotation:e}=this;this._cx=Math.cos(e+this.skew.y),this._sx=Math.sin(e+this.skew.y),this._cy=-Math.sin(e-this.skew.x),this._sy=Math.cos(e-this.skew.x),this._localID++}updateLocalTransformMatrix(){let e=this._localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x,e.ty=this.position.y,this._currentLocalID=this._localID,this._parentID=-1)}get localID(){return this._localID}get worldID(){return this._worldID}updateTransformMatrix(){let e=this._localTransform;this.updateLocalTransformMatrix();let n=x.uq.TEMP_MATRIX,r=0;if(this.parent&&(n=this.parent.worldTransform,r=this.parent._worldID),this._parentID!==r){let i=n,s=this._worldTransform;s.a=e.a*i.a+e.b*i.c,s.b=e.a*i.b+e.b*i.d,s.c=e.c*i.a+e.d*i.c,s.d=e.c*i.b+e.d*i.d,s.tx=e.tx*i.a+e.ty*i.c+i.tx,s.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=r,this._worldID++}}setFromMatrix(e){let{a:n,b:r,c:i,d:s}=e,o=-Math.atan2(-i,s),a=Math.atan2(r,n),l=Math.abs(o+a);l<1e-5||1e-5>Math.abs(x.TO-l)?(this.rotation=a,this.skew.x=this.skew.y=0):(this.rotation=0,this.skew.x=o,this.skew.y=a),this.scale.x=Math.sqrt(n*n+r*r),this.scale.y=Math.sqrt(i*i+s*s),this.position.x=e.tx,this.position.y=e.ty,this.fireChange()}getMutationCache(e,n){if(this.mutationCache.has(e))return this.mutationCache.get(e);let r=n();return this.mutationCache.set(e,r),r}get bounds(){if(this.isContainer){let e=this._children;return x.M_.enlarge(e.map(e=>e.bounds))}return g.getBounds(this,this.worldTransform)}get boundsWithoutRotation(){let{center:e}=this.bounds,{worldScale:n}=this,r=this.localSize,i=n.x*r.width,s=n.y*r.height,o={x:e.x-i/2,y:e.y-s/2};return new x.M_(o.x,o.y,i,s)}get localSize(){let{size:e}=this;if(this.isContainer){let n=x.M_.enlarge(this.children.map(e=>e.localBounds));e={width:n.width,height:n.height}}return{width:e.width,height:e.height}}get worldSize(){let{localSize:e}=this,{worldScale:n}=this;return{width:e.width*n.x,height:e.height*n.y}}get localBounds(){if(this.isContainer){let e=this._children,n=x.M_.enlarge(e.map(e=>e.localBounds));return g.applyMatrix(n,this.localTransform)}return this.getMutationCache("localBounds",()=>g.getBounds(this,this.localTransform))}contains(e,n,r){if(this.isContainer)return this.bounds.contains(e,n);let i=this.worldTransform.applyInverse({x:e,y:n}),{width:s,height:o}=this.size;if(0===s||0===o)return!1;let a=-s*this.origin.x,l=-o*this.origin.y;return r?new x.jl(a+s/2,l+o/2,Math.min(s/2,o/2)).contains(i.x,i.y):!!(i.x>=a)&&!!(i.x<a+s)&&!!(i.y>=l)&&!!(i.y<l+o)}get parent(){return this._parent}isParent(e){let n=this.parent;for(;n;){if(n===e)return!0;n=n.parent}return!1}isParentTransform(e){let n=this.parent;for(;n;){if(n===e)return!0;n=n.parent}return!1}setParent(e,n=!0){this._parent!==e&&(this.entityDispose&&(this.entityDispose.dispose(),this.entityDispose=void 0),this._parentChangedDispose&&(this._parentChangedDispose.dispose(),this._parentChangedDispose=void 0),this._parentID=-1,e&&n&&(e._children||(e._children=[]),e._children.push(this),this._parentChangedDispose=new x.Vd,this.toDispose.push(this._parentChangedDispose),this.entityDispose=this.entity.onDispose(()=>{e.fireChange()}),this._parentChangedDispose.pushAll([e.onDispose(()=>{this.setParent(void 0)}),x.jG.create(()=>{let n=e._children.indexOf(this);-1!==n&&e._children.splice(n,1)})])),this._parent=e,this.fireChange())}intersects(e){return(!!this.isContainer||0!==this.size.width&&0!==this.size.height)&&x.M_.intersectsWithRotation(this.boundsWithoutRotation,this.worldRotation,e,0)}get worldScale(){let{parent:e}=this,n=e?e.worldScale:{x:1,y:1};return{x:this.scale.x*n.x,y:this.scale.y*n.y}}get worldRotation(){let{parent:e}=this;return e?x.uM.wrap(this.rotation+e.worldRotation):x.uM.wrap(this.rotation)}get worldDegree(){return Math.round(this.worldRotation*x.bO)}get localOrigin(){let e=this.localTransform,n=this.localBounds;return e.apply({x:this.origin.x*n.width,y:this.origin.y*n.height})}get worldOrigin(){let e=this.worldTransform,{bounds:n}=this;return e.apply({x:this.origin.x*n.width,y:this.origin.y*n.height})}widthToScaleX(e,n){return e/(n&&this.parent?this.parent.worldScale.x:1)/this.localSize.width}heightToScaleY(e,n){return e/(n&&this.parent?this.parent.worldScale.y:1)/this.localSize.height}sizeToScaleValue(e,n){return{x:this.widthToScaleX(e.width,n),y:this.heightToScaleY(e.height,n)}}};ei.type="TransformData",(l=ei||(ei={})).isParentOrChildrenTransform=function(e,n){let r=n.getData(l);if(!r)return!1;for(let n of e.values()){let e=n.getData(l);if(e&&(e.isParent(r)||r.isParent(e)))return!0}return!1};var es=class{constructor(){this.execMap=new Map}push(e,n){let{execMap:r}=this,i=r.get(e);i||(i=(0,_.throttle)(n,0),r.set(e,i)),i()}dispose(){this.execMap.clear()}};function eo(e,n,r){let i=document.createEvent("MouseEvent");return i.initMouseEvent(e,!0,!0,void 0,0,0,0,n,r,!1,!1,!1,!1,0,null),i}(h=m||(m={})).isTouchEvent=e=>"touches"in e,h.touchToMouseEvent=e=>{if(!(0,h.isTouchEvent)(e))return e;let n=e.touches[0]||e.changedTouches[0];"touchmove"===e.type&&(0,h.preventDefault)(e);let r={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",touchcancel:"mouseup"}[e.type];if(!r)throw Error(`Unknown touch event type: ${e.type}`);return new MouseEvent(r,{bubbles:e.bubbles,cancelable:e.cancelable,view:e.view,clientX:n.clientX,clientY:n.clientY,screenX:n.screenX,screenY:n.screenY,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey})},h.getEventCoord=e=>(0,h.isTouchEvent)(e)?0===e.touches.length?{clientX:0,clientY:0}:{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}:(e instanceof MouseEvent,{clientX:e.clientX,clientY:e.clientY}),h.preventDefault=e=>{e.cancelable&&e.preventDefault()},h.onTouched=(e,n)=>{let r=e.changedTouches[0],i=e=>{let s=e.changedTouches[0],o=s.clientX-r.clientX,a=s.clientY-r.clientY;5>Math.abs(o)&&5>Math.abs(a)&&n((0,h.touchToMouseEvent)(e)),document.removeEventListener("touchend",i),document.removeEventListener("touchcancel",i)};document.addEventListener("touchend",i),document.addEventListener("touchcancel",i)};var ea=class{constructor(e={}){this.onDragStartEmitter=new x.vl,this.onDragEndEmitter=new x.vl,this.onDragEmitter=new x.vl,this._stopGlobalEventNames=["mouseenter","mouseleave","mouseover","mouseout","contextmenu"],this.onDrag=this.onDragEmitter.event,this.onDragStart=this.onDragStartEmitter.event,this.onDragEnd=this.onDragEndEmitter.event,this._lastPos={x:0,y:0},this._updateDragScroll=e=>{if(!this._playgroundConfigEntity)return;let n=this._playgroundConfigEntity.config,r=e.endPos,{scrollX:i,width:s,height:o,scrollY:a}=n;r.x>s+i-20?this._startScrollX(i,!0):r.x<i+20?this._startScrollX(i,!1):this._stopScrollX(),r.y>o+a-20?this._startScrollY(a,!0):r.y<a+20?this._startScrollY(a,!1):this._stopScrollY()},this._disposed=!1,e.onDragStart&&this.onDragStart(n=>e.onDragStart(n,this.context)),e.onDrag&&this.onDrag(n=>e.onDrag(n,this.context)),e.onDragEnd&&this.onDragEnd(n=>e.onDragEnd(n,this.context)),e.stopGlobalEventNames&&(this._stopGlobalEventNames=e.stopGlobalEventNames)}get isStarted(){return!!this._promise}start(e,n,r,i){if(this._disposed)return Promise.resolve();if(this._promise)return this._promise;this.context=i,this.localId=(0,x.aU)(),this._addListeners(),this._promise=new Promise(e=>{this._resolve=e}),this._playgroundConfigEntity=r;let s=eo("mousedown",e,n);return this._startPos=this.getRelativePos(s),this.onDragStartEmitter.fire(this.getDragEvent(s)),this._promise}stop(e,n){if(this._disposed||!this._promise)return;let r=eo("mouseup",e,n);this.handleEvent(r)}dispose(){this._disposed||(this._stopScrollX(),this._stopScrollY(),this._disposed=!0,this.onDragEmitter.dispose(),this.onDragStartEmitter.dispose(),this.onDragEndEmitter.dispose(),this._finalize())}handleEvent(e){let n=m.touchToMouseEvent(e);switch(n.type){case"mousemove":this._evtMouseMove(n);break;case"mouseup":this._stopScrollX(),this._stopScrollY(),this._evtMouseUp(n);break;case"keydown":this._evtKeyDown(n);break;case"contextmenu":let r=eo("mouseup",n.clientX,n.clientY);this._evtMouseUp(r);break;default:m.preventDefault(n),n.stopPropagation()}}get scale(){return this._playgroundConfigEntity?this._playgroundConfigEntity.finalScale:1}getRelativePos(e){return this._playgroundConfigEntity?this._playgroundConfigEntity.getPosFromMouseEvent(e,!1):{x:e.clientX,y:e.clientY}}getDragEvent(e){let n=this._startPos,{scale:r}=this;switch(e.type){case"mousedown":return this._lastPos=n,Object.assign(e,{id:this.localId,startPos:n,endPos:n,scale:r,movingDelta:{x:0,y:0},isStart:!0,isMoving:!1});case"mousemove":let i=this.getRelativePos(e),s={x:i.x-this._lastPos.x,y:i.y-this._lastPos.y};return this._lastPos=i,Object.assign(e,{id:this.localId,startPos:n,endPos:i,scale:r,isStart:!0,movingDelta:s,isMoving:!0});case"mouseup":return this._lastPos={x:0,y:0},Object.assign(e,{id:this.localId,startPos:n,endPos:this.getRelativePos(e),movingDelta:{x:0,y:0},scale:r,isStart:!1,isMoving:!1});default:throw Error("unknown event")}}_finalize(){let e=this._resolve;this._removeListeners(),this._startPos=void 0,this._promise=void 0,this._resolve=void 0,e&&e()}_evtMouseMove(e){e.preventDefault(),e.stopPropagation(),this._lastMouseMoveEvent=e;let n=this.getDragEvent(e);this._updateDragScroll(n),this.onDragEmitter.fire(n)}_evtMouseUp(e){this._lastMouseMoveEvent=void 0,e.preventDefault(),e.stopPropagation(),(0===e.button||1===e.button)&&(this.onDragEndEmitter.fire(this.getDragEvent(e)),this._finalize())}_evtKeyDown(e){e.preventDefault(),e.stopPropagation(),27===e.keyCode&&this.stop(NaN,NaN)}_addListeners(){document.addEventListener("mousedown",this,!0),document.addEventListener("mousemove",this,!0),document.addEventListener("mouseup",this,!0),document.addEventListener("touchstart",this,!0),document.addEventListener("touchmove",this,{passive:!1}),document.addEventListener("touchend",this,!0),document.addEventListener("touchcancel",this,!0),this._stopGlobalEventNames.forEach(e=>{document.addEventListener(e,this,!0)})}_removeListeners(){document.removeEventListener("mousedown",this,!0),document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!0),document.removeEventListener("touchstart",this,!0),document.removeEventListener("touchmove",this),document.removeEventListener("touchend",this,!0),document.removeEventListener("touchcancel",this,!0),this._stopGlobalEventNames.forEach(e=>{document.removeEventListener(e,this,!0)})}_startScrollX(e,n){if(this._scrollXInterval)return;let r=window.setInterval(()=>{this._scrollXInterval&&this.fireScroll("scrollX",n)},20);this._scrollXInterval={interval:r,origin:e}}_stopScrollX(){this._scrollXInterval&&(clearInterval(this._scrollXInterval.interval),this._scrollXInterval=void 0)}_startScrollY(e,n){if(this._scrollYInterval)return;let r=window.setInterval(()=>{this.fireScroll("scrollY",n)},20);this._scrollYInterval={interval:r,origin:e}}_stopScrollY(){this._scrollYInterval&&(clearInterval(this._scrollYInterval.interval),this._scrollYInterval=void 0)}fireScroll(e,n){let r="scrollY"===e?this._scrollYInterval:this._scrollXInterval;if(!r)return;let i=r.origin=n?r.origin+4:r.origin-4,s=this._playgroundConfigEntity.config[e];this._playgroundConfigEntity.updateConfig({[e]:i});let o=this._playgroundConfigEntity.config[e];if(o!==s){let n=this._lastMouseMoveEvent,i={x:"scrollX"===e?o-r.origin:0,y:"scrollY"===e?o-r.origin:0},s=eo("mousemove",n.clientX+i.x,n.clientY+i.y),a=this.getDragEvent(s);this.onDragEmitter.fire(a)}}};(c=ea||(ea={})).startDrag=function(e,n,r={}){y&&y.stop(NaN,NaN);let i=y=new c({onDragStart(e,n){r.onDragStart&&r.onDragStart(e,n)},onDrag(e,n){r.onDrag&&r.onDrag(e,n)},onDragEnd(e,n){r.onDragEnd&&r.onDragEnd(e,n),i.dispose(),y===i&&(y=void 0)}});return i.start(e,n,r.config,r.context),x.jG.create(()=>{i.stop(0,0),i.dispose(),y===i&&(y=void 0)})};var el=0;function eh(e){el++,requestAnimationFrame(function e(n){el<=0||(requestAnimationFrame(e),N(n))});let n=!1,r=new M(e.from).to(e.to,e.duration).easing(e.easing||k.Quadratic.Out).onUpdate(()=>{!n&&e.onUpdate&&e.onUpdate(e.from)}).onComplete(()=>{!n&&(n=!0,el--,e.onComplete&&e.onComplete(e.from))}).start();return x.jG.create(()=>{!n&&(n=!0,el--,r.stop(),e.onDispose&&e.onDispose(e.from))})}function ec(e){let[n,r]=e.overflow,[i,s]=e._delta,[o,a]=e._direction;(n<0&&i>0&&o<0||n>0&&i<0&&o>0)&&(e._movement[0]=e._movementBound[0]),(r<0&&s>0&&a<0||r>0&&s<0&&a>0)&&(e._movement[1]=e._movementBound[1])}var eu={toVector:(e,n)=>(void 0===e&&(e=n),Array.isArray(e)?e:[e,e]),add:(e,n)=>[e[0]+n[0],e[1]+n[1]],sub:(e,n)=>[e[0]-n[0],e[1]-n[1]],addTo(e,n){e[0]+=n[0],e[1]+=n[1]},subTo(e,n){e[0]-=n[0],e[1]-=n[1]}};function ed(e,n,r){return 0===n||Math.abs(n)===1/0?Math.pow(e,5*r):e*n*r/(n+r*e)}function ep(e,n,r,i=.15){return 0===i?Math.max(n,Math.min(e,r)):e<n?-ed(n-e,r-n,i)+n:e>r?+ed(e-r,r-n,i)+r:e}var ef={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function eg(e){return e?e[0].toUpperCase()+e.slice(1):""}var em=["enter","leave"],ey=["gotpointercapture","lostpointercapture"];function eO(e){return"touches"in e}function ev(e){return eO(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function eb(e){return eO(e)?("touchend"===e.type||"touchcancel"===e.type?e.changedTouches:e.targetTouches)[0]:e}function ex(e,n){try{let r=n.clientX-e.clientX,i=n.clientY-e.clientY,s=(n.clientX+e.clientX)/2,o=(n.clientY+e.clientY)/2,a=Math.hypot(r,i);return{angle:-(180*Math.atan2(r,i))/Math.PI,distance:a,origin:[s,o]}}catch{}return null}function ew(e,n){let[r,i]=Array.from(e.touches).filter(e=>n.includes(e.identifier));return ex(r,i)}function eS(e){let n=eb(e);return eO(e)?n.identifier:n.pointerId}function e_(e){let n=eb(e);return[n.clientX,n.clientY]}function ek(e){let{deltaX:n,deltaY:r,deltaMode:i}=e;return 1===i?(n*=40,r*=40):2===i&&(n*=800,r*=800),[n,r]}function eC(e,...n){return"function"==typeof e?e(...n):e}function eE(){}function eT(e,n){return Object.assign({},n,e||{})}var eP=class{constructor(e,n,r){this.ctrl=e,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){let{state:e,shared:n,ingKey:r,args:i}=this;n[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){let n=this.state,r=this.config;n._active||(this.reset(),this.computeInitial(),n._active=!0,n.target=e.target,n.currentTarget=e.currentTarget,n.lastOffset=r.from?eC(r.from,n):n.offset,n.offset=n.lastOffset,n.startTime=n.timeStamp=e.timeStamp)}computeValues(e){let n=this.state;n._values=e,n.values=this.config.transform(e)}computeInitial(){let e=this.state;e._initial=e._values,e.initial=e.values}compute(e){let{state:n,config:r,shared:i}=this;n.args=this.args;let s=0;if(e&&(n.event=e,r.preventDefault&&e.cancelable&&n.event.preventDefault(),n.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,function(e){let n={};if("buttons"in e&&(n.buttons=e.buttons),"shiftKey"in e){let{shiftKey:r,altKey:i,metaKey:s,ctrlKey:o}=e;Object.assign(n,{shiftKey:r,altKey:i,metaKey:s,ctrlKey:o})}return n}(e)),i.down=i.pressed=i.buttons%2==1||i.touches>0,s=e.timeStamp-n.timeStamp,n.timeStamp=e.timeStamp,n.elapsedTime=n.timeStamp-n.startTime),n._active){let e=n._delta.map(Math.abs);eu.addTo(n._distance,e)}this.axisIntent&&this.axisIntent(e);let[o,a]=n._movement,[l,h]=r.threshold,{_step:c,values:u}=n;if(r.hasCustomTransform?(!1===c[0]&&(c[0]=Math.abs(o)>=l&&u[0]),!1===c[1]&&(c[1]=Math.abs(a)>=h&&u[1])):(!1===c[0]&&(c[0]=Math.abs(o)>=l&&Math.sign(o)*l),!1===c[1]&&(c[1]=Math.abs(a)>=h&&Math.sign(a)*h)),n.intentional=!1!==c[0]||!1!==c[1],!n.intentional)return;let d=[0,0];if(r.hasCustomTransform){let[e,n]=u;d[0]=!1!==c[0]?e-c[0]:0,d[1]=!1!==c[1]?n-c[1]:0}else d[0]=!1!==c[0]?o-c[0]:0,d[1]=!1!==c[1]?a-c[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(d);let p=n.offset,f=n._active&&!n._blocked||n.active;f&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=i[this.ingKey]=n._active,e&&(n.first&&("bounds"in r&&(n._bounds=eC(r.bounds,n)),this.setup&&this.setup()),n.movement=d,this.computeOffset()));let[g,m]=n.offset,[[y,O],[b,x]]=n._bounds;n.overflow=[g<y?-1:+(g>O),m<b?-1:+(m>x)],n._movementBound[0]=!!n.overflow[0]&&(!1===n._movementBound[0]?n._movement[0]:n._movementBound[0]),n._movementBound[1]=!!n.overflow[1]&&(!1===n._movementBound[1]?n._movement[1]:n._movementBound[1]);let w=n._active&&r.rubberband||[0,0];if(n.offset=function(e,[n,r],[i,s]){let[[o,a],[l,h]]=e;return[ep(n,o,a,i),ep(r,l,h,s)]}(n._bounds,n.offset,w),n.delta=eu.sub(n.offset,p),this.computeMovement(),f&&(!n.last||s>32)){n.delta=eu.sub(n.offset,p);let e=n.delta.map(Math.abs);eu.addTo(n.distance,e),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&s>0&&(n.velocity=[e[0]/s,e[1]/s],n.timeDelta=s)}}emit(){let e=this.state,n=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;let i=this.handler({...n,...e,[this.aliasKey]:e.values});void 0!==i&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}},eA=class extends eP{constructor(){super(...arguments),this.aliasKey="xy"}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=eu.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=eu.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){let n=this.state,r=this.config;if(!n.axis&&e){let i="object"==typeof r.axisThreshold?r.axisThreshold[ev(e)]:r.axisThreshold;n.axis=function([e,n],r){let i=Math.abs(e),s=Math.abs(n);return i>s&&i>r?"x":s>i&&s>r?"y":void 0}(n._movement,i)}n._blocked=(r.lockDirection||!!r.axis)&&!n.axis||!!r.axis&&r.axis!==n.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0}}},eM=class extends eA{constructor(){super(...arguments),this.ingKey="wheeling"}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){let n=this.state;n._delta=ek(e),eu.addTo(n._movement,n._delta),ec(n),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}},eN=class extends eA{constructor(){super(...arguments),this.ingKey="scrolling"}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();let n=this.state,r=function(e){let{scrollX:n,scrollY:r,scrollLeft:i,scrollTop:s}=e.currentTarget;return[n??i??0,r??s??0]}(e);n._delta=eu.sub(r,n._values),eu.addTo(n._movement,n._delta),this.computeValues(r),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}},eD=class extends eP{constructor(){super(...arguments),this.ingKey="pinching",this.aliasKey="da"}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();let e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){let{type:e,movement:n,lastOffset:r}=this.state;"wheel"===e?this.state.offset=eu.add(n,r):this.state.offset=[(1+n[0])*r[0],n[1]+r[1]]}computeMovement(){let{offset:e,lastOffset:n}=this.state;this.state.movement=[e[0]/n[0],e[1]-n[1]]}axisIntent(){let e=this.state,[n,r]=e._movement;if(!e.axis){let i=30*Math.abs(n)-Math.abs(r);i<0?e.axis="angle":i>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&("scale"===this.state.axis?e[1]=0:"angle"===this.state.axis&&(e[0]=0))}cancel(){let e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);let n=this.state,r=this.ctrl.touchIds;if(n._active&&n._touchIds.every(e=>r.has(e))||r.size<2)return;this.start(e),n._touchIds=Array.from(r).slice(0,2);let i=ew(e,n._touchIds);i&&this.pinchStart(e,i)}pointerStart(e){if(null!=e.buttons&&e.buttons%2!=1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);let n=this.state,r=n._pointerEvents,i=this.ctrl.pointerIds;if(n._active&&Array.from(r.keys()).every(e=>i.has(e))||(r.size<2&&r.set(e.pointerId,e),n._pointerEvents.size<2))return;this.start(e);let s=ex(...Array.from(r.values()));s&&this.pinchStart(e,s)}pinchStart(e,n){this.state.origin=n.origin,this.computeValues([n.distance,n.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;let n=ew(e,this.state._touchIds);n&&this.pinchMove(e,n)}pointerMove(e){let n=this.state._pointerEvents;if(n.has(e.pointerId)&&n.set(e.pointerId,e),!this.state._active)return;let r=ex(...Array.from(n.values()));r&&this.pinchMove(e,r)}pinchMove(e,n){let r=this.state,i=r._values[1],s=n.angle-i,o=0;Math.abs(s)>270&&(o+=Math.sign(s)),this.computeValues([n.distance,n.angle-360*o]),r.origin=n.origin,r.turns=o,r._movement=[r._values[0]/r._initial[0]-1,r._values[1]-r._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(e=>!this.ctrl.touchIds.has(e))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){let n=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}n._pointerEvents.has(e.pointerId)&&n._pointerEvents.delete(e.pointerId),n._active&&n._pointerEvents.size<2&&(n._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();let n=this.state;n._active||(this.start(e),this.computeValues([e.scale,e.rotation]),n.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;let n=this.state;this.computeValues([e.scale,e.rotation]),n.origin=[e.clientX,e.clientY];let r=n._movement;n._movement=[e.scale-1,e.rotation],n._delta=eu.sub(n._movement,r),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){let n=this.config.modifierKey;(!n||(Array.isArray(n)?n.find(n=>e[n]):e[n]))&&(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();let n=this.state,r=-ek(e)[1]/100*n.offset[0];Math.abs(r)>.1&&(r=.1*Math.sign(r)),n._delta=[r,0],eu.addTo(n._movement,n._delta),ec(n),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){let n=this.config.device;n&&(e(n,"start",this[n+"Start"].bind(this)),e(n,"change",this[n+"Move"].bind(this)),e(n,"end",this[n+"End"].bind(this)),e(n,"cancel",this[n+"End"].bind(this)),e("lostPointerCapture","",this[n+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}},eI=class extends eA{constructor(){super(...arguments),this.ingKey="moving"}move(e){this.config.mouseOnly&&"mouse"!==e.pointerType||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(e_(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;let n=e_(e),r=this.state;r._delta=eu.sub(n,r._values),eu.addTo(r._movement,r._delta),this.computeValues(n),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}},e$=class extends eA{constructor(){super(...arguments),this.ingKey="hovering"}enter(e){this.config.mouseOnly&&"mouse"!==e.pointerType||(this.start(e),this.computeValues(e_(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&"mouse"!==e.pointerType)return;let n=this.state;if(!n._active)return;n._active=!1;let r=e_(e);n._movement=n._delta=eu.sub(r,n._values),this.computeValues(r),this.compute(e),n.delta=n.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}},eR=e=>e,eL={enabled:(e=!0)=>e,eventOptions:(e,n,r)=>({...r.shared.eventOptions,...e}),preventDefault:(e=!1)=>e,triggerAllEvents:(e=!1)=>e,rubberband(e=0){switch(e){case!0:return[.15,.15];case!1:return[0,0];default:return eu.toVector(e)}},from:e=>"function"==typeof e?e:null!=e?eu.toVector(e):void 0,transform(e,n,r){let i=e||r.shared.transform;return this.hasCustomTransform=!!i,i||eR},threshold:e=>eu.toVector(e,0)},eQ=0,ej={...eL,axis(e,n,{axis:r}){if(this.lockDirection="lock"===r,!this.lockDirection)return r},axisThreshold:(e=eQ)=>e,bounds(e={}){if("function"==typeof e)return n=>ej.bounds(e(n));if("current"in e)return()=>e.current;if("function"==typeof HTMLElement&&e instanceof HTMLElement)return e;let{left:n=-1/0,right:r=1/0,top:i=-1/0,bottom:s=1/0}=e;return[[n,r],[i,s]]}},eV={ArrowRight:(e,n=1)=>[e*n,0],ArrowLeft:(e,n=1)=>[-1*e*n,0],ArrowUp:(e,n=1)=>[0,-1*e*n],ArrowDown:(e,n=1)=>[0,e*n]},ez=class extends eA{constructor(){super(...arguments),this.ingKey="dragging"}reset(){super.reset();let e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){let e=this.state;if(e._bounds instanceof HTMLElement){let n=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),i={left:n.left-r.left+e.offset[0],right:n.right-r.right+e.offset[0],top:n.top-r.top+e.offset[1],bottom:n.bottom-r.bottom+e.offset[1]};e._bounds=ej.bounds(i)}}cancel(){let e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){let n=this.config,r=this.state;if(null!=e.buttons&&(Array.isArray(n.pointerButtons)?!n.pointerButtons.includes(e.buttons):-1!==n.pointerButtons&&n.pointerButtons!==e.buttons))return;let i=this.ctrl.setEventIds(e);n.pointerCapture&&e.target.setPointerCapture(e.pointerId),i&&i.size>1&&r._pointerActive||(this.start(e),this.setupPointer(e),r._pointerId=eS(e),r._pointerActive=!0,this.computeValues(e_(e)),this.computeInitial(),n.preventScrollAxis&&"mouse"!==ev(e)?(r._active=!1,this.setupScrollPrevention(e)):n.delay>0?(this.setupDelayTrigger(e),n.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){let n=this.state;n._active=!0,n._preventScroll=!0,n._delayed=!1,this.compute(e),this.emit()}pointerMove(e){let n=this.state,r=this.config;if(!n._pointerActive)return;let i=eS(e);if(void 0!==n._pointerId&&i!==n._pointerId)return;let s=e_(e);if(document.pointerLockElement===e.target?n._delta=[e.movementX,e.movementY]:(n._delta=eu.sub(s,n._values),this.computeValues(s)),eu.addTo(n._movement,n._delta),this.compute(e),n._delayed&&n.intentional){this.timeoutStore.remove("dragDelay"),n.active=!1,this.startPointerDrag(e);return}if(r.preventScrollAxis&&!n._preventScroll)if(!n.axis)return;else if(n.axis===r.preventScrollAxis||"xy"===r.preventScrollAxis){n._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}let n=this.state,r=this.config;if(!n._active||!n._pointerActive)return;let i=eS(e);if(void 0!==n._pointerId&&i!==n._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);let[s,o]=n._distance;if(n.tap=s<=r.tapsThreshold&&o<=r.tapsThreshold,n.tap&&r.filterTaps)n._force=!0;else{let[e,i]=n._delta,[s,o]=n._movement,[a,l]=r.swipe.velocity,[h,c]=r.swipe.distance,u=r.swipe.duration;if(n.elapsedTime<u){let r=Math.abs(e/n.timeDelta),u=Math.abs(i/n.timeDelta);r>a&&Math.abs(s)>h&&(n.swipe[0]=Math.sign(e)),u>l&&Math.abs(o)>c&&(n.swipe[1]=Math.sign(i))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){let n=this.config,r=n.device;n.pointerLock&&e.currentTarget.requestPointerLock(),n.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){var n;this.state._preventScroll=!1,"persist"in(n=e)&&"function"==typeof n.persist&&n.persist();let r=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",r),this.eventStore.add(this.sharedConfig.window,"touch","cancel",r),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){let n=eV[e.key];if(n){let r=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),r._delta=n(this.config.keyboardDisplacement,i),r._keyboardActive=!0,eu.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in eV&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){let n=this.config.device;e(n,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(n,"change",this.pointerMove.bind(this)),e(n,"end",this.pointerUp.bind(this)),e(n,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},eB="undefined"!=typeof window&&window.document&&window.document.createElement;function eF(){return eB&&"ontouchstart"in window}var eZ={isBrowser:eB,gesture:function(){try{return"constructor"in GestureEvent}catch(e){return!1}}(),touch:eF(),touchscreen:eF()||eB&&window.navigator.maxTouchPoints>1,pointer:eB&&"onpointerdown"in window,pointerLock:eB&&"exitPointerLock"in window.document},eq={...eL,device(e,n,{shared:r,pointer:{touch:i=!1}={}}){if(r.target&&!eZ.touch&&eZ.gesture)return"gesture";if(eZ.touch&&i)return"touch";if(eZ.touchscreen){if(eZ.pointer)return"pointer";if(eZ.touch)return"touch"}},bounds(e,n,{scaleBounds:r={},angleBounds:i={}}){let s=e=>{let n=eT(eC(r,e),{min:-1/0,max:1/0});return[n.min,n.max]},o=e=>{let n=eT(eC(i,e),{min:-1/0,max:1/0});return[n.min,n.max]};return"function"!=typeof r&&"function"!=typeof i?[s(),o()]:e=>[s(e),o(e)]},threshold(e,n,r){return this.lockDirection="lock"===r.axis,eu.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey:e=>void 0===e?"ctrlKey":e,pinchOnWheel:(e=!0)=>e},eW={...ej,mouseOnly:(e=!0)=>e},eX={...ej,mouseOnly:(e=!0)=>e},eU=10,eY={mouse:0,touch:0,pen:8},eG={...ej,device(e,n,{pointer:{touch:r=!1,lock:i=!1,mouse:s=!1}={}}){return(this.pointerLock=i&&eZ.pointerLock,eZ.touch&&r)?"touch":this.pointerLock?"mouse":eZ.pointer&&!s?"pointer":eZ.touch?"touch":"mouse"},preventScrollAxis(e,n,{preventScroll:r}){if(this.preventScrollDelay="number"==typeof r?r:r||void 0===r&&e?250:void 0,eZ.touchscreen&&!1!==r)return e||(void 0!==r?"y":void 0)},pointerCapture(e,n,{pointer:{capture:r=!0,buttons:i=1,keys:s=!0}={}}){return this.pointerButtons=i,this.keys=s,!this.pointerLock&&"pointer"===this.device&&r},threshold(e,n,{filterTaps:r=!1,tapsThreshold:i=3,axis:s}){let o=eu.toVector(e,r?i:+!!s);return this.filterTaps=r,this.tapsThreshold=i,o},swipe({velocity:e=.5,distance:n=50,duration:r=250}={}){return{velocity:this.transform(eu.toVector(e)),distance:this.transform(eu.toVector(n)),duration:r}},delay(e=0){switch(e){case!0:return 180;case!1:return 0;default:return e}},axisThreshold:e=>e?{...eY,...e}:eY,keyboardDisplacement:(e=eU)=>e},eH=new Map,eK=new Map;function eJ(e){eH.set(e.key,e.engine),eK.set(e.key,e.resolver)}var e0={key:"drag",engine:ez,resolver:eG},e1={key:"hover",engine:e$,resolver:eX},e2={key:"move",engine:eI,resolver:eW},e5={key:"pinch",engine:eD,resolver:eq},e4={key:"scroll",engine:eN,resolver:ej},e3={key:"wheel",engine:eM,resolver:ej},e6=class{constructor(){this._timeouts=new Map}add(e,n,r=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(n,r,...i))}remove(e){let n=this._timeouts.get(e);n&&window.clearTimeout(n)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}},e9=class{constructor(e,n){this._listeners=new Set,this._ctrl=e,this._gestureKey=n}add(e,n,r,i,s){let o=this._listeners,a=function(e,n=""){let r=ef[e];return e+(r&&r[n]||n)}(n,r),l={...this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},...s};e.addEventListener(a,i,l);let h=()=>{e.removeEventListener(a,i,l),o.delete(h)};return o.add(h),h}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}},e7={target(e){if(e)return()=>"current"in e?e.current:e},enabled:(e=!0)=>e,window:(e=eZ.isBrowser?window:void 0)=>e,eventOptions:({passive:e=!0,capture:n=!1}={})=>({passive:e,capture:n}),transform:e=>e};function e8(e={},n){let r={};for(let[i,s]of Object.entries(n))switch(typeof s){case"function":r[i]=s.call(r,e[i],i,e);break;case"object":r[i]=e8(e[i],s);break;case"boolean":s&&(r[i]=e[i])}return r}var te=class{constructor(e){this.gestures=new Set,this._targetEventStore=new e9(this),this.gestureEventStores={},this.gestureTimeoutStores={},this.handlers={},this.config={},this.pointerIds=new Set,this.touchIds=new Set,this.state={shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}},function(e,n){n.drag&&tt(e,"drag"),n.wheel&&tt(e,"wheel"),n.scroll&&tt(e,"scroll"),n.move&&tt(e,"move"),n.pinch&&tt(e,"pinch"),n.hover&&tt(e,"hover")}(this,e)}setEventIds(e){if(eO(e))return this.touchIds=new Set(Array.from(e.touches).filter(n=>n.target===e.currentTarget||e.currentTarget?.contains?.(n.target)).map(e=>e.identifier)),this.touchIds;if("pointerId"in e)return"pointerup"===e.type||"pointercancel"===e.type?this.pointerIds.delete(e.pointerId):"pointerdown"===e.type&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,n){this.handlers=e,this.nativeHandlers=n}applyConfig(e,n){this.config=function(e,n,r={}){let{target:i,eventOptions:s,window:o,enabled:a,transform:l,...h}=e;if(r.shared=e8({target:i,eventOptions:s,window:o,enabled:a,transform:l},e7),n){let e=eK.get(n);r[n]=e8({shared:r.shared,...h},e)}else for(let e in h){let n=eK.get(e);n&&(r[e]=e8({shared:r.shared,...h[e]},n))}return r}(e,n,this.config)}clean(){for(let e of(this._targetEventStore.clean(),this.gestures))this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){let n,r=this.config.shared,i={};if(!r.target||(n=r.target())){if(r.enabled){for(let r of this.gestures){let s=this.config[r],o=tn(i,s.eventOptions,!!n);s.enabled&&new(eH.get(r))(this,e,r).bind(o)}let s=tn(i,r.eventOptions,!!n);for(let n in this.nativeHandlers)s(n,"",r=>this.nativeHandlers[n]({...this.state.shared,event:r,args:e}),void 0,!0)}for(let e in i)i[e]=function(...e){return 0===e.length?eE:1===e.length?e[0]:function(){let n;for(let r of e)n=r.apply(this,arguments)||n;return n}}(...i[e]);if(!n)return i;for(let e in i){let{device:r,capture:s,passive:o}=function(e){let n=e.substring(2).toLowerCase(),r=!!~n.indexOf("passive");r&&(n=n.replace("passive",""));let i=ey.includes(n)?"capturecapture":"capture",s=!!~n.indexOf(i);return s&&(n=n.replace("capture","")),{device:n,capture:s,passive:r}}(e);this._targetEventStore.add(n,r,"",i[e],{capture:s,passive:o})}}}};function tt(e,n){e.gestures.add(n),e.gestureEventStores[n]=new e9(e,n),e.gestureTimeoutStores[n]=new e6}var tn=(e,n,r)=>(i,s,o,a={},l=!1)=>{let h=a.capture??n.capture,c=a.passive??n.passive,u=l?i:function(e,n="",r=!1){let i=ef[e],s=i&&i[n]||n;return"on"+eg(e)+eg(s)+(!function(e=!1,n){return e&&!em.includes(n)}(r,s)?"":"Capture")}(i,s,h);r&&c&&(u+="Passive"),e[u]=e[u]||[],e[u].push(o)},tr=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function ti(e,n,r,i,s,o){if(!e.has(r)||!eH.has(i))return;let a=r+"Start",l=r+"End";s[i]=e=>{let i;return e.first&&a in n&&n[a](e),r in n&&(i=n[r](e)),e.last&&l in n&&n[l](e),i},o[i]=o[i]||{}}var ts=class{constructor(e,n,r,i,s){this._target=e,this._gestureKey=i,this._ctrl=new te(n),this._ctrl.applyHandlers(n,s),this._ctrl.applyConfig({...r,target:e},i),this._ctrl.effect()}destroy(){this._ctrl.clean()}setConfig(e){this._ctrl.clean(),this._ctrl.applyConfig({...e,target:this._target},this._gestureKey),this._ctrl.effect()}},to=function(e,n,r){return([e0,e5,e4,e3,e2,e1].forEach(eJ),function(e,n,r){let{handlers:i,nativeHandlers:s,config:o}=function(e,n){let[r,i,s]=function(e){let n={},r={},i=new Set;for(let s in e)tr.test(s)?(i.add(RegExp.lastMatch),r[s]=e[s]):n[s]=e[s];return[r,n,i]}(e),o={};return ti(s,r,"onDrag","drag",o,n),ti(s,r,"onWheel","wheel",o,n),ti(s,r,"onScroll","scroll",o,n),ti(s,r,"onPinch","pinch",o,n),ti(s,r,"onMove","move",o,n),ti(s,r,"onHover","hover",o,n),{handlers:o,config:n,nativeHandlers:i}}(n,r||{});return new ts(e,i,o,void 0,s)})(e,n,r||{})},ta=class extends x.nB{constructor(e,n){super(),this.target=e,this.config=n,this._pinching=!1,this.preventDefault();let r=new to(e,{onPinch:({origin:[e,n],first:r,last:i,movement:[s],offset:[o,a]})=>{this.handlePinch({first:r,last:i,originX:e,originY:n,newScale:o})}},{pinch:{scaleBounds:()=>this.getScaleBounds(),from:()=>[this.config.finalScale,0],modifierKey:["metaKey","ctrlKey"]}});this.toDispose.push(x.jG.create(()=>{r.destroy()}))}handlePinch(e){let{first:n,last:r,originX:i,originY:s,newScale:o}=e;if(Number.isNaN(e.newScale))return;n&&(this._pinching=!0),r&&(this._pinching=!1);let a=this.config.finalScale,l=this.config.getPosFromMouseEvent({clientX:i,clientY:s},!1),h={x:l.x/a*o,y:l.y/a*o};this.config.updateConfig({scrollX:this.config.config.scrollX+h.x-l.x,scrollY:this.config.config.scrollY+h.y-l.y,zoom:o})}getScaleBounds(){return{min:this.config.config.minZoom,max:this.config.config.maxZoom}}preventDefault(){let e=e=>e.preventDefault();document.addEventListener("gesturestart",e),document.addEventListener("gesturechange",e),this.toDispose.push(x.jG.create(()=>{document.removeEventListener("gesturestart",e),document.removeEventListener("gesturechange",e)}))}get pinching(){return this._pinching}},tl=Symbol("LazyInjectContext"),th=Symbol("IS_LAZY_INJECT_CONTEXT_INJECTED"),tc=e=>function(n,r){if(!e)throw Error(`ServiceIdentifier ${e} in @lazyInject is Empty, it might be caused by file circular dependency, please check it.`);return Reflect.hasMetadata(th,n)||((0,S.WQ)(tl)(n,tl),Reflect.defineMetadata(th,!0,n)),{get(){return this[tl].get(e)},set(){},configurable:!0,enumerable:!0}},tu=Symbol("PlaygroundContext"),td=Symbol("PlaygroundContextProvider"),tp=()=>function(e,n){let r=`${n}Provider`;return(0,S.WQ)(td)(e,r),(0,S.lq)()(e,r),{get(){return this[r]?.()},configurable:!0,enumerable:!0}},tf=Symbol("PlaygroundContainerFactory"),tg=Symbol("EntityManagerContribution"),tm=class extends Y{constructor(e){super(e),this.isInitialized=!0,this.ConfigDataRegistry=function(e){class n extends G{getDefaultData(){return e.getDefaultConfig()}checkChanged(n){return e.checkChanged(this.data,n)}toJSON(){return super.toJSON()}}return Object.defineProperty(n,"type",{value:`_${e.type}DataMixin`}),n}(this),this.addData(this.ConfigDataRegistry),this.isInitialized=!1}getDefaultConfig(){return{}}checkChanged(e,n){return Y.checkDataChanged(e,n)}get config(){return this.getData(this.ConfigDataRegistry).data}updateConfig(e){this.updateData(this.ConfigDataRegistry,e)}onConfigChanged(e){return this.getData(this.ConfigDataRegistry).onDataChange(n=>e(n.data))}};tm.type="ConfigEntity";var ty=class{constructor(){this.toDispose=new x.Vd,this.onEntityChangeEmitter=new x.vl,this.onEntityLifeCycleEmitter=new x.vl,this.onEntityDataChangeEmitter=new x.vl,this.registryMap=new Map,this.dataRegistryMap=new Map,this.dataInjectorMap=new Map,this.entityInstanceMap=new Map,this.entityVersionMap=new Map,this.entityDataVersionMap=new Map,this.entityInstanceMapByType=new Map,this.configEntities=new Map,this.onEntityChange=this.onEntityChangeEmitter.event,this.onEntityDataChange=this.onEntityDataChangeEmitter.event,this.onEntityLifeCycleChange=this.onEntityLifeCycleEmitter.event,this.changeEntityLocked=!1,this.schedule=new es,this.fireEntityChanged=e=>{let n="string"==typeof e?e:e.type,r=this.entityVersionMap.get(n)||0;r===Number.MAX_SAFE_INTEGER&&(r=0),this.entityVersionMap.set(n,r+1),this.changeEntityLocked||this.schedule.push(n,()=>{this.onEntityChangeEmitter.fire(n)})},this.fireEntityDataChanged=(e,n)=>{let r=this.entityDataVersionMap.get(n)||0;r===Number.MAX_SAFE_INTEGER&&(r=0),this.entityDataVersionMap.set(n,r+1),this.schedule.push(`${e}/${n}`,()=>{this.onEntityDataChangeEmitter.fire({entityType:e,entityDataType:n})})},this.fireEntityLifeCycleChanged=({type:e,entity:n})=>{this.schedule.push(`${e}/${n.id}`,()=>{this.onEntityLifeCycleEmitter.fire({type:e,entity:n})})},this.toDispose.pushAll([this.onEntityChangeEmitter,this.schedule])}init(){this.contributions.forEach(e=>e.registerEntityManager?.(this))}createEntity(e,n){if(!e.type)throw Error(`[EntityManager] createEntity need a type: ${e}`);if(this.configEntities.has(e.type))return this.configEntities.get(e.type);let r={entityManager:this,savedInManager:!0,...n},i=new e(r);return r.savedInManager&&this.saveEntity(i),i}isConfigEntity(e){return this.configEntities.has(e)}removeEntities(e){for(let n of this.getEntities(e).values())n.dispose()}removeEntityById(e){let n=this.getEntityById(e);return!!n&&(n.dispose(),!0)}resetEntities(e){this.getEntities(e).forEach(e=>{e.reset()})}resetEntity(e,n){let r=this.getEntity(e,n);r?.reset()}updateConfigEntity(e,n){let r=this.configEntities.get(e.type);r&&r.updateConfig(n)}getRegistryByType(e){return this.registryMap.get(e)}registerEntity(e){if(!e.type)throw Error(`Registry entity need a type: ${e.name}`);let n=this.registryMap.get(e.type);if(n){if(n!==e)throw Error(`Entity registry ${e.type} need a new type`);return}this.registryMap.set(e.type,e)}registerEntityData(e,n){if(!e.type)throw Error(`Registry entity data need a type: ${e.name}`);this.dataRegistryMap.get(e.type)||this.dataRegistryMap.set(e.type,e),!this.dataInjectorMap.get(e.type)&&n&&this.dataInjectorMap.set(e.type,n)}getDataRegistryByType(e){return this.dataRegistryMap.get(e)}getEntityById(e){return this.entityInstanceMap.get(e)}getEntity(e,n){let r=this.getEntities(e)[0];return!r&&n?this.createEntity(e):r}getEntities(e){return this.entityInstanceMapByType.get(e.type)||[]}getEntityDatas(e,n){return this.getEntities(e).map(e=>e.getData(n)).filter(e=>!!e)}hasEntity(e){return!!this.getEntity(e)}storeState({configOnly:e=!0}={}){let n=[];for(let r of this.entityInstanceMap.values())if((!e||r instanceof tm)&&r.toJSON&&r.toJSON){let e=r.toJSON();e&&n.push(e)}return n}restoreState(e){e&&Array.isArray(e)&&e.forEach(e=>{if(!e||!e.type||!e.id)return;let n=this.getRegistryByType(e.type);if(!n)return void console.warn(`Playground entity registry lost: ${e.type}`);let r=this.createEntity(n,{id:e.id});r.fromJSON&&r.fromJSON(e)})}saveEntity(e){let{id:n}=e;if(n&&this.entityInstanceMap.has(n))return void console.error(`Entity ${e.type} ${n} is created before`);this.entityInstanceMap.set(e.id,e);let r=this.entityInstanceMapByType.get(e.type);r||(r=[],this.entityInstanceMapByType.set(e.type,r)),e instanceof tm&&this.configEntities.set(e.type,e),r.push(e),e.onEntityChange(e=>{this.fireEntityChanged(e),this.fireEntityLifeCycleChanged({type:"update",entity:e})}),e.onDataChange(n=>{this.fireEntityDataChanged(e.type,n.data.type)}),e.toDispose.push(x.jG.create(()=>{this.removeEntity(e),this.fireEntityLifeCycleChanged({type:"delete",entity:e})})),e.getDefaultDataRegistries().forEach(n=>this.fireEntityDataChanged(e.type,n.type)),this.fireEntityChanged(e),this.fireEntityLifeCycleChanged({type:"add",entity:e})}removeEntity(e){if(this.entityInstanceMap.has(e.id)&&this.entityInstanceMapByType.has(e.type)){let n=this.entityInstanceMapByType.get(e.type);-1!==n.indexOf(e)&&(this.entityInstanceMapByType.set(e.type,n.filter(n=>n!==e)),this.entityInstanceMap.delete(e.id),this.configEntities.has(e.type)&&this.configEntities.delete(e.type),this.fireEntityChanged(e))}}reset(){for(let e of this.entityInstanceMap.values())e.reset()}getEntityVersion(e){return this.entityVersionMap.get("string"==typeof e?e:e.type)||0}getEntityDataVersion(e){return this.entityDataVersionMap.get("string"==typeof e?e:e.type)||0}dispose(){this.toDispose.dispose()}getDataInjector(e){return this.dataInjectorMap.get("string"==typeof e?e:e.type)}getService(e){return this.containerFactory?.get(e)}};q([(0,S.tt)(tg),(0,S.lq)()],ty.prototype,"contributions",2),q([tp()],ty.prototype,"context",2),q([(0,S.WQ)(tf),(0,S.lq)()],ty.prototype,"containerFactory",2),q([(0,S.kr)()],ty.prototype,"init",1),ty=q([(0,S._G)()],ty);var tO=Symbol("EntitiesDecorator"),tv=Symbol("EntitiesByDataDecorator"),tb=Symbol("PropertiesInjected");function tx(e,n){return Reflect.getMetadata(n,e.prototype)||[]}function tw(e){return Reflect.getMetadata(tb,e)||[]}function tS(e,n,r,i){return(s,o)=>{let a=Reflect.getMetadata(e,s);if(a||Reflect.defineMetadata(e,a=[],s),Array.isArray(n)||(n=[n]),n.forEach(e=>{a.includes(e)||a.push(e)}),i&&i(s,o),o&&r){let e=tw(s);return e.push(o),Reflect.defineMetadata(tb,e,s),{enumerable:!1,configurable:!1,get(){return r(this,o)}}}}}function t_(e){return tS(tO,e,n=>n.observeManager.get(e))}function tk(e){return tS(tO,e,n=>n.observeManager.getEntities(e))}function tC(e,n){return tS(tv,{entity:e,data:n},r=>r.observeManager.getEntityDatas(e,n))}var tE=Symbol("ProtectWheelArea"),tT=((u=tT||{})[u.BASE_LAYER=-2]="BASE_LAYER",u[u.TOOL_LAYER=-1]="TOOL_LAYER",u[u.NORMAL_LAYER=0]="NORMAL_LAYER",u),tP=Symbol("PipelineLayerFactory"),tA=class{constructor(){this.onSelectionChangedEmitter=new x.vl,this.onSelectionChanged=this.onSelectionChangedEmitter.event,this.currentSelection=[],this.disposers=[]}get selection(){return this.currentSelection}isEmpty(){return 0===this.currentSelection.length}set selection(e){x.Gs.isArrayShallowChanged(this.currentSelection,e)&&(this.disposers.forEach(e=>e.dispose()),this.changeSelection(e),this.disposers=this.currentSelection.map(e=>e.onDispose(()=>{let n=this.currentSelection.filter(n=>n!==e);this.changeSelection(n)})))}changeSelection(e){this.currentSelection=e,this.onSelectionChangedEmitter.fire(this.currentSelection)}dispose(){this.onSelectionChangedEmitter.dispose()}};tA=q([(0,S._G)()],tA);var tM=Symbol("StorageService"),tN=class{constructor(){this._prefix="__gedit:"}setData(e,n){this.storage[this.prefix(e)]=JSON.stringify(n)}getData(e,n){let r=this.storage[this.prefix(e)];return void 0===r?n:JSON.parse(r)}prefix(e){return`${this._prefix}${e}`}setPrefix(e){this._prefix=e}init(){"undefined"!=typeof window&&window.localStorage?this.storage=window.localStorage:this.storage={}}};q([(0,S.kr)()],tN.prototype,"init",1),tN=q([(0,S._G)()],tN);var tD=Symbol("ClipboardService"),tI=class{constructor(){this.onClipboardChangedEmitter=new x.vl,this.onClipboardChanged=this.onClipboardChangedEmitter.event}readText(){return this._currentData}writeText(e){this._currentData!==e&&(this._currentData=e,this.onClipboardChangedEmitter.fire(e))}};tI=q([(0,S._G)()],tI);var t$=class{get rightPanelVisible(){return this.isRightPanelVisible}set rightPanelVisible(e){this.isRightPanelVisible=e}};t$=q([(0,S._G)()],t$);var tR=class{constructor(){this.onLoggerEmitter=new x.vl,this.onLogger=this.onLoggerEmitter.event}onAllLayersRendered(){this.onLoggerEmitter.fire({event:0})}onFlushRequest(e){e<=0||this.onLoggerEmitter.fire({event:1,props:{rfi:e,fps:1e3/e}})}dispose(){this.onLoggerEmitter.dispose()}};function tL({originRenderer:e,renderedCb:n}){return(0,D.useEffect)(()=>{n()},[]),e()||null}tR=q([(0,S._G)()],tR);var tQ=class{constructor(){this.layerEntitiesSelectorMap=new WeakMap,this.entityLayerMap=new Map,this.ableLayerMap=new Map}subscribeEntities(e,n){let r=this.getSelector(e);n.forEach(n=>{r.entities.includes(n)||r.entities.push(n);let i=this.entityLayerMap.get(n.type);i||(i=new Set,this.entityLayerMap.set(n.type,i)),i.add(e)})}subscribleEntityByData(e,n,r){let i=this.getSelector(e),s=this.entityLayerMap.get(n.type);s||(s=new Set,this.entityLayerMap.set(n.type,s)),s.add(e);let o=[n,r];i.datas.find(e=>e[0]===n&&e[1]===r)||i.datas.push(o)}getSelector(e){let n=this.layerEntitiesSelectorMap.get(e);return n||(n={entities:[],datas:[]},this.layerEntitiesSelectorMap.set(e,n)),n}getLayerEntities(e){let n=this.layerEntitiesSelectorMap.get(e);if(!n)return{entities:[],changed:!1};let r=new Set,i=new Map,s=!1;n.entities.forEach(e=>{let n=this.entityManager.getEntities(e),s=this.entityManager.getEntityVersion(e);for(let o of(i.set(e.type,s),n))r.add(o)});let o=[];for(let e of r.values())o.push(e);return tj(i,n.lastEntityVersion)&&(n.lastEntityVersion=i,s=!0),{entities:o,changed:s}}getLayerEntityDatas(e){let n=this.layerEntitiesSelectorMap.get(e);if(!n)return{datas:[],changed:!1};let r=[],i=new Map,s=!1;return n.datas.forEach(e=>{let[n,s]=e,o=this.entityManager.getEntityDatas(n,s),a=this.entityManager.getEntityDataVersion(s);for(let e of(i.set(s.type,a),o))r.push(e)}),tj(i,n.lastDataVersion)&&(n.lastDataVersion=i,s=!0),{datas:r,changed:s}}getLayerData(e){let n=this.getLayerEntities(e),r=this.getLayerEntityDatas(e);return{observeEntities:n.entities,observeDatas:r.datas,changed:r.changed||n.changed}}};function tj(e=new Map,n=new Map){if(e.size!==n.size)return!0;for(let r of e.keys())if(e.get(r)!==n.get(r))return!0;return!1}q([(0,S.WQ)(ty)],tQ.prototype,"entityManager",2),tQ=q([(0,S._G)()],tQ);var tV=0,tz=class extends I.ConflatableMessage{constructor(e){super(`flush-layer-request_layer${tV++}`),this.layer=e}},tB=class{constructor(e,n){this.selector=e,this.isReady=!1,this.onAllLayersRenderedEmitter=new x.vl,this.toDispose=new x.Vd,this.layers=[],this.forceUpdates=new Set,this.layerAutorunMap=new Map,this.layerRenderedMap=new Map,this.layerFlushMessages=new Map,this.reactPortals=[],this.node=x.Si.createDivWithClass("gedit-playground-pipeline"),this.onAllLayersRendered=this.onAllLayersRenderedEmitter.event,this.toDispose.push(n.onEntityChange(e=>{let n=this.selector.entityLayerMap.get(e);n&&n.forEach(e=>this.updateLayer(e))})),this.toDispose.push(this.onAllLayersRenderedEmitter)}reportLayerRendered(e){this.layerRenderedMap.set(e,!0),Array.from(this.layerRenderedMap.values()).every(e=>e)&&(this.loggerService.onAllLayersRendered(),this.onAllLayersRenderedEmitter.fire(),window.REPORT_TTI_FOR_E2E&&window.REPORT_TTI_FOR_E2E(performance.now(),performance.getEntriesByType("resource")))}addLayer(e){if(this.layers.push(e),this.toDispose.push(e),this.layerFlushMessages.set(e,new tz(e)),e.pipelineNode=this.node,e.playgroundNode=this.node.parentElement,(e.autorun||e.render)&&!e.node&&(e.node=document.createElement("div")),e.node&&(this.node.appendChild(e.node),e.node.classList.add("gedit-playground-layer")),e.autorun){let n=e.autorun.bind(e);this.layerAutorunMap.set(e,n),e.autorun=()=>{this.updateLayer(e,!0)}}else if(e.render){this.layerRenderedMap.set(e,!1);let n=e.render.bind(e),r=function(e,n,r,i){let s=x.tE;function o(){let o,[,a]=(0,D.useState)({}),l=(0,D.useCallback)(()=>{r(e)},[e]);(0,D.useEffect)(()=>(s=()=>a({}),()=>{s=x.tE}));try{o=i.isReady?D.createElement(tL,{originRenderer:n,renderedCb:l}):D.createElement(D.Fragment,null)}catch(n){console.error(`Render Layer "${e.constructor.name}" error `,n),o=D.createElement(D.Fragment,null)}return $.createPortal(o,e.node)}return{autorun:()=>s(),portal:e.renderWithReactMemo?D.memo(o):o}}(e,n,this.reportLayerRendered.bind(this),this);this.reactPortals.push(r.portal),this.layerAutorunMap.set(e,r.autorun),e.render=()=>{this.updateLayer(e,!0)}}}flush(e){this.layers.forEach(n=>{this.updateLayer(n,e)})}ready(){this.layers.forEach(e=>{this.loadLayerEntities(e),e.onReady&&e.onReady()}),this.isReady=!0,this.flush(!0)}dispose(){this.toDispose.dispose(),this.node.remove()}processMessage(e){e instanceof tz&&this.onFlushRequest(e.layer)}loadLayerEntities(e){let n=this.selector.getLayerData(e);return n.changed&&e.observeManager.load(n.observeEntities,n.observeDatas),n.changed}onFlushRequest(e){if(!this.isReady||this.toDispose.disposed)return!1;let n=performance.now(),r=()=>{let e=performance.now()-n;e<4||this.loggerService.onFlushRequest(e)},i=this.layerAutorunMap.get(e),s=this.loadLayerEntities(e);if(i&&(s||this.forceUpdates.has(e))){this.forceUpdates.delete(e);try{i()}catch(e){console.error(e)}return r(),!0}return r(),!1}updateLayer(e,n){n&&this.forceUpdates.add(e),I.MessageLoop.postMessage(this,this.layerFlushMessages.get(e))}toReactComponent(){if(this.reactComp)return this.reactComp;let e=this.reactPortals,n=()=>D.createElement(D.Fragment,null,e.map((e,n)=>D.createElement(e,{key:n})));return this.reactComp=n,n}};q([(0,S.WQ)(tR)],tB.prototype,"loggerService",2),tB=q([(0,S._G)(),W(0,(0,S.WQ)(tQ)),W(1,(0,S.WQ)(ty))],tB),(d=O||(O={})).STATE_SELECT={id:"STATE_SELECT",cursor:"",shortcut:"",cancelMode:"hold"},d.STATE_MOUSE_FRIENDLY_SELECT={id:"STATE_MOUSE_FRIENDLY_SELECT",cursor:"grab",shortcut:"",cancelMode:"hold"},d.STATE_GRAB={id:"STATE_GRAB",cursor:"grab",shortcut:"SPACE",shortcutAutoEsc:!0,shortcutWorksOnlyOnStateChanged:!0,cancelMode:"hold"};var tF=[O.STATE_SELECT,O.STATE_MOUSE_FRIENDLY_SELECT,O.STATE_GRAB],tZ=class extends tm{constructor(e){super(e),this._isPressingSpaceBar=!1,this._isPressingShift=!1,this.states=tF.slice(),this.selected=O.STATE_SELECT.id,this.onStateChangeEmitter=new x.vl,this.onStateChange=this.onStateChangeEmitter.event,this.toDispose.push(this.onStateChangeEmitter)}get isPressingSpaceBar(){return this._isPressingSpaceBar}set isPressingSpaceBar(e){this._isPressingSpaceBar=e}get isPressingShift(){return this._isPressingShift}set isPressingShift(e){this._isPressingShift=e}onCancel(e,n){return this.onStateChange(r=>{r.lastState&&r.lastState.id===e&&n()})}getCurrentState(){return this.states.find(e=>e.id===this.selected)}is(e){return this.selected===e}changeState(e,n){let r=this.states.find(n=>n.id===e);if(!r)throw Error(`Unknown editor state ${e}`);if(this.selected!==e){let i=this.getCurrentState();this.selected=e,this.onStateChangeEmitter.fire({state:r,event:n,lastState:i}),this.fireChange()}}toDefaultState(){this.changeState(O.STATE_SELECT.id)}registerState(e){this.states.push(e),this.fireChange()}getStates(){return this.states}isMouseFriendlyMode(){return this.getCurrentState()===O.STATE_MOUSE_FRIENDLY_SELECT}getStateFromShortcut(e){return this.states.find(n=>{if(("SPACE"===n.shortcut?" ":(n.shortcut||"").toLowerCase())===e.key.toLowerCase())return n})}};tZ.type="EditorStateConfigEntity";var tq=0,tW=class extends tm{constructor(e){super(e),this._loading=!1,this._zoomEnable=!0,this._onReadonlyOrDisabledChangeEmitter=new x.vl,this._onGrabDisableChangeEmitter=new x.vl,this.onGrabDisableChange=this._onGrabDisableChangeEmitter.event,this.onReadonlyOrDisabledChange=this._onReadonlyOrDisabledChangeEmitter.event,this.cursor="default",this.toDispose.push(this._onReadonlyOrDisabledChangeEmitter)}get grabDisable(){return this.config.grabDisable}set grabDisable(e){this.updateConfig({grabDisable:e})}get scrollDisable(){return this.config.scrollDisable}set scrollDisable(e){this.updateConfig({scrollDisable:e})}get zoomDisable(){return this.config.zoomDisable}set zoomDisable(e){this.updateConfig({zoomDisable:e})}getDefaultConfig(){return{scrollX:0,scrollY:0,originX:0,originY:0,width:0,height:0,minZoom:.25,maxZoom:2,zoom:1,clientX:0,clientY:0,reverseScroll:!0,overflowX:"scroll",overflowY:"scroll",disabled:!1,readonly:!1,grabDisable:!1,scrollDisable:!1,zoomDisable:!1,mouseScrollDelta:.05}}addScrollLimit(e){this._scrollLimitFn=e}updateConfig(e){void 0!==e.zoom&&(e={...e,zoom:this.normalizeZoom(e.zoom)}),!(e={...this.config,...e}).reverseScroll&&(e.scrollX<this.config.originX&&(e.scrollX=this.config.originX),e.scrollY<this.config.originY&&(e.scrollY=this.config.originY)),void 0!==e.scrollLimitX&&e.scrollX<e.scrollLimitX&&(e.scrollX=e.scrollLimitX),void 0!==e.scrollLimitY&&e.scrollY<e.scrollLimitY&&(e.scrollY=e.scrollLimitY),"hidden"===e.overflowX&&(e.scrollX=this.config.originX),"hidden"===e.overflowY&&(e.scrollY=this.config.originY);let n=e.scrollDisable||this.scrollDisable,{readonly:r,disabled:i,grabDisable:s}=this;n&&(e.scrollX=this.config.scrollX,e.scrollY=this.config.scrollY),super.updateConfig(this._scrollLimitFn?{...e,...this._scrollLimitFn({scrollX:e.scrollX,scrollY:e.scrollY})}:e),(r!==this.readonly||i!==this.disabled)&&this._onReadonlyOrDisabledChangeEmitter.fire({readonly:this.readonly,disabled:this.disabled}),s!==this.grabDisable&&this._onGrabDisableChangeEmitter.fire(this.grabDisable)}get finalScale(){return this.zoomEnable?this.config.zoom:1}get zoom(){return this.zoomEnable?this.config.zoom:1}get scrollData(){return{scrollX:this.config.scrollX,scrollY:this.config.scrollY}}normalizeZoom(e){return this.zoomEnable?this.zoomDisable?this.config.zoom:(e<this.config.minZoom?e=this.config.minZoom:e>this.config.maxZoom&&(e=this.config.maxZoom),e):1}updateCursor(e){this.cursor!==e&&(this.cursor=e,this.fireChange())}getPosFromMouseEvent(e,n=!0){let{config:r}=this,i=n?this.zoom:1,{clientX:s,clientY:o}=m.getEventCoord(e);return{x:(s+r.scrollX-r.clientX)/i,y:(o+r.scrollY-r.clientY)/i}}toFixedPos(e){let{config:n}=this;return{x:e.x-n.scrollX+n.clientX,y:e.y-n.scrollY+n.clientY}}getViewport(e=!0){let{config:n}=this,r=e?this.finalScale:1;return new x.M_(n.scrollX/r,n.scrollY/r,n.width/r,n.height/r)}isViewportVisible(e,n=0,r=!1){return x.M_.isViewportVisible(e,this.getViewport(),n,r)}scrollToView(e={}){let n,{scrollDelta:r,position:i,easing:s=!0,easingDuration:o=300,entities:a}=e,{config:l}=this,h=e.zoom?e.zoom:this.finalScale;if(a&&a.length>0){let e=a.map(e=>{let n=e.getData(ei);if(n)return n.bounds;let r=e.getData(K),i=e.getData(et)||{width:0,height:0};if(r)return new x.M_(r.x,r.y,i.width,i.height||0)}).filter(e=>!!e);e.length>0&&(n=x.M_.enlarge(e))}else i?n=new x.M_(i.x,i.y,0,0):e.bounds&&(n=e.bounds);if(!n){let e=this.getDefaultConfig();n=new x.M_((e.scrollX+l.width/2)/h,(e.scrollY+l.height/2)/h,0,0)}if(!e.scrollToCenter&&this.getViewport().containsRectangle(n))return Promise.resolve();let c={scrollX:(n.x+n.width/2+(r?r.x:0))*h-l.width/2,scrollY:(n.y+n.height/2+(r?r.y:0))*h-l.height/2,zoom:e.zoom};return this.scroll(c,s,o)}setPageBounds(e){this.updateConfig({pageBounds:{x:e.x,y:e.y,width:e.width,height:e.height}})}getPageBounds(){let{pageBounds:e}=this.config;if(e)return new x.M_(e.x,e.y,e.width,e.height)}scrollPageBoundsToCenter(e=!0,n=16,r=!0){let i=this.getPageBounds();if(i){let s,o=2*n;return e&&(s=x.Hw.fixSize({width:i.width,height:i.height},{width:o>this.config.width?o:this.config.width-o,height:o>this.config.height?o:this.config.height-o})),this.scrollToView({bounds:i,zoom:s,scrollToCenter:!0,easing:r})}return this.scrollToView({easing:r})}scroll(e,n=!0,r=300){let i=new x.hc;if(this.cancelScrollTeeen&&this.cancelScrollTeeen.dispose(),n){let n={scrollX:this.config.scrollX,scrollY:this.config.scrollY,zoom:this.config.zoom};this.cancelScrollTeeen=eh({from:n,to:{...n,...e},onUpdate:e=>{this.updateConfig(e)},onComplete:()=>{this.cancelScrollTeeen=void 0,i.resolve()},onDispose:()=>{i.resolve()},duration:r})}else this.updateConfig(e),i.resolve();return i.promise}fixLayerPosition(e){x.Si.setStyle(e,{left:this.config.scrollX,top:this.config.scrollY})}get loading(){return this._loading}set loading(e){this.loading!==e&&(this._loading=e,this.fireChange())}get zoomEnable(){return this._zoomEnable}set zoomEnable(e){this._zoomEnable!==e&&(this._zoomEnable=e,this.fireChange())}zoomin(e,n){let r=this.config.zoom/10,i=Math.ceil((this.config.zoom+r)*10)/10;this.updateZoom(i,e,n)}zoomout(e,n){let r=this.config.zoom/10,i=Math.floor((this.config.zoom-r)*10)/10;this.updateZoom(i,e,n)}updateZoom(e,n=!0,r=200){e=this.normalizeZoom(e);let{center:i}=this.getViewport(),s=this.finalScale,o=this.zoomEnable?e:s;if(o!==s){let a={x:i.x*o-i.x*s,y:i.y*o-i.y*s};this.scroll({scrollX:this.config.scrollX+a.x,scrollY:this.config.scrollY+a.y,zoom:e},n,r)}}get disabled(){return this.config.disabled}get readonly(){return this.config.readonly}get readonlyOrDisabled(){return this.config.readonly||this.config.disabled}set readonly(e){this.updateConfig({readonly:e})}set disabled(e){this.updateConfig({disabled:e})}fitView(e,n=!0,r=0,i=300){let s=this.getViewport(!1),o=x.Hw.fixSize(e.clone().pad(r,r),s);return this.scrollToView({bounds:e,zoom:o,easing:n,easingDuration:i,scrollToCenter:!0})}};tW.type="PlaygroundConfigEntity";var tX=Symbol("LayerOptions"),tU=class{constructor(){this.toDispose=new x.Vd,this.renderWithReactMemo=!0}dispose(){this.toDispose.dispose()}createDOMCache(e,n){if(!this.node)throw Error("DomCache need a parent dom node.");return x.Si.createDOMCache(this.node,e,n)}getPosFromMouseEvent(e,n=!0){let r=this.config.getPosFromMouseEvent(e,n);return{x:r.x,y:r.y}}};q([(0,S.WQ)(tX)],tU.prototype,"options",2),q([(0,S.WQ)(ty)],tU.prototype,"entityManager",2),q([tp()],tU.prototype,"context",2),tU=q([(0,S._G)()],tU);var tY=class extends tU{constructor(){super(...arguments),this.startGrabScroll={scrollX:0,scrollY:0},this.cursorStyle=document.createElement("style"),this.maskNode=document.createElement("div"),this.grabDragger=new ea({onDragStart:e=>{this.config.grabDisable||(this.config.updateCursor("grabbing"),this.startGrabScroll={scrollX:this.config.config.scrollX,scrollY:this.config.config.scrollY})},onDrag:e=>{this.config.grabDisable||this.config.updateConfig({scrollX:this.startGrabScroll.scrollX-e.endPos.x+e.startPos.x,scrollY:this.startGrabScroll.scrollY-e.endPos.y+e.startPos.y})},onDragEnd:e=>{this.isGrab()&&this.config.updateCursor("grab"),1===e.button&&(this.isMouseMode()?(this.editorStateConfig.changeState(O.STATE_MOUSE_FRIENDLY_SELECT.id),this.config.updateCursor("grab")):(this.editorStateConfig.toDefaultState(),this.config.updateCursor("")))}})}onReady(){if(this.options={preventGlobalGesture:!1,...this.options},this.options.preventGlobalGesture){let e=new to(document.body,{onPinch:()=>{}});document.documentElement&&(document.documentElement.style.overscrollBehaviorX="none"),document.body.style.overscrollBehaviorX="none",this.toDispose.push(x.jG.create(()=>e.destroy()))}this.toDispose.pushAll([this.config.onGrabDisableChange(e=>{e&&this.grabDragger.stop(0,0)}),x.Si.addStandardDisposableListener(this.playgroundNode,"wheel",e=>{this.getScrollParent(e.target)||(e.preventDefault(),e.stopPropagation())}),this.listenPlaygroundEvent("wheel",this.handleWheelEvent.bind(this),-2,{passive:!0}),this.listenPlaygroundEvent("touchstart",e=>{let{clientX:n,clientY:r}=m.getEventCoord(e);this.options?.hoverService&&(this.options.hoverService.updateHoverPosition({x:n,y:r},e.target),this.options.hoverService?.isSomeHovered()||this.grabDragger.start(n,r))},0),this.listenPlaygroundEvent("touchend",e=>{this.options.hoverService?.clearHovered()}),this.listenPlaygroundEvent("touchcancel",e=>{this.options.hoverService?.clearHovered()}),this.listenPlaygroundEvent("mousedown",e=>{let n=1===e.button;n&&!this.isMouseMode()&&this.editorStateConfig.changeState(O.STATE_GRAB.id),this.isGrab()&&(this.editorStateConfig.isPressingSpaceBar||n)&&this.grabDragger.start(e.clientX,e.clientY)},-2),this.listenPlaygroundEvent("mousedown",e=>{let n=this.options?.hoverService?.isSomeHovered();!this.isMouseMode()||n||this.editorStateConfig.isPressingShift||this.grabDragger.start(e.clientX,e.clientY)},0),this.editorStateConfig.onStateChange(this.onStateChanged.bind(this)),this.listenGlobalEvent("keydown",e=>{e.shiftKey&&(this.editorStateConfig.isPressingShift=!0,this.isMouseMode()&&this.config.updateCursor(""))},-2),this.listenGlobalEvent("keypress",e=>{if(!this.isFocused||e.target!==this.playgroundNode||this.isMouseMode())return;let n=this.editorStateConfig.getStateFromShortcut(e);" "===e.key&&(this.editorStateConfig.isPressingSpaceBar=!0),(n?.shortcutWorksOnlyOnStateChanged!==!0||n!==this.editorStateConfig.getCurrentState())&&(this.lastShortcutState=n,n&&this.editorStateConfig.changeState(n.id))},-2),this.listenGlobalEvent("keyup",e=>{" "===e.key&&(this.editorStateConfig.isPressingSpaceBar=!1),this.editorStateConfig.isPressingShift=!1,this.lastShortcutState&&this.lastShortcutState.shortcutAutoEsc&&this.editorStateConfig.toDefaultState(),this.lastShortcutState=void 0}),{dispose:()=>{this.maskNode.parentNode&&this.maskNode.parentNode.removeChild(this.maskNode),this.cursorStyle.parentNode&&this.cursorStyle.parentNode.removeChild(this.cursorStyle)}}]),"MOUSE"===this.options.ineractiveType&&this.editorStateConfig.changeState(O.STATE_MOUSE_FRIENDLY_SELECT.id)}getCursor(e){return e?this.playgroundConfigEntity.getCursors?.()?.[e]??e:""}isMouseMode(){return this.editorStateConfig.isMouseFriendlyMode()}onStateChanged(e){let{state:n}=e;if(this.cancelStateListen&&(this.cancelStateListen.dispose(),this.cancelStateListen=void 0),n.handle&&n.handle(this.config,e),n.cursor?(this.playgroundConfigEntity.updateCursor(n.cursor),this.currentGesture&&this.currentGesture.target.parentNode&&(this.currentGesture.target.parentNode.style.cursor=this.getCursor(n.cursor))):(this.playgroundConfigEntity.updateCursor(""),this.currentGesture&&this.currentGesture.target.parentNode&&(this.currentGesture.target.parentNode.style.cursor="")),"grab"===n.cursor||"grabbing"===n.cursor){if(n===O.STATE_MOUSE_FRIENDLY_SELECT)return;this.maskNode.style.cssText=`
        position: absolute;
        width: 100%;
        height: 100%;
        z-index: 100;
      `,this.playgroundNode.appendChild(this.maskNode)}else this.maskNode.parentNode&&this.maskNode.parentNode.removeChild(this.maskNode);"esc"===n.cancelMode?this.cancelStateListen=x.Si.addStandardDisposableListener(document.body,"keydown",e=>{("Escape"===e.key||"Enter"===e.key)&&this.editorStateConfig.toDefaultState()},!0):"once"===n.cancelMode&&this.editorStateConfig.toDefaultState()}isGrab(){let e=this.editorStateConfig.getCurrentState();return e===O.STATE_GRAB||e===O.STATE_MOUSE_FRIENDLY_SELECT}createGesture(){this.currentGesture||(this.currentGesture=new ta(this.pipelineNode.parentElement,this.config),this.currentGesture.onDispose(()=>{this.currentGesture=void 0}),this.toDispose.push(this.currentGesture))}onResize(e){this.size={...e},this.updateSizeWithRulerConfig()}updateSizeWithRulerConfig(){let{size:e}=this;e&&this.config.updateConfig({width:e.width,height:e.height,clientX:e.clientX,clientY:e.clientY})}handleScrollEvent(e){let{playgroundConfigEntity:n}=this,r=n.config.scrollX+e.deltaX,i=n.config.scrollY+e.deltaY;n.updateConfig({scrollX:r,scrollY:i})}getMouseScaleDelta(){let{mouseScrollDelta:e,zoom:n}=this.config.config;return"function"==typeof e?e(n):e??.05}handleWheelEvent(e){if((!this.currentGesture||!this.currentGesture.pinching)&&!e.ctrlKey&&!e.metaKey&&!this.getScrollParent(e.target)){if(this.isMouseMode()){let{zoom:n,minZoom:r,maxZoom:i,scrollX:s,scrollY:o}=this.playgroundConfigEntity.config,a=this.getMouseScaleDelta(),l=(Math.abs(e.deltaY)>0?e.deltaY:e.deltaX)>0?-a:a,h=this.config.finalScale,c=e.clientX,u=e.clientY,d=Math.max(r,Math.min(i,n+l)),p=this.config.getPosFromMouseEvent({clientX:c,clientY:u},!1),f={x:p.x/h*d,y:p.y/h*d};this.config.updateConfig({scrollX:s+f.x-p.x,scrollY:o+f.y-p.y,zoom:d});return}this.handleScrollEvent(e)}}getScrollParent(e){if(!e||e===this.pipelineNode.parentElement)return null;let n=e.scrollWidth>e.clientWidth,r=e.scrollHeight>e.clientHeight,i=window.getComputedStyle(e).overflowX,s=window.getComputedStyle(e).overflowY,o=["auto","scroll","overlay"].includes(i),a=["auto","scroll","overlay"].includes(s);return n&&o||r&&a||this.protectWheelArea?.(e)?e:this.getScrollParent(e.parentElement)}autorun(){let e=this.playgroundConfigEntity.config,{cursor:n}=this.playgroundConfigEntity,r=this.getCursor(n);if(this.config.zoomEnable?this.createGesture():this.currentGesture&&this.currentGesture.dispose(),x.Si.setStyle(this.pipelineNode,{left:-e.scrollX,top:-e.scrollY,width:e.width,height:e.height}),this.pipelineNode.parentElement.style.cursor=r,"grab"===n||"grabbing"===n){let e="";this.playgroundNode.classList.forEach(n=>{e+=`.${n}`}),this.cursorStyle.innerText=`.${e} * { cursor: ${r} }`,this.cursorStyle.parentNode||document.head.appendChild(this.cursorStyle)}else this.cursorStyle.parentNode&&this.cursorStyle.parentNode.removeChild(this.cursorStyle)}};q([t_(tW)],tY.prototype,"playgroundConfigEntity",2),q([t_(tZ)],tY.prototype,"editorStateConfig",2),q([(0,S.lq)(),(0,S.WQ)(tE)],tY.prototype,"protectWheelArea",2),tY=q([(0,S._G)()],tY);var tG=class{constructor(e){this.entityManager=e,this.observeEntities=[],this.observeDatas=[],this.entitiesTypeCache=new Map,this.entitiesAbleCache=new Map,this.entitiyDataCache=new Map}get size(){return this.observeEntities.length}load(e,n){this.observeEntities=e,this.observeDatas=n,this.entitiesTypeCache.clear(),this.entitiesAbleCache.clear(),this.entitiyDataCache.clear()}get(e,n){let r=this.getEntities(e);return void 0!==n?r.find(e=>e.id===n):r[0]}has(e){return!!this.get(e)}getEntities(e){let n=this.entitiesTypeCache.get(e);return n||(n=[],this.observeEntities.forEach(r=>{r.type===e.type&&n.push(r)}),this.entitiesTypeCache.set(e,n)),n.filter(e=>!e.disposed)}getEntityDatas(e,n){let r=`${e.type}:${n.type}`,i=this.entitiyDataCache.get(r);return i||(i=this.observeDatas.filter(r=>r.type===n.type&&r.entity.type===e.type),this.entitiyDataCache.set(r,i)),i}updateConfig(e,n){let r=this.get(e);r&&r.updateConfig&&r.updateConfig(n)}getConfig(e){let n=this.get(e);if(n)return n.config}createEntity(e,n){return this.entityManager.createEntity(e,n)}removeEntities(e){this.entityManager.removeEntities(e)}[Symbol.iterator](){let e=0,n=this.observeEntities.length;return{next:()=>{let r=e++;return{value:this.observeEntities[r],done:r===n}}}}},tH=new I.ConflatableMessage("PIPELINE_ZOOM"),tK=new I.ConflatableMessage("PIPELINE_SCROLL"),tJ=class{constructor(){this._isFocused=!1,this.toDispose=new x.Vd,this.allLayersMap=new Map,this.onResizeEmitter=new x.vl,this.onFocusEmitter=new x.vl,this.onBlurEmitter=new x.vl,this.onZoomEmitter=new x.vl,this.onScrollEmitter=new x.vl,this.onFocus=this.onFocusEmitter.event,this.onBlur=this.onBlurEmitter.event,this.onZoom=this.onZoomEmitter.event,this.onScroll=this.onScrollEmitter.event,this.playgroundEvents={},this.globalEvents={},this.onResize=this.onResizeEmitter.event,this.toDispose.pushAll([this.onResizeEmitter,this.onFocusEmitter,this.onZoomEmitter,this.onBlurEmitter,this.onScrollEmitter]),this.onFocusEmitter.event(()=>{this._isFocused=!0}),this.onBlurEmitter.event(()=>{this._isFocused=!1})}_listenEvent(e,n,r,i=0,s){let o=r?this.globalEvents:this.playgroundEvents,a=r?document:this.renderer.node.parentNode,l=o[e];if(!l){let n={handleEvent:e=>{let n=l.handlers;for(let r=0,i=n.length;r<i;r++)if(n[r].handle(e))return}};a.addEventListener(e,n,s),l=o[e]={handlers:[],dispose:()=>{a.removeEventListener(e,n),delete o[e]}}}let{handlers:h}=l,c={handle:n,priority:i};h.unshift(c),h.sort((e,n)=>n.priority-e.priority);let u=x.jG.create(()=>{let e=l.handlers.indexOf(c);-1!==e&&l.handlers.splice(e,1),0===l.handlers.length&&l.dispose()});return this.toDispose.push(u),u}listenPlaygroundEvent(e,n,r,i){return this._listenEvent(e,n,!1,r,i)}listenGlobalEvent(e,n,r,i){return this._listenEvent(e,n,!0,r,i)}registerLayer(e,n){if(this.allLayersMap.has(e))return;let r=this.layerFactory(e,n);this.allLayersMap.set(e,r);let i=tx(e,tO),s=tx(e,tv);if(i.forEach(e=>{this.entityManager.registerEntity(e),Y.isRegistryOf(e,tm)&&this.entityManager.createEntity(e)}),s.forEach(e=>{this.entityManager.registerEntity(e.entity),this.entityManager.registerEntityData(e.data)}),this.selector.subscribeEntities(r,i),s.forEach(e=>this.selector.subscribleEntityByData(r,e.entity,e.data)),r.observeManager=new tG(this.entityManager),r.reloadEntities=()=>{let e=this.selector.getLayerData(r);return e.changed&&r.observeManager.load(e.observeEntities,e.observeDatas),e.changed},r.listenPlaygroundEvent=this.listenPlaygroundEvent.bind(this),r.listenGlobalEvent=this.listenGlobalEvent.bind(this),r.config=this.configEntity,r.getOtherLayer=this.getLayer.bind(this),Object.defineProperty(r,"isFocused",{get:()=>this._isFocused}),r.onResize&&this.onResize(r.onResize.bind(r)),r.onBlur&&this.onBlurEmitter.event(r.onBlur.bind(r)),r.onFocus&&this.onFocusEmitter.event(r.onFocus.bind(r)),r.onZoom&&this.onZoomEmitter.event(r.onZoom.bind(r)),r.onScroll&&this.onScrollEmitter.event(r.onScroll.bind(r)),r.onViewportChange){let e=r.onViewportChange.bind(r);this.onResize(e),this.onZoomEmitter.event(e),this.onScrollEmitter.event(e)}r.onReadonlyOrDisabledChange&&this.configEntity.onReadonlyOrDisabledChange(r.onReadonlyOrDisabledChange.bind(r)),this.renderer.addLayer(r)}getLayer(e){return this.allLayersMap.get(e)}get configEntity(){return this.entityManager.getEntity(tW,!0)}ready(){let e=this.configEntity,n=e.finalScale,r=e.scrollData;e.onConfigChanged(()=>{let i=e.finalScale,s=e.scrollData;i!==n&&(n=i,I.MessageLoop.postMessage(this,tH)),(r.scrollX!==s.scrollX||r.scrollY!==s.scrollY)&&(r=s,I.MessageLoop.postMessage(this,tK))})}processMessage(e){let n=this.configEntity;switch(e.type){case"PIPELINE_SCROLL":this.onScrollEmitter.fire(n.scrollData);break;case"PIPELINE_ZOOM":this.onZoomEmitter.fire(n.finalScale)}}dispose(){this.toDispose.dispose()}};q([(0,S.WQ)(tB)],tJ.prototype,"renderer",2),q([(0,S.WQ)(tQ)],tJ.prototype,"selector",2),q([(0,S.WQ)(ty)],tJ.prototype,"entityManager",2),q([tp()],tJ.prototype,"context",2),q([(0,S.WQ)(tP)],tJ.prototype,"layerFactory",2),tJ=q([(0,S._G)()],tJ);var t0=D.createContext({}),t1=D.createContext({}),t2=D.createContext({}),t5=D.createContext(void 0),t4=Symbol("PlaygroundConfig"),t3=Symbol("PlaygroundContribution"),t6=class{config(e){Object.assign(this.playgroundConfig,e)}registerLayer(e){this.pipeline.registerLayer(e)}registerEntity(e){this.entityManager.registerEntity(e)}registerEditorState(e){let n=this.entityManager.getEntity(tZ);n?.registerState(e)}};q([(0,S.WQ)(tJ)],t6.prototype,"pipeline",2),q([(0,S.WQ)(ty)],t6.prototype,"entityManager",2),q([(0,S.WQ)(t4)],t6.prototype,"playgroundConfig",2),t6=q([(0,S._G)()],t6);var t9=Symbol("PluginContext");Symbol("Plugin");var t7=0;function t8(e){let{contributionKeys:n,singleton:r=!1}=e;t7+=1;let i=`Playground_${t7}`;return s=>{let o=[],a=!1;return{pluginId:i,singleton:r,initPlugin:()=>{!a&&(a=!0,e.containerModules&&o.push(...e.containerModules),e.onBind&&o.push(new S.i0((n,r,i,o)=>{e.onBind({bind:n,unbind:r,isBound:i,rebind:o},s)})),(e.onInit||e.onDispose||e.onReady||e.onAllLayersRendered)&&o.push(new S.i0(n=>{n(t3).toDynamicValue(n=>{let r=n.container.get(t9);return{onInit:()=>{e.onInit?.(r,s)},onReady:()=>{e.onReady?.(r,s)},onDispose:()=>{e.onDispose?.(r,s)},onAllLayersRendered:()=>{e.onAllLayersRendered?.(r,s)}}})})))},options:s,contributionKeys:n,containerModules:o}}}var ne=e=>t8(e)(void 0),nt=new Set,nn=new x.vl,nr=new x.vl,ni=class{constructor(e,n,r,i,s,o,a,l,h){this.entityManager=e,this.registry=n,this.contextProvider=r,this.pipelineRenderer=i,this.pipelineRegistry=s,this.playgroundConfig=o,this.contributionProvider=a,this.commandService=l,this.selectionService=h,this.toDispose=new x.Vd,this._focused=!1,this.playgroundClassName=(0,w.Ak)(),this.isReady=!1,this.toDispose.pushAll([this.pipelineRenderer,this.pipelineRegistry,this.entityManager,this.commandService,this.selectionService,x.jG.create(()=>{nt.delete(this),this.node.remove(),nr.fire(this)}),i.onAllLayersRendered(()=>{this.contributions.forEach(e=>e.onAllLayersRendered?.(this))})]);let c=this.entityManager.createEntity(tZ);if(this.entityManager.createEntity(tW),this.node=o.node||document.createElement("div"),this.toDispose.pushAll([x.Si.addStandardDisposableListener(this.node,"scroll",e=>{this.node.scrollTop=0,this.node.scrollLeft=0,e.preventDefault(),e.stopPropagation()})]),this.node.classList.add("gedit-playground"),this.node.classList.add(this.playgroundClassName),this.node.dataset.testid="sdk.workflow.canvas",o.layers&&o.layers.forEach(e=>this.registry.registerLayer(e)),o.editorStates&&o.editorStates.forEach(e=>c.registerState(e)),void 0!==o.zoomEnable&&(this.zoomEnable=o.zoomEnable),o.entityConfigs)for(let[e,n]of o.entityConfigs){let r=this.entityManager.getEntity(e,!0);r?.updateConfig(n)}this.node.addEventListener("blur",()=>{this.blur()}),this.node.addEventListener("focus",()=>{this.focus()}),this.node.tabIndex=0,this.node.appendChild(this.pipelineRenderer.node),this.onBlur=this.pipelineRegistry.onBlurEmitter.event,this.onFocus=this.pipelineRegistry.onFocusEmitter.event,this.onZoom=this.pipelineRegistry.onZoomEmitter.event,this.onScroll=this.pipelineRegistry.onScrollEmitter.event,nt.add(this)}static getLatest(){let e=ni.getAllInstances();return e[e.length-1]}static getAllInstances(){let e=[];for(let n of nt.values())e.push(n);return e}get context(){return this.contextProvider?.()}get contributions(){return this.contributionProvider.getContributions()}init(){let{contributions:e}=this;for(let n of e)n.registerPlayground&&n.registerPlayground(this.registry);for(let n of e)n.onInit&&n.onInit(this);nn.fire(this)}get pipelineNode(){return this.pipelineRenderer.node}setParent(e){e.appendChild(this.node),this.resize()}get zoomEnable(){return this.config.zoomEnable}set zoomEnable(e){this.config.zoomEnable=e}flush(){this.pipelineRenderer.flush()}ready(){if(this.isReady)return;if(this.isReady=!0,this.playgroundConfig.autoResize){let e=(0,_.debounce)(()=>{this.disposed||this.resize()},0);if("undefined"!=typeof ResizeObserver){let n=new ResizeObserver(e);n.observe(this.node),this.toDispose.push(x.jG.create(()=>{n.disconnect()}))}else this.toDispose.push(x.Si.addStandardDisposableListener(window.document.body,"resize",e,{passive:!0}));this.toDispose.push(x.Si.addStandardDisposableListener(window.document,"scroll",e,{passive:!0})),this.resize()}this.pipelineRegistry.ready(),this.pipelineRenderer.ready();let{contributions:e}=this;for(let n of e)n.onReady&&n.onReady(this)}scrollToView(e){return this.entityManager.getEntity(tW).scrollToView(e)}resize(e,n=!0){if(!e){let n=this.node.getBoundingClientRect();e={clientX:n.left,clientY:n.top,width:n.width,height:n.height}}let{width:r,height:i}=this.config.config;if(0===e.width||0===e.height)return;let{scrollX:s,scrollY:o}=this.config.config;n&&r&&Math.round(e.width)!==r&&(s+=(r-e.width)/2),n&&i&&Math.round(e.height)!==i&&(o+=(i-e.height)/2),this.config.updateConfig({...e,scrollX:s,scrollY:o}),this.pipelineRegistry.onResizeEmitter.fire(e)}focus(){this._focused||(this._focused=!0,this.pipelineRegistry.onFocusEmitter.fire())}blur(){this._focused&&(this._focused=!1,this.pipelineRegistry.onBlurEmitter.fire())}get focused(){return this._focused}get config(){return this.entityManager.getEntity(tW)}get editorState(){return this.entityManager.getEntity(tZ)}getConfigEntity(e){return this.entityManager.getEntity(e,!0)}dispose(){if(this.disposed)return;let{contributions:e}=this;for(let n of e)n.onDispose&&n.onDispose(this);this.toDispose.dispose()}get disposed(){return this.toDispose.disposed}toReactComponent(){return this.pipelineRenderer.toReactComponent()}registerLayer(e,n){this.pipelineRegistry.registerLayer(e,n)}registerLayers(...e){e.forEach(e=>this.pipelineRegistry.registerLayer(e))}getLayer(e){return this.pipelineRegistry.getLayer(e)}get onAllLayersRendered(){return this.pipelineRenderer.onAllLayersRendered}};function ns(e){return{container:e,playground:e.get(ni),get:n=>e.get(n),getAll:n=>e.getAll(n)}}function no(e,n,r={}){let i=e.createChild();i.bind(n).toSelf().inSingletonScope(),i.bind(tX).toConstantValue(r);let s=i.get(n);return"object"==typeof s&&tw(s.constructor.prototype).forEach(e=>{s.hasOwnProperty(e)&&void 0===s[e]&&delete s[e]}),s}ni.onInstanceCreate=nn.event,ni.onInstanceDispose=nr.event,ni=q([(0,S._G)(),W(0,(0,S.WQ)(ty)),W(1,(0,S.WQ)(t6)),W(2,(0,S.WQ)(td)),W(2,(0,S.lq)()),W(3,(0,S.WQ)(tB)),W(4,(0,S.WQ)(tJ)),W(5,(0,S.WQ)(t4)),W(6,(0,S.WQ)(x.GF)),W(6,(0,S.KT)(t3)),W(6,(0,S.lq)()),W(7,(0,S.WQ)(z)),W(8,(0,S.WQ)(tA))],ni);var na=new S.i0(e=>{e(ty).toSelf().inSingletonScope(),e(tB).toSelf().inSingletonScope(),e(t6).toSelf().inSingletonScope(),e(ni).toSelf().inSingletonScope(),e(tQ).toSelf().inSingletonScope(),e(tP).toDynamicValue(e=>(n,r)=>no(e.container,n,r)).inSingletonScope(),e(tJ).toSelf().inSingletonScope(),e(tf).toDynamicValue(e=>e.container).inSingletonScope(),e(t4).toConstantValue({autoFocus:!0,autoResize:!0,zoomEnable:!0,layers:[]}),e(tu).toConstantValue({}),e(td).toDynamicValue(e=>()=>{if(e.container.isBound(tu))return e.container.get(tu)}),e(tR).toSelf().inSingletonScope(),e(t$).toSelf().inSingletonScope(),e(tA).toSelf().inSingletonScope(),e(tM).to(tN).inSingletonScope(),e(tD).to(tI).inSingletonScope(),e(tW).toDynamicValue(e=>e.container.get(ty).createEntity(tW)).inSingletonScope(),(0,x.Tj)(e,t3),e(t9).toDynamicValue(e=>ns(e.container)).inSingletonScope(),e(tl).toService(t9)});function nl(e,n,r){let i=r||new S.mc({defaultScope:"Singleton"});return n&&(i.parent=n),i.load(na),i.isBound(z)||i.load(B),e&&(i.rebind(t4).toConstantValue(e),e.context&&i.rebind(tu).toConstantValue(e.context)),i}var nh=(0,D.forwardRef)(function(e,n){let{containerModules:r,playgroundContext:i,parentContainer:s,playgroundContainer:o,plugins:a,customPluginContext:l,...h}=e,c=(0,D.useMemo)(()=>{let e;return o?e=o:(e=nl({autoFocus:!0,autoResize:!0,zoomEnable:!0,...h},s),i&&e.rebind(tu).toConstantValue(i),r&&r.forEach(n=>e.load(n))),e},[]),u=(0,D.useMemo)(()=>{let e,n=c.get(ni);return l?(e=l(c),c.rebind(t9).toConstantValue(e)):e=c.get(t9),a&&function(e,n){let r=new Set,i=new Set;e.reduceRight((e,n)=>{let r=n.singleton&&i.has(n.pluginId);return n.singleton&&i.add(n.pluginId),r?e:[n,...e]},[]).reduce((e,n)=>{if(r.has(n.pluginId)||(n.initPlugin(),r.add(n.pluginId)),n.containerModules&&n.containerModules.length>0)for(let r of n.containerModules)e.includes(r)||e.push(r);return e},[]).forEach(e=>n.load(e)),e.forEach(e=>{if(e.contributionKeys)for(let r of e.contributionKeys)n.bind(r).toConstantValue(e.options)})}(a(e),c),n.init(),n},[]),d=(0,D.useRef)(0);return(0,D.useEffect)(()=>(d.current+=1,()=>{u.dispose()}),[]),(0,D.useImperativeHandle)(n,()=>c.get(t9),[]),D.createElement(t1.Provider,{value:c},D.createElement(t2.Provider,{value:u},D.createElement(t0.Provider,{value:i},e.children)))});function nc(){return D.useContext(t2)}function nu(){return D.useContext(t1)}function nd(e=!1){let n=nu().get(ty),r=(0,D.useContext)(t5);if(!r)throw Error('[useEntityFromContext] Unknown entity from "PlaygroundEntityContext"');let i=(0,x.b6)(r.version);return(0,D.useLayoutEffect)(()=>{let n;return e&&(n=r.onEntityChange(()=>i(r.version))),()=>n?.dispose()},[n,i,r,e]),r}function np(...e){let n=(0,x.b6)();(0,D.useLayoutEffect)(()=>{let r=new x.Vd;return r.pushAll(e.map(e=>e(()=>n()))),()=>r.dispose()},[e,n])}function nf(e){let n=nu();return n.get?.(e)}var ng=e=>{let n=nc(),r=nf(t4),i=(0,D.useRef)();(0,D.useEffect)(()=>{n.setParent(i.current),n.ready(),r.autoFocus&&n.node.focus()},[]);let s=n.toReactComponent();return D.createElement(D.Fragment,null,D.createElement("div",{ref:i,className:`gedit-playground-container${e.className?` ${e.className}`:""}`,style:e.style}),D.createElement(s,null),e.children?$.createPortal(D.createElement(D.Fragment,null,e.children),n.node):null)};(e=>{let n=Symbol("LayerStateProvider");class r{constructor(e,n,r){this.instance=e,this.playground=n,this.container=r,this.hijackMethod(e,"autorun"),this.hijackMethod(e,"render"),this.hijackMethod(e,"onReady"),this.hijackMethod(e,"onResize"),this.hijackMethod(e,"onFocus"),this.hijackMethod(e,"onBlur"),this.hijackMethod(e,"onZoom"),this.hijackMethod(e,"onScroll"),this.hijackMethod(e,"onViewportChange"),this.hijackMethod(e,"onReadonlyOrDisabledChange")}hijackMethod(e,n){"function"==typeof e[n]&&(this[n]=vi.spyOn(e,n))}}function i(e){let i=nl();return i.bind(n).toConstantValue(new WeakMap),i.rebind(tP).toDynamicValue(e=>(s,o)=>{let a=no(e.container,s,o);return e.container.get(n).set(s,new r(a,i.get(ni),i)),a}),e&&e.forEach(e=>i.load(e)),i}function s(e,r){return e.get(n).get(r)}e.LayerTestState=r,e.createContainer=i,e.createPlayground=function(e){return i(e).get(ni)},e.getLayerTestState=s,e.createLayerTestState=function(e,n,r){let o=i(r),a=o.get(ni);return a.registerLayer(e,n),a.init(),a.ready(),s(o,e)}})(b||(b={}))},32893:function(e,n,r){"use strict";r.d(n,{$B:()=>G,$x:()=>T,Ax:()=>q,Gx:()=>H,H7:()=>ee,Kr:()=>M,Kz:()=>L,LY:()=>z,Me:()=>B,QD:()=>A,S5:()=>R,Uy:()=>P,Uz:()=>eo,fn:()=>eu,gs:()=>es,he:()=>j,lY:()=>E,mi:()=>et,mp:()=>F,oJ:()=>Z,pj:()=>ec,rk:()=>ea,sc:()=>U,y:()=>S});var i,s,o,a,l,h,c,u,d,p=r(81376),f=r(67055),g=r(2543),m=r(11812),y=r(36833),O=Object.defineProperty,b=Object.getOwnPropertyDescriptor,x=(e,n,r,i)=>{for(var s,o=i>1?void 0:i?b(n,r):n,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i?s(n,r,o):s(o))||o);return i&&o&&O(n,r,o),o},w=(e,n)=>(r,i)=>n(r,i,e),S=((i=S||{}).START="start",i.DEFAULT="default",i.ROOT="root",i.EMPTY="empty",i.INLINE_BLOCKS="inlineBlocks",i.BLOCK_ICON="blockIcon",i.BLOCK="block",i.BLOCK_ORDER_ICON="blockOrderIcon",i.GROUP="group",i.END="end",i.BREAK="break",i.CONDITION="condition",i.SUB_CANVAS="subCanvas",i.MULTI_INPUTS="multiInputs",i.MULTI_OUTPUTS="multiOutputs",i.INPUT="input",i.OUTPUT="output",i.SLOT="slot",i.SLOT_BLOCK="slotBlock",i),_=["root","inlineBlocks","block"];Symbol("FlowLayout");var k=Symbol("FlowLayoutContribution"),C=((s=C||{}).VERTICAL_FIXED_LAYOUT="vertical-fixed-layout",s.HORIZONTAL_FIXED_LAYOUT="horizontal-fixed-layout",s);(C||(C={})).isVertical=function(e){return"vertical-fixed-layout"===e.name};var E=((o=E||{})[o.STRAIGHT_LINE=0]="STRAIGHT_LINE",o[o.DIVERGE_LINE=1]="DIVERGE_LINE",o[o.MERGE_LINE=2]="MERGE_LINE",o[o.ROUNDED_LINE=3]="ROUNDED_LINE",o[o.CUSTOM_LINE=4]="CUSTOM_LINE",o[o.DRAGGING_LINE=5]="DRAGGING_LINE",o),T=((a=T||{})[a.ADDER_LABEL=0]="ADDER_LABEL",a[a.TEXT_LABEL=1]="TEXT_LABEL",a[a.COLLAPSE_LABEL=2]="COLLAPSE_LABEL",a[a.COLLAPSE_ADDER_LABEL=3]="COLLAPSE_ADDER_LABEL",a[a.CUSTOM_LABEL=4]="CUSTOM_LABEL",a[a.BRANCH_DRAGGING_LABEL=5]="BRANCH_DRAGGING_LABEL",a),P={NODE_SPACING:"SPACING",BRANCH_SPACING:"BRANCH_SPACING",ROUNDED_LINE_X_RADIUS:"ROUNDED_LINE_X_RADIUS",ROUNDED_LINE_Y_RADIUS:"ROUNDED_LINE_Y_RADIUS",INLINE_BLOCKS_PADDING_BOTTOM:"INLINE_BLOCKS_PADDING_BOTTOM",COLLAPSED_SPACING:"COLLAPSED_SPACING",HOVER_AREA_WIDTH:"HOVER_AREA_WIDTH"},A={NULL:0,[P.NODE_SPACING]:32,[P.BRANCH_SPACING]:20,MARGIN_RIGHT:20,INLINE_BLOCK_PADDING_BOTTOM:16,INLINE_BLOCKS_PADDING_TOP:30,[P.INLINE_BLOCKS_PADDING_BOTTOM]:40.1,MIN_INLINE_BLOCK_SPACING:200,MIN_INLINE_BLOCK_SPACING_HORIZONTAL:80,[P.COLLAPSED_SPACING]:12,[P.ROUNDED_LINE_X_RADIUS]:16,[P.ROUNDED_LINE_Y_RADIUS]:20,[P.HOVER_AREA_WIDTH]:20},M=((l=M||{}).PRE_BRANCH="pre_branch",l.NORMAL_BRANCH="normal_branch",l),N={width:280,height:60},D=u||(u={});function I(e=[],n=[]){return 0===e.length||0===n.length?[...e,...n]:[...e.map(e=>{let r=n.find(n=>n.type===e.type);return r?$(e,r,e.type):e}),...n.filter(n=>!e.some(e=>e.type===n.type))]}function $(e,n,r){let i=e.__extends__?e.__extends__.slice():[];return e.type!==n.type&&i.unshift(e.type),{...e,...n,extendChildRegistries:I(e.extendChildRegistries,n.extendChildRegistries),meta:{...e.meta,...n.meta},extend:void 0,type:r,__extends__:i}}D.mergeChildRegistries=I,D.merge=$,D.extend=function(e,n){return n.length?n.reduce((n,r)=>$(n,r,e.type),e):e};var R=((h=R||{}).addFromNode="addFromNode",h.deleteFromNode="deleteFromNode",h.addBlock="addBlock",h.deleteBlock="deleteBlock",h.createGroup="createGroup",h.ungroup="ungroup",h.moveNodes="moveNodes",h.moveBlock="moveBlock",h.moveChildNodes="moveChildNodes",h.addNodes="addNodes",h.deleteNodes="deleteNodes",h.changeNode="changeNode",h.addChildNode="addChildNode",h.deleteChildNode="deleteChildNode",h.addNode="addNode",h.deleteNode="deleteNode",h),L=Symbol("FlowOperationBaseService"),Q=class e extends p.oW{constructor(e){super(e),this.onExtInfoChangeEmitter=new f.vl,this.onExtInfoChange=this.onExtInfoChangeEmitter.event,this.toDispose.push(f.jG.create(()=>{this._node&&this._node.remove()}))}get key(){return this.entity.id}getDefaultData(){let{addable:e,expandable:n,defaultExpanded:r}=this.entity.getNodeMeta();return{addable:e,expandable:n,expanded:r||!1,activated:!1,hovered:!1,dragging:!1,stackIndex:0}}updateExtInfo(e){if(f.Gs.isChanged(this.data.extInfo,e)){let n=this.data.extInfo;this.update({extInfo:e}),this.onExtInfoChangeEmitter.fire({oldInfo:n,newInfo:e})}}getExtInfo(){return this.data.extInfo}get addable(){return this.data.addable}get expandable(){return this.data.expandable}get draggable(){let{draggable:e}=this.entity.getNodeMeta();return"function"==typeof e?e(this.entity):e}get expanded(){return this.data.expanded}set expanded(e){this.expandable&&this.data.expanded!==e&&(this.data.expanded=e,this.fireChange())}toggleExpand(){this.expanded=!this.expanded}toggleMouseEnter(e=!1){if(this.entity.document.renderState.setNodeHovered(this.entity),e)return;let n=this.entity.getData(z);n.renderState.hidden||(this.mouseLeaveTimeout&&(clearTimeout(this.mouseLeaveTimeout),this.mouseLeaveTimeout=void 0),n.renderState.hovered=!0,this.entity.isFirst&&this.entity.parent?.id!=="root"?n.parent.renderState.activated=!0:n.renderState.activated=!0)}toggleMouseLeave(e=!1){if(this.entity.document.renderState.setNodeHovered(void 0),e)return;let n=this.entity.getData(z);this.mouseLeaveTimeout=setTimeout(()=>{n.renderState.hovered=!1,this.entity.isFirst&&this.entity.parent?.id!=="root"&&(n.parent.renderState.activated=!1),n.renderState.activated=!1},200)}get hidden(){return this.entity.hidden}set hovered(e){this.data.hovered=e,this.fireChange()}get hovered(){return this.data.hovered}get dragging(){return this.data.dragging}set dragging(e){this.data.dragging!==e&&(this.data.dragging=e,this.fireChange())}set activated(n){if("blockIcon"===this.entity.flowNodeType&&this.entity.parent){this.entity.parent.getData(e).activated=n;return}this.data.activated!==n&&(this.data.activated=n,this.fireChange())}get activated(){let{entity:n}=this;return!!n.parent&&!!n.parent.getData(e).activated||this.data.activated}get stackIndex(){return this.data.stackIndex}set stackIndex(e){this.data.stackIndex=e}get lineActivated(){let{activated:n}=this;return!!n&&!!(this.entity.parent?.getData(e)?.activated||this.entity.isInlineBlock||this.entity.next?.getData(e).activated)}get node(){return this._node||(this._node=f.Si.createDivWithClass("gedit-flow-activity-node"),this._node.dataset.testid="sdk.workflow.canvas.node",this._node.dataset.nodeId=this.entity.id),this._node}dispose(){super.dispose(),this.onExtInfoChangeEmitter.dispose()}};Q.type="FlowNodeRenderData";var j=Q,V=class e extends p.oW{constructor(e){super(e),this.localDirty=!0;let{origin:n}=this.entity.getNodeMeta();this.transform=this.entity.addData(p.hZ),this.transform.changeLocked=!0,this.transform.update({origin:{...n}}),this.transform.changeLocked=!1,this.renderState=this.entity.addData(j),this.bindChange(this.transform),this.toDispose.push(f.jG.create(()=>{let{next:e,parent:n}=this;e&&(e.localDirty=!0),n&&(n.localDirty=!0)}))}get origin(){return this.transform.origin}get key(){return this.entity.id}getDefaultData(){let{size:e,hidden:n}=this.entity.getNodeMeta();return{size:n?{width:0,height:0}:{...e}}}get collapsed(){return this.entity.collapsed}set collapsed(e){this.entity.collapsed=e,this.localDirty=!0,this.firstChild&&(this.firstChild.localDirty=!0),this.fireChange()}get size(){return this.entity.memoGlobal("size",()=>this.isContainer?this.transform.localSize:this.data.size)}get position(){let{position:e}=this.transform;return{x:e.x,y:e.y}}set position(e){this.transform.update({position:e})}set size(e){let{width:n,height:r}=this.data.size;this.isContainer||(e.width!==n||e.height!==r)&&(this._data.size={...e},this.localDirty=!0,this.fireChange())}get inputPoint(){return this.entity.memoGlobal("inputPoint",()=>{let{getInputPoint:e}=this.entity.getNodeRegistry();return e?e(this,this.entity.document.layout):this.defaultInputPoint})}get defaultInputPoint(){return this.entity.memoGlobal("defaultInputPoint",()=>this.entity.document.layout.getDefaultInputPoint(this.entity))}get defaultOutputPoint(){return this.entity.memoGlobal("defaultOutputPoint",()=>this.entity.document.layout.getDefaultOutputPoint(this.entity))}get outputPoint(){return this.entity.memoGlobal("outputPoint",()=>{let{getOutputPoint:e}=this.entity.getNodeRegistry();return e?e(this,this.entity.document.layout):this.defaultOutputPoint})}get originDeltaX(){return this.entity.memoLocal("originDeltaX",()=>{let{children:e}=this,{getOriginDeltaX:n}=this.entity.getNodeRegistry();return n?n(this,this.entity.document.layout):0===e.length?-this.size.width*this.origin.x:1===e.length?e[0].originDeltaX:this.entity.isInlineBlocks&&e.length>1?e[0].originDeltaX+this.transform.position.x:e.reduce((e,n)=>{let r=n.originDeltaX;return void 0===e||r<e?r:e},void 0)})}get originDeltaY(){return this.entity.memoLocal("originDeltaY",()=>{let{children:e}=this,{getOriginDeltaY:n}=this.entity.getNodeRegistry();return n?n(this,this.entity.document.layout):0===e.length?-this.size.height*this.origin.y:1===e.length?e[0].originDeltaY:this.entity.isInlineBlocks&&e.length>1?e[0].originDeltaY+this.transform.position.y:e.reduce((e,n)=>{let r=n.originDeltaY;return void 0===e||r<e?r:e},void 0)})}get bounds(){return this.entity.memoGlobal("bounds",()=>{let{transform:n}=this;if(this.isContainer){let r=n.children.map(n=>n.entity.getData(e).boundsWithPadding);return f.M_.enlarge(r).withPadding(this.padding)}return n.bounds})}get boundsWithPadding(){return this.entity.memoGlobal("boundsWithPadding",()=>{let{transform:n}=this;if(this.isContainer){let r=n.children.map(n=>n.entity.getData(e).boundsWithPadding);return f.M_.enlarge(r).withPadding(this.padding)}return n.bounds.clone().withPadding(this.padding)})}get isContainer(){return this.transform.isContainer}get localBounds(){return this.entity.memoLocal("localBounds",()=>{let{transform:n}=this;if(this.isContainer){let r=n.children.map(n=>n.entity.getData(e).localBounds),i=f.M_.enlarge(r).withPadding(this.padding);return p.cz.applyMatrix(i,n.localTransform)}return n.localBounds.clone().withPadding(this.padding)})}get padding(){return this.entity.document.layout.getPadding(this.entity)}setParentTransform(e){this.transform.parent!==e?.transform&&(this.localDirty=!0),this.transform.setParent(e?.transform)}get spacing(){let{spacing:e}=this.entity.getNodeMeta();return"function"==typeof e?e(this):e}get inlineSpacingPre(){let{inlineSpacingPre:e}=this.entity.getNodeMeta();return"function"==typeof e?e(this):e}get inlineSpacingAfter(){let{inlineSpacingAfter:e}=this.entity.getNodeMeta();return"function"==typeof e?e(this):e}get minInlineBlockSpacing(){let{minInlineBlockSpacing:e}=this.entity.getNodeMeta();return"function"==typeof e?e(this):e}get children(){return this.entity.children.map(n=>n.getData(e))}get pre(){return this.entity.pre?.getData(e)}get originParent(){return this.entity.originParent?.getData(e)}get isFirst(){return this.entity.isFirst}get isLast(){return this.entity.isLast}get lastChild(){return this.entity.lastChild?.getData(e)}get firstChild(){return this.entity.firstChild?.getData(e)}get next(){return this.entity.next?.getData(e)}get parent(){return this.entity.parent?.getData(e)}};V.type="FlowNodeTransformData";var z=V,B=class extends p.oW{getDefaultData(){return{}}formatLines(e){return this.entity.document.options?.formatNodeLines?this.entity.document.options?.formatNodeLines?.(this.entity,e):e}formatLabels(e){return this.entity.document.options.formatNodeLabels?this.entity.document.options?.formatNodeLabels?.(this.entity,e):e}get lines(){return this.entity.memoGlobal("lines",()=>{let{getChildLines:e}=this.entity.parent?.getNodeRegistry()||{};if(e)return this.formatLines(e(this,this.entity.document.layout));let{getLines:n}=this.entity.getNodeRegistry();return n?this.formatLines(n(this,this.entity.document.layout)):this.transform.entity.isInlineBlock?[]:this.formatLines([...(e=>{let{transform:n}=e,r=n.outputPoint;return n.next?[{type:0,from:r,to:n.next.inputPoint}]:[]})(this),...(e=>{let{transform:n}=e,r=n.outputPoint,i=n.parent?.outputPoint;return n.next||!i||new f.bR().copyFrom(r).equals(i)||e.isNodeEnd?[]:[{type:0,from:r,to:i}]})(this)])})}get labels(){return this.entity.memoGlobal("labels",()=>{let{getChildLabels:e}=this.entity.parent?.getNodeRegistry()||{};if(e)return this.formatLabels(e(this,this.entity.document.layout));let{getLabels:n}=this.entity.getNodeRegistry();if(n)return this.formatLabels(n(this,this.entity.document.layout));if(this.transform.entity.isInlineBlock)return[];let r=this.transform.outputPoint;if(this.transform.next)return this.formatLabels([{offset:f.bR.getMiddlePoint(r,this.transform.next.inputPoint),type:0}]);let i=this.transform.parent?.outputPoint;return!i||new f.bR().copyFrom(r).equals(i)||this.isNodeEnd?[]:this.formatLabels([{offset:i,type:0}])})}constructor(e){super(e),this.transform=this.entity.addData(z),this.renderData=this.entity.addData(j),this.bindChange(this.transform),this.bindChange(this.renderData)}get collapsed(){return this.entity.collapsed}get isNodeEnd(){return this.entity.isNodeEnd}};B.type="FlowNodeTransitionData";var F=class extends p.wC{constructor(e){super(e),this._memoLocalCache=new Map,this._memoGlobalCache=new Map,this.flowNodeType="unknown",this._hidden=!1,this.index=-1,this.document=e.document,this.flowNodeType=e.flowNodeType,this.originParent=e.originParent,this.metaFromJSON=e.meta,this.onDispose(()=>{this.document.originTree.getChildren(this).slice().forEach(e=>{e.dispose()}),this.document.originTree.remove(this,!1),this.originParent=void 0})}initData(e){e.originParent!==this.originParent&&(this.originParent=e.originParent,this._registerCache=void 0),e.parent&&e.parent.addChild(this,e.index),e.meta!==this.metaFromJSON&&(this._metaCache=void 0,this.metaFromJSON=e.meta),this._hidden=!!(this.getNodeMeta().hidden||e.hidden)}get isStart(){return this.getNodeMeta().isStart}get isFirst(){return!this.pre}get isLast(){return!this.next}get isInlineBlocks(){let e=this.getNodeMeta().isInlineBlocks;return"function"==typeof e?e(this):e}get isInlineBlock(){let e=this.document.renderTree.getParent(this);return!!(e&&e.isInlineBlocks)}get isNodeEnd(){return this.memoLocal("isNodeEnd",()=>!!this.getNodeMeta().isNodeEnd||(this.isInlineBlocks&&this.collapsedChildren.length?this.collapsedChildren.every(e=>e.isNodeEnd):!!this.lastCollapsedChild&&this.lastCollapsedChild.isNodeEnd))}addChild(e,n){e.parent!==this&&this.document.originTree.addChild(this,e,n)}get hasChild(){return this.children.length>0}get pre(){return this.document.renderTree.getPre(this)}get next(){return this.document.renderTree.getNext(this)}get parent(){return this.document.renderTree.getParent(this)}getNodeRegistry(){return this._registerCache||(this._registerCache=this.document.getNodeRegistry(this.flowNodeType,this.originParent)),this._registerCache}getNodeRegister(){return this.getNodeRegistry()}getNodeMeta(){return this._metaCache||(this.metaFromJSON?this._metaCache={...this.getNodeRegistry().meta,...this.metaFromJSON}:this._metaCache=this.getNodeRegistry().meta),this._metaCache}get allChildren(){let e=[];for(let n of this.children)e.push(n),e.push(...n.allChildren);return e}get allCollapsedChildren(){let e=[];for(let n of this.collapsedChildren)e.push(n),e.push(...n.allCollapsedChildren);return e}get collapsedChildren(){return this.document.renderTree.getCollapsedChildren(this)}get blocks(){return this.collapsedChildren}get lastBlock(){return this.lastCollapsedChild}get lastCollapsedChild(){let{collapsedChildren:e}=this;return e[e.length-1]}get children(){return this.document.renderTree.getChildren(this)}get lastChild(){let{children:e}=this;return e[e.length-1]}get firstChild(){return this.children[0]}memoLocal(e,n){if(this._memoLocalCache.has(e))return this._memoLocalCache.get(e);let r=n();return this._memoLocalCache.set(e,r),r}memoGlobal(e,n){if(this._memoGlobalCache.has(e))return this._memoGlobalCache.get(e);let r=n();return this._memoGlobalCache.set(e,r),r}clearMemoGlobal(){this._memoGlobalCache.clear()}clearMemoLocal(){this._memoLocalCache.clear()}get childrenLength(){return this.children.length}get collapsed(){return!!this.document.renderTree.isCollapsed(this)||!!this.parent?.collapsed}set collapsed(e){this.document.renderTree.setCollapsed(this,e),this.clearMemoGlobal(),this.clearMemoLocal()}get hidden(){return this._hidden}openInsideCollapsed(){this.document.renderTree.openNodeInsideCollapsed(this)}getJSONData(){return this.getExtInfo()}toJSON(){return this.document.toNodeJSON(this)}get isVertical(){return"vertical-fixed-layout"===this.document.layout.name}updateExtInfo(e){this.getData(j).updateExtInfo(e)}getExtInfo(){return this.getData(j).getExtInfo()}get onExtInfoChange(){return this.renderData.onExtInfoChange}get renderData(){return this.getData(j)}get transform(){return this.getData(z)}get bounds(){return this.transform.bounds}isExtend(e){return this.document.isExtend(this.flowNodeType,e)}isTypeOrExtendType(e){return this.document.isTypeOrExtendType(this.flowNodeType,e)}};F.type="FlowNodeEntity",(c=F||(F={})).is=function(e){return e instanceof c};var Z=class extends p.ot{constructor(e){super(e),this.onRefreshEmitter=new f.vl,this.lastTransformVersion=-1,this.lastTreeVersion=-1,this.onRefresh=this.onRefreshEmitter.event,this.document=e.document,this.toDispose.push(this.document.originTree.onTreeChange(()=>{this.config.treeVersion+=1,this.fireChange()})),this.toDispose.push(this.onRefreshEmitter)}getDefaultConfig(){return{loading:!0,treeVersion:0}}get loading(){return this.config.loading}set loading(e){this.config.loading!==e&&(this.config.loading=e,this.fireChange())}updateTransformsTree(){this.document.renderTree.traverse((e,n,r)=>{let i=e.getData(z);i.collapsed&&i.transform.clearChildren(),e.parent&&i.setParentTransform(e.parent.getData(z)),e.index=r})}clear(){this.lastTreeVersion=-1,this.lastTransformVersion=-1}isTreeDirty(){let e=this.entityManager.getEntityDataVersion(z),n=this.lastTreeVersion!==this.config.treeVersion,r=this.lastTransformVersion!==e;return n||r}refresh(){let e=this.entityManager.getEntityDataVersion(z),n=this.lastTreeVersion!==this.config.treeVersion,r=this.lastTransformVersion!==e;this.entityManager.changeEntityLocked=!0,n&&(this.document.renderTree.updateRenderStruct(),this.updateTransformsTree(),this.lastTreeVersion=this.config.treeVersion),(n||r)&&(this.document.layout.update(),this.lastTransformVersion=this.entityManager.getEntityDataVersion(z),this.lastTreeVersion=this.config.treeVersion,this.onRefreshEmitter.fire()),this.entityManager.changeEntityLocked=!1}};Z.type="FlowDocumentTransformerEntity";var q=class extends p.ot{getDefaultConfig(){return{}}constructor(e){super(e)}getNodeHovered(){return this.config.nodeHoveredId?this.entityManager.getEntityById(this.config.nodeHoveredId):void 0}setNodeHovered(e){this.updateConfig({nodeHoveredId:e?.id})}getDragLabelSide(){return this.config.dragLabelSide}setDragLabelSide(e){this.updateConfig({dragLabelSide:e})}getNodeDroppingId(){return this.config.nodeDroppingId}setNodeDroppingId(e){this.updateConfig({nodeDroppingId:e})}getDragStartEntity(){let{nodeDragStartId:e}=this.config;return this.entityManager.getEntityById(e)}setDragStartEntity(e){this.updateConfig({nodeDragStartId:e?.id})}getDragEntities(){let{nodeDragIds:e}=this.config;return(e||[]).map(e=>this.entityManager.getEntityById(e))}setDragEntities(e){this.updateConfig({nodeDragIds:e.map(e=>e.id),nodeDragIdsWithChildren:e.map(e=>[e.id,...e.allCollapsedChildren.map(e=>e.id)]).flat()})}onNodeHoveredChange(e,n=100){return this.onConfigChanged((0,g.debounce)(()=>e(this.getNodeHovered()),n))}};q.type="FlowRendererStateEntity";var W=class e{constructor(e){this.root=e,this.onTreeChangeEmitter=new f.vl,this.onTreeChange=this.onTreeChangeEmitter.event,this.map=new Map}dispose(){this.map.clear(),this.onTreeChangeEmitter.dispose()}getInfo(e){let n=this.map.get(e);return n||(n={children:[]},this.map.set(e,n)),n}clear(){this.map.clear()}cloneMap(){let e=new Map;for(let[n,r]of this.map)e.set(n,{...r,children:r.children.slice()});return e}clone(){let n=new e(this.root);return n.map=this.cloneMap(),n}remove(e,n=!0){this.removeParent(e),n&&this._removeChildren(e),this.map.delete(e),this.fireTreeChange()}addChild(e,n,r){let i=this.getInfo(e),s=this.getInfo(n);if(s.parent){if(s.parent===e)return n;s.parent!==e&&this.removeParent(n)}let o=i.children.length,a=void 0===r?o-1:r-1,l=i.children[a],h=i.children[a+1];return l&&(this.getInfo(l).next=n),h&&(this.getInfo(h).pre=n),s.pre=l,s.next=h,i.children.splice(a+1,0,n),s.parent=e,this.fireTreeChange(),n}moveChilds(e,n,r){let i=this.getInfo(e),s=i.children.length,o=r??s;return n.forEach(e=>{this.getInfo(e).parent&&this.removeParent(e)}),n.forEach(n=>{let r=this.getInfo(n),s=i.children[o-1],a=i.children[o];s&&(this.getInfo(s).next=n),a&&(this.getInfo(a).pre=n),r.pre=s,r.next=a,i.children.splice(o,0,n),r.parent=e,o++}),this.fireTreeChange(),n}getById(e){for(let n of this.map.keys())if(n.id===e)return n}insertAfter(e,n){let r=this.getInfo(e),i=this.getInfo(n);if(this.removeParent(n),r.parent){let s=this.getInfo(r.parent);s.children.splice(s.children.indexOf(e)+1,0,n);let{next:o}=r;o&&(this.getInfo(o).pre=n),i.next=o,r.next=n,i.pre=e,i.parent=r.parent}this.fireTreeChange()}removeParent(e){let n=this.getInfo(e);if(!n.parent)return;let r=this.getInfo(n.parent),i=r.children.indexOf(e);r.children.splice(i,1);let{pre:s,next:o}=n;s&&(this.getInfo(s).next=o),o&&(this.getInfo(o).pre=s),this.fireTreeChange()}_removeChildren(e){let n=this.getChildren(e);n.length>0&&n.forEach(e=>{this._removeChildren(e),this.map.delete(e)})}getParent(e){return this.getInfo(e).parent}getPre(e){return this.getInfo(e).pre}getNext(e){return this.getInfo(e).next}getChildren(e){return this.getInfo(e).children}traverse(e,n=this.root,r=0,i=0){if(e(n,r,i)||this.getInfo(n).children.find((n,i)=>this.traverse(e,n,r+1,i)))return!0}fireTreeChange(){this.onTreeChangeEmitter.fire()}get size(){return this.map.size}toString(e){let n=[];return this.traverse((r,i)=>{0===i?n.push(r.id):n.push(`|${Array(i).fill("--").join("")} ${e?`${r.flowNodeType}(${r.id})`:r.id}`)}),`${n.join("\n")}`}},X=class extends W{constructor(e,n,r){super(e),this.root=e,this.nodesCollapsed=new Set,this.originTree=n,this.onTreeChange=this.originTree.onTreeChange,this.document=r}isCollapsed(e){return this.nodesCollapsed.has(e)}get collapsedNodeList(){return Array.from(this.nodesCollapsed)}setCollapsed(e,n){n?this.nodesCollapsed.add(e):this.nodesCollapsed.delete(e),this.originTree.fireTreeChange()}openNodeInsideCollapsed(e){let n=this.originTree.getInfo(e)?.parent;for(;n;){this.nodesCollapsed.has(n)&&this.nodesCollapsed.delete(n);let{parent:e}=this.originTree.getInfo(n)||{};n=e}this.originTree.fireTreeChange()}updateRenderStruct(){this.map=this.originTree.cloneMap(),this.document.config.get("END_NODES_REFINE_BRANCH")&&this.refineBranch(this.root),this.hideCollapsed()}hideCollapsed(){this.nodesCollapsed.forEach(e=>{let n=this.getInfo(e);if(!n)return void this.nodesCollapsed.delete(e);let r=n.children.find(e=>"blockIcon"===e.flowNodeType||"blockOrderIcon"===e.flowNodeType);if(r){let e=this.getInfo(r);e.next=void 0,e.pre=void 0,n.children=[r];return}n.children=[]})}isNodeEnd(e){if(e.getNodeMeta().isNodeEnd)return!0;let{children:n}=this.getInfo(e);return n.length>0&&e.isInlineBlocks?n.every(e=>this.isNodeEnd(e)):!!e.isInlineBlock&&this.isNodeEnd(n[n.length-1])}refineBranch(e){let n=this.getInfo(e).children[0];for(;n;){if("dynamicSplit"===n.flowNodeType||"staticSplit"===n.flowNodeType){let{next:e,children:r}=this.getInfo(n),{children:i}=this.getInfo(r[1]),s=(i||[]).filter(e=>!this.isNodeEnd(e)),o=1===s.length;if(o&&e&&this.dragNextNodesToBlock(s[0],e),i?.forEach(e=>{this.refineBranch(e)}),o)break}n=n.next}}dragNextNodesToBlock(e,n){let r=this.getInfo(e),i=this.getInfo(n),s=r.children[e.children.length-1];if(i.parent){let o=this.getInfo(i.parent);i.pre&&(this.getInfo(i.pre).next=void 0),s&&(this.getInfo(s).next=n,i.pre=s);let a=o.children.indexOf(n),l=o.children.slice(a);for(let n of(o.children=o.children.slice(0,a),l)){let i=this.getInfo(n);r.children.push(n),i.parent=e}}}getInfo(e){return this.map.get(e)||this.originTree.getInfo(e)}getOriginInfo(e){return this.originTree.getInfo(e)}getCollapsedChildren(e){return this.getOriginInfo(e).children||[]}remove(){throw Error("Render Tree cannot use remove node")}addChild(){throw Error("Render tree cannot use add child")}insertAfter(){throw Error("Render tree cannot use insert after")}removeParent(){throw Error("Render tree cannot use remove parent")}},U=Symbol("FlowDocumentOptions"),Y={allNodesDefaultExpanded:!1},G={...P,INLINE_SPACING_BOTTOM:"INLINE_SPACING_BOTTOM",INLINE_BLOCKS_INLINE_SPACING_TOP:"INLINE_BLOCKS_INLINE_SPACING_TOP",INLINE_BLOCKS_INLINE_SPACING_BOTTOM:"INLINE_BLOCKS_INLINE_SPACING_BOTTOM",BASE_COLOR:"BASE_COLOR",BASE_ACTIVATED_COLOR:"BASE_ACTIVATED_COLOR",INLINE_BLOCKS_PADDING_TOP:"INLINE_BLOCKS_PADDING_TOP"},H=Symbol("FlowDocumentContribution"),K=Symbol("FlowDocumentConfigDefaultData"),J=class{constructor(e={}){this._data=e,this.onDataChangeEmitter=new f.vl,this.onChange=this.onDataChangeEmitter.event}get(e){return this._data[e]}set(e,n){this.get(e)!==n&&(this._data[e]=n,this.onDataChangeEmitter.fire(e))}registerConfigs(e){Object.keys(e).forEach(n=>{this.set(n,e[n])})}};J=x([(0,m._G)(),w(0,(0,m.WQ)(K)),w(0,(0,m.lq)())],J);var ee=Symbol("FlowDocumentProvider"),et=class{constructor(){this.contributions=[],this.registers=new Map,this.nodeRegistryCache=new Map,this.nodeDataRegistries=[],this.layouts=[],this.currentLayoutKey="",this.onNodeUpdateEmitter=new f.vl,this.onNodeCreateEmitter=new f.vl,this.onNodeDisposeEmitter=new f.vl,this.onLayoutChangeEmitter=new f.vl,this.onNodeUpdate=this.onNodeUpdateEmitter.event,this.onNodeCreate=this.onNodeCreateEmitter.event,this.onNodeDispose=this.onNodeDisposeEmitter.event,this.onLayoutChange=this.onLayoutChangeEmitter.event,this._disposed=!1}get disposed(){return this._disposed}init(){this.options||(this.options=Y),this.currentLayoutKey=this.options.defaultLayout||"vertical-fixed-layout",this.contributions.forEach(e=>e.registerDocument?.(this)),this.root=this.addNode({id:"root",type:"root"}),this.originTree=new W(this.root),this.transformer=this.entityManager.createEntity(Z,{document:this}),this.renderState=this.entityManager.createEntity(q),this.renderTree=new X(this.root,this.originTree,this),this.layout.reload?.()}fromJSON(e,n=!0){if(this._disposed)return;this.originTree.clear(),this.renderTree.clear(),this.entityManager.changeEntityLocked=!0;let r=this.entityManager.getEntities(F),i=[this.root];this.addBlocksAsChildren(this.root,e.nodes||[],i),r.forEach(e=>{i.includes(e)||e.dispose()}),this.entityManager.changeEntityLocked=!1,this.transformer.loading=!1,n&&this.fireRender()}get layout(){let e=this.layouts.find(e=>e.name==this.currentLayoutKey);if(!e)throw Error(`Unknown flow layout: ${this.currentLayoutKey}`);return e}async load(){await Promise.all(this.contributions.map(e=>e.loadDocument?.(this)))}get loading(){return this.transformer.loading}fireRender(){this.transformer.isTreeDirty()&&(this.entityManager.fireEntityChanged(F.type),this.entityManager.fireEntityChanged(Z.type))}addFromNode(e,n){let r="string"==typeof e?this.getNode(e):e;this.entityManager.changeEntityLocked=!0;let{parent:i}=r,s=this.addNode({...n,parent:i});return this.originTree.insertAfter(r,s),this.entityManager.changeEntityLocked=!1,this.entityManager.fireEntityChanged(F.type),s}removeNode(e){"string"==typeof e?this.getNode(e)?.dispose():e.dispose()}addNode(e,n){let{id:r,type:i="block",originParent:s,parent:o,meta:a,hidden:l,index:h}=e,c=this.getNode(r),u=!1,d=this.getNodeRegistry(i,e.originParent);if(c&&c.flowNodeType!==e.type&&(c.dispose(),c=void 0),c)this.options.fromNodeJSON?.(c,e,!1);else{let{dataRegistries:n}=d;c=this.entityManager.createEntity(F,{id:r,document:this,flowNodeType:i,originParent:s,meta:a});let o=n?this.nodeDataRegistries.concat(...n):this.nodeDataRegistries;c.addInitializeData(o),c.onDispose(()=>this.onNodeDisposeEmitter.fire({node:c})),this.options.fromNodeJSON?.(c,e,!0),u=!0}if(c.initData({originParent:s,parent:o,meta:a,hidden:l,index:h}),c.isStart&&this.root.addChild(c),n?.push(c),d.onCreate){let r=d.onCreate(c,e);r&&n&&n.push(...r)}else e.blocks&&e.blocks.length>0&&(e.blocks[0].type?this.addBlocksAsChildren(c,e.blocks,n):this.addInlineBlocks(c,e.blocks,n));return u?this.onNodeCreateEmitter.fire({node:c,data:e,json:e}):this.onNodeUpdateEmitter.fire({node:c,data:e,json:e}),c}addBlocksAsChildren(e,n,r){for(let i of n)this.addNode({...i,parent:e},r)}addInlineBlocks(e,n,r=[]){let i=this.addNode({id:`$blockIcon$${e.id}`,type:"blockIcon",originParent:e,parent:e});r.push(i);let s=this.addNode({id:`$inlineBlocks$${e.id}`,type:"inlineBlocks",originParent:e,parent:e});return r.push(s),n.forEach(n=>{this.addBlock(e,n,r)}),r}addBlock(e,n,r,i,s){let o="string"==typeof e?this.getNode(e):e,{onBlockChildCreate:a}=o.getNodeRegistry();if(a)return a(o,n,r);i=i||this.getNode(`$inlineBlocks$${o.id}`);let l=this.addNode({...(0,g.omit)(n,"blocks"),type:n.type||"block",originParent:o,parent:i,index:s});n.meta?.defaultCollapsed&&(l.collapsed=!0);let h=this.addNode({id:`$blockOrderIcon$${n.id}`,type:"blockOrderIcon",originParent:o,meta:n.meta,data:n.data,parent:l});return r?.push(l,h),n.blocks&&this.addBlocksAsChildren(l,n.blocks,r),l}getNode(e){if(e)return this.entityManager.getEntityById(e)}registerFlowNodes(...e){e.forEach(e=>{if(!e)throw Error("[FlowDocument] registerFlowNodes parameters get undefined registry.");let n=this.registers.get(e.type);this.registers.set(e.type,{...n,...e,meta:{...n?.meta,...e?.meta},extendChildRegistries:u.mergeChildRegistries(n?.extendChildRegistries,e?.extendChildRegistries)})})}isExtend(e,n){return(this.getNodeRegistry(e).__extends__||[]).includes(n)}isTypeOrExtendType(e,n){return e===n||this.isExtend(e,n)}toJSON(){if(this.disposed)throw Error("The FlowDocument has been disposed and it is no longer possible to call toJSON.");return{nodes:this.root.toJSON().blocks}}getNodeRegister(e,n){return this.getNodeRegistry(e,n)}getNodeRegistry(e,n){let r=`${e}_${n?.flowNodeType||""}`;if(this.nodeRegistryCache.has(r))return this.nodeRegistryCache.get(r);let i=this.options.getNodeDefaultRegistry?.(e),s=this.registers.get(e)||{type:e},o=[],a=s.extend;if(s.extend&&this.registers.has(s.extend)&&(s=u.merge(this.getNodeRegistry(s.extend),s,s.type)),n){let r=this.getNodeRegistry(n.flowNodeType).extendChildRegistries?.find(n=>n.type===e);r&&(r.extend&&this.registers.has(r.extend)&&o.push(this.registers.get(r.extend)),o.push(r))}s=u.extend(s,o);let l=((e,n)=>{let r=_.includes(e);return{isStart:"start"===e,hidden:r,defaultExpanded:n.options.allNodesDefaultExpanded,size:N,origin:n.layout.getDefaultNodeOrigin(),isInlineBlocks:"inlineBlocks"===e,spacing:A.SPACING,inlineSpacingPre:0,inlineSpacingAfter:0,expandable:!0,draggable:!0,selectable:!0,renderKey:"",minInlineBlockSpacing:()=>C.isVertical(n.layout)?A.MIN_INLINE_BLOCK_SPACING:A.MIN_INLINE_BLOCK_SPACING_HORIZONTAL}})(e,this);l.spacing=this.options?.constants?.[G.NODE_SPACING]||l.spacing;let h={...i,...s,meta:{...l,...i?.meta,...s.meta}};return a&&(h.extend=a),this.nodeRegistryCache.set(r,h),h}registerNodeDatas(...e){this.nodeDataRegistries.push(...e)}traverse(e,n=this.root,r=0){return this.originTree.traverse(e,n,r)}get size(){return this.getAllNodes().length}hasNode(e){return!!this.entityManager.getEntityById(e)}getAllNodes(){return this.entityManager.getEntities(F)}toString(e){return this.originTree.toString(e)}getRenderDatas(e,n=!0){let r=[];return this.renderTree.traverse(i=>{(n||!i.hidden)&&r.push(i.getData(e))}),r}toNodeJSON(e){let n;if(this.options.toNodeJSON)return this.options.toNodeJSON(e);let r={};return this.traverse(e=>{if(e.id.startsWith("$"))return;let i=e.getJSONData(),s={id:e.id,type:e.flowNodeType};void 0!==i&&(s.data=i),n||(n=s);let{parent:o}=e;o&&o.id.startsWith("$")&&(o=o.originParent);let a=o?r[o.id]:void 0;a&&(a.blocks||(a.blocks=[]),a.blocks.push(s)),r[e.id]=s},e),n}moveNodes({dropNodeId:e,sortNodeIds:n,inside:r=!1}){let i=this.getNode(e);if(!i)return;let s=n.map(e=>this.getNode(e));for(let e of(this.entityManager.changeEntityLocked=!0,s.reverse()))r?this.originTree.addChild(i,e,0):this.originTree.insertAfter(i,e);this.entityManager.changeEntityLocked=!1,this.fireRender()}moveChildNodes({toParentId:e,toIndex:n,nodeIds:r}){if(0===r.length)return;let i=this.getNode(e);i&&(this.entityManager.changeEntityLocked=!0,this.originTree.moveChilds(i,r.map(e=>this.getNode(e)),n),this.entityManager.changeEntityLocked=!1,this.fireRender())}registerLayout(e){this.layouts.push(e)}setLayout(e){if(this.currentLayoutKey===e)return;let n=this.layouts.find(n=>n.name===e);n&&(this.currentLayoutKey=e,this.transformer.clear(),n.reload?.(),this.fireRender(),this.onLayoutChangeEmitter.fire(this.layout))}toggleFixedLayout(){this.setLayout("horizontal-fixed-layout"===this.layout.name?"vertical-fixed-layout":"horizontal-fixed-layout")}dispose(){this._disposed||(this.registers.clear(),this.nodeRegistryCache.clear(),this.originTree.dispose(),this.renderTree.dispose(),this.onNodeUpdateEmitter.dispose(),this.onNodeCreateEmitter.dispose(),this.onNodeDisposeEmitter.dispose(),this.onLayoutChangeEmitter.dispose(),this._disposed=!0)}};x([(0,m.WQ)(p.Zy)],et.prototype,"entityManager",2),x([(0,m.WQ)(J)],et.prototype,"config",2),x([(0,m.WQ)(U),(0,m.lq)()],et.prototype,"options",2),x([(0,m.tt)(H),(0,m.lq)()],et.prototype,"contributions",2),x([(0,m.kr)()],et.prototype,"init",1),et=x([(0,m._G)()],et);var en=class e{constructor(e){this.groupNode=e}get nodes(){return this.groupNode.collapsedChildren||[]}get collapsed(){return this.groupNode.getData(z).collapsed}collapse(){this.collapsed=!0}expand(){this.collapsed=!1}get bounds(){return this.groupNode.getData(z).bounds}isStartNode(e){if(!e)return!1;let n=this.nodes;return!!n[0]&&e.id===n[0].id}isEndNode(e){if(!e)return!1;let n=this.nodes;return!!n[n.length-1]&&e.id===n[n.length-1].id}set note(e){this.groupNode.getNodeMeta().note=e}get note(){return this.groupNode.getNodeMeta().note||""}set noteHeight(e){this.groupNode.getNodeMeta().noteHeight=e}get noteHeight(){return this.groupNode.getNodeMeta().noteHeight||0}get positionConfig(){return this.groupNode.getNodeMeta().positionConfig}set collapsed(e){let n=this.groupNode.getData(z);n.collapsed=e,n.localDirty=!0,n.parent&&(n.parent.localDirty=!0),n.parent?.firstChild&&(n.parent.firstChild.localDirty=!0)}set hovered(e){let n=this.groupNode.getData(j);e?n.toggleMouseEnter():n.toggleMouseLeave(),n.hovered!==e&&(n.hovered=e)}get hovered(){return this.groupNode.getData(j).hovered}static create(n){if(n&&d.isGroupNode(n))return new e(n)}},er=d||(d={});let ei=e=>e?.parent?.flowNodeType==="group";er.validate=e=>{if(!e||!Array.isArray(e)||0===e.length||e.some(e=>(0,er.isGroupNode)(e))||e.some(e=>e&&ei(e)))return!1;let n=e[0].parent;return!(!e.every(e=>e.parent===n)||!e.map(e=>e.index).sort((e,n)=>e-n).every((e,n,r)=>0===n||e===r[n-1]+1)||(e=>{let n=[],r=e.parent;for(;r;)n.push(r),r=r.parent;return n})(e[0]).some(e=>ei(e)))},er.getNodeGroupController=e=>{if(!e||!ei(e))return;let n=e?.parent;return en.create(n)},er.getNodeRecursionGroupController=e=>{if(!e)return;let n=(0,er.getNodeGroupController)(e);return n||(e.parent?(0,er.getNodeRecursionGroupController)(e.parent):void 0)},er.isGroupNode=e=>"group"===e.flowNodeType;var es=class{constructor(){this.onDropEmitter=new f.vl,this.onDrop=this.onDropEmitter.event}get renderState(){return this.document.renderState}get dragStartNode(){return this.renderState.getDragStartEntity()}get dragNodes(){return this.renderState.getDragEntities()}get dropNodeId(){return this.renderState.getNodeDroppingId()}get isDragBranch(){return this.dragStartNode?.isInlineBlock}get nodeDragIdsWithChildren(){return this.renderState.config.nodeDragIdsWithChildren||[]}get dragging(){let e=this.dragStartNode?.getData(j);return!!e?.dragging}get labelSide(){return this.renderState.config.dragLabelSide}dropBranch(){this.dropNode()}dropNode(){let e=this.document.getNode(this.dropNodeId);if(!e)return;let n=[],r=this.dragStartNode;for(;r&&this.dragNodes.includes(r);)n.push(r),r=r.next;this.operationService.dragNodes({dropNode:e,nodes:n}),n.length>0&&this.onDropEmitter.fire({dropNode:e,dragNodes:n})}isDroppableNode(e){return!(!this.dragging||this.isDragBranch||this.nodeDragIdsWithChildren.includes(e.id)||e.next&&this.nodeDragIdsWithChildren.includes(e.next.id)||e.isInlineBlocks||e.isInlineBlock||this.dragNodes.some(e=>"group"===e.flowNodeType)&&d.getNodeRecursionGroupController(e))&&!0}isDroppableBranch(e,n="normal_branch"){if(this.isDragBranch){if(!e.isInlineBlock||e.parent!==this.dragStartNode.parent||e===this.dragStartNode)return!1;if("normal_branch"===n&&e.next!==this.dragStartNode||"pre_branch"===n&&e.pre!==this.dragStartNode)return!0}return!1}};x([(0,m.WQ)(et)],es.prototype,"document",2),x([(0,m.WQ)(L)],es.prototype,"operationService",2),x([(0,m.WQ)(p.Zy)],es.prototype,"entityManager",2),es=x([(0,m._G)()],es);var eo=class{constructor(){this.onNodeAddEmitter=new f.vl,this.onNodeAdd=this.onNodeAddEmitter.event,this.toDispose=new f.Vd,this.onNodeMoveEmitter=new f.vl,this.onNodeMove=this.onNodeMoveEmitter.event}init(){this.toDispose.pushAll([this.onNodeAddEmitter,this.onNodeMoveEmitter])}addNode(e,n={}){let r,i,s,{parent:o,index:a,hidden:l}=n;o&&(r=this.toNodeEntity(o)),r&&(i=r.getNodeRegistry());let h={...e,type:e.type||"block"},c={...h,parent:r,index:a,hidden:l};return s=r&&i?.addChild?i.addChild(r,h,{index:a,hidden:l}):this.document.addNode(c),this.onNodeAddEmitter.fire({node:s,data:c}),s}addFromNode(e,n){return this.document.addFromNode(e,n)}deleteNode(e){this.document.removeNode(e)}deleteNodes(e){(e||[]).forEach(e=>{this.deleteNode(e)})}addBlock(e,n,r={}){let{parent:i,index:s}=r;return this.document.addBlock(e,n,void 0,i,s)}moveNode(e,n={}){let{parent:r,index:i}=n,s=this.toNodeEntity(e),o=s?.parent;if(!o)return;let a=r?this.toNodeEntity(r):o;if(!a)return void console.warn("no new parent found",r);let l=void 0===i?a.collapsedChildren.length:i;return this.doMoveNode(s,a,l)}dragNodes({dropNode:e,nodes:n}){if(0===n.length)return;let r=n[0],i=r.parent,s=e.parent;if(!i||!s)return;let o=i.children.findIndex(e=>e===r),a=s.children.findIndex(n=>n===e),l=a+1;i===s&&o<a&&(l-=n.length);let h={nodeIds:n.map(e=>e.id),fromParentId:i.id,toParentId:s.id,fromIndex:o,toIndex:l};return this.apply({type:"moveChildNodes",value:h})}apply(e){let n=this.document;switch(e.type){case"addFromNode":return n.addFromNode(e.value.fromId,e.value.data);case"deleteFromNode":return n.getNode(e.value?.data?.id)?.dispose();case"addBlock":{let r;return e.value.parentId&&(r=n.getNode(e.value.parentId)),n.addBlock(e.value.targetId,e.value.blockData,void 0,r,e.value.index)}case"deleteBlock":{let r=n.getNode(e.value?.blockData.id);return r?.dispose()}case"createGroup":{let r=n.addFromNode(e.value.targetId,{id:e.value.groupId,type:"group"});return n.moveNodes({dropNodeId:e.value.groupId,sortNodeIds:e.value.nodeIds,inside:!0}),r}case"ungroup":return n.moveNodes({dropNodeId:e.value.groupId,sortNodeIds:e.value.nodeIds}),n.getNode(e.value.groupId)?.dispose();case"moveNodes":return n.moveNodes({dropNodeId:e.value.toId,sortNodeIds:e.value.nodeIds});case"moveBlock":return n.moveChildNodes({...e.value,nodeIds:[e.value.nodeId]});case"addNodes":{let r=e.value.fromId;(e.value.nodes||[]).forEach(e=>{r=n.addFromNode(r,e).id});break}case"deleteNodes":(e.value.nodes||[]).forEach(e=>{let r=n.getNode(e.id);r?.dispose()});break;case"addChildNode":return n.addNode({...e.value.data,parent:e.value.parentId?n.getNode(e.value.parentId):void 0,originParent:e.value.originParentId?n.getNode(e.value.originParentId):void 0,index:e.value.index,hidden:e.value.hidden});case"deleteChildNode":return n.getNode(e.value.data.id)?.dispose();case"moveChildNodes":return n.moveChildNodes(e.value);default:throw Error("unknown operation type")}}transact(e){e()}dispose(){this.toDispose.dispose()}toId(e){return"string"==typeof e?e:e.id}toNodeEntity(e){return"string"==typeof e?this.document.getNode(e):e}getNodeIndex(e){let n=this.toNodeEntity(e),r=n?.parent;return r?r.children.findIndex(e=>e===n):-1}doMoveNode(e,n,r){if(!e.parent)throw Error("root node cannot move");let i={node:e,fromParent:e.parent,toParent:n,fromIndex:this.getNodeIndex(e),toIndex:r};this.document.moveChildNodes({nodeIds:[this.toId(e)],toParentId:this.toId(n),toIndex:r}),this.onNodeMoveEmitter.fire(i)}};x([(0,m.WQ)(p.Zy)],eo.prototype,"entityManager",2),x([(0,m.WQ)(et)],eo.prototype,"document",2),x([(0,m.kr)()],eo.prototype,"init",1),eo=x([(0,m._G)()],eo);var ea=class{createGroup(e){if(!e||!Array.isArray(e)||0===e.length||!d.validate(e))return;let n=e.sort((e,n)=>e.index-n.index)[0],r=`group_${(0,y.Ak)(5)}`;this.operationService.apply({type:"createGroup",value:{targetId:n.id,groupId:r,nodeIds:e.map(e=>e.id)}});let i=this.entityManager.getEntityById(r);if(!i)return;let s=this.groupController(i);if(s)return s.expand(),i}deleteGroup(e){let n=e.toJSON();e.pre&&n&&this.operationService.apply({type:"deleteNodes",value:{fromId:e.pre.id,nodes:[n]}})}ungroup(e){let n=this.groupController(e);if(!n)return;let r=n.nodes;e.pre&&(n.collapse(),this.operationService.apply({type:"ungroup",value:{groupId:e.id,targetId:e.pre.id,nodeIds:r.map(e=>e.id)}}))}getAllGroups(){return this.entityManager.getEntities(F).filter(e=>"group"===e.flowNodeType).map(e=>this.groupController(e)).filter(Boolean)}groupController(e){return en.create(e)}static validate(e){return d.validate(e)}};x([(0,m.WQ)(p.Zy)],ea.prototype,"entityManager",2),x([(0,m.WQ)(L)],ea.prototype,"operationService",2),ea=x([(0,m._G)()],ea);var el=class{constructor(){this.name="vertical-fixed-layout",this.structDataMap=new WeakMap}get document(){return this.documentProvider()}reload(){this.structDataMap=new WeakMap}update(){this.updateLocalTransform(this.document.root)}updateLocalTransform(e,n=!1){let{children:r,parent:i,isInlineBlock:s}=e,o=e.getData(z),{getDelta:a,getOrigin:l}=e.getNodeRegistry(),h=this.structDataMap.get(e)||{childrenLength:0,index:-1};e.clearMemoGlobal();let c=o.localDirty||n,u={index:e.index,childrenLength:e.children.length};(h.childrenLength!==u.childrenLength||h.index!==u.index)&&(c=!0,this.structDataMap.set(e,u));let d=!1;if(r.length>0)for(let e of r)this.updateLocalTransform(e,d)&&(d=!0,c=!0);if(!c)return!1;e.clearMemoLocal(),o.transform.update({origin:l?l(o,this):this.getDefaultNodeOrigin()});let p=o.pre,f=a?.(o,this)||{x:0,y:0},g=s&&o.parent?.inlineSpacingPre?o.parent?.inlineSpacingPre:0,m=i?.getNodeRegistry().getChildDelta?.(o,this)||{x:0,y:0};f.x+=m.x,f.y+=m.y;let y={x:f.x,y:f.y};return s?y.y+=g:(y.y+=p?.localBounds.bottom||0,y.y+=p?.spacing||0),o.transform.update({size:o.data.size,position:y}),this.onAfterUpdateLocalTransform(o),o.localDirty=!1,!0}onAfterUpdateLocalTransform(e){let{onAfterUpdateLocalTransform:n}=e.entity.getNodeRegistry();n?.(e,this),this.contribs?.forEach(n=>{n?.onAfterUpdateLocalTransform?.(e,this)})}getNodeTransform(e){return e.getData(z)}getPadding(e){let{inlineSpacingPre:n,inlineSpacingAfter:r,padding:i}=e.getNodeMeta(),s=this.getNodeTransform(e);return i?"function"==typeof i?i(s):i:{left:0,top:"function"==typeof n?n(s):n,right:0,bottom:"function"==typeof r?r(s):r}}getInitScroll(e){return{scrollX:-e.width/2,scrollY:-36}}getDefaultInputPoint(e){return this.getNodeTransform(e).bounds.topCenter}getDefaultOutputPoint(e){return this.getNodeTransform(e).bounds.bottomCenter}getDefaultNodeOrigin(){return{x:.5,y:0}}};x([(0,m.WQ)(ee)],el.prototype,"documentProvider",2),x([(0,m.tt)(k),(0,m.lq)()],el.prototype,"contribs",2),el=x([(0,m._G)()],el);var eh=class{constructor(){this.name="horizontal-fixed-layout",this.structDataMap=new WeakMap}get document(){return this.documentProvider()}reload(){this.structDataMap=new WeakMap}update(){this.updateLocalTransform(this.document.root)}updateLocalTransform(e,n=!1){let{children:r,parent:i,isInlineBlock:s}=e,o=e.getData(z),{getDelta:a,getOrigin:l}=e.getNodeRegistry(),h=this.structDataMap.get(e)||{childrenLength:0,index:-1};e.clearMemoGlobal();let c=o.localDirty||n,u={index:e.index,childrenLength:e.children.length};(h.childrenLength!==u.childrenLength||h.index!==u.index)&&(c=!0,this.structDataMap.set(e,u));let d=!1;if(r.length>0)for(let e of r)this.updateLocalTransform(e,d)&&(d=!0,c=!0);if(!c)return!1;e.clearMemoLocal(),o.transform.update({origin:l?l(o,this):this.getDefaultNodeOrigin()});let p=o.pre,f=a?.(o,this)||{x:0,y:0},g=s&&o.parent?.inlineSpacingPre?o.parent?.inlineSpacingPre:0,m=i?.getNodeRegistry().getChildDelta?.(o,this)||{x:0,y:0};f.x+=m.x,f.y+=m.y;let y={x:f.x,y:f.y};return s?y.x+=g:(y.x+=p?.localBounds.right||0,y.x+=p?.spacing||0),o.transform.update({size:o.data.size,position:y}),this.onAfterUpdateLocalTransform(o),o.localDirty=!1,!0}onAfterUpdateLocalTransform(e){let{onAfterUpdateLocalTransform:n}=e.entity.getNodeRegistry();n?.(e,this),this.contribs?.forEach(n=>{n?.onAfterUpdateLocalTransform?.(e,this)})}getNodeTransform(e){return e.getData(z)}getPadding(e){let{inlineSpacingPre:n,inlineSpacingAfter:r,padding:i}=e.getNodeMeta(),s=this.getNodeTransform(e);return i?"function"==typeof i?i(s):i:{left:"function"==typeof n?n(s):n,top:0,right:"function"==typeof r?r(s):r,bottom:0}}getInitScroll(e){return{scrollX:-36,scrollY:-e.height/2}}getDefaultInputPoint(e){return this.getNodeTransform(e).bounds.leftCenter}getDefaultOutputPoint(e){return this.getNodeTransform(e).bounds.rightCenter}getDefaultNodeOrigin(){return{x:0,y:.5}}};x([(0,m.WQ)(ee)],eh.prototype,"documentProvider",2),x([(0,m.tt)(k),(0,m.lq)()],eh.prototype,"contribs",2),eh=x([(0,m._G)()],eh);var ec=new m.i0(e=>{e(et).toSelf().inSingletonScope(),e(ee).toDynamicValue(e=>()=>e.container.get(et)).inSingletonScope(),e(J).toSelf().inSingletonScope(),e(el).toSelf().inSingletonScope(),e(eh).toSelf().inSingletonScope(),e(es).toSelf().inSingletonScope(),e(L).to(eo).inSingletonScope(),e(ea).toSelf().inSingletonScope(),e(H).toDynamicValue(e=>({registerDocument:n=>{n.registerLayout(e.container.get(el)),n.registerLayout(e.container.get(eh))}}))}),eu=(e,n,r)=>{let i=e.getService(U);return i?.constants?.[n]||r||A[n]}},58639:function(e,n,r){"use strict";r.d(n,{vli:()=>l.vl,BYF:()=>u.BY,hZp:()=>h.hZ,zX6:()=>ex,Ju9:()=>h.Ju,byp:()=>b,law:()=>Y,eHM:()=>s,D9h:()=>h.D9,BPw:()=>M.BP,uJe:()=>A,Ojz:()=>h.Oj,b6f:()=>l.b6,VdD:()=>l.Vd,_v9:()=>P,uBz:()=>h.uB,_1v:()=>h._1,F24:()=>I.F,ItQ:()=>p.It,Zy1:()=>h.Zy,Wdr:()=>h.Wd,$hw:()=>U,M_G:()=>l.M_,FHZ:()=>R.FH,FX4:()=>h.FX,Poj:()=>a.Po,$un:()=>h.W_,D0$:()=>R.D0,LO:()=>N.LO,lVW:()=>R.lV,G8B:()=>p.G8,h1n:()=>h.h1,vi:()=>p.vi,jGt:()=>l.jG,BAU:()=>a.BA,QF1:()=>h.QF,MLh:()=>el,bfd:()=>h.bf,SiQ:()=>l.Si,N0$:()=>R.N0,dL5:()=>p.dL,WQX:()=>d.WQ,NMT:()=>h.NM,ED_:()=>R.ED,LY3:()=>c.LY,etV:()=>u.et,tFm:()=>p.tF,cbG:()=>l.cb,d0U:()=>h.d0,HTR:()=>u.HT,XY6:()=>h.XY,DgO:()=>p.Dg,idb:()=>h.id,rJT:()=>h.rJ,WWE:()=>h.WW,UGO:()=>k,$p9:()=>T,A7z:()=>h.A7,_GM:()=>d._G,S_f:()=>R.S_,D31:()=>x,LK9:()=>u.LK,cwh:()=>h.cw,$7r:()=>a.$7,xh9:()=>p.xh,qgf:()=>u.qg,fSl:()=>_,$t2:()=>h.$t,yaD:()=>c.y,mEU:()=>u.mE,Cyy:()=>h.Cy}),r(94266);var i,s,o,a=r(72342),l=r(67055),h=r(81376),c=r(32893),u=r(21727),d=r(11812),p=r(42225),f=r(91280),g=Object.defineProperty,m=Object.getOwnPropertyDescriptor,y=(e,n,r,i)=>{for(var s,o=i>1?void 0:i?m(n,r):n,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i?s(n,r,o):s(o))||o);return i&&o&&g(n,r,o),o},O=(e,n)=>(r,i)=>n(r,i,e),b=((i=b||{}).public="public",i.private="private",i),x=class extends h.oW{constructor(e,n){super(e),this.opts=n;let{variableEngine:r}=n||{};this.variableEngine=r,this._public=this.variableEngine.createScope(this.entity.id,{node:this.entity,type:"public"}),this.toDispose.push(this._public)}get private(){return this._private}get public(){return this._public}setVar(e,n){if("string"==typeof e&&void 0!==n)return this.public.ast.set(e,n);if("object"==typeof e&&void 0===n)return this.public.ast.set("outputs",e);throw Error("Invalid arguments")}getVar(e="outputs"){return this.public.ast.get(e)}clearVar(e="outputs"){return this.public.ast.remove(e)}setPrivateVar(e,n){if("string"==typeof e&&void 0!==n)return this.initPrivate().ast.set(e,n);if("object"==typeof e&&void 0===n)return this.initPrivate().ast.set("outputs",e);throw Error("Invalid arguments")}getPrivateVar(e="outputs"){return this.private?.ast.get(e)}clearPrivateVar(e="outputs"){return this.private?.ast.remove(e)}get allScopes(){let e=[];return this._public&&e.push(this._public),this._private&&e.push(this._private),e}getDefaultData(){return{}}initPrivate(){return this._private||(this._private=this.variableEngine.createScope(`${this.entity.id}_private`,{node:this.entity,type:"private"}),this.variableEngine.chain.refreshAllChange(),this.toDispose.push(this._private)),this._private}getByKeyPath(e){return this.public.available.getByKeyPath(e)}getByKeyPathInPrivate(e){return this.private?.available.getByKeyPath(e)}};x.type="FlowNodeVariableData";var w=Symbol("VariableChainConfig"),S=(e,n)=>e,_=class{constructor(e){this.configs=e,this.transformerMap=new Map,(this.configs?.transformDeps||this.configs?.transformCovers)&&this.transformerMap.set("VARIABLE_LAYOUT_CONFIG",{transformDeps:this.configs.transformDeps||S,transformCovers:this.configs.transformCovers||S})}hasTransformer(e){return this.transformerMap.has(e)}registerTransformer(e,n){this.transformerMap.set(e,n)}transformDeps(e,{scope:n}){return Array.from(this.transformerMap.values()).reduce((e,r)=>r.transformDeps?e=r.transformDeps(e,{scope:n,document:this.document,variableEngine:this.variableEngine}):e,e)}transformCovers(e,{scope:n}){return Array.from(this.transformerMap.values()).reduce((e,r)=>r.transformCovers?e=r.transformCovers(e,{scope:n,document:this.document,variableEngine:this.variableEngine}):e,e)}};y([(0,h.gK)(c.mi)],_.prototype,"document",2),y([(0,h.gK)(p.xh)],_.prototype,"variableEngine",2),_=y([(0,d._G)(),O(0,(0,d.lq)()),O(0,(0,d.WQ)(w))],_);var k=class extends p.HG{static is(e){return e.id===k.ID}};k.ID=Symbol("GlobalScope"),k=y([(0,d._G)()],k);var C=class extends p.kb{get tree(){return this.flowDocument.originTree}onInit(){this.toDispose.pushAll([this.entityManager.onEntityDataChange(({entityDataType:e})=>{e===f.tB.type&&this.refreshAllChange()}),this.tree.onTreeChange(()=>{this.refreshAllChange()})])}getAllInputLayerNodes(e){let n=this.getNodeParent(e),r=new Set,i=[e];for(;i.length;){let e=i.shift();(e.getData(f.tB)?.inputNodes||[]).forEach(e=>{this.getNodeParent(e)===n&&(r.has(e)||(i.push(e),r.add(e)))})}return Array.from(r).reverse()}getAllOutputLayerNodes(e){let n=this.getNodeParent(e);return(e.getData(f.tB)?.allOutputNodes||[]).filter(e=>this.getNodeParent(e)===n)}getDeps(e){let{node:n}=e.meta||{};if(!n)return this.transformService.transformDeps([],{scope:e});let r=[],i=n;for(;i;){let n=i.getData(x);n?.private&&e!==n.private&&r.unshift(n.private);let s=this.getAllInputLayerNodes(i);r.unshift(...s.map(e=>[e.getData(x).public,...this.getAllPublicChildScopes(e)]).flat().filter(Boolean)),i=this.getNodeParent(i)}let s=this.variableEngine.getScopeById(k.ID);s&&r.unshift(s);let o=Array.from(new Set(r));return this.transformService.transformDeps(o,{scope:e})}getCovers(e){if(k.is(e)){let n=this.variableEngine.getAllScopes({sort:!0}).filter(e=>!k.is(e));return this.transformService.transformCovers(n,{scope:e})}let{node:n}=e.meta||{};if(!n)return this.transformService.transformCovers([],{scope:e});let r="private"===e.meta.type,i=[];if(r)i.push(...this.getNodeChildren(n));else{i.push(...this.getAllOutputLayerNodes(n)||[]);let e=this.getNodeParent(n);for(;e&&!this.isNodeChildrenPrivate(e);)i.push(...this.getAllOutputLayerNodes(e)),e=this.getNodeParent(e)}let s=[];for(;i.length;){let e=i.shift(),n=e.getData(x);s.push(...n.allScopes);let r=e&&this.getNodeChildren(e);r?.length&&i.push(...r)}let o=n.getData(x);r&&o.public&&s.push(o.public);let a=Array.from(new Set(s));return this.transformService.transformCovers(a,{scope:e})}getNodeChildren(e){if(this.configs?.getNodeChildren)return this.configs.getNodeChildren?.(e);let n=e.getNodeMeta(),r=n.subCanvas?.(e);if(r)if(r.isCanvas)return[];else return r.canvasNode.collapsedChildren;return this.tree.getChildren(e)}getAllPublicChildScopes(e){return this.isNodeChildrenPrivate(e)?[]:this.getNodeChildren(e).map(e=>[e.getData(x).public,...this.getAllPublicChildScopes(e)]).flat()}getNodeParent(e){if(this.configs?.getNodeParent)return this.configs.getNodeParent(e);let n=e.document.originTree.getParent(e);for(;n?.flowNodeType===c.y.GROUP;)n=n.parent;if(!n)return n;let r=n.getNodeMeta(),i=r.subCanvas?.(n);return i?.isCanvas?i.parentNode:n}isNodeChildrenPrivate(e){return this.configs?.isNodeChildrenPrivate?!!e&&this.configs?.isNodeChildrenPrivate(e):!e?.id.startsWith("$")&&e?.flowNodeType!==c.y.GROUP}sortAll(){return console.warn("FreeLayoutScopeChain.sortAll is not implemented"),[]}};y([(0,d.WQ)(h.Zy)],C.prototype,"entityManager",2),y([(0,d.WQ)(c.mi)],C.prototype,"flowDocument",2),y([(0,d.lq)(),(0,d.WQ)(w)],C.prototype,"configs",2),y([(0,d.WQ)(_)],C.prototype,"transformService",2),y([(0,d.kr)()],C.prototype,"onInit",1);var E=class extends p.kb{constructor(e,n){super(),this.flowDocument=e,this.configs=n,this.bindTree(e.originTree),this.toDispose.push(e.originTree.onTreeChange(()=>{this.refreshAllChange()}))}bindTree(e){this.tree=e}getDeps(e){if(!this.tree)return this.transformService.transformDeps([],{scope:e});let n=e.meta.node;if(!n)return this.transformService.transformDeps([],{scope:e});let r=[],i=n;for(;i;){let{parent:s,pre:o}=this.tree.getInfo(i),a=this.getVariableData(i);if(i===n?"public"===e.meta.type&&a?.private&&r.unshift(a.private):this.hasChildren(i)&&!this.isNodeChildrenPrivate(i)&&r.unshift(...this.getAllSortedChildScope(i,{ignoreNodeChildrenPrivate:!0})),a&&i!==n&&r.unshift(a.public),o){i=o;continue}if(s){let e=s,n=this.tree.getPre(e);for(;e;){let i=this.getVariableData(e);if(i&&r.unshift(...i.allScopes),n)break;n=(e=this.tree.getParent(e))?this.tree.getPre(e):void 0}i=n;continue}i=void 0}let s=this.variableEngine.getScopeById(k.ID);return s&&r.unshift(s),this.transformService.transformDeps(r,{scope:e})}getCovers(e){if(!this.tree)return this.transformService.transformCovers([],{scope:e});if(k.is(e)){let n=this.variableEngine.getAllScopes({sort:!0}).filter(e=>!k.is(e));return this.transformService.transformCovers(n,{scope:e})}let n=e.meta.node;if(!n)return this.transformService.transformCovers([],{scope:e});let r=[];if("private"===e.meta.type)return r.push(...this.getAllSortedChildScope(n,{addNodePrivateScope:!0}).filter(n=>n!==e)),this.transformService.transformCovers(r,{scope:e});let i=n;for(;i;){let{next:s,parent:o}=this.tree.getInfo(i),a=this.getVariableData(i);if(i!==n&&(this.hasChildren(i)?r.push(...this.getAllSortedChildScope(i,{addNodePrivateScope:!0})):a&&r.push(...a.allScopes)),s){i=s;continue}if(o){let n=o,s=this.tree.getNext(n);for(;n;){if(this.isNodeChildrenPrivate(n))return this.transformService.transformCovers(r,{scope:e});if(s)break;s=(n=this.tree.getParent(n))?this.tree.getNext(n):void 0}if(!s&&n)break;i=s;continue}i=void 0}return this.transformService.transformCovers(r,{scope:e})}sortAll(){let e=this.flowDocument.getAllNodes().find(e=>e.isStart);if(!e)return[];let n=e.getData(x).public,r=this.getDeps(n),i=this.getCovers(n).filter(e=>!r.includes(e)&&e!==n);return[...r,n,...i]}getVariableData(e){if("virtualNode"!==e.flowNodeType&&!e.id.startsWith("$"))return e.getData(x)}isNodeChildrenPrivate(e){return this.configs?.isNodeChildrenPrivate?!!e&&this.configs?.isNodeChildrenPrivate(e):!e?.id.startsWith("$")&&this.hasChildren(e)}hasChildren(e){return!!(this.tree&&e&&this.tree.getChildren(e).length>0)}getAllSortedChildScope(e,{ignoreNodeChildrenPrivate:n,addNodePrivateScope:r}={}){let i=[],s=this.getVariableData(e);return s&&i.push(s.public),n&&this.isNodeChildrenPrivate(e)||(r&&s?.private&&i.push(s.private),i.push(...(this.tree?.getChildren(e)||[]).map(e=>this.getAllSortedChildScope(e,{ignoreNodeChildrenPrivate:n,addNodePrivateScope:r})).flat())),i}};function T(e){return e.getData(x).public}function P(e){return e.getData(x).initPrivate()}y([(0,d.WQ)(_)],E.prototype,"transformService",2),E=y([O(0,(0,d.WQ)(c.mi)),O(1,(0,d.lq)()),O(1,(0,d.WQ)(w))],E);var A=(0,h.XY)({onBind({bind:e},n){let{layout:r,layoutConfig:i,chainConfig:s}=n;e(_).toSelf().inSingletonScope(),"free"===r&&e(p.kb).to(C).inSingletonScope(),"fixed"===r&&e(p.kb).to(E).inSingletonScope(),s?e(w).toConstantValue(s||{}):i&&(console.warn("Layout Config deprecated, use chainConfig instead"),e(w).toConstantValue(i||{})),e(k).toDynamicValue(e=>{let n=e.container.get(p.xh),r=n.getScopeById(k.ID);return r||(r=n.createScope(k.ID,{},{ScopeConstructor:k}),n.chain.refreshAllChange()),r})},onInit(e,n){let{extendASTNodes:r}=n||{},i=e.get(p.xh),s=e.get(p.Vb),o=e.get(h.Zy),a=e.get(c.mi);(r||[]).forEach(n=>{if(Array.isArray(n)){let[r,i]=n;s.registerAST(r,i?()=>i(e):void 0);return}s.registerAST(n)}),o.registerEntityData(x,()=>({variableEngine:i})),a.registerNodeDatas(x)},containerModules:[p.Y1]}),M=r(51829),N=r(28602),D=(0,h.XY)({onInit(e,n){e.get(c.mi).registerNodeDatas(...(0,N.Fl)());let r=e=>new a.yQ(e);if(e.get(h.Zy).registerEntityData(N.LO,()=>({formModelFactory:r})),!n.materials)return;let i=e.get(N.YF),s=e.get(N.A);if(!i||!s)throw Error("NodeCorePlugin Error: nodeManager or formManager not found");!function({nodeManager:e,formManager:n,material:r}){let{setters:i=[],decorators:s=[],effects:o=[],validators:a=[],nodeErrorRender:l,nodePlaceholderRender:h}=r;l&&(0,N.Uc)(e,l),h&&(0,N.b7)(e,h),i.forEach(e=>{n.registerAbilityExtension(N.SO.type,e)}),s.forEach(e=>{n.registerAbilityExtension(N.W2.type,e)}),o.forEach(e=>{n.registerAbilityExtension(N.G5.type,e)}),a.forEach(e=>{n.registerAbilityExtension(N.wp.type,e)})}({nodeManager:i,formManager:s,material:n.materials})},onDispose(e){e.get(N.A)?.dispose()},containerModules:(0,N.n9)()}),I=r(24174),$=(0,h.XY)({onInit:(e,n)=>{n.onLanguageChange&&e.playground.toDispose.push(I.F.onLanguageChange(n.onLanguageChange)),n.languages&&(Array.isArray(n.languages)?I.F.addLanguages(n.languages):I.F.addLanguages(Object.keys(n.languages).map(e=>({languageId:e,contents:n.languages[e]})))),(n.locale||n.localLanguage)&&(I.F.locale=n.locale||n.localLanguage)}}),R=r(26768),L=Object.defineProperty,Q=Object.getOwnPropertyDescriptor,j=(e,n,r,i)=>{for(var s,o=i>1?void 0:i?Q(n,r):n,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i?s(n,r,o):s(o))||o);return i&&o&&L(n,r,o),o},V=class{constructor(){this.devTools=window.__REDUX_DEVTOOLS_EXTENSION__?.connect({name:this.getName()})}init(){this.devTools&&(this.devTools.init(this.getState()),this.devTools.subscribe(e=>{e?.payload?.type==="COMMIT"&&this.devTools.init(this.getState())}),this.onInit())}send(e,n){this.devTools&&this.devTools.send(e,n||this.getState())}};j([(0,d.kr)()],V.prototype,"init",1),V=j([(0,d._G)()],V);var z=class extends V{getName(){return"@flowgram.ai/EntityManager"}getState(){return this.entityManager.storeState({configOnly:!1})}onInit(){this.entityManager.onEntityLifeCycleChange(e=>{this.send(`${e.type}/${e.entity.type}/${e.entity.id}`)})}};j([(0,d.WQ)(h.Zy)],z.prototype,"entityManager",2),z=j([(0,d._G)()],z);var B=class extends V{constructor(){super(...arguments),this.scopes={}}getName(){return"@flowgram.ai/VariableEngine"}getState(){return{scopes:this.scopes,variables:this.variableEngine.globalVariableTable.variables}}getScopeState(e){return{ast:e?.ast.toJSON(),output:e.output.variables,available:e.available.variables}}onInit(){this.variableEngine.onScopeChange(e=>{let{scope:n,type:r}=e;"delete"===r?delete this.scopes[String(n.id)]:this.scopes={...this.scopes,[n.id]:this.getScopeState(n)},this.send(`${r}/${String(n.id)}`)})}};j([(0,d.WQ)(p.xh)],B.prototype,"variableEngine",2),B=j([(0,d._G)()],B);var F=(0,h.XY)({onBind({bind:e},n){let{enable:r}=n;r&&(e(z).toSelf().inSingletonScope(),e(B).toSelf().inSingletonScope())},onInit(e,n){let{enable:r,ecs:i=!0,variable:s=!1}=n;r&&(i&&e.get(z),s&&e.get(B))}}),Z=r(96540),q=({children:e})=>{let n=(0,h.Oj)(),r=(0,Z.useMemo)(()=>n.getData(x).public,[n]);return Z.createElement(p.Ui,{value:{scope:r}},e)},W=e=>n=>Z.createElement(q,null,Z.createElement(e,{...n})),X=(0,h.XY)({onInit(e){e.get(N.YF).registerNodeRenderHoc(W)}}),U=({children:e})=>{let n=(0,h.Oj)(),r=(0,Z.useMemo)(()=>{let e=n.getData(x);return e.private||e.initPrivate(),e.private},[n]);return Z.createElement(p.Ui,{value:{scope:r}},e)};function Y(e){let n=n=>{let r=n.getData(x);return e.private||"private"===e.scope?r.initPrivate():r.public},r=({value:r,context:i})=>{if(!i)return;let{node:s}=i,o=n(s);o.ast.set(e.namespace||"",{kind:p.zx.VariableDeclarationList,declarations:e.parse(r,{node:s,scope:o,options:e})})};return[{event:a.Po.onValueInit,effect:i=>{let{context:s}=i,o=n(s.node),a=e.onInit?.({node:s.node,scope:o,options:e});a&&o.toDispose.push(a),r(i)}},{event:a.Po.onValueChange,effect:e=>{r(e)}}]}(0,a.$7)({name:"VariableProviderPlugin",onInit:(e,n)=>{},onSetupFormMeta({mergeEffect:e}){e({arr:[{event:a.Po.onValueInitOrChange,effect:()=>{}}]})},onDispose:(e,n)=>{}});var G=(0,h.XY)({onInit(e,n){let r=e.get(u.BY);r.registerReactComponent(u.$p.NODE_RENDER,n.renderDefaultNode||(()=>null)),n.renderTexts&&r.registerText(n.renderTexts),n.components&&Object.keys(n.components).forEach(e=>r.registerReactComponent(e,n.components[e])),n.renderNodes&&Object.keys(n.renderNodes).forEach(e=>r.registerReactComponent(e,n.renderNodes[e]))}}),H=r(84808),K=r(2543),J=Object.defineProperty,ee=Object.getOwnPropertyDescriptor;function et(e){if(!e)return;let n=e?.getData(N.LO)?.getFormModel();if(n&&(0,a.Q3)(n))return n}var en=[{type:"changeFormValues",inverse:e=>({...e,value:{...e.value,value:e.value.oldValue,oldValue:e.value.value}}),apply:({value:{value:e,path:n,id:r}},i)=>{let s=et(i.get(c.mi).getNode(r));s&&(n?s.setValueIn(n,e):s.updateFormValues(e))},shouldMerge:function(e,n,r){return!!n&&!!(Date.now()-r.getTimestamp()<500)&&(e.type!==n.type||e.value?.id!==n.value?.id||e.value?.path!==n.value?.path||{type:e.type,value:{...e.value,value:e.value?.value,oldValue:n.value?.oldValue}})}}],er=class{registerOperationMeta(e){en.forEach(n=>{e.registerOperationMeta(n)})}};er=((e,n,r,i)=>{for(var s,o=i>1?void 0:i?ee(n,r):n,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i?s(n,r,o):s(o))||o);return i&&o&&J(n,r,o),o})([(0,d._G)()],er);var ei=(0,h.XY)({onBind:({bind:e})=>{(0,h.Nu)(e,er,[H.Id])},onInit:(e,n)=>{let r=e.get(c.mi),i=e.get(H.kI);r.onNodeCreate(({node:e})=>{let n=et(e);n&&n.onFormValuesChange(n=>{i.pushOperation({type:"changeFormValues",value:{id:e.id,path:n.name,value:n.name?(0,K.get)(n.values,n.name):n.values,oldValue:n.name?(0,K.get)(n.prevValues,n.name):n.prevValues}},{noApply:!0})})})},containerModules:[H.Kn]}),es=r(64428),eo=Object.defineProperty,ea=Object.getOwnPropertyDescriptor;function el(e,n=[]){return r=>{if(n=n.slice(),e.background||void 0===e.background){let r="object"==typeof e.background?e.background:{};n.push((0,es.kE)(r))}return e.shortcuts&&n.push((0,M.BP)({registerShortcuts:n=>e.shortcuts(n,r)})),e.plugins&&n.push(...e.plugins(r)),n.push((0,h.FX)({onBind:n=>{e.onBind?.(n)},onInit:n=>{let r=n.get(h.yj);e.playground&&(void 0!==e.playground.autoFocus&&(r.autoFocus=e.playground.autoFocus),void 0!==e.playground.autoResize&&(r.autoResize=e.playground.autoResize)),r.autoFocus=!1,n.playground.registerLayer(h.PR,e.playground),e.layers&&n.playground.registerLayers(...e.layers),e.onInit&&e.onInit(n)},onReady(n){e.onReady&&e.onReady(n)},onAllLayersRendered(){e.onAllLayersRendered&&e.onAllLayersRendered(r)},onDispose(){e.onDispose&&e.onDispose(r)},containerModules:e.containerModules||[]})),n}}var eh=class extends h.Wd{constructor(){super(...arguments),this.node=l.Si.createDivWithClass("gedit-playground-layer gedit-playground-content-layer")}onZoom(e){this.node.style.transform=`scale(${e})`}onReady(){this.node.style.left="0px",this.node.style.top="0px"}updateOptions(e){this.options=e,this.render()}render(){return Z.createElement("div",{className:this.options.className,style:{position:"absolute",...this.options.style}},this.options.children)}};eh.type="PlaygroundContentLayer",eh=((e,n,r,i)=>{for(var s,o=i>1?void 0:i?ea(n,r):n,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i?s(n,r,o):s(o))||o);return i&&o&&eo(n,r,o),o})([(0,d._G)()],eh),(0,Z.forwardRef)(function(e,n){let{parentContainer:r,children:i,...s}=e,o=(0,Z.useMemo)(()=>(0,h.FX)({onInit(e){e.playground.registerLayer(eh)}}),[]),a=(0,Z.useMemo)(()=>el(s,[o]),[]);return Z.createElement(h.cw,{ref:n,plugins:a,parentContainer:r},Z.createElement(h.W_,null,i))});var ec=Object.defineProperty,eu=Object.getOwnPropertyDescriptor,ed=(e,n,r,i)=>{for(var s,o=i>1?void 0:i?eu(n,r):n,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i?s(n,r,o):s(o))||o);return i&&o&&ec(n,r,o),o};(s||(s={})).DEFAULT={background:{}};var ep="flowide-highlight",ef=`
@keyframes flowide-fade {
  from {
   opacity: 1.0;
  }
  to {
    opacity: 0;
  }
}
@-webkit-keyframes flowide-fade {
  from {
   opacity: 1.0;
  }
  to {
    opacity: 0;
  }
}
.${ep} {
  background-color: rgba(238, 245, 40, 0.5);
  animation: flowide-fade 2s 1 forwards;
  -webkit-animation: flowide-fade 2s 1 forwards;
}
`,eg=class{highlightNodeFormItem(e,n){this.previousOverlay=function(e,n){let r=e.formModel.flowNodeEntity.getData(c.he).node,i=e.domRef.current;if(!i)return;let s=document.createElement("div"),{padding:o=0,overlayClassName:a}=n||{};s.style.position="absolute",s.style.top="0",s.style.left="0",s.style.width="100%",s.style.height="100%",s.style.zIndex="9999",r.appendChild(s);let l=r.getBoundingClientRect(),h=i.getBoundingClientRect();return s.style.top=h.top-l.top-o+"px",s.style.left=h.left-l.left-o+"px",s.style.width=h.width+2*o+"px",s.style.height=h.height+2*o+"px",s.className=a||ep,setTimeout(()=>{s.remove()},2e3),s}(e,n)}focusNodeFormItem(e,n){let r=e.formModel.flowNodeEntity,{canvas:i={},highlight:s}=n||{};this.previousOverlay&&(this.previousOverlay.remove(),this.previousOverlay=void 0);let o=this.playground.scrollToView({entities:[r],scrollToCenter:!0,...i}).then(()=>{e&&s&&this.currentPromise===o&&this.highlightNodeFormItem(e,"boolean"==typeof s?{}:s)});return this.currentPromise=o,this.currentPromise}};ed([(0,d.WQ)(h.QF)],eg.prototype,"playground",2),eg=ed([(0,d._G)()],eg);var em=class{};ed([(0,d.WQ)(eg)],em.prototype,"nodeFocusService",2),em=ed([(0,d._G)()],em);var ey=(0,h.XY)({onInit(){o||((o=document.createElement("style")).innerHTML=ef,document.head.appendChild(o))},onDispose(){o?.remove(),o=void 0}}),eO=(0,h.XY)({onBind({bind:e}){e(eg).toSelf().inSingletonScope(),e(em).toSelf().inSingletonScope()}}),ev=class{focusNodeFormItem(e,n){this.nodeClient.nodeFocusService.focusNodeFormItem(e,n)}focusNode(e,n){this.playground.scrollToView({entities:[e],...n})}};ed([(0,d.WQ)(em)],ev.prototype,"nodeClient",2),ed([(0,d.WQ)(h.QF)],ev.prototype,"playground",2),ev=ed([(0,d._G)()],ev);var eb=(0,h.XY)({onBind({bind:e}){e(ev).toSelf().inSingletonScope()}});function ex(e,n=[]){return r=>{(e={...s.DEFAULT,...e}).i18n&&n.push($(e.i18n)),n.push(ey({}),eO({}),eb({})),e.reduxDevTool?.enable&&n.push(F(e.reduxDevTool));let i=[c.pj,u.tk];return n.push(G(e.materials||{})),e.nodeEngine&&!1!==e.nodeEngine.enable&&(n.push(D({materials:e.nodeEngine.materials})),e.variableEngine?.enable&&n.push(X({})),e.history?.enable&&n.push(ei({}))),n.push((0,h.FX)({onInit:n=>{e.nodeRegistries&&n.document.registerFlowNodes(...e.nodeRegistries),e.constants&&(n.document.options.constants=e.constants),e.getNodeDefaultRegistry&&(n.document.options.getNodeDefaultRegistry=e.getNodeDefaultRegistry),n.get(u.BY).init()},onReady(n){e.initialData&&n.document.fromJSON(e.initialData),e.readonly&&(n.playground.config.readonly=e.readonly),n.document.load().then(()=>{e.onLoad&&e.onLoad(n)})},onDispose(e){e.document.dispose()},containerModules:i})),n}}},28602:function(e,n,r){"use strict";r.d(n,{A:()=>z,By:()=>w,Fl:()=>K,G5:()=>Q,LO:()=>B,SO:()=>I,Uc:()=>G,Uy:()=>f,W2:()=>R,YF:()=>p,b7:()=>H,hd:()=>P,mO:()=>A,n9:()=>X,wp:()=>V,x0:()=>Y});var i=r(11812),s=r(2543),o=r(67055),a=r(81376),l=r(96540),h=Object.defineProperty,c=Object.getOwnPropertyDescriptor,u=(e,n,r,i)=>{for(var s,o=i>1?void 0:i?c(n,r):n,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i?s(n,r,o):s(o))||o);return i&&o&&h(n,r,o),o},d=Symbol("NodeContribution"),p=class{constructor(){this.materialRenderRegistry=new Map,this.pluginRenderRegistry=new Map,this.nodeRenderHocs=[],this.nodeContributions=[]}registerMaterialRender(e,n){this.materialRenderRegistry.set(e,n)}getMaterialRender(e){return this.materialRenderRegistry.get(e)}registerPluginRender(e,n){this.pluginRenderRegistry.set(e,n)}getPluginRender(e){return this.pluginRenderRegistry.get(e)}registerNodeErrorRender(e){this.registerMaterialRender("Material_CustomNodeError",e)}get nodeRenderHoc(){return(0,s.flow)(this.nodeRenderHocs)}registerNodeRenderHoc(e){this.nodeRenderHocs.push(e)}get nodeErrorRender(){return this.materialRenderRegistry.get("Material_CustomNodeError")}init(){this.nodeContributions.forEach(e=>e.onRegister?.(this))}};u([(0,i.tt)(d),(0,i.lq)()],p.prototype,"nodeContributions",2),u([(0,i.kr)()],p.prototype,"init",1),p=u([(0,i._G)()],p);var f=class{constructor(){this.onChangeEmitter=new o.vl,this.onChange=this.onChangeEmitter.event,this._readonly=f.DEFAULT_READONLY,this._json=f.DEFAULT_JSON}get json(){return this._json}get readonly(){return this._readonly}set readonly(e){this._readonly=e,this.fireChange()}fireChange(){this.updateJSON(),this.onChangeEmitter.fire(this)}updateJSON(){this._json={readonly:this._readonly}}};f.DEFAULT_READONLY=!1,f.DEFAULT_JSON={readonly:f.DEFAULT_READONLY},f=u([(0,i._G)()],f);var g=class{};u([(0,i.WQ)(p)],g.prototype,"nodeManager",2),u([(0,i.WQ)(f)],g.prototype,"context",2),g=u([(0,i._G)()],g);var m=new i.i0((e,n,r,i)=>{e(g).toSelf().inSingletonScope(),e(p).toSelf().inSingletonScope(),e(f).toSelf().inSingletonScope()}),y="Plugin_Form",O="Plugin_Error",b="node_error_render",x="node_placeholder_render",w=class extends a.oW{getDefaultData(){return{error:null}}setError(e){this.update({error:e})}getError(){return this.data.error}};w.type="FlowNodeErrorData";var S={color:"#f54a45"},_=({node:e,playgroundContext:n,clientContext:r})=>{let i=(0,a.b6)(),s=e.getData(w),o=s.getError(),h=(0,a.h1)(p).getMaterialRender(b),c=(0,l.useCallback)(()=>h?h({error:o,context:{node:e,playgroundContext:n,clientContext:r}}):(({error:e})=>l.createElement("div",{style:S},e.message))({error:o,context:{node:e,playgroundContext:n,clientContext:r}}),[o,e,n,r]);return(0,l.useEffect)(()=>{let e=s.onDataChange(()=>{i()});return()=>{e.dispose()}},[]),o?c():null},k=e=>l.createElement(_,{...e}),C=class{onRegister(e){e.registerPluginRender(O,k)}};C=u([(0,i._G)()],C);var E=new i.i0(e=>{(0,o.Nu)(e,C,[d])}),T=class{makeFormItemMaterialContext(e,n){return{meta:e.meta,path:e.path,readonly:this.nodeEngineContext.readonly,getFormItemValueByPath:e.formModel.getFormItemValueByPath.bind(e.formModel),onFormValidate:e.formModel.onValidate.bind(e.formModel),form:e.formModel,node:e.formModel.flowNodeEntity,playgroundContext:this.playgroundContext,index:n?.getIndex()}}};u([(0,i.WQ)(f)],T.prototype,"nodeEngineContext",2),u([(0,a.y)()],T.prototype,"playgroundContext",2),T=u([(0,i._G)()],T);var P=class{static normalize(e){return e===P.ROOT||e.endsWith(P.DIVIDER)&&(e=e.slice(0,-1)),e}static join(e){if(e[1].startsWith(P.ROOT))throw Error(`FormPathService Error: join failed, invalid paths[1], paths[1]= ${e[1]}`);return e[0].endsWith(P.DIVIDER)?`${e[0]}${e[1]}`:e.join(P.DIVIDER)}static toArrayPath(e){return P.join([e,P.ARRAY])}static parseArrayItemPath(e){let n=e.split("/"),r=0;for(;r<n.length;){let e=parseInt(n[r]);if(!isNaN(e)){let i=P.toArrayPath(n.slice(0,r).join(P.DIVIDER)),s=n.slice(r+1).join(P.DIVIDER),o=P.join([i,s]);return{itemIndex:e,arrayPath:i,itemMetaPath:o}}r+=1}return null}simplify(e){let n=e.split(P.DIVIDER),r=[];for(let e=0;e<n.length;e++){if(!n[e])throw Error("FormPathService: join failed");n[e]!==P.RELATIVE_CURRENT&&(n[e]===P.RELATIVE_PARENT&&r.pop(),r.push(n[e]))}return r.join(P.DIVIDER)}};P.ROOT="/",P.DIVIDER="/",P.RELATIVE_PARENT="..",P.RELATIVE_CURRENT=".",P.ARRAY="[]",P=u([(0,i._G)()],P),Symbol("FormModelFactory"),Symbol("FormModelEntity");var A=class{constructor(){this.toDispose=new o.Vd}};A=u([(0,i._G)()],A);var M=class{constructor(){this.registry=new Map}register(e){this.registry.set(e.key,e)}get(e){return this.registry.get(e)}get objectMap(){return Object.fromEntries(this.registry)}get collection(){return Array.from(this.registry.values())}};M=u([(0,i._G)()],M);var N=Symbol("FormContribution"),D=class e{get type(){return e.type}};D.type="setter";var I=D,$=class e{get type(){return e.type}};$.type="decorator";var R=$;var L=class e{get type(){return e.type}};L.type="effect";var Q=L;var j=class e{get type(){return e.type}};j.type="validation";var V=j,z=class{constructor(){this.abilityRegistry=new Map,this.setterHocs=[],this.extensionRegistryMap=new Map,this.formContributions=[],this.onFormModelWillInitEmitter=new o.vl,this.onFormModelWillInit=this.onFormModelWillInitEmitter.event}get components(){return(0,s.mapValues)(this.extensionRegistryMap.get(I.type)?.objectMap||{},e=>e.component)}get decorators(){return(0,s.mapValues)(this.extensionRegistryMap.get(R.type)?.objectMap||{},e=>e.component)}registerAbilityExtension(e,n){this.extensionRegistryMap.get(e)||this.extensionRegistryMap.set(e,new M);let r=this.extensionRegistryMap.get(e);r&&r.register(n)}getAbilityExtension(e,n){return this.extensionRegistryMap.get(e)?.get(n)}registerAbility(e){let n=new e;this.abilityRegistry.set(n.type,n)}registerAbilities(e){e.forEach(this.registerAbility.bind(this))}getAbility(e){return this.abilityRegistry.get(e)}registerSetterHoc(e){this.setterHocs.push(e)}fireFormModelWillInit(e,n){this.onFormModelWillInitEmitter.fire({model:e,data:n})}dispose(){this.onFormModelWillInitEmitter.dispose()}init(){this.formContributions.forEach(e=>e.onRegister?.(this))}};u([(0,i.WQ)(P)],z.prototype,"pathManager",2),u([(0,i.WQ)(T)],z.prototype,"formContextMaker",2),u([(0,a.y)()],z.prototype,"playgroundContext",2),u([(0,i.tt)(N),(0,i.lq)()],z.prototype,"formContributions",2),u([(0,i.kr)()],z.prototype,"init",1),z=u([(0,i._G)()],z);var B=class extends a.oW{constructor(e,n){super(e),this.onDetailChangeEmitter=new o.vl,this.onDetailChange=this.onDetailChangeEmitter.event,this.flowNodeEntity=e,this.formModel=n.formModelFactory(e),this.toDispose.push(this.onDetailChangeEmitter),this.toDispose.push(o.jG.create(()=>{this.formModel.dispose()}))}getFormModel(){return this.formModel}getDefaultData(){return{}}createForm(e,n){let r=this.flowNodeEntity.getData(w);r.setError(null);try{this.formModel.init(e,n)}catch(e){r.setError(e)}}updateFormValues(e){this.formModel.updateFormValues(e)}recreateForm(e,n){this.createForm(e,n)}toJSON(){return this.formModel.toJSON()}dispose(){super.dispose()}fireDetaiChange(e){this.onDetailChangeEmitter.fire(e)}};function F({node:e}){let n=(0,o.b6)(),r=e.getData(B)?.getFormModel();return(0,l.useEffect)(()=>{let e=r?.onInitialized(()=>{n()});return()=>{e.dispose()}},[r]),r?.initialized?r.render():null}B.type="FlowNodeEntityFormData";var Z=e=>l.createElement(F,{...e}),q=class{onRegister(e){e.registerPluginRender(y,Z)}};q=u([(0,i._G)()],q);var W=new i.i0(e=>{e(z).toSelf().inSingletonScope(),e(P).toSelf().inSingletonScope(),e(T).toSelf().inSingletonScope(),(0,o.Nu)(e,q,[d])});function X(){return[m,W,E]}var U=l.createContext(f.DEFAULT_JSON),Y=(0,l.memo)(({node:e})=>{let n=(0,a.b6)(),r=e.getData(w),i=e.getData(B).formModel,s=!!e.getData(w).getError(),o=e.getData(B).getFormModel().initialized,h=(0,a.h1)(a.JF),c=(0,a.h1)(a.bf),u=(0,a.h1)(p),d=u.getPluginRender(y),g=u.getPluginRender(O),m=u.getMaterialRender(x),b=function(){let e=(0,a.b6)(),n=(0,a.h1)(f);return(0,l.useEffect)(()=>{let r=n.onChange(()=>{e()});return()=>{r.dispose()}},[]),n}();(0,l.useEffect)(()=>{let e=r.onDataChange(()=>{n()}),s=i.onInitialized(()=>{n()});return()=>{e.dispose(),s.dispose()}},[]);let S=(0,l.useCallback)(()=>s?g({node:e,playgroundContext:h,clientContext:c}):i.formMeta?o?d({node:e,playgroundContext:h,clientContext:c}):m?.({node:e,playgroundContext:h})||null:null,[s,o,g,d,m,e,h]);return l.createElement(U.Provider,{value:b.json},u.nodeRenderHoc(S)())});function G(e,n){e.registerMaterialRender(b,n)}function H(e,n){e.registerMaterialRender(x,n)}function K(){return[B,w]}},22805:function(e,n,r){"use strict";let i,s,o,a,l,h,c,u,d;r.d(n,{xI:()=>NI,BY:()=>AK,Sf:()=>Nf,X6:()=>MJ,y1:()=>MY,S9:()=>NA,yc:()=>A5,LC:()=>NQ,Nm:()=>NE,Nh:()=>N$,lA:()=>MA,_H:()=>MD,zJ:()=>Nq,lc:()=>Mj,q8:()=>Nj,cy:()=>Nk,Xt:()=>d8,$d:()=>NZ,HY:()=>Nu,Id:()=>NW,Kq:()=>NV,Jt:()=>Nn,Q3:()=>NR,OS:()=>Nz,w4:()=>NF});var p,f,g,m,y,O,b,x,w,S,_,k,C,E,T,P,A,M,N,D,I,$,R,L,Q,j,V,z,B,F,Z,q,W,X,U,Y,G,H,K,J,ee,et,en,er,ei,es,eo,ea,el,eh,ec,eu,ed,ep,ef,eg,em,ey,eO,ev,eb,ex,ew,eS,e_,ek,eC,eE,eT,eP,eA,eM,eN,eD,eI,e$,eR,eL,eQ,ej,eV,ez,eB,eF,eZ,eq,eW,eX,eU,eY,eG,eH,eK,eJ,e0,e1,e2,e5,e4,e3,e6,e9,e7,e8,te,tt,tn,tr,ti,ts,to,ta,tl,th,tc,tu,td,tp,tf,tg,tm,ty,tO,tv,tb,tx,tw,tS,t_,tk,tC,tE,tT,tP,tA,tM,tN,tD,tI,t$,tR,tL,tQ,tj,tV,tz,tB,tF,tZ,tq,tW,tX,tU,tY,tG,tH,tK,tJ,t0,t1,t2,t5,t4,t3,t6,t9,t7,t8,ne,nt,nn,nr,ni,ns,no,na={};r.r(na),r.d(na,{boolean:()=>wD,booleanish:()=>wI,commaOrSpaceSeparated:()=>wj,commaSeparated:()=>wQ,number:()=>wR,overloadedBoolean:()=>w$,spaceSeparated:()=>wL});var nl=r(96540),nh=r(58639),nc=r(12156),nu=r(41393);let nd=(0,nu.T)(function(e){return nl.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),nl.createElement("g",{clipPath:"url(#clip0_1477_35)"},nl.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.13 4.13a11.1 11.1 0 0 1 15.74 0 11.1 11.1 0 0 1 0 15.74 11.1 11.1 0 0 1-15.74 0 11.1 11.1 0 0 1 0-15.74Zm1.6 1.6a8.84 8.84 0 0 1 12.55 0 8.84 8.84 0 0 1 0 12.55 8.84 8.84 0 0 1-12.56 0 8.84 8.84 0 0 1 0-12.56Z",fill:"currentColor"}),nl.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 18.5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5Z",fill:"currentColor"}),nl.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 4.88c.62 0 1.13.5 1.13 1.12v8a1.13 1.13 0 0 1-2.26 0V6c0-.62.5-1.13 1.13-1.13Z",fill:"currentColor"})),nl.createElement("defs",null,nl.createElement("clipPath",{id:"clip0_1477_35"},nl.createElement("rect",{width:24,height:24,fill:"currentColor"}))))},"issue_stroked"),np=(0,nu.T)(function(e){return nl.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),nl.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.08 8.15c.47-.5 1.26-.54 1.77-.07L12 13.8l6.15-5.7a1.25 1.25 0 0 1 1.7 1.83l-7 6.5c-.48.44-1.22.44-1.7 0l-7-6.5a1.25 1.25 0 0 1-.07-1.77Z",fill:"currentColor"}))},"chevron_down_stroked");var nf=r(2543),ng=r(11812),nm=r(67055),ny=r(42225),nO=r(81376),nv=Object.defineProperty,nb=Object.getOwnPropertyDescriptor,nx=(e,n,r,i)=>{for(var s,o=i>1?void 0:i?nb(n,r):n,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i?s(n,r,o):s(o))||o);return i&&o&&nv(n,r,o),o},nw=class{constructor(){this.typeRegistryMap=new Map,this.onTypeRegistryChangeEmitter=new nm.vl,this.onTypeRegistryChange=this.onTypeRegistryChangeEmitter.event}getTypeByName(e){return this.typeRegistryMap.get(e)}getTypeBySchema(e){let n=this.getTypeNameFromSchema(e);return this.typeRegistryMap.get(n)}getDefaultTypeRegistry(){return this.typeRegistryMap.get("default")}register(e){let n="function"==typeof e?e({typeManager:this}):e,r=n.type;if(!r)return;let i=this.getTypeByName(r),s=n.extend?this.getTypeByName(n.extend):this.getDefaultTypeRegistry();i?this.typeRegistryMap.set(r,{...s,...i,...n}):this.typeRegistryMap.set(r,{...s,...n})}triggerChanges(){this.onTypeRegistryChangeEmitter.fire(Array.from(this.typeRegistryMap.values()))}getAllTypeRegistries(){return Array.from(this.typeRegistryMap.values())}unregister(e){this.typeRegistryMap.delete(e)}};nw=nx([(0,ng._G)()],nw);var nS=({typeManager:e})=>({type:"default",label:"",icon:nl.createElement(nl.Fragment,null),container:!1,getJsonPaths:()=>[],getDisplayIcon:n=>e.getTypeBySchema(n)?.icon||nl.createElement(nl.Fragment,null),getPropertiesParent:()=>void 0,canAddField:()=>!1,getDefaultValue:()=>void 0,getValueText:()=>"",getStringValueByTypeSchema:e=>e.type,getTypeSchemaProperties:()=>void 0,getDisplayLabel:n=>nl.createElement("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",gap:8}},e.getTypeBySchema(n)?.label,nl.createElement("span",{style:{fontSize:12,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},e.getComplexText(n))),getDisplayText:n=>e.getComplexText(n)}),n_=()=>({type:"string",label:"String",icon:nl.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nl.createElement("path",{d:"M9.3342 3.33321C8.96601 3.33321 8.66753 3.63169 8.66753 3.99988C8.66753 4.36807 8.96601 4.66655 9.3342 4.66655H14.6675C15.0357 4.66655 15.3342 4.36807 15.3342 3.99988C15.3342 3.63169 15.0357 3.33321 14.6675 3.33321H9.3342Z",fill:"currentColor"}),nl.createElement("path",{d:"M10.0009 7.99988C10.0009 7.63169 10.2993 7.33321 10.6675 7.33321H14.6675C15.0357 7.33321 15.3342 7.63169 15.3342 7.99988C15.3342 8.36807 15.0357 8.66655 14.6675 8.66655H10.6675C10.2993 8.66655 10.0009 8.36807 10.0009 7.99988Z",fill:"currentColor"}),nl.createElement("path",{d:"M12.0009 11.3332C11.6327 11.3332 11.3342 11.6317 11.3342 11.9999C11.3342 12.3681 11.6327 12.6665 12.0009 12.6665H14.6675C15.0357 12.6665 15.3342 12.3681 15.3342 11.9999C15.3342 11.6317 15.0357 11.3332 14.6675 11.3332H12.0009Z",fill:"currentColor"}),nl.createElement("path",{d:"M9.86659 14.1482L8.23444 10.1844H3.18136C3.13868 10.1844 3.09685 10.1808 3.05616 10.1738L1.66589 14.1129C1.53049 14.4965 1.10971 14.6978 0.726058 14.5624C0.342408 14.427 0.141166 14.0062 0.276572 13.6225L4.37566 2.00848C4.71323 1.05202 6.05321 1.01763 6.4394 1.95552L11.2289 13.5872C11.3838 13.9634 11.2044 14.394 10.8282 14.5489C10.452 14.7038 10.0215 14.5244 9.86659 14.1482ZM5.44412 3.40791L3.57241 8.71109H7.62778L5.44412 3.40791Z",fill:"currentColor"})),getDefaultSchema:()=>({type:"string"}),getValueText:e=>e?`${e}`:"",getDefaultValue:()=>""}),nk=()=>({type:"object",label:"Object",icon:nl.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nl.createElement("path",{d:"M5.33893 1.5835C5.66613 1.5835 5.93137 1.88142 5.93137 2.20862C5.93137 2.53582 5.66613 2.76838 5.33893 2.76838H4.9099C4.34717 2.76838 4.08062 3.07557 4.08062 3.71921V6.58633C4.08062 7.30996 3.80723 7.84734 3.26798 8.19105C3.11426 8.28902 3.10884 8.55273 3.26068 8.65359C3.80476 9.01503 4.08062 9.53994 4.08062 10.2434V13.1251C4.08062 13.7395 4.34717 14.0613 4.9099 14.0613H5.33893C5.66613 14.0613 5.93137 14.3435 5.93137 14.6707C5.93137 14.9979 5.66613 15.2462 5.33893 15.2462H4.64335C3.99177 15.2462 3.48828 15.0268 3.13287 14.6172C2.80708 14.2369 2.64419 13.7103 2.64419 13.0666V10.3165C2.64419 9.8923 2.55534 9.58511 2.37764 9.39494C2.26816 9.27135 1.80618 9.17938 1.38154 9.11602C1.02726 9.06315 0.759057 8.76744 0.765747 8.4093C0.772379 8.0543 1.03439 7.7566 1.38545 7.70346C1.80778 7.63952 2.26906 7.54968 2.37764 7.43477C2.55534 7.22997 2.64419 6.92278 2.64419 6.51319V3.77772C2.64419 3.11945 2.80708 2.59284 3.13287 2.21251C3.48828 1.78829 3.99177 1.5835 4.64335 1.5835H5.33893Z",fill:"currentColor"}),nl.createElement("path",{d:"M10.962 15.2463C10.6348 15.2463 10.3696 14.9483 10.3696 14.6211C10.3696 14.2939 10.6348 14.0614 10.962 14.0614H11.391C11.9538 14.0614 12.2203 13.7542 12.2203 13.1105V10.2434C12.2203 9.51979 12.4937 8.98241 13.033 8.6387C13.1867 8.54073 13.1921 8.27703 13.0403 8.17616C12.4962 7.81472 12.2203 7.28982 12.2203 6.58638V3.70463C12.2203 3.09024 11.9538 2.76842 11.391 2.76842L10.962 2.76842C10.6348 2.76842 10.3696 2.48627 10.3696 2.15907C10.3696 1.83188 10.6348 1.58354 10.962 1.58354L11.6576 1.58354C12.3092 1.58354 12.8127 1.80296 13.1681 2.21255C13.4939 2.59289 13.6568 3.1195 13.6568 3.76314V6.51324C13.6568 6.93745 13.7456 7.24464 13.9233 7.43481C14.03 7.5553 14.4328 7.64858 14.8186 7.71393C15.1718 7.77376 15.4401 8.06977 15.4334 8.42791C15.4268 8.78291 15.1646 9.08018 14.814 9.13633C14.4306 9.19774 14.0291 9.28303 13.9233 9.39499C13.7456 9.59978 13.6568 9.90697 13.6568 10.3166V13.052C13.6568 13.7103 13.4939 14.2369 13.1681 14.6172C12.8127 15.0415 12.3092 15.2463 11.6576 15.2463H10.962Z",fill:"currentColor"})),getTypeSchemaProperties:e=>e.properties||{},getPropertiesParent:e=>e,canAddField:()=>!0,getDefaultSchema:()=>({type:"object",required:[],properties:{}}),getIJsonSchemaPropertiesParent:e=>e,getValueText:()=>"",getJsonPaths:()=>["properties"],getDefaultValue:()=>({})}),nC=()=>({type:"number",label:"Number",extend:"integer",icon:nl.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nl.createElement("path",{d:"M3.44151 5.3068C3.44151 3.83404 4.71542 2.64014 6.18818 2.64014C7.66094 2.64014 8.93484 3.83404 8.93484 5.3068V10.6135C8.93484 12.0862 7.66094 13.2801 6.18818 13.2801C4.71542 13.2801 3.44151 12.0862 3.44151 10.6135V5.3068ZM7.60151 5.3068C7.60151 4.57042 6.92456 3.97347 6.18818 3.97347C5.4518 3.97347 4.77484 4.57042 4.77484 5.3068V10.6135C4.77484 11.3498 5.4518 11.9468 6.18818 11.9468C6.92456 11.9468 7.60151 11.3498 7.60151 10.6135V5.3068Z",fill:"currentColor"}),nl.createElement("path",{d:"M12.9882 2.64014C11.5154 2.64014 10.2415 3.83404 10.2415 5.3068V10.6135C10.2415 12.0862 11.5154 13.2801 12.9882 13.2801C14.4609 13.2801 15.7348 12.0862 15.7348 10.6135V5.3068C15.7348 3.83404 14.4609 2.64014 12.9882 2.64014ZM14.4015 10.6135C14.4015 11.3498 13.7246 11.9468 12.9882 11.9468C12.2518 11.9468 11.5748 11.3498 11.5748 10.6135V5.3068C11.5748 4.57042 12.2518 3.97347 12.9882 3.97347C13.7246 3.97347 14.4015 4.57042 14.4015 5.3068V10.6135Z",fill:"currentColor"}),nl.createElement("path",{d:"M1.21484 13.2001C1.76713 13.2001 2.21484 12.7524 2.21484 12.2001C2.21484 11.6479 1.76713 11.2001 1.21484 11.2001C0.662559 11.2001 0.214844 11.6479 0.214844 12.2001C0.214844 12.7524 0.662559 13.2001 1.21484 13.2001Z",fill:"currentColor"})),getValueText:e=>e?`${e}`:"",getDefaultSchema:()=>({type:"number"})}),nE=()=>({type:"boolean",label:"Boolean",icon:nl.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nl.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.668 4.66683H5.33463C3.49369 4.66683 2.0013 6.15921 2.0013 8.00016C2.0013 9.84111 3.49369 11.3335 5.33463 11.3335H10.668C12.5089 11.3335 14.0013 9.84111 14.0013 8.00016C14.0013 6.15921 12.5089 4.66683 10.668 4.66683ZM5.33463 3.3335C2.75731 3.3335 0.667969 5.42283 0.667969 8.00016C0.667969 10.5775 2.75731 12.6668 5.33463 12.6668H10.668C13.2453 12.6668 15.3346 10.5775 15.3346 8.00016C15.3346 5.42283 13.2453 3.3335 10.668 3.3335H5.33463Z",fill:"currentColor"}),nl.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.66797 8.00016C8.66797 6.89559 9.5634 6.00016 10.668 6.00016C11.7725 6.00016 12.668 6.89559 12.668 8.00016C12.668 9.10473 11.7725 10.0002 10.668 10.0002C9.5634 10.0002 8.66797 9.10473 8.66797 8.00016ZM10.668 7.3335C10.2998 7.3335 10.0013 7.63197 10.0013 8.00016C10.0013 8.36835 10.2998 8.66683 10.668 8.66683C11.0362 8.66683 11.3346 8.36835 11.3346 8.00016C11.3346 7.63197 11.0362 7.3335 10.668 7.3335Z",fill:"currentColor"})),getDefaultSchema:()=>({type:"boolean"}),getValueText:e=>void 0===e?"":e?"True":"False",getDefaultValue:()=>!1}),nT=({typeManager:e})=>{let n=nl.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nl.createElement("path",{d:"M5.23759 1.00342H2.00391V14.997H5.23759V13.6251H3.35127V2.37534H5.23759V1.00342Z",fill:"currentColor"}),nl.createElement("path",{d:"M10.7624 1.00342H13.9961V14.997H10.7624V13.6251H12.6487V2.37534H10.7624V1.00342Z",fill:"currentColor"})),r=i=>{let s=i.items,o=e.getTypeBySchema(s);switch(o?.type){case"object":return nl.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nl.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 1.58105H3.6139V2.87326H1.36702V13.1264H3.6139V14.4186H0V1.58105ZM3.41656 13.3264V13.3266H1.17155V13.3264H3.41656ZM0.197344 14.2186H0.199219V1.78125H3.41656V1.78105H0.197344V14.2186ZM12.3861 1.58105H16V14.4186H12.3861V13.1264H14.633V2.87326H12.3861V1.58105ZM12.5834 2.67326V1.78105H15.8027V1.78125H12.5853V2.67326H12.5834ZM12.5853 13.3266V14.2186H12.5834V13.3264H14.8303V2.67345H14.8322V13.3266H12.5853ZM3.82031 5.9091C3.82031 5.18535 4.40703 4.59863 5.13078 4.59863C5.85453 4.59863 6.44124 5.18535 6.44124 5.9091C6.44124 6.56485 5.9596 7.1081 5.33078 7.2044V8.70018H5.32877C5.32982 8.75093 5.33078 8.80912 5.33078 8.87034V9.72111C5.33078 10.0195 5.57268 10.2614 5.87109 10.2614H6.24124C6.55613 10.2614 6.8114 10.5167 6.8114 10.8316C6.8114 11.1465 6.55613 11.4017 6.24124 11.4017H5.87109C4.94291 11.4017 4.19047 10.6493 4.19047 9.72111V6.82186C3.96158 6.58607 3.82031 6.26397 3.82031 5.9091ZM7.33679 5.9091C7.33679 5.59421 7.59205 5.33894 7.90694 5.33894H11.6085C11.9234 5.33894 12.1786 5.59421 12.1786 5.9091C12.1786 6.22399 11.9234 6.47925 11.6085 6.47925H7.90694C7.59205 6.47925 7.33679 6.22399 7.33679 5.9091ZM7.33679 9.86846C7.33679 9.55357 7.59205 9.2983 7.90694 9.2983H11.6085C11.9234 9.2983 12.1786 9.55357 12.1786 9.86846C12.1786 10.1833 11.9234 10.4386 11.6085 10.4386H7.90694C7.59205 10.4386 7.33679 10.1833 7.33679 9.86846Z",fill:"currentColor"}));case"string":return nl.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nl.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 1.58105H3.6139V2.87326H1.36702V13.1264H3.6139V14.4186H0V1.58105ZM3.41656 13.3264V13.3266H1.17155V13.3264H3.41656ZM0.197344 14.2186H0.199219V1.78125H3.41656V1.78105H0.197344V14.2186ZM12.3861 1.58105H16V14.4186H12.3861V13.1264H14.633V2.87326H12.3861V1.58105ZM12.5834 2.67326V1.78105H15.8027V1.78125H12.5853V2.67326H12.5834ZM12.5853 13.3266V14.2186H12.5834V13.3264H14.8303V2.67345H14.8322V13.3266H12.5853ZM5.23701 4.07158C5.50364 3.3161 6.56205 3.28894 6.86709 4.02974L10 11.6383C10.1329 11.9609 9.979 12.3302 9.65631 12.4631C9.33363 12.596 8.96434 12.4421 8.83147 12.1194L7.8021 9.61951H4.61903L3.7474 12.0891C3.63126 12.4182 3.27034 12.5908 2.94127 12.4747C2.6122 12.3585 2.43958 11.9976 2.55573 11.6685L5.23701 4.07158ZM6.08814 5.45704L5.06505 8.35579H7.28174L6.08814 5.45704ZM8.81938 6.07534C8.81938 5.75166 9.08177 5.48926 9.40545 5.48926H12.8941C13.2178 5.48926 13.4802 5.75166 13.4802 6.07534C13.4802 6.39902 13.2178 6.66142 12.8941 6.66142H9.40545C9.08177 6.66142 8.81938 6.39902 8.81938 6.07534ZM10.2668 9.69181C10.2668 9.36812 10.5292 9.10573 10.8529 9.10573H12.8941C13.2178 9.10573 13.4802 9.36812 13.4802 9.69181C13.4802 10.0155 13.2178 10.2779 12.8941 10.2779H10.8529C10.5292 10.2779 10.2668 10.0155 10.2668 9.69181Z",fill:"currentColor"}));case"enum":return nl.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nl.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.6139 1.58105H0V14.4186H3.6139V13.1264H1.36702V2.87326H3.6139V1.58105ZM3.41656 13.3266V13.3264H1.16987V13.3266H3.41656ZM0.197537 14.2186H0.197344V1.78105H3.41656V1.78125H0.197537V14.2186ZM16 1.58105H12.3861V2.87326H14.633V13.1264H12.3861V14.4186H16V1.58105ZM12.5834 1.78105V2.67326H12.5836V1.78125H15.8027V1.78105H12.5834ZM12.5836 14.2186V13.3266H14.8305V2.67345H14.8303V13.3264H12.5834V14.2186H12.5836Z",fill:"currentColor"}),nl.createElement("path",{d:"M6.01442 7.34421C5.89401 7.46462 5.89401 7.65985 6.01442 7.78026L7.78218 9.54802C7.9026 9.66844 8.09782 9.66844 8.21823 9.54802L9.986 7.78026C10.1064 7.65985 10.1064 7.46462 9.986 7.34421L9.69137 7.04958C9.57096 6.92917 9.37573 6.92917 9.25532 7.04958L8.00021 8.3047L6.74509 7.04958C6.62468 6.92917 6.42946 6.92917 6.30904 7.04958L6.01442 7.34421ZM3.31699 7.99984C3.31699 10.5864 5.41379 12.6832 8.00033 12.6832C10.5869 12.6832 12.6837 10.5864 12.6837 7.99984C12.6837 5.4133 10.5869 3.3165 8.00033 3.3165C5.41379 3.3165 3.31699 5.4133 3.31699 7.99984ZM11.6503 7.99984C11.6503 10.0157 10.0162 11.6498 8.00033 11.6498C5.98449 11.6498 4.35033 10.0157 4.35033 7.99984C4.35033 5.984 5.98449 4.34984 8.00033 4.34984C10.0162 4.34984 11.6503 5.984 11.6503 7.99984Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"0.2"}));case"integer":return nl.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nl.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 1.58105H3.6139V2.87326H1.36702V13.1264H3.6139V14.4186H0V1.58105ZM3.41656 13.3264V13.3266H1.17155V13.3264H3.41656ZM0.197344 14.2186H0.199219V1.78125H3.41656V1.78105H0.197344V14.2186ZM12.3861 1.58105H16V14.4186H12.3861V13.1264H14.633V2.87326H12.3861V1.58105ZM12.5834 2.67326V1.78105H15.8027V1.78125H12.5853V2.67326H12.5834ZM12.5853 13.3266V14.2186H12.5834V13.3264H14.8303V2.67345H14.8322V13.3266H12.5853ZM10.3614 5.22374C10.7161 4.90585 11.1581 4.75 11.6762 4.75C12.2173 4.75 12.6723 4.91467 13.0281 5.25207L13.0291 5.253C13.3852 5.59688 13.561 6.03946 13.561 6.56767C13.561 6.89 13.4945 7.17448 13.3539 7.41445C13.2572 7.57972 13.1279 7.71948 12.9685 7.83428C13.1575 7.95643 13.3099 8.11182 13.4225 8.30109C13.5793 8.5644 13.6531 8.88311 13.6531 9.24936C13.6531 9.83787 13.4612 10.3151 13.0656 10.6612C12.6982 10.9795 12.2305 11.1341 11.6762 11.1341C11.1356 11.1341 10.6805 10.9925 10.324 10.6977C9.92124 10.3691 9.71723 9.90026 9.69942 9.31256L9.69473 9.15802H10.846L10.8539 9.2997C10.8689 9.5698 10.9591 9.75553 11.1096 9.87941L11.1106 9.88027C11.2519 9.99882 11.4365 10.0631 11.6762 10.0631C11.9765 10.0631 12.1743 9.98692 12.2984 9.86071C12.4229 9.73404 12.4984 9.53136 12.4984 9.22422C12.4984 8.92116 12.4215 8.72127 12.2939 8.59581C12.1658 8.46989 11.961 8.39373 11.6511 8.39373H11.3586V7.34788H11.6511C11.9297 7.34788 12.111 7.27834 12.2238 7.16555C12.3366 7.05276 12.4062 6.87138 12.4062 6.59281C12.4062 6.30696 12.3378 6.12041 12.2277 6.00501C12.1188 5.89092 11.9446 5.82098 11.6762 5.82098C11.4248 5.82098 11.2539 5.88537 11.1407 5.99325C11.0268 6.10185 10.9497 6.27522 10.9291 6.5375L10.9183 6.67577H9.76788L9.77492 6.51904C9.79886 5.98644 9.99237 5.54989 10.3614 5.22374ZM5.91032 5.26037C6.26612 4.92297 6.72112 4.7583 7.26219 4.7583C7.80751 4.7583 8.26297 4.91938 8.61401 5.25194L8.61501 5.25289C8.96719 5.59272 9.13852 6.04185 9.13852 6.58435C9.13852 6.84997 9.08709 7.09565 8.9817 7.31883L8.98114 7.31999C8.89563 7.49712 8.74775 7.71415 8.54418 7.96862L8.54322 7.96981L6.87446 10.0127H9.13852V11.0753H5.36909V10.1089L7.69946 7.27679C7.89456 7.04062 7.98374 6.80773 7.98374 6.57597C7.98374 6.29602 7.91626 6.11385 7.8078 6.00122C7.70036 5.88964 7.52811 5.8209 7.26219 5.8209C7.04017 5.8209 6.87439 5.88173 6.75075 5.99193C6.61227 6.11766 6.53226 6.30918 6.53226 6.59273V6.74273H5.37747V6.59273C5.37747 6.05443 5.55248 5.60586 5.90934 5.2613L5.91032 5.26037ZM3.50907 4.80865H4.56964V11.0754H3.41486V6.2201L2.25 7.24249V5.89561L3.50907 4.80865Z",fill:"currentColor"}));case"number":return nl.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nl.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.6139 1.58154H0V14.4191H3.6139V13.1269H1.36702V2.87375H3.6139V1.58154ZM3.41656 13.3271V13.3269H1.17155V13.3271H3.41656ZM0.199219 14.2191H0.197344V1.78154H3.41656V1.78174H0.199219V14.2191ZM16 1.58154H12.3861V2.87375H14.633V13.1269H12.3861V14.4191H16V1.58154ZM12.5834 1.78154V2.67375H12.5853V1.78174H15.8027V1.78154H12.5834ZM12.5853 14.2191V13.3271H14.8322V2.67394H14.8303V13.3269H12.5834V14.2191H12.5853ZM6.86771 4.5C5.87019 4.5 5.00104 5.30767 5.00104 6.31667V9.63333C5.00104 10.6423 5.87019 11.45 6.86771 11.45C7.86523 11.45 8.73438 10.6423 8.73438 9.63333V6.31667C8.73438 5.30767 7.86523 4.5 6.86771 4.5ZM11.1177 4.5C10.1202 4.5 9.25104 5.30767 9.25104 6.31667V9.63333C9.25104 10.6423 10.1202 11.45 11.1177 11.45C12.1152 11.45 12.9844 10.6423 12.9844 9.63333V6.31667C12.9844 5.30767 12.1152 4.5 11.1177 4.5ZM6.13438 6.31667C6.13438 5.9503 6.47884 5.63333 6.86771 5.63333C7.25657 5.63333 7.60104 5.9503 7.60104 6.31667V9.63333C7.60104 9.9997 7.25657 10.3167 6.86771 10.3167C6.47884 10.3167 6.13438 9.9997 6.13438 9.63333V6.31667ZM10.3844 6.31667C10.3844 5.9503 10.7288 5.63333 11.1177 5.63333C11.5066 5.63333 11.851 5.9503 11.851 6.31667V9.63333C11.851 9.9997 11.5066 10.3167 11.1177 10.3167C10.7288 10.3167 10.3844 9.9997 10.3844 9.63333V6.31667ZM3.75938 9.85C3.33135 9.85 2.98438 10.197 2.98438 10.625C2.98438 11.053 3.33135 11.4 3.75938 11.4C4.1874 11.4 4.53438 11.053 4.53438 10.625C4.53438 10.197 4.1874 9.85 3.75938 9.85Z",fill:"currentColor"}));case"boolean":return nl.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nl.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 1.58105H3.6139V2.87326H1.36702V13.1264H3.6139V14.4186H0V1.58105ZM3.41656 13.3264V13.3266H1.17155V13.3264H3.41656ZM0.197344 14.2186H0.199219V1.78125H3.41656V1.78105H0.197344V14.2186ZM12.3861 1.58105H16V14.4186H12.3861V13.1264H14.633V2.87326H12.3861V1.58105ZM12.5834 2.67326V1.78105H15.8027V1.78125H12.5853V2.67326H12.5834ZM12.5853 13.3266V14.2186H12.5834V13.3264H14.8303V2.67345H14.8322V13.3266H12.5853ZM2.75 7.99993C2.75 6.14518 4.25358 4.6416 6.10833 4.6416H9.775C11.6298 4.6416 13.1333 6.14518 13.1333 7.99993C13.1333 9.85469 11.6298 11.3583 9.775 11.3583H6.10833C4.25358 11.3583 2.75 9.85469 2.75 7.99993ZM6.10833 5.85827C4.92552 5.85827 3.96667 6.81713 3.96667 7.99993C3.96667 9.18274 4.92552 10.1416 6.10833 10.1416H9.775C10.9578 10.1416 11.9167 9.18274 11.9167 7.99993C11.9167 6.81713 10.9578 5.85827 9.775 5.85827H6.10833ZM8.25 7.99993C8.25 7.1577 8.93277 6.47493 9.775 6.47493C10.6172 6.47493 11.3 7.1577 11.3 7.99993C11.3 8.84217 10.6172 9.52493 9.775 9.52493C8.93277 9.52493 8.25 8.84217 8.25 7.99993ZM9.775 7.6916C9.60471 7.6916 9.46667 7.82965 9.46667 7.99993C9.46667 8.17022 9.60471 8.30827 9.775 8.30827C9.94529 8.30827 10.0833 8.17022 10.0833 7.99993C10.0833 7.82965 9.94529 7.6916 9.775 7.6916Z",fill:"currentColor"}));case"stream":case"map":return nl.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nl.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.6139 1.58105H0V14.4186H3.6139V13.1264H1.36702V2.87326H3.6139V1.58105ZM3.41656 13.3266V13.3264H1.16987V13.3266H3.41656ZM0.197537 14.2186H0.197344V1.78105H3.41656V1.78125H0.197537V14.2186ZM16 1.58105H12.3861V2.87326H14.633V13.1264H12.3861V14.4186H16V1.58105ZM12.5834 1.78105V2.67326H12.5836V1.78125H15.8027V1.78105H12.5834ZM12.5836 14.2186V13.3266H14.8305V2.67345H14.8303V13.3264H12.5834V14.2186H12.5836Z",fill:"currentColor"}),nl.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.02962 3.6001H10.7696C11.0983 3.6001 11.4119 3.73574 11.6424 3.97635C11.8719 4.21592 11.9994 4.53988 11.9994 4.87541V10.0898C12.0056 10.2146 11.9675 10.3376 11.8918 10.4372L11.8662 10.4709L11.8287 10.4905C11.6508 10.5836 11.5323 10.6684 11.4581 10.7562C11.3893 10.8377 11.3538 10.9274 11.3538 11.0488C11.3538 11.2093 11.3914 11.285 11.4495 11.3472C11.5199 11.4227 11.6265 11.4867 11.8093 11.5964C11.8188 11.6022 11.8286 11.608 11.8385 11.614L11.8704 11.6331L11.8927 11.6629C11.9509 11.7407 11.9869 11.8329 11.997 11.9295C12.007 12.0258 11.9909 12.123 11.9503 12.2109C11.9101 12.2996 11.8454 12.375 11.7639 12.4282C11.682 12.4817 11.5865 12.5106 11.4887 12.5114L11.487 12.5114H5.02962C4.70105 12.5114 4.38727 12.3758 4.1573 12.1349C3.92697 11.8925 3.79871 11.5702 3.79981 11.2358V4.87541C3.79981 4.54075 3.92717 4.21692 4.15725 3.97736C4.26942 3.85898 4.40438 3.76453 4.55403 3.69969C4.7039 3.63476 4.86629 3.60087 5.02962 3.6001ZM5.03192 4.65263C5.00441 4.65342 4.97731 4.65952 4.95211 4.6706C4.92641 4.6819 4.90318 4.69816 4.88376 4.71845C4.86435 4.73874 4.84912 4.76266 4.83897 4.78884C4.82881 4.81502 4.82391 4.84295 4.82456 4.87103L4.82467 4.87541L4.82461 9.64304C4.94924 9.6064 5.07861 9.5878 5.2092 9.58824L10.9746 9.58755V4.87065C10.9752 4.8426 10.9703 4.81472 10.9602 4.78858C10.95 4.76244 10.9348 4.73857 10.9153 4.71832C10.8959 4.69807 10.8727 4.68184 10.847 4.67056C10.8219 4.65951 10.7948 4.65342 10.7673 4.65263H10.7696V4.46303L10.7657 4.65259L10.7673 4.65263H5.03192ZM5.2088 10.6401C5.00466 10.6401 4.82461 10.8155 4.82461 11.0498C4.82461 11.2833 5.00452 11.4589 5.2088 11.4589H10.4698C10.4687 11.456 10.4676 11.4531 10.4665 11.4502C10.4145 11.3112 10.4004 11.1647 10.4 11.0496C10.4 10.9312 10.4101 10.7838 10.4699 10.6401L5.2088 10.6401Z",fill:"currentColor"}),nl.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.71924 4.53617C5.71924 4.25475 5.94738 4.02661 6.2288 4.02661C6.51022 4.02661 6.73835 4.25475 6.73835 4.53617V9.65545C6.73835 9.93688 6.51022 10.165 6.2288 10.165C5.94737 10.165 5.71924 9.93688 5.71924 9.65545V4.53617Z",fill:"currentColor"}));case"array":return r(s);default:return n}};return{type:"array",label:"Array",icon:n,container:!0,getJsonPaths:n=>{let r=n.items&&e.getTypeBySchema(n.items);return["items",...r?.getJsonPaths?r.getJsonPaths(n.items):[]]},getDefaultValue:()=>[],getSupportedItemTypes:()=>e.getTypeRegistriesWithParentType("array"),getTypeSchemaProperties:n=>{let r=n.items&&e.getTypeBySchema(n.items);return r&&r.getTypeSchemaProperties?.(n.items)||{}},canAddField:n=>{if(!n.items)return!1;let r=e.getTypeBySchema(n.items);return r?.canAddField?.(n.items)||!1},getItemType:e=>e.items,getStringValueByTypeSchema:n=>{if(!n.items)return n.type||"";let r=e.getTypeBySchema(n.items);return[n.type,r?.getStringValueByTypeSchema?.(n.items)].join("-")},getTypeSchemaByStringValue:n=>{if(!n)return{type:"array"};let[r,...i]=n.split("-"),s=e.getTypeByName(r);return s?{type:"array",items:s.getTypeSchemaByStringValue?s.getTypeSchemaByStringValue(i.join("-")):s?.getDefaultSchema()}:{type:"array"}},getDefaultSchema:()=>({type:"array",items:{type:"string"}}),getPropertiesParent:n=>{let r=n.items&&e.getTypeBySchema(n.items);return r&&r.getPropertiesParent?r.getPropertiesParent(n.items):n},getDisplayIcon:r}},nP=()=>({type:"integer",label:"Integer",icon:nl.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nl.createElement("path",{d:"M15.132 11.4601C15.644 11.0121 15.9 10.3921 15.9 9.60007C15.9 8.60807 15.5 7.93607 14.7 7.58407C15.412 7.23207 15.768 6.62407 15.768 5.76007C15.768 5.05607 15.536 4.48007 15.072 4.03207C14.608 3.59207 14.012 3.37207 13.284 3.37207C12.588 3.37207 12.008 3.58007 11.544 3.99607C11.064 4.42007 10.808 4.98807 10.776 5.70007H12C12.064 4.88407 12.492 4.47607 13.284 4.47607C14.124 4.47607 14.544 4.91607 14.544 5.79607C14.544 6.66007 14.112 7.09207 13.248 7.09207H13.044V8.16007H13.248C14.2 8.16007 14.676 8.62807 14.676 9.56407C14.676 10.5081 14.212 10.9801 13.284 10.9801C12.9 10.9801 12.584 10.8761 12.336 10.6681C12.064 10.4441 11.916 10.1161 11.892 9.68407H10.668C10.692 10.4761 10.964 11.0841 11.484 11.5081C11.948 11.8921 12.548 12.0841 13.284 12.0841C14.036 12.0841 14.652 11.8761 15.132 11.4601Z",fill:"currentColor"}),nl.createElement("path",{d:"M4.46875 12.0003V10.9083L7.75675 6.91228C8.06075 6.54428 8.21275 6.16428 8.21275 5.77228C8.21275 4.90828 7.79675 4.47628 6.96475 4.47628C6.60475 4.47628 6.31275 4.57628 6.08875 4.77628C5.83275 5.00828 5.70475 5.34828 5.70475 5.79628H4.48075C4.48075 5.07628 4.71275 4.49228 5.17675 4.04428C5.64075 3.60428 6.23675 3.38428 6.96475 3.38428C7.70075 3.38428 8.29675 3.60028 8.75275 4.03228C9.20875 4.47228 9.43675 5.05628 9.43675 5.78428C9.43675 6.13628 9.36875 6.45628 9.23275 6.74428C9.12075 6.97628 8.92075 7.27228 8.63275 7.63228L5.95675 10.9083H9.43675V12.0003H4.46875Z",fill:"currentColor"}),nl.createElement("path",{d:"M1.668 12.0001V4.78805L0 6.25205V4.89605L1.668 3.45605H2.892V12.0001H1.668Z",fill:"currentColor"})),getDefaultSchema:()=>({type:"integer"}),getValueText:e=>void 0!==e?`${e}`:"",getDefaultValue:()=>0}),nA=()=>({type:"unknown",label:"Unknown",parentType:[],icon:nl.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:"false","aria-hidden":"true"},nl.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.22183 4.22182C6.21136 2.23232 8.96273 1 12 1C15.0373 1 17.7886 2.23231 19.7782 4.22182L19.0711 4.92893L19.7782 4.22183C21.7677 6.21136 23 8.96273 23 12C23 15.0373 21.7677 17.7886 19.7782 19.7782C17.7886 21.7677 15.0373 23 12 23C8.96273 23 6.21136 21.7677 4.22183 19.7782L4.92893 19.0711L4.22182 19.7782C2.23231 17.7886 1 15.0373 1 12C1 8.96273 2.23232 6.21136 4.22182 4.22183L4.22183 4.22182ZM12 3C9.51447 3 7.26584 4.00626 5.63603 5.63604C4.00625 7.26585 3 9.51447 3 12C3 14.4855 4.00627 16.7342 5.63604 18.3639C7.26584 19.9937 9.51447 21 12 21C14.4855 21 16.7342 19.9937 18.3639 18.3639C19.9937 16.7342 21 14.4855 21 12C21 9.51447 19.9937 7.26584 18.3639 5.63604C16.7342 4.00627 14.4855 3 12 3Z",fill:"currentColor"}),nl.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 9.31245C8 7.10331 9.79086 5.31245 12 5.31245C14.2091 5.31245 16 7.10331 16 9.31245C16 11.1763 14.7252 12.7424 13 13.1864V14.3124C13 14.8647 12.5523 15.3124 12 15.3124C11.4477 15.3124 11 14.8647 11 14.3124V12.3124C11 11.7602 11.4477 11.3124 12 11.3124C13.1046 11.3124 14 10.417 14 9.31245C14 8.20788 13.1046 7.31245 12 7.31245C10.8954 7.31245 10 8.20788 10 9.31245C10 9.86473 9.55228 10.3124 9 10.3124C8.44772 10.3124 8 9.86473 8 9.31245Z",fill:"currentColor"}),nl.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 18.8125C12.6904 18.8125 13.25 18.2528 13.25 17.5625C13.25 16.8721 12.6904 16.3125 12 16.3125C11.3097 16.3125 10.75 16.8721 10.75 17.5625C10.75 18.2528 11.3097 18.8125 12 18.8125Z",fill:"currentColor"})),getDefaultSchema:()=>({type:"unknown"}),getDefaultValue:()=>void 0}),nM=({typeManager:e})=>({type:"map",label:"Map",icon:nl.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},nl.createElement("path",{d:"M877.860571 938.642286h-645.851428c-27.574857 0-54.052571-11.337143-73.508572-31.744a110.957714 110.957714 0 0 1-30.500571-76.8V193.828571c0-28.745143 10.971429-56.32 30.500571-76.726857a101.888 101.888 0 0 1 73.508572-31.817143h574.171428c27.501714 0 53.979429 11.337143 73.508572 31.744 19.529143 20.333714 30.500571 48.054857 30.500571 76.8v522.020572a34.157714 34.157714 0 0 1-6.948571 22.820571c-37.156571 19.382857-57.636571 39.350857-57.636572 72.630857 0 39.716571 19.894857 50.029714 57.636572 72.777143a34.816 34.816 0 0 1-8.045714 49.298286 32.256 32.256 0 0 1-17.334858 5.193143z m-32.256-254.537143V193.828571a40.228571 40.228571 0 0 0-39.497142-41.179428H232.009143a40.301714 40.301714 0 0 0-39.497143 41.252571V699.245714c17.773714-9.874286 37.449143-14.994286 57.417143-14.921143h595.675428v-0.073142z m-595.675428 187.245714h566.198857c-22.893714-11.190857-27.940571-39.497143-28.013714-59.977143 0-20.260571 3.218286-43.885714 28.013714-59.904h-566.125714c-31.670857 0-57.417143 26.843429-57.417143 59.977143 0 33.060571 25.746286 59.904 57.344 59.904z",fill:"currentColor"}),nl.createElement("path",{d:"M320 128m32.036571 0l-0.073142 0q32.036571 0 32.036571 32.036571l0 511.926858q0 32.036571-32.036571 32.036571l0.073142 0q-32.036571 0-32.036571-32.036571l0-511.926858q0-32.036571 32.036571-32.036571Z",fill:"currentColor"})),container:!0,getJsonPaths:n=>{let r=n.additionalProperties&&e.getTypeBySchema(n.additionalProperties);return["additionalProperties",...r?.getJsonPaths?r.getJsonPaths(n.additionalProperties):[]]},getDefaultValue:()=>[],getSupportedItemTypes:()=>e.getTypeRegistriesWithParentType("map"),getTypeSchemaProperties:n=>{let r=n.additionalProperties&&e.getTypeBySchema(n.additionalProperties);return r&&r.getTypeSchemaProperties?.(n.additionalProperties)||{}},canAddField:n=>{if(!n.additionalProperties)return!1;let r=e.getTypeBySchema(n.additionalProperties);return r?.canAddField?.(n.additionalProperties)||!1},getItemType:e=>e.additionalProperties,getStringValueByTypeSchema:n=>{if(!n.additionalProperties)return n.type||"";let r=e.getTypeBySchema(n.additionalProperties);return[n.type,r?.getStringValueByTypeSchema?.(n.additionalProperties)].join("-")},getTypeSchemaByStringValue:n=>{if(!n)return{type:"map"};let[r,...i]=n.split("-"),s=e.getTypeByName(r);return s?{type:"map",additionalProperties:s.getTypeSchemaByStringValue?s.getTypeSchemaByStringValue(i.join("-")):s?.getDefaultSchema()}:{type:"map"}},getDefaultSchema:()=>({type:"map",additionalProperties:{type:"string"}}),getPropertiesParent:n=>{let r=n.additionalProperties&&e.getTypeBySchema(n.additionalProperties);return r&&r.getPropertiesParent?r.getPropertiesParent(n.additionalProperties):n}}),nN=class extends nw{constructor(){super(),this.getTypeRegistriesWithParentType=(e="")=>this.getAllTypeRegistries().filter(e=>"default"!==e.type).filter(n=>!n.parentType||n.parentType.includes(e)),this.getTypeSchemaDeepChildField=e=>{let n=this.getTypeBySchema(e),r=e;for(;n?.getItemType&&n.getItemType(r);)r=n.getItemType(r),n=this.getTypeBySchema(r);return r},this.getComplexText=e=>{let n=this.getTypeBySchema(e);return n?.customComplexText?n.customComplexText(e):n?.container&&e.items?`${n.label}<${this.getComplexText(e.items)}>`:n?.container&&e.additionalProperties?`${n.label}<String, ${this.getComplexText(e.additionalProperties)}>`:n?.label||e.type||"unknown"},this.getDisplayIcon=e=>{let n=this.getTypeBySchema(e);return n?.getDisplayIcon(e)||n?.icon||nl.createElement(nl.Fragment,null)},this.getTypeSchemaProperties=e=>{let n=this.getTypeBySchema(e);return n?.getTypeSchemaProperties(e)},this.getPropertiesParent=e=>{let n=this.getTypeBySchema(e);return n?.getPropertiesParent(e)},this.getJsonPaths=e=>{let n=this.getTypeBySchema(e);return n?.getJsonPaths(e)},this.canAddField=e=>{let n=this.getTypeBySchema(e);return n?.canAddField(e)},this.getDefaultValue=e=>{let n=this.getTypeBySchema(e);return n?.getDefaultValue()},[nS,n_,nC,nP,nE,nk,nT,nA,nM].forEach(e=>{this.register(e)})}getTypeNameFromSchema(e){return e?e.enum?"enum":e.type||e.$ref||"unknown":"unknown"}};nN=nx([(0,ng._G)()],nN);var nD=d8||(d8={});function nI(e){let{type:n,extra:r,required:i}=e||{},{weak:s=!1}=r||{};if(n)switch(n){case"object":if(s)return{kind:ny.zx.Object,weak:!0};return ny.vi.createObject({properties:Object.entries(e.properties||{}).sort((e,n)=>((0,nf.get)(e?.[1],"extra.index")||0)-((0,nf.get)(n?.[1],"extra.index")||0)).map(([e,n])=>({key:e,type:nI(n),meta:{title:n.title,description:n.description,required:!!i?.includes(e),default:n.default}}))});case"array":if(s)return{kind:ny.zx.Array,weak:!0};return ny.vi.createArray({items:nI(e.items)});case"map":if(s)return{kind:ny.zx.Map,weak:!0};return ny.vi.createMap({valueType:nI(e.additionalProperties)});case"string":return ny.vi.createString();case"number":return ny.vi.createNumber();case"boolean":return ny.vi.createBoolean();case"integer":return ny.vi.createInteger();default:return ny.vi.createCustomType({typeName:n})}}nD.schemaToAST=nI,nD.astToSchema=function e(n,r){let{drilldown:i=!0,drilldownMap:s=i,drilldownObject:o=i,drilldownArray:a=i}=r||{};if(n){if(ny.It.isString(n))return{type:"string"};if(ny.It.isBoolean(n))return{type:"boolean"};if(ny.It.isNumber(n))return{type:"number"};if(ny.It.isInteger(n))return{type:"integer"};if(ny.It.isObject(n))return{type:"object",required:n.properties.filter(e=>e.meta?.required).map(e=>e.key),properties:o?Object.fromEntries(n.properties.map(n=>{let r=e(n.type);return n.meta?.title&&r&&(r.title=n.meta.title),n.meta?.description&&r&&(r.description=n.meta.description),n.meta?.default&&r&&(r.default=n.meta.default),[n.key,r]})):{}};if(ny.It.isArray(n))return{type:"array",items:a?e(n.items):void 0};if(ny.It.isMap(n))return{type:"map",items:s?e(n.valueType):void 0};if(ny.It.isCustomType(n))return{type:n.typeName}}},nD.isASTMatchSchema=function(e,n){return Array.isArray(n)?e.isTypeEqual(ny.vi.createUnion({types:n.map(e=>nI(e)).filter(Boolean)})):e.isTypeEqual(nI(n))};var n$=new nN,nR=(0,nl.createContext)(null),nL=()=>{let e=(0,nl.useContext)(nR),n=(0,nO.Cy)();return e||(n?.isBound?.(nw)?n.get(nw):n$)};Symbol("TypeManager");var nQ=new ng.i0(e=>{e(nw).to(nN).inSingletonScope()}),nj=r(82481),nV=r(40961),nz=r(34033);function nB(e){return{all:e=e||new Map,on:function(n,r){var i=e.get(n);i?i.push(r):e.set(n,[r])},off:function(n,r){var i=e.get(n);i&&(r?i.splice(i.indexOf(r)>>>0,1):e.set(n,[]))},emit:function(n,r){var i=e.get(n);i&&i.slice().map(function(e){e(r)}),(i=e.get("*"))&&i.slice().map(function(e){e(n,r)})}}}let nF=[],nZ=[],nq="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<nq.length;e++)(e%2?nZ:nF).push(n+=nq[e]);function nW(e){return e>=127462&&e<=127487}function nX(e,n,r){if(n==e.length)return n;n&&nY(e.charCodeAt(n))&&nG(e.charCodeAt(n-1))&&n--;let i=nU(e,n);for(n+=nH(i);n<e.length;){let s=nU(e,n);if(8205==i||8205==s||r&&function(e){if(e<768)return!1;for(let n=0,r=nF.length;;){let i=n+r>>1;if(e<nF[i])r=i;else{if(!(e>=nZ[i]))return!0;n=i+1}if(n==r)return!1}}(s))n+=nH(s),i=s;else if(nW(s)){let r=0,i=n-2;for(;i>=0&&nW(nU(e,i));)r++,i-=2;if(r%2==0)break;n+=2}else break}return n}function nU(e,n){let r=e.charCodeAt(n);if(!nG(r)||n+1==e.length)return r;let i=e.charCodeAt(n+1);return nY(i)?(r-55296<<10)+(i-56320)+65536:r}function nY(e){return e>=56320&&e<57344}function nG(e){return e>=55296&&e<56320}function nH(e){return e<65536?1:2}class nK{lineAt(e){if(e<0||e>this.length)throw RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){[e,n]=n6(this,e,n);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),n0.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=n6(this,e,n);let r=[];return this.decompose(e,n,r,0),n0.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new n2(this),s=new n2(e);for(let e=n,o=n;;){if(i.next(e),s.next(e),e=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(o+=i.value.length,i.done||o>=r)return!0}}iter(e=1){return new n2(this,e)}iterRange(e,n=this.length){return new n5(this,e,n)}iterLines(e,n){let r;if(null==e)r=this.iter();else{null==n&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new n4(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(0==e.length)throw RangeError("A document must have at least one line");return 1!=e.length||e[0]?e.length<=32?new nJ(e):n0.from(nJ.split(e,[])):nK.empty}}class nJ extends nK{constructor(e,n=function(e){let n=-1;for(let r of e)n+=r.length+1;return n}(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.text[s],a=i+o.length;if((n?r:a)>=e)return new n3(i,a,r,o);i=a+1,r++}}decompose(e,n,r,i){var s;let o=e<=0&&n>=this.length?this:new nJ((s=this.text,n1(s,[""],e,n)),Math.min(n,this.length)-Math.max(0,e));if(1&i){let e=r.pop(),n=n1(o.text,e.text.slice(),0,o.length);if(n.length<=32)r.push(new nJ(n,e.length+o.length));else{let e=n.length>>1;r.push(new nJ(n.slice(0,e)),new nJ(n.slice(e)))}}else r.push(o)}replace(e,n,r){var i;if(!(r instanceof nJ))return super.replace(e,n,r);[e,n]=n6(this,e,n);let s=n1(this.text,n1(r.text,(i=this.text,n1(i,[""],0,e))),n),o=this.length+r.length-(n-e);return s.length<=32?new nJ(s,o):n0.from(nJ.split(s,[]),o)}sliceString(e,n=this.length,r="\n"){[e,n]=n6(this,e,n);let i="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(i+=r),e<l&&n>s&&(i+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,32==r.length&&(n.push(new nJ(r,i)),r=[],i=-1);return i>-1&&n.push(new nJ(r,i)),n}}class n0 extends nK{constructor(e,n){for(let r of(super(),this.children=e,this.length=n,this.lines=0,e))this.lines+=r.lines}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.children[s],a=i+o.length,l=r+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,r,i);i=a+1,r=l+1}}decompose(e,n,r,i){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let s=i&(o<=e|2*(l>=n));o>=e&&l<=n&&!s?r.push(a):a.decompose(e-o,n-o,r,s)}o=l+1}}replace(e,n,r){if([e,n]=n6(this,e,n),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,r),h=this.lines-o.lines+l.lines;if(l.lines<h>>4&&l.lines>h>>6){let s=this.children.slice();return s[i]=l,new n0(s,this.length-(n-e)+r.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r="\n"){[e,n]=n6(this,e,n);let i="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(i+=r),e<l&&n>o&&(i+=a.sliceString(e-o,n-o,r)),o=l+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof n0))return 0;let r=0,[i,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,s+=n){if(i==o||s==a)return r;let l=this.children[i],h=e.children[s];if(l!=h)return r+l.scanIdentical(h,n);r+=l.length+1}}static from(e,n=e.reduce((e,n)=>e+n.length+1,-1)){let r=0;for(let n of e)r+=n.lines;if(r<32){let r=[];for(let n of e)n.flatten(r);return new nJ(r,n)}let i=Math.max(32,r>>5),s=i<<1,o=i>>1,a=[],l=0,h=-1,c=[];function u(){0!=l&&(a.push(1==c.length?c[0]:n0.from(c,h)),h=-1,l=c.length=0)}for(let n of e)!function e(n){let r;if(n.lines>s&&n instanceof n0)for(let r of n.children)e(r);else n.lines>o&&(l>o||!l)?(u(),a.push(n)):n instanceof nJ&&l&&(r=c[c.length-1])instanceof nJ&&n.lines+r.lines<=32?(l+=n.lines,h+=n.length+1,c[c.length-1]=new nJ(r.text.concat(n.text),r.length+1+n.length)):(l+n.lines>i&&u(),l+=n.lines,h+=n.length+1,c.push(n))}(n);return u(),1==a.length?a[0]:new n0(a,n)}}function n1(e,n,r=0,i=1e9){for(let s=0,o=0,a=!0;o<e.length&&s<=i;o++){let l=e[o],h=s+l.length;h>=r&&(h>i&&(l=l.slice(0,i-s)),s<r&&(l=l.slice(r-s)),a?(n[n.length-1]+=l,a=!1):n.push(l)),s=h+1}return n}nK.empty=new nJ([""],0);class n2{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof nJ?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],o=s>>1,a=i instanceof nJ?i.text.length:i.children.length;if(o==(n>0?a:0)){if(0==r)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&s)==(n>0?0:1)){if(this.offsets[r]+=n,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(i instanceof nJ){let s=i.text[o+(n<0?-1:0)];if(this.offsets[r]+=n,s.length>Math.max(0,e))return this.value=0==e?s:n>0?s.slice(e):s.slice(0,s.length-e),this;e-=s.length}else{let s=i.children[o+(n<0?-1:0)];e>s.length?(e-=s.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(s),this.offsets.push(n>0?1:(s instanceof nJ?s.text.length:s.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class n5{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new n2(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class n4{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(nK.prototype[Symbol.iterator]=function(){return this.iter()},n2.prototype[Symbol.iterator]=n5.prototype[Symbol.iterator]=n4.prototype[Symbol.iterator]=function(){return this});class n3{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}}function n6(e,n,r){return[n=Math.max(0,Math.min(e.length,n)),Math.max(n,Math.min(e.length,r))]}function n9(e,n,r=!0,i=!0){return function(e,n,r=!0,i=!0){return(r?nX:function(e,n,r){for(;n>0;){let i=nX(e,n-2,r);if(i<n)return i;n--}return 0})(e,n,i)}(e,n,r,i)}function n7(e,n){let r=e.charCodeAt(n);if(!(r>=55296&&r<56320)||n+1==e.length)return r;let i=e.charCodeAt(n+1);return i>=56320&&i<57344?(r-55296<<10)+(i-56320)+65536:r}function n8(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(((e-=65536)>>10)+55296,(1023&e)+56320)}function re(e){return e<65536?1:2}let rt=/\r\n?|\n/;var rn=((d5=rn||(rn={}))[d5.Simple=0]="Simple",d5[d5.TrackDel=1]="TrackDel",d5[d5.TrackBefore=2]="TrackBefore",d5[d5.TrackAfter=3]="TrackAfter",d5);class rr{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(r,i,s),i+=s):i+=o,r+=s}}iterChangedRanges(e,n=!1){ra(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new rr(e)}composeDesc(e){return this.empty?e:e.empty?this:rh(this,e)}mapDesc(e,n=!1){return e.empty?this:rl(this,e,n)}mapPos(e,n=-1,r=rn.Simple){let i=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],h=i+a;if(l<0){if(h>e)return s+(e-i);s+=a}else{if(r!=rn.Simple&&h>=e&&(r==rn.TrackDel&&i<e&&h>e||r==rn.TrackBefore&&i<e||r==rn.TrackAfter&&h>e))return null;if(h>e||h==e&&n<0&&!a)return e==i||n<0?s:s+l;s+=l}i=h}if(e>i)throw RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let s=this.sections[r++],o=this.sections[r++],a=i+s;if(o>=0&&i<=n&&a>=e)return!(i<e)||!(a>n)||"cover";i=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(e=>"number"!=typeof e))throw RangeError("Invalid JSON representation of ChangeDesc");return new rr(e)}static create(e){return new rr(e)}}class ri extends rr{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw RangeError("Applying change set to a document with the wrong length");return ra(this,(n,r,i,s,o)=>e=e.replace(i,i+(r-n),o),!1),e}mapDesc(e,n=!1){return rl(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,s=0;i<n.length;i+=2){let o=n[i],a=n[i+1];if(a>=0){n[i]=a,n[i+1]=o;let l=i>>1;for(;r.length<l;)r.push(nK.empty);r.push(o?e.slice(s,s+o):nK.empty)}s+=o}return new ri(n,r)}compose(e){return this.empty?e:e.empty?this:rh(this,e,!0)}map(e,n=!1){return e.empty?this:rl(this,e,n,!0)}iterChanges(e,n=!1){ra(this,e,n)}get desc(){return rr.create(this.sections)}filter(e){let n=[],r=[],i=[],s=new rc(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&0==s.len;){if(s.done)break e;let e=Math.min(s.len,l-a);rs(i,e,-1);let o=-1==s.ins?-1:0==s.off?s.ins:0;rs(n,e,o),o>0&&ro(r,n,s.text),s.forward(e),a+=e}let h=e[o++];for(;a<h;){if(s.done)break e;let e=Math.min(s.len,h-a);rs(n,e,-1),rs(i,e,-1==s.ins?-1:0==s.off?s.ins:0),s.forward(e),a+=e}}return{changes:new ri(n,r),filtered:rr.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):0==i?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],s=[],o=0,a=null;function l(e=!1){if(!e&&!i.length)return;o<n&&rs(i,n-o,-1);let r=new ri(i,s);a=a?a.compose(r.map(a)):r,i=[],s=[],o=0}return!function e(h){if(Array.isArray(h))for(let n of h)e(n);else if(h instanceof ri){if(h.length!=n)throw RangeError(`Mismatched change set length (got ${h.length}, expected ${n})`);l(),a=a?a.compose(h.map(a)):h}else{let{from:e,to:a=e,insert:c}=h;if(e>a||e<0||a>n)throw RangeError(`Invalid change range ${e} to ${a} (in doc of length ${n})`);let u=c?"string"==typeof c?nK.of(c.split(r||rt)):c:nK.empty,d=u.length;if(e==a&&0==d)return;e<o&&l(),e>o&&rs(i,e-o,-1),rs(i,a-e,d),ro(s,i,u),o=a}}(e),l(!a),a}static empty(e){return new ri(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if("number"==typeof s)n.push(s,-1);else if(!Array.isArray(s)||"number"!=typeof s[0]||s.some((e,n)=>n&&"string"!=typeof e))throw RangeError("Invalid JSON representation of ChangeSet");else if(1==s.length)n.push(s[0],0);else{for(;r.length<i;)r.push(nK.empty);r[i]=nK.of(s.slice(1)),n.push(s[0],r[i].length)}}return new ri(n,r)}static createSet(e,n){return new ri(e,n)}}function rs(e,n,r,i=!1){if(0==n&&r<=0)return;let s=e.length-2;s>=0&&r<=0&&r==e[s+1]?e[s]+=n:s>=0&&0==n&&0==e[s]?e[s+1]+=r:i?(e[s]+=n,e[s+1]+=r):e.push(n,r)}function ro(e,n,r){if(0==r.length)return;let i=n.length-2>>1;if(i<e.length)e[e.length-1]=e[e.length-1].append(r);else{for(;e.length<i;)e.push(nK.empty);e.push(r)}}function ra(e,n,r){let i=e.inserted;for(let s=0,o=0,a=0;a<e.sections.length;){let l=e.sections[a++],h=e.sections[a++];if(h<0)s+=l,o+=l;else{let c=s,u=o,d=nK.empty;for(;c+=l,u+=h,h&&i&&(d=d.append(i[a-2>>1])),!r&&a!=e.sections.length&&!(e.sections[a+1]<0);)l=e.sections[a++],h=e.sections[a++];n(s,c,o,u,d),s=c,o=u}}}function rl(e,n,r,i=!1){let s=[],o=i?[]:null,a=new rc(e),l=new rc(n);for(let e=-1;;)if(a.done&&l.len||l.done&&a.len)throw Error("Mismatched change set lengths");else if(-1==a.ins&&-1==l.ins){let e=Math.min(a.len,l.len);rs(s,e,-1),a.forward(e),l.forward(e)}else if(l.ins>=0&&(a.ins<0||e==a.i||0==a.off&&(l.len<a.len||l.len==a.len&&!r))){let n=l.len;for(rs(s,l.ins,-1);n;){let r=Math.min(a.len,n);a.ins>=0&&e<a.i&&a.len<=r&&(rs(s,0,a.ins),o&&ro(o,s,a.text),e=a.i),a.forward(r),n-=r}l.next()}else if(a.ins>=0){let n=0,r=a.len;for(;r;)if(-1==l.ins){let e=Math.min(r,l.len);n+=e,r-=e,l.forward(e)}else if(0==l.ins&&l.len<r)r-=l.len,l.next();else break;rs(s,n,e<a.i?a.ins:0),o&&e<a.i&&ro(o,s,a.text),e=a.i,a.forward(a.len-r)}else if(a.done&&l.done)return o?ri.createSet(s,o):rr.create(s);else throw Error("Mismatched change set lengths")}function rh(e,n,r=!1){let i=[],s=r?[]:null,o=new rc(e),a=new rc(n);for(let e=!1;;)if(o.done&&a.done)return s?ri.createSet(i,s):rr.create(i);else if(0==o.ins)rs(i,o.len,0,e),o.next();else if(0!=a.len||a.done)if(o.done||a.done)throw Error("Mismatched change set lengths");else{let n=Math.min(o.len2,a.len),r=i.length;if(-1==o.ins){let r=-1==a.ins?-1:a.off?0:a.ins;rs(i,n,r,e),s&&r&&ro(s,i,a.text)}else -1==a.ins?(rs(i,o.off?0:o.len,n,e),s&&ro(s,i,o.textBit(n))):(rs(i,o.off?0:o.len,a.off?0:a.ins,e),s&&!a.off&&ro(s,i,a.text));e=(o.ins>n||a.ins>=0&&a.len>n)&&(e||i.length>r),o.forward2(n),a.forward(n)}else rs(i,0,a.ins,e),s&&ro(s,i,a.text),a.next()}class rc{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return -2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?nK.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?nK.empty:n[r].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class ru{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return 32&this.flags?this.to:this.from}get head(){return 32&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 8&this.flags?-1:16&this.flags?1:0}get bidiLevel(){let e=7&this.flags;return 7==e?null:e}get goalColumn(){let e=this.flags>>6;return 0xffffff==e?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new ru(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return rd.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return rd.range(this.anchor,r)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw RangeError("Invalid JSON representation for SelectionRange");return rd.range(e.anchor,e.head)}static create(e,n,r){return new ru(e,n,r)}}class rd{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:rd.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new rd([this.main],0)}addRange(e,n=!0){return rd.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,rd.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw RangeError("Invalid JSON representation for EditorSelection");return new rd(e.ranges.map(e=>ru.fromJSON(e)),e.main)}static single(e,n=e){return new rd([rd.range(e,n)],0)}static create(e,n=0){if(0==e.length)throw RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return rd.normalized(e.slice(),n);r=s.to}return new rd(e,n)}static cursor(e,n=0,r,i){return ru.create(e,e,(0==n?0:n<0?8:16)|(null==r?7:Math.min(6,r))|(null!=i?i:0xffffff)<<6)}static range(e,n,r,i){let s=(null!=r?r:0xffffff)<<6|(null==i?7:Math.min(6,i));return n<e?ru.create(n,e,48|s):ru.create(e,n,8*(n>e)|s)}static normalized(e,n=0){let r=e[n];e.sort((e,n)=>e.from-n.from),n=e.indexOf(r);for(let r=1;r<e.length;r++){let i=e[r],s=e[r-1];if(i.empty?i.from<=s.to:i.from<s.to){let o=s.from,a=Math.max(i.to,s.to);r<=n&&n--,e.splice(--r,2,i.anchor>i.head?rd.range(a,o):rd.range(o,a))}}return new rd(e,n)}}function rp(e,n){for(let r of e.ranges)if(r.to>n)throw RangeError("Selection points outside of document")}let rf=0;class rg{constructor(e,n,r,i,s){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=rf++,this.default=e([]),this.extensions="function"==typeof s?s(this):s}get reader(){return this}static define(e={}){return new rg(e.combine||(e=>e),e.compareInput||((e,n)=>e===n),e.compare||(!e.combine?rm:(e,n)=>e===n),!!e.static,e.enables)}of(e){return new ry([],this,0,e)}compute(e,n){if(this.isStatic)throw Error("Can't compute a static facet");return new ry(e,this,1,n)}computeN(e,n){if(this.isStatic)throw Error("Can't compute a static facet");return new ry(e,this,2,n)}from(e,n){return n||(n=e=>e),this.compute([e],r=>n(r.field(e)))}}function rm(e,n){return e==n||e.length==n.length&&e.every((e,r)=>e===n[r])}class ry{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=rf++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,s=this.id,o=e[s]>>1,a=2==this.type,l=!1,h=!1,c=[];for(let r of this.dependencies)"doc"==r?l=!0:"selection"==r?h=!0:((null!=(n=e[r.id])?n:1)&1)==0&&c.push(e[r.id]);return{create:e=>(e.values[o]=r(e),1),update(e,n){if(l&&n.docChanged||h&&(n.docChanged||n.selection)||rv(e,c)){let n=r(e);if(a?!rO(n,e.values[o],i):!i(n,e.values[o]))return e.values[o]=n,1}return 0},reconfigure:(e,n)=>{let l,h=n.config.address[s];if(null!=h){let s=rP(n,h);if(this.dependencies.every(r=>r instanceof rg?n.facet(r)===e.facet(r):!(r instanceof rx)||n.field(r,!1)==e.field(r,!1))||(a?rO(l=r(e),s,i):i(l=r(e),s)))return e.values[o]=s,0}else l=r(e);return e.values[o]=l,1}}}}function rO(e,n,r){if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++)if(!r(e[i],n[i]))return!1;return!0}function rv(e,n){let r=!1;for(let i of n)1&rT(e,i)&&(r=!0);return r}let rb=rg.define({static:!0});class rx{constructor(e,n,r,i,s){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let n=new rx(rf++,e.create,e.update,e.compare||((e,n)=>e===n),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(rb).find(e=>e.field==this);return((null==n?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:e=>(e.values[n]=this.create(e),1),update:(e,r)=>{let i=e.values[n],s=this.updateF(i,r);return this.compareF(i,s)?0:(e.values[n]=s,1)},reconfigure:(e,r)=>{let i=e.facet(rb),s=r.facet(rb),o;return(o=i.find(e=>e.field==this))&&o!=s.find(e=>e.field==this)?(e.values[n]=o.create(e),1):null!=r.config.address[this.id]?(e.values[n]=r.field(this),0):(e.values[n]=this.create(e),1)}}}init(e){return[this,rb.of({field:this,create:e})]}get extension(){return this}}function rw(e){return n=>new r_(n,e)}let rS={highest:rw(0),high:rw(1),default:rw(2),low:rw(3),lowest:rw(4)};class r_{constructor(e,n){this.inner=e,this.prec=n}}class rk{of(e){return new rC(this,e)}reconfigure(e){return rk.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class rC{constructor(e,n){this.compartment=e,this.inner=n}}class rE{constructor(e,n,r,i,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return null==n?e.default:this.staticValues[n>>1]}static resolve(e,n,r){var i,s,o;let a,l,h=[],c=Object.create(null),u=new Map;for(let r of(i=e,s=n,o=u,a=[[],[],[],[],[]],l=new Map,!function e(n,r){let i=l.get(n);if(null!=i){if(i<=r)return;let e=a[i].indexOf(n);e>-1&&a[i].splice(e,1),n instanceof rC&&o.delete(n.compartment)}if(l.set(n,r),Array.isArray(n))for(let i of n)e(i,r);else if(n instanceof rC){if(o.has(n.compartment))throw RangeError("Duplicate use of compartment in extensions");let i=s.get(n.compartment)||n.inner;o.set(n.compartment,i),e(i,r)}else if(n instanceof r_)e(n.inner,n.prec);else if(n instanceof rx)a[r].push(n),n.provides&&e(n.provides,r);else if(n instanceof ry)a[r].push(n),n.facet.extensions&&e(n.facet.extensions,2);else{let i=n.extension;if(!i)throw Error(`Unrecognized extension value in extension set (${n}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);e(i,r)}}(i,2),a.reduce((e,n)=>e.concat(n))))r instanceof rx?h.push(r):(c[r.facet.id]||(c[r.facet.id]=[])).push(r);let d=Object.create(null),p=[],f=[];for(let e of h)d[e.id]=f.length<<1,f.push(n=>e.slot(n));let g=null==r?void 0:r.config.facets;for(let e in c){let n=c[e],i=n[0].facet,s=g&&g[e]||[];if(n.every(e=>0==e.type))if(d[i.id]=p.length<<1|1,rm(s,n))p.push(r.facet(i));else{let e=i.combine(n.map(e=>e.value));p.push(r&&i.compare(e,r.facet(i))?r.facet(i):e)}else{for(let e of n)0==e.type?(d[e.id]=p.length<<1|1,p.push(e.value)):(d[e.id]=f.length<<1,f.push(n=>e.dynamicSlot(n)));d[i.id]=f.length<<1,f.push(e=>(function(e,n,r){let i=r.map(n=>e[n.id]),s=r.map(e=>e.type),o=i.filter(e=>!(1&e)),a=e[n.id]>>1;function l(e){let r=[];for(let n=0;n<i.length;n++){let o=rP(e,i[n]);if(2==s[n])for(let e of o)r.push(e);else r.push(o)}return n.combine(r)}return{create(e){for(let n of i)rT(e,n);return e.values[a]=l(e),1},update(e,r){if(!rv(e,o))return 0;let i=l(e);return n.compare(i,e.values[a])?0:(e.values[a]=i,1)},reconfigure(e,s){let o=rv(e,i),h=s.config.facets[n.id],c=s.facet(n);if(h&&!o&&rm(r,h))return e.values[a]=c,0;let u=l(e);return n.compare(u,c)?(e.values[a]=c,0):(e.values[a]=u,1)}}})(e,i,n))}}return new rE(e,u,f.map(e=>e(d)),d,p,c)}}function rT(e,n){if(1&n)return 2;let r=n>>1,i=e.status[r];if(4==i)throw Error("Cyclic dependency between fields and/or facets");if(2&i)return i;e.status[r]=4;let s=e.computeSlot(e,e.config.dynamicSlots[r]);return e.status[r]=2|s}function rP(e,n){return 1&n?e.config.staticValues[n>>1]:e.values[n>>1]}let rA=rg.define(),rM=rg.define({combine:e=>e.some(e=>e),static:!0}),rN=rg.define({combine:e=>e.length?e[0]:void 0,static:!0}),rD=rg.define(),rI=rg.define(),r$=rg.define(),rR=rg.define({combine:e=>!!e.length&&e[0]});class rL{constructor(e,n){this.type=e,this.value=n}static define(){return new rQ}}class rQ{of(e){return new rL(this,e)}}class rj{constructor(e){this.map=e}of(e){return new rV(this,e)}}class rV{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return void 0===n?void 0:n==this.value?this:new rV(this.type,n)}is(e){return this.type==e}static define(e={}){return new rj(e.map||(e=>e))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let e=i.map(n);e&&r.push(e)}return r}}rV.reconfigure=rV.define(),rV.appendConfig=rV.define();class rz{constructor(e,n,r,i,s,o){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,r&&rp(r,n.newLength),s.some(e=>e.type==rz.time)||(this.annotations=s.concat(rz.time.of(Date.now())))}static create(e,n,r,i,s,o){return new rz(e,n,r,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(rz.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&"."==n[e.length]))}}function rB(e,n,r){var i;let s,o,a;return r?(s=n.changes,o=ri.empty(n.changes.length),a=e.changes.compose(n.changes)):(s=n.changes.map(e.changes),o=e.changes.mapDesc(n.changes,!0),a=e.changes.compose(s)),{changes:a,selection:n.selection?n.selection.map(o):null==(i=e.selection)?void 0:i.map(s),effects:rV.mapEffects(e.effects,s).concat(rV.mapEffects(n.effects,o)),annotations:e.annotations.length?e.annotations.concat(n.annotations):n.annotations,scrollIntoView:e.scrollIntoView||n.scrollIntoView}}function rF(e,n,r){let i=n.selection,s=rq(n.annotations);return n.userEvent&&(s=s.concat(rz.userEvent.of(n.userEvent))),{changes:n.changes instanceof ri?n.changes:ri.of(n.changes||[],r,e.facet(rN)),selection:i&&(i instanceof rd?i:rd.single(i.anchor,i.head)),effects:rq(n.effects),annotations:s,scrollIntoView:!!n.scrollIntoView}}rz.time=rL.define(),rz.userEvent=rL.define(),rz.addToHistory=rL.define(),rz.remote=rL.define();let rZ=[];function rq(e){return null==e?rZ:Array.isArray(e)?e:[e]}var rW=((d4=rW||(rW={}))[d4.Word=0]="Word",d4[d4.Space=1]="Space",d4[d4.Other=2]="Other",d4);let rX=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;try{i=RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(e){}class rU{constructor(e,n,r,i,s,o){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let e=0;e<this.config.dynamicSlots.length;e++)rT(this,e<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(null==r){if(n)throw RangeError("Field is not present in this state");return}return rT(this,r),rP(this,r)}update(...e){return function e(n,r,i){let s=rF(n,r.length?r[0]:{},n.doc.length);r.length&&!1===r[0].filter&&(i=!1);for(let e=1;e<r.length;e++){!1===r[e].filter&&(i=!1);let o=!!r[e].sequential;s=rB(s,rF(n,r[e],o?s.changes.newLength:n.doc.length),o)}let o=rz.create(n,s.changes,s.selection,s.effects,s.annotations,s.scrollIntoView);return function(e){let n=e.startState,r=n.facet(r$),i=e;for(let s=r.length-1;s>=0;s--){let o=r[s](e);o&&Object.keys(o).length&&(i=rB(i,rF(n,o,e.changes.newLength),!0))}return i==e?e:rz.create(n,e.changes,e.selection,i.effects,i.annotations,i.scrollIntoView)}(i?function(n){let r=n.startState,i=!0;for(let e of r.facet(rD)){let r=e(n);if(!1===r){i=!1;break}Array.isArray(r)&&(i=!0===i?r:function(e,n){let r=[];for(let i=0,s=0;;){let o,a;if(i<e.length&&(s==n.length||n[s]>=e[i]))o=e[i++],a=e[i++];else{if(!(s<n.length))return r;o=n[s++],a=n[s++]}!r.length||r[r.length-1]<o?r.push(o,a):r[r.length-1]<a&&(r[r.length-1]=a)}}(i,r))}if(!0!==i){let e,s;if(!1===i)s=n.changes.invertedDesc,e=ri.empty(r.doc.length);else{let r=n.changes.filter(i);e=r.changes,s=r.filtered.mapDesc(r.changes).invertedDesc}n=rz.create(r,e,n.selection&&n.selection.map(s),rV.mapEffects(n.effects,s),n.annotations,n.scrollIntoView)}let s=r.facet(rI);for(let i=s.length-1;i>=0;i--){let o=s[i](n);n=o instanceof rz?o:Array.isArray(o)&&1==o.length&&o[0]instanceof rz?o[0]:e(r,rq(o),!1)}return n}(o):o)}(this,e,!0)}applyTransaction(e){let n,r=this.config,{base:i,compartments:s}=r;for(let n of e.effects)n.is(rk.reconfigure)?(r&&(s=new Map,r.compartments.forEach((e,n)=>s.set(n,e)),r=null),s.set(n.value.compartment,n.value.extension)):n.is(rV.reconfigure)?(r=null,i=n.value):n.is(rV.appendConfig)&&(r=null,i=rq(i).concat(n.value));n=r?e.startState.values.slice():new rU(r=rE.resolve(i,s,this),this.doc,this.selection,r.dynamicSlots.map(()=>null),(e,n)=>n.reconfigure(e,this),null).values;let o=e.startState.facet(rM)?e.newSelection:e.newSelection.asSingle();new rU(r,e.newDoc,o,n,(n,r)=>r.update(n,e),e)}replaceSelection(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:rd.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),s=[r.range],o=rq(r.effects);for(let r=1;r<n.ranges.length;r++){let a=e(n.ranges[r]),l=this.changes(a.changes),h=l.map(i);for(let e=0;e<r;e++)s[e]=s[e].map(h);let c=i.mapDesc(l,!0);s.push(a.range.map(c)),i=i.compose(h),o=rV.mapEffects(o,h).concat(rV.mapEffects(rq(a.effects),c))}return{changes:i,selection:rd.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof ri?e:ri.of(e,this.doc.length,this.facet(rU.lineSeparator))}toText(e){return nK.of(e.split(this.facet(rU.lineSeparator)||rt))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return null==n?e.default:(rT(this,n),rP(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof rx&&null!=this.config.address[i.id]&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||"string"!=typeof e.doc)throw RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let n in r)if(Object.prototype.hasOwnProperty.call(e,n)){let s=r[n],o=e[n];i.push(s.init(e=>s.spec.fromJSON(o,e)))}}return rU.create({doc:e.doc,selection:rd.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=rE.resolve(e.extensions||[],new Map),r=e.doc instanceof nK?e.doc:nK.of((e.doc||"").split(n.staticFacet(rU.lineSeparator)||rt)),i=e.selection?e.selection instanceof rd?e.selection:rd.single(e.selection.anchor,e.selection.head):rd.single(0);return rp(i,r.length),n.staticFacet(rM)||(i=i.asSingle()),new rU(n,r,i,n.dynamicSlots.map(()=>null),(e,n)=>n.create(e),null)}get tabSize(){return this.facet(rU.tabSize)}get lineBreak(){return this.facet(rU.lineSeparator)||"\n"}get readOnly(){return this.facet(rR)}phrase(e,...n){for(let n of this.facet(rU.phrases))if(Object.prototype.hasOwnProperty.call(n,e)){e=n[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(e,r)=>{if("$"==r)return"$";let i=+(r||1);return!i||i>n.length?e:n[i-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let s of this.facet(rA))for(let o of s(this,n,r))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){var n;return n=this.languageDataAt("wordChars",e).join(""),e=>{if(!/\S/.test(e))return rW.Space;if(function(e){if(i)return i.test(e);for(let n=0;n<e.length;n++){let r=e[n];if(/\w/.test(r)||r>"\x80"&&(r.toUpperCase()!=r.toLowerCase()||rX.test(r)))return!0}return!1}(e))return rW.Word;for(let r=0;r<n.length;r++)if(e.indexOf(n[r])>-1)return rW.Word;return rW.Other}}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-r,a=e-r;for(;o>0;){let e=n9(n,o,!1);if(s(n.slice(e,o))!=rW.Word)break;o=e}for(;a<i;){let e=n9(n,a);if(s(n.slice(a,e))!=rW.Word)break;a=e}return o==a?null:rd.range(o+r,a+r)}}function rY(e,n,r={}){let i={};for(let n of e)for(let e of Object.keys(n)){let s=n[e],o=i[e];if(void 0===o)i[e]=s;else if(o===s||void 0===s);else if(Object.hasOwnProperty.call(r,e))i[e]=r[e](o,s);else throw Error("Config merge conflict for field "+e)}for(let e in n)void 0===i[e]&&(i[e]=n[e]);return i}rU.allowMultipleSelections=rM,rU.tabSize=rg.define({combine:e=>e.length?e[0]:4}),rU.lineSeparator=rN,rU.readOnly=rR,rU.phrases=rg.define({compare(e,n){let r=Object.keys(e),i=Object.keys(n);return r.length==i.length&&r.every(r=>e[r]==n[r])}}),rU.languageData=rA,rU.changeFilter=rD,rU.transactionFilter=rI,rU.transactionExtender=r$,rk.reconfigure=rV.define();class rG{eq(e){return this==e}range(e,n=e){return rH.create(e,n,this)}}rG.prototype.startSide=rG.prototype.endSide=0,rG.prototype.point=!1,rG.prototype.mapMode=rn.TrackDel;class rH{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new rH(e,n,r)}}function rK(e,n){return e.from-n.from||e.value.startSide-n.value.startSide}class rJ{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let s=r?this.to:this.from;for(let o=i,a=s.length;;){if(o==a)return o;let i=o+a>>1,l=s[i]-e||(r?this.value[i].endSide:this.value[i].startSide)-n;if(i==o)return l>=0?o:a;l>=0?a=i:o=i+1}}between(e,n,r,i){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(r,1e9,!1,s);s<o;s++)if(!1===i(this.from[s]+e,this.to[s]+e,this.value[s]))return!1}map(e,n){let r=[],i=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let h=this.value[l],c=this.from[l]+e,u=this.to[l]+e,d,p;if(c==u){let e=n.mapPos(c,h.startSide,h.mapMode);if(null==e||(d=p=e,h.startSide!=h.endSide&&(p=n.mapPos(c,h.endSide))<d))continue}else if((d=n.mapPos(c,h.startSide))>(p=n.mapPos(u,h.endSide))||d==p&&h.startSide>0&&h.endSide<=0)continue;0>(p-d||h.endSide-h.startSide)||(o<0&&(o=d),h.point&&(a=Math.max(a,p-d)),r.push(h),i.push(d-o),s.push(p-o))}return{mapped:r.length?new rJ(i,s,r,a):null,pos:o}}}class r0{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new r0(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,o=e.filter;if(0==n.length&&!o)return this;if(r&&(n=n.slice().sort(rK)),this.isEmpty)return n.length?r0.of(n):this;let a=new r5(this,null,-1).goto(0),l=0,h=[],c=new r1;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let e=n[l++];c.addInner(e.from,e.to,e.value)||h.push(e)}else 1==a.rangeIndex&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||i>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&c.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||i>a.to||s<a.from||o(a.from,a.to,a.value))&&!c.addInner(a.from,a.to,a.value)&&h.push(rH.create(a.from,a.to,a.value)),a.next());return c.finishInner(this.nextLayer.isEmpty&&!h.length?r0.empty:this.nextLayer.update({add:h,filter:o,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let s=0;s<this.chunk.length;s++){let o=this.chunkPos[s],a=this.chunk[s],l=e.touchesRange(o,o+a.length);if(!1===l)i=Math.max(i,a.maxPoint),n.push(a),r.push(e.mapPos(o));else if(!0===l){let{mapped:s,pos:l}=a.map(o,e);s&&(i=Math.max(i,s.maxPoint),n.push(s),r.push(l))}}let s=this.nextLayer.map(e);return 0==n.length?s:new r0(r,n,s||r0.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i];if(n>=s&&e<=s+o.length&&!1===o.between(s,e-s,n-s,r))return}this.nextLayer.between(e,n,r)}}iter(e=0){return r4.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return r4.from(e).goto(n)}static compare(e,n,r,i,s=-1){let o=e.filter(e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=s),a=n.filter(e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=s),l=r2(o,a,r),h=new r6(o,l,s),c=new r6(a,l,s);r.iterGaps((e,n,r)=>r9(h,e,c,n,r,i)),r.empty&&0==r.length&&r9(h,0,c,0,0,i)}static eq(e,n,r=0,i){null==i&&(i=0x3b9ac9ff);let s=e.filter(e=>!e.isEmpty&&0>n.indexOf(e)),o=n.filter(n=>!n.isEmpty&&0>e.indexOf(n));if(s.length!=o.length)return!1;if(!s.length)return!0;let a=r2(s,o),l=new r6(s,a,0).goto(r),h=new r6(o,a,0).goto(r);for(;;){if(l.to!=h.to||!r7(l.active,h.active)||l.point&&(!h.point||!l.point.eq(h.point)))return!1;if(l.to>i)return!0;l.next(),h.next()}}static spans(e,n,r,i,s=-1){let o=new r6(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let e=Math.min(o.to,r);if(o.point){let r=o.activeForPoint(o.to),s=o.pointFrom<n?r.length+1:o.point.startSide<0?r.length:Math.min(r.length,l);i.point(a,e,o.point,r,s,o.pointRank),l=Math.min(o.openEnd(e),r.length)}else e>a&&(i.span(a,e,o.active,l),l=o.openEnd(e));if(o.to>r)return l+(o.point&&o.to>r?1:0);a=o.to,o.next()}}static of(e,n=!1){let r=new r1;for(let i of e instanceof rH?[e]:n?function(e){if(e.length>1)for(let n=e[0],r=1;r<e.length;r++){let i=e[r];if(rK(n,i)>0)return e.slice().sort(rK);n=i}return e}(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return r0.empty;let n=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=r0.empty;i=i.nextLayer)n=new r0(i.chunkPos,i.chunk,n,Math.max(i.maxPoint,n.maxPoint));return n}}r0.empty=new r0([],[],null,-1),r0.empty.nextLayer=r0.empty;class r1{finishChunk(e){this.chunks.push(new rJ(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new r1)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&0>(e-this.lastFrom||r.startSide-this.last.startSide))throw Error("Ranges must be added sorted by `from` position and `startSide`");return!(i<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if(0>(e-this.lastTo||n.value[0].startSide-this.last.endSide))return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(r0.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let n=r0.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function r2(e,n,r){let i=new Map;for(let n of e)for(let e=0;e<n.chunk.length;e++)n.chunk[e].maxPoint<=0&&i.set(n.chunk[e],n.chunkPos[e]);let s=new Set;for(let e of n)for(let n=0;n<e.chunk.length;n++){let o=i.get(e.chunk[n]);null==o||(r?r.mapPos(o):o)!=e.chunkPos[n]||(null==r?void 0:r.touchesRange(o,o+e.chunk[n].length))||s.add(e.chunk[n])}return s}class r5{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let n=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(n)||this.layer.chunkEnd(this.chunkIndex)<e||n.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){0>(this.to-e||this.endSide-n)&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class r4{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&i.push(new r5(o,n,r,s));return 1==i.length?i[0]:new r4(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let e=this.heap.length>>1;e>=0;e--)r3(this.heap,e);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let e=this.heap.length>>1;e>=0;e--)r3(this.heap,e);0>(this.to-e||this.value.endSide-n)&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),r3(this.heap,0)}}}function r3(e,n){for(let r=e[n];;){let i=(n<<1)+1;if(i>=e.length)break;let s=e[i];if(i+1<e.length&&s.compare(e[i+1])>=0&&(s=e[i+1],i++),0>r.compare(s))break;e[i]=r,e[n]=s,n=i}}class r6{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=r4.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&0>(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n);)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){r8(this.active,e),r8(this.activeTo,e),r8(this.activeRank,e),this.minActive=it(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||i-this.activeTo[n])>0;)n++;ie(this.active,n,r),ie(this.activeTo,n,i),ie(this.activeRank,n,s),e&&ie(e,n,this.cursor.from),this.minActive=it(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&0>(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&r8(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let e=this.cursor.value;if(e.point)if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=e,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=e.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}else this.addActive(r),this.cursor.next()}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let n=r.length-1;n>=0&&r[n]<e;n--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function r9(e,n,r,i,s,o){e.goto(n),r.goto(i);let a=i+s,l=i,h=i-n;for(;;){let n=e.to+h-r.to,i=n||e.endSide-r.endSide,s=i<0?e.to+h:r.to,c=Math.min(s,a);if(e.point||r.point?e.point&&r.point&&(e.point==r.point||e.point.eq(r.point))&&r7(e.activeForPoint(e.to),r.activeForPoint(r.to))||o.comparePoint(l,c,e.point,r.point):c>l&&!r7(e.active,r.active)&&o.compareRange(l,c,e.active,r.active),s>a)break;(n||e.openEnd!=r.openEnd)&&o.boundChange&&o.boundChange(s),l=s,i<=0&&e.next(),i>=0&&r.next()}}function r7(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!=n[r]&&!e[r].eq(n[r]))return!1;return!0}function r8(e,n){for(let r=n,i=e.length-1;r<i;r++)e[r]=e[r+1];e.pop()}function ie(e,n,r){for(let r=e.length-1;r>=n;r--)e[r+1]=e[r];e[n]=r}function it(e,n){let r=-1,i=1e9;for(let s=0;s<n.length;s++)0>(n[s]-i||e[s].endSide-e[r].endSide)&&(r=s,i=n[s]);return r}function ir(e,n,r=e.length){let i=0;for(let s=0;s<r&&s<e.length;)9==e.charCodeAt(s)?(i+=n-i%n,s++):(i++,s=n9(e,s));return i}function ii(e,n,r,i){for(let i=0,s=0;;){if(s>=n)return i;if(i==e.length)break;s+=9==e.charCodeAt(i)?r-s%r:1,i=n9(e,i)}return!0===i?-1:e.length}let is="undefined"==typeof Symbol?"__ͼ":Symbol.for("ͼ"),io="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),ia="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class il{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(e){return/^@/.test(e)?[e]:e.split(/,\s*/)}for(let n in e)!function e(n,s,o,a){let l=[],h=/^@(\w+)\b/.exec(n[0]),c=h&&"keyframes"==h[1];if(h&&null==s)return o.push(n[0]+";");for(let r in s){let a=s[r];if(/&/.test(r))e(r.split(/,\s*/).map(e=>n.map(n=>e.replace(/&/,n))).reduce((e,n)=>e.concat(n)),a,o);else if(a&&"object"==typeof a){if(!h)throw RangeError("The value of a property ("+r+") should be a primitive value.");e(i(r),a,l,c)}else null!=a&&l.push(r.replace(/_.*/,"").replace(/[A-Z]/g,e=>"-"+e.toLowerCase())+": "+a+";")}(l.length||c)&&o.push((r&&!h&&!a?n.map(r):n).join(", ")+" {"+l.join(" ")+"}")}(i(n),e[n],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let e=ia[is]||1;return ia[is]=e+1,"ͼ"+e.toString(36)}static mount(e,n,r){let i=e[io],s=r&&r.nonce;i?s&&i.setNonce(s):i=new ic(e,s),i.mount(Array.isArray(n)?n:[n],e)}}let ih=new Map;class ic{constructor(e,n){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let n=ih.get(r);if(n)return e[io]=n;this.sheet=new i.CSSStyleSheet,ih.set(r,this)}else this.styleTag=r.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[io]=this}mount(e,n){let r=this.sheet,i=0,s=0;for(let n=0;n<e.length;n++){let o=e[n],a=this.modules.indexOf(o);if(a<s&&a>-1&&(this.modules.splice(a,1),s--,a=-1),-1==a){if(this.modules.splice(s++,0,o),r)for(let e=0;e<o.rules.length;e++)r.insertRule(o.rules[e],i++)}else{for(;s<a;)i+=this.modules[s++].rules.length;i+=o.rules.length,s++}}if(r)0>n.adoptedStyleSheets.indexOf(this.sheet)&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let e="";for(let n=0;n<this.modules.length;n++)e+=this.modules[n].getRules()+"\n";this.styleTag.textContent=e;let r=n.head||n;this.styleTag.parentNode!=r&&r.insertBefore(this.styleTag,r.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}for(var iu={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},id={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},ip="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),ig="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),im=0;im<10;im++)iu[48+im]=iu[96+im]=String(im);for(var im=1;im<=24;im++)iu[im+111]="F"+im;for(var im=65;im<=90;im++)iu[im]=String.fromCharCode(im+32),id[im]=String.fromCharCode(im);for(var iy in iu)id.hasOwnProperty(iy)||(id[iy]=iu[iy]);function iO(e){return(11==e.nodeType?e.getSelection?e:e.ownerDocument:e).getSelection()}function iv(e,n){return!!n&&(e==n||e.contains(1!=n.nodeType?n.parentNode:n))}function ib(e,n){if(!n.anchorNode)return!1;try{return iv(e,n.anchorNode)}catch(e){return!1}}function ix(e){return 3==e.nodeType?iN(e,0,e.nodeValue.length).getClientRects():1==e.nodeType?e.getClientRects():[]}function iw(e,n,r,i){return!!r&&(ik(e,n,r,i,-1)||ik(e,n,r,i,1))}function iS(e){for(var n=0;;n++)if(!(e=e.previousSibling))return n}function i_(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}function ik(e,n,r,i,s){for(;;){if(e==r&&n==i)return!0;if(n==(s<0?0:iC(e))){if("DIV"==e.nodeName)return!1;let r=e.parentNode;if(!r||1!=r.nodeType)return!1;n=iS(e)+(s<0?0:1),e=r}else{if(1!=e.nodeType||1==(e=e.childNodes[n+(s<0?-1:0)]).nodeType&&"false"==e.contentEditable)return!1;n=s<0?iC(e):0}}}function iC(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function iE(e,n){let r=n?e.left:e.right;return{left:r,right:r,top:e.top,bottom:e.bottom}}function iT(e,n){let r=n.width/e.offsetWidth,i=n.height/e.offsetHeight;return(r>.995&&r<1.005||!isFinite(r)||1>Math.abs(n.width-e.offsetWidth))&&(r=1),(i>.995&&i<1.005||!isFinite(i)||1>Math.abs(n.height-e.offsetHeight))&&(i=1),{scaleX:r,scaleY:i}}class iP{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?iC(n):0),r,Math.min(e.focusOffset,r?iC(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let iA=null;function iM(e){if(e.setActive)return e.setActive();if(iA)return e.focus(iA);let n=[];for(let r=e;r&&(n.push(r,r.scrollTop,r.scrollLeft),r!=r.ownerDocument);r=r.parentNode);if(e.focus(null==iA?{get preventScroll(){return iA={preventScroll:!0},!0}}:void 0),!iA){iA=!1;for(let e=0;e<n.length;){let r=n[e++],i=n[e++],s=n[e++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}function iN(e,n,r=n){let i=s||(s=document.createRange());return i.setEnd(e,r),i.setStart(e,n),i}function iD(e,n,r,i){let s={key:n,code:n,keyCode:r,which:r,cancelable:!0};i&&({altKey:s.altKey,ctrlKey:s.ctrlKey,shiftKey:s.shiftKey,metaKey:s.metaKey}=i);let o=new KeyboardEvent("keydown",s);o.synthetic=!0,e.dispatchEvent(o);let a=new KeyboardEvent("keyup",s);return a.synthetic=!0,e.dispatchEvent(a),o.defaultPrevented||a.defaultPrevented}function iI(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}function i$(e){return e.scrollTop>Math.max(1,e.scrollHeight-e.clientHeight-4)}function iR(e,n){for(let r=e,i=n;;)if(3==r.nodeType&&i>0)return{node:r,offset:i};else if(1==r.nodeType&&i>0){if("false"==r.contentEditable)return null;i=iC(r=r.childNodes[i-1])}else{if(!r.parentNode||i_(r))return null;i=iS(r),r=r.parentNode}}function iL(e,n){for(let r=e,i=n;;)if(3==r.nodeType&&i<r.nodeValue.length)return{node:r,offset:i};else if(1==r.nodeType&&i<r.childNodes.length){if("false"==r.contentEditable)return null;r=r.childNodes[i],i=0}else{if(!r.parentNode||i_(r))return null;i=iS(r)+1,r=r.parentNode}}class iQ{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new iQ(e.parentNode,iS(e),n)}static after(e,n){return new iQ(e.parentNode,iS(e)+1,n)}}let ij=[];class iV{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(2&this.flags){let r=this.dom,i=null,s;for(let o of this.children){if(7&o.flags){if(!o.dom&&(s=i?i.nextSibling:r.firstChild)){let e=iV.get(s);(!e||!e.parent&&e.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=i?i.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&s!=o.dom&&(n.written=!0),o.dom.parentNode==r)for(;s&&s!=o.dom;)s=iz(s);else r.insertBefore(o.dom,s);i=o.dom}for((s=i?i.nextSibling:r.firstChild)&&n&&n.node==r&&(n.written=!0);s;)s=iz(s)}else if(1&this.flags)for(let r of this.children)7&r.flags&&(r.sync(e,n),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let i=0==iC(e)?0:0==n?-1:1;for(;;){let n=e.parentNode;if(n==this.dom)break;0==i&&n.firstChild!=n.lastChild&&(i=e==n.firstChild?-1:1),e=n}r=i<0?e:e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!iV.get(r);)r=r.nextSibling;if(!r)return this.length;for(let e=0,n=0;;e++){let i=this.children[e];if(i.dom==r)return n;n+=i.length+i.breakAfter}}domBoundsAround(e,n,r=0){let i=-1,s=-1,o=-1,a=-1;for(let l=0,h=r,c=r;l<this.children.length;l++){let r=this.children[l],u=h+r.length;if(h<e&&u>n)return r.domBoundsAround(e,n,h);if(u>=e&&-1==i&&(i=l,s=h),h>n&&r.dom.parentNode==this.dom){o=l,a=c;break}c=u,h=u+r.breakAfter}return{from:s,to:a<0?r+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),1&n.flags)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,7&this.flags&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=ij){this.markDirty();for(let i=e;i<n;i++){let e=this.children[i];e.parent==this&&0>r.indexOf(e)&&e.destroy()}r.length<250?this.children.splice(e,n-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(n));for(let e=0;e<r.length;e++)r[e].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new iB(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,r,i,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}function iz(e){let n=e.nextSibling;return e.parentNode.removeChild(e),n}iV.prototype.breakAfter=0;class iB{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function iF(e,n,r,i,s,o,a,l,h){let{children:c}=e,u=c.length?c[n]:null,d=o.length?o[o.length-1]:null,p=d?d.breakAfter:a;if(!(n==i&&u&&!a&&!p&&o.length<2&&u.merge(r,s,o.length?d:null,0==r,l,h))){if(i<c.length){let e=c[i];e&&(s<e.length||e.breakAfter&&(null==d?void 0:d.breakAfter))?(n==i&&(e=e.split(s),s=0),!p&&d&&e.merge(0,s,d,!0,0,h)?o[o.length-1]=e:((s||e.children.length&&!e.children[0].length)&&e.merge(0,s,null,!1,0,h),o.push(e))):(null==e?void 0:e.breakAfter)&&(d?d.breakAfter=1:a=1),i++}for(u&&(u.breakAfter=a,r>0&&(!a&&o.length&&u.merge(r,u.length,o[0],!1,l,0)?u.breakAfter=o.shift().breakAfter:(r<u.length||u.children.length&&0==u.children[u.children.length-1].length)&&u.merge(r,u.length,null,!1,l,0),n++));n<i&&o.length;)if(c[i-1].become(o[o.length-1]))i--,o.pop(),h=o.length?0:l;else if(c[n].become(o[0]))n++,o.shift(),l=o.length?0:h;else break;!o.length&&n&&i<c.length&&!c[n-1].breakAfter&&c[i].merge(0,0,c[n-1],!1,l,h)&&n--,(n<i||o.length)&&e.replaceChildren(n,i,o)}}function iZ(e,n,r,i,s,o){let a=e.childCursor(),{i:l,off:h}=a.findPos(r,1),{i:c,off:u}=a.findPos(n,-1),d=n-r;for(let e of i)d+=e.length;e.length+=d,iF(e,c,u,l,h,i,0,s,o)}let iq="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},iW="undefined"!=typeof document?document:{documentElement:{style:{}}},iX=/Edge\/(\d+)/.exec(iq.userAgent),iU=/MSIE \d/.test(iq.userAgent),iY=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(iq.userAgent),iG=!!(iU||iY||iX),iH=!iG&&/gecko\/(\d+)/i.test(iq.userAgent),iK=!iG&&/Chrome\/(\d+)/.exec(iq.userAgent),iJ="webkitFontSmoothing"in iW.documentElement.style,i0=!iG&&/Apple Computer/.test(iq.vendor),i1=i0&&(/Mobile\/\w+/.test(iq.userAgent)||iq.maxTouchPoints>2);var i2={mac:i1||/Mac/.test(iq.platform),windows:/Win/.test(iq.platform),linux:/Linux|X11/.test(iq.platform),ie:iG,ie_version:iU?iW.documentMode||6:iY?+iY[1]:iX?+iX[1]:0,gecko:iH,gecko_version:iH?+(/Firefox\/(\d+)/.exec(iq.userAgent)||[0,0])[1]:0,chrome:!!iK,chrome_version:iK?+iK[1]:0,ios:i1,android:/Android\b/.test(iq.userAgent),webkit:iJ,safari:i0,webkit_version:iJ?+(/\bAppleWebKit\/(\d+)/.exec(iq.userAgent)||[0,0])[1]:0,tabSize:null!=iW.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class i5 extends iV{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){3==e.nodeType&&this.createDOM(e)}merge(e,n,r){return!(8&this.flags)&&(!r||r instanceof i5&&!(this.length-(n-e)+r.length>256)&&!(8&r.flags))&&(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new i5(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=8&this.flags,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new iQ(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return function(e,n,r){let i=e.nodeValue.length;n>i&&(n=i);let s=n,o=n,a=0;0==n&&r<0||n==i&&r>=0?!(i2.chrome||i2.gecko)&&(n?(s--,a=1):o<i&&(o++,a=-1)):r<0?s--:o<i&&o++;let l=iN(e,s,o).getClientRects();if(!l.length)return null;let h=l[(a?a<0:r>=0)?0:l.length-1];return i2.safari&&!a&&0==h.width&&(h=Array.prototype.find.call(l,e=>e.width)||h),a?iE(h,a<0):h||null}(this.dom,e,n)}}class i4 extends iV{constructor(e,n=[],r=0){for(let i of(super(),this.mark=e,this.children=n,this.length=r,n))i.setParent(this)}setAttrs(e){if(iI(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?4&this.flags&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,r,i,s,o){return(!r||!!(r instanceof i4&&r.mark.eq(this.mark))&&(!e||!(s<=0))&&(!(n<this.length)||!(o<=0)))&&(iZ(this,e,n,r?r.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],r=0,i=-1,s=0;for(let o of this.children){let a=r+o.length;a>e&&n.push(r<e?o.split(e-r):o),i<0&&r>=e&&(i=s),r=a,s++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new i4(this.mark,n,o)}domAtPos(e){return i9(this,e)}coordsAt(e,n){return i7(this,e,n)}}class i3 extends iV{static create(e,n,r){return new i3(e,n,r)}constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}split(e){let n=i3.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,r,i,s,o){return(!r||r instanceof i3&&!!this.widget.compare(r.widget)&&(!(e>0)||!(s<=0))&&(!(n<this.length)||!(o<=0)))&&(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e instanceof i3&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(0==this.length)return nK.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,r=n&&n.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):nK.empty}domAtPos(e){return(this.length?0==e:this.side>0)?iQ.before(this.dom):iQ.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let n=o?i.length-1:0;s=i[n],e>0?0!=n:n!=i.length-1&&!(s.top<s.bottom);n+=o?-1:1);return iE(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class i6 extends iV{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof i6&&e.side==this.side}split(){return new i6(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?iQ.before(this.dom):iQ.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return nK.empty}get isHidden(){return!0}}function i9(e,n){let r=e.dom,{children:i}=e,s=0;for(let e=0;s<i.length;s++){let o=i[s],a=e+o.length;if(!(a==e&&0>=o.getSide())){if(n>e&&n<a&&o.dom.parentNode==r)return o.domAtPos(n-e);if(n<=e)break;e=a}}for(let e=s;e>0;e--){let n=i[e-1];if(n.dom.parentNode==r)return n.domAtPos(n.length)}for(let e=s;e<i.length;e++){let n=i[e];if(n.dom.parentNode==r)return n.domAtPos(0)}return new iQ(r,0)}function i7(e,n,r){let i=null,s=-1,o=null,a=-1;!function e(n,l){for(let h=0,c=0;h<n.children.length&&c<=l;h++){let u=n.children[h],d=c+u.length;d>=l&&(u.children.length?e(u,l-c):(!o||o.isHidden&&(r>0||function(e,n){let r=e.coordsAt(0,1),i=n.coordsAt(0,1);return r&&i&&i.top<r.bottom}(o,u)))&&(d>l||c==d&&u.getSide()>0)?(o=u,a=l-c):(c<l||c==d&&0>u.getSide()&&!u.isHidden)&&(i=u,s=l-c)),c=d}}(e,n);let l=(r<0?i:o)||i||o;return l?l.coordsAt(Math.max(0,l==i?s:a),r):function(e){let n=e.dom.lastChild;if(!n)return e.dom.getBoundingClientRect();let r=ix(n);return r[r.length-1]||null}(e)}function i8(e,n){for(let r in e)"class"==r&&n.class?n.class+=" "+e.class:"style"==r&&n.style?n.style+=";"+e.style:n[r]=e[r];return n}i5.prototype.children=i3.prototype.children=i6.prototype.children=ij;let se=Object.create(null);function st(e,n,r){if(e==n)return!0;e||(e=se),n||(n=se);let i=Object.keys(e),s=Object.keys(n);if(i.length-(r&&i.indexOf(r)>-1?1:0)!=s.length-(r&&s.indexOf(r)>-1?1:0))return!1;for(let o of i)if(o!=r&&(-1==s.indexOf(o)||e[o]!==n[o]))return!1;return!0}function sn(e,n,r){let i=!1;if(n)for(let s in n)r&&s in r||(i=!0,"style"==s?e.style.cssText="":e.removeAttribute(s));if(r)for(let s in r)n&&n[s]==r[s]||(i=!0,"style"==s?e.style.cssText=r[s]:e.setAttribute(s,r[s]));return i}class sr{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return -1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var si=((d3=si||(si={}))[d3.Text=0]="Text",d3[d3.WidgetBefore=1]="WidgetBefore",d3[d3.WidgetAfter=2]="WidgetAfter",d3[d3.WidgetRange=3]="WidgetRange",d3);class ss extends rG{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new so(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new sl(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:o}=sh(e,n);r=(s?n?-3e8:-1:5e8)-1,i=(o?n?2e8:1:-6e8)+1}return new sl(e,r,i,n,e.widget||null,!0)}static line(e){return new sa(e)}static set(e,n=!1){return r0.of(e,n)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}ss.none=r0.empty;class so extends ss{constructor(e){let{start:n,end:r}=sh(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,r;return this==e||e instanceof so&&this.tagName==e.tagName&&(this.class||(null==(n=this.attrs)?void 0:n.class))==(e.class||(null==(r=e.attrs)?void 0:r.class))&&st(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw RangeError("Mark decorations may not be empty");return super.range(e,n)}}so.prototype.point=!1;class sa extends ss{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof sa&&this.spec.class==e.spec.class&&st(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}sa.prototype.mapMode=rn.TrackBefore,sa.prototype.point=!0;class sl extends ss{constructor(e,n,r,i,s,o){super(n,r,s,e),this.block=i,this.isReplace=o,this.mapMode=i?n<=0?rn.TrackBefore:rn.TrackAfter:rn.TrackDel}get type(){return this.startSide!=this.endSide?si.WidgetRange:this.startSide<=0?si.WidgetBefore:si.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){var n,r;return e instanceof sl&&(n=this.widget,n==(r=e.widget)||!!(n&&r&&n.compare(r)))&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}function sh(e,n=!1){let{inclusiveStart:r,inclusiveEnd:i}=e;return null==r&&(r=e.inclusive),null==i&&(i=e.inclusive),{start:null!=r?r:n,end:null!=i?i:n}}function sc(e,n,r,i=0){let s=r.length-1;s>=0&&r[s]+i>=e?r[s]=Math.max(r[s],n):r.push(e,n)}sl.prototype.point=!0;class su extends iV{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,i,s,o){if(r){if(!(r instanceof su))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),iZ(this,e,n,r?r.children.slice():[],s,o),!0}split(e){let n=new su;if(n.breakAfter=this.breakAfter,0==this.length)return n;let{i:r,off:i}=this.childPos(e);i&&(n.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let e=r;e<this.children.length;e++)n.append(this.children[e],0);for(;r>0&&0==this.children[r-1].length;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){st(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){!function e(n,r,i){let s,{children:o}=n;i>0&&r instanceof i4&&o.length&&(s=o[o.length-1])instanceof i4&&s.mark.eq(r.mark)?e(s,r.children[0],i-1):(o.push(r),r.setParent(n)),n.length+=r.length}(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=i8(n,this.attrs||{})),r&&(this.attrs=i8({class:r},this.attrs||{}))}domAtPos(e){return i9(this,e)}reuseDOM(e){"DIV"==e.nodeName&&(this.setDOM(e),this.flags|=6)}sync(e,n){var r;this.dom?4&this.flags&&(iI(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(sn(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let i=this.dom.lastChild;for(;i&&iV.get(i)instanceof i4;)i=i.lastChild;if(!i||!this.length||"BR"!=i.nodeName&&(null==(r=iV.get(i))?void 0:r.isEditable)==!1&&(!i2.ios||!this.children.some(e=>e instanceof i5))){let e=document.createElement("BR");e.cmIgnore=!0,this.dom.appendChild(e)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let e=0,n;for(let r of this.children){if(!(r instanceof i5)||/[^ -~]/.test(r.text))return null;let i=ix(r.dom);if(1!=i.length)return null;e+=i[0].width,n=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let r=i7(this,e,n);if(!this.children.length&&r&&this.parent){let{heightOracle:e}=this.parent.view.viewState,n=r.bottom-r.top;if(2>Math.abs(n-e.lineHeight)&&e.textHeight<n){let i=(n-e.textHeight)/2;return{top:r.top+i,bottom:r.bottom-i,left:r.left,right:r.left}}}return r}become(e){return e instanceof su&&0==this.children.length&&0==e.children.length&&st(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],o=i+s.length;if(o>=n){if(s instanceof su)return s;if(o>n)break}i=o+s.breakAfter}return null}}class sd extends iV{constructor(e,n,r){super(),this.widget=e,this.length=n,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,i,s,o){return(!r||r instanceof sd&&!!this.widget.compare(r.widget)&&(!(e>0)||!(s<=0))&&(!(n<this.length)||!(o<=0)))&&(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return 0==e?iQ.before(this.dom):iQ.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new sd(this.widget,n,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return ij}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):nK.empty}domBoundsAround(){return null}become(e){return e instanceof sd&&e.widget.constructor==this.widget.constructor&&(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);return r||(this.widget instanceof sp?null:iE(this.dom.getBoundingClientRect(),this.length?0==e:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:r}=this.deco;return n!=r&&(e<0?n<0:r>0)}}class sp extends sr{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class sf{constructor(e,n,r,i){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof sd&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new su),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(sg(new i6(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||e&&this.content.length&&this.content[this.content.length-1]instanceof sd||this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:n,lineBreak:r,done:i}=this.cursor.next(this.skip);if(this.skip=0,i)throw Error("Ran out of text content when drawing inline views");if(r){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}this.text=n,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(sg(new i5(this.text.slice(this.textOff,this.textOff+i)),n),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,n,r,i){this.buildText(n-e,r,i),this.pos=n,this.openStart<0&&(this.openStart=i)}point(e,n,r,i,s,o){if(this.disallowBlockEffectsFor[o]&&r instanceof sl){if(r.block)throw RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(r instanceof sl)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new sd(r.widget||sm.block,a,r));else{let o=i3.create(r.widget||sm.inline,a,a?0:r.startSide),l=this.atCursorPos&&!o.isEditable&&s<=i.length&&(e<n||r.startSide>0),h=!o.isEditable&&(e<n||s>i.length||r.startSide<=0),c=this.getLine();2!=this.pendingBuffer||l||o.isEditable||(this.pendingBuffer=0),this.flushBuffer(i),l&&(c.append(sg(new i6(1),i),s),s=i.length+Math.max(0,s-i.length)),c.append(sg(o,i),s),this.atCursorPos=h,this.pendingBuffer=h?e<n||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,r,i,s){let o=new sf(e,n,r,s);return o.openEnd=r0.spans(i,n,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function sg(e,n){for(let r of n)e=new i4(r,[e],e.length);return e}class sm extends sr{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}sm.inline=new sm("span"),sm.block=new sm("div");var sy=((d6=sy||(sy={}))[d6.LTR=0]="LTR",d6[d6.RTL=1]="RTL",d6);let sO=sy.LTR,sv=sy.RTL;function sb(e){let n=[];for(let r=0;r<e.length;r++)n.push(1<<e[r]);return n}let sx=sb("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),sw=sb("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),sS=Object.create(null),s_=[];for(let e of["()","[]","{}"]){let n=e.charCodeAt(0),r=e.charCodeAt(1);sS[n]=r,sS[r]=-n}function sk(e){return e<=247?sx[e]:1424<=e&&e<=1524?2:1536<=e&&e<=1785?sw[e-1536]:1774<=e&&e<=2220?4:8192<=e&&e<=8204?256:64336<=e&&e<=65023?4:1}let sC=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class sE{get dir(){return this.level%2?sv:sO}constructor(e,n,r){this.from=e,this.to=n,this.level=r}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,r,i){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==r)return o;(s<0||(0!=i?i<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw RangeError("Index out of range");return s}}let sT=[];function sP(e){return[new sE(0,e,0)]}let sA="",sM=rg.define(),sN=rg.define(),sD=rg.define(),sI=rg.define(),s$=rg.define(),sR=rg.define(),sL=rg.define(),sQ=rg.define(),sj=rg.define(),sV=rg.define({combine:e=>e.some(e=>e)}),sz=rg.define({combine:e=>e.some(e=>e)}),sB=rg.define();class sF{constructor(e,n="nearest",r="nearest",i=5,s=5,o=!1){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new sF(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new sF(rd.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}let sZ=rV.define({map:(e,n)=>e.map(n)}),sq=rV.define();function sW(e,n,r){let i=e.facet(sI);i.length?i[0](n):window.onerror&&window.onerror(String(n),r,void 0,void 0,n)||(r?console.error(r+":",n):console.error(n))}let sX=rg.define({combine:e=>!e.length||e[0]}),sU=0,sY=rg.define({combine:e=>e.filter((n,r)=>{for(let i=0;i<r;i++)if(e[i].plugin==n.plugin)return!1;return!0})});class sG{constructor(e,n,r,i,s){this.id=e,this.create=n,this.domEventHandlers=r,this.domEventObservers=i,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(sY.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(sY.of({plugin:this,arg:e}))}static define(e,n){let{eventHandlers:r,eventObservers:i,provide:s,decorations:o}=n||{};return new sG(sU++,e,r,i,e=>{let n=[];return o&&n.push(s0.of(n=>{let r=n.plugin(e);return r?o(r):ss.none})),s&&n.push(s(e)),n})}static fromClass(e,n){return sG.define((n,r)=>new e(n,r),n)}}class sH{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(n){if(sW(e.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(e){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){sW(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(null==(n=this.value)?void 0:n.destroy)try{this.value.destroy()}catch(n){sW(e.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}let sK=rg.define(),sJ=rg.define(),s0=rg.define(),s1=rg.define(),s2=rg.define(),s5=rg.define();function s4(e,n){let r=e.state.facet(s5);if(!r.length)return r;let i=r.map(n=>n instanceof Function?n(e):n),s=[];return r0.spans(i,n.from,n.to,{point(){},span(e,r,i,o){let a=e-n.from,l=r-n.from,h=s;for(let e=i.length-1;e>=0;e--,o--){let r=i[e].spec.bidiIsolate,s;if(null==r&&(r=function(e,n,r){for(let i=n;i<r;i++){let n=sk(e.charCodeAt(i));if(1==n)break;if(2==n||4==n)return sv}return sO}(n.text,a,l)),o>0&&h.length&&(s=h[h.length-1]).to==a&&s.direction==r)s.to=l,h=s.inner;else{let e={from:a,to:l,direction:r,inner:[]};h.push(e),h=e.inner}}}}),s}let s3=rg.define();function s6(e){let n=0,r=0,i=0,s=0;for(let o of e.state.facet(s3)){let a=o(e);a&&(null!=a.left&&(n=Math.max(n,a.left)),null!=a.right&&(r=Math.max(r,a.right)),null!=a.top&&(i=Math.max(i,a.top)),null!=a.bottom&&(s=Math.max(s,a.bottom)))}return{left:n,right:r,top:i,bottom:s}}let s9=rg.define();class s7{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new s7(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(0==n.length)return e;let r=[];for(let i=0,s=0,o=0,a=0;;i++){let l=i==e.length?null:e[i],h=o-a,c=l?l.fromB:1e9;for(;s<n.length&&n[s]<c;){let e=n[s],i=n[s+1],o=Math.max(a,e),l=Math.min(c,i);if(o<=l&&new s7(o+h,l+h,o,l).addToSet(r),i>c)break;s+=2}if(!l)return r;new s7(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),o=l.toA,a=l.toB}}}class s8{constructor(e,n,r){for(let i of(this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=ri.empty(this.startState.doc.length),r))this.changes=this.changes.compose(i.changes);let i=[];this.changes.iterChangedRanges((e,n,r,s)=>i.push(new s7(e,n,r,s))),this.changedRanges=i}static create(e,n,r){return new s8(e,n,r)}get viewportChanged(){return(4&this.flags)>0}get viewportMoved(){return(8&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(18&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return 0==this.flags&&0==this.transactions.length}}class oe extends iV{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=ss.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new su],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new s7(0,0,0,e.state.doc.length)],0,null)}update(e){var n,r,i,s,o,a;let l,h,c=e.changedRanges;this.minWidth>0&&c.length&&(c.every(({fromA:e,toA:n})=>n<this.minWidthFrom||e>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let u=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&((null==(n=this.domChanged)?void 0:n.newSel)?u=this.domChanged.newSel.head:(r=e.changes,i=this.hasComposition,l=!1,i&&r.iterChangedRanges((e,n)=>{e<i.to&&n>i.from&&(l=!0)}),l||e.selectionSet||(u=e.state.selection.main.head)));let d=u>-1?function(e,n,r){let i=ot(e,r);if(!i)return null;let{node:s,from:o,to:a}=i,l=s.nodeValue;if(/[\n\r]/.test(l)||e.state.doc.sliceString(i.from,i.to)!=l)return null;let h=n.invertedDesc,c=new s7(h.mapPos(o),h.mapPos(a),o,a),u=[];for(let n=s.parentNode;;n=n.parentNode){let r=iV.get(n);if(r instanceof i4)u.push({node:n,deco:r.mark});else{if(r instanceof su||"DIV"==n.nodeName&&n.parentNode==e.contentDOM)return{range:c,text:s,marks:u,line:n};if(n==e.contentDOM)return null;u.push({node:n,deco:new so({inclusive:!0,attributes:function(e){let n=Object.create(null);for(let r=0;r<e.attributes.length;r++){let i=e.attributes[r];n[i.name]=i.value}return n}(n),tagName:n.tagName.toLowerCase()})})}}}(this.view,e.changes,u):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:n,to:r}=this.hasComposition;c=new s7(n,r,e.changes.mapPos(n,-1),e.changes.mapPos(r,1)).addToSet(c.slice())}this.hasComposition=d?{from:d.range.fromB,to:d.range.toB}:null,(i2.ie||i2.chrome)&&!d&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let p=(s=this.decorations,o=this.updateDeco(),a=e.changes,h=new on,r0.compare(s,o,a,h),h.changes);return c=s7.extendWithRanges(c,p),(!!(7&this.flags)||0!=c.length)&&(this.updateInner(c,e.startState.doc.length,d),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let e=i2.chrome||i2.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,e),this.flags&=-8,e&&(e.written||i.selectionRange.focusNode!=e.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(e=>e.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let e of this.children)e instanceof sd&&e.widget instanceof sp&&s.push(e.dom);i.updateGaps(s)}updateChildren(e,n,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let e=i.length-1;;e--){let n=e>=0?i[e]:null;if(!n)break;let{fromA:o,toA:a,fromB:l,toB:h}=n,c,u,d,p;if(r&&r.range.fromB<h&&r.range.toB>l){let e=sf.build(this.view.state.doc,l,r.range.fromB,this.decorations,this.dynamicDecorationMap),n=sf.build(this.view.state.doc,r.range.toB,h,this.decorations,this.dynamicDecorationMap);u=e.breakAtStart,d=e.openStart,p=n.openEnd;let i=this.compositionView(r);n.breakAtStart?i.breakAfter=1:n.content.length&&i.merge(i.length,i.length,n.content[0],!1,n.openStart,0)&&(i.breakAfter=n.content[0].breakAfter,n.content.shift()),e.content.length&&i.merge(0,0,e.content[e.content.length-1],!0,0,e.openEnd)&&e.content.pop(),c=e.content.concat(i).concat(n.content)}else({content:c,breakAtStart:u,openStart:d,openEnd:p}=sf.build(this.view.state.doc,l,h,this.decorations,this.dynamicDecorationMap));let{i:f,off:g}=s.findPos(a,1),{i:m,off:y}=s.findPos(o,-1);iF(this,m,y,f,g,c,u,d,p)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){for(let n of(this.editContextFormatting=this.editContextFormatting.map(e.changes),e.transactions))for(let e of n.effects)e.is(sq)&&(this.editContextFormatting=e.value)}compositionView(e){let n=new i5(e.text.nodeValue);for(let{deco:r}of(n.flags|=8,e.marks))n=new i4(r,[n],n.length);let r=new su;return r.append(n,0),r}fixCompositionDOM(e){let n=(e,n)=>{n.flags|=8|!!n.children.some(e=>7&e.flags),this.markedForComposition.add(n);let r=iV.get(e);r&&r!=n&&(r.dom=null),n.setDOM(e)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];n(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],n(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,n=!1){var r;(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,s=i==this.dom,o=!s&&!(this.view.state.facet(sX)||this.dom.tabIndex>-1)&&ib(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(s||n||o))return;let a=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,h=this.moveToLine(this.domAtPos(l.anchor)),c=l.empty?h:this.moveToLine(this.domAtPos(l.head));if(i2.gecko&&l.empty&&!this.hasComposition&&1==(r=h).node.nodeType&&r.node.firstChild&&(0==r.offset||"false"==r.node.childNodes[r.offset-1].contentEditable)&&(r.offset==r.node.childNodes.length||"false"==r.node.childNodes[r.offset].contentEditable)){let e=document.createTextNode("");this.view.observer.ignore(()=>h.node.insertBefore(e,h.node.childNodes[h.offset]||null)),h=c=new iQ(e,0),a=!0}let u=this.view.observer.selectionRange;!a&&u.focusNode&&(iw(h.node,h.offset,u.anchorNode,u.anchorOffset)&&iw(c.node,c.offset,u.focusNode,u.focusOffset)||this.suppressWidgetCursorChange(u,l))||(this.view.observer.ignore(()=>{i2.android&&i2.chrome&&this.dom.contains(u.focusNode)&&function(e,n){for(let r=e;r&&r!=n;r=r.assignedSlot||r.parentNode)if(1==r.nodeType&&"false"==r.contentEditable)return!0;return!1}(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let e=iO(this.view.root);if(e)if(l.empty){if(i2.gecko){var n,r;let e=(n=h.node,r=h.offset,1!=n.nodeType?0:(r&&"false"==n.childNodes[r-1].contentEditable?1:0)|2*(r<n.childNodes.length&&"false"==n.childNodes[r].contentEditable));if(e&&3!=e){let n=(1==e?iR:iL)(h.node,h.offset);n&&(h=new iQ(n.node,n.offset))}}e.collapse(h.node,h.offset),null!=l.bidiLevel&&void 0!==e.caretBidiLevel&&(e.caretBidiLevel=l.bidiLevel)}else if(e.extend){e.collapse(h.node,h.offset);try{e.extend(c.node,c.offset)}catch(e){}}else{let n=document.createRange();l.anchor>l.head&&([h,c]=[c,h]),n.setEnd(c.node,c.offset),n.setStart(h.node,h.offset),e.removeAllRanges(),e.addRange(n)}o&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(h,c)),this.impreciseAnchor=h.precise?null:new iQ(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new iQ(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&iw(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=iO(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let o=su.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),h=this.coordsAt(n.head,1);if(!l||!h||l.bottom>h.top)return;let c=this.domAtPos(n.head+n.assoc);r.collapse(c.node,c.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let u=e.observer.selectionRange;e.docView.posFromDOM(u.anchorNode,u.anchorOffset)!=n.from&&r.collapse(i,s)}moveToLine(e){let n=this.dom,r;if(e.node!=n)return e;for(let i=e.offset;!r&&i<n.childNodes.length;i++){let e=iV.get(n.childNodes[i]);e instanceof su&&(r=e.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let e=iV.get(n.childNodes[i]);e instanceof su&&(r=e.domAtPos(e.length))}return r?new iQ(r.node,r.offset,!0):e}nearest(e){for(let n=e;n;){let e=iV.get(n);if(e&&e.rootView==this)return e;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let e=this.children[n];if(r<e.length||e instanceof su)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){let r=null,i=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=s-a.breakAfter,h=l-a.length;if(l<e)break;if(h<=e&&(h<e||a.covers(-1))&&(l>e||a.covers(1))&&(!r||a instanceof su&&!(r instanceof su&&n>=0)))r=a,i=h;else if(r&&h==e&&l==e&&a instanceof sd&&2>Math.abs(n))if(a.deco.startSide<0)break;else o&&(r=null);s=h}return r?r.coordsAt(e-i,n):null}coordsForChar(e){let{i:n,off:r}=this.childPos(e,1),i=this.children[n];if(!(i instanceof su))return null;for(;i.children.length;){let{i:e,off:n}=i.childPos(r,1);for(;;e++){if(e==i.children.length)return null;if((i=i.children[e]).length)break}r=n}if(!(i instanceof i5))return null;let s=n9(i.text,r);if(s==r)return null;let o=iN(i.dom,r,s).getClientRects();for(let e=0;e<o.length;e++){let n=o[e];if(e==o.length-1||n.top<n.bottom&&n.left<n.right)return n}return null}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==sy.LTR;for(let e=0,h=0;h<this.children.length;h++){let c=this.children[h],u=e+c.length;if(u>i)break;if(e>=r){let r=c.dom.getBoundingClientRect();if(n.push(r.height),o){let n=c.dom.lastChild,i=n?ix(n):[];if(i.length){let n=i[i.length-1],o=l?n.right-r.left:r.right-n.left;o>a&&(a=o,this.minWidth=s,this.minWidthFrom=e,this.minWidthTo=u)}}}e=u+c.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return"rtl"==getComputedStyle(this.children[n].dom).direction?sy.RTL:sy.LTR}measureTextSize(){for(let e of this.children)if(e instanceof su){let n=e.measureTextSize();if(n)return n}let e=document.createElement("div"),n,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=ix(e.firstChild)[0];n=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:r,textHeight:i}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new iB(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let s=i==n.viewports.length?null:n.viewports[i],o=s?s.from-1:this.length;if(o>r){let i=(n.lineBlockAt(o).bottom-n.lineBlockAt(r).top)/this.view.scaleY;e.push(ss.replace({widget:new sp(i),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!s)break;r=s.to+1}return ss.set(e)}updateDeco(){let e=1,n=this.view.state.facet(s0).map(n=>(this.dynamicDecorationMap[e++]="function"==typeof n)?n(this.view):n),r=!1,i=this.view.state.facet(s1).map((e,n)=>{let i="function"==typeof e;return i&&(r=!0),i?e(this.view):e});for(i.length&&(this.dynamicDecorationMap[e++]=r,n.push(r0.join(i))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let n=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=n.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let n of this.view.state.facet(sB))try{if(n(this.view,e.range,e))return!0}catch(e){sW(this.view.state,e,"scroll handler")}let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=s6(this.view),o={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;!function(e,n,r,i,s,o,a,l){let h=e.ownerDocument,c=h.defaultView||window;for(let u=e,d=!1;u&&!d;)if(1==u.nodeType){let e,p=u==h.body,f=1,g=1;if(p)e=function(e){let n=e.visualViewport;return n?{left:0,right:n.width,top:0,bottom:n.height}:{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(d=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let n=u.getBoundingClientRect();({scaleX:f,scaleY:g}=iT(u,n)),e={left:n.left,right:n.left+u.clientWidth*f,top:n.top,bottom:n.top+u.clientHeight*g}}let m=0,y=0;if("nearest"==s)n.top<e.top?(y=n.top-(e.top+a),r>0&&n.bottom>e.bottom+y&&(y=n.bottom-e.bottom+a)):n.bottom>e.bottom&&(y=n.bottom-e.bottom+a,r<0&&n.top-y<e.top&&(y=n.top-(e.top+a)));else{let i=n.bottom-n.top,o=e.bottom-e.top;y=("center"==s&&i<=o?n.top+i/2-o/2:"start"==s||"center"==s&&r<0?n.top-a:n.bottom-o+a)-e.top}if("nearest"==i?n.left<e.left?(m=n.left-(e.left+o),r>0&&n.right>e.right+m&&(m=n.right-e.right+o)):n.right>e.right&&(m=n.right-e.right+o,r<0&&n.left<e.left+m&&(m=n.left-(e.left+o))):m=("center"==i?n.left+(n.right-n.left)/2-(e.right-e.left)/2:"start"==i==l?n.left-o:n.right-(e.right-e.left)+o)-e.left,m||y)if(p)c.scrollBy(m,y);else{let e=0,r=0;if(y){let e=u.scrollTop;u.scrollTop+=y/g,r=(u.scrollTop-e)*g}if(m){let n=u.scrollLeft;u.scrollLeft+=m/f,e=(u.scrollLeft-n)*f}n={left:n.left-e,top:n.top-r,right:n.right-e,bottom:n.bottom-r},e&&1>Math.abs(e-m)&&(i="nearest"),r&&1>Math.abs(r-y)&&(s="nearest")}if(p)break;(n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)&&(n={left:Math.max(n.left,e.left),right:Math.min(n.right,e.right),top:Math.max(n.top,e.top),bottom:Math.min(n.bottom,e.bottom)}),u=u.assignedSlot||u.parentNode}else if(11==u.nodeType)u=u.host;else break}(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==sy.LTR)}}function ot(e,n){let r=e.observer.selectionRange;if(!r.focusNode)return null;let i=iR(r.focusNode,r.focusOffset),s=iL(r.focusNode,r.focusOffset),o=i||s;if(s&&i&&s.node!=i.node){let n=iV.get(s.node);if(!n||n instanceof i5&&n.text!=s.node.nodeValue)o=s;else if(e.docView.lastCompositionAfterCursor){let e=iV.get(i.node);!e||e instanceof i5&&e.text!=i.node.nodeValue||(o=s)}}if(e.docView.lastCompositionAfterCursor=o!=i,!o)return null;let a=n-o.offset;return{from:a,to:a+o.node.nodeValue.length,node:o.node}}let on=class{constructor(){this.changes=[]}compareRange(e,n){sc(e,n,this.changes)}comparePoint(e,n){sc(e,n,this.changes)}boundChange(e){sc(e,e,this.changes)}};function or(e,n){return e.top<n.bottom-1&&e.bottom>n.top+1}function oi(e,n){return n<e.top?{top:n,left:e.left,right:e.right,bottom:e.bottom}:e}function os(e,n){return n>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:n}:e}function oo(e,n,r){let i=e.nodeValue.length,s=-1,o=1e9,a=0;for(let l=0;l<i;l++){let i=iN(e,l,l+1).getClientRects();for(let h=0;h<i.length;h++){let c=i[h];if(c.top==c.bottom)continue;a||(a=n-c.left);let u=(c.top>r?c.top-r:r-c.bottom)-1;if(c.left-1<=n&&c.right+1>=n&&u<o){let r=n>=(c.left+c.right)/2,i=r;if((i2.chrome||i2.gecko)&&iN(e,l).getBoundingClientRect().left==c.right&&(i=!r),u<=0)return{node:e,offset:l+ +!!i};s=l+ +!!i,o=u}}}return{node:e,offset:s>-1?s:a>0?e.nodeValue.length:0}}function oa(e,n,r,i=-1){var s,o;let a=e.contentDOM.getBoundingClientRect(),l=a.top+e.viewState.paddingTop,h,{docHeight:c}=e.viewState,{x:u,y:d}=n,p=d-l;if(p<0)return 0;if(p>c)return e.state.doc.length;for(let n=e.viewState.heightOracle.textHeight/2,s=!1;(h=e.elementAtHeight(p)).type!=si.Text;)for(;!((p=i>0?h.bottom+n:h.top-n)>=0)||!(p<=c);){if(s)return r?null:0;s=!0,i=-i}d=l+p;let f=h.from;if(f<e.viewport.from)return 0==e.viewport.from?0:r?null:ol(e,a,h,u,d);if(f>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:r?null:ol(e,a,h,u,d);let g=e.dom.ownerDocument,m=e.root.elementFromPoint?e.root:g,y=m.elementFromPoint(u,d);y&&!e.contentDOM.contains(y)&&(y=null),!y&&(u=Math.max(a.left+1,Math.min(a.right-1,u)),(y=m.elementFromPoint(u,d))&&!e.contentDOM.contains(y)&&(y=null));let O,b=-1;if(y&&(null==(s=e.docView.nearest(y))?void 0:s.isEditable)!=!1){if(g.caretPositionFromPoint){let e=g.caretPositionFromPoint(u,d);e&&({offsetNode:O,offset:b}=e)}else if(g.caretRangeFromPoint){let n=g.caretRangeFromPoint(u,d);n&&({startContainer:O,startOffset:b}=n,(!e.contentDOM.contains(O)||i2.safari&&function(e,n,r){let i,s=e;if(3!=e.nodeType||n!=(i=e.nodeValue.length))return!1;for(;;){let e=s.nextSibling;if(e){if("BR"==e.nodeName)break;return!1}{let e=s.parentNode;if(!e||"DIV"==e.nodeName)break;s=e}}return iN(e,i-1,i).getBoundingClientRect().right>r}(O,b,u)||i2.chrome&&function(e,n,r){if(0!=n)return!1;for(let n=e;;){let e=n.parentNode;if(!e||1!=e.nodeType||e.firstChild!=n)return!1;if(e.classList.contains("cm-line"))break;n=e}return r-(1==e.nodeType?e.getBoundingClientRect():iN(e,0,Math.max(e.nodeValue.length,1)).getBoundingClientRect()).left>5}(O,b,u))&&(O=void 0))}O&&(b=Math.min(iC(O),b))}if(!O||!e.docView.dom.contains(O)){let n=su.find(e.docView,f);if(!n)return p>h.top+h.height/2?h.to:h.from;({node:O,offset:b}=function e(n,r,i){let s,o,a,l,h,c,u,d,p=!1;for(let m=n.firstChild;m;m=m.nextSibling){let n=ix(m);for(let y=0;y<n.length;y++){var f,g;let O=n[y];c&&or(c,O)&&(O=oi(os(O,c.bottom),c.top));let b=(f=O).left>r?f.left-r:Math.max(0,r-f.right),x=(g=O).top>i?g.top-i:Math.max(0,i-g.bottom);if(0==b&&0==x)return 3==m.nodeType?oo(m,r,i):e(m,r,i);(!h||d>x||d==x&&u>b)&&(h=m,c=O,u=b,d=x,p=!b||(r<O.left?y>0:y<n.length-1)),0==b?i>O.bottom&&(!a||a.bottom<O.bottom)?(s=m,a=O):i<O.top&&(!l||l.top>O.top)&&(o=m,l=O):a&&or(a,O)?a=os(a,O.bottom):l&&or(l,O)&&(l=oi(l,O.top))}}if(a&&a.bottom>=i?(h=s,c=a):l&&l.top<=i&&(h=o,c=l),!h)return{node:n,offset:0};let m=Math.max(c.left,Math.min(c.right,r));if(3==h.nodeType)return oo(h,m,i);if(p&&"false"!=h.contentEditable)return e(h,m,i);let y=Array.prototype.indexOf.call(n.childNodes,h)+ +(r>=(c.left+c.right)/2);return{node:n,offset:y}}(n.dom,u,d))}let x=e.docView.nearest(O);if(!x)return null;if(!x.isWidget||(null==(o=x.dom)?void 0:o.nodeType)!=1)return x.localPosFromDOM(O,b)+x.posAtStart;{let e=x.dom.getBoundingClientRect();return n.y<e.top||n.y<=e.bottom&&n.x<=(e.left+e.right)/2?x.posAtStart:x.posAtEnd}}function ol(e,n,r,i,s){let o=Math.round((i-n.left)*e.defaultCharacterWidth);if(e.lineWrapping&&r.height>1.5*e.defaultLineHeight){let n=e.viewState.heightOracle.textHeight;o+=Math.floor((s-r.top-(e.defaultLineHeight-n)*.5)/n)*e.viewState.heightOracle.lineLength}let a=e.state.sliceDoc(r.from,r.to);return r.from+ii(a,o,e.state.tabSize)}function oh(e,n,r){let i=e.lineBlockAt(n);if(Array.isArray(i.type)){let e;for(let s of i.type){if(s.from>n)break;if(!(s.to<n)){if(s.from<n&&s.to>n)return s;(!e||s.type==si.Text&&(e.type!=s.type||(r<0?s.from<n:s.to>n)))&&(e=s)}}return e||i}return i}function oc(e,n,r,i){let s=e.state.doc.lineAt(n.head),o=e.bidiSpans(s),a=e.textDirectionAt(s.from);for(let l=n,h=null;;){let n=function(e,n,r,i,s){var o;let a=i.head-e.from,l=sE.find(n,a,null!=(o=i.bidiLevel)?o:-1,i.assoc),h=n[l],c=h.side(s,r);if(a==c){let e=l+=s?1:-1;if(e<0||e>=n.length)return null;a=(h=n[l=e]).side(!s,r),c=h.side(s,r)}let u=n9(e.text,a,h.forward(s,r));(u<h.from||u>h.to)&&(u=c),sA=e.text.slice(Math.min(a,u),Math.max(a,u));let d=l==(s?n.length-1:0)?null:n[l+(s?1:-1)];return d&&u==c&&d.level+ +!s<h.level?rd.cursor(d.side(!s,r)+e.from,d.forward(s,r)?1:-1,d.level):rd.cursor(u+e.from,h.forward(s,r)?-1:1,h.level)}(s,o,a,l,r),c=sA;if(!n){if(s.number==(r?e.state.doc.lines:1))return l;c="\n",s=e.state.doc.line(s.number+(r?1:-1)),o=e.bidiSpans(s),n=e.visualLineSide(s,!r)}if(h){if(!h(c))return l}else{if(!i)return n;h=i(c)}l=n}}function ou(e,n,r){for(;;){let i=0;for(let s of e)s.between(n-1,n+1,(e,s,o)=>{if(n>e&&n<s){let o=i||r||(n-e<s-n?-1:1);n=o<0?e:s,i=o}});if(!i)return n}}function od(e,n,r){let i=ou(e.state.facet(s2).map(n=>n(e)),r.from,n.head>r.from?-1:1);return i==r.from?r:rd.cursor(i,i<r.from?1:-1)}class op{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(rU.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+="￿"}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let e=this.text.length;this.readNode(i);let s=i.nextSibling;if(s==n)break;let o=iV.get(i),a=iV.get(s);(o&&a?o.breakAfter:(o?o.breakAfter:i_(i))||i_(s)&&("BR"!=i.nodeName||i.cmIgnore)&&this.text.length>e)&&this.lineBreak(),i=s}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(a=i.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(r,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let n of this.points)n.node==e&&n.pos>this.text.length&&(n.pos-=o-1);r=s+o}}readNode(e){if(e.cmIgnore)return;let n=iV.get(e),r=n&&n.overrideDOMText;if(null!=r){this.findPointInside(e,r.length);for(let e=r.iter();!e.next().done;)e.lineBreak?this.lineBreak():this.append(e.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(3==e.nodeType?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(!function(e,n,r){for(;;){if(!n||r<iC(n))return!1;if(n==e)return!0;r=iS(n)+1,n=n.parentNode}}(e,r.node,r.offset)?0:n))}}class of{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class og{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let n=s||o?[]:function(e){let n=[];if(e.root.activeElement!=e.contentDOM)return n;let{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:o}=e.observer.selectionRange;return r&&(n.push(new of(r,i)),(s!=r||o!=i)&&n.push(new of(s,o))),n}(e),r=new op(n,e.state);r.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=r.text,this.newSel=function(e,n){if(0==e.length)return null;let r=e[0].pos,i=2==e.length?e[1].pos:r;return r>-1&&i>-1?rd.single(r+n,i+n):null}(n,this.bounds.from)}else{let n=e.observer.selectionRange,r=s&&s.node==n.focusNode&&s.offset==n.focusOffset||!iv(e.contentDOM,n.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(n.focusNode,n.focusOffset),i=o&&o.node==n.anchorNode&&o.offset==n.anchorOffset||!iv(e.contentDOM,n.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(n.anchorNode,n.anchorOffset),a=e.viewport;if((i2.ios||i2.chrome)&&e.state.selection.main.empty&&r!=i&&(a.from>0||a.to<e.state.doc.length)){let n=Math.min(r,i),s=Math.max(r,i),o=a.from-n,l=a.to-s;(0==o||1==o||0==n)&&(0==l||-1==l||s==e.state.doc.length)&&(r=0,i=e.state.doc.length)}this.newSel=rd.single(i,r)}}}function om(e,n){let r,{newSel:i}=n,s=e.state.selection.main,o=e.inputState.lastKeyTime>Date.now()-100?e.inputState.lastKeyCode:-1;if(n.bounds){let{from:i,to:a}=n.bounds,l=s.from,h=null;(8===o||i2.android&&n.text.length<a-i)&&(l=s.to,h="end");let c=function(e,n,r,i){let s=Math.min(e.length,n.length),o=0;for(;o<s&&e.charCodeAt(o)==n.charCodeAt(o);)o++;if(o==s&&e.length==n.length)return null;let a=e.length,l=n.length;for(;a>0&&l>0&&e.charCodeAt(a-1)==n.charCodeAt(l-1);)a--,l--;if("end"==i){let e=Math.max(0,o-Math.min(a,l));r-=a+e-o}if(a<o&&e.length<n.length){let e=r<=o&&r>=a?o-r:0;o-=e,l=o+(l-a),a=o}else if(l<o){let e=r<=o&&r>=l?o-r:0;o-=e,a=o+(a-l),l=o}return{from:o,toA:a,toB:l}}(e.state.doc.sliceString(i,a,"￿"),n.text,l-i,h);c&&(i2.chrome&&13==o&&c.toB==c.from+2&&"￿￿"==n.text.slice(c.from,c.toB)&&c.toB--,r={from:i+c.from,to:i+c.toA,insert:nK.of(n.text.slice(c.from,c.toB).split("￿"))})}else i&&(!e.hasFocus&&e.state.facet(sX)||i.main.eq(s))&&(i=null);if(!r&&!i)return!1;if(!r&&n.typeOver&&!s.empty&&i&&i.main.empty?r={from:s.from,to:s.to,insert:e.state.doc.slice(s.from,s.to)}:(i2.mac||i2.android)&&r&&r.from==r.to&&r.from==s.head-1&&/^\. ?$/.test(r.insert.toString())&&"off"==e.contentDOM.getAttribute("autocorrect")?(i&&2==r.insert.length&&(i=rd.single(i.main.anchor-1,i.main.head-1)),r={from:r.from,to:r.to,insert:nK.of([r.insert.toString().replace("."," ")])}):r&&r.from>=s.from&&r.to<=s.to&&(r.from!=s.from||r.to!=s.to)&&s.to-s.from-(r.to-r.from)<=4?r={from:s.from,to:s.to,insert:e.state.doc.slice(s.from,r.from).append(r.insert).append(e.state.doc.slice(r.to,s.to))}:i2.chrome&&r&&r.from==r.to&&r.from==s.head&&"\n "==r.insert.toString()&&e.lineWrapping&&(i&&(i=rd.single(i.main.anchor-1,i.main.head-1)),r={from:s.from,to:s.to,insert:nK.of([" "])}),r)return oy(e,r,i,o);if(!i||i.main.eq(s))return!1;{let n=!1,r="select";return e.inputState.lastSelectionTime>Date.now()-50&&("select"==e.inputState.lastSelectionOrigin&&(n=!0),r=e.inputState.lastSelectionOrigin),e.dispatch({selection:i,scrollIntoView:n,userEvent:r}),!0}}function oy(e,n,r,i=-1){let s;if(i2.ios&&e.inputState.flushIOSKey(n))return!0;let o=e.state.selection.main;if(i2.android&&(n.to==o.to&&(n.from==o.from||n.from==o.from-1&&" "==e.state.sliceDoc(n.from,o.from))&&1==n.insert.length&&2==n.insert.lines&&iD(e.contentDOM,"Enter",13)||(n.from==o.from-1&&n.to==o.to&&0==n.insert.length||8==i&&n.insert.length<n.to-n.from&&n.to>o.head)&&iD(e.contentDOM,"Backspace",8)||n.from==o.from&&n.to==o.to+1&&0==n.insert.length&&iD(e.contentDOM,"Delete",46)))return!0;let a=n.insert.toString();e.inputState.composing>=0&&e.inputState.composing++;let l=()=>s||(s=function(e,n,r){let i,s=e.state,o=s.selection.main;if(n.from>=o.from&&n.to<=o.to&&n.to-n.from>=(o.to-o.from)/3&&(!r||r.main.empty&&r.main.from==n.from+n.insert.length)&&e.inputState.composing<0){let r=o.from<n.from?s.sliceDoc(o.from,n.from):"",a=o.to>n.to?s.sliceDoc(n.to,o.to):"";i=s.replaceSelection(e.state.toText(r+n.insert.sliceString(0,void 0,e.state.lineBreak)+a))}else{let a=s.changes(n),l=r&&r.main.to<=a.newLength?r.main:void 0;if(s.selection.ranges.length>1&&e.inputState.composing>=0&&n.to<=o.to&&n.to>=o.to-10){let h=e.state.sliceDoc(n.from,n.to),c,u=r&&ot(e,r.main.head);if(u){let e=n.insert.length-(n.to-n.from);c={from:u.from,to:u.to-e}}else c=e.state.doc.lineAt(o.head);let d=o.to-n.to,p=o.to-o.from;i=s.changeByRange(r=>{if(r.from==o.from&&r.to==o.to)return{changes:a,range:l||r.map(a)};let i=r.to-d,u=i-h.length;if(r.to-r.from!=p||e.state.sliceDoc(u,i)!=h||r.to>=c.from&&r.from<=c.to)return{range:r};let f=s.changes({from:u,to:i,insert:n.insert}),g=r.to-o.to;return{changes:f,range:l?rd.range(Math.max(0,l.anchor+g),Math.max(0,l.head+g)):r.map(f)}})}else i={changes:a,selection:l&&s.selection.replaceRange(l)}}let a="input.type";return(e.composing||e.inputState.compositionPendingChange&&e.inputState.compositionEndedAt>Date.now()-50)&&(e.inputState.compositionPendingChange=!1,a+=".compose",e.inputState.compositionFirstChange&&(a+=".start",e.inputState.compositionFirstChange=!1)),s.update(i,{userEvent:a,scrollIntoView:!0})}(e,n,r));return e.state.facet(sR).some(r=>r(e,n.from,n.to,a,l))||e.dispatch(l()),!0}class oO{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,i2.safari&&e.contentDOM.addEventListener("input",()=>null),i2.gecko&&function(e){oF.has(e)||(oF.add(e),e.addEventListener("copy",()=>{}),e.addEventListener("cut",()=>{}))}(e.contentDOM.ownerDocument)}handleEvent(e){!(!function(e,n){if(!n.bubbles)return!0;if(n.defaultPrevented)return!1;for(let r=n.target,i;r!=e.contentDOM;r=r.parentNode)if(!r||11==r.nodeType||(i=iV.get(r))&&i.ignoreEvent(n))return!1;return!0}(this.view,e)||this.ignoreDuringComposition(e))&&("keydown"==e.type&&this.keydown(e)||(0!=this.view.updateState?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e)))}runHandlers(e,n){let r=this.handlers[e];if(r){for(let e of r.observers)e(this.view,n);for(let e of r.handlers){if(n.defaultPrevented)break;if(e(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=function(e){let n=Object.create(null);function r(e){return n[e]||(n[e]={observers:[],handlers:[]})}for(let n of e){let e=n.spec,i=e&&e.plugin.domEventHandlers,s=e&&e.plugin.domEventObservers;if(i)for(let e in i){let s=i[e];s&&r(e).handlers.push(ov(n.value,s))}if(s)for(let e in s){let i=s[e];i&&r(e).observers.push(ov(n.value,i))}}for(let e in ok)r(e).handlers.push(ok[e]);for(let e in oC)r(e).observers.push(oC[e]);return n}(e),r=this.handlers,i=this.view.contentDOM;for(let e in n)if("scroll"!=e){let s=!n[e].handlers.length,o=r[e];o&&!o.handlers.length!=s&&(i.removeEventListener(e,this.handleEvent),o=null),o||i.addEventListener(e,this.handleEvent,{passive:s})}for(let e in r)"scroll"==e||n[e]||i.removeEventListener(e,this.handleEvent);this.handlers=n}keydown(e){let n;return this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),!!(9==e.keyCode&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))||((this.tabFocusMode>0&&27!=e.keyCode&&0>ow.indexOf(e.keyCode)&&(this.tabFocusMode=-1),i2.android&&i2.chrome&&!e.synthetic&&(13==e.keyCode||8==e.keyCode))?(this.view.observer.delayAndroidKey(e.key,e.keyCode),!0):i2.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=ob.find(n=>n.keyCode==e.keyCode))&&!e.ctrlKey||ox.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(229!=e.keyCode&&this.view.observer.forceFlush(),!1))}flushIOSKey(e){let n=this.pendingIOSKey;return!(!n||"Enter"==n.key&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString()))&&(this.pendingIOSKey=void 0,iD(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return!!/^key/.test(e.type)&&(this.composing>0||!!(i2.safari&&!i2.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function ov(e,n){return(r,i)=>{try{return n.call(e,i,r)}catch(e){sW(r.state,e)}}}let ob=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],ox="dthko",ow=[16,17,18,20,91,92,224,225];function oS(e){return .7*Math.max(0,e)+8}class o_{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=function(e){let n=e.ownerDocument,r,i;for(let s=e.parentNode;s;)if(s==n.body||r&&i)break;else if(1==s.nodeType)!i&&s.scrollHeight>s.clientHeight&&(i=s),!r&&s.scrollWidth>s.clientWidth&&(r=s),s=s.assignedSlot||s.parentNode;else if(11==s.nodeType)s=s.host;else break;return{x:r,y:i}}(e.contentDOM),this.atoms=e.state.facet(s2).map(n=>n(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(rU.allowMultipleSelections)&&function(e,n){let r=e.state.facet(sM);return r.length?r[0](n):i2.mac?n.metaKey:n.ctrlKey}(e,n),this.dragging=!!function(e,n){let{main:r}=e.state.selection;if(r.empty)return!1;let i=iO(e.root);if(!i||0==i.rangeCount)return!0;let s=i.getRangeAt(0).getClientRects();for(let e=0;e<s.length;e++){let r=s[e];if(r.left<=n.clientX&&r.right>=n.clientX&&r.top<=n.clientY&&r.bottom>=n.clientY)return!0}return!1}(e,n)&&1==oL(n)&&null}start(e){!1===this.dragging&&this.select(e)}move(e){var n;if(0==e.buttons)return this.destroy();if(this.dragging||null==this.dragging&&10>(n=this.startEvent,Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))))return;this.select(this.lastEvent=e);let r=0,i=0,s=0,o=0,a=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:s,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:l}=this.scrollParents.y.getBoundingClientRect());let h=s6(this.view);e.clientX-h.left<=s+6?r=-oS(s-e.clientX):e.clientX+h.right>=a-6&&(r=oS(e.clientX-a)),e.clientY-h.top<=o+6?i=-oS(o-e.clientY):e.clientY+h.bottom>=l-6&&(i=oS(e.clientY-l)),this.setScrollSpeed(r,i)}up(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),!1===this.dragging&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let e=ou(this.atoms,i.from,0);e!=i.from&&(s=rd.cursor(e,-1))}else{let e=ou(this.atoms,i.from,-1),n=ou(this.atoms,i.to,1);(e!=i.from||n!=i.to)&&(s=rd.range(i.from==i.anchor?e:n,i.from==i.head?e:n))}s&&(n||(n=e.ranges.slice()),n[r]=s)}return n?rd.create(n,e.mainIndex):e}select(e){let{view:n}=this,r=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection,!1===this.dragging))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(e=>e.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}let ok=Object.create(null),oC=Object.create(null),oE=i2.ie&&i2.ie_version<15||i2.ios&&i2.webkit_version<604;function oT(e,n,r){for(let i of e.facet(n))r=i(r,e);return r}function oP(e,n){n=oT(e.state,sQ,n);let{state:r}=e,i,s=1,o=r.toText(n),a=o.lines==r.selection.ranges.length;if(null!=oj&&r.selection.ranges.every(e=>e.empty)&&oj==o.toString()){let e=-1;i=r.changeByRange(i=>{let l=r.doc.lineAt(i.from);if(l.from==e)return{range:i};e=l.from;let h=r.toText((a?o.line(s++).text:n)+r.lineBreak);return{changes:{from:l.from,insert:h},range:rd.cursor(i.from+h.length)}})}else i=a?r.changeByRange(e=>{let n=o.line(s++);return{changes:{from:e.from,to:e.to,insert:n.text},range:rd.cursor(e.from+n.length)}}):r.replaceSelection(o);e.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}function oA(e,n,r,i){if(1==i)return rd.cursor(n,r);{if(2==i)return function(e,n,r=1){let i=e.charCategorizer(n),s=e.doc.lineAt(n),o=n-s.from;if(0==s.length)return rd.cursor(n);0==o?r=1:o==s.length&&(r=-1);let a=o,l=o;r<0?a=n9(s.text,o,!1):l=n9(s.text,o);let h=i(s.text.slice(a,l));for(;a>0;){let e=n9(s.text,a,!1);if(i(s.text.slice(e,a))!=h)break;a=e}for(;l<s.length;){let e=n9(s.text,l);if(i(s.text.slice(l,e))!=h)break;l=e}return rd.range(a+s.from,l+s.from)}(e.state,n,r);let s=su.find(e.docView,n),o=e.state.doc.lineAt(s?s.posAtEnd:n),a=s?s.posAtStart:o.from,l=s?s.posAtEnd:o.to;return l<e.state.doc.length&&l==o.to&&l++,rd.range(a,l)}}oC.scroll=e=>{e.inputState.lastScrollTop=e.scrollDOM.scrollTop,e.inputState.lastScrollLeft=e.scrollDOM.scrollLeft},ok.keydown=(e,n)=>(e.inputState.setSelectionOrigin("select"),27==n.keyCode&&0!=e.inputState.tabFocusMode&&(e.inputState.tabFocusMode=Date.now()+2e3),!1),oC.touchstart=(e,n)=>{e.inputState.lastTouchTime=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},oC.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")},ok.mousedown=(e,n)=>{var r,i;let s,o,a;if(e.observer.flush(),e.inputState.lastTouchTime>Date.now()-2e3)return!1;let l=null;for(let r of e.state.facet(sD))if(l=r(e,n))break;if(l||0!=n.button||(s=oN(r=e,i=n),o=oL(i),a=r.state.selection,l={update(e){e.docChanged&&(s.pos=e.changes.mapPos(s.pos),a=a.map(e.changes))},get(e,n,i){let l=oN(r,e),h,c=oA(r,l.pos,l.bias,o);if(s.pos!=l.pos&&!n){let e=oA(r,s.pos,s.bias,o),n=Math.min(e.from,c.from),i=Math.max(e.to,c.to);c=n<c.from?rd.range(n,i):rd.range(i,n)}return n?a.replaceRange(a.main.extend(c.from,c.to)):i&&1==o&&a.ranges.length>1&&(h=function(e,n){for(let r=0;r<e.ranges.length;r++){let{from:i,to:s}=e.ranges[r];if(i<=n&&s>=n)return rd.create(e.ranges.slice(0,r).concat(e.ranges.slice(r+1)),e.mainIndex==r?0:e.mainIndex-(e.mainIndex>r))}return null}(a,l.pos))?h:i?a.addRange(c):rd.create([c])}}),l){let r=!e.hasFocus;e.inputState.startMouseSelection(new o_(e,n,l,r)),r&&e.observer.ignore(()=>{iM(e.contentDOM);let n=e.root.activeElement;n&&!n.contains(e.contentDOM)&&n.blur()});let i=e.inputState.mouseSelection;if(i)return i.start(n),!1===i.dragging}return!1};let oM=(e,n,r)=>n>=r.top&&n<=r.bottom&&e>=r.left&&e<=r.right;function oN(e,n){let r=e.posAtCoords({x:n.clientX,y:n.clientY},!1);return{pos:r,bias:function(e,n,r,i){let s=su.find(e.docView,n);if(!s)return 1;let o=n-s.posAtStart;if(0==o)return 1;if(o==s.length)return -1;let a=s.coordsAt(o,-1);if(a&&oM(r,i,a))return -1;let l=s.coordsAt(o,1);return l&&oM(r,i,l)?1:a&&a.bottom>=i?-1:1}(e,r,n.clientX,n.clientY)}}let oD=i2.ie&&i2.ie_version<=11,oI=null,o$=0,oR=0;function oL(e){if(!oD)return e.detail;let n=oI,r=oR;return oI=e,oR=Date.now(),o$=!n||r>Date.now()-400&&2>Math.abs(n.clientX-e.clientX)&&2>Math.abs(n.clientY-e.clientY)?(o$+1)%3:1}function oQ(e,n,r,i){let s;if(!(r=oT(e.state,sQ,r)))return;let o=e.posAtCoords({x:n.clientX,y:n.clientY},!1),{draggedContent:a}=e.inputState,l=i&&a&&((s=e.state.facet(sN)).length?s[0](n):i2.mac?!n.altKey:!n.ctrlKey)?{from:a.from,to:a.to}:null,h={from:o,insert:r},c=e.state.changes(l?[l,h]:h);e.focus(),e.dispatch({changes:c,selection:{anchor:c.mapPos(o,-1),head:c.mapPos(o,1)},userEvent:l?"move.drop":"input.drop"}),e.inputState.draggedContent=null}ok.dragstart=(e,n)=>{let{selection:{main:r}}=e.state;if(n.target.draggable){let i=e.docView.nearest(n.target);if(i&&i.isWidget){let e=i.posAtStart,n=e+i.length;(e>=r.to||n<=r.from)&&(r=rd.range(e,n))}}let{inputState:i}=e;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=r,n.dataTransfer&&(n.dataTransfer.setData("Text",oT(e.state,sj,e.state.sliceDoc(r.from,r.to))),n.dataTransfer.effectAllowed="copyMove"),!1},ok.dragend=e=>(e.inputState.draggedContent=null,!1),ok.drop=(e,n)=>{if(!n.dataTransfer)return!1;if(e.state.readOnly)return!0;let r=n.dataTransfer.files;if(r&&r.length){let i=Array(r.length),s=0,o=()=>{++s==r.length&&oQ(e,n,i.filter(e=>null!=e).join(e.state.lineBreak),!1)};for(let e=0;e<r.length;e++){let n=new FileReader;n.onerror=o,n.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(n.result)||(i[e]=n.result),o()},n.readAsText(r[e])}return!0}{let r=n.dataTransfer.getData("Text");if(r)return oQ(e,n,r,!0),!0}return!1},ok.paste=(e,n)=>{if(e.state.readOnly)return!0;e.observer.flush();let r=oE?null:n.clipboardData;return r?(oP(e,r.getData("text/plain")||r.getData("text/uri-list")),!0):(!function(e){let n=e.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(()=>{e.focus(),r.remove(),oP(e,r.value)},50)}(e),!1)};let oj=null;ok.copy=ok.cut=(e,n)=>{let{text:r,ranges:i,linewise:s}=function(e){let n=[],r=[],i=!1;for(let i of e.selection.ranges)i.empty||(n.push(e.sliceDoc(i.from,i.to)),r.push(i));if(!n.length){let s=-1;for(let{from:i}of e.selection.ranges){let o=e.doc.lineAt(i);o.number>s&&(n.push(o.text),r.push({from:o.from,to:Math.min(e.doc.length,o.to+1)})),s=o.number}i=!0}return{text:oT(e,sj,n.join(e.lineBreak)),ranges:r,linewise:i}}(e.state);if(!r&&!s)return!1;oj=s?r:null,"cut"!=n.type||e.state.readOnly||e.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let o=oE?null:n.clipboardData;return o?(o.clearData(),o.setData("text/plain",r),!0):(!function(e,n){let r=e.dom.parentNode;if(!r)return;let i=r.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=n,i.focus(),i.selectionEnd=n.length,i.selectionStart=0,setTimeout(()=>{i.remove(),e.focus()},50)}(e,r),!1)};let oV=rL.define();function oz(e,n){let r=[];for(let i of e.facet(sL)){let s=i(e,n);s&&r.push(s)}return r.length?e.update({effects:r,annotations:oV.of(!0)}):null}function oB(e){setTimeout(()=>{let n=e.hasFocus;if(n!=e.inputState.notifiedFocused){let r=oz(e.state,n);r?e.dispatch(r):e.update([])}},10)}oC.focus=e=>{e.inputState.lastFocusTime=Date.now(),!e.scrollDOM.scrollTop&&(e.inputState.lastScrollTop||e.inputState.lastScrollLeft)&&(e.scrollDOM.scrollTop=e.inputState.lastScrollTop,e.scrollDOM.scrollLeft=e.inputState.lastScrollLeft),oB(e)},oC.blur=e=>{e.observer.clearSelectionRange(),oB(e)},oC.compositionstart=oC.compositionupdate=e=>{!e.observer.editContext&&(null==e.inputState.compositionFirstChange&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0))},oC.compositionend=e=>{e.observer.editContext||(e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionPendingKey=!0,e.inputState.compositionPendingChange=e.observer.pendingRecords().length>0,e.inputState.compositionFirstChange=null,i2.chrome&&i2.android?e.observer.flushSoon():e.inputState.compositionPendingChange?Promise.resolve().then(()=>e.observer.flush()):setTimeout(()=>{e.inputState.composing<0&&e.docView.hasComposition&&e.update([])},50))},oC.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()},ok.beforeinput=(e,n)=>{var r,i;let s;if("insertReplacementText"==n.inputType&&e.observer.editContext){let i=null==(r=n.dataTransfer)?void 0:r.getData("text/plain"),s=n.getTargetRanges();if(i&&s.length){let n=s[0],r=e.posAtDOM(n.startContainer,n.startOffset),o=e.posAtDOM(n.endContainer,n.endOffset);return oy(e,{from:r,to:o,insert:e.state.toText(i)},null),!0}}if(i2.chrome&&i2.android&&(s=ob.find(e=>e.inputType==n.inputType))&&(e.observer.delayAndroidKey(s.key,s.keyCode),"Backspace"==s.key||"Delete"==s.key)){let n=(null==(i=window.visualViewport)?void 0:i.height)||0;setTimeout(()=>{var r;((null==(r=window.visualViewport)?void 0:r.height)||0)>n+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())},100)}return i2.ios&&"deleteContentForward"==n.inputType&&e.observer.flushSoon(),i2.safari&&"insertText"==n.inputType&&e.inputState.composing>=0&&setTimeout(()=>oC.compositionend(e,n),20),!1};let oF=new Set,oZ=["pre-wrap","normal","pre-line","break-spaces"],oq=!1;class oW{constructor(e){this.lineWrapping=e,this.doc=nK.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return oZ.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(10*i)]||(n=!0,this.heightSamples[Math.floor(10*i)]=!0)}return n}refresh(e,n,r,i,s,o){let a=oZ.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=s,l){this.heightSamples={};for(let e=0;e<o.length;e++){let n=o[e];n<0?e++:this.heightSamples[Math.floor(10*n)]=!0}}return l}}class oX{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class oU{constructor(e,n,r,i,s){this.from=e,this.length=n,this.top=r,this.height=i,this._content=s}get type(){return"number"==typeof this._content?si.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof sl?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new oU(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var oY=((d9=oY||(oY={}))[d9.ByPos=0]="ByPos",d9[d9.ByHeight=1]="ByHeight",d9[d9.ByPosNoHeight=2]="ByPosNoHeight",d9);class oG{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=2*!!e|-3&this.flags}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>.001&&(oq=!0),this.height=e)}replace(e,n,r){return oG.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let s=this,o=r.doc;for(let a=i.length-1;a>=0;a--){let{fromA:l,toA:h,fromB:c,toB:u}=i[a],d=s.lineAt(l,oY.ByPosNoHeight,r.setDoc(n),0,0),p=d.to>=h?d:s.lineAt(h,oY.ByPosNoHeight,r,0,0);for(u+=p.to-h,h=p.to;a>0&&d.from<=i[a-1].toA;)l=i[a-1].fromA,c=i[a-1].fromB,a--,l<d.from&&(d=s.lineAt(l,oY.ByPosNoHeight,r,0,0));c+=d.from-l,l=d.from;let f=o5.build(r.setDoc(o),e,c,u);s=oH(s,s.replace(l,h,f))}return s.updateHeight(r,0)}static empty(){return new oJ(0,0)}static of(e){if(1==e.length)return e[0];let n=0,r=e.length,i=0,s=0;for(;;)if(n==r)if(i>2*s){let s=e[n-1];s.break?e.splice(--n,1,s.left,null,s.right):e.splice(--n,1,s.left,s.right),r+=1+s.break,i-=s.size}else if(s>2*i){let n=e[r];n.break?e.splice(r,1,n.left,null,n.right):e.splice(r,1,n.left,n.right),r+=2+n.break,s-=n.size}else break;else if(i<s){let r=e[n++];r&&(i+=r.size)}else{let n=e[--r];n&&(s+=n.size)}let o=0;return null==e[n-1]?(o=1,n--):null==e[n]&&(o=1,r++),new o1(oG.of(e.slice(0,n)),o,oG.of(e.slice(r)))}}function oH(e,n){return e==n?e:(e.constructor!=n.constructor&&(oq=!0),n)}oG.prototype.size=1;class oK extends oG{constructor(e,n,r){super(e,n),this.deco=r}blockAt(e,n,r,i){return new oU(i,this.length,r,this.height,this.deco||0)}lineAt(e,n,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,n,r,i,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,r,i,s))}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class oJ extends oK{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,r,i){return new oU(i,this.length,r,this.height,this.breaks)}replace(e,n,r){let i=r[0];return 1==r.length&&(i instanceof oJ||i instanceof o0&&4&i.flags)&&10>Math.abs(this.length-i.length)?(i instanceof o0?i=new oJ(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):oG.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setHeight(i.heights[i.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class o0 extends oG{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,s=i-r+1,o,a=0;if(e.lineWrapping){let n=Math.min(this.height,e.lineHeight*s);o=n/s,this.length>s+1&&(a=(this.height-n)/(this.length-s-1))}else o=this.height/s;return{firstLine:r,lastLine:i,perLine:o,perChar:a}}blockAt(e,n,r,i){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,i);if(n.lineWrapping){let s=i+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),o=n.doc.lineAt(s),h=a+o.length*l,c=Math.max(r,e-h/2);return new oU(o.from,o.length,c,h,0)}{let i=Math.max(0,Math.min(o-s,Math.floor((e-r)/a))),{from:l,length:h}=n.doc.line(s+i);return new oU(l,h,r+a*i,a,0)}}lineAt(e,n,r,i,s){if(n==oY.ByHeight)return this.blockAt(e,r,i,s);if(n==oY.ByPosNoHeight){let{from:n,to:i}=r.doc.lineAt(e);return new oU(n,i-n,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(r,s),h=r.doc.lineAt(e),c=a+h.length*l,u=h.number-o,d=i+a*u+l*(h.from-s-u);return new oU(h.from,h.length,Math.max(i,Math.min(d,i+this.height-c)),c,0)}forEachLine(e,n,r,i,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:l,perChar:h}=this.heightMetrics(r,s);for(let c=e,u=i;c<=n;){let n=r.doc.lineAt(c);if(c==e){let r=n.number-a;u+=l*r+h*(e-s-r)}let i=l+h*n.length;o(new oU(n.from,n.length,u,i,0)),u+=i,c=n.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let e=r[r.length-1];e instanceof o0?r[r.length-1]=new o0(e.length+i):r.push(null,new o0(i-1))}if(e>0){let n=r[0];n instanceof o0?r[0]=new o0(e+n.length):r.unshift(new o0(e-1),null)}return oG.of(r)}decomposeLeft(e,n){n.push(new o0(e-1),null)}decomposeRight(e,n){n.push(null,new o0(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let s=n+this.length;if(i&&i.from<=n+this.length&&i.more){let r=[],o=Math.max(n,i.from),a=-1;for(i.from>n&&r.push(new o0(i.from-n-1).updateHeight(e,n));o<=s&&i.more;){let n=e.doc.lineAt(o).length;r.length&&r.push(null);let s=i.heights[i.index++];-1==a?a=s:Math.abs(s-a)>=.001&&(a=-2);let l=new oJ(n,s);l.outdated=!1,r.push(l),o+=n+1}o<=s&&r.push(null,new o0(s-o).updateHeight(e,o));let l=oG.of(r);return(a<0||Math.abs(l.height-this.height)>=.001||Math.abs(a-this.heightMetrics(e,n).perLine)>=.001)&&(oq=!0),oH(this,l)}return(r||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class o1 extends oG{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return 1&this.flags}blockAt(e,n,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,s,i+this.left.length+this.break)}lineAt(e,n,r,i,s){let o=i+this.left.height,a=s+this.left.length+this.break,l=n==oY.ByHeight?e<o:e<a,h=l?this.left.lineAt(e,n,r,i,s):this.right.lineAt(e,n,r,o,a);if(this.break||(l?h.to<a:h.from>a))return h;let c=n==oY.ByPosNoHeight?oY.ByPosNoHeight:oY.ByPos;return l?h.join(this.right.lineAt(a,c,r,o,a)):this.left.lineAt(a,c,r,i,s).join(h)}forEachLine(e,n,r,i,s,o){let a=i+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,r,i,s,o),n>=l&&this.right.forEachLine(e,n,r,a,l,o);else{let h=this.lineAt(l,oY.ByPos,r,i,s);e<h.from&&this.left.forEachLine(e,h.from-1,r,i,s,o),h.to>=e&&h.from<=n&&o(h),n>h.to&&this.right.forEachLine(h.to+1,n,r,a,l,o)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let e of r)s.push(e);if(e>0&&o2(s,o-1),n<this.length){let e=s.length;this.decomposeRight(n,s),o2(s,e)}return oG.of(s)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&e>=++r&&n.push(null),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?oG.of(this.break?[e,null,n]:[e,n]):(this.left=oH(this.left,e),this.right=oH(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return(i&&i.from<=n+s.length&&i.more?l=s=s.updateHeight(e,n,r,i):s.updateHeight(e,n,r),i&&i.from<=a+o.length&&i.more?l=o=o.updateHeight(e,a,r,i):o.updateHeight(e,a,r),l)?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function o2(e,n){let r,i;null==e[n]&&(r=e[n-1])instanceof o0&&(i=e[n+1])instanceof o0&&e.splice(n-1,3,new o0(r.length+1+i.length))}class o5{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let e=Math.min(n,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof oJ?r.length+=e-this.pos:(e>this.pos||!this.isCovered)&&this.nodes.push(new oJ(e-this.pos,-1)),this.writtenTo=e,n>e&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=n-e;r.block?this.addBlock(new oK(o,i,r)):(o||s||i>=5)&&this.addLineDeco(i,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new oJ(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new o0(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof oJ)return e;let n=new oJ(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||n instanceof oJ||this.isCovered?(this.writtenTo<this.pos||null==n)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new oJ(0,-1));let r=e;for(let e of this.nodes)e instanceof oJ&&e.updateHeight(this.oracle,r),r+=e?e.length:1;return this.nodes}static build(e,n,r,i){let s=new o5(r,e);return r0.spans(n,r,i,s,0),s.finish(r)}}class o4{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&sc(e,n,this.changes,5)}}class o3{constructor(e,n,r,i){this.from=e,this.to=n,this.size=r,this.displaySize=i}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=n[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,n){return ss.replace({widget:new o6(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class o6 extends sr{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class o9{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=at,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=sy.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(sJ).some(e=>"function"!=typeof e&&"cm-lineWrapping"==e.class);this.heightOracle=new oW(n),this.stateDeco=e.facet(s0).filter(e=>"function"!=typeof e),this.heightMap=oG.empty().applyChanges(this.stateDeco,nK.empty,this.heightOracle.setDoc(e.doc),[new s7(0,0,0,e.doc.length)]);for(let e=0;e<2&&(this.viewport=this.getViewport(0,null),this.updateForViewport());e++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=ss.set(this.lineGaps.map(e=>e.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:e,to:n})=>i>=e&&i<=n)){let{from:n,to:r}=this.lineBlockAt(i);e.push(new o7(n,r))}}return this.viewports=e.sort((e,n)=>e.from-n.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?at:new an(this.heightOracle,this.heightMap,this.viewports),2*!e.eq(this.scaler)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(ar(e,this.scaler))})}update(e,n=null){var r,i;let s;this.state=e.state;let o=this.stateDeco;this.stateDeco=this.state.facet(s0).filter(e=>"function"!=typeof e);let a=e.changedRanges,l=s7.extendWithRanges(a,(r=this.stateDeco,i=e?e.changes:ri.empty(this.state.doc.length),s=new o4,r0.compare(o,r,i,s,0),s.changes)),h=this.heightMap.height,c=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);oq=!1,this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),l),(this.heightMap.height!=h||oq)&&(e.flags|=2),c?(this.scrollAnchorPos=e.changes.mapPos(c.from,-1),this.scrollAnchorHeight=c.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=h);let u=l.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<u.from||n.range.head>u.to)||!this.viewportIsAppropriate(u))&&(u=this.getViewport(0,n));let d=u.from!=this.viewport.from||u.to!=this.viewport.to;this.viewport=u,e.flags|=this.updateForViewport(),(d||!e.changes.empty||2&e.flags)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(sz)&&(this.mustEnforceCursorAssoc=!0)}measure(e){var n;let r,i,s=e.contentDOM,o=window.getComputedStyle(s),a=this.heightOracle,l=o.whiteSpace;this.defaultTextDirection="rtl"==o.direction?sy.RTL:sy.LTR;let h=this.heightOracle.mustRefreshForWrapping(l),c=s.getBoundingClientRect(),u=h||this.mustMeasureContent||this.contentDOMHeight!=c.height;this.contentDOMHeight=c.height,this.mustMeasureContent=!1;let d=0,p=0;if(c.width&&c.height){let{scaleX:e,scaleY:n}=iT(s,c);(e>.005&&Math.abs(this.scaleX-e)>.005||n>.005&&Math.abs(this.scaleY-n)>.005)&&(this.scaleX=e,this.scaleY=n,d|=16,h=u=!0)}let f=(parseInt(o.paddingTop)||0)*this.scaleY,g=(parseInt(o.paddingBottom)||0)*this.scaleY;(this.paddingTop!=f||this.paddingBottom!=g)&&(this.paddingTop=f,this.paddingBottom=g,d|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(a.lineWrapping&&(u=!0),this.editorWidth=e.scrollDOM.clientWidth,d|=16);let m=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=m&&(this.scrollAnchorHeight=-1,this.scrollTop=m),this.scrolledToBottom=i$(e.scrollDOM);let y=(this.printing?function(e,n){let r=e.getBoundingClientRect();return{left:0,right:r.right-r.left,top:n,bottom:r.bottom-(r.top+n)}}:function(e,n){let r=e.getBoundingClientRect(),i=e.ownerDocument,s=i.defaultView||window,o=Math.max(0,r.left),a=Math.min(s.innerWidth,r.right),l=Math.max(0,r.top),h=Math.min(s.innerHeight,r.bottom);for(let n=e.parentNode;n&&n!=i.body;)if(1==n.nodeType){let r=n,i=window.getComputedStyle(r);if((r.scrollHeight>r.clientHeight||r.scrollWidth>r.clientWidth)&&"visible"!=i.overflow){let i=r.getBoundingClientRect();o=Math.max(o,i.left),a=Math.min(a,i.right),l=Math.max(l,i.top),h=Math.min(n==e.parentNode?s.innerHeight:h,i.bottom)}n="absolute"==i.position||"fixed"==i.position?r.offsetParent:r.parentNode}else if(11==n.nodeType)n=n.host;else break;return{left:o-r.left,right:Math.max(o,a)-r.left,top:l-(r.top+n),bottom:Math.max(l,h)-(r.top+n)}})(s,this.paddingTop),O=y.top-this.pixelViewport.top,b=y.bottom-this.pixelViewport.bottom;this.pixelViewport=y;let x=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(x!=this.inView&&(this.inView=x,x&&(u=!0)),!this.inView&&!this.scrollTarget&&(r=(n=e.dom).getBoundingClientRect(),i=n.ownerDocument.defaultView||window,!(r.left<i.innerWidth)||!(r.right>0)||!(r.top<i.innerHeight)||!(r.bottom>0)))return 0;let w=c.width;if((this.contentDOMWidth!=w||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=c.width,this.editorHeight=e.scrollDOM.clientHeight,d|=16),u){let n=e.docView.measureVisibleLineHeights(this.viewport);if(a.mustRefreshForHeights(n)&&(h=!0),h||a.lineWrapping&&Math.abs(w-this.contentDOMWidth)>a.charWidth){let{lineHeight:r,charWidth:i,textHeight:s}=e.docView.measureTextSize();(h=r>0&&a.refresh(l,r,i,s,Math.max(5,w/i),n))&&(e.docView.minWidth=0,d|=16)}for(let r of(O>0&&b>0?p=Math.max(O,b):O<0&&b<0&&(p=Math.min(O,b)),oq=!1,this.viewports)){let i=r.from==this.viewport.from?n:e.docView.measureVisibleLineHeights(r);this.heightMap=(h?oG.empty().applyChanges(this.stateDeco,nK.empty,this.heightOracle,[new s7(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(a,0,h,new oX(r.from,i))}oq&&(d|=2)}let S=!this.viewportIsAppropriate(this.viewport,p)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return S&&(2&d&&(d|=this.updateScaler()),this.viewport=this.getViewport(p,this.scrollTarget),d|=this.updateForViewport()),(2&d||S)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(h?[]:this.lineGaps,e)),d|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),d}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new o7(i.lineAt(o-1e3*r,oY.ByHeight,s,0,0).from,i.lineAt(a+(1-r)*1e3,oY.ByHeight,s,0,0).to);if(n){let{head:e}=n.range;if(e<l.from||e>l.to){let r=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),o=i.lineAt(e,oY.ByPos,s,0,0),a;a="center"==n.y?(o.top+o.bottom)/2-r/2:"start"==n.y||"nearest"==n.y&&e<l.from?o.top:o.bottom-r,l=new o7(i.lineAt(a-500,oY.ByHeight,s,0,0).from,i.lineAt(a+r+500,oY.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new o7(this.heightMap.lineAt(r,oY.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,oY.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,oY.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,oY.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(0==e||i<=o-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(r,250)))&&i>o-2e3&&s<a+2e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new o3(n.mapPos(i.from),n.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,o=i<<1;if(this.defaultTextDirection!=sy.LTR&&!r)return[];let a=[],l=(i,o,h,c)=>{if(o-i<s)return;let u=this.state.selection.main,d=[u.from];for(let e of(u.empty||d.push(u.to),d))if(e>i&&e<o){l(i,e-10,h,c),l(e+10,o,h,c);return}let p=function(e,n){for(let r of e)if(n(r))return r}(e,e=>e.from>=h.from&&e.to<=h.to&&Math.abs(e.from-i)<s&&Math.abs(e.to-o)<s&&!d.some(n=>e.from<n&&e.to>n));if(!p){if(o<h.to&&n&&r&&n.visibleRanges.some(e=>e.from<=o&&e.to>=o)){let e=n.moveToLineBoundary(rd.cursor(o),!1,!0).head;e>i&&(o=e)}let e=this.gapSize(h,i,o,c),s=r||e<2e6?e:2e6;p=new o3(i,o,e,s)}a.push(p)},h=n=>{var s,a,h;let c,u,d,p,f;if(n.length<o||n.type!=si.Text)return;let g=(s=n.from,a=n.to,h=this.stateDeco,d=[],p=s,f=0,r0.spans(h,s,a,{span(){},point(e,n){e>p&&(d.push({from:p,to:e}),f+=e-p),p=n}},20),p<a&&(d.push({from:p,to:a}),f+=a-p),{total:f,ranges:d});if(g.total<o)return;let m=this.scrollTarget?this.scrollTarget.range.head:null;if(r){let e,r,s=i/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=m){let i=ae(g,m),o=((this.visibleBottom-this.visibleTop)/2+s)/n.height;e=i-o,r=i+o}else e=(this.visibleTop-n.top-s)/n.height,r=(this.visibleBottom-n.top+s)/n.height;c=o8(g,e),u=o8(g,r)}else{let r,s,o=g.total*this.heightOracle.charWidth,a=i*this.heightOracle.charWidth,l=0;if(o>2e6)for(let r of e)r.from>=n.from&&r.from<n.to&&r.size!=r.displaySize&&r.from*this.heightOracle.charWidth+l<this.pixelViewport.left&&(l=r.size-r.displaySize);let h=this.pixelViewport.left+l,d=this.pixelViewport.right+l;if(null!=m){let e=ae(g,m),n=((d-h)/2+a)/o;r=e-n,s=e+n}else r=(h-a)/o,s=(d+a)/o;c=o8(g,r),u=o8(g,s)}c>n.from&&l(n.from,c,n,g),u<n.to&&l(u,n.to,n,g)};for(let e of this.viewportLines)Array.isArray(e.type)?e.type.forEach(h):h(e);return a}gapSize(e,n,r,i){let s=ae(i,r)-ae(i,n);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){o3.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=ss.set(e.map(e=>e.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let r=[];r0.spans(n,this.viewport.from,this.viewport.to,{span(e,n){r.push({from:e,to:n})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let n=0;n<r.length&&!(8&i);n++){let s=this.visibleRanges[n],o=r[n];(s.from!=o.from||s.to!=o.to)&&(i|=4,e&&e.mapPos(s.from,-1)==o.from&&e.mapPos(s.to,1)==o.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||ar(this.heightMap.lineAt(e,oY.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||ar(this.heightMap.lineAt(this.scaler.fromDOM(e),oY.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return ar(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class o7{constructor(e,n){this.from=e,this.to=n}}function o8({total:e,ranges:n},r){if(r<=0)return n[0].from;if(r>=1)return n[n.length-1].to;let i=Math.floor(e*r);for(let e=0;;e++){let{from:r,to:s}=n[e],o=s-r;if(i<=o)return r+i;i-=o}}function ae(e,n){let r=0;for(let{from:i,to:s}of e.ranges){if(n<=s){r+=n-i;break}r+=s-i}return r/e.total}let at={toDOM:e=>e,fromDOM:e=>e,scale:1,eq(e){return e==this}};class an{constructor(e,n,r){let i=0,s=0,o=0;for(let a of(this.viewports=r.map(({from:r,to:s})=>{let o=n.lineAt(r,oY.ByPos,e,0,0).top,a=n.lineAt(s,oY.ByPos,e,0,0).bottom;return i+=a-o,{from:r,to:s,top:o,bottom:a,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i),this.viewports))a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}eq(e){return e instanceof an&&this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,r)=>n.from==e.viewports[r].from&&n.to==e.viewports[r].to)}}function ar(e,n){if(1==n.scale)return e;let r=n.toDOM(e.top),i=n.toDOM(e.bottom);return new oU(e.from,e.length,r,i-r,Array.isArray(e._content)?e._content.map(e=>ar(e,n)):e._content)}let ai=rg.define({combine:e=>e.join(" ")}),as=rg.define({combine:e=>e.indexOf(!0)>-1}),ao=il.newName(),aa=il.newName(),al=il.newName(),ah={"&light":"."+aa,"&dark":"."+al};function ac(e,n,r){return new il(n,{finish:n=>/&/.test(n)?n.replace(/&\w*/,n=>{if("&"==n)return e;if(!r||!r[n])throw RangeError(`Unsupported selector: ${n}`);return r[n]}):e+" "+n})}let au=ac("."+ao,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},ah),ad={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},ap=i2.ie&&i2.ie_version<=11;class af{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new iP,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let e of n)this.queue.push(e);(i2.ie&&i2.ie_version<=11||i2.ios&&e.composing)&&n.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&i2.android&&!1!==e.constructor.EDIT_CONTEXT&&!(i2.chrome&&i2.chrome_version<126)&&(this.editContext=new ay(e),e.state.facet(sX)&&(e.contentDOM.editContext=this.editContext.editContext)),ap&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver(()=>{var e;(null==(e=this.view.docView)?void 0:e.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver(e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){("change"!=e.type&&e.type||e.matches)&&(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){for(let n of(this.gapIntersection.disconnect(),e))this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(sX)?r.root.activeElement!=this.dom:!ib(this.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(i2.ie&&i2.ie_version<=11||i2.android&&i2.chrome)&&!r.state.selection.main.empty&&i.focusNode&&iw(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=iO(e.root);if(!n)return!1;let r=i2.safari&&11==e.root.nodeType&&e.root.activeElement==this.dom&&function(e,n){if(n.getComposedRanges){let r=n.getComposedRanges(e.root)[0];if(r)return am(e,r)}let r=null;function i(e){e.preventDefault(),e.stopImmediatePropagation(),r=e.getTargetRanges()[0]}return e.contentDOM.addEventListener("beforeinput",i,!0),e.dom.ownerDocument.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",i,!0),r?am(e,r):null}(this.view,n)||n;if(!r||this.selectionRange.eq(r))return!1;let i=ib(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&function(e,n){let r=n.focusNode,i=n.focusOffset;if(!r||n.anchorNode!=r||n.anchorOffset!=i)return!1;for(i=Math.min(i,iC(r));;)if(i){if(1!=r.nodeType)return!1;let e=r.childNodes[i-1];"false"==e.contentEditable?i--:i=iC(r=e)}else{if(r==e)return!0;i=iS(r),r=r.parentNode}}(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(1==r.nodeType)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(11==r.nodeType)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);for(let e of this.scrollTargets=n)e.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,ad),ap&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),ap&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let e=()=>{let e=this.delayedAndroidKey;e&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=e.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&e.force&&iD(this.dom,e.key,e.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(e)}this.delayedAndroidKey&&"Enter"!=e||(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(null==(r=this.delayedAndroidKey)?void 0:r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let s of e){let e=this.readMutation(s);e&&(e.typeOver&&(i=!0),-1==n?{from:n,to:r}=e:(n=Math.min(e.from,n),r=Math.max(e.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&ib(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new og(this.view,e,n,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let r=this.view.state,i=om(this.view,n);return this.view.state==r&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty("attributes"==e.type),"attributes"==e.type&&(n.flags|=4),"childList"==e.type){let r=ag(n,e.previousSibling||e.target.previousSibling,-1),i=ag(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(sX)!=e.state.facet(sX)&&(e.view.contentDOM.editContext=e.state.facet(sX)?this.editContext.editContext:null))}destroy(){var e,n,r;for(let i of(this.stop(),null==(e=this.intersection)||e.disconnect(),null==(n=this.gapIntersection)||n.disconnect(),null==(r=this.resizeScroll)||r.disconnect(),this.scrollTargets))i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function ag(e,n,r){for(;n;){let i=iV.get(n);if(i&&i.parent==e)return i;let s=n.parentNode;n=s!=e.dom?s:r>0?n.nextSibling:n.previousSibling}return null}function am(e,n){let r=n.startContainer,i=n.startOffset,s=n.endContainer,o=n.endOffset,a=e.docView.domAtPos(e.state.selection.main.anchor);return iw(a.node,a.offset,s,o)&&([r,i,s,o]=[s,o,r,i]),{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:o}}class ay{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});for(let r in this.handlers.textupdate=n=>{let r=e.state.selection.main,{anchor:i,head:s}=r,o=this.toEditorPos(n.updateRangeStart),a=this.toEditorPos(n.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:n.updateRangeStart,editorBase:o,drifted:!1});let l={from:o,to:a,insert:nK.of(n.text.split("\n"))};if(l.from==this.from&&i<this.from?l.from=i:l.to==this.to&&i>this.to&&(l.to=i),l.from==l.to&&!l.insert.length){let i=rd.single(this.toEditorPos(n.selectionStart),this.toEditorPos(n.selectionEnd));i.main.eq(r)||e.dispatch({selection:i,userEvent:"select"});return}if((i2.mac||i2.android)&&l.from==s-1&&/^\. ?$/.test(n.text)&&"off"==e.contentDOM.getAttribute("autocorrect")&&(l={from:o,to:a,insert:nK.of([n.text.replace("."," ")])}),this.pendingContextChange=l,!e.state.readOnly){let r=this.to-this.from+(l.to-l.from+l.insert.length);oy(e,l,rd.single(this.toEditorPos(n.selectionStart,r),this.toEditorPos(n.selectionEnd,r)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=r=>{let i=[],s=null;for(let n=this.toEditorPos(r.rangeStart),o=this.toEditorPos(r.rangeEnd);n<o;n++){let r=e.coordsForChar(n);s=r&&new DOMRect(r.left,r.top,r.right-r.left,r.bottom-r.top)||s||new DOMRect,i.push(s)}n.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=n=>{let r=[];for(let e of n.getTextFormats()){let n=e.underlineStyle,i=e.underlineThickness;if("None"!=n&&"None"!=i){let s=this.toEditorPos(e.rangeStart),o=this.toEditorPos(e.rangeEnd);if(s<o){let e=`text-decoration: underline ${"Dashed"==n?"dashed ":"Squiggle"==n?"wavy ":""}${"Thin"==i?1:2}px`;r.push(ss.mark({attributes:{style:e}}).range(s,o))}}}e.dispatch({effects:sq.of(ss.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:n}=this.composing;this.composing=null,n&&this.reset(e.state)}},this.handlers)n.addEventListener(r,this.handlers[r]);this.measureReq={read:e=>{this.editContext.updateControlBounds(e.contentDOM.getBoundingClientRect());let n=iO(e.root);n&&n.rangeCount&&this.editContext.updateSelectionBounds(n.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,o,a,l,h)=>{if(r)return;let c=h.length-(o-s);if(i&&o>=i.to)if(i.from==s&&i.to==o&&i.insert.eq(h)){i=this.pendingContextChange=null,n+=c,this.to+=c;return}else i=null,this.revertPending(e.state);if(s+=n,(o+=n)<=this.from)this.from+=c,this.to+=c;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+h.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),h.toString()),this.to+=c}n+=c}),i&&!r&&this.revertPending(e.state),!r}update(e){let n=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(e=>!e.isUserEvent("input.type")&&e.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):this.applyEdits(e)&&this.rangeIsValid(e.state)?(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state):(this.pendingContextChange=null,this.reset(e.state)),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),i=this.toContextPos(n.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>3e4)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class aO{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;for(let n of(this.dispatchTransactions=e.dispatchTransactions||r&&(e=>e.forEach(e=>r(e,this)))||(e=>this.update(e)),this.dispatch=this.dispatch.bind(this),this._root=e.root||function(e){for(;e;){if(e&&(9==e.nodeType||11==e.nodeType&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}(e.parent)||document,this.viewState=new o9(e.state||rU.create(e)),e.scrollTo&&e.scrollTo.is(sZ)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(sY).map(e=>new sH(e)),this.plugins))n.update(this);this.observer=new af(this),this.inputState=new oO(this),this.inputState.ensureHandlers(this.plugins),this.docView=new oe(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),(null==(n=document.fonts)?void 0:n.ready)&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=1==e.length&&e[0]instanceof rz?e:1==e.length&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(0!=this.updateState)throw Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,s=this.state;for(let n of e){if(n.startState!=s)throw RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=n.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(e=>e.annotation(oV))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,(l=oz(s,o))||(a=1));let h=this.observer.delayedAndroidKey,c=null;if(h?(this.observer.clearDelayedAndroidKey(),((c=this.observer.readChange())&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(rU.phrases)!=this.state.facet(rU.phrases))return this.setState(s);i=s8.create(this,s,e),i.flags|=a;let u=this.viewState.scrollTarget;try{for(let n of(this.updateState=2,e)){if(u&&(u=u.map(n.changes)),n.scrollIntoView){let{main:e}=n.state.selection;u=new sF(e.empty?e:rd.cursor(e.head,e.head>e.anchor?-1:1))}for(let e of n.effects)e.is(sZ)&&(u=e.value.clip(this.state))}this.viewState.update(i,u),this.bidiCache=ax.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(s9)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(e=>e.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(ai)!=i.state.facet(ai)&&(this.viewState.mustMeasureContent=!0),(n||r||u||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!i.empty)for(let e of this.state.facet(s$))try{e(i)}catch(e){sW(this.state,e,"update listener")}(l||c)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),c&&!om(this,c)&&h.force&&iD(this.contentDOM,h.key,h.keyCode)})}setState(e){if(0!=this.updateState)throw Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let e of this.plugins)e.destroy(this);for(let n of(this.viewState=new o9(e),this.plugins=e.facet(sY).map(e=>new sH(e)),this.pluginMap.clear(),this.plugins))n.update(this);this.docView.destroy(),this.docView=new oe(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(sY),r=e.state.facet(sY);if(n!=r){let i=[];for(let s of r){let r=n.indexOf(s);if(r<0)i.push(new sH(s));else{let n=this.plugins[r];n.mustUpdate=e,i.push(n)}}for(let n of this.plugins)n.mustUpdate!=e&&n.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let n of this.plugins)n.mustUpdate=e;for(let e=0;e<this.plugins.length;e++)this.plugins[e].update(this);n!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(e){sW(this.state,e,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let e=0;;e++){if(o<0)if(i$(r))s=-1,o=this.viewState.heightMap.height;else{let e=this.viewState.scrollAnchorAt(i);s=e.from,o=e.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(e>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let l=[];4&a||([this.measureRequests,l]=[l,this.measureRequests]);let h=l.map(e=>{try{return e.read(this)}catch(e){return sW(this.state,e),ab}}),c=s8.create(this,this.state,[]),u=!1;c.flags|=a,n?n.flags|=a:n=c,this.updateState=2,!c.empty&&(this.updatePlugins(c),this.inputState.update(c),this.updateAttrs(),(u=this.docView.update(c))&&this.docViewUpdate());for(let e=0;e<l.length;e++)if(h[e]!=ab)try{let n=l[e];n.write&&n.write(h[e],this)}catch(e){sW(this.state,e)}if(u&&this.docView.updateSelection(!0),!c.viewportChanged&&0==this.measureRequests.length){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let e=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(e>1||e<-1){r.scrollTop=(i+=e)/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let e of this.state.facet(s$))e(n)}get themeClasses(){return ao+" "+(this.state.facet(as)?al:aa)+" "+this.state.facet(ai)}updateAttrs(){let e=aw(this,sK,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(sX)?"true":"false",class:"cm-content",style:`${i2.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),aw(this,sJ,n);let r=this.observer.ignore(()=>{let r=sn(this.contentDOM,this.contentAttrs,n),i=sn(this.dom,this.editorAttrs,e);return r||i});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let e of r.effects)e.is(aO.announce)&&(n&&(this.announceDOM.textContent=""),n=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=e.value)}mountStyles(){this.styleModules=this.state.facet(s9);let e=this.state.facet(aO.cspNonce);il.mount(this.root,this.styleModules.concat(au).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(2==this.updateState)throw Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if((this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e)&&!(this.measureRequests.indexOf(e)>-1)){if(null!=e.key){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(void 0===n||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(n=>n.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return od(this,e,oc(this,e,n,r))}moveByGroup(e,n){return od(this,e,oc(this,e,n,n=>{var r;let i,s;return r=e.head,s=(i=this.state.charCategorizer(r))(n),e=>{let n=i(e);return s==rW.Space&&(s=n),s==n}}))}visualLineSide(e,n){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[n?r.length-1:0];return rd.cursor(s.side(n,i)+e.from,s.forward(!n,i)?1:-1)}moveToLineBoundary(e,n,r=!0){return function(e,n,r,i){let s=oh(e,n.head,n.assoc||-1),o=i&&s.type==si.Text&&(e.lineWrapping||s.widgetLineBreaks)?e.coordsAtPos(n.assoc<0&&n.head>s.from?n.head-1:n.head):null;if(o){let n=e.dom.getBoundingClientRect(),i=e.textDirectionAt(s.from),a=e.posAtCoords({x:r==(i==sy.LTR)?n.right-1:n.left+1,y:(o.top+o.bottom)/2});if(null!=a)return rd.cursor(a,r?-1:1)}return rd.cursor(r?s.to:s.from,r?-1:1)}(this,e,n,r)}moveVertically(e,n,r){return od(this,e,function(e,n,r,i){let s=n.head,o=r?1:-1;if(s==(r?e.state.doc.length:0))return rd.cursor(s,n.assoc);let a=n.goalColumn,l,h=e.contentDOM.getBoundingClientRect(),c=e.coordsAtPos(s,n.assoc||-1),u=e.documentTop;if(c)null==a&&(a=c.left-h.left),l=o<0?c.top:c.bottom;else{let n=e.viewState.lineBlockAt(s);null==a&&(a=Math.min(h.right-h.left,e.defaultCharacterWidth*(s-n.from))),l=(o<0?n.top:n.bottom)+u}let d=h.left+a,p=null!=i?i:e.viewState.heightOracle.textHeight>>1;for(let n=0;;n+=10){let r=l+(p+n)*o,i=oa(e,{x:d,y:r},!1,o);if(r<h.top||r>h.bottom||(o<0?i<s:i>s)){let n=e.docView.coordsForChar(i),s=!n||r<n.top?-1:1;return rd.cursor(i,s,void 0,a)}}}(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),oa(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i);return iE(r,s[sE.find(s,e-i.from,-1,n)].dir==sy.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(sV)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>av)return sP(e.length);let n=this.textDirectionAt(e.from),r;for(let i of this.bidiCache)if(i.from==e.from&&i.dir==n&&(i.fresh||function e(n,r){if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){let s=n[i],o=r[i];if(s.from!=o.from||s.to!=o.to||s.direction!=o.direction||!e(s.inner,o.inner))return!1}return!0}(i.isolates,r=s4(this,e))))return i.order;r||(r=s4(this,e));let i=function(e,n,r){if(!e)return[new sE(0,0,+(n==sv))];if(n==sO&&!r.length&&!sC.test(e))return sP(e.length);if(r.length)for(;e.length>sT.length;)sT[sT.length]=256;let i=[],s=+(n!=sO);return function e(n,r,i,s,o,a,l){let h=r%2?2:1;!function(e,n,r,i,s){for(let o=0;o<=i.length;o++){let a=o?i[o-1].to:n,l=o<i.length?i[o].from:r,h=o?256:s;for(let n=a,r=h,i=h;n<l;n++){let s=sk(e.charCodeAt(n));512==s?s=r:8==s&&4==i&&(s=16),sT[n]=4==s?2:s,7&s&&(i=s),r=s}for(let e=a,n=h,i=h;e<l;e++){let s=sT[e];if(128==s)e<l-1&&n==sT[e+1]&&24&n?s=sT[e]=n:sT[e]=256;else if(64==s){let s=e+1;for(;s<l&&64==sT[s];)s++;let o=e&&8==n||s<r&&8==sT[s]?1==i?1:8:256;for(let n=e;n<s;n++)sT[n]=o;e=s-1}else 8==s&&1==i&&(sT[e]=1);n=s,7&s&&(i=s)}}}(n,o,a,s,h),function(e,n,r,i,s){let o=1==s?2:1;for(let a=0,l=0,h=0;a<=i.length;a++){let c=a?i[a-1].to:n,u=a<i.length?i[a].from:r;for(let n=c,r,i,a;n<u;n++)if(i=sS[r=e.charCodeAt(n)])if(i<0){for(let e=l-3;e>=0;e-=3)if(s_[e+1]==-i){let r=s_[e+2],i=2&r?s:4&r?1&r?o:s:0;i&&(sT[n]=sT[s_[e]]=i),l=e;break}}else if(189==s_.length)break;else s_[l++]=n,s_[l++]=r,s_[l++]=h;else if(2==(a=sT[n])||1==a){let e=a==s;h=+!e;for(let n=l-3;n>=0;n-=3){let r=s_[n+2];if(2&r)break;if(e)s_[n+2]|=2;else{if(4&r)break;s_[n+2]|=4}}}}}(n,o,a,s,h),function(e,n,r,i){for(let s=0,o=i;s<=r.length;s++){let a=s?r[s-1].to:e,l=s<r.length?r[s].from:n;for(let h=a;h<l;){let a=sT[h];if(256==a){let a=h+1;for(;;)if(a==l){if(s==r.length)break;a=r[s++].to,l=s<r.length?r[s].from:n}else if(256==sT[a])a++;else break;let c=1==o,u=c==((a<n?sT[a]:i)==1)?c?1:2:i;for(let n=a,i=s,o=i?r[i-1].to:e;n>h;)n==o&&(n=r[--i].from,o=i?r[i-1].to:e),sT[--n]=u;h=a}else o=a,h++}}}(o,a,s,h),function n(r,i,s,o,a,l,h){let c=o%2?2:1;if(o%2==a%2)for(let u=i,d=0;u<s;){let i=!0,p=!1;if(d==l.length||u<l[d].from){let e=sT[u];e!=c&&(i=!1,p=16==e)}let f=i||1!=c?null:[],g=i?o:o+1,m=u;t:for(;;)if(d<l.length&&m==l[d].from){if(p)break;let n=l[d];if(!i)for(let e=n.to,r=d+1;;){if(e==s)break t;if(r<l.length&&l[r].from==e)e=l[r++].to;else if(sT[e]==c)break t;else break}d++,f?f.push(n):(n.from>u&&h.push(new sE(u,n.from,g)),e(r,n.direction==sO!=!(g%2)?o+1:o,a,n.inner,n.from,n.to,h),u=n.to),m=n.to}else if(m==s||(i?sT[m]!=c:sT[m]==c))break;else m++;f?n(r,u,m,o+1,a,f,h):u<m&&h.push(new sE(u,m,g)),u=m}else for(let u=s,d=l.length;u>i;){let s=!0,p=!1;if(!d||u>l[d-1].to){let e=sT[u-1];e!=c&&(s=!1,p=16==e)}let f=s||1!=c?null:[],g=s?o:o+1,m=u;t:for(;;)if(d&&m==l[d-1].to){if(p)break;let n=l[--d];if(!s)for(let e=n.from,r=d;;){if(e==i)break t;if(r&&l[r-1].to==e)e=l[--r].from;else if(sT[e-1]==c)break t;else break}f?f.push(n):(n.to<u&&h.push(new sE(n.to,u,g)),e(r,n.direction==sO!=!(g%2)?o+1:o,a,n.inner,n.from,n.to,h),u=n.from),m=n.from}else if(m==i||(s?sT[m-1]!=c:sT[m-1]==c))break;else m--;f?n(r,m,u,o+1,a,f,h):m<u&&h.push(new sE(m,u,g)),u=m}}(n,o,a,r,i,s,l)}(e,s,s,r,0,e.length,i),i}(e.text,n,r);return this.bidiCache.push(new ax(e.from,e.to,n,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||i2.safari&&(null==(e=this.inputState)?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{iM(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((9==e.nodeType?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of(this.root.activeElement==this.contentDOM&&this.contentDOM.blur(),this.plugins))e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return sZ.of(new sF("number"==typeof e?rd.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return sZ.of(new sF(rd.cursor(r.from),"start","start",r.top-e,n,!0))}setTabFocusMode(e){null==e?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:"boolean"==typeof e?this.inputState.tabFocusMode=e?0:-1:0!=this.inputState.tabFocusMode&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return sG.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return sG.define(()=>({}),{eventObservers:e})}static theme(e,n){let r=il.newName(),i=[ai.of(r),s9.of(ac(`.${r}`,e))];return n&&n.dark&&i.push(as.of(!0)),i}static baseTheme(e){return rS.lowest(s9.of(ac("."+ao,e,ah)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&iV.get(r)||iV.get(e);return(null==(n=null==i?void 0:i.rootView)?void 0:n.view)||null}}aO.styleModule=s9,aO.inputHandler=sR,aO.clipboardInputFilter=sQ,aO.clipboardOutputFilter=sj,aO.scrollHandler=sB,aO.focusChangeEffect=sL,aO.perLineTextDirection=sV,aO.exceptionSink=sI,aO.updateListener=s$,aO.editable=sX,aO.mouseSelectionStyle=sD,aO.dragMovesSelection=sN,aO.clickAddsSelectionRange=sM,aO.decorations=s0,aO.outerDecorations=s1,aO.atomicRanges=s2,aO.bidiIsolatedRanges=s5,aO.scrollMargins=s3,aO.darkTheme=as,aO.cspNonce=rg.define({combine:e=>e.length?e[0]:""}),aO.contentAttributes=sJ,aO.editorAttributes=sK,aO.lineWrapping=aO.contentAttributes.of({class:"cm-lineWrapping"}),aO.announce=rV.define();let av=4096,ab={};class ax{constructor(e,n,r,i,s,o){this.from=e,this.to=n,this.dir=r,this.isolates=i,this.fresh=s,this.order=o}static update(e,n){if(n.empty&&!e.some(e=>e.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:sy.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir!=i||n.touchesRange(o.from,o.to)||r.push(new ax(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return r}}function aw(e,n,r){for(let i=e.state.facet(n),s=i.length-1;s>=0;s--){let n=i[s],o="function"==typeof n?n(e):n;o&&i8(o,r)}return r}let aS=i2.mac?"mac":i2.windows?"win":i2.linux?"linux":"key";function a_(e,n,r){return n.altKey&&(e="Alt-"+e),n.ctrlKey&&(e="Ctrl-"+e),n.metaKey&&(e="Meta-"+e),!1!==r&&n.shiftKey&&(e="Shift-"+e),e}let ak=rS.default(aO.domEventHandlers({keydown:(e,n)=>{let r,i;return function(e,n,r,i){var s;aP=n;let o=("Esc"==(s=!(ip&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||ig&&n.shiftKey&&n.key&&1==n.key.length||"Unidentified"==n.key)&&n.key||(n.shiftKey?id:iu)[n.keyCode]||n.key||"Unidentified")&&(s="Escape"),"Del"==s&&(s="Delete"),"Left"==s&&(s="ArrowLeft"),"Up"==s&&(s="ArrowUp"),"Right"==s&&(s="ArrowRight"),"Down"==s&&(s="ArrowDown"),s),a=re(n7(o,0))==o.length&&" "!=o,l="",h=!1,c=!1,u=!1;aT&&aT.view==r&&aT.scope==i&&(l=aT.prefix+" ",0>ow.indexOf(n.keyCode)&&(c=!0,aT=null));let d=new Set,p=e=>{if(e){for(let n of e.run)if(!d.has(n)&&(d.add(n),n(r)))return e.stopPropagation&&(u=!0),!0;e.preventDefault&&(e.stopPropagation&&(u=!0),c=!0)}return!1},f=e[i],g,m;return f&&(p(f[l+a_(o,n,!a)])?h=!0:a&&(n.altKey||n.metaKey||n.ctrlKey)&&!(i2.windows&&n.ctrlKey&&n.altKey)&&!(i2.mac&&n.altKey&&!n.ctrlKey)&&(g=iu[n.keyCode])&&g!=o?p(f[l+a_(g,n,!0)])?h=!0:n.shiftKey&&(m=id[n.keyCode])!=o&&m!=g&&p(f[l+a_(m,n,!1)])&&(h=!0):a&&n.shiftKey&&p(f[l+a_(o,n,!0)])&&(h=!0),!h&&p(f._any)&&(h=!0)),c&&(h=!0),h&&u&&n.stopPropagation(),aP=null,h}((r=n.state.facet(aC),(i=aE.get(r))||aE.set(r,i=function(e,n=aS){let r=Object.create(null),i=Object.create(null),s=(e,n)=>{let r=i[e];if(null==r)i[e]=n;else if(r!=n)throw Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},o=(e,i,o,a,l)=>{var h,c;let u=r[e]||(r[e]=Object.create(null)),d=i.split(/ (?!$)/).map(e=>(function(e,n){let r,i,s,o,a=e.split(/-(?!$)/),l=a[a.length-1];"Space"==l&&(l=" ");for(let e=0;e<a.length-1;++e){let l=a[e];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))"mac"==n?o=!0:i=!0;else throw Error("Unrecognized modifier name: "+l)}return r&&(l="Alt-"+l),i&&(l="Ctrl-"+l),o&&(l="Meta-"+l),s&&(l="Shift-"+l),l})(e,n));for(let n=1;n<d.length;n++){let r=d.slice(0,n).join(" ");s(r,!0),u[r]||(u[r]={preventDefault:!0,stopPropagation:!1,run:[n=>{let i=aT={view:n,prefix:r,scope:e};return setTimeout(()=>{aT==i&&(aT=null)},4e3),!0}]})}let p=d.join(" ");s(p,!1);let f=u[p]||(u[p]={preventDefault:!1,stopPropagation:!1,run:(null==(c=null==(h=u._any)?void 0:h.run)?void 0:c.slice())||[]});o&&f.run.push(o),a&&(f.preventDefault=!0),l&&(f.stopPropagation=!0)};for(let i of e){let e=i.scope?i.scope.split(" "):["editor"];if(i.any)for(let n of e){let e=r[n]||(r[n]=Object.create(null));e._any||(e._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:s}=i;for(let n in e)e[n].run.push(e=>s(e,aP))}let s=i[n]||i.key;if(s)for(let n of e)o(n,s,i.run,i.preventDefault,i.stopPropagation),i.shift&&o(n,"Shift-"+s,i.shift,i.preventDefault,i.stopPropagation)}return r}(r.reduce((e,n)=>e.concat(n),[]))),i),e,n,"editor")}})),aC=rg.define({enables:ak}),aE=new WeakMap,aT=null,aP=null;class aA{constructor(e,n,r,i,s){this.className=e,this.left=n,this.top=r,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className==this.className&&(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",null!=this.width&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,r){if(!r.empty)return function(e,n,r){if(r.to<=e.viewport.from||r.from>=e.viewport.to)return[];let i=Math.max(r.from,e.viewport.from),s=Math.min(r.to,e.viewport.to),o=e.textDirection==sy.LTR,a=e.contentDOM,l=a.getBoundingClientRect(),h=aM(e),c=a.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),d=l.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),p=l.right-(u?parseInt(u.paddingRight):0),f=oh(e,i,1),g=oh(e,s,-1),m=f.type==si.Text?f:null,y=g.type==si.Text?g:null;if(m&&(e.lineWrapping||f.widgetLineBreaks)&&(m=aN(e,i,1,m)),y&&(e.lineWrapping||g.widgetLineBreaks)&&(y=aN(e,s,-1,y)),m&&y&&m.from==y.from&&m.to==y.to)return b(x(r.from,r.to,m));{let n=m?x(r.from,null,m):w(f,!1),i=y?x(null,r.to,y):w(g,!0),s=[];return(m||f).to<(y||g).from-(m&&y?1:0)||f.widgetLineBreaks>1&&n.bottom+e.defaultLineHeight/2<i.top?s.push(O(d,n.bottom,p,i.top)):n.bottom<i.top&&e.elementAtHeight((n.bottom+i.top)/2).type==si.Text&&(n.bottom=i.top=(n.bottom+i.top)/2),b(n).concat(s).concat(b(i))}function O(e,r,i,s){return new aA(n,e-h.left,r-h.top,i-e,s-r)}function b({top:e,bottom:n,horizontal:r}){let i=[];for(let s=0;s<r.length;s+=2)i.push(O(r[s],e,r[s+1],n));return i}function x(n,r,i){let s=1e9,a=-1e9,l=[];function h(n,r,h,c,u){let f=e.coordsAtPos(n,n==i.to?-2:2),g=e.coordsAtPos(h,h==i.from?2:-2);f&&g&&(s=Math.min(f.top,g.top,s),a=Math.max(f.bottom,g.bottom,a),u==sy.LTR?l.push(o&&r?d:f.left,o&&c?p:g.right):l.push(!o&&c?d:g.left,!o&&r?p:f.right))}let c=null!=n?n:i.from,u=null!=r?r:i.to;for(let i of e.visibleRanges)if(i.to>c&&i.from<u)for(let s=Math.max(i.from,c),o=Math.min(i.to,u);;){let i=e.state.doc.lineAt(s);for(let a of e.bidiSpans(i)){let e=a.from+i.from,l=a.to+i.from;if(e>=o)break;l>s&&h(Math.max(e,s),null==n&&e<=c,Math.min(l,o),null==r&&l>=u,a.dir)}if((s=i.to+1)>=o)break}return 0==l.length&&h(c,null==n,u,null==r,e.textDirection),{top:s,bottom:a,horizontal:l}}function w(e,n){let r=l.top+(n?e.top:e.bottom);return{top:r,bottom:r,horizontal:[]}}}(e,n,r);{let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let s=aM(e);return[new aA(n,i.left-s.left,i.top-s.top,null,i.bottom-i.top)]}}}function aM(e){let n=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==sy.LTR?n.left:n.right-e.scrollDOM.clientWidth*e.scaleX)-e.scrollDOM.scrollLeft*e.scaleX,top:n.top-e.scrollDOM.scrollTop*e.scaleY}}function aN(e,n,r,i){let s=e.coordsAtPos(n,2*r);if(!s)return i;let o=e.dom.getBoundingClientRect(),a=(s.top+s.bottom)/2,l=e.posAtCoords({x:o.left+1,y:a}),h=e.posAtCoords({x:o.right-1,y:a});return null==l||null==h?i:{from:Math.max(i.from,Math.min(l,h)),to:Math.min(i.to,Math.max(l,h))}}class aD{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(aI)!=e.state.facet(aI)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){!1!==this.layer.updateOnDocViewUpdate&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,r=e.facet(aI);for(;n<r.length&&r[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((e,n)=>{var r;return r=this.drawn[n],!(e.constructor==r.constructor&&e.eq(r))})){let n=this.dom.firstChild,r=0;for(let i of e)i.update&&n&&i.constructor&&this.drawn[r].constructor&&i.update(n,this.drawn[r])?(n=n.nextSibling,r++):this.dom.insertBefore(i.draw(),n);for(;n;){let e=n.nextSibling;n.remove(),n=e}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}let aI=rg.define();function a$(e){return[sG.define(n=>new aD(n,e)),aI.of(e)]}let aR=rg.define({combine:e=>rY(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})});function aL(e){return e.startState.facet(aR)!=e.state.facet(aR)}let aQ=a$({above:!0,markers(e){let{state:n}=e,r=n.facet(aR),i=[];for(let s of n.selection.ranges){let o=s==n.selection.main;if(s.empty||r.drawRangeCursor){let n=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",r=s.empty?s:rd.cursor(s.head,s.head>s.anchor?-1:1);for(let s of aA.forRange(e,n,r))i.push(s)}}return i},update(e,n){e.transactions.some(e=>e.selection)&&(n.style.animationName="cm-blink"==n.style.animationName?"cm-blink2":"cm-blink");let r=aL(e);return r&&aj(e.state,n),e.docChanged||e.selectionSet||r},mount(e,n){aj(n.state,e)},class:"cm-cursorLayer"});function aj(e,n){n.style.animationDuration=e.facet(aR).cursorBlinkRate+"ms"}let aV=a$({above:!1,markers:e=>e.state.selection.ranges.map(n=>n.empty?[]:aA.forRange(e,"cm-selectionBackground",n)).reduce((e,n)=>e.concat(n)),update:(e,n)=>e.docChanged||e.selectionSet||e.viewportChanged||aL(e),class:"cm-selectionLayer"}),az=rS.highest(aO.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),aB=rV.define({map:(e,n)=>null==e?null:n.mapPos(e)}),aF=rx.define({create:()=>null,update:(e,n)=>(null!=e&&(e=n.changes.mapPos(e)),n.effects.reduce((e,n)=>n.is(aB)?n.value:e,e))}),aZ=sG.fromClass(class{constructor(e){this.view=e,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(e){var n;let r=e.state.field(aF);null==r?null!=this.cursor&&(null==(n=this.cursor)||n.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(e.startState.field(aF)!=r||e.docChanged||e.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:e}=this,n=e.state.field(aF),r=null!=n&&e.coordsAtPos(n);if(!r)return null;let i=e.scrollDOM.getBoundingClientRect();return{left:r.left-i.left+e.scrollDOM.scrollLeft*e.scaleX,top:r.top-i.top+e.scrollDOM.scrollTop*e.scaleY,height:r.bottom-r.top}}drawCursor(e){if(this.cursor){let{scaleX:n,scaleY:r}=this.view;e?(this.cursor.style.left=e.left/n+"px",this.cursor.style.top=e.top/r+"px",this.cursor.style.height=e.height/r+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(e){this.view.state.field(aF)!=e&&this.view.dispatch({effects:aB.of(e)})}},{eventObservers:{dragover(e){this.setDropPos(this.view.posAtCoords({x:e.clientX,y:e.clientY}))},dragleave(e){e.target!=this.view.contentDOM&&this.view.contentDOM.contains(e.relatedTarget)||this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function aq(e,n,r,i,s){n.lastIndex=0;for(let o=e.iterRange(r,i),a=r,l;!o.next().done;a+=o.value.length)if(!o.lineBreak)for(;l=n.exec(o.value);)s(a+l.index,l)}class aW{constructor(e){let{regexp:n,decoration:r,decorate:i,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,i)this.addMatch=(e,n,r,s)=>i(s,r,r+e[0].length,e,n);else if("function"==typeof r)this.addMatch=(e,n,i,s)=>{let o=r(e,n,i);o&&s(i,i+e[0].length,o)};else if(r)this.addMatch=(e,n,i,s)=>s(i,i+e[0].length,r);else throw RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new r1,r=n.add.bind(n);for(let{from:n,to:i}of function(e,n){let r=e.visibleRanges;if(1==r.length&&r[0].from==e.viewport.from&&r[0].to==e.viewport.to)return r;let i=[];for(let{from:s,to:o}of r)s=Math.max(e.state.doc.lineAt(s).from,s-n),o=Math.min(e.state.doc.lineAt(o).to,o+n),i.length&&i[i.length-1].to>=s?i[i.length-1].to=o:i.push({from:s,to:o});return i}(e,this.maxLength))aq(e.state.doc,this.regexp,n,i,(n,i)=>this.addMatch(i,e,n,r));return n.finish()}updateDeco(e,n){let r=1e9,i=-1;return(e.docChanged&&e.changes.iterChanges((n,s,o,a)=>{a>=e.view.viewport.from&&o<=e.view.viewport.to&&(r=Math.min(o,r),i=Math.max(a,i))}),e.viewportMoved||i-r>1e3)?this.createDeco(e.view):i>-1?this.updateRange(e.view,n.map(e.changes),r,i):n}updateRange(e,n,r,i){for(let s of e.visibleRanges){let o=Math.max(s.from,r),a=Math.min(s.to,i);if(a>=o){let r=e.state.doc.lineAt(o),i=r.to<a?e.state.doc.lineAt(a):r,l=Math.max(s.from,r.from),h=Math.min(s.to,i.to);if(this.boundary){for(;o>r.from;o--)if(this.boundary.test(r.text[o-1-r.from])){l=o;break}for(;a<i.to;a++)if(this.boundary.test(i.text[a-i.from])){h=a;break}}let c=[],u,d=(e,n,r)=>c.push(r.range(e,n));if(r==i)for(this.regexp.lastIndex=l-r.from;(u=this.regexp.exec(r.text))&&u.index<h-r.from;)this.addMatch(u,e,u.index+r.from,d);else aq(e.state.doc,this.regexp,l,h,(n,r)=>this.addMatch(r,e,n,d));n=n.update({filterFrom:l,filterTo:h,filter:(e,n)=>e<l||n>h,add:c})}}return n}}let aX=null!=/x/.unicode?"gu":"g",aU=RegExp("[\0-\b\n-\x1f\x7f-\x9f\xad؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]",aX),aY={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"},aG=null,aH=rg.define({combine(e){let n=rY(e,{render:null,specialChars:aU,addSpecialChars:null});return(n.replaceTabs=!function(){var e;if(null==aG&&"undefined"!=typeof document&&document.body){let n=document.body.style;aG=(null!=(e=n.tabSize)?e:n.MozTabSize)!=null}return aG||!1}())&&(n.specialChars=RegExp("	|"+n.specialChars.source,aX)),n.addSpecialChars&&(n.specialChars=RegExp(n.specialChars.source+"|"+n.addSpecialChars.source,aX)),n}});function aK(e={}){return[aH.of(e),aJ||(aJ=sG.fromClass(class{constructor(e){this.view=e,this.decorations=ss.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(e.state.facet(aH)),this.decorations=this.decorator.createDeco(e)}makeDecorator(e){return new aW({regexp:e.specialChars,decoration:(n,r,i)=>{let{doc:s}=r.state,o=n7(n[0],0);if(9==o){let e=s.lineAt(i),n=r.state.tabSize,o=ir(e.text,n,i-e.from);return ss.replace({widget:new a1((n-o%n)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=ss.replace({widget:new a0(e,o)}))},boundary:e.replaceTabs?void 0:/[^]/})}update(e){let n=e.state.facet(aH);e.startState.facet(aH)!=n?(this.decorator=this.makeDecorator(n),this.decorations=this.decorator.createDeco(e.view)):this.decorations=this.decorator.updateDeco(e,this.decorations)}},{decorations:e=>e.decorations}))]}let aJ=null;class a0 extends sr{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){var n;let r=(n=this.code)>=32?"•":10==n?"␤":String.fromCharCode(9216+n),i=e.state.phrase("Control character")+" "+(aY[this.code]||"0x"+this.code.toString(16)),s=this.options.render&&this.options.render(this.code,i,r);if(s)return s;let o=document.createElement("span");return o.textContent=r,o.title=i,o.setAttribute("aria-label",i),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class a1 extends sr{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}let a2=ss.line({class:"cm-activeLine"}),a5=sG.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let n=-1,r=[];for(let i of e.state.selection.ranges){let s=e.lineBlockAt(i.head);s.from>n&&(r.push(a2.range(s.from)),n=s.from)}return ss.set(r)}},{decorations:e=>e.decorations});function a4(e,n){var r;let i,s=e.posAtCoords({x:n.clientX,y:n.clientY},!1),o=e.state.doc.lineAt(s),a=s-o.from,l=a>2e3?-1:a==o.length?(r=n.clientX,(i=e.coordsAtPos(e.viewport.from))?Math.round(Math.abs((i.left-r)/e.defaultCharacterWidth)):-1):ir(o.text,e.state.tabSize,s-o.from);return{line:o.number,col:l,off:a}}let a3={Alt:[18,e=>!!e.altKey],Control:[17,e=>!!e.ctrlKey],Shift:[16,e=>!!e.shiftKey],Meta:[91,e=>!!e.metaKey]},a6={style:"cursor: crosshair"},a9="-10000px";class a7{constructor(e,n,r,i){this.facet=n,this.createTooltipView=r,this.removeTooltipView=i,this.input=e.state.facet(n),this.tooltips=this.input.filter(e=>e);let s=null;this.tooltipViews=this.tooltips.map(e=>s=r(e,s))}update(e,n){var r;let i=e.state.facet(this.facet),s=i.filter(e=>e);if(i===this.input){for(let n of this.tooltipViews)n.update&&n.update(e);return!1}let o=[],a=n?[]:null;for(let r=0;r<s.length;r++){let i=s[r],l=-1;if(i){for(let e=0;e<this.tooltips.length;e++){let n=this.tooltips[e];n&&n.create==i.create&&(l=e)}if(l<0)o[r]=this.createTooltipView(i,r?o[r-1]:null),a&&(a[r]=!!i.above);else{let i=o[r]=this.tooltipViews[l];a&&(a[r]=n[l]),i.update&&i.update(e)}}}for(let e of this.tooltipViews)0>o.indexOf(e)&&(this.removeTooltipView(e),null==(r=e.destroy)||r.call(e));return n&&(a.forEach((e,r)=>n[r]=e),n.length=a.length),this.input=i,this.tooltips=s,this.tooltipViews=o,!0}}function a8(e){let n=e.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:n.clientHeight,right:n.clientWidth}}let le=rg.define({combine:e=>{var n,r,i;return{position:i2.ios?"absolute":(null==(n=e.find(e=>e.position))?void 0:n.position)||"fixed",parent:(null==(r=e.find(e=>e.parent))?void 0:r.parent)||null,tooltipSpace:(null==(i=e.find(e=>e.tooltipSpace))?void 0:i.tooltipSpace)||a8}}}),lt=new WeakMap,ln=sG.fromClass(class{constructor(e){this.view=e,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let n=e.state.facet(le);this.position=n.position,this.parent=n.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver="function"==typeof ResizeObserver?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new a7(e,lo,(e,n)=>this.createTooltip(e,n),e=>{this.resizeObserver&&this.resizeObserver.unobserve(e.dom),e.dom.remove()}),this.above=this.manager.tooltips.map(e=>!!e.above),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver(e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),e.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver)for(let e of(this.intersectionObserver.disconnect(),this.manager.tooltipViews))this.intersectionObserver.observe(e.dom)}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let n=this.manager.update(e,this.above);n&&this.observeIntersection();let r=n||e.geometryChanged,i=e.state.facet(le);if(i.position!=this.position&&!this.madeAbsolute){for(let e of(this.position=i.position,this.manager.tooltipViews))e.dom.style.position=this.position;r=!0}if(i.parent!=this.parent){for(let e of(this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer(),this.manager.tooltipViews))this.container.appendChild(e.dom);r=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);r&&this.maybeMeasure()}createTooltip(e,n){let r=e.create(this.view),i=n?n.dom:null;if(r.dom.classList.add("cm-tooltip"),e.arrow&&!r.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let e=document.createElement("div");e.className="cm-tooltip-arrow",r.dom.appendChild(e)}return r.dom.style.position=this.position,r.dom.style.top=a9,r.dom.style.left="0px",this.container.insertBefore(r.dom,i),r.mount&&r.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(r.dom),r}destroy(){var e,n,r;for(let n of(this.view.win.removeEventListener("resize",this.measureSoon),this.manager.tooltipViews))n.dom.remove(),null==(e=n.destroy)||e.call(n);this.parent&&this.container.remove(),null==(n=this.resizeObserver)||n.disconnect(),null==(r=this.intersectionObserver)||r.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=1,n=1,r=!1;if("fixed"==this.position&&this.manager.tooltipViews.length){let{dom:e}=this.manager.tooltipViews[0];if(i2.gecko)r=e.offsetParent!=this.container.ownerDocument.body;else if(e.style.top==a9&&"0px"==e.style.left){let n=e.getBoundingClientRect();r=Math.abs(n.top+1e4)>1||Math.abs(n.left)>1}}if(r||"absolute"==this.position)if(this.parent){let r=this.parent.getBoundingClientRect();r.width&&r.height&&(e=r.width/this.parent.offsetWidth,n=r.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:n}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),s=s6(this.view);return{visible:{left:i.left+s.left,top:i.top+s.top,right:i.right-s.right,bottom:i.bottom-s.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((e,n)=>{let r=this.manager.tooltipViews[n];return r.getCoords?r.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(le).tooltipSpace(this.view),scaleX:e,scaleY:n,makeAbsolute:r}}writeMeasure(e){var n;if(e.makeAbsolute)for(let e of(this.madeAbsolute=!0,this.position="absolute",this.manager.tooltipViews))e.dom.style.position="absolute";let{visible:r,space:i,scaleX:s,scaleY:o}=e,a=[];for(let l=0;l<this.manager.tooltips.length;l++){let h=this.manager.tooltips[l],c=this.manager.tooltipViews[l],{dom:u}=c,d=e.pos[l],p=e.size[l];if(!d||!1!==h.clip&&(d.bottom<=Math.max(r.top,i.top)||d.top>=Math.min(r.bottom,i.bottom)||d.right<Math.max(r.left,i.left)-.1||d.left>Math.min(r.right,i.right)+.1)){u.style.top=a9;continue}let f=h.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,g=7*!!f,m=p.right-p.left,y=null!=(n=lt.get(c))?n:p.bottom-p.top,O=c.offset||ls,b=this.view.textDirection==sy.LTR,x=p.width>i.right-i.left?b?i.left:i.right-p.width:b?Math.max(i.left,Math.min(d.left-14*!!f+O.x,i.right-m)):Math.min(Math.max(i.left,d.left-m+14*!!f-O.x),i.right-m),w=this.above[l];!h.strictSide&&(w?d.top-y-g-O.y<i.top:d.bottom+y+g+O.y>i.bottom)&&w==i.bottom-d.bottom>d.top-i.top&&(w=this.above[l]=!w);let S=(w?d.top-i.top:i.bottom-d.bottom)-g;if(S<y&&!1!==c.resize){if(S<this.view.defaultLineHeight){u.style.top=a9;continue}lt.set(c,y),u.style.height=(y=S)/o+"px"}else u.style.height&&(u.style.height="");let _=w?d.top-y-g-O.y:d.bottom+g+O.y,k=x+m;if(!0!==c.overlap)for(let e of a)e.left<k&&e.right>x&&e.top<_+y&&e.bottom>_&&(_=w?e.top-y-2-g:e.bottom+g+2);if("absolute"==this.position?(u.style.top=(_-e.parent.top)/o+"px",lr(u,(x-e.parent.left)/s)):(u.style.top=_/o+"px",lr(u,x/s)),f){let e=d.left+(b?O.x:-O.x)-(x+14-7);f.style.left=e/s+"px"}!0!==c.overlap&&a.push({left:x,top:_,right:k,bottom:_+y}),u.classList.toggle("cm-tooltip-above",w),u.classList.toggle("cm-tooltip-below",!w),c.positioned&&c.positioned(e.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView)&&(this.inView=this.view.inView,!this.inView))for(let e of this.manager.tooltipViews)e.dom.style.top=a9}},{eventObservers:{scroll(){this.maybeMeasure()}}});function lr(e,n){let r=parseInt(e.style.left,10);(isNaN(r)||Math.abs(n-r)>1)&&(e.style.left=n+"px")}let li=aO.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),ls={x:0,y:0},lo=rg.define({enables:[ln,li]}),la=rg.define({combine:e=>e.reduce((e,n)=>e.concat(n),[])});class ll{static create(e){return new ll(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new a7(e,la,(e,n)=>this.createHostedView(e,n),e=>e.dom.remove())}createHostedView(e,n){let r=e.create(this.view);return r.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(r.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&r.mount&&r.mount(this.view),r}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)null==(e=n.destroy)||e.call(n)}passProp(e){let n;for(let r of this.manager.tooltipViews){let i=r[e];if(void 0!==i){if(void 0===n)n=i;else if(n!==i)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}let lh=lo.compute([la],e=>{let n=e.facet(la);return 0===n.length?null:{pos:Math.min(...n.map(e=>e.pos)),end:Math.max(...n.map(e=>{var n;return null!=(n=e.end)?n:e.pos})),create:ll.create,above:n[0].above,arrow:n.some(e=>e.arrow)}});class lc{constructor(e,n,r,i,s){this.view=e,this.source=n,this.field=r,this.setHover=i,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,r=e.docView.nearest(n.target);if(!r)return;let i,s=1;if(r instanceof i3)i=r.posAtStart;else{if(null==(i=e.posAtCoords(n)))return;let r=e.coordsAtPos(i);if(!r||n.y<r.top||n.y>r.bottom||n.x<r.left-e.defaultCharacterWidth||n.x>r.right+e.defaultCharacterWidth)return;let o=e.bidiSpans(e.state.doc.lineAt(i)).find(e=>e.from<=i&&e.to>=i),a=o&&o.dir==sy.RTL?-1:1;s=n.x<r.left?-a:a}let o=this.source(e,i,s);if(null==o?void 0:o.then){let n=this.pending={pos:i};o.then(r=>{this.pending==n&&(this.pending=null,r&&!(Array.isArray(r)&&!r.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(r)?r:[r])}))},n=>sW(e.state,n,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(ln),n=e?e.manager.tooltips.findIndex(e=>e.create==ll.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,r;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:s}=this;if(i.length&&s&&!function(e,n){let{left:r,right:i,top:s,bottom:o}=e.getBoundingClientRect(),a;if(a=e.querySelector(".cm-tooltip-arrow")){let e=a.getBoundingClientRect();s=Math.min(e.top,s),o=Math.max(e.bottom,o)}return n.clientX>=r-4&&n.clientX<=i+4&&n.clientY>=s-4&&n.clientY<=o+4}(s.dom,e)||this.pending){let{pos:s}=i[0]||this.pending,o=null!=(r=null==(n=i[0])?void 0:n.end)?r:s;(s==o?this.view.posAtCoords(this.lastMove)!=s:!function(e,n,r,i,s,o){let a=e.scrollDOM.getBoundingClientRect(),l=e.documentTop+e.documentPadding.top+e.contentHeight;if(a.left>i||a.right<i||a.top>s||Math.min(a.bottom,l)<s)return!1;let h=e.posAtCoords({x:i,y:s},!1);return h>=n&&h<=r}(this.view,s,o,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:n}=this;n&&n.dom.contains(e.relatedTarget)?this.watchTooltipLeave(n.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=r=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(r.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function lu(e,n={}){let r=rV.define(),i=rx.define({create:()=>[],update(e,i){if(e.length&&(n.hideOnChange&&(i.docChanged||i.selection)?e=[]:n.hideOn&&(e=e.filter(e=>!n.hideOn(i,e))),i.docChanged)){let n=[];for(let r of e){let e=i.changes.mapPos(r.pos,-1,rn.TrackDel);if(null!=e){let s=Object.assign(Object.create(null),r);s.pos=e,null!=s.end&&(s.end=i.changes.mapPos(s.end)),n.push(s)}}e=n}for(let n of i.effects)n.is(r)&&(e=n.value),n.is(lp)&&(e=[]);return e},provide:e=>la.from(e)});return{active:i,extension:[i,sG.define(s=>new lc(s,e,i,r,n.hoverTime||300)),lh]}}function ld(e,n){let r=e.plugin(ln);if(!r)return null;let i=r.manager.tooltips.indexOf(n);return i<0?null:r.manager.tooltipViews[i]}let lp=rV.define(),lf=rg.define({combine(e){let n,r;for(let i of e)n=n||i.topContainer,r=r||i.bottomContainer;return{topContainer:n,bottomContainer:r}}}),lg=sG.fromClass(class{constructor(e){this.input=e.state.facet(lO),this.specs=this.input.filter(e=>e),this.panels=this.specs.map(n=>n(e));let n=e.state.facet(lf);for(let r of(this.top=new lm(e,!0,n.topContainer),this.bottom=new lm(e,!1,n.bottomContainer),this.top.sync(this.panels.filter(e=>e.top)),this.bottom.sync(this.panels.filter(e=>!e.top)),this.panels))r.dom.classList.add("cm-panel"),r.mount&&r.mount()}update(e){let n=e.state.facet(lf);this.top.container!=n.topContainer&&(this.top.sync([]),this.top=new lm(e.view,!0,n.topContainer)),this.bottom.container!=n.bottomContainer&&(this.bottom.sync([]),this.bottom=new lm(e.view,!1,n.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let r=e.state.facet(lO);if(r!=this.input){let n=r.filter(e=>e),i=[],s=[],o=[],a=[];for(let r of n){let n=this.specs.indexOf(r),l;n<0?(l=r(e.view),a.push(l)):(l=this.panels[n]).update&&l.update(e),i.push(l),(l.top?s:o).push(l)}for(let e of(this.specs=n,this.panels=i,this.top.sync(s),this.bottom.sync(o),a))e.dom.classList.add("cm-panel"),e.mount&&e.mount()}else for(let n of this.panels)n.update&&n.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:e=>aO.scrollMargins.of(n=>{let r=n.plugin(e);return r&&{top:r.top.scrollMargin(),bottom:r.bottom.scrollMargin()}})});class lm{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&0>e.indexOf(n)&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(0==this.panels.length){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=ly(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=ly(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function ly(e){let n=e.nextSibling;return e.remove(),n}let lO=rg.define({enables:lg});class lv extends rG{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}lv.prototype.elementClass="",lv.prototype.toDOM=void 0,lv.prototype.mapMode=rn.TrackBefore,lv.prototype.startSide=lv.prototype.endSide=-1,lv.prototype.point=!0;let lb=rg.define(),lx=rg.define(),lw={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>r0.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},lS=rg.define();function l_(e){return[lC(),lS.of({...lw,...e})]}let lk=rg.define({combine:e=>e.some(e=>e)});function lC(e){let n=[lE];return e&&!1===e.fixed&&n.push(lk.of(!0)),n}let lE=sG.fromClass(class{constructor(e){for(let n of(this.view=e,this.domAfter=null,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=e.state.facet(lS).map(n=>new lM(e,n)),this.fixed=!e.state.facet(lk),this.gutters))"after"==n.config.side?this.getDOMAfter().appendChild(n.dom):this.dom.appendChild(n.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(e){if(this.updateGutters(e)){let n=this.prevViewport,r=e.view.viewport,i=Math.min(n.to,r.to)-Math.max(n.from,r.from);this.syncGutters(i<(r.to-r.from)*.8)}if(e.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(lk)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=e.view.viewport}syncGutters(e){let n=this.dom.nextSibling;e&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let r=r0.iter(this.view.state.facet(lb),this.view.viewport.from),i=[],s=this.gutters.map(e=>new lA(e,this.view.viewport,-this.view.documentPadding.top));for(let e of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(e.type)){let n=!0;for(let o of e.type)if(o.type==si.Text&&n){for(let e of(lP(r,i,o.from),s))e.line(this.view,o,i);n=!1}else if(o.widget)for(let e of s)e.widget(this.view,o)}else if(e.type==si.Text)for(let n of(lP(r,i,e.from),s))n.line(this.view,e,i);else if(e.widget)for(let n of s)n.widget(this.view,e);for(let e of s)e.finish();e&&(this.view.scrollDOM.insertBefore(this.dom,n),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(e){let n=e.startState.facet(lS),r=e.state.facet(lS),i=e.docChanged||e.heightChanged||e.viewportChanged||!r0.eq(e.startState.facet(lb),e.state.facet(lb),e.view.viewport.from,e.view.viewport.to);if(n==r)for(let n of this.gutters)n.update(e)&&(i=!0);else{i=!0;let s=[];for(let i of r){let r=n.indexOf(i);r<0?s.push(new lM(this.view,i)):(this.gutters[r].update(e),s.push(this.gutters[r]))}for(let e of this.gutters)e.dom.remove(),0>s.indexOf(e)&&e.destroy();for(let e of s)"after"==e.config.side?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.gutters=s}return i}destroy(){for(let e of this.gutters)e.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:e=>aO.scrollMargins.of(n=>{let r=n.plugin(e);if(!r||0==r.gutters.length||!r.fixed)return null;let i=r.dom.offsetWidth*n.scaleX,s=r.domAfter?r.domAfter.offsetWidth*n.scaleX:0;return n.textDirection==sy.LTR?{left:i,right:s}:{right:i,left:s}})});function lT(e){return Array.isArray(e)?e:[e]}function lP(e,n,r){for(;e.value&&e.from<=r;)e.from==r&&n.push(e.value),e.next()}class lA{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=r0.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,s=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==i.elements.length){let n=new lN(e,o,s,r);i.elements.push(n),i.dom.appendChild(n.dom)}else i.elements[this.i].update(e,o,s,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];lP(this.cursor,i,n.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,n,i);s&&i.unshift(s);let o=this.gutter;(0!=i.length||o.config.renderEmptyElements)&&this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n),i=r?[r]:null;for(let r of e.state.facet(lx)){let s=r(e,n.widget,n);s&&(i||(i=[])).push(s)}i&&this.addElement(e,n,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class lM{constructor(e,n){for(let r in this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:""),n.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let e=s.getBoundingClientRect();o=(e.top+e.bottom)/2}else o=i.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[r](e,a,i)&&i.preventDefault()});this.markers=lT(n.markers(e)),n.initialSpacer&&(this.spacer=new lN(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=lT(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}let r=e.view.viewport;return!r0.eq(this.markers,n,r.from,r.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)}destroy(){for(let e of this.elements)e.destroy()}}class lN{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),!function(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].compare(n[r]))return!1;return!0}(this.markers,i)&&this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,h=!1;if(l){let e=l.elementClass;e&&(r+=" "+e);for(let e=o;e<this.markers.length;e++)if(this.markers[e].compare(l)){a=e,h=!0;break}}else a=this.markers.length;for(;o<a;){let e=this.markers[o++];if(e.toDOM){e.destroy(i);let n=i.nextSibling;i.remove(),i=n}}if(!l)break;l.toDOM&&(h?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),h&&o++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}let lD=rg.define(),lI=rg.define(),l$=rg.define({combine:e=>rY(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let e in n){let i=r[e],s=n[e];r[e]=i?(e,n,r)=>i(e,n,r)||s(e,n,r):s}return r}})});class lR extends lv{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function lL(e,n){return e.state.facet(l$).formatNumber(n,e.state)}let lQ=lS.compute([l$],e=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:e=>e.state.facet(lD),lineMarker:(e,n,r)=>r.some(e=>e.toDOM)?null:new lR(lL(e,e.state.doc.lineAt(n.from).number)),widgetMarker:(e,n,r)=>{for(let i of e.state.facet(lI)){let s=i(e,n,r);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(l$)!=e.state.facet(l$),initialSpacer:e=>new lR(lL(e,lj(e.state.doc.lines))),updateSpacer(e,n){let r=lL(n.view,lj(n.view.state.doc.lines));return r==e.number?e:new lR(r)},domEventHandlers:e.facet(l$).domEventHandlers,side:"before"}));function lj(e){let n=9;for(;n<e;)n=10*n+9;return n}let lV=new class extends lv{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},lz=lb.compute(["selection"],e=>{let n=[],r=-1;for(let i of e.selection.ranges){let s=e.doc.lineAt(i.head).from;s>r&&(r=s,n.push(lV.range(s)))}return r0.of(n)});var lB=Symbol("event/silent");function lF(e,n){return{type:"option",name:e,handler:n}}function lZ(e,n){return{type:"api",name:e,handler:n}}function lq(e,n){return{type:"event",name:e,handler:n}}function lW(e){return{type:"domEventHandler",name:e}}function lX(e){return{type:"extension",extension:e}}var lU=class{constructor(e){this.fn=e}compartment=new rk;extension;value;init(e){this.value=e;let n=this.fn(e);return this.compartment.of(n??[])}set(e){if(e===this.value)return;this.value=e;let n=this.fn(e);return this.compartment.reconfigure(n??[])}},lY=class{cachedValues=Object.create(null);handlers=Object.create(null);add(e,n){this.handlers[e]=this.handlers[e]??[],this.handlers[e].push(n)}init(e){let n=[];return Object.keys(this.handlers).map(r=>{let i=e[r];this.cachedValues[r]=i;let s=this.handlers[r];s&&s.forEach(e=>{let r=e.init(i);r&&n.push(r)})}),n}get(e){return this.cachedValues[e]}set(e){let n=[];return Object.keys(e).map(r=>{let i=e[r];this.cachedValues[r]=i;let s=this.handlers[r];s&&s.forEach(e=>{let r=e.set(i);r&&n.push(r)})}),n}};function lG(){let e=new rk,n=new rk,r=[],i=[];return{view:null,provideView(e){this.view=e},inject(s,o="tail"){let a="head"===o?e:n,l="head"===o?r:i;return l.push(s),queueMicrotask(()=>{this.view&&this.view.dispatch({effects:a.reconfigure(l)})}),()=>{let e=l.indexOf(s);~e&&l.splice(e,1),queueMicrotask(()=>{this.view&&this.view.dispatch({effects:a.reconfigure(l)})})}},getCompartment:s=>"head"===s?e.of(r):n.of(i)}}var lH=class{#e=[];tap(e,n){this.#e.push([e,n])}call(...e){this.#e.forEach(n=>{let r=n[1];"function"==typeof r&&r(...e)})}};function lK(){return new lH}aO.EDIT_CONTEXT=!1;var lJ=(0,nl.createContext)(null),l0=(0,nl.createContext)(null),l1=(0,nl.createContext)(void 0);function l2(){return(0,nl.useContext)(lJ)}function l5(){let e=(0,nl.useContext)(l1);if(!e)throw Error("useInjector should be used in EditorProvider");return e}function l4({children:e}){let[n,r]=(0,nl.useState)(null),i=(0,nl.useRef)(null);return i.current||(i.current=lG()),nl.createElement(lJ.Provider,{value:n},nl.createElement(l0.Provider,{value:r},nl.createElement(l1.Provider,{value:i.current},e)))}function l3(e){let{plugins:n,defaultValue:r,root:i,options:s,domProps:o={},extensions:a,didMount:l,children:h}=e,[c,u]=(0,nl.useState)(),d=(0,nl.useRef)(null),p=(0,nl.useRef)(null),f=(0,nl.useRef)(null),g=(0,nl.useContext)(l0),m=l5();return f.current=e,(0,nl.useEffect)(()=>{let{render:e,eventKeys:o}=function({plugins:e,injector:n=lG()}){let r={extendAPI:lK(),setupOption:lK(),addExtension:lK()},i={hooks:r},s=[],o=[];function a(e,{options:i,events:o}){s.forEach(e=>{r.setupOption.call({key:e,options:i})});let a=[];return r.addExtension.call({events:o,extensions:a}),[n.getCompartment("head"),...i.init(e),...a,n.getCompartment("tail")]}function l(){return new lY}function h(){return nB()}function c({view:e,options:i,events:s}){function o(n){let r=i.set(n);0!==r.length&&e.dispatch({effects:r})}function a(e){return i.get(e)}let l=Object.create(null);return r.extendAPI.call({context:{view:e,set:o,get:a},api:l}),l.$view=e,l.$on=s.on.bind(s),l.$off=s.off.bind(s),l.$get=a,l.$set=o,l.$inject=n.inject.bind(n),l.$destroy=()=>{e.destroy(),s.off("*")},l}return e.forEach(e=>{switch(e.type){case"option":s.push(e.name),({apply(n){n.hooks.setupOption.tap("option",n=>{let{key:r,options:i}=n;r===e.name&&i.add(e.name,new lU(e.handler))})}}).apply(i);break;case"api":({apply(n){n.hooks.extendAPI.tap("api",n=>{let{context:r,api:i}=n,s=e.handler(r);i[e.name]=s})}}).apply(i);break;case"event":o.push(e.name),({apply(n){n.hooks.addExtension.tap("event",n=>{let{events:r,extensions:i}=n;i.push(aO.updateListener.of(n=>{let i=e.handler(n);i!==lB&&r.emit(e.name,i)}))})}}).apply(i);break;case"domEventHandler":o.push(e.name),({apply(n){n.hooks.addExtension.tap("domEventHandler",n=>{let{events:r,extensions:i}=n;i.push(aO.domEventHandlers({[e.name]:n=>{r.emit(e.name,n)}}))})}}).apply(i);break;case"extension":({apply(n){n.hooks.addExtension.tap("extension",n=>{let{extensions:r}=n;r.push(e.extension)})}}).apply(i)}}),{render:function(e){let{parent:r,root:i,defaultValue:s}=e,{extensions:o}=e;Array.isArray(o)||(o=[]);let u=l(),d=h(),p=a(e.options,{options:u,events:d}),f=new aO({parent:r,root:i,state:rU.create({doc:s??"",extensions:[...p,...o]})});return n.provideView(f),c({view:f,options:u,events:d})},getExtensions:a,createAPI:c,createOptions:l,createEvents:h,eventKeys:o}}({plugins:n,injector:m}),h=e({parent:d.current,root:i,defaultValue:r,options:s??{},extensions:a});return p.current=h,o.forEach(e=>{h.$on(e,n=>{var r;let i=null==(r=f.current)?void 0:r[`on${e.charAt(0).toUpperCase()+e.substring(1)}`];"function"==typeof i&&i(n)})}),"function"==typeof l&&l(h),u(h),()=>{h.$destroy()}},[]),(0,nl.useEffect)(()=>{c&&g&&g(c)},[c,g]),(0,nl.useEffect)(()=>{p.current.$set(e.options??{})},[e.options]),nl.createElement(nl.Fragment,null,nl.createElement("div",{...o,ref:d}),h)}let l6=Math.min,l9=Math.max,l7=Math.round,l8=Math.floor,he=e=>({x:e,y:e});function ht(){return"undefined"!=typeof window}function hn(e){return hs(e)?(e.nodeName||"").toLowerCase():"#document"}function hr(e){var n;return(null==e||null==(n=e.ownerDocument)?void 0:n.defaultView)||window}function hi(e){var n;return null==(n=(hs(e)?e.ownerDocument:e.document)||window.document)?void 0:n.documentElement}function hs(e){return!!ht()&&(e instanceof Node||e instanceof hr(e).Node)}function ho(e){return!!ht()&&(e instanceof Element||e instanceof hr(e).Element)}function ha(e){return!!ht()&&(e instanceof HTMLElement||e instanceof hr(e).HTMLElement)}function hl(e){return!!ht()&&"undefined"!=typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof hr(e).ShadowRoot)}let hh=new Set(["inline","contents"]);function hc(e){let{overflow:n,overflowX:r,overflowY:i,display:s}=hd(e);return/auto|scroll|overlay|hidden|clip/.test(n+i+r)&&!hh.has(s)}let hu=new Set(["html","body","#document"]);function hd(e){return hr(e).getComputedStyle(e)}function hp(e,n,r){var i;void 0===n&&(n=[]),void 0===r&&(r=!0);let s=function e(n){let r=function(e){if("html"===hn(e))return e;let n=e.assignedSlot||e.parentNode||hl(e)&&e.host||hi(e);return hl(n)?n.host:n}(n);return hu.has(hn(r))?n.ownerDocument?n.ownerDocument.body:n.body:ha(r)&&hc(r)?r:e(r)}(e),o=s===(null==(i=e.ownerDocument)?void 0:i.body),a=hr(s);if(o){let e=hf(a);return n.concat(a,a.visualViewport||[],hc(s)?s:[],e&&r?hp(e):[])}return n.concat(s,hp(s,[],r))}function hf(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function hg(e){return ho(e)?e:e.contextElement}function hm(e){let n=hg(e);if(!ha(n))return he(1);let r=n.getBoundingClientRect(),{width:i,height:s,$:o}=function(e){let n=hd(e),r=parseFloat(n.width)||0,i=parseFloat(n.height)||0,s=ha(e),o=s?e.offsetWidth:r,a=s?e.offsetHeight:i,l=l7(r)!==o||l7(i)!==a;return l&&(r=o,i=a),{width:r,height:i,$:l}}(n),a=(o?l7(r.width):r.width)/i,l=(o?l7(r.height):r.height)/s;return a&&Number.isFinite(a)||(a=1),l&&Number.isFinite(l)||(l=1),{x:a,y:l}}let hy=he(0);function hO(e){let n=hr(e);return"undefined"!=typeof CSS&&CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")&&n.visualViewport?{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}:hy}function hv(e,n,r,i){var s;void 0===n&&(n=!1),void 0===r&&(r=!1);let o=e.getBoundingClientRect(),a=hg(e),l=he(1);n&&(i?ho(i)&&(l=hm(i)):l=hm(e));let h=(void 0===(s=r)&&(s=!1),i&&(!s||i===hr(a))&&s)?hO(a):he(0),c=(o.left+h.x)/l.x,u=(o.top+h.y)/l.y,d=o.width/l.x,p=o.height/l.y;if(a){let e=hr(a),n=i&&ho(i)?hr(i):i,r=e,s=hf(r);for(;s&&i&&n!==r;){let e=hm(s),n=s.getBoundingClientRect(),i=hd(s),o=n.left+(s.clientLeft+parseFloat(i.paddingLeft))*e.x,a=n.top+(s.clientTop+parseFloat(i.paddingTop))*e.y;c*=e.x,u*=e.y,d*=e.x,p*=e.y,c+=o,u+=a,s=hf(r=hr(s))}}let{x:f,y:g,width:m,height:y}={width:d,height:p,x:c,y:u};return{width:m,height:y,top:g,left:f,right:f+m,bottom:g+y,x:f,y:g}}function hb(e,n){return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height}function hx(e,n,r,i){let s;void 0===i&&(i={});let{ancestorScroll:o=!0,ancestorResize:a=!0,elementResize:l="function"==typeof ResizeObserver,layoutShift:h="function"==typeof IntersectionObserver,animationFrame:c=!1}=i,u=hg(e),d=o||a?[...u?hp(u):[],...hp(n)]:[];d.forEach(e=>{o&&e.addEventListener("scroll",r,{passive:!0}),a&&e.addEventListener("resize",r)});let p=u&&h?function(e,n){let r,i=null,s=hi(e);function o(){var e;clearTimeout(r),null==(e=i)||e.disconnect(),i=null}return!function a(l,h){void 0===l&&(l=!1),void 0===h&&(h=1),o();let c=e.getBoundingClientRect(),{left:u,top:d,width:p,height:f}=c;if(l||n(),!p||!f)return;let g=l8(d),m=l8(s.clientWidth-(u+p)),y={rootMargin:-g+"px "+-m+"px "+-l8(s.clientHeight-(d+f))+"px "+-l8(u)+"px",threshold:l9(0,l6(1,h))||1},O=!0;function b(n){let i=n[0].intersectionRatio;if(i!==h){if(!O)return a();i?a(!1,i):r=setTimeout(()=>{a(!1,1e-7)},1e3)}1!==i||hb(c,e.getBoundingClientRect())||a(),O=!1}try{i=new IntersectionObserver(b,{...y,root:s.ownerDocument})}catch(e){i=new IntersectionObserver(b,y)}i.observe(e)}(!0),o}(u,r):null,f=-1,g=null;l&&(g=new ResizeObserver(e=>{let[i]=e;i&&i.target===u&&g&&(g.unobserve(n),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var e;null==(e=g)||e.observe(n)})),r()}),u&&!c&&g.observe(u),g.observe(n));let m=c?hv(e):null;return c&&function n(){let i=hv(e);m&&!hb(m,i)&&r(),m=i,s=requestAnimationFrame(n)}(),r(),()=>{var e;d.forEach(e=>{o&&e.removeEventListener("scroll",r),a&&e.removeEventListener("resize",r)}),null==p||p(),null==(e=g)||e.disconnect(),g=null,c&&cancelAnimationFrame(s)}}function hw(e,n){let r={...e};for(let e=0;e<n.length;e++){let i=n[e];delete r[i]}return r}let hS=0;class h_{constructor(e,n){this.from=e,this.to=n}}class hk{constructor(e={}){this.id=hS++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=hT.match(e)),n=>{let r=e(n);return void 0===r?null:[this,r]}}}hk.closedBy=new hk({deserialize:e=>e.split(" ")}),hk.openedBy=new hk({deserialize:e=>e.split(" ")}),hk.group=new hk({deserialize:e=>e.split(" ")}),hk.isolate=new hk({deserialize:e=>{if(e&&"rtl"!=e&&"ltr"!=e&&"auto"!=e)throw RangeError("Invalid value for isolate: "+e);return e||"auto"}}),hk.contextHash=new hk({perNode:!0}),hk.lookAhead=new hk({perNode:!0}),hk.mounted=new hk({perNode:!0});class hC{constructor(e,n,r){this.tree=e,this.overlay=n,this.parser=r}static get(e){return e&&e.props&&e.props[hk.mounted.id]}}let hE=Object.create(null);class hT{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):hE,r=!!e.top|2*!!e.skipped|4*!!e.error|8*(null==e.name),i=new hT(e.name||"",n,e.id,r);if(e.props){for(let r of e.props)if(Array.isArray(r)||(r=r(i)),r){if(r[0].perNode)throw RangeError("Can't store a per-node prop on a node type");n[r[0].id]=r[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let n=this.prop(hk.group);return!!n&&n.indexOf(e)>-1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return e=>{for(let r=e.prop(hk.group),i=-1;i<(r?r.length:0);i++){let s=n[i<0?e.name:r[i]];if(s)return s}}}}hT.none=new hT("",Object.create(null),0,8);class hP{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let n of e){let e=n(r);e&&(i||(i=Object.assign({},r.props)),i[e[0].id]=e[1])}n.push(i?new hT(r.name,i,r.id,r.flags):r)}return new hP(n)}}let hA=new WeakMap,hM=new WeakMap;(d7=pe||(pe={}))[d7.ExcludeBuffers=1]="ExcludeBuffers",d7[d7.IncludeAnonymous=2]="IncludeAnonymous",d7[d7.IgnoreMounts=4]="IgnoreMounts",d7[d7.IgnoreOverlays=8]="IgnoreOverlays";class hN{constructor(e,n,r,i,s){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,s&&s.length)for(let[e,n]of(this.props=Object.create(null),s))this.props["number"==typeof e?e:e.id]=n}toString(){let e=hC.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let e of this.children){let r=e.toString();r&&(n&&(n+=","),n+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new hq(this.topNode,e)}cursorAt(e,n=0,r=0){let i=new hq(hA.get(this)||this.topNode);return i.moveTo(e,n),hA.set(this,i._tree),i}get topNode(){return new hQ(this,0,0,null)}resolve(e,n=0){let r=hR(hA.get(this)||this.topNode,e,n,!1);return hA.set(this,r),r}resolveInner(e,n=0){let r=hR(hM.get(this)||this.topNode,e,n,!0);return hM.set(this,r),r}resolveStack(e,n=0){return function(e,n,r){let i=e.resolveInner(n,r),s=null;for(let e=i instanceof hQ?i:i.context.parent;e;e=e.parent)if(e.index<0){let o=e.parent;(s||(s=[i])).push(o.resolve(n,r)),e=o}else{let o=hC.get(e.tree);if(o&&o.overlay&&o.overlay[0].from<=n&&o.overlay[o.overlay.length-1].to>=n){let a=new hQ(o.tree,o.overlay[0].from+e.from,-1,e);(s||(s=[i])).push(hR(a,n,r,!1))}}return s?hF(s):i}(this,e,n)}iterate(e){let{enter:n,leave:r,from:i=0,to:s=this.length}=e,o=e.mode||0,a=(o&pe.IncludeAnonymous)>0;for(let e=this.cursor(o|pe.IncludeAnonymous);;){let o=!1;if(e.from<=s&&e.to>=i&&(!a&&e.type.isAnonymous||!1!==n(e))){if(e.firstChild())continue;o=!0}for(;o&&r&&(a||!e.type.isAnonymous)&&r(e),!e.nextSibling();){if(!e.parent())return;o=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:hY(hT.none,this.children,this.positions,0,this.children.length,0,this.length,(e,n,r)=>new hN(this.type,e,n,r,this.propValues),e.makeTree||((e,n,r)=>new hN(hT.none,e,n,r)))}static build(e){return function(e){var n;let{buffer:r,nodeSet:i,maxBufferLength:s=1024,reused:o=[],minRepeatType:a=i.types.length}=e,l=Array.isArray(r)?new hD(r,r.length):r,h=i.types,c=0,u=0;function d(e,n,r,s,o,a,l,h,c){let u=[],d=[];for(;e.length>s;)u.push(e.pop()),d.push(n.pop()+r-o);e.push(p(i.types[l],u,d,a-o,h-a,c)),n.push(o-r)}function p(e,n,r,i,s,o,a){if(o){let e=[hk.contextHash,o];a=a?[e].concat(a):[e]}if(s>25){let e=[hk.lookAhead,s];a=a?[e].concat(a):[e]}return new hN(e,n,r,i,a)}let f=[],g=[];for(;l.pos>0;)!function e(n,r,f,g,m,y){let{id:O,start:b,end:x,size:w}=l,S=u,_=c;for(;w<0;){if(l.next(),-1==w){let e=o[O];f.push(e),g.push(b-n);return}if(-3==w){c=O;return}if(-4==w){u=O;return}else throw RangeError(`Unrecognized record size: ${w}`)}let k=h[O],C,E,T=b-n;if(x-b<=s&&(E=function(e,n){let r=l.fork(),i=0,o=0,h=0,c=r.end-s,u={size:0,start:0,skip:0};n:for(let s=r.pos-e;r.pos>s;){let e=r.size;if(r.id==n&&e>=0){u.size=i,u.start=o,u.skip=h,h+=4,i+=4,r.next();continue}let l=r.pos-e;if(e<0||l<s||r.start<c)break;let d=4*(r.id>=a),p=r.start;for(r.next();r.pos>l;){if(r.size<0)if(-3==r.size)d+=4;else break n;else r.id>=a&&(d+=4);r.next()}o=p,i+=e,h+=d}return(n<0||i==e)&&(u.size=i,u.start=o,u.skip=h),u.size>4?u:void 0}(l.pos-r,m))){let e=new Uint16Array(E.size-E.skip),r=l.pos-E.size,s=e.length;for(;l.pos>r;)s=function e(n,r,i){let{id:s,start:o,end:h,size:d}=l;if(l.next(),d>=0&&s<a){let a=i;if(d>4){let s=l.pos-(d-4);for(;l.pos>s;)i=e(n,r,i)}r[--i]=a,r[--i]=h-n,r[--i]=o-n,r[--i]=s}else -3==d?c=s:-4==d&&(u=s);return i}(E.start,e,s);C=new hI(e,x-E.start,i),T=E.start-n}else{let n=l.pos-w;l.next();let r=[],o=[],h=O>=a?O:-1,c=0,u=x;for(;l.pos>n;)h>=0&&l.id==h&&l.size>=0?(l.end<=u-s&&(d(r,o,b,c,l.end,u,h,S,_),c=r.length,u=l.end),l.next()):y>2500?function(e,n,r,o){let a=[],h=0,c=-1;for(;l.pos>n;){let{id:e,start:n,end:r,size:i}=l;if(i>4)l.next();else if(c>-1&&n<c)break;else c<0&&(c=r-s),a.push(e,n,r),h++,l.next()}if(h){let n=new Uint16Array(4*h),s=a[a.length-2];for(let e=a.length-3,r=0;e>=0;e-=3)n[r++]=a[e],n[r++]=a[e+1]-s,n[r++]=a[e+2]-s,n[r++]=r;r.push(new hI(n,a[2]-s,i)),o.push(s-e)}}(b,n,r,o):e(b,n,r,o,h,y+1);if(h>=0&&c>0&&c<r.length&&d(r,o,b,c,b,u,h,S,_),r.reverse(),o.reverse(),h>-1&&c>0){let e=function(e,n){return(r,i,s)=>{let o=0,a=r.length-1,l,h;if(a>=0&&(l=r[a])instanceof hN){if(!a&&l.type==e&&l.length==s)return l;(h=l.prop(hk.lookAhead))&&(o=i[a]+l.length+h)}return p(e,r,i,s,o,n)}}(k,_);C=hY(k,r,o,0,r.length,0,x-b,e,e)}else C=p(k,r,o,x-b,S-x,_)}f.push(C),g.push(T)}(e.start||0,e.bufferStart||0,f,g,-1,0);let m=null!=(n=e.length)?n:f.length?g[0]+f[0].length:0;return new hN(h[e.topID],f.reverse(),g.reverse(),m)}(e)}}hN.empty=new hN(hT.none,[],[],0);class hD{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new hD(this.buffer,this.index)}}class hI{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return hT.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),r==(e+=4))return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,r,i,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&(!h$(s,i,o[l+1],o[l+2])||(a=l,!(r>0)));l=o[l+3]);return a}slice(e,n,r){let i=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=i[a++],s[l++]=i[a++]-r;let n=s[l++]=i[a++]-r;s[l++]=i[a++]-e,o=Math.max(o,n)}return new hI(s,o,this.set)}}function h$(e,n,r,i){switch(e){case -2:return r<n;case -1:return i>=n&&r<n;case 0:return r<n&&i>n;case 1:return r<=n&&i>n;case 2:return i>n;case 4:return!0}}function hR(e,n,r,i){for(var s;e.from==e.to||(r<1?e.from>=n:e.from>n)||(r>-1?e.to<=n:e.to<n);){let n=!i&&e instanceof hQ&&e.index<0?null:e.parent;if(!n)return e;e=n}let o=i?0:pe.IgnoreOverlays;if(i)for(let i=e,a=i.parent;a;a=(i=a).parent)i instanceof hQ&&i.index<0&&(null==(s=a.enter(n,r,o))?void 0:s.from)!=i.from&&(e=a);for(;;){let i=e.enter(n,r,o);if(!i)return e;e=i}}class hL{cursor(e=0){return new hq(this,e)}getChild(e,n=null,r=null){let i=hj(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return hj(this,e,n,r)}resolve(e,n=0){return hR(this,e,n,!1)}resolveInner(e,n=0){return hR(this,e,n,!0)}matchContext(e){return hV(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let e=n.lastChild;if(!e||e.to!=n.to)break;e.type.isError&&e.from==e.to?(r=n,n=e.prevSibling):n=e}return r}get node(){return this}get next(){return this.parent}}class hQ extends hL{constructor(e,n,r,i){super(),this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,h=n>0?a.length:-1;e!=h;e+=n){let h=a[e],c=l[e]+o.from;if(h$(i,r,c,c+h.length)){if(h instanceof hI){if(s&pe.ExcludeBuffers)continue;let a=h.findChild(0,h.buffer.length,n,r-c,i);if(a>-1)return new hB(new hz(o,h,e,c),null,a)}else if(s&pe.IncludeAnonymous||!h.type.isAnonymous||hW(h)){let a;if(!(s&pe.IgnoreMounts)&&(a=hC.get(h))&&!a.overlay)return new hQ(a.tree,c,e,o);let l=new hQ(h,c,e,o);return s&pe.IncludeAnonymous||!l.type.isAnonymous?l:l.nextChild(n<0?h.children.length-1:0,n,r,i)}}}if(s&pe.IncludeAnonymous||!o.type.isAnonymous||(e=o.index>=0?o.index+n:n<0?-1:o._parent._tree.children.length,!(o=o._parent)))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&pe.IgnoreOverlays)&&(i=hC.get(this._tree))&&i.overlay){let r=e-this.from;for(let{from:e,to:s}of i.overlay)if((n>0?e<=r:e<r)&&(n<0?s>=r:s>r))return new hQ(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function hj(e,n,r,i){let s=e.cursor(),o=[];if(!s.firstChild())return o;if(null!=r){for(let e=!1;!e;)if(e=s.type.is(r),!s.nextSibling())return o}for(;;){if(null!=i&&s.type.is(i))return o;if(s.type.is(n)&&o.push(s.node),!s.nextSibling())return null==i?o:[]}}function hV(e,n,r=n.length-1){for(let i=e;r>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(n[r]&&n[r]!=i.name)return!1;r--}}return!0}class hz{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class hB extends hL{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return s<0?null:new hB(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&pe.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new hB(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new hB(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new hB(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let o=r.buffer[this.index+1];e.push(r.slice(i,s,o)),n.push(0)}return new hN(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function hF(e){if(!e.length)return null;let n=0,r=e[0];for(let i=1;i<e.length;i++){let s=e[i];(s.from>r.from||s.to<r.to)&&(r=s,n=i)}let i=r instanceof hQ&&r.index<0?null:r.parent,s=e.slice();return i?s[n]=i:s.splice(n,1),new hZ(s,r)}class hZ{constructor(e,n){this.heads=e,this.node=n}get next(){return hF(this.heads)}}class hq{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof hQ)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return!!e&&(e instanceof hQ?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return!(s<0)&&(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?!(r&pe.ExcludeBuffers)&&this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&pe.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&pe.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let e=r<0?0:this.stack[r]+4;if(this.index!=e)return this.yieldBuf(n.findChild(e,this.index,-1,0,4))}else{let e=n.buffer[this.index+3];if(e<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(e)}return r<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(i.buffer.buffer[e+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let i=n+e,s=e<0?-1:r._tree.children.length;i!=s;i+=e){let e=r._tree.children[i];if(this.mode&pe.IncludeAnonymous||e instanceof hI||!e.type.isAnonymous||hW(e))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)n:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;n=o,r=s+1;break n}i=this.stack[--s]}for(let e=r;e<this.stack.length;e++)n=new hB(this.buffer,n,this.stack[e]);return this.bufferNode=new hB(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&n&&n(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return hV(this.node.parent,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return hV(this._tree,e,i);let o=r[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function hW(e){return e.children.some(e=>e instanceof hI||!e.type.isAnonymous||hW(e))}let hX=new WeakMap;function hU(e,n){if(!e.isAnonymous||n instanceof hI||n.type!=e)return 1;let r=hX.get(n);if(null==r){for(let i of(r=1,n.children)){if(i.type!=e||!(i instanceof hN)){r=1;break}r+=hU(e,i)}hX.set(n,r)}return r}function hY(e,n,r,i,s,o,a,l,h){let c=0;for(let r=i;r<s;r++)c+=hU(e,n[r]);let u=Math.ceil(1.5*c/8),d=[],p=[];return!function n(r,i,s,a,l){for(let c=s;c<a;){let s=c,f=i[c],g=hU(e,r[c]);for(c++;c<a;c++){let n=hU(e,r[c]);if(g+n>=u)break;g+=n}if(c==s+1){if(g>u){let e=r[s];n(e.children,e.positions,0,e.children.length,i[s]+l);continue}d.push(r[s])}else{let n=i[c-1]+r[c-1].length-f;d.push(hY(e,r,i,s,c,f,n,null,h))}p.push(f+l-o)}}(n,r,i,s,0),(l||h)(d,p,a)}class hG{constructor(e,n,r,i,s=!1,o=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=!!s|2*!!o}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e,n=[],r=!1){let i=[new hG(0,e.length,e,0,!1,r)];for(let r of n)r.to>e.length&&i.push(r);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,h=0;;a++){let c=a<n.length?n[a]:null,u=c?c.fromA:1e9;if(u-l>=r)for(;o&&o.from<u;){let n=o;if(l>=n.from||u<=n.to||h){let e=Math.max(n.from,l)-h,r=Math.min(n.to,u)-h;n=e>=r?null:new hG(e,r,n.tree,n.offset+h,a>0,!!c)}if(n&&i.push(n),o.to>u)break;o=s<e.length?e[s++]:null}if(!c)break;l=c.toA,h=c.toA-c.toB}return i}}class hH{startParse(e,n,r){return"string"==typeof e&&(e=new hK(e)),r=r?r.length?r.map(e=>new h_(e.from,e.to)):[new h_(0,0)]:[new h_(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let e=i.advance();if(e)return e}}}class hK{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}function hJ(e){return(n,r,i,s)=>new h4(n,e,r,i,s)}class h0{constructor(e,n,r,i,s){this.parser=e,this.parse=n,this.overlay=r,this.target=i,this.from=s}}function h1(e){if(!e.length||e.some(e=>e.from>=e.to))throw RangeError("Invalid inner parse ranges given: "+JSON.stringify(e))}class h2{constructor(e,n,r,i,s,o,a){this.parser=e,this.predicate=n,this.mounts=r,this.index=i,this.start=s,this.target=o,this.prev=a,this.depth=0,this.ranges=[]}}let h5=new hk({perNode:!0});class h4{constructor(e,n,r,i,s){this.nest=n,this.input=r,this.fragments=i,this.ranges=s,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let e=this.baseParse.advance();if(!e)return null;if(this.baseParse=null,this.baseTree=e,this.startInner(),null!=this.stoppedAt)for(let e of this.inner)e.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let e=this.baseTree;return null!=this.stoppedAt&&(e=new hN(e.type,e.children,e.positions,e.length,e.propValues.concat([[h5,this.stoppedAt]]))),e}let e=this.inner[this.innerDone],n=e.parse.advance();if(n){this.innerDone++;let r=Object.assign(Object.create(null),e.target.props);r[hk.mounted.id]=new hC(n,e.overlay,e.parser),e.target.props=r}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let n=this.innerDone;n<this.inner.length;n++)this.inner[n].from<e&&(e=Math.min(e,this.inner[n].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let n=this.innerDone;n<this.inner.length;n++)this.inner[n].parse.stopAt(e)}startInner(){let e=new h9(this.fragments),n=null,r=null,i=new hq(new hQ(this.baseTree,this.ranges[0].from,0,null),pe.IncludeAnonymous|pe.IgnoreMounts);n:for(let s,o;;){let a=!0,l;if(null!=this.stoppedAt&&i.from>=this.stoppedAt)a=!1;else if(e.hasNode(i)){if(n){let e=n.mounts.find(e=>e.frag.from<=i.from&&e.frag.to>=i.to&&e.mount.overlay);if(e)for(let r of e.mount.overlay){let s=r.from+e.pos,o=r.to+e.pos;s>=i.from&&o<=i.to&&!n.ranges.some(e=>e.from<o&&e.to>s)&&n.ranges.push({from:s,to:o})}}a=!1}else if(r&&(o=function(e,n,r){for(let i of e){if(i.from>=r)break;if(i.to>n)return i.from<=n&&i.to>=r?2:1}return 0}(r.ranges,i.from,i.to)))a=2!=o;else if(!i.type.isAnonymous&&(s=this.nest(i,this.input))&&(i.from<i.to||!s.overlay)){i.tree||function(e){let{node:n}=e,r=[],i=n.context.buffer;do r.push(e.index),e.parent();while(!e.tree);let s=e.tree,o=s.children.indexOf(i),a=s.children[o],l=a.buffer,h=[o];for(let i of(s.children[o]=function e(i,s,o,c,u,d){let p=r[d],f=[],g=[];h3(a,i,p,f,g,c);let m=l[p+1],y=l[p+2];h.push(f.length);let O=d?e(p+4,l[p+3],a.set.types[l[p]],m,y-m,d-1):n.toTree();return f.push(O),g.push(m-c),h3(a,l[p+3],s,f,g,c),new hN(o,f,g,u)}(0,l.length,hT.none,0,a.length,r.length-1),h)){let n=e.tree.children[i],r=e.tree.positions[i];e.yield(new hQ(n,r+e.from,i,e._tree))}}(i);let o=e.findMounts(i.from,s.parser);if("function"==typeof s.overlay)n=new h2(s.parser,s.overlay,o,this.inner.length,i.from,i.tree,n);else{let e=h7(this.ranges,s.overlay||(i.from<i.to?[new h_(i.from,i.to)]:[]));e.length&&h1(e),(e.length||!s.overlay)&&this.inner.push(new h0(s.parser,e.length?s.parser.startParse(this.input,h8(o,e),e):s.parser.startParse(""),s.overlay?s.overlay.map(e=>new h_(e.from-i.from,e.to-i.from)):null,i.tree,e.length?e[0].from:i.from)),s.overlay?e.length&&(r={ranges:e,depth:0,prev:r}):a=!1}}else if(n&&(l=n.predicate(i))&&(!0===l&&(l=new h_(i.from,i.to)),l.from<l.to)){let e=n.ranges.length-1;e>=0&&n.ranges[e].to==l.from?n.ranges[e]={from:n.ranges[e].from,to:l.to}:n.ranges.push(l)}if(a&&i.firstChild())n&&n.depth++,r&&r.depth++;else for(;!i.nextSibling();){if(!i.parent())break n;if(n&&!--n.depth){let e=h7(this.ranges,n.ranges);e.length&&(h1(e),this.inner.splice(n.index,0,new h0(n.parser,n.parser.startParse(this.input,h8(n.mounts,e),e),n.ranges.map(e=>new h_(e.from-n.start,e.to-n.start)),n.target,e[0].from))),n=n.prev}!r||--r.depth||(r=r.prev)}}}}function h3(e,n,r,i,s,o){if(n<r){let a=e.buffer[n+1];i.push(e.slice(n,r,a)),s.push(a-o)}}class h6{constructor(e,n){this.offset=n,this.done=!1,this.cursor=e.cursor(pe.IncludeAnonymous|pe.IgnoreMounts)}moveTo(e){let{cursor:n}=this,r=e-this.offset;for(;!this.done&&n.from<r;)n.to>=e&&n.enter(r,1,pe.IgnoreOverlays|pe.ExcludeBuffers)||n.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let n=this.cursor.tree;;){if(n==e.tree)return!0;if(n.children.length&&0==n.positions[0]&&n.children[0]instanceof hN)n=n.children[0];else break}return!1}}class h9{constructor(e){var n;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let r=this.curFrag=e[0];this.curTo=null!=(n=r.tree.prop(h5))?n:r.to,this.inner=new h6(r.tree,-r.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let n=this.curFrag=this.fragments[this.fragI];this.curTo=null!=(e=n.tree.prop(h5))?e:n.to,this.inner=new h6(n.tree,-n.offset)}}findMounts(e,n){var r;let i=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let e=this.inner.cursor.node;e;e=e.parent){let s=null==(r=e.tree)?void 0:r.prop(hk.mounted);if(s&&s.parser==n)for(let n=this.fragI;n<this.fragments.length;n++){let r=this.fragments[n];if(r.from>=e.to)break;r.tree==this.curFrag.tree&&i.push({frag:r,pos:e.from-r.offset,mount:s})}}}return i}}function h7(e,n){let r=null,i=n;for(let s=1,o=0;s<e.length;s++){let a=e[s-1].to,l=e[s].from;for(;o<i.length;o++){let e=i[o];if(e.from>=l)break;!(e.to<=a)&&(r||(i=r=n.slice()),e.from<a?(r[o]=new h_(e.from,a),e.to>l&&r.splice(o+1,0,new h_(l,e.to))):e.to>l?r[o--]=new h_(l,e.to):r.splice(o--,1))}}return i}function h8(e,n){let r=[];for(let{pos:i,mount:s,frag:o}of e){let e=i+(s.overlay?s.overlay[0].from:0),a=e+s.tree.length,l=Math.max(o.from,e),h=Math.min(o.to,a);if(s.overlay){let a=function(e,n,r,i){let s=0,o=0,a=!1,l=!1,h=-1e9,c=[];for(;;){let u=s==e.length?1e9:a?e[s].to:e[s].from,d=o==n.length?1e9:l?n[o].to:n[o].from;if(a!=l){let e=Math.max(h,r),n=Math.min(u,d,i);e<n&&c.push(new h_(e,n))}if(1e9==(h=Math.min(u,d)))break;u==h&&(a?(a=!1,s++):a=!0),d==h&&(l?(l=!1,o++):l=!0)}return c}(n,s.overlay.map(e=>new h_(e.from+i,e.to+i)),l,h);for(let n=0,i=l;;n++){let l=n==a.length,c=l?h:a[n].from;if(c>i&&r.push(new hG(i,c,s.tree,-e,o.from>=i||o.openStart,o.to<=c||o.openEnd)),l)break;i=a[n].to}}else r.push(new hG(l,h,s.tree,-e,o.from>=e||o.openStart,o.to<=a||o.openEnd))}return r}function ce(e){return e.reduce((e,n)=>[...e,...n],[])}function ct(e,n,r,i,s=!1){let{from:o,to:a}=e;if(o>=r||a<=n)return;i(e);let l=e.tree&&e.tree.prop(hk.mounted);if(l&&l.overlay&&!s){let h=e.node.enter(l.overlay[0].from+o,1),c=e.firstChild();for(let u=0,d=o;;u++){let p=u<l.overlay.length?l.overlay[u]:null,f=p?p.from+o:a,g=Math.max(n,d),m=Math.min(r,f);if(g<m&&c)for(;e.from<m&&(ct(e,g,m,i,s),!(e.to>=f)&&e.nextSibling()););if(!p||f>r)break;if((d=p.to+o)>n){let a=Math.max(n,p.from+o),l=Math.min(r,d);for(;e.from<l&&(ct(e,Math.max(n,p.from+o),Math.min(r,d),i,!0),!(e.to>=l)&&e.nextSibling()););ct(h.cursor(),a,l,i,s)}}c&&e.parent()}else if(e.firstChild()){do{if(e.to<=n)continue;if(e.from>=r)break;ct(e,n,r,i,s)}while(e.nextSibling());e.parent()}}function cn(e,n){return e.from===e.to?e.from>n.from&&e.from<n.to:e.from<=n.from&&e.to>n.from||e.to>=n.to&&e.from<n.to||e.from>=n.from&&e.to<=n.to}var cr=e=>e[e.length-1];let ci=0;class cs{constructor(e,n,r,i){this.name=e,this.set=n,this.base=r,this.modified=i,this.id=ci++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){if(e instanceof cs&&(n=e),null==n?void 0:n.base)throw Error("Can not derive from a modified tag");let r=new cs("string"==typeof e?e:"?",[],null,[]);if(r.set.push(r),n)for(let e of n.set)r.set.push(e);return r}static defineModifier(e){let n=new ca(e);return e=>e.modified.indexOf(n)>-1?e:ca.get(e.base||e,e.modified.concat(n).sort((e,n)=>e.id-n.id))}}let co=0;class ca{constructor(e){this.name=e,this.instances=[],this.id=co++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(r=>{var i,s;return r.base==e&&(i=n,s=r.modified,i.length==s.length&&i.every((e,n)=>e==s[n]))});if(r)return r;let i=[],s=new cs(e.name,i,e,n);for(let e of n)e.instances.push(s);let o=function(e){let n=[[]];for(let r=0;r<e.length;r++)for(let i=0,s=n.length;i<s;i++)n.push(n[i].concat(e[r]));return n.sort((e,n)=>n.length-e.length)}(n);for(let n of e.set)if(!n.modified.length)for(let e of o)i.push(ca.get(n,e));return s}}function cl(e){let n=Object.create(null);for(let r in e){let i=e[r];for(let e of(Array.isArray(i)||(i=[i]),r.split(" ")))if(e){let r=[],s=2,o=e;for(let n=0;;){if("..."==o&&n>0&&n+3==e.length){s=1;break}let i=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!i)throw RangeError("Invalid path: "+e);if(r.push("*"==i[0]?"":'"'==i[0][0]?JSON.parse(i[0]):i[0]),(n+=i[0].length)==e.length)break;let a=e[n++];if(n==e.length&&"!"==a){s=0;break}if("/"!=a)throw RangeError("Invalid path: "+e);o=e.slice(n)}let a=r.length-1,l=r[a];if(!l)throw RangeError("Invalid path: "+e);let h=new cc(i,s,a>0?r.slice(0,a):null);n[l]=h.sort(n[l])}}return ch.add(n)}let ch=new hk;class cc{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function cu(e,n){let r=Object.create(null);for(let n of e)if(Array.isArray(n.tag))for(let e of n.tag)r[e.id]=n.class;else r[n.tag.id]=n.class;let{scope:i,all:s=null}=n||{};return{style:e=>{let n=s;for(let i of e)for(let e of i.set){let i=r[e.id];if(i){n=n?n+" "+i:i;break}}return n},scope:i}}cc.empty=new cc([],2,null);class cd{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,s){let{type:o,from:a,to:l}=e;if(a>=r||l<=n)return;o.isTop&&(s=this.highlighters.filter(e=>!e.scope||e.scope(o)));let h=i,c=function(e){let n=e.type.prop(ch);for(;n&&n.context&&!e.matchContext(n.context);)n=n.next;return n||null}(e)||cc.empty,u=function(e,n){let r=null;for(let i of e){let e=i.style(n);e&&(r=r?r+" "+e:e)}return r}(s,c.tags);if(u&&(h&&(h+=" "),h+=u,1==c.mode&&(i+=(i?" ":"")+u)),this.startSpan(Math.max(n,a),h),c.opaque)return;let d=e.tree&&e.tree.prop(hk.mounted);if(d&&d.overlay){let o=e.node.enter(d.overlay[0].from+a,1),c=this.highlighters.filter(e=>!e.scope||e.scope(d.tree.type)),u=e.firstChild();for(let p=0,f=a;;p++){let g=p<d.overlay.length?d.overlay[p]:null,m=g?g.from+a:l,y=Math.max(n,f),O=Math.min(r,m);if(y<O&&u)for(;e.from<O&&(this.highlightRange(e,y,O,i,s),this.startSpan(Math.min(O,e.to),h),!(e.to>=m)&&e.nextSibling()););if(!g||m>r)break;(f=g.to+a)>n&&(this.highlightRange(o.cursor(),Math.max(n,g.from+a),Math.min(r,f),"",c),this.startSpan(Math.min(r,f),h))}u&&e.parent()}else if(e.firstChild()){d&&(i="");do{if(e.to<=n)continue;if(e.from>=r)break;this.highlightRange(e,n,r,i,s),this.startSpan(Math.min(r,e.to),h)}while(e.nextSibling());e.parent()}}}let cp=cs.define,cf=cp(),cg=cp(),cm=cp(cg),cy=cp(cg),cO=cp(),cv=cp(cO),cb=cp(cO),cx=cp(),cw=cp(cx),cS=cp(),c_=cp(),ck=cp(),cC=cp(ck),cE=cp(),cT={comment:cf,lineComment:cp(cf),blockComment:cp(cf),docComment:cp(cf),name:cg,variableName:cp(cg),typeName:cm,tagName:cp(cm),propertyName:cy,attributeName:cp(cy),className:cp(cg),labelName:cp(cg),namespace:cp(cg),macroName:cp(cg),literal:cO,string:cv,docString:cp(cv),character:cp(cv),attributeValue:cp(cv),number:cb,integer:cp(cb),float:cp(cb),bool:cp(cO),regexp:cp(cO),escape:cp(cO),color:cp(cO),url:cp(cO),keyword:cS,self:cp(cS),null:cp(cS),atom:cp(cS),unit:cp(cS),modifier:cp(cS),operatorKeyword:cp(cS),controlKeyword:cp(cS),definitionKeyword:cp(cS),moduleKeyword:cp(cS),operator:c_,derefOperator:cp(c_),arithmeticOperator:cp(c_),logicOperator:cp(c_),bitwiseOperator:cp(c_),compareOperator:cp(c_),updateOperator:cp(c_),definitionOperator:cp(c_),typeOperator:cp(c_),controlOperator:cp(c_),punctuation:ck,separator:cp(ck),bracket:cC,angleBracket:cp(cC),squareBracket:cp(cC),paren:cp(cC),brace:cp(cC),content:cx,heading:cw,heading1:cp(cw),heading2:cp(cw),heading3:cp(cw),heading4:cp(cw),heading5:cp(cw),heading6:cp(cw),contentSeparator:cp(cx),list:cp(cx),quote:cp(cx),emphasis:cp(cx),strong:cp(cx),link:cp(cx),monospace:cp(cx),strikethrough:cp(cx),inserted:cp(),deleted:cp(),changed:cp(),invalid:cp(),meta:cE,documentMeta:cp(cE),annotation:cp(cE),processingInstruction:cp(cE),definition:cs.defineModifier("definition"),constant:cs.defineModifier("constant"),function:cs.defineModifier("function"),standard:cs.defineModifier("standard"),local:cs.defineModifier("local"),special:cs.defineModifier("special")};for(let e in cT){let n=cT[e];n instanceof cs&&(n.name=e)}cu([{tag:cT.link,class:"tok-link"},{tag:cT.heading,class:"tok-heading"},{tag:cT.emphasis,class:"tok-emphasis"},{tag:cT.strong,class:"tok-strong"},{tag:cT.keyword,class:"tok-keyword"},{tag:cT.atom,class:"tok-atom"},{tag:cT.bool,class:"tok-bool"},{tag:cT.url,class:"tok-url"},{tag:cT.labelName,class:"tok-labelName"},{tag:cT.inserted,class:"tok-inserted"},{tag:cT.deleted,class:"tok-deleted"},{tag:cT.literal,class:"tok-literal"},{tag:cT.string,class:"tok-string"},{tag:cT.number,class:"tok-number"},{tag:[cT.regexp,cT.escape,cT.special(cT.string)],class:"tok-string2"},{tag:cT.variableName,class:"tok-variableName"},{tag:cT.local(cT.variableName),class:"tok-variableName tok-local"},{tag:cT.definition(cT.variableName),class:"tok-variableName tok-definition"},{tag:cT.special(cT.variableName),class:"tok-variableName2"},{tag:cT.definition(cT.propertyName),class:"tok-propertyName tok-definition"},{tag:cT.typeName,class:"tok-typeName"},{tag:cT.namespace,class:"tok-namespace"},{tag:cT.className,class:"tok-className"},{tag:cT.macroName,class:"tok-macroName"},{tag:cT.propertyName,class:"tok-propertyName"},{tag:cT.operator,class:"tok-operator"},{tag:cT.comment,class:"tok-comment"},{tag:cT.meta,class:"tok-meta"},{tag:cT.invalid,class:"tok-invalid"},{tag:cT.punctuation,class:"tok-punctuation"}]);let cP=new hk;function cA(e){return rg.define({combine:e?n=>n.concat(e):void 0})}let cM=new hk;class cN{constructor(e,n,r=[],i=""){this.data=e,this.name=i,rU.prototype.hasOwnProperty("tree")||Object.defineProperty(rU.prototype,"tree",{get(){return c$(this)}}),this.parser=n,this.extension=[cZ.of(this),rU.languageData.of((e,n,r)=>{let i=cD(e,n,r),s=i.type.prop(cP);if(!s)return[];let o=e.facet(s),a=i.type.prop(cM);if(a){let s=i.resolve(n-i.from,r);for(let n of a)if(n.test(s,e)){let r=e.facet(n.facet);return"replace"==n.type?r:r.concat(o)}}return o})].concat(r)}isActiveAt(e,n,r=-1){return cD(e,n,r).type.prop(cP)==this.data}findRegions(e){let n=e.facet(cZ);if((null==n?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(e,n)=>{if(e.prop(cP)==this.data)return void r.push({from:n,to:n+e.length});let s=e.prop(hk.mounted);if(s){if(s.tree.prop(cP)==this.data){if(s.overlay)for(let e of s.overlay)r.push({from:e.from+n,to:e.to+n});else r.push({from:n,to:n+e.length});return}else if(s.overlay){let e=r.length;if(i(s.tree,s.overlay[0].from+n),r.length>e)return}}for(let r=0;r<e.children.length;r++){let s=e.children[r];s instanceof hN&&i(s,e.positions[r]+n)}};return i(c$(e),0),r}get allowsNesting(){return!0}}function cD(e,n,r){let i=e.facet(cZ),s=c$(e).topNode;if(!i||i.allowsNesting)for(let e=s;e;e=e.enter(n,r,pe.ExcludeBuffers))e.type.isTop&&(s=e);return s}cN.setState=rV.define();class cI extends cN{constructor(e,n,r){super(e,n,[],r),this.parser=n}static define(e){let n=cA(e.languageData);return new cI(n,e.parser.configure({props:[cP.add(e=>e.isTop?n:void 0)]}),e.name)}configure(e,n){return new cI(this.data,this.parser.configure(e),n||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function c$(e){let n=e.field(cN.state,!1);return n?n.tree:hN.empty}class cR{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let cL=null;class cQ{constructor(e,n,r=[],i,s,o,a,l){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new cQ(e,n,[],hN.empty,0,r,[],null)}startParse(){return this.parser.startParse(new cR(this.state.doc),this.fragments)}work(e,n){return(null!=n&&n>=this.state.doc.length&&(n=void 0),this.tree!=hN.empty&&this.isDone(null!=n?n:this.state.doc.length))?(this.takeTree(),!0):this.withContext(()=>{var r;if("number"==typeof e){let n=Date.now()+e;e=()=>Date.now()>n}for(this.parse||(this.parse=this.startParse()),null!=n&&(null==this.parse.stoppedAt||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i){if(this.fragments=this.withoutTempSkipped(hG.addTree(i,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!=(r=this.parse.stoppedAt)?r:this.state.doc.length,this.tree=i,this.parse=null,!(this.treeLen<(null!=n?n:this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(hG.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=cL;cL=this;try{return e()}finally{cL=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=cj(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let n=[];if(e.iterChangedRanges((e,r,i,s)=>n.push({fromA:e,toA:r,fromB:i,toB:s})),r=hG.applyChanges(r,n),i=hN.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length)for(let n of(a=[],this.skipped)){let r=e.mapPos(n.from,1),i=e.mapPos(n.to,-1);r<i&&a.push({from:r,to:i})}}return new cQ(this.parser,n,r,i,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:r,to:i}=this.skipped[n];r<e.to&&i>e.from&&(this.fragments=cj(this.fragments,r,i),this.skipped.splice(n--,1))}return!(this.skipped.length>=n)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends hH{createParse(n,r,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let n=cL;if(n){for(let e of i)n.tempSkipped.push(e);e&&(n.scheduleOn=n.scheduleOn?Promise.all([n.scheduleOn,e]):e)}return this.parsedPos=o,new hN(hT.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&0==n[0].from&&n[0].to>=e}static get(){return cL}}function cj(e,n,r){return hG.applyChanges(e,[{fromA:n,toA:r,fromB:n,toB:r}])}class cV{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new cV(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=cQ.create(e.facet(cZ).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new cV(r)}}cN.state=rx.define({create:cV.init,update(e,n){for(let e of n.effects)if(e.is(cN.setState))return e.value;return n.startState.facet(cZ)!=n.state.facet(cZ)?cV.init(n.state):e.apply(n)}});let cz=e=>{let n=setTimeout(()=>e(),500);return()=>clearTimeout(n)};"undefined"!=typeof requestIdleCallback&&(cz=e=>{let n=-1,r=setTimeout(()=>{n=requestIdleCallback(e,{timeout:400})},100);return()=>n<0?clearTimeout(r):cancelIdleCallback(n)});let cB="undefined"!=typeof navigator&&(null==(pt=navigator.scheduling)?void 0:pt.isInputPending)?()=>navigator.scheduling.isInputPending():null,cF=sG.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(cN.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(cN.state);n.tree==n.context.tree&&n.context.isDone(e.doc.length)||(this.working=cz(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(cN.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!cB?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<i&&r.doc.length>i+1e3,l=s.context.work(()=>cB&&cB()||Date.now()>o,i+1e5*!a);this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:cN.setState.of(new cV(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(e=>sW(this.view.state,e)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),cZ=rg.define({combine:e=>e.length?e[0]:null,enables:e=>[cN.state,cF,aO.contentAttributes.compute([e],n=>{let r=n.facet(e);return r&&r.name?{"data-language":r.name}:{}})]});class cq{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}let cW=rg.define(),cX=rg.define({combine:e=>{if(!e.length)return"  ";let n=e[0];if(!n||/\S/.test(n)||Array.from(n).some(e=>e!=n[0]))throw Error("Invalid indent unit: "+JSON.stringify(e[0]));return n}});function cU(e){let n=e.facet(cX);return 9==n.charCodeAt(0)?e.tabSize*n.length:n.length}function cY(e,n){let r="",i=e.tabSize,s=e.facet(cX)[0];if("	"==s){for(;n>=i;)r+="	",n-=i;s=" "}for(let e=0;e<n;e++)r+=s;return r}function cG(e,n){for(let r of(e instanceof rU&&(e=new cH(e)),e.state.facet(cW))){let i=r(e,n);if(void 0!==i)return i}let r=c$(e.state);return r.length>=n?function(e,n,r){let i=n.resolveStack(r),s=n.resolveInner(r,-1).resolve(r,0).enterUnfinishedNodesBefore(r);if(s!=i.node){let e=[];for(let n=s;n&&!(n.from<i.node.from||n.to>i.node.to||n.from==i.node.from&&n.type==i.node.type);n=n.parent)e.push(n);for(let n=e.length-1;n>=0;n--)i={node:e[n],next:i}}return cJ(i,e,r)}(e,r,n):null}class cH{constructor(e,n={}){this.state=e,this.options=n,this.unit=cU(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;if(null!=i&&i>=r.from&&i<=r.to)if(s&&i==e)return{text:"",from:e};else if(n<0?i<e:i<=e)return{text:r.text.slice(i-r.from),from:i};else return{text:r.text.slice(0,i-r.from),from:r.from};return r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.countColumn(r,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(s+=o-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,n=e.length){return ir(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let e=s(i);if(e>-1)return e}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}let cK=new hk;function cJ(e,n,r){for(let i=e;i;i=i.next){let e=function(e){let n=e.type.prop(cK);if(n)return n;let r=e.firstChild,i;if(r&&(i=r.type.prop(hk.closedBy))){let n=e.lastChild,r=n&&i.indexOf(n.name)>-1;return e=>c5(e,!0,1,void 0,r&&!(e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak)?n.from:void 0)}return null==e.parent?c0:null}(i.node);if(e)return e(c1.create(n,r,i))}return 0}function c0(){return 0}class c1 extends cH{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.context=r}get node(){return this.context.node}static create(e,n,r){return new c1(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(function(e,n){for(let r=n;r;r=r.parent)if(e==r)return!0;return!1}(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){return cJ(this.context.next,this.base,this.pos)}}function c2({closing:e,align:n=!0,units:r=1}){return i=>c5(i,n,r,e)}function c5(e,n,r,i,s){let o=e.textAfter,a=o.match(/^\s*/)[0].length,l=i&&o.slice(a,a+i.length)==i||s==e.pos+a,h=n?function(e){let n=e.node,r=n.childAfter(n.from),i=n.lastChild;if(!r)return null;let s=e.options.simulateBreak,o=e.state.doc.lineAt(r.from),a=null==s||s<=o.from?o.to:Math.min(o.to,s);for(let e=r.to;;){let s=n.childAfter(e);if(!s||s==i)return null;if(!s.type.isSkipped){if(s.from>=a)return null;let e=/^ */.exec(o.text.slice(r.to-o.from))[0].length;return{from:r.from,to:r.to+e}}e=s.to}}(e):null;return h?l?e.column(h.from):e.column(h.to):e.baseIndent+(l?0:e.unit*r)}function c4({except:e,units:n=1}={}){return r=>{let i=e&&e.test(r.textAfter);return r.baseIndent+(i?0:n*r.unit)}}let c3=rg.define(),c6=new hk;function c9(e){let n=e.firstChild,r=e.lastChild;return n&&n.to<r.from?{from:n.to,to:r.type.isError?e.to:r.from}:null}function c7(e,n,r){for(let i of e.facet(c3)){let s=i(e,n,r);if(s)return s}return function(e,n,r){let i=c$(e);if(i.length<r)return null;let s=i.resolveStack(r,1),o=null;for(let a=s;a;a=a.next){let s=a.node;if(s.to<=r||s.from>r)continue;if(o&&s.from<n)break;let l=s.type.prop(c6);if(l&&(s.to<i.length-50||i.length==e.doc.length||!function(e){let n=e.lastChild;return n&&n.to==e.to&&n.type.isError}(s))){let i=l(s,e);i&&i.from<=r&&i.from>=n&&i.to>r&&(o=i)}}return o}(e,n,r)}function c8(e,n){let r=n.mapPos(e.from,1),i=n.mapPos(e.to,-1);return r>=i?void 0:{from:r,to:i}}let ue=rV.define({map:c8}),ut=rV.define({map:c8});function un(e){let n=[];for(let{head:r}of e.state.selection.ranges)n.some(e=>e.from<=r&&e.to>=r)||n.push(e.lineBlockAt(r));return n}let ur=rx.define({create:()=>ss.none,update(e,n){for(let r of(n.isUserEvent("delete")&&n.changes.iterChangedRanges((n,r)=>e=ui(e,n,r)),e=e.map(n.changes),n.effects))if(r.is(ue)&&!function(e,n,r){let i=!1;return e.between(n,n,(e,s)=>{e==n&&s==r&&(i=!0)}),i}(e,r.value.from,r.value.to)){let{preparePlaceholder:i}=n.state.facet(uc),s=i?ss.replace({widget:new uf(i(n.state,r.value))}):up;e=e.update({add:[s.range(r.value.from,r.value.to)]})}else r.is(ut)&&(e=e.update({filter:(e,n)=>r.value.from!=e||r.value.to!=n,filterFrom:r.value.from,filterTo:r.value.to}));return n.selection&&(e=ui(e,n.selection.main.head)),e},provide:e=>aO.decorations.from(e),toJSON(e,n){let r=[];return e.between(0,n.doc.length,(e,n)=>{r.push(e,n)}),r},fromJSON(e){if(!Array.isArray(e)||e.length%2)throw RangeError("Invalid JSON for fold state");let n=[];for(let r=0;r<e.length;){let i=e[r++],s=e[r++];if("number"!=typeof i||"number"!=typeof s)throw RangeError("Invalid JSON for fold state");n.push(up.range(i,s))}return ss.set(n,!0)}});function ui(e,n,r=n){let i=!1;return e.between(n,r,(e,s)=>{e<r&&s>n&&(i=!0)}),i?e.update({filterFrom:n,filterTo:r,filter:(e,i)=>e>=r||i<=n}):e}function us(e,n,r){var i;let s=null;return null==(i=e.field(ur,!1))||i.between(n,r,(e,n)=>{(!s||s.from>e)&&(s={from:e,to:n})}),s}function uo(e,n){return e.field(ur,!1)?n:n.concat(rV.appendConfig.of(uu()))}function ua(e,n,r=!0){let i=e.state.doc.lineAt(n.from).number,s=e.state.doc.lineAt(n.to).number;return aO.announce.of(`${e.state.phrase(r?"Folded lines":"Unfolded lines")} ${i} ${e.state.phrase("to")} ${s}.`)}let ul=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:e=>{for(let n of un(e)){let r=c7(e.state,n.from,n.to);if(r)return e.dispatch({effects:uo(e.state,[ue.of(r),ua(e,r)])}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:e=>{if(!e.state.field(ur,!1))return!1;let n=[];for(let r of un(e)){let i=us(e.state,r.from,r.to);i&&n.push(ut.of(i),ua(e,i,!1))}return n.length&&e.dispatch({effects:n}),n.length>0}},{key:"Ctrl-Alt-[",run:e=>{let{state:n}=e,r=[];for(let i=0;i<n.doc.length;){let s=e.lineBlockAt(i),o=c7(n,s.from,s.to);o&&r.push(ue.of(o)),i=(o?e.lineBlockAt(o.to):s).to+1}return r.length&&e.dispatch({effects:uo(e.state,r)}),!!r.length}},{key:"Ctrl-Alt-]",run:e=>{let n=e.state.field(ur,!1);if(!n||!n.size)return!1;let r=[];return n.between(0,e.state.doc.length,(e,n)=>{r.push(ut.of({from:e,to:n}))}),e.dispatch({effects:r}),!0}}],uh={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},uc=rg.define({combine:e=>rY(e,uh)});function uu(e){let n=[ur,uy];return e&&n.push(uc.of(e)),n}function ud(e,n){let{state:r}=e,i=r.facet(uc),s=n=>{let r=e.lineBlockAt(e.posAtDOM(n.target)),i=us(e.state,r.from,r.to);i&&e.dispatch({effects:ut.of(i)}),n.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(e,s,n);let o=document.createElement("span");return o.textContent=i.placeholderText,o.setAttribute("aria-label",r.phrase("folded code")),o.title=r.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=s,o}let up=ss.replace({widget:new class extends sr{toDOM(e){return ud(e,null)}}});class uf extends sr{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return ud(e,this.value)}}let ug={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class um extends lv{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}let uy=aO.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class uO{constructor(e,n){let r;function i(e){let n=il.newName();return(r||(r=Object.create(null)))["."+n]=e,n}this.specs=e;let s="string"==typeof n.all?n.all:n.all?i(n.all):void 0,o=n.scope;this.scope=o instanceof cN?e=>e.prop(cP)==o.data:o?e=>e==o:void 0,this.style=cu(e.map(e=>({tag:e.tag,class:e.class||i(Object.assign({},e,{tag:null}))})),{all:s}).style,this.module=r?new il(r):null,this.themeType=n.themeType}static define(e,n){return new uO(e,n||{})}}let uv=rg.define(),ub=rg.define({combine:e=>e.length?[e[0]]:null});function ux(e){let n=e.facet(uv);return n.length?n:e.facet(ub)}function uw(e,n){let r=[uS],i;return e instanceof uO&&(e.module&&r.push(aO.styleModule.of(e.module)),i=e.themeType),(null==n?void 0:n.fallback)?r.push(ub.of(e)):i?r.push(uv.computeN([aO.darkTheme],n=>n.facet(aO.darkTheme)==("dark"==i)?[e]:[])):r.push(uv.of(e)),r}let uS=rS.high(sG.fromClass(class{constructor(e){this.markCache=Object.create(null),this.tree=c$(e.state),this.decorations=this.buildDeco(e,ux(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=c$(e.state),r=ux(e.state),i=r!=ux(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!i&&n.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return ss.none;let r=new r1;for(let{from:i,to:s}of e.visibleRanges)!function(e,n,r,i=0,s=e.length){let o=new cd(i,Array.isArray(n)?n:[n],r);o.highlightRange(e.cursor(),i,s,"",o.highlighters),o.flush(s)}(this.tree,n,(e,n,i)=>{r.add(e,n,this.markCache[i]||(this.markCache[i]=ss.mark({class:i})))},i,s);return r.finish()}},{decorations:e=>e.decorations})),u_=uO.define([{tag:cT.meta,color:"#404740"},{tag:cT.link,textDecoration:"underline"},{tag:cT.heading,textDecoration:"underline",fontWeight:"bold"},{tag:cT.emphasis,fontStyle:"italic"},{tag:cT.strong,fontWeight:"bold"},{tag:cT.strikethrough,textDecoration:"line-through"},{tag:cT.keyword,color:"#708"},{tag:[cT.atom,cT.bool,cT.url,cT.contentSeparator,cT.labelName],color:"#219"},{tag:[cT.literal,cT.inserted],color:"#164"},{tag:[cT.string,cT.deleted],color:"#a11"},{tag:[cT.regexp,cT.escape,cT.special(cT.string)],color:"#e40"},{tag:cT.definition(cT.variableName),color:"#00f"},{tag:cT.local(cT.variableName),color:"#30a"},{tag:[cT.typeName,cT.namespace],color:"#085"},{tag:cT.className,color:"#167"},{tag:[cT.special(cT.variableName),cT.macroName],color:"#256"},{tag:cT.definition(cT.propertyName),color:"#00c"},{tag:cT.comment,color:"#940"},{tag:cT.invalid,color:"#f00"}]),uk=new hk;function uC(e,n,r){let i=e.prop(n<0?hk.openedBy:hk.closedBy);if(i)return i;if(1==e.name.length){let i=r.indexOf(e.name);if(i>-1&&i%2==+(n<0))return[r[i+n]]}return null}function uE(e){let n=e.type.prop(uk);return n?n(e.node):e}function uT(e,n,r,i={}){let s=i.maxScanDistance||1e4,o=i.brackets||"()[]{}",a=c$(e),l=a.resolveInner(n,r);for(let e=l;e;e=e.parent){let i=uC(e.type,r,o);if(i&&e.from<e.to){let s=uE(e);if(s&&(r>0?n>=s.from&&n<s.to:n>s.from&&n<=s.to))return function(e,n,r,i,s,o,a){let l=i.parent,h={from:s.from,to:s.to},c=0,u=null==l?void 0:l.cursor();if(u&&(r<0?u.childBefore(i.from):u.childAfter(i.to)))do if(r<0?u.to<=i.from:u.from>=i.to){if(0==c&&o.indexOf(u.type.name)>-1&&u.from<u.to){let e=uE(u);return{start:h,end:e?{from:e.from,to:e.to}:void 0,matched:!0}}else if(uC(u.type,r,a))c++;else if(uC(u.type,-r,a)){if(0==c){let e=uE(u);return{start:h,end:e&&e.from<e.to?{from:e.from,to:e.to}:void 0,matched:!1}}c--}}while(r<0?u.prevSibling():u.nextSibling());return{start:h,matched:!1}}(0,0,r,e,s,i,o)}}return function(e,n,r,i,s,o,a){let l=r<0?e.sliceDoc(n-1,n):e.sliceDoc(n,n+1),h=a.indexOf(l);if(h<0||h%2==0!=r>0)return null;let c={from:r<0?n-1:n,to:r>0?n+1:n},u=e.doc.iterRange(n,r>0?e.doc.length:0),d=0;for(let e=0;!u.next().done&&e<=o;){let o=u.value;r<0&&(e+=o.length);let l=n+e*r;for(let e=r>0?0:o.length-1,n=r>0?o.length:-1;e!=n;e+=r){let n=a.indexOf(o[e]);if(!(n<0)&&i.resolveInner(l+e,1).type==s)if(n%2==0==r>0)d++;else{if(1==d)return{start:c,end:{from:l+e,to:l+e+1},matched:n>>1==h>>1};d--}}r>0&&(e+=o.length)}return u.done?{start:c,matched:!1}:null}(e,n,r,a,l.type,s,o)}function uP(e,n,r,i=0,s=0){null==n&&-1==(n=e.search(/[^\s\u00a0]/))&&(n=e.length);let o=s;for(let s=i;s<n;s++)9==e.charCodeAt(s)?o+=r-o%r:o++;return o}class uA{constructor(e,n,r,i){this.string=e,this.tabSize=n,this.indentUnit=r,this.overrideIndent=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return 0==this.pos}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos);if("string"==typeof e?n==e:n&&(e instanceof RegExp?e.test(n):e(n)))return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=uP(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return null!=(e=this.overrideIndent)?e:uP(this.string,null,this.tabSize)}match(e,n,r){if("string"==typeof e){let i=e=>r?e.toLowerCase():e;return i(this.string.substr(this.pos,e.length))==i(e)?(!1!==n&&(this.pos+=e.length),!0):null}{let r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&!1!==n&&(this.pos+=r[0].length),r)}}current(){return this.string.slice(this.start,this.pos)}}function uM(e){if("object"!=typeof e)return e;let n={};for(let r in e){let i=e[r];n[r]=i instanceof Array?i.slice():i}return n}let uN=new WeakMap;class uD extends cN{constructor(e){let n=cA(e.languageData),r=function(e){return{name:e.name||"",token:e.token,blankLine:e.blankLine||(()=>{}),startState:e.startState||(()=>!0),copyState:e.copyState||uM,indent:e.indent||(()=>null),languageData:e.languageData||{},tokenTable:e.tokenTable||uL,mergeTokens:!1!==e.mergeTokens}}(e),i;super(n,new class extends hH{createParse(e,n,r){return new u$(i,e,n,r)}},[],e.name),this.topNode=function(e,n){let r=hT.define({id:uQ.length,name:"Document",props:[cP.add(()=>e),cK.add(()=>e=>n.getIndent(e))],top:!0});return uQ.push(r),r}(n,this),i=this,this.streamParser=r,this.stateAfter=new hk({perNode:!0}),this.tokenTable=e.tokenTable?new uF(r.tokenTable):uZ}static define(e){return new uD(e)}getIndent(e){let n,{overrideIndentation:r}=e.options;r&&null!=(n=uN.get(e.state))&&n<e.pos-1e4&&(n=void 0);let i=uI(this,e.node.tree,e.node.from,e.node.from,null!=n?n:e.pos),s,o;if(i?(o=i.state,s=i.pos+1):(o=this.streamParser.startState(e.unit),s=e.node.from),e.pos-s>1e4)return null;for(;s<e.pos;){let n=e.state.doc.lineAt(s),i=Math.min(e.pos,n.to);if(n.length){let s=r?r(n.from):-1,a=new uA(n.text,e.state.tabSize,e.unit,s<0?void 0:s);for(;a.pos<i-n.from;)uR(this.streamParser.token,a,o)}else this.streamParser.blankLine(o,e.unit);if(i==e.pos)break;s=n.to+1}let a=e.lineAt(e.pos);return r&&null==n&&uN.set(e.state,a.from),this.streamParser.indent(o,/^\s*(.*)/.exec(a.text)[1],e)}get allowsNesting(){return!1}}function uI(e,n,r,i,s){let o=r>=i&&r+n.length<=s&&n.prop(e.stateAfter);if(o)return{state:e.streamParser.copyState(o),pos:r+n.length};for(let o=n.children.length-1;o>=0;o--){let a=n.children[o],l=r+n.positions[o],h=a instanceof hN&&l<s&&uI(e,a,l,i,s);if(h)return h}return null}class u${constructor(e,n,r,i){this.lang=e,this.input=n,this.fragments=r,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let s=cQ.get(),o=i[0].from,{state:a,tree:l}=function(e,n,r,i,s){for(let s of n){let n=s.from+25*!!s.openStart,o=s.to-25*!!s.openEnd,a=n<=r&&o>r&&uI(e,s.tree,0-s.offset,r,o),l;if(a&&a.pos<=i&&(l=function e(n,r,i,s,o){if(o&&i<=0&&s>=r.length)return r;o||0!=i||r.type!=n.topNode||(o=!0);for(let a=r.children.length-1;a>=0;a--){let l=r.positions[a],h=r.children[a],c;if(l<s&&h instanceof hN){if(!(c=e(n,h,i-l,s-l,o)))break;return o?new hN(r.type,r.children.slice(0,a).concat(c),r.positions.slice(0,a+1),l+c.length):c}}return null}(e,s.tree,r+s.offset,a.pos+s.offset,!1)))return{state:a.state,tree:l}}return{state:e.streamParser.startState(s?cU(s):4),tree:hN.empty}}(e,r,o,this.to,null==s?void 0:s.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let e=0;e<l.children.length;e++)this.chunks.push(l.children[e]),this.chunkPos.push(l.positions[e]);s&&this.parsedPos<s.viewport.from-1e5&&i.some(e=>e.from<=s.viewport.from&&e.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState(cU(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=cQ.get(),n=null==this.stoppedAt?this.to:Math.min(this.to,this.stoppedAt),r=Math.min(n,this.chunkStart+512);for(e&&(r=Math.min(r,e.viewport.to));this.parsedPos<r;)this.parseLine(e);return(this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n)?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)"\n"==n&&(n="");else{let e=n.indexOf("\n");e>-1&&(n=n.slice(0,e))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),r=e+n.length;for(let e=this.rangeIndex;;){let i=this.ranges[e].to;if(i>=r||(n=n.slice(0,i-(r-n.length)),++e==this.ranges.length))break;let s=this.ranges[e].from,o=this.lineAfter(s);n+=o,r=s+o.length}return{line:n,end:r}}skipGapsTo(e,n,r){for(;;){let i=this.ranges[this.rangeIndex].to,s=e+n;if(r>0?i>s:i>=s)break;let o=this.ranges[++this.rangeIndex].from;n+=o-i}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,r,i){let s=4;if(this.ranges.length>1){i=this.skipGapsTo(n,i,1),n+=i;let e=this.chunk.length;i=this.skipGapsTo(r,i,-1),r+=i,s+=this.chunk.length-e}let o=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&4==s&&o>=0&&this.chunk[o]==e&&this.chunk[o+2]==n?this.chunk[o+2]=r:this.chunk.push(e,n,r,s),i}parseLine(e){let{line:n,end:r}=this.nextLine(),i=0,{streamParser:s}=this.lang,o=new uA(n,e?e.state.tabSize:4,e?cU(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let e=uR(s.token,o,this.state);if(e&&(i=this.emitToken(this.lang.tokenTable.resolve(e),this.parsedPos+o.start,this.parsedPos+o.pos,i)),o.start>1e4)break}this.parsedPos=r,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=hN.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:uj,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new hN(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new hN(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function uR(e,n,r){n.start=n.pos;for(let i=0;i<10;i++){let i=e(n,r);if(n.pos>n.start)return i}throw Error("Stream parser failed to advance stream.")}let uL=Object.create(null),uQ=[hT.none],uj=new hP(uQ),uV=[],uz=Object.create(null),uB=Object.create(null);for(let[e,n]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])uB[e]=uW(uL,n);class uF{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),uB)}resolve(e){return e?this.table[e]||(this.table[e]=uW(this.extra,e)):0}}let uZ=new uF(uL);function uq(e,n){uV.indexOf(e)>-1||(uV.push(e),console.warn(n))}function uW(e,n){let r=[];for(let i of n.split(" ")){let n=[];for(let r of i.split(".")){let i=e[r]||cT[r];i?"function"==typeof i?n.length?n=n.map(i):uq(r,`Modifier ${r} used at start of tag`):n.length?uq(r,`Tag ${r} used as modifier`):n=Array.isArray(i)?i:[i]:uq(r,`Unknown highlighting tag ${r}`)}for(let e of n)r.push(e)}if(!r.length)return 0;let i=n.replace(/ /g,"_"),s=i+" "+r.map(e=>e.id),o=uz[s];if(o)return o.id;let a=uz[s]=hT.define({id:uQ.length,name:i,props:[cl({[i]:r})]});return uQ.push(a),a.id}sy.RTL,sy.LTR;class uX{constructor(e,n,r,i,s,o,a,l,h,c=0,u){this.p=e,this.stack=n,this.state=r,this.reducePos=i,this.pos=s,this.score=o,this.buffer=a,this.bufferBase=l,this.curContext=h,this.lookAhead=c,this.parent=u}toString(){return`[${this.stack.filter((e,n)=>n%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,n,r=0){let i=e.parser.context;return new uX(e,[],n,r,r,0,[],0,i?new uU(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,n){this.stack.push(this.state,n,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var n;let r=e>>19,i=65535&e,{parser:s}=this.p,o=this.reducePos<this.pos-25;o&&this.setLookAhead(this.pos);let a=s.dynamicPrecedence(i);if(a&&(this.score+=a),0==r){this.pushState(s.getGoto(this.state,i,!0),this.reducePos),i<s.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(i,this.reducePos);return}let l=this.stack.length-(r-1)*3-(262144&e?6:0),h=l?this.stack[l-2]:this.p.ranges[0].from,c=this.reducePos-h;c>=2e3&&!(null==(n=this.p.parser.nodeSet.types[i])?void 0:n.isAnonymous)&&(h==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=c):this.p.lastBigReductionSize<c&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=h,this.p.lastBigReductionSize=c));let u=l?this.stack[l-1]:0,d=this.bufferBase+this.buffer.length-u;if(i<s.minRepeatTerm||131072&e){let e=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,h,e,d+4,!0)}if(262144&e)this.state=this.stack[l];else{let e=this.stack[l-3];this.state=s.getGoto(e,i,!0)}for(;this.stack.length>l;)this.stack.pop();this.reduceContext(i,h)}storeNode(e,n,r,i=4,s=!1){if(0==e&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let e=this,i=this.buffer.length;if(0==i&&e.parent&&(i=e.bufferBase-e.parent.bufferBase,e=e.parent),i>0&&0==e.buffer[i-4]&&e.buffer[i-1]>-1){if(n==r)return;if(e.buffer[i-2]>=n){e.buffer[i-2]=r;return}}}if(s&&this.pos!=r){let s=this.buffer.length;if(s>0&&0!=this.buffer[s-4]){let e=!1;for(let n=s;n>0&&this.buffer[n-2]>r;n-=4)if(this.buffer[n-1]>=0){e=!0;break}if(e)for(;s>0&&this.buffer[s-2]>r;)this.buffer[s]=this.buffer[s-4],this.buffer[s+1]=this.buffer[s-3],this.buffer[s+2]=this.buffer[s-2],this.buffer[s+3]=this.buffer[s-1],s-=4,i>4&&(i-=4)}this.buffer[s]=e,this.buffer[s+1]=n,this.buffer[s+2]=r,this.buffer[s+3]=i}else this.buffer.push(e,n,r,i)}shift(e,n,r,i){if(131072&e)this.pushState(65535&e,this.pos);else if((262144&e)==0){let{parser:s}=this.p;(i>this.pos||n<=s.maxNode)&&(this.pos=i,s.stateFlag(e,1)||(this.reducePos=i)),this.pushState(e,r),this.shiftContext(n,r),n<=s.maxNode&&this.buffer.push(n,r,i,4)}else this.pos=i,this.shiftContext(n,r),n<=this.p.parser.maxNode&&this.buffer.push(n,r,i,4)}apply(e,n,r,i){65536&e?this.reduce(e):this.shift(e,n,r,i)}useNode(e,n){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(n,i),this.buffer.push(r,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,n=e.buffer.length;for(;n>0&&e.buffer[n-2]>e.reducePos;)n-=4;let r=e.buffer.slice(n),i=e.bufferBase+n;for(;e&&i==e.bufferBase;)e=e.parent;return new uX(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,n){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,n,4),this.storeNode(0,this.pos,n,r?8:4),this.pos=this.reducePos=n,this.score-=190}canShift(e){for(let n=new uY(this);;){let r=this.p.parser.stateSlot(n.state,4)||this.p.parser.hasAction(n.state,e);if(0==r)return!1;if((65536&r)==0)return!0;n.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let n=this.p.parser.nextStates(this.state);if(n.length>8||this.stack.length>=120){let r=[];for(let i=0,s;i<n.length;i+=2)(s=n[i+1])!=this.state&&this.p.parser.hasAction(s,e)&&r.push(n[i],s);if(this.stack.length<120)for(let e=0;r.length<8&&e<n.length;e+=2){let i=n[e+1];r.some((e,n)=>1&n&&e==i)||r.push(n[e],i)}n=r}let r=[];for(let e=0;e<n.length&&r.length<4;e+=2){let i=n[e+1];if(i==this.state)continue;let s=this.split();s.pushState(i,this.pos),s.storeNode(0,s.pos,s.pos,4,!0),s.shiftContext(n[e],this.pos),s.reducePos=this.pos,s.score-=200,r.push(s)}return r}forceReduce(){let{parser:e}=this.p,n=e.stateSlot(this.state,5);if((65536&n)==0)return!1;if(!e.validAction(this.state,n)){let r=n>>19,i=65535&n,s=this.stack.length-3*r;if(s<0||0>e.getGoto(this.stack[s],i,!1)){let e=this.findForcedReduction();if(null==e)return!1;n=e}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(n),!0}findForcedReduction(){let{parser:e}=this.p,n=[],r=(i,s)=>{if(!n.includes(i))return n.push(i),e.allActions(i,n=>{if(393216&n);else if(65536&n){let r=(n>>19)-s;if(r>1){let i=65535&n,s=this.stack.length-3*r;if(s>=0&&e.getGoto(this.stack[s],i,!1)>=0)return r<<19|65536|i}}else{let e=r(n,s+1);if(null!=e)return e}})};return r(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:e}=this.p;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let n=0;n<this.stack.length;n+=3)if(this.stack[n]!=e.stack[n])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(n)))}reduceContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(n)))}emitContext(){let e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let n=new uU(this.curContext.tracker,e);n.hash!=this.curContext.hash&&this.emitContext(),this.curContext=n}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class uU{constructor(e,n){this.tracker=e,this.context=n,this.hash=e.strict?e.hash(n):0}}class uY{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let n=e>>19;0==n?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(n-1)*3;let r=this.start.p.parser.getGoto(this.stack[this.base-3],65535&e,!0);this.state=r}}class uG{constructor(e,n,r){this.stack=e,this.pos=n,this.index=r,this.buffer=e.buffer,0==this.index&&this.maybeNext()}static create(e,n=e.bufferBase+e.buffer.length){return new uG(e,n,n-e.bufferBase)}maybeNext(){let e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new uG(this.stack,this.pos,this.index)}}function uH(e,n=Uint16Array){if("string"!=typeof e)return e;let r=null;for(let i=0,s=0;i<e.length;){let o=0;for(;;){let n=e.charCodeAt(i++),r=!1;if(126==n){o=65535;break}n>=92&&n--,n>=34&&n--;let s=n-32;if(s>=46&&(s-=46,r=!0),o+=s,r)break;o*=46}r?r[s++]=o:r=new n(o)}return r}class uK{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}let uJ=new uK;class u0{constructor(e,n){this.input=e,this.ranges=n,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=uJ,this.rangeIndex=0,this.pos=this.chunkPos=n[0].from,this.range=n[0],this.end=n[n.length-1].to,this.readNext()}resolveOffset(e,n){let r=this.range,i=this.rangeIndex,s=this.pos+e;for(;s<r.from;){if(!i)return null;let e=this.ranges[--i];s-=r.from-e.to,r=e}for(;n<0?s>r.to:s>=r.to;){if(i==this.ranges.length-1)return null;let e=this.ranges[++i];s+=e.from-r.to,r=e}return s}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let n of this.ranges)if(n.to>e)return Math.max(e,n.from);return this.end}peek(e){let n=this.chunkOff+e,r,i;if(n>=0&&n<this.chunk.length)r=this.pos+e,i=this.chunk.charCodeAt(n);else{let n=this.resolveOffset(e,1);if(null==n)return -1;if((r=n)>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let e=this.rangeIndex,n=this.range;for(;n.to<=r;)n=this.ranges[++e];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>n.to&&(this.chunk2=this.chunk2.slice(0,n.to-r)),i=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),i}acceptToken(e,n=0){let r=n?this.resolveOffset(n,-1):this.pos;if(null==r||r<this.token.start)throw RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}acceptTokenTo(e,n){this.token.value=e,this.token.end=n}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:n}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=n,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),n=this.pos+e.length;this.chunk=n>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,n){if(n?(this.token=n,n.start=e,n.lookAhead=e+1,n.value=n.extended=-1):this.token=uJ,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,n){if(e>=this.chunkPos&&n<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,n-this.chunkPos);if(e>=this.chunk2Pos&&n<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,n-this.chunk2Pos);if(e>=this.range.from&&n<=this.range.to)return this.input.read(e,n);let r="";for(let i of this.ranges){if(i.from>=n)break;i.to>e&&(r+=this.input.read(Math.max(i.from,e),Math.min(i.to,n)))}return r}}class u1{constructor(e,n){this.data=e,this.id=n}token(e,n){let{parser:r}=n.p;u4(this.data,e,n,this.id,r.data,r.tokenPrecTable)}}u1.prototype.contextual=u1.prototype.fallback=u1.prototype.extend=!1;class u2{constructor(e,n,r){this.precTable=n,this.elseToken=r,this.data="string"==typeof e?uH(e):e}token(e,n){let r=e.pos,i=0;for(;;){let r=e.next<0,s=e.resolveOffset(1,1);if(u4(this.data,e,n,0,this.data,this.precTable),e.token.value>-1)break;if(null==this.elseToken)return;if(!r&&i++,null==s)break;e.reset(s,e.token)}i&&(e.reset(r,e.token),e.acceptToken(this.elseToken,i))}}u2.prototype.contextual=u1.prototype.fallback=u1.prototype.extend=!1;class u5{constructor(e,n={}){this.token=e,this.contextual=!!n.contextual,this.fallback=!!n.fallback,this.extend=!!n.extend}}function u4(e,n,r,i,s,o){let a=0,l=1<<i,{dialect:h}=r.p.parser;n:for(;(l&e[a])!=0;){let r=e[a+1];for(let i=a+3;i<r;i+=2)if((e[i+1]&l)>0){let r=e[i];if(h.allows(r)&&(-1==n.token.value||n.token.value==r||function(e,n,r,i){let s=u3(r,i,n);return s<0||u3(r,i,e)<s}(r,n.token.value,s,o))){n.acceptToken(r);break}}let i=n.next,c=0,u=e[a+2];if(n.next<0&&u>c&&65535==e[r+3*u-3]){a=e[r+3*u-1];continue}for(;c<u;){let s=c+u>>1,o=r+s+(s<<1),l=e[o],h=e[o+1]||65536;if(i<l)u=s;else if(i>=h)c=s+1;else{a=e[o+2],n.advance();continue n}}break}}function u3(e,n,r){for(let i=n,s;65535!=(s=e[i]);i++)if(s==r)return i-n;return -1}let u6="undefined"!=typeof process&&process.env&&/\bparse\b/.test(process.env.LOG),u9=null;function u7(e,n,r){let i=e.cursor(pe.IncludeAnonymous);for(i.moveTo(n);;)if(!(r<0?i.childBefore(n):i.childAfter(n)))for(;;){if((r<0?i.to<n:i.from>n)&&!i.type.isError)return r<0?Math.max(0,Math.min(i.to-1,n-25)):Math.min(e.length,Math.max(i.from+1,n+25));if(r<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return r<0?0:e.length}}class u8{constructor(e,n){this.fragments=e,this.nodeSet=n,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?u7(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?u7(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let n=this.trees.length-1;if(n<0)return this.nextFragment(),null;let r=this.trees[n],i=this.index[n];if(i==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=r.children[i],o=this.start[n]+r.positions[i];if(o>e)return this.nextStart=o,null;if(s instanceof hN){if(o==e){if(o<this.safeFrom)return null;let e=o+s.length;if(e<=this.safeTo){let n=s.prop(hk.lookAhead);if(!n||e+n<this.fragment.to)return s}}this.index[n]++,o+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(o),this.index.push(0))}else this.index[n]++,this.nextStart=o+s.length}}}class de{constructor(e,n){this.stream=n,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(e=>new uK)}getActions(e){let n=0,r=null,{parser:i}=e.p,{tokenizers:s}=i,o=i.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,l=0;for(let i=0;i<s.length;i++){if((1<<i&o)==0)continue;let h=s[i],c=this.tokens[i];if((!r||h.fallback)&&((h.contextual||c.start!=e.pos||c.mask!=o||c.context!=a)&&(this.updateCachedToken(c,h,e),c.mask=o,c.context=a),c.lookAhead>c.end+25&&(l=Math.max(c.lookAhead,l)),0!=c.value)){let i=n;if(c.extended>-1&&(n=this.addActions(e,c.extended,c.end,n)),n=this.addActions(e,c.value,c.end,n),!h.extend&&(r=c,n>i))break}}for(;this.actions.length>n;)this.actions.pop();return l&&e.setLookAhead(l),r||e.pos!=this.stream.end||((r=new uK).value=e.p.parser.eofTerm,r.start=r.end=e.pos,n=this.addActions(e,r.value,r.end,n)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let n=new uK,{pos:r,p:i}=e;return n.start=r,n.end=Math.min(r+1,i.stream.end),n.value=r==i.stream.end?i.parser.eofTerm:0,n}updateCachedToken(e,n,r){let i=this.stream.clipPos(r.pos);if(n.token(this.stream.reset(i,e),r),e.value>-1){let{parser:n}=r.p;for(let i=0;i<n.specialized.length;i++)if(n.specialized[i]==e.value){let s=n.specializers[i](this.stream.read(e.start,e.end),r);if(s>=0&&r.p.parser.dialect.allows(s>>1)){(1&s)==0?e.value=s>>1:e.extended=s>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,n,r,i){for(let n=0;n<i;n+=3)if(this.actions[n]==e)return i;return this.actions[i++]=e,this.actions[i++]=n,this.actions[i++]=r,i}addActions(e,n,r,i){let{state:s}=e,{parser:o}=e.p,{data:a}=o;for(let e=0;e<2;e++)for(let l=o.stateSlot(s,e?2:1);;l+=3){if(65535==a[l])if(1==a[l+1])l=dl(a,l+2);else{0==i&&2==a[l+1]&&(i=this.putAction(dl(a,l+2),n,r,i));break}a[l]==n&&(i=this.putAction(dl(a,l+1),n,r,i))}return i}}class dt{constructor(e,n,r,i){this.parser=e,this.input=n,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new u0(n,i),this.tokens=new de(e,this.stream),this.topTerm=e.top[1];let{from:s}=i[0];this.stacks=[uX.start(this,e.top[0],s)],this.fragments=r.length&&this.stream.end-s>4*e.bufferLength?new u8(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e,n,r=this.stacks,i=this.minStackPos,s=this.stacks=[];if(this.bigReductionCount>300&&1==r.length){let[e]=r;for(;e.forceReduce()&&e.stack.length&&e.stack[e.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<r.length;o++){let a=r[o];for(;;){if(this.tokens.mainToken=null,a.pos>i)s.push(a);else{if(this.advanceStack(a,s,r))continue;e||(e=[],n=[]),e.push(a);let i=this.tokens.getMainToken(a);n.push(i.value,i.end)}break}}if(!s.length){let n=e&&function(e){let n=null;for(let r of e){let e=r.p.stoppedAt;(r.pos==r.p.stream.end||null!=e&&r.pos>e)&&r.p.parser.stateFlag(r.state,2)&&(!n||n.score<r.score)&&(n=r)}return n}(e);if(n)return u6&&console.log("Finish with "+this.stackID(n)),this.stackToTree(n);if(this.parser.strict)throw u6&&e&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),SyntaxError("No parse at "+i);this.recovering||(this.recovering=5)}if(this.recovering&&e){let r=null!=this.stoppedAt&&e[0].pos>this.stoppedAt?e[0]:this.runRecovery(e,n,s);if(r)return u6&&console.log("Force-finish "+this.stackID(r)),this.stackToTree(r.forceAll())}if(this.recovering){let e=1==this.recovering?1:3*this.recovering;if(s.length>e)for(s.sort((e,n)=>n.score-e.score);s.length>e;)s.pop();s.some(e=>e.reducePos>i)&&this.recovering--}else if(s.length>1){r:for(let e=0;e<s.length-1;e++){let n=s[e];for(let r=e+1;r<s.length;r++){let i=s[r];if(n.sameState(i)||n.buffer.length>500&&i.buffer.length>500)if((n.score-i.score||n.buffer.length-i.buffer.length)>0)s.splice(r--,1);else{s.splice(e--,1);continue r}}}s.length>12&&s.splice(12,s.length-12)}this.minStackPos=s[0].pos;for(let e=1;e<s.length;e++)s[e].pos<this.minStackPos&&(this.minStackPos=s[e].pos);return null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,n,r){let i=e.pos,{parser:s}=this,o=u6?this.stackID(e)+" -> ":"";if(null!=this.stoppedAt&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let n=e.curContext&&e.curContext.tracker.strict,r=n?e.curContext.hash:0;for(let a=this.fragments.nodeAt(i);a;){let i=this.parser.nodeSet.types[a.type.id]==a.type?s.getGoto(e.state,a.type.id):-1;if(i>-1&&a.length&&(!n||(a.prop(hk.contextHash)||0)==r))return e.useNode(a,i),u6&&console.log(o+this.stackID(e)+` (via reuse of ${s.getName(a.type.id)})`),!0;if(!(a instanceof hN)||0==a.children.length||a.positions[0]>0)break;let l=a.children[0];if(l instanceof hN&&0==a.positions[0])a=l;else break}}let a=s.stateSlot(e.state,4);if(a>0)return e.reduce(a),u6&&console.log(o+this.stackID(e)+` (via always-reduce ${s.getName(65535&a)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let l=this.tokens.getActions(e);for(let a=0;a<l.length;){let h=l[a++],c=l[a++],u=l[a++],d=a==l.length||!r,p=d?e:e.split(),f=this.tokens.mainToken;if(p.apply(h,c,f?f.start:p.pos,u),u6&&console.log(o+this.stackID(p)+` (via ${(65536&h)==0?"shift":`reduce of ${s.getName(65535&h)}`} for ${s.getName(c)} @ ${i}${p==e?"":", split"})`),d)return!0;p.pos>i?n.push(p):r.push(p)}return!1}advanceFully(e,n){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return dn(e,n),!0}}runRecovery(e,n,r){let i=null,s=!1;for(let o=0;o<e.length;o++){let a=e[o],l=n[o<<1],h=n[(o<<1)+1],c=u6?this.stackID(a)+" -> ":"";if(a.deadEnd&&(s||(s=!0,a.restart(),u6&&console.log(c+this.stackID(a)+" (restarted)"),this.advanceFully(a,r))))continue;let u=a.split(),d=c;for(let e=0;u.forceReduce()&&e<10&&(u6&&console.log(d+this.stackID(u)+" (via force-reduce)"),!this.advanceFully(u,r));e++)u6&&(d=this.stackID(u)+" -> ");for(let e of a.recoverByInsert(l))u6&&console.log(c+this.stackID(e)+" (via recover-insert)"),this.advanceFully(e,r);this.stream.end>a.pos?(h==a.pos&&(h++,l=0),a.recoverByDelete(l,h),u6&&console.log(c+this.stackID(a)+` (via recover-delete ${this.parser.getName(l)})`),dn(a,r)):(!i||i.score<a.score)&&(i=a)}return i}stackToTree(e){return e.close(),hN.build({buffer:uG.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let n=(u9||(u9=new WeakMap)).get(e);return n||u9.set(e,n=String.fromCodePoint(this.nextStackID++)),n+e}}function dn(e,n){for(let r=0;r<n.length;r++){let i=n[r];if(i.pos==e.pos&&i.sameState(e)){n[r].score<e.score&&(n[r]=e);return}}n.push(e)}class dr{constructor(e,n,r){this.source=e,this.flags=n,this.disabled=r}allows(e){return!this.disabled||0==this.disabled[e]}}let di=e=>e;class ds{constructor(e){this.start=e.start,this.shift=e.shift||di,this.reduce=e.reduce||di,this.reuse=e.reuse||di,this.hash=e.hash||(()=>0),this.strict=!1!==e.strict}}class da extends hH{constructor(e){if(super(),this.wrappers=[],14!=e.version)throw RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let n=e.nodeNames.split(" ");this.minRepeatTerm=n.length;for(let r=0;r<e.repeatNodeCount;r++)n.push("");let r=Object.keys(e.topRules).map(n=>e.topRules[n][1]),i=[];for(let e=0;e<n.length;e++)i.push([]);function s(e,n,r){i[e].push([n,n.deserialize(String(r))])}if(e.nodeProps)for(let n of e.nodeProps){let e=n[0];"string"==typeof e&&(e=hk[e]);for(let r=1;r<n.length;){let i=n[r++];if(i>=0)s(i,e,n[r++]);else{let o=n[r+-i];for(let a=-i;a>0;a--)s(n[r++],e,o);r++}}}this.nodeSet=new hP(n.map((n,s)=>hT.define({name:s>=this.minRepeatTerm?void 0:n,id:s,props:i[s],top:r.indexOf(s)>-1,error:0==s,skipped:e.skippedNodes&&e.skippedNodes.indexOf(s)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=1024;let o=uH(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let e=0;e<this.specializerSpecs.length;e++)this.specialized[e]=this.specializerSpecs[e].term;this.specializers=this.specializerSpecs.map(dh),this.states=uH(e.states,Uint32Array),this.data=uH(e.stateData),this.goto=uH(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(e=>"number"==typeof e?new u1(o,e):e),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,n,r){let i=new dt(this,e,n,r);for(let s of this.wrappers)i=s(i,e,n,r);return i}getGoto(e,n,r=!1){let i=this.goto;if(n>=i[0])return -1;for(let s=i[n+1];;){let n=i[s++],o=1&n,a=i[s++];if(o&&r)return a;for(let r=s+(n>>1);s<r;s++)if(i[s]==e)return a;if(o)return -1}}hasAction(e,n){let r=this.data;for(let i=0;i<2;i++)for(let s=this.stateSlot(e,i?2:1),o;;s+=3){if(65535==(o=r[s]))if(1==r[s+1])o=r[s=dl(r,s+2)];else if(2==r[s+1])return dl(r,s+2);else break;if(o==n||0==o)return dl(r,s+1)}return 0}stateSlot(e,n){return this.states[6*e+n]}stateFlag(e,n){return(this.stateSlot(e,0)&n)>0}validAction(e,n){return!!this.allActions(e,e=>e==n||null)}allActions(e,n){let r=this.stateSlot(e,4),i=r?n(r):void 0;for(let r=this.stateSlot(e,1);null==i;r+=3){if(65535==this.data[r])if(1==this.data[r+1])r=dl(this.data,r+2);else break;i=n(dl(this.data,r+1))}return i}nextStates(e){let n=[];for(let r=this.stateSlot(e,1);;r+=3){if(65535==this.data[r])if(1==this.data[r+1])r=dl(this.data,r+2);else break;if((1&this.data[r+2])==0){let e=this.data[r+1];n.some((n,r)=>1&r&&n==e)||n.push(this.data[r],e)}}return n}configure(e){let n=Object.assign(Object.create(da.prototype),this);if(e.props&&(n.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw RangeError(`Invalid top rule name ${e.top}`);n.top=r}return e.tokenizers&&(n.tokenizers=this.tokenizers.map(n=>{let r=e.tokenizers.find(e=>e.from==n);return r?r.to:n})),e.specializers&&(n.specializers=this.specializers.slice(),n.specializerSpecs=this.specializerSpecs.map((r,i)=>{let s=e.specializers.find(e=>e.from==r.external);if(!s)return r;let o=Object.assign(Object.assign({},r),{external:s.to});return n.specializers[i]=dh(o),o})),e.contextTracker&&(n.context=e.contextTracker),e.dialect&&(n.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(n.strict=e.strict),e.wrap&&(n.wrappers=n.wrappers.concat(e.wrap)),null!=e.bufferLength&&(n.bufferLength=e.bufferLength),n}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let n=this.dynamicPrecedences;return null==n?0:n[e]||0}parseDialect(e){let n=Object.keys(this.dialects),r=n.map(()=>!1);if(e)for(let i of e.split(" ")){let e=n.indexOf(i);e>=0&&(r[e]=!0)}let i=null;for(let e=0;e<n.length;e++)if(!r[e])for(let r=this.dialects[n[e]],s;65535!=(s=this.data[r++]);)(i||(i=new Uint8Array(this.maxTerm+1)))[s]=1;return new dr(e,r,i)}static deserialize(e){return new da(e)}}function dl(e,n){return e[n]|e[n+1]<<16}function dh(e){if(e.external){let n=+!!e.extend;return(r,i)=>e.external(r,i)<<1|n}return e.get}let dc=cl({"{{ }}":cT.separator}),du=da.deserialize({version:14,states:"!^QVOPOOO_QQO'#C^OOOO'#Cc'#CcQVOPOOOOQO'#Cd'#CdOgQQO,58xOOOO,58x,58xOOOO-E6a-E6aOOQO-E6b-E6bOOOO1G.d1G.d",stateData:"r~OZOS~ORPOUQO~OSSOTUO~OSSOTXO~OZS~",goto:"jXPPYPPPP^dTQORQRORVRQTPRWT",nodeNames:"⚠ Template Interpolation {{ InterpolationContent }} Text",maxTerm:11,nodeProps:[["closedBy",3,"InterpolationEnd"],["openedBy",5,"InterpolationOpen"]],propSources:[dc],skippedNodes:[0],repeatNodeCount:2,tokenData:"+hRRkOX!vX^'Y^p!vpq'Yq#o!v#o#p)W#p#q!v#q#r*`#r#y!v#y#z'Y#z$f!v$f$g'Y$g#BY!v#BY#BZ'Y#BZ$IS!v$IS$I_'Y$I_$I|!v$I|$JO'Y$JO$JT!v$JT$JU'Y$JU$KV!v$KV$KW'Y$KW&FU!v&FU&FV'Y&FV;'S!v;'S;=`'S<%lO!vR!}VUPSQO#o!v#o#p#d#p#q!v#q#r%[#r;'S!v;'S;=`'S<%lO!vR#iXSQO#o!v#o#p$U#p#q!v#q#r%[#r;'S!v;'S;=`'S<%l~!v~O!v~~&}Q$ZTSQO#q$U#q#r$j#r;'S$U;'S;=`%P<%lO$UQ$mUO#q$U#r;'S$U;'S;=`%P<%l~$U~O$U~~%VQ%SP;=`<%l$UQ%[OSQR%aXUPO#o!v#o#p#d#p#q!v#q#r%|#r;'S!v;'S;=`'S<%l~!v~O!v~~%VP&RTUPO#o%|#o#p&b#p;'S%|;'S;=`&w<%lO%|P&eUO#o%|#p;'S%|;'S;=`&w<%l~%|~O%|~~&}P&zP;=`<%l%|P'SOUPR'VP;=`<%l!vR'ckUPZQSQOX!vX^'Y^p!vpq'Yq#o!v#o#p#d#p#q!v#q#r%[#r#y!v#y#z'Y#z$f!v$f$g'Y$g#BY!v#BY#BZ'Y#BZ$IS!v$IS$I_'Y$I_$I|!v$I|$JO'Y$JO$JT!v$JT$JU'Y$JU$KV!v$KV$KW'Y$KW&FU!v&FU&FV'Y&FV;'S!v;'S;=`'S<%lO!vR)]XSQO#o!v#o#p)x#p#q!v#q#r%[#r;'S!v;'S;=`'S<%l~!v~O!v~~&}R*PTRPSQO#q$U#q#r$j#r;'S$U;'S;=`%P<%lO$UR*eXUPO#o!v#o#p#d#p#q!v#q#r+Q#r;'S!v;'S;=`'S<%l~!v~O!v~~%VR+XTTQUPO#o%|#o#p&b#p;'S%|;'S;=`&w<%lO%|",tokenizers:[0,1],topRules:{Template:[0,1]},tokenPrec:31});var dd=a$({above:!1,markers:e=>(function(e,n){let r=[];return e.forEach(e=>{let i=n.doc.lineAt(e.from),s=n.doc.lineAt(e.to);if(i.number!==s.number){let o=[],a=e.from;for(let r=i.number;r<s.number;r++){let i=n.doc.line(r);o.push({from:a,to:i.to,className:e.className}),a=i.to+1}o.push({from:a,to:e.to,className:e.className}),r.push(...o)}else r.push(e)}),r})(function(e){let n=[];return(function(e){let n=new Map;return e.forEach(e=>{n.has(e.className)||n.set(e.className,[]),n.get(e.className).push(e)}),n})(e).forEach((e,r)=>{let i=function(e){let n=[],r=e.map(e=>({start:e.from,end:e.to}));r.sort((e,n)=>e.start-n.start);let i=r[0];for(let e=1;e<r.length;e++){let s=r[e];s.start<=i.end?i.end=Math.max(i.end,s.end):(n.push(i),i=s)}return n.push(i),n}(e);n.push(...i.map(e=>({from:e.start,to:e.end,className:r})))}),n}(e.state.facet(dp).reduce((n,r)=>[...n,...r(e)],[])),e.state).map(n=>aA.forRange(e,n.className,rd.range(n.from,n.to))).reduce((e,n)=>[...e,...n],[]),update:e=>e.focusChanged||e.docChanged||e.selectionSet||e.viewportChanged||e.startState.facet(dp)!==e.state.facet(dp),class:"cm-backgroundDecoratorLayer"}),dp=rg.define({enables:[dd]}),df=rV.define();function dg(e){e.dispatch({effects:df.of(null)})}var dm=new Map;function dy(e,n){let r=e.facet(dv)??[],i=n.cursor(),s={highest:ss.none,high:ss.none,default:ss.none,low:ss.none,lowest:ss.none},o=r0.empty,a=[];return ct(i,0,e.doc.length,n=>{r.forEach(r=>{let i=r(n,e),l=[];Array.isArray(i)?l=i:i&&(l=[i]),l.forEach(e=>{let r=function(e,n,{decorations:r,backgroundDecorations:i,atomicRanges:s}){if(!n)return;let o=n.from??e.from,a=n.to??e.to,l=["type","from","to","atomicRange"],h=null;switch(n.type){case"className":var c;h=o===a?null:(c=n.className,!dm.has(c)&&dm.set(c,ss.mark({class:c})),dm.get(c)).range(o,a);break;case"replace":h=ss.replace(hw(n,l)).range(o,a);break;case"widget":h=ss.widget(hw(n,l)).range(o);break;case"background":i.push({from:n.from??e.from,to:n.to??e.to,className:n.className})}if(h){let e="className"===n.type?n.prec??"default":"default";r[e]&&(r[e]=r[e].update({add:[h],sort:!0}))}return"background"!==n.type&&h&&!0===n.atomicRange&&(s=s.update({add:[h],sort:!0})),{decorations:r,backgroundDecorations:i,atomicRanges:s}}(n,e,{decorations:s,backgroundDecorations:a,atomicRanges:o});r&&(a=r.backgroundDecorations,o=r.atomicRanges)})})}),{decorations:s,atomicRanges:o,backgroundDecorations:a}}var dO=rx.define({create:e=>dy(e,c$(e)),update(e,n){let r=c$(n.state),i=n.effects.some(e=>e.is(df));return(c$(n.startState)!==r||i)&&(e=dy(n.state,r)),e},provide:e=>[rS.highest(aO.decorations.compute([e],n=>n.field(e).decorations.highest)),rS.high(aO.decorations.compute([e],n=>n.field(e).decorations.high)),rS.default(aO.decorations.compute([e],n=>n.field(e).decorations.default)),rS.low(aO.decorations.compute([e],n=>n.field(e).decorations.low)),rS.lowest(aO.decorations.compute([e],n=>n.field(e).decorations.lowest)),aO.atomicRanges.of(n=>n.state.field(e).atomicRanges),dp.of(n=>n.state.field(e).backgroundDecorations)]}),dv=rg.define({enables:[dO,dd]}),db=class{constructor(e){this.view=e}classNameDecorationCache=new Map;decorations=ss.none;backgroundDecorations=[];getClassDecoration(e){return this.classNameDecorationCache.has(e)||this.classNameDecorationCache.set(e,ss.mark({class:e})),this.classNameDecorationCache.get(e)}update(e){if(e.focusChanged&&e.view.hasFocus||!e.startState.selection.eq(e.state.selection)){let n=c$(e.state),r=e.state.selection.main.head,i=e.state.facet(dx),s=n.cursorAt(r,0),o=new r1,a=[];do i.forEach(n=>{let r,i=n(s,e.state);if(i){switch(i.type){case"className":r=this.getClassDecoration(i.className);break;case"background":a.push({from:i.from??s.from,to:i.to??s.to,className:i.className})}r&&o.add(i.from??s.from,i.to??s.to,r)}});while(s.parent());this.decorations=o.finish(),this.backgroundDecorations=a}e.focusChanged&&!e.view.hasFocus&&(this.decorations=ss.none,this.backgroundDecorations=[])}},dx=rg.define({enables:[sG.fromClass(db,{decorations:e=>e.decorations,provide:e=>[dp.of(n=>{var r;return(null==(r=n.plugin(e))?void 0:r.backgroundDecorations)??[]})]})]});function dw(e){let n=c$(e);console.groupCollapsed("Syntax Tree"),ct(n.cursor(),0,n.length,n=>{console.group(`%c${n.name}(${n.from}:${n.to})`,"color: purple;"),console.log(e.sliceDoc(n.from,n.to)),console.groupEnd()}),console.groupEnd()}sG.fromClass(class{constructor(e){dw(e.state)}update(e){e.docChanged&&dw(e.state)}});var dS=aC.of([{key:"ArrowLeft",run(e){let n=e.state.selection.main;if(!n.empty)return!1;let r=!1,i=n.from;for(let n of e.docView.children){for(let e of n.children)e.isWidget&&e.widget instanceof d_&&e.posAtEnd===i&&(e.widget.focus(1),r=!0);if(r)break}return r}},{key:"ArrowRight",run(e){let n=e.state.selection.main;if(!n.empty)return!1;let r=!1,i=n.from;for(let n of e.docView.children){for(let e of n.children)if(e.isWidget&&e.widget instanceof d_&&e.posAtStart===i){e.widget.focus(-1),r=!0;break}if(r)break}return r}}]),d_=class extends sr{};function dk(e,n){for(let r of e)if(n>=r.from&&n<=r.to)return r}var dC=sG.fromClass(class{lastFocus=!1;constructor(e){this.lastFocus=e.hasFocus}update(e){let n=e.state.facet(dT)??"select";if(e.transactions.some(e=>e.isUserEvent(n))){let n=this.lastFocus,r=e.startState.selection,{selection:i}=e.state,s=function(e){if(0===e.length)return[];let n=[],r=e.map(e=>({from:e.from,to:e.to}));r.sort((e,n)=>e.from-n.from);let i=r[0];for(let e=1;e<r.length;e++){let s=r[e];s.from<=i.to?i.to=Math.max(i.to,s.to):(n.push(i),i=s)}return i&&n.push(i),n}(ce(e.state.facet(dE).map(n=>n(e.view.state))).filter(Boolean)),o=dk(s,i.main.from);i.main.empty&&o&&(!n||dk(s,r.main.from)!==o||dk(s,r.main.to)!==o)&&queueMicrotask(()=>{e.view.dispatch({selection:i.replaceRange(rd.range(o.from,o.to))})})}this.lastFocus!==e.view.hasFocus&&(this.lastFocus=e.view.hasFocus)}}),dE=rg.define({enables:dC}),dT=rg.define({combine:cr}),dP=rU.transactionFilter.of(e=>{if(e.docChanged||e.newSelection.eq(e.startState.selection))return e;let n=ce(e.startState.facet(dA).map(n=>n(e.startState))),{newSelection:r}=e;return r.ranges.forEach((e,i)=>{for(let s of n)if(cn(e,s.source)){let n=e.head<e.anchor,o=Math.min(e.from,s.target.from),a=Math.max(e.to,s.target.to),l=n?rd.range(a,o,e.goalColumn,e.bidiLevel??void 0):rd.range(o,a,e.goalColumn,e.bidiLevel??void 0);r=r.replaceRange(l,i)}}),[e,{selection:r}]}),dA=rg.define({enables:dP}),dM=rU.transactionFilter.of(e=>{let n=ce(e.startState.facet(dN).map(n=>n(e.startState))),{length:r}=e.startState.doc,i=ri.empty(r);e.changes.iterChanges((e,s,o,a)=>{if(o===a){for(let o of n)if(cn({from:e,to:s},o.source)){let e=ri.of([{...o.target,insert:""}],r);i=i.compose(e.map(i))}}});let s=i.map(e.changes);return s.empty?e:[e,{changes:s,sequential:!0}]}),dN=rg.define({enables:dM}),dD="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),dI=e=>{let n=(e??[]).map(({type:e,triggerCharacter:n,handler:r})=>{if("character"===e)return aO.inputHandler.of((e,i,s,o)=>{if((dD?e.composing:e.compositionStarted)||e.state.readOnly)return!1;let a=e.state.selection.main;return o===n&&i===a.from&&s===a.to&&r({view:e,state:e.state,from:i,to:s})})}).filter(e=>!!e);return rS.high(n)},d$=/^\s*/,dR=e=>e.match(d$)[0].length,dL=ss.mark({class:"cm-indentation-guide"}),dQ=(function(e,n,r=1){if(null==n&&(n=e,e=0),!Number.isInteger(r)||0===r)throw Error("The step value must be a non-zero integer.");let i=Math.max(Math.ceil((n-e)/r),0),s=Array(i);for(let n=0;n<i;n++)s[n]=e+n*r;return s})(20).map(e=>ss.line({class:`cm-indentation-level-${e}`})),dj=class e extends sr{constructor(e){super(),this.indents=e}static create(n){return ss.widget({widget:new e(n),side:1})}toDOM(){let e=document.createElement("span");for(let n of(e.className="cm-indentation-widget",this.indents)){let r=e.appendChild(document.createElement("span"));r.className="cm-indentation-guide",r.textContent=" ",e.append(" ".repeat(n-1))}return e}};function dV(e,n,r,i,s){s.add(e,e,dQ[r/i]);for(let o=e;o<Math.min(e+r,n);o+=i)s.add(o,o+1,dL)}function dz(e){let n=new r1,r=Number(e.state.tabSize),{doc:i}=e.state,s=[],o=0;for(let{from:a,to:l}of e.visibleRanges){let e,h,c,u,d=a-1;for(;(e=d+1)<=l;){({from:h,to:d,length:c,text:u}=i.lineAt(e));let a=dR(u),l=a===c,p=0===a,f="/"===u[a];if(l){s.push({from:h,to:d});continue}if(p){s.length=0;continue}let g=Math.ceil(a/r)*r;for(let{from:e,to:i}of(f||(o=g),s))dV(e,i,o,r,n),0==i-e&&(r>2?n.add(i,i,dj.create([r])):n.add(i,i,dj.create([2,2*r])));s.length=0,dV(h,d,g,r,n)}}return n.finish()}sG.fromClass(class{decorations;constructor(e){this.decorations=dz(e)}update(e){(e.docChanged||e.viewportChanged)&&(this.decorations=dz(e.view))}},{decorations:e=>e.decorations}),aO.baseTheme({".cm-line":{paddingLeft:0,marginLeft:"2px"},".cm-indentation-guide":{position:"relative"},".cm-indentation-guide:after":{position:"absolute",content:"''",right:"0.9ch",height:"1.4em",borderLeft:"1px solid rgba(28, 31, 35, .08)"},...(e=>{let n=-1,r=null==e?0:e.length,i={};for(;++n<r;){let r=e[n];i[r[0]]=r[1]}return i})(dQ.map((e,n)=>[`.cm-indentation-level-${n}`,{textIndent:`-${2*n}ch`,paddingLeft:`${2*n}ch`}]))});var dB=class{constructor(e,n,r){this.lineNumber=e,this.contentHeight=n,this.scrollHeight=r}draw(){let e=document.createElement("div");return e.className="cm-empty-scroll-block-maker",this.adjust(e),e}update(e,n){return n.lineNumber===this.lineNumber&&n.contentHeight===this.contentHeight&&n.scrollHeight===this.scrollHeight}adjust(e){e.style.display="block",e.style.width="1px",this.lineNumber>1?e.style.height=`calc(${"number"==typeof this.scrollHeight?`${this.scrollHeight}px`:"100%"} + ${this.contentHeight}px)`:e.style.height="0"}eq(e){return this.lineNumber===e.lineNumber&&this.contentHeight===e.contentHeight&&this.scrollHeight===e.scrollHeight}},dF={"(":")","{":"}","[":"]",")":"(","}":"{","]":"["},dZ=(e,n)=>{try{let r=e.doc.toString(),i=[],s=-1,o=-1;for(let e=n-1;e>=0;e--){let n=r[e];if(dF[n])if([")","}","]"].includes(n))i.push(n);else{if(0===i.length){s=e;break}let r=i.pop();if(dF[n]!==r)return null}}i=[];for(let e=n;e<r.length;e++){let n=r[e];if(dF[n])if(["(","{","["].includes(n))i.push(n);else{if(0===i.length){o=e;break}let r=i.pop();if(dF[n]!==r)return null}}if(-1!==s&&-1!==o)return[s,o];return null}catch(e){return console.error("findMatchingBracket failed",e),null}},dq=e=>{let n=[];return n.push(ss.mark({class:"cm-matchingBracket"}).range(e,e+1)),n},dW=rx.define({create:()=>ss.none,update(e,n){if(!n.docChanged&&!n.selection)return e;let r=[];for(let e of n.state.selection.ranges){if(!e.empty)continue;let i=dZ(n.state,e.head);i&&(r=r.concat(dq(i[0]),dq(i[1])))}return ss.set(r,!0)},provide:e=>aO.decorations.from(e)}),dX=[sG.fromClass(class{decorations;constructor(e){this.decorations=this.getBracketDecorations(e)}update(e){(e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.getBracketDecorations(e.view))}getBracketDecorations(e){let{doc:n}=e.state,r=[],i=[],s=["Comment","String"],o=c$(e.state);for(let e=0;e<n.length;e+=1){let a=n.sliceString(e,e+1),l=o.resolveInner(e);if(!s.includes(l.type.name)){if("("===a||"["===a||"{"===a)i.push({type:a,from:e});else if(")"===a||"]"===a||"}"===a){let n=i.pop();if(n&&n.type===this.getMatchingBracket(a)){let s=i.length%3;r.push(ss.mark({class:`colorization-bracket-${s}`}).range(n.from,n.from+1),ss.mark({class:`colorization-bracket-${s}`}).range(e,e+1))}}}}return r.sort((e,n)=>e.from-n.from||e.startSide-n.startSide),ss.set(r)}getMatchingBracket(e){switch(e){case")":return"(";case"]":return"[";case"}":return"{";default:return null}}},{decorations:e=>e.decorations}),aO.baseTheme({".colorization-bracket-0":{color:"#ffd700"},".colorization-bracket-0 > span":{color:"#ffd700"},".colorization-bracket-1":{color:"#da70d6"},".colorization-bracket-1 > span":{color:"#da70d6"},".colorization-bracket-2":{color:"#179fff"},".colorization-bracket-2 > span":{color:"#179fff"}})],dU=rg.define(),dY=class{constructor(e,n){this.dom=e,this.rect=n}eq(e){return!!((!this.rect&&!e.rect||this.rect&&e.rect&&this.rect.left===e.rect.left&&this.rect.top===e.rect.top&&this.rect.width===e.rect.width&&this.rect.height===e.rect.height)&&this.dom===e.dom)}draw(){return this.adjust(this.dom),this.dom}update(){return this.adjust(this.dom),!0}adjust(e){e.style.pointerEvents="none",this.rect&&(e.style.left=`${this.rect.left}px`,e.style.top=`${this.rect.top}px`,e.style.width=`${this.rect.width}px`,e.style.height=`${this.rect.height}px`)}},dG=a$({above:!0,markers(e){let n=e.state.facet(dU);if(!n||0===n.length)return[];let r=function(e){let n=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection===sy.LTR?n.left:n.right-e.scrollDOM.clientWidth*e.scaleX)-e.scrollDOM.scrollLeft*e.scaleX,top:n.top-e.scrollDOM.scrollTop*e.scaleY}}(e),i=[],s=[];for(let{dom:o,pos:a}of n){if(!o)continue;let n=-1;"function"==typeof a?n=a(e):"number"==typeof a?n=a:"head"===a?n=e.state.selection.main.head:"anchor"===a&&(n=e.state.selection.main.anchor);let l=e.coordsAtPos(n);if(l){i.push(l);let e=l.left-r.left-.5,n=l.top-r.top,a=l.bottom-l.top;s.push(new dY(o,{left:e,top:n,width:1,height:a}))}else s.push(new dY(o))}return s},update:e=>e.docChanged||e.selectionSet||e.viewportChanged||e.startState.facet(dU)!==e.state.facet(dU),class:"cm-positionReferenceLayer"}),dH=new Map;rg.define({combine(e){let n=new r1;for(let r of function(e){let n=[];return(function(e){let n=new Map;return e.forEach(e=>{n.has(e.className)||n.set(e.className,[]),n.get(e.className).push(e)}),n})(e).forEach((e,r)=>{let i=function(e){let n=[],r=e.map(e=>({start:e.from,end:e.to}));r.sort((e,n)=>e.start-n.start);let i=r[0];for(let e=1;e<r.length;e++){let s=r[e];s.start<=i.end?i.end=Math.max(i.end,s.end):(n.push(i),i=s)}return n.push(i),n}(e);n.push(...i.map(e=>({from:e.start,to:e.end,className:r})))}),n.sort((e,n)=>e.from-n.from),n}(e.reduce((e,n)=>[...e,...n],[]))){let e=function(e){if(!dH.has(e)){let n=ss.mark({class:e});dH.set(e,n)}return dH.get(e)}(r.className);n.add(r.from,r.to,e)}return n.finish()},enables:e=>aO.decorations.compute([e],n=>n.facet(e))});var dK=[rU.changeFilter.of(e=>{let n=e.startState.facet(dJ).reduce((n,r)=>[...n,...r(e.startState)],[]);return!Array.isArray(n)||n.reduce((e,n)=>[...e,n.from,n.to],[])}),rU.transactionFilter.of(e=>{let n=e.startState.doc.length,r=e.startState.facet(dJ).reduce((n,r)=>[...n,...r(e.state)],[]).filter(e=>e.from>=0&&e.from<n&&e.to>=0&&e.to<n),{newSelection:i}=e;return(i.ranges.forEach((e,n)=>{for(let s of r)if(e.empty&&e.from>s.from&&e.to<s.to&&(i=i.replaceRange(rd.cursor(e.assoc>0?s.from:s.to,e.assoc),n)),!e.empty&&cn(e,s)){let r=e.head<e.anchor;e.anchor<s.from?i=i.replaceRange(rd.range(e.anchor,s.from,e.goalColumn,e.bidiLevel??void 0),n):e.anchor>s.to?i=i.replaceRange(rd.range(e.anchor,s.to,e.goalColumn,e.bidiLevel??void 0),n):e.anchor>=s.from&&e.anchor<=s.to&&(i=r?i.replaceRange(rd.range(s.from,Math.min(e.head,s.from),e.goalColumn,e.bidiLevel??void 0),n):i.replaceRange(rd.range(s.to,Math.max(e.head,s.to),e.goalColumn,e.bidiLevel??void 0),n))}}),i.eq(e.newSelection))?e:[e,{selection:i}]})],dJ=rg.define({enables:()=>dK});r(13813);let d0=0;function d1(e){return e(this)}function d2(e,n,r){return n(this,"function"==typeof r?r(e(this)):r)}for(var d5,d4,d3,d6,d9,d7,d8,pe,pt,pn,pr=256,pi=[];pr--;)pi[pr]=(pr+256).toString(16).substring(1);function ps(e,n=[]){let r=l5();(0,nl.useLayoutEffect)(()=>e(r),[r,...n])}function po(e="div"){let[n]=(0,nl.useState)(()=>document.createElement(e));return n}function pa(e){let n=(0,nl.useRef)(e);return n.current=e,n}function pl(){return class extends sr{constructor(e){super(),this.content=e}toDOM(e){let n=document.createElement("span");return n.className="cm-placeholder",n.style.cssText=`
      height: 0;
    `,n.appendChild("string"==typeof this.content?document.createTextNode(this.content):"function"==typeof this.content?this.content(e):this.content),"string"==typeof this.content?n.setAttribute("aria-label",`placeholder ${this.content}`):n.setAttribute("aria-hidden","true"),n}coordsAt(e){var n;let r=e.firstChild?3==(n=e.firstChild).nodeType?(function(e,n,r=n){let i=eA||(eA=document.createRange());return i.setEnd(e,r),i.setStart(e,0),i})(n,0,n.nodeValue.length).getClientRects():1==n.nodeType?n.getClientRects():[]:[];if(!r.length)return null;let i=window.getComputedStyle(e.parentNode),s=function(e,n){let r=n?e.left:e.right;return{left:r,right:r,top:e.top,bottom:e.bottom}}(r[0],"rtl"!=i.direction),o=parseInt(i.lineHeight);return s.bottom-s.top>1.5*o?{left:s.left,right:s.right,top:s.top,bottom:s.top+o}:s}ignoreEvent(){return!1}}}rV.define({map:(e,n)=>e.map(({from:e,to:r,...i})=>({from:n.mapPos(e),to:n.mapPos(r),...i}))}),rV.define(),rV.define(),rg.define(),rx.define({create:e=>e.doc,update:(e,n)=>(n.docChanged&&(e=n.state.doc),e)}),rg.define(),rx.define({create:e=>e.doc,update:(e,n)=>(n.docChanged&&(e=n.state.doc),e)}),rg.define(),rg.define();var ph=pl(),pc=rg.define({combine:cr}),pu=sG.fromClass(class{constructor(e){this.view=e;let n=e.state.facet(pc);this.placeholder=this.getPlaceholder(n)}placeholder;content;update(e){let n=e.view.state.facet(pc);this.content!==n&&(this.placeholder=this.getPlaceholder(n),this.content=n)}getPlaceholder(e){return e?ss.set([ss.widget({widget:new ph(e),side:1}).range(0)]):ss.none}get decorations(){return this.view.state.doc.length?ss.none:this.placeholder}},{decorations:e=>e.decorations}),pd=pl(),pp=rg.define({combine:cr}),pf=sG.fromClass(class{decorations=ss.none;constructor(e){e.hasFocus?this.decorations=pg(e.state):this.decorations=ss.none}update(e){if(!e.view.hasFocus){this.decorations=ss.none;return}(e.selectionSet||e.docChanged)&&(this.decorations=pg(e.state))}},{decorations:e=>e.decorations});function pg(e){let n=e.selection.main.head;if(e.selection.main.empty){let r=e.doc.lineAt(n);if(r&&0===r.length){let n=e.facet(pp);return ss.set([ss.widget({widget:new pd(n),side:1}).range(r.from)])}}return ss.none}(0,nl.forwardRef)(function({side:e,onChange:n,onVisibleChange:r},i){let s=l5(),o=l2(),[a]=(0,nl.useState)(()=>document.createElement("div")),l=(0,nl.useRef)(a);l.current=a;let h=(0,nl.useRef)(n);h.current=n;let c=(0,nl.useRef)(r);return c.current=r,(0,nl.useImperativeHandle)(i,()=>l.current),(0,nl.useLayoutEffect)(()=>s.inject([dU.of({dom:l.current,pos:e}),dG]),[s,e]),(0,nl.useEffect)(()=>{let e=document.createElement("div");document.body.appendChild(e);let n=hx(l.current,e,()=>{"function"==typeof h.current&&h.current()},{animationFrame:!0});return()=>{document.body.removeChild(e),n()}},[]),(0,nl.useEffect)(()=>{if(!o)return;let e=new IntersectionObserver(e=>{e.forEach(e=>{"function"==typeof c.current&&c.current(e.isIntersecting)})},{root:o.$view.scrollDOM,threshold:0});return e.observe(l.current),()=>{e.disconnect()}},[o]),null});var pm=(0,nl.forwardRef)(function({position:e,onChange:n,onVisibleChange:r},i){let s=l5(),o=l2(),[a]=(0,nl.useState)(()=>{let e=document.createElement("div");return e.classList.add("cm-position-mirror"),e}),l=(0,nl.useRef)(a);l.current=a;let h=(0,nl.useRef)(n);h.current=n;let c=(0,nl.useRef)(r);return c.current=r,(0,nl.useImperativeHandle)(i,()=>l.current),(0,nl.useLayoutEffect)(()=>s.inject([dU.of({dom:l.current,pos:e}),dG]),[s,e]),(0,nl.useEffect)(()=>{let e=document.createElement("div");document.body.appendChild(e);let n=hx(l.current,e,()=>{"function"==typeof h.current&&h.current()},{animationFrame:!0});return()=>{document.body.removeChild(e),n()}},[]),(0,nl.useEffect)(()=>{if(!o)return;let e=new IntersectionObserver(e=>{e.forEach(e=>{"function"==typeof c.current&&c.current(e.isIntersecting)})},{root:o.$view.scrollDOM,threshold:0});return e.observe(l.current),()=>{e.disconnect()}},[o]),null}),py=class extends rG{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}elementClass;destroy(e){}};py.prototype.elementClass="",py.prototype.toDOM=void 0,py.prototype.mapMode=rn.TrackBefore,py.prototype.startSide=py.prototype.endSide=-1,py.prototype.point=!0;var pO=rg.define(),pv=rg.define(),pb=rg.define(),px=rg.define({combine:e=>e.some(e=>e)});function pw(e){return Array.isArray(e)?e:[e]}function pS(e,n,r){for(;e.value&&e.from<=r;)e.from==r&&n.push(e.value),e.next()}sG.fromClass(class{constructor(e){for(let n of(this.view=e,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-right-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=e.state.facet(pb).map(n=>new pk(e,n)),this.gutters))this.dom.appendChild(n.dom);this.fixed=!e.state.facet(px),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.appendChild(this.dom)}gutters;dom;fixed;prevViewport;update(e){if(this.updateGutters(e)){let n=this.prevViewport,r=e.view.viewport,i=Math.min(n.to,r.to)-Math.max(n.from,r.from);this.syncGutters(i<(r.to-r.from)*.8)}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(px)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport}syncGutters(e){let n=this.dom.previousSibling;e&&this.dom.remove();let r=r0.iter(this.view.state.facet(pO),this.view.viewport.from),i=[],s=this.gutters.map(e=>new p_(e,this.view.viewport,-this.view.documentPadding.top));for(let e of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(e.type)){let n=!0;for(let o of e.type)if(o.type==si.Text&&n){for(let e of(pS(r,i,o.from),s))e.line(this.view,o,i);n=!1}else if(o.widget)for(let e of s)e.widget(this.view,o)}else if(e.type==si.Text)for(let n of(pS(r,i,e.from),s))n.line(this.view,e,i);else if(e.widget)for(let n of s)n.widget(this.view,e);for(let e of s)e.finish();e&&this.view.scrollDOM.insertBefore(this.dom,(null==n?void 0:n.nextSibling)??null)}updateGutters(e){let n=e.startState.facet(pb),r=e.state.facet(pb),i=e.docChanged||e.heightChanged||e.viewportChanged||!r0.eq(e.startState.facet(pO),e.state.facet(pO),e.view.viewport.from,e.view.viewport.to);if(n==r)for(let n of this.gutters)n.update(e)&&(i=!0);else{i=!0;let s=[];for(let i of r){let r=n.indexOf(i);r<0?s.push(new pk(this.view,i)):(this.gutters[r].update(e),s.push(this.gutters[r]))}for(let e of this.gutters)e.dom.remove(),0>s.indexOf(e)&&e.destroy();for(let e of s)this.dom.appendChild(e.dom);this.gutters=s}return i}destroy(){for(let e of this.gutters)e.destroy();this.dom.remove()}},{provide:e=>aO.scrollMargins.of(n=>{let r=n.plugin(e);return r&&0!=r.gutters.length&&r.fixed?n.textDirection==sy.LTR?{left:r.dom.offsetWidth*n.scaleX}:{right:r.dom.offsetWidth*n.scaleX}:null})});var p_=class{constructor(e,n,r){this.gutter=e,this.height=r,this.cursor=r0.iter(e.markers,n.from)}cursor;i=0;addElement(e,n,r){let{gutter:i}=this,s=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==i.elements.length){let n=new pC(e,o,s,r);i.elements.push(n),i.dom.appendChild(n.dom)}else i.elements[this.i].update(e,o,s,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];pS(this.cursor,i,n.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,n,i);s&&i.unshift(s);let o=this.gutter;(0!=i.length||o.config.renderEmptyElements)&&this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n),i=r?[r]:null;for(let r of e.state.facet(pv)){let s=r(e,n.widget,n);s&&(i||(i=[])).push(s)}i&&this.addElement(e,n,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}},pk=class{constructor(e,n){for(let r in this.view=e,this.config=n,this.dom=document.createElement("div"),this.dom.className="cm-right-gutter"+(this.config.class?" "+this.config.class:""),n.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let e=s.getBoundingClientRect();o=(e.top+e.bottom)/2}else o=i.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[r](e,a,i)&&i.preventDefault()});this.markers=pw(n.markers(e)),n.initialSpacer&&(this.spacer=new pC(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}dom;elements=[];markers;spacer=null;update(e){let n=this.markers;if(this.markers=pw(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}let r=e.view.viewport;return!r0.eq(this.markers,n,r.from,r.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)}destroy(){for(let e of this.elements)e.destroy()}},pC=class{dom;height=-1;above=0;markers=[];constructor(e,n,r,i){this.dom=document.createElement("div"),this.dom.className="cm-rightGutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),!function(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].compare(n[r]))return!1;return!0}(this.markers,i)&&this.setMarkers(e,i)}setMarkers(e,n){let r="cm-rightGutterElement",i=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,h=!1;if(l){let e=l.elementClass;e&&(r+=" "+e);for(let e=o;e<this.markers.length;e++)if(this.markers[e].compare(l)){a=e,h=!0;break}}else a=this.markers.length;for(;o<a;){let e=this.markers[o++];if(e.toDOM){e.destroy(i);let n=i.nextSibling;i.remove(),i=n}}if(!l)break;l.toDOM&&(h?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),h&&o++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}},pE=new class extends py{elementClass="cm-activeLineRightGutter"};function pT({children:e}){let n=po("span");return ps(e=>{var r;return e.inject([(r=()=>n,[pf,pp.of(r)])])},[]),(0,nV.createPortal)(e,n)}pO.compute(["selection"],e=>{let n=[],r=-1;for(let i of e.selection.ranges){let s=e.doc.lineAt(i.head).from;s>r&&(r=s,n.push(pE.range(s)))}return r0.of(n)}),function(e,n){let r=`atom${++d0}`,i={toString(){return this.debugLabel?r+":"+this.debugLabel:r}};"function"==typeof e?i.read=e:(i.init=e,i.read=d1,i.write=d2)}(rg.define()),(0,nl.forwardRef)(({element:e},n)=>{let r=pa(e);return(0,nl.useImperativeHandle)(n,()=>r.current),null}).displayName="RefElement",rV.define();function pP(e){return"function"==typeof e.trigger}var pA=/^[\u4e00-\u9fa5a-zA-Z0-9_']*$/;function pM(e){return pA.test(e)}var pN=rg.define();function pD(e){for(let n of e.facet(pN)){let r=e.field(n,!1);if(r&&r.triggerContext&&"number"==typeof r.triggerContext.from&&"number"==typeof r.triggerContext.to)return{from:r.triggerContext.from,to:r.triggerContext.to}}}function pI(e){let n=pa(e);return ps(r=>{let i={search:e.search,onOpenChange(...e){if("function"==typeof n.current.onOpenChange)return n.current.onOpenChange(...e)},onSearch(...e){if("function"==typeof n.current.onSearch)return n.current.onSearch(...e)}};return r.inject([function(e){let n=rg.define({combine:cr}),r=rx.define({create:()=>({show:!1,triggerContext:void 0}),update(e,r){let i,s=r.startState.facet(n),{search:o=!0,onOpenChange:a,onSearch:l}=s,{show:h}=e;r.docChanged&&(Array.isArray(s.triggerCharacters)?r.changes.iterChanges((e,n,o,a,l)=>{let h=l.toString();e===n&&s.triggerCharacters.includes(h)&&(i={from:o,to:a,triggerCharacter:h,cursorPosition:r.state.selection.main.head})}):pP(s)&&(i=s.trigger(r)));let c=r.isUserEvent("select"),u={show:e.show,triggerContext:e.triggerContext?{...e.triggerContext}:void 0};if(i)u.triggerContext=i,h=!0,"function"==typeof l&&l({value:""});else if(r.docChanged&&e.triggerContext&&o){if(u.triggerContext){let n=r.changes.mapPos(e.triggerContext.from,1,rn.TrackAfter),i=r.changes.mapPos(e.triggerContext.to,1,rn.Simple);"number"==typeof n&&"number"==typeof i?(u.triggerContext.from=n,u.triggerContext.to=i):h=!1}if(!0===h){let n="object"==typeof o?o.validFor:pM,i=e.triggerContext.cursorPosition,s=r.state.selection.main.head;if(s>=i){let e=r.state.sliceDoc(i,s);n(e,i,s,r.state)?(h=!0,"function"==typeof l&&l({value:e})):h=!1}else h=!1}}else c&&(h=!1);return!1===h&&(u.triggerContext=void 0),h!==e.show&&(u.show=h,"function"==typeof a&&a({value:h,state:r.state,triggerContext:u.triggerContext?{from:u.triggerContext.from,to:u.triggerContext.to,triggerCharacter:u.triggerContext.triggerCharacter}:void 0})),u}});return[n.of(e),r,pN.of(r)]}(pP(e)?{...i,trigger(e){if(pP(n.current))return n.current.trigger(e)}}:{...i,triggerCharacters:e.triggerCharacters??[]})])}),null}var p$=class extends sr{constructor(e){super(),this.options=e}toDOM(){return this.options.dom}eq(e){return this.options.dom===e.options.dom}},pR=rV.define();function pL(e,n){return({state:r,dispatch:i})=>{if(r.readOnly)return!1;let s=e(n,r);return!!s&&(i(r.update(s)),!0)}}(0,nl.forwardRef)(function({children:e},n){let r=po("div"),i=pa(r),s=pa(l2());return(0,nl.useImperativeHandle)(n,()=>({update({visible:e,line:n,side:r}){var i;null==(i=s.current)||i.$view.dispatch({effects:pR.of({visible:e,line:n??1,side:r??"before"})})}})),ps(e=>{let n=rx.define({create:()=>({position:0,side:"before",decorations:ss.none}),update(e,n){let r=n.changes.mapPos(e.position,-1,rn.Simple),s=e;if("number"==typeof r&&r!==e.position){let o=n.state.doc.lineAt(r),a=0;a="after"===e.side?o.to:o.from,s={...e,position:r,decorations:ss.set([ss.widget({widget:new p$({dom:i.current}),block:!0,side:"after"===e.side?1:-1}).range(a)])}}for(let e of n.effects)if(e.is(pR)){let{visible:r,line:o,side:a}=e.value;if(!r)return{position:s.position,side:a,decorations:ss.none};if(o<1||o>n.startState.doc.lines)continue;let l=n.startState.doc.line(o),h=0;return{position:h="after"===a?l.to:l.from,side:a,decorations:ss.set([ss.widget({widget:new p$({dom:i.current}),block:!0,side:"after"===s.side?1:-1}).range(h)])}}return s},provide:e=>aO.decorations.compute([e],n=>n.field(e).decorations)});return e.inject([n])},[]),(0,nV.createPortal)(e,r)});let pQ=pL(function(e,n,r=n.selection.ranges){let i=[],s=-1;for(let{from:e,to:o}of r){let r=i.length,a=1e9,l=pz(n,e).line;if(l){for(let r=e;r<=o;){let h=n.doc.lineAt(r);if(h.from>s&&(e==o||o>h.from)){s=h.from;let e=/^\s*/.exec(h.text)[0].length,n=e==h.length,r=h.text.slice(e,e+l.length)==l?e:-1;e<h.text.length&&e<a&&(a=e),i.push({line:h,comment:r,token:l,indent:e,empty:n,single:!1})}r=h.to+1}if(a<1e9)for(let e=r;e<i.length;e++)i[e].indent<i[e].line.text.length&&(i[e].indent=a);i.length==r+1&&(i[r].single=!0)}}if(2!=e&&i.some(e=>e.comment<0&&(!e.empty||e.single))){let e=[];for(let{line:n,token:r,indent:s,empty:o,single:a}of i)(a||!o)&&e.push({from:n.from+s,insert:r+" "});let r=n.changes(e);return{changes:r,selection:n.selection.map(r,1)}}if(1!=e&&i.some(e=>e.comment>=0)){let e=[];for(let{line:n,comment:r,token:s}of i)if(r>=0){let i=n.from+r,o=i+s.length;" "==n.text[o-n.from]&&o++,e.push({from:i,to:o})}return{changes:e}}return null},0),pj=pL(pB,0),pV=pL((e,n)=>pB(e,n,function(e){let n=[];for(let r of e.selection.ranges){let i=e.doc.lineAt(r.from),s=r.to<=i.to?i:e.doc.lineAt(r.to);s.from>i.from&&s.from==r.to&&(s=r.to==i.to+1?i:e.doc.lineAt(r.to-1));let o=n.length-1;o>=0&&n[o].to>i.from?n[o].to=s.to:n.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:s.to})}return n}(n)),0);function pz(e,n){let r=e.languageDataAt("commentTokens",n,1);return r.length?r[0]:{}}function pB(e,n,r=n.selection.ranges){let i=r.map(e=>pz(n,e.from).block);if(!i.every(e=>e))return null;let s=r.map((e,r)=>(function(e,{open:n,close:r},i,s){let o,a,l=e.sliceDoc(i-50,i),h=e.sliceDoc(s,s+50),c=/\s*$/.exec(l)[0].length,u=/^\s*/.exec(h)[0].length,d=l.length-c;if(l.slice(d-n.length,d)==n&&h.slice(u,u+r.length)==r)return{open:{pos:i-c,margin:c&&1},close:{pos:s+u,margin:u&&1}};s-i<=100?o=a=e.sliceDoc(i,s):(o=e.sliceDoc(i,i+50),a=e.sliceDoc(s-50,s));let p=/^\s*/.exec(o)[0].length,f=/\s*$/.exec(a)[0].length,g=a.length-f-r.length;return o.slice(p,p+n.length)==n&&a.slice(g,g+r.length)==r?{open:{pos:i+p+n.length,margin:+!!/\s/.test(o.charAt(p+n.length))},close:{pos:s-f-r.length,margin:+!!/\s/.test(a.charAt(g-1))}}:null})(n,i[r],e.from,e.to));if(2!=e&&!s.every(e=>e))return{changes:n.changes(r.map((e,n)=>s[n]?[]:[{from:e.from,insert:i[n].open+" "},{from:e.to,insert:" "+i[n].close}]))};if(1!=e&&s.some(e=>e)){let e=[];for(let n=0,r;n<s.length;n++)if(r=s[n]){let s=i[n],{open:o,close:a}=r;e.push({from:o.pos-s.open.length,to:o.pos+o.margin},{from:a.pos-a.margin,to:a.pos+s.close.length})}return{changes:e}}return null}let pF=rL.define(),pZ=rL.define(),pq=rg.define(),pW=rg.define({combine:e=>rY(e,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(r,i)=>e(r,i)||n(r,i)})}),pX=rx.define({create:()=>p9.empty,update(e,n){let r=n.state.facet(pW),i=n.annotation(pF);if(i){let s=p0.fromTransaction(n,i.selection),o=i.side,a=0==o?e.undone:e.done;return a=s?p1(a,a.length,r.minDepth,s):p4(a,n.startState.selection),new p9(0==o?i.rest:a,0==o?a:i.rest)}let s=n.annotation(pZ);if(("full"==s||"before"==s)&&(e=e.isolate()),!1===n.annotation(rz.addToHistory))return n.changes.empty?e:e.addMapping(n.changes.desc);let o=p0.fromTransaction(n),a=n.annotation(rz.time),l=n.annotation(rz.userEvent);return o?e=e.addChanges(o,a,l,r,n):n.selection&&(e=e.addSelection(n.startState.selection,a,l,r.newGroupDelay)),("full"==s||"after"==s)&&(e=e.isolate()),e},toJSON:e=>({done:e.done.map(e=>e.toJSON()),undone:e.undone.map(e=>e.toJSON())}),fromJSON:e=>new p9(e.done.map(p0.fromJSON),e.undone.map(p0.fromJSON))});function pU(e={}){return[pX,pW.of(e),aO.domEventHandlers({beforeinput(e,n){let r="historyUndo"==e.inputType?pG:"historyRedo"==e.inputType?pH:null;return!!r&&(e.preventDefault(),r(n))}})]}function pY(e,n){return function({state:r,dispatch:i}){if(!n&&r.readOnly)return!1;let s=r.field(pX,!1);if(!s)return!1;let o=s.pop(e,r,n);return!!o&&(i(o),!0)}}let pG=pY(0,!1),pH=pY(1,!1),pK=pY(0,!0),pJ=pY(1,!0);class p0{constructor(e,n,r,i,s){this.changes=e,this.effects=n,this.mapped=r,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new p0(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,r;return{changes:null==(e=this.changes)?void 0:e.toJSON(),mapped:null==(n=this.mapped)?void 0:n.toJSON(),startSelection:null==(r=this.startSelection)?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(e=>e.toJSON())}}static fromJSON(e){return new p0(e.changes&&ri.fromJSON(e.changes),[],e.mapped&&rr.fromJSON(e.mapped),e.startSelection&&rd.fromJSON(e.startSelection),e.selectionsAfter.map(rd.fromJSON))}static fromTransaction(e,n){let r=p5;for(let n of e.startState.facet(pq)){let i=n(e);i.length&&(r=r.concat(i))}return!r.length&&e.changes.empty?null:new p0(e.changes.invert(e.startState.doc),r,void 0,n||e.startState.selection,p5)}static selection(e){return new p0(void 0,p5,void 0,void 0,e)}}function p1(e,n,r,i){let s=e.slice(n+1>r+20?n-r-1:0,n);return s.push(i),s}function p2(e,n){return e.length?n.length?e.concat(n):e:n}let p5=[];function p4(e,n){if(!e.length)return[p0.selection([n])];{let r=e[e.length-1],i=r.selectionsAfter.slice(Math.max(0,r.selectionsAfter.length-200));return i.length&&i[i.length-1].eq(n)?e:(i.push(n),p1(e,e.length-1,1e9,r.setSelAfter(i)))}}function p3(e,n){if(!e.length)return e;let r=e.length,i=p5;for(;r;){let s=function(e,n,r){let i=p2(e.selectionsAfter.length?e.selectionsAfter.map(e=>e.map(n)):p5,r);if(!e.changes)return p0.selection(i);let s=e.changes.map(n),o=n.mapDesc(e.changes,!0),a=e.mapped?e.mapped.composeDesc(o):o;return new p0(s,rV.mapEffects(e.effects,n),a,e.startSelection.map(o),i)}(e[r-1],n,i);if(s.changes&&!s.changes.empty||s.effects.length){let n=e.slice(0,r);return n[r-1]=s,n}n=s.mapped,r--,i=s.selectionsAfter}return i.length?[p0.selection(i)]:p5}let p6=/^(input\.type|delete)($|\.)/;class p9{constructor(e,n,r=0,i){this.done=e,this.undone=n,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new p9(this.done,this.undone):this}addChanges(e,n,r,i,s){var o,a;let l,h,c=this.done,u=c[c.length-1];return new p9(c=u&&u.changes&&!u.changes.empty&&e.changes&&(!r||p6.test(r))&&(!u.selectionsAfter.length&&n-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,(o=u.changes,a=e.changes,l=[],h=!1,o.iterChangedRanges((e,n)=>l.push(e,n)),a.iterChangedRanges((e,n,r,i)=>{for(let e=0;e<l.length;){let n=l[e++],s=l[e++];i>=n&&r<=s&&(h=!0)}}),h))||"input.type.compose"==r)?p1(c,c.length-1,i.minDepth,new p0(e.changes.compose(u.changes),p2(rV.mapEffects(e.effects,u.changes),u.effects),u.mapped,u.startSelection,p5)):p1(c,c.length,i.minDepth,e),p5,n,r)}addSelection(e,n,r,i){var s;let o=this.done.length?this.done[this.done.length-1].selectionsAfter:p5;return o.length>0&&n-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&(s=o[o.length-1],s.ranges.length==e.ranges.length&&0===s.ranges.filter((n,r)=>n.empty!=e.ranges[r].empty).length)?this:new p9(p4(this.done,e),this.undone,n,r)}addMapping(e){return new p9(p3(this.done,e),p3(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,r){let i=0==e?this.done:this.undone;if(0==i.length)return null;let s=i[i.length-1],o=s.selectionsAfter[0]||n.selection;if(r&&s.selectionsAfter.length){let r,a;return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:pF.of({side:e,rest:(r=i[i.length-1],(a=i.slice())[i.length-1]=r.setSelAfter(r.selectionsAfter.slice(0,r.selectionsAfter.length-1)),a),selection:o}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0})}{if(!s.changes)return null;let r=1==i.length?p5:i.slice(0,i.length-1);return s.mapped&&(r=p3(r,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:pF.of({side:e,rest:r,selection:o}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}}}p9.empty=new p9(p5,p5);let p7=[{key:"Mod-z",run:pG,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:pH,preventDefault:!0},{linux:"Ctrl-Shift-z",run:pH,preventDefault:!0},{key:"Mod-u",run:pK,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:pJ,preventDefault:!0}];function p8(e,n){return rd.create(e.ranges.map(n),e.mainIndex)}function fe(e,n){return e.update({selection:n,scrollIntoView:!0,userEvent:"select"})}function ft({state:e,dispatch:n},r){let i=p8(e.selection,r);return!i.eq(e.selection,!0)&&(n(fe(e,i)),!0)}function fn(e,n){return rd.cursor(n?e.to:e.from)}function fr(e,n){return ft(e,r=>r.empty?e.moveByChar(r,n):fn(r,n))}function fi(e){return e.textDirectionAt(e.state.selection.main.head)==sy.LTR}let fs=e=>fr(e,!fi(e)),fo=e=>fr(e,fi(e));function fa(e,n){return ft(e,r=>r.empty?e.moveByGroup(r,n):fn(r,n))}function fl(e,n,r){let i,s,o=c$(e).resolveInner(n.head),a=r?hk.closedBy:hk.openedBy;for(let i=n.head;;){let n=r?o.childAfter(i):o.childBefore(i);if(!n)break;!function(e,n,r){if(n.type.prop(r))return!0;let i=n.to-n.from;return i&&(i>2||/[^\s,.;:]/.test(e.sliceDoc(n.from,n.to)))||n.firstChild}(e,n,a)?i=r?n.to:n.from:o=n}return s=o.type.prop(a)&&(i=r?uT(e,o.from,1):uT(e,o.to,-1))&&i.matched?r?i.end.to:i.end.from:r?o.to:o.from,rd.cursor(s,r?-1:1)}function fh(e,n){return ft(e,r=>{if(!r.empty)return fn(r,n);let i=e.moveVertically(r,n);return i.head!=r.head?i:e.moveToLineBoundary(r,n)})}"undefined"!=typeof Intl&&Intl.Segmenter;let fc=e=>fh(e,!1),fu=e=>fh(e,!0);function fd(e){let n=e.scrollDOM.clientHeight<e.scrollDOM.scrollHeight-2,r=0,i=0,s;if(n){for(let n of e.state.facet(aO.scrollMargins)){let s=n(e);(null==s?void 0:s.top)&&(r=Math.max(null==s?void 0:s.top,r)),(null==s?void 0:s.bottom)&&(i=Math.max(null==s?void 0:s.bottom,i))}s=e.scrollDOM.clientHeight-r-i}else s=(e.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:r,marginBottom:i,selfScroll:n,height:Math.max(e.defaultLineHeight,s-5)}}function fp(e,n){let r,i=fd(e),{state:s}=e,o=p8(s.selection,r=>r.empty?e.moveVertically(r,n,i.height):fn(r,n));if(o.eq(s.selection))return!1;if(i.selfScroll){let n=e.coordsAtPos(s.selection.main.head),a=e.scrollDOM.getBoundingClientRect(),l=a.top+i.marginTop,h=a.bottom-i.marginBottom;n&&n.top>l&&n.bottom<h&&(r=aO.scrollIntoView(o.main.head,{y:"start",yMargin:n.top-l}))}return e.dispatch(fe(s,o),{effects:r}),!0}let ff=e=>fp(e,!1),fg=e=>fp(e,!0);function fm(e,n,r){let i=e.lineBlockAt(n.head),s=e.moveToLineBoundary(n,r);if(s.head==n.head&&s.head!=(r?i.to:i.from)&&(s=e.moveToLineBoundary(n,r,!1)),!r&&s.head==i.from&&i.length){let r=/^\s*/.exec(e.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;r&&n.head!=i.from+r&&(s=rd.cursor(i.from+r))}return s}function fy(e,n){let r=p8(e.state.selection,e=>{let r=n(e);return rd.range(e.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return!r.eq(e.state.selection)&&(e.dispatch(fe(e.state,r)),!0)}function fO(e,n){return fy(e,r=>e.moveByChar(r,n))}let fv=e=>fO(e,!fi(e)),fb=e=>fO(e,fi(e));function fx(e,n){return fy(e,r=>e.moveByGroup(r,n))}function fw(e,n){return fy(e,r=>e.moveVertically(r,n))}let fS=e=>fw(e,!1),f_=e=>fw(e,!0);function fk(e,n){return fy(e,r=>e.moveVertically(r,n,fd(e).height))}let fC=e=>fk(e,!1),fE=e=>fk(e,!0),fT=({state:e,dispatch:n})=>(n(fe(e,{anchor:0})),!0),fP=({state:e,dispatch:n})=>(n(fe(e,{anchor:e.doc.length})),!0),fA=({state:e,dispatch:n})=>(n(fe(e,{anchor:e.selection.main.anchor,head:0})),!0),fM=({state:e,dispatch:n})=>(n(fe(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0);function fN(e,n){if(e.state.readOnly)return!1;let r="delete.selection",{state:i}=e,s=i.changeByRange(i=>{let{from:s,to:o}=i;if(s==o){let a=n(i);a<s?(r="delete.backward",a=fD(e,a,!1)):a>s&&(r="delete.forward",a=fD(e,a,!0)),s=Math.min(s,a),o=Math.max(o,a)}else s=fD(e,s,!1),o=fD(e,o,!0);return s==o?{range:i}:{changes:{from:s,to:o},range:rd.cursor(s,s<i.head?-1:1)}});return!s.changes.empty&&(e.dispatch(i.update(s,{scrollIntoView:!0,userEvent:r,effects:"delete.selection"==r?aO.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function fD(e,n,r){if(e instanceof aO)for(let i of e.state.facet(aO.atomicRanges).map(n=>n(e)))i.between(n,n,(e,i)=>{e<n&&i>n&&(n=r?i:e)});return n}let fI=(e,n,r)=>fN(e,i=>{let s=i.from,{state:o}=e,a=o.doc.lineAt(s),l,h;if(r&&!n&&s>a.from&&s<a.from+200&&!/[^ \t]/.test(l=a.text.slice(0,s-a.from))){if("	"==l[l.length-1])return s-1;let e=ir(l,o.tabSize)%cU(o)||cU(o);for(let n=0;n<e&&" "==l[l.length-1-n];n++)s--;h=s}else(h=n9(a.text,s-a.from,n,n)+a.from)==s&&a.number!=(n?o.doc.lines:1)?h+=n?1:-1:!n&&/[\ufe00-\ufe0f]/.test(a.text.slice(h-a.from,s-a.from))&&(h=n9(a.text,h-a.from,!1,!1)+a.from);return h}),f$=e=>fI(e,!1,!0),fR=e=>fI(e,!0,!1),fL=(e,n)=>fN(e,r=>{let i=r.head,{state:s}=e,o=s.doc.lineAt(i),a=s.charCategorizer(i);for(let e=null;;){if(i==(n?o.to:o.from)){i==r.head&&o.number!=(n?s.doc.lines:1)&&(i+=n?1:-1);break}let l=n9(o.text,i-o.from,n)+o.from,h=o.text.slice(Math.min(i,l)-o.from,Math.max(i,l)-o.from),c=a(h);if(null!=e&&c!=e)break;(" "!=h||i!=r.head)&&(e=c),i=l}return i}),fQ=e=>fL(e,!1);function fj(e){let n=[],r=-1;for(let i of e.selection.ranges){let s=e.doc.lineAt(i.from),o=e.doc.lineAt(i.to);if(i.empty||i.to!=o.from||(o=e.doc.lineAt(i.to-1)),r>=s.number){let e=n[n.length-1];e.to=o.to,e.ranges.push(i)}else n.push({from:s.from,to:o.to,ranges:[i]});r=o.number+1}return n}function fV(e,n,r){if(e.readOnly)return!1;let i=[],s=[];for(let n of fj(e)){if(r?n.to==e.doc.length:0==n.from)continue;let o=e.doc.lineAt(r?n.to+1:n.from-1),a=o.length+1;if(r)for(let r of(i.push({from:n.to,to:o.to},{from:n.from,insert:o.text+e.lineBreak}),n.ranges))s.push(rd.range(Math.min(e.doc.length,r.anchor+a),Math.min(e.doc.length,r.head+a)));else for(let r of(i.push({from:o.from,to:n.from},{from:n.to,insert:e.lineBreak+o.text}),n.ranges))s.push(rd.range(r.anchor-a,r.head-a))}return!!i.length&&(n(e.update({changes:i,scrollIntoView:!0,selection:rd.create(s,e.selection.mainIndex),userEvent:"move.line"})),!0)}function fz(e,n,r){if(e.readOnly)return!1;let i=[];for(let n of fj(e))r?i.push({from:n.from,insert:e.doc.slice(n.from,n.to)+e.lineBreak}):i.push({from:n.to,insert:e.lineBreak+e.doc.slice(n.from,n.to)});return n(e.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}let fB=fZ(!1),fF=fZ(!0);function fZ(e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=n.changeByRange(r=>{let{from:i,to:s}=r,o=n.doc.lineAt(i),a=!e&&i==s&&function(e,n){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(n-1,n+1)))return{from:n,to:n};let r=c$(e).resolveInner(n),i=r.childBefore(n),s=r.childAfter(n),o;return i&&s&&i.to<=n&&s.from>=n&&(o=i.type.prop(hk.closedBy))&&o.indexOf(s.name)>-1&&e.doc.lineAt(i.to).from==e.doc.lineAt(s.from).from&&!/\S/.test(e.sliceDoc(i.to,s.from))?{from:i.to,to:s.from}:null}(n,i);e&&(i=s=(s<=o.to?o:n.doc.lineAt(s)).to);let l=new cH(n,{simulateBreak:i,simulateDoubleBreak:!!a}),h=cG(l,i);for(null==h&&(h=ir(/^\s*/.exec(n.doc.lineAt(i).text)[0],n.tabSize));s<o.to&&/\s/.test(o.text[s-o.from]);)s++;a?{from:i,to:s}=a:i>o.from&&i<o.from+100&&!/\S/.test(o.text.slice(0,i))&&(i=o.from);let c=["",cY(n,h)];return a&&c.push(cY(n,l.lineIndent(o.from,-1))),{changes:{from:i,to:s,insert:nK.of(c)},range:rd.cursor(i+1+c[1].length)}});return r(n.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function fq(e,n){let r=-1;return e.changeByRange(i=>{let s=[];for(let o=i.from;o<=i.to;){let a=e.doc.lineAt(o);a.number>r&&(i.empty||i.to>a.from)&&(n(a,s,i),r=a.number),o=a.to+1}let o=e.changes(s);return{changes:s,range:rd.range(o.mapPos(i.anchor,1),o.mapPos(i.head,1))}})}let fW=({state:e,dispatch:n})=>!e.readOnly&&(n(e.update(fq(e,(n,r)=>{r.push({from:n.from,insert:e.facet(cX)})}),{userEvent:"input.indent"})),!0),fX=({state:e,dispatch:n})=>!e.readOnly&&(n(e.update(fq(e,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let s=ir(i,e.tabSize),o=0,a=cY(e,Math.max(0,s-cU(e)));for(;o<i.length&&o<a.length&&i.charCodeAt(o)==a.charCodeAt(o);)o++;r.push({from:n.from+o,to:n.from+i.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),fU=[{key:"Ctrl-b",run:fs,shift:fv,preventDefault:!0},{key:"Ctrl-f",run:fo,shift:fb},{key:"Ctrl-p",run:fc,shift:fS},{key:"Ctrl-n",run:fu,shift:f_},{key:"Ctrl-a",run:e=>ft(e,n=>rd.cursor(e.lineBlockAt(n.head).from,1)),shift:e=>fy(e,n=>rd.cursor(e.lineBlockAt(n.head).from))},{key:"Ctrl-e",run:e=>ft(e,n=>rd.cursor(e.lineBlockAt(n.head).to,-1)),shift:e=>fy(e,n=>rd.cursor(e.lineBlockAt(n.head).to))},{key:"Ctrl-d",run:fR},{key:"Ctrl-h",run:f$},{key:"Ctrl-k",run:e=>fN(e,n=>{let r=e.lineBlockAt(n.head).to;return n.head<r?r:Math.min(e.state.doc.length,n.head+1)})},{key:"Ctrl-Alt-h",run:fQ},{key:"Ctrl-o",run:({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(e=>({changes:{from:e.from,to:e.to,insert:nK.of(["",""])},range:rd.cursor(e.from)}));return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(n=>{if(!n.empty||0==n.from||n.from==e.doc.length)return{range:n};let r=n.from,i=e.doc.lineAt(r),s=r==i.from?r-1:n9(i.text,r-i.from,!1)+i.from,o=r==i.to?r+1:n9(i.text,r-i.from,!0)+i.from;return{changes:{from:s,to:o,insert:e.doc.slice(r,o).append(e.doc.slice(s,r))},range:rd.cursor(o)}});return!r.changes.empty&&(n(e.update(r,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:fg}],fY=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:e=>ft(e,n=>fl(e.state,n,!fi(e))),shift:e=>fy(e,n=>fl(e.state,n,!fi(e)))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:e=>ft(e,n=>fl(e.state,n,fi(e))),shift:e=>fy(e,n=>fl(e.state,n,fi(e)))},{key:"Alt-ArrowUp",run:({state:e,dispatch:n})=>fV(e,n,!1)},{key:"Shift-Alt-ArrowUp",run:({state:e,dispatch:n})=>fz(e,n,!1)},{key:"Alt-ArrowDown",run:({state:e,dispatch:n})=>fV(e,n,!0)},{key:"Shift-Alt-ArrowDown",run:({state:e,dispatch:n})=>fz(e,n,!0)},{key:"Escape",run:({state:e,dispatch:n})=>{let r=e.selection,i=null;return r.ranges.length>1?i=rd.create([r.main]):r.main.empty||(i=rd.create([rd.cursor(r.main.head)])),!!i&&(n(fe(e,i)),!0)}},{key:"Mod-Enter",run:fF},{key:"Alt-l",mac:"Ctrl-l",run:({state:e,dispatch:n})=>{let r=fj(e).map(({from:n,to:r})=>rd.range(n,Math.min(r+1,e.doc.length)));return n(e.update({selection:rd.create(r),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:e,dispatch:n})=>{let r=p8(e.selection,n=>{let r=c$(e),i=r.resolveStack(n.from,1);if(n.empty){let e=r.resolveStack(n.from,-1);e.node.from>=i.node.from&&e.node.to<=i.node.to&&(i=e)}for(let e=i;e;e=e.next){let{node:r}=e;if((r.from<n.from&&r.to>=n.to||r.to>n.to&&r.from<=n.from)&&e.next)return rd.range(r.to,r.from)}return n});return!r.eq(e.selection)&&(n(fe(e,r)),!0)},preventDefault:!0},{key:"Mod-[",run:fX},{key:"Mod-]",run:fW},{key:"Mod-Alt-\\",run:({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=Object.create(null),i=new cH(e,{overrideIndentation:e=>{let n=r[e];return null==n?-1:n}}),s=fq(e,(n,s,o)=>{let a=cG(i,n.from);if(null==a)return;/\S/.test(n.text)||(a=0);let l=/^\s*/.exec(n.text)[0],h=cY(e,a);(l!=h||o.from<n.from+l.length)&&(r[n.from]=a,s.push({from:n.from,to:n.from+l.length,insert:h}))});return s.changes.empty||n(e.update(s,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:e=>{if(e.state.readOnly)return!1;let{state:n}=e,r=n.changes(fj(n).map(({from:e,to:r})=>(e>0?e--:r<n.doc.length&&r++,{from:e,to:r}))),i=p8(n.selection,n=>{let r;if(e.lineWrapping){let i=e.lineBlockAt(n.head),s=e.coordsAtPos(n.head,n.assoc||1);s&&(r=i.bottom+e.documentTop-s.bottom+e.defaultLineHeight/2)}return e.moveVertically(n,!0,r)}).map(r);return e.dispatch({changes:r,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:e,dispatch:n})=>{let r,i;return r=!1,i=p8(e.selection,n=>{let i=uT(e,n.head,-1)||uT(e,n.head,1)||n.head>0&&uT(e,n.head-1,1)||n.head<e.doc.length&&uT(e,n.head+1,-1);if(!i||!i.end)return n;r=!0;let s=i.start.from==n.head?i.end.to:i.end.from;return rd.cursor(s)}),!!r&&(n(fe(e,i)),!0)}},{key:"Mod-/",run:e=>{let{state:n}=e,r=n.doc.lineAt(n.selection.main.from),i=pz(e.state,r.from);return i.line?pQ(e):!!i.block&&pV(e)}},{key:"Alt-A",run:pj},{key:"Ctrl-m",mac:"Shift-Alt-m",run:e=>(e.setTabFocusMode(),!0)}].concat([{key:"ArrowLeft",run:fs,shift:fv,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:e=>fa(e,!fi(e)),shift:e=>fx(e,!fi(e)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:e=>ft(e,n=>fm(e,n,!fi(e))),shift:e=>fy(e,n=>fm(e,n,!fi(e))),preventDefault:!0},{key:"ArrowRight",run:fo,shift:fb,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:e=>fa(e,fi(e)),shift:e=>fx(e,fi(e)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:e=>ft(e,n=>fm(e,n,fi(e))),shift:e=>fy(e,n=>fm(e,n,fi(e))),preventDefault:!0},{key:"ArrowUp",run:fc,shift:fS,preventDefault:!0},{mac:"Cmd-ArrowUp",run:fT,shift:fA},{mac:"Ctrl-ArrowUp",run:ff,shift:fC},{key:"ArrowDown",run:fu,shift:f_,preventDefault:!0},{mac:"Cmd-ArrowDown",run:fP,shift:fM},{mac:"Ctrl-ArrowDown",run:fg,shift:fE},{key:"PageUp",run:ff,shift:fC},{key:"PageDown",run:fg,shift:fE},{key:"Home",run:e=>ft(e,n=>fm(e,n,!1)),shift:e=>fy(e,n=>fm(e,n,!1)),preventDefault:!0},{key:"Mod-Home",run:fT,shift:fA},{key:"End",run:e=>ft(e,n=>fm(e,n,!0)),shift:e=>fy(e,n=>fm(e,n,!0)),preventDefault:!0},{key:"Mod-End",run:fP,shift:fM},{key:"Enter",run:fB,shift:fB},{key:"Mod-a",run:({state:e,dispatch:n})=>(n(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:f$,shift:f$},{key:"Delete",run:fR},{key:"Mod-Backspace",mac:"Alt-Backspace",run:fQ},{key:"Mod-Delete",mac:"Alt-Delete",run:e=>fL(e,!0)},{mac:"Mod-Backspace",run:e=>fN(e,n=>{let r=e.moveToLineBoundary(n,!1).head;return n.head>r?r:Math.max(0,n.head-1)})},{mac:"Mod-Delete",run:e=>fN(e,n=>{let r=e.moveToLineBoundary(n,!0).head;return n.head<r?r:Math.min(e.state.doc.length,n.head+1)})}].concat(fU.map(e=>({mac:e.key,run:e.run,shift:e.shift}))));var fG=({view:e})=>()=>e.state.sliceDoc(),fH=({view:e})=>n=>{let{state:r}=e;r.readOnly||e.dispatch(r.update({changes:{from:0,to:r.doc.length,insert:n??""}}))},fK=({view:e})=>()=>{e.focus()},fJ=({view:e})=>()=>{e.contentDOM.blur()},f0=({view:e})=>n=>{e.dispatch({selection:{head:n,anchor:n}})},f1=({view:e})=>()=>e.state.selection.main.head,f2=({view:e})=>({from:n,to:r,text:i,cursorOffset:s=0,userEvent:o})=>{let{state:a}=e;if(a.readOnly)return;let{main:l}=a.selection,h=n-l.from,c=r-l.from;e.dispatch({...e.state.changeByRange(e=>e!==l&&n!==r&&a.sliceDoc(e.from+h,e.from+c)!==a.sliceDoc(n,r)?{range:e}:{changes:{from:e.from+h,to:r===l.from?e.to:e.from+c,insert:i},range:rd.cursor(e.from+h+i.length+s)}),scrollIntoView:!0,userEvent:o})},f5=rV.define(),f4=()=>!0,f3=rx.define({create:()=>[],update(e,n){for(let e of n.effects)if(e.is(f5))return e.value;return e},provide:e=>rS.highest(aC.compute([e],n=>n.field(e).map(e=>({key:e,run:f4}))))}),f6=({view:e})=>n=>{e.dispatch({effects:f5.of(n)})},f9=({view:e})=>()=>{let{from:n,to:r,anchor:i,head:s}=e.state.selection.main;return{from:n,to:r,anchor:i,head:s}},f7=({view:e})=>n=>{let{state:r}=e;if(r.readOnly)return;let{from:i,to:s,text:o,cursorOffset:a=0,scrollIntoView:l=!0,userEvent:h}=n;e.dispatch({changes:{from:i,to:s,insert:o},selection:rd.cursor(i+o.length+a),scrollIntoView:l,userEvent:h})},f8=({view:e})=>()=>{pG({state:e.state,dispatch:e.dispatch})},ge=({view:e})=>()=>{pH({state:e.state,dispatch:e.dispatch})},gt=({view:e})=>n=>{let{from:r,to:i}=e.state.selection.main,s=n(e.state.sliceDoc(r,i));"string"==typeof s&&e.dispatch({changes:{from:r,to:i,insert:s},selection:rd.cursor(r+s.length)})},gn=e=>void 0===e?[]:aO.theme({"&":{fontSize:"number"==typeof e?`${e}px`:"inherit"}}),gr=e=>{var n;return n=e??"",[pu,pc.of(n)]},gi=e=>rU.readOnly.of(e??!1),gs=e=>aO.editable.of(e??!0),go=e=>void 0===e?[]:aO.theme({".cm-content, .cm-gutter, .cm-right-gutter":{minHeight:"number"==typeof e?`${e}px`:"string"==typeof e?e:"unset"}}),ga=e=>void 0===e?[]:aO.theme({".cm-scroller":{maxHeight:"number"==typeof e?`${e}px`:"string"==typeof e?e:"unset"}}),gl=e=>"string"==typeof e||"number"==typeof e?[rS.high(aO.theme({".cm-content, .cm-gutter, .cm-right-gutter":{minHeight:"number"==typeof e?`${e}px`:e}})),aO.theme({".cm-scroller":{height:"number"==typeof e?`${e}px`:e}})]:[],gh=e=>e.docChanged?{value:e.state.sliceDoc()}:lB,gc=rV.define(),gu=sG.fromClass(class{hasFocus;constructor(e){this.hasFocus=e.hasFocus}update(e){e.view.hasFocus!==this.hasFocus&&(this.hasFocus=e.view.hasFocus,queueMicrotask(()=>{e.view.dispatch({effects:gc.of(this.hasFocus)})}))}}),gd=e=>{for(let n of e.transactions)for(let e of n.effects)if(e.is(gc)&&!0===e.value)return;return lB},gp=e=>{for(let n of e.transactions)for(let e of n.effects)if(e.is(gc)&&!1===e.value)return;return lB},gf=e=>{if(!e.startState.selection.eq(e.state.selection)){let{from:n,to:r,anchor:i,head:s}=e.state.selection.main;return{selection:{from:n,to:r,head:s,anchor:i},update:e}}return lB},gg=[lX([f3,gu]),lF("fontSize",gn),lF("placeholder",gr),lF("readOnly",gi),lF("editable",gs),lF("lineWrapping",e=>e?aO.lineWrapping:[]),lF("height",gl),lF("minHeight",go),lF("maxHeight",ga),lZ("getValue",fG),lZ("setValue",fH),lZ("replaceText",f7),lZ("getCursorPosition",f1),lZ("setCursorPosition",f0),lZ("focus",fK),lZ("blur",fJ),lZ("disableKeybindings",f6),lZ("updateASTDecorations",({view:e})=>()=>{dg(e)}),lZ("undo",f8),lZ("redo",ge),lZ("transformTextInSelection",gt),lZ("getSelection",f9),lZ("getLineInfoAtPosition",({view:e})=>n=>e.state.doc.lineAt(n)),lq("selectionChange",gf),lq("change",gh),lq("focus",gd),lq("blur",gp),lW("mousedown"),lW("mouseup")];let gm=(e,n)=>{let r,{o:i,i:s,u:o}=e,a=i,l=(e,n)=>{let i=a,l=n||(s?!s(i,e):i!==e);return(l||o)&&(a=e,r=i),[a,l,r]};return[n?e=>l(n(a,r),e):l,e=>[a,!!e,r]]},gy="undefined"!=typeof window&&"undefined"!=typeof HTMLElement&&window.document?window:{},gO=Math.max,gv=Math.min,gb=Math.round,gx=Math.abs,gw=Math.sign,gS=gy.cancelAnimationFrame,g_=gy.requestAnimationFrame,gk=gy.setTimeout,gC=gy.clearTimeout,gE=e=>void 0!==gy[e]?gy[e]:void 0,gT=gE("MutationObserver"),gP=gE("IntersectionObserver"),gA=gE("ResizeObserver"),gM=gE("ScrollTimeline"),gN=e=>Array.isArray(e),gD=e=>"object"==typeof e&&!gN(e)&&null!==e,gI=e=>{let n=!!e&&e.length;return!(!gN(e)&&("function"==typeof e||!("number"==typeof n&&n>-1&&n%1==0)))&&(!(n>0&&gD(e))||n-1 in e)},g$=e=>!!e&&e.constructor===Object,gR=()=>performance.now(),gL=(e,n,r,i,s)=>{let o=0,a=gR(),l=gO(0,r),h=r=>{let c=gR(),u=c-a>=l,d=r?1:1-(gO(0,a+l-c)/l||0),p=(n-e)*("function"==typeof s?s(d,d*l,0,1,l):d)+e,f=u||1===d;i&&i(p,d,f),o=f?0:g_(()=>h())};return h(),e=>{gS(o),e&&h(e)}};function gQ(e,n){if(gI(e))for(let r=0;r<e.length&&!1!==n(e[r],r,e);r++);else e&&gQ(Object.keys(e),r=>n(e[r],r,e));return e}let gj=(e,n)=>e.indexOf(n)>=0,gV=(e,n)=>e.concat(n),gz=(e,n,r)=>("string"!=typeof n&&gI(n)?Array.prototype.push.apply(e,n):e.push(n),e),gB=e=>Array.from(e||[]),gF=e=>gN(e)?e:"string"!=typeof e&&gI(e)?gB(e):[e],gZ=e=>!!e&&!e.length,gq=e=>gB(new Set(e)),gW=(e,n,r)=>{gQ(e,e=>!e||e.apply(void 0,n||[])),r||(e.length=0)},gX="paddingTop",gU="paddingRight",gY="paddingLeft",gG="paddingBottom",gH="marginLeft",gK="marginRight",gJ="marginBottom",g0="overflowX",g1="overflowY",g2="width",g5="height",g4="visible",g3="hidden",g6="scroll",g9=(e,n,r,i)=>{if(e&&n){let i=!0;return gQ(r,r=>{e[r]!==n[r]&&(i=!1)}),i}return!1},g7=(e,n)=>g9(e,n,["w","h"]),g8=(e,n)=>g9(e,n,["x","y"]),me=(e,n)=>g9(e,n,["t","r","b","l"]),mt=(e,...n)=>e.bind(0,...n),mn=e=>{let n,r=e?gk:g_,i=e?gC:gS;return[s=>{i(n),n=r(()=>s(),"function"==typeof e?e():e)},()=>i(n)]},mr=e=>{let n="function"==typeof e?e():e;if("number"==typeof n){let e=n?gk:g_,r=n?gC:gS;return i=>{let s=e(()=>i(),n);return()=>{r(s)}}}return n&&n._},mi=(e,n)=>{let r,i,s,o,{p:a,v:l,S:h,m:c}=n||{},u=function(n){i&&i(),r&&r(),o=i=r=s=void 0,e.apply(this,n)},d=e=>c&&s?c(s,e):e,p=()=>{i&&s&&u(d(s)||s)},f=function(){let e=gB(arguments),n=mr(a);if(n){let a=mr(l),c=d(e)||e,f=u.bind(0,c);i&&i(),h&&!o?(f(),o=!0,i=n(()=>o=void 0)):(i=n(f),a&&!r&&(r=a(p))),s=c}else u(e)};return f.O=p,f},ms=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),mo=e=>e?Object.keys(e):[],ma=(e,n,r,i,s,o,a)=>(("object"!=typeof e||null===e)&&"function"!=typeof e&&(e={}),gQ([n,r,i,s,o,a],n=>{gQ(n,(r,i)=>{let s=n[i];if(e===s)return!0;let o=gN(s);if(s&&g$(s)){let n=e[i],r=n;o&&!gN(n)?r=[]:o||g$(n)||(r={}),e[i]=ma(r,s)}else e[i]=o?s.slice():s})}),e),ml=(e,n)=>gQ(ma({},e),(e,n,r)=>{void 0===e?delete r[n]:e&&g$(e)&&(r[n]=ml(e))}),mh=e=>!mo(e).length,mc=()=>{},mu=(e,n,r)=>gO(e,gv(n,r)),md=e=>gq((gN(e)?e:(e||"").split(" ")).filter(e=>e)),mp=(e,n)=>e&&e.getAttribute(n),mf=(e,n)=>e&&e.hasAttribute(n),mg=(e,n,r)=>{gQ(md(n),n=>{e&&e.setAttribute(n,String(r||""))})},mm=(e,n)=>{gQ(md(n),n=>e&&e.removeAttribute(n))},my=(e,n)=>{let r=md(mp(e,n)),i=mt(mg,e,n),s=(e,n)=>{let i=new Set(r);return gQ(md(e),e=>{i[n](e)}),gB(i).join(" ")};return{C:e=>i(s(e,"delete")),$:e=>i(s(e,"add")),H:e=>{let n=md(e);return n.reduce((e,n)=>e&&r.includes(n),n.length>0)}}},mO=(e,n,r)=>(my(e,n).C(r),mt(mv,e,n,r)),mv=(e,n,r)=>(my(e,n).$(r),mt(mO,e,n,r)),mb=(e,n,r,i)=>(i?mv:mO)(e,n,r),mx=(e,n,r)=>my(e,n).H(r),mw=e=>my(e,"class"),mS=(e,n)=>{mw(e).C(n)},m_=(e,n)=>(mw(e).$(n),mt(mS,e,n)),mk=(e,n)=>{let r=n?n instanceof Element&&n:document;return r?gB(r.querySelectorAll(e)):[]},mC=(e,n)=>e instanceof Element&&e.matches(n),mE=e=>mC(e,"body"),mT=e=>e?gB(e.childNodes):[],mP=(e,n)=>e instanceof Element&&e.closest(n),mA=e=>{gQ(gF(e),e=>{let n=e&&e.parentElement;e&&n&&n.removeChild(e)})},mM=(e,n)=>mt(mA,e&&n&&gQ(gF(n),n=>{n&&e.appendChild(n)})),mN=e=>{let n=document.createElement("div");return mg(n,"class",e),n},mD=e=>{let n=mN(),r=o,i=e.trim();return n.innerHTML=r?r.createHTML(i):i,gQ(mT(n),e=>mA(e))},mI=(e,n)=>e.getPropertyValue(n)||e[n]||"",m$=e=>{let n=e||0;return isFinite(n)?n:0},mR=e=>m$(parseFloat(e||"")),mL=e=>Math.round(1e4*e)/1e4,mQ=e=>`${mL(m$(e))}px`;function mj(e,n){e&&n&&gQ(n,(n,r)=>{try{let i=e.style,s=null===n||"boolean"==typeof n?"":"number"==typeof n?mQ(n):n;0===r.indexOf("--")?i.setProperty(r,s):i[r]=s}catch(e){}})}function mV(e,n,r){let i="string"==typeof n,s=i?"":{};if(e){let o=gy.getComputedStyle(e,r)||e.style;s=i?mI(o,n):gB(n).reduce((e,n)=>(e[n]=mI(o,n),e),s)}return s}let mz=(e,n,r)=>{let i=n?`${n}-`:"",s=r?`-${r}`:"",o=`${i}top${s}`,a=`${i}right${s}`,l=`${i}bottom${s}`,h=`${i}left${s}`,c=mV(e,[o,a,l,h]);return{t:mR(c[o]),r:mR(c[a]),b:mR(c[l]),l:mR(c[h])}},mB=(e,n)=>`translate${gD(e)?`(${e.x},${e.y})`:`${n?"X":"Y"}(${e})`}`,mF={w:0,h:0},mZ=(e,n)=>n?{w:n[`${e}Width`],h:n[`${e}Height`]}:mF,mq=mt(mZ,"offset"),mW=mt(mZ,"client"),mX=mt(mZ,"scroll"),mU=e=>{let n=parseFloat(mV(e,g2))||0,r=parseFloat(mV(e,g5))||0;return{w:n-gb(n),h:r-gb(r)}},mY=e=>e.getBoundingClientRect(),mG=e=>!!(e&&(e[g5]||e[g2])),mH=(e,n)=>{let r=mG(e);return!mG(n)&&r},mK=(e,n,r,i)=>{gQ(md(n),n=>{e&&e.removeEventListener(n,r,i)})},mJ=(e,n,r,i)=>{var s;let o=null==(s=i&&i.T)||s,a=i&&i.I||!1,l=i&&i.A||!1,h={passive:o,capture:a};return mt(gW,md(n).map(n=>{let i=l?s=>{mK(e,n,i,a),r&&r(s)}:r;return e&&e.addEventListener(n,i,h),mt(mK,e,n,i,a)}))},m0=e=>e.stopPropagation(),m1=e=>e.preventDefault(),m2=e=>m0(e)||m1(e),m5=(e,n)=>{let{x:r,y:i}="number"==typeof n?{x:n,y:n}:n||{};"number"==typeof r&&(e.scrollLeft=r),"number"==typeof i&&(e.scrollTop=i)},m4=e=>({x:e.scrollLeft,y:e.scrollTop}),m3=()=>({D:{x:0,y:0},M:{x:0,y:0}}),m6=({D:e,M:n})=>{let r=(e,n)=>0===e&&e<=n;return{x:r(e.x,n.x),y:r(e.y,n.y)}},m9=({D:e,M:n},r)=>{let i=(e,n,r)=>mu(0,1,(e-r)/(e-n)||0);return{x:i(e.x,n.x,r.x),y:i(e.y,n.y,r.y)}},m7=e=>{e&&e.focus&&e.focus({preventScroll:!0})},m8=(e,n)=>{gQ(gF(n),e)},ye=e=>{let n=new Map,r=(e,r)=>{if(e){let i=n.get(e);m8(e=>{i&&i[e?"delete":"clear"](e)},r)}else n.forEach(e=>{e.clear()}),n.clear()},i=(e,s)=>{if("string"==typeof e){let i=n.get(e)||new Set;return n.set(e,i),m8(e=>{"function"==typeof e&&i.add(e)},s),mt(r,e,s)}"boolean"==typeof s&&s&&r();let o=mo(e),a=[];return gQ(o,n=>{let r=e[n];r&&gz(a,i(n,r))}),mt(gW,a)};return i(e||{}),[i,r,(e,r)=>{gQ(gB(n.get(e)),e=>{r&&!gZ(r)?e.apply(0,r):e()})}]},yt={},yn={},yr=(e,n,r)=>mo(e).map(i=>{let{static:s,instance:o}=e[i],[a,l,h]=r||[],c=r?o:s;if(c){let e=r?c(a,l,n):c(n);return(h||yn)[i]=e}}),yi=e=>yn[e],ys="data-overlayscrollbars",yo="os-environment",ya=`${yo}-scrollbar-hidden`,yl=`${ys}-initialize`,yh="noClipping",yc=`${ys}-body`,yu=`${ys}-viewport`,yd="arrange",yp="measuring",yf="scrollbarHidden",yg=`${ys}-padding`,ym=`${ys}-content`,yy="os-size-observer",yO=`${yy}-appear`,yv=`${yy}-listener`,yb=`${yv}-scroll`,yx=`${yv}-item`,yw=`${yx}-final`,yS="os-scrollbar",y_=`${yS}-rtl`,yk=`${yS}-horizontal`,yC=`${yS}-vertical`,yE=`${yS}-track`,yT=`${yS}-handle`,yP=`${yS}-visible`,yA=`${yS}-cornerless`,yM=`${yS}-interaction`,yN=`${yS}-unusable`,yD=`${yS}-auto-hide`,yI=`${yD}-hidden`,y$=`${yS}-wheel`,yR=`${yE}-interactive`,yL=`${yT}-interactive`,yQ="__osSizeObserverPlugin",yj=(e,n)=>{let{k:r}=n,[i,s]=e("showNativeOverlaidScrollbars");return[i&&r.x&&r.y,s]},yV=e=>0===e.indexOf(g4),yz=(e,n)=>{if("auto"===e)return n?g6:g3;let r=e||g3;return[g3,g6,g4].includes(r)?r:g3},yB=(e,n)=>{let{overflowX:r,overflowY:i}=mV(e,[g0,g1]);return{x:yz(r,n.x),y:yz(i,n.y)}},yF="__osScrollbarsHidingPlugin",yZ="__osClickScrollPlugin",yq=e=>JSON.stringify(e,(e,n)=>{if("function"==typeof n)throw 0;return n}),yW=(e,n)=>e?`${n}`.split(".").reduce((e,n)=>e&&ms(e,n)?e[n]:void 0,e):void 0,yX={paddingAbsolute:!1,showNativeOverlaidScrollbars:!1,update:{elementEvents:[["img","load"]],debounce:[0,33],attributes:null,ignoreMutation:null},overflow:{x:"scroll",y:"scroll"},scrollbars:{theme:"os-theme-dark",visibility:"auto",autoHide:"never",autoHideDelay:1300,autoHideSuspend:!1,dragScroll:!0,clickScroll:!1,pointers:["mouse","touch","pen"]}},yU=(e,n)=>{let r={};return gQ(gV(mo(n),mo(e)),i=>{let s=e[i],o=n[i];if(gD(s)&&gD(o))ma(r[i]={},yU(s,o)),mh(r[i])&&delete r[i];else if(ms(n,i)&&o!==s){let e=!0;if(gN(s)||gN(o))try{yq(s)===yq(o)&&(e=!1)}catch(e){}e&&(r[i]=o)}}),r},yY=(e,n,r)=>i=>[yW(e,i),r||void 0!==yW(n,i)],yG=()=>(l||(l=(()=>{let e=(e,n,r)=>{mM(document.body,e),mM(document.body,e);let i=mW(e),s=mq(e),o=mU(n);return r&&mA(e),{x:s.h-i.h+o.h,y:s.w-i.w+o.w}},n=`.${yo}{scroll-behavior:auto!important;position:fixed;opacity:0;visibility:hidden;overflow:scroll;height:200px;width:200px;z-index:-1}.${yo} div{width:200%;height:200%;margin:10px 0}.${ya}{scrollbar-width:none!important}.${ya}::-webkit-scrollbar,.${ya}::-webkit-scrollbar-corner{appearance:none!important;display:none!important;width:0!important;height:0!important}`,r=mD(`<div class="${yo}"><div></div><style>${n}</style></div>`)[0],i=r.firstChild,s=r.lastChild,o=a;o&&(s.nonce=o);let[l,,h]=ye(),[c,u]=gm({o:e(r,i),i:g8},mt(e,r,i,!0)),[d]=u(),p=(e=>{let n=!1,r=m_(e,ya);try{n="none"===mV(e,"scrollbar-width")||"none"===mV(e,"display","::-webkit-scrollbar")}catch(e){}return r(),n})(r),f={x:0===d.x,y:0===d.y},g={elements:{host:null,padding:!p,viewport:e=>p&&mE(e)&&e,content:!1},scrollbars:{slot:!0},cancel:{nativeScrollbarsOverlaid:!1,body:null}},m=ma({},yX),y=mt(ma,{},m),O=mt(ma,{},g),b={P:d,k:f,U:p,J:!!gM,G:mt(l,"r"),K:O,Z:e=>ma(g,e)&&O(),tt:y,nt:e=>ma(m,e)&&y(),ot:ma({},g),st:ma({},m)};if(mm(r,"style"),mA(r),mJ(gy,"resize",()=>{h("r",[])}),"function"==typeof gy.matchMedia&&!p&&(!f.x||!f.y)){let e=n=>{mJ(gy.matchMedia(`(resolution: ${gy.devicePixelRatio}dppx)`),"change",()=>{n(),e(n)},{A:!0})};e(()=>{let[e,n]=c();ma(b.P,e),h("r",[n])})}return b})()),l),yH=(e,n,r,i)=>{let s=!1,{et:o,ct:a,rt:l,it:h,lt:c,ut:u}=i||{},d=mi(()=>s&&r(!0),{p:33,v:99}),[p,f]=((e,n,r)=>{let i=!1,s=!!r&&new WeakMap,o=o=>{s&&r&&gQ(r.map(n=>{let[r,i]=n||[];return[i&&r?(o||mk)(r,e):[],i]}),r=>gQ(r[0],o=>{let a=r[1],l=s.get(o)||[];if(e.contains(o)&&a){let e=mJ(o,a,r=>{i?(e(),s.delete(o)):n(r)});s.set(o,gz(l,e))}else gW(l),s.delete(o)}))};return o(),[()=>{i=!0},o]})(e,d,l),g=a||[],m=gV(o||[],g),y=(s,o)=>{if(!gZ(o)){let a=c||mc,l=u||mc,d=[],p=[],m=!1,y=!1;if(gQ(o,r=>{let{attributeName:s,target:o,type:c,oldValue:u,addedNodes:f,removedNodes:O}=r,b="attributes"===c,x=e===o,w=b&&s,S=w&&mp(o,s||""),_="string"==typeof S?S:null,k=w&&u!==_,C=gj(g,s)&&k;if(n&&("childList"===c||!x)){let n=b&&k,c=n&&h&&mC(o,h),p=(c?!a(o,s,u,_):!b||n)&&!l(r,!!c,e,i);gQ(f,e=>gz(d,e)),gQ(O,e=>gz(d,e)),y=y||p}!n&&x&&k&&!a(o,s,u,_)&&(gz(p,s),m=m||C)}),f(e=>gq(d).reduce((n,r)=>(gz(n,mk(e,r)),mC(r,e)?gz(n,r):n),[])),n)return!s&&y&&r(!1),[!1];if(!gZ(p)||m){let e=[gq(p),m];return s||r.apply(0,e),e}}},O=new gT(mt(y,!1));return[()=>(O.observe(e,{attributes:!0,attributeOldValue:!0,attributeFilter:m,subtree:n,childList:n,characterData:n}),s=!0,()=>{s&&(p(),O.disconnect(),s=!1)}),()=>{if(s)return d.O(),y(!0,O.takeRecords())}]},yK=null,yJ=(e,n,r)=>{let{ft:i}=r||{},s=yi(yQ),[o]=gm({o:!1,u:!0});return()=>{let r=[],a=mD(`<div class="${yy}"><div class="${yv}"></div></div>`)[0],l=a.firstChild,h=e=>{let r=gN(e)&&!gZ(e),i=!1,s=!1;if(r){let[n,,r]=o(e[0].contentRect),a=mG(n);i=!(s=mH(n,r))&&!a}else s=!0===e;i||n({_t:!0,ft:s})};if(gA){if("boolean"!=typeof yK){let n=new gA(mc);n.observe(e,{get box(){yK=!0}}),yK=yK||!1,n.disconnect()}let n=mi(h,{p:0,v:0}),i=e=>n(e),s=new gA(i);if(s.observe(yK?e:l),gz(r,[()=>{s.disconnect()},!yK&&mM(e,a)]),yK){let n=new gA(i);n.observe(e,{box:"border-box"}),gz(r,()=>n.disconnect())}}else{if(!s)return mc;let[n,o]=s(l,h,i);gz(r,gV([m_(a,yO),mJ(a,"animationstart",n),mM(e,a)],o))}return mt(gW,r)}},y0=(e,n)=>"function"==typeof n?n.apply(0,e):n,y1=(e,n,r,i)=>y0(e,void 0===i?r:i)||n.apply(0,e),y2=(e,n,r,i)=>{let s=y0(e,void 0===i?r:i);return!!s&&(s instanceof HTMLElement?s:n.apply(0,e))},y5=new WeakMap,y4=e=>y5.get(e),y3=(e,n,r)=>{let{tt:i}=yG(),s=e instanceof HTMLElement,o=s?e:e.target,a=y4(o);if(n&&!a){let a=!1,l=[],h={},c=e=>{let n=ml(e),r=yi("__osOptionsValidationPlugin");return r?r(n,!0):n},u=ma({},i(),c(n)),[d,p,f]=ye(),[g,m,y]=ye(r),O=(e,n)=>{y(e,n),f(e,n)},[b,x,w,S,_]=((e,n,r,i,s)=>{let o=!1,a=yY(n,{}),[l,h,c,u,d]=(e=>{let[n,r,i]=(e=>{let{K:n,U:r}=yG(),{elements:i}=n(),{padding:s,viewport:o,content:a}=i,l=e instanceof HTMLElement,h=l?{}:e,{elements:c}=h,{padding:u,viewport:d,content:p}=c||{},f=l?e:h.target,g=mE(f),m=f.ownerDocument,y=m.documentElement,O=()=>m.defaultView||gy,b=mt(y1,[f]),x=mt(y2,[f]),w=mt(mN,""),S=mt(b,w,o),_=mt(x,w,a),k=S(d),C=k===f,E=C&&g,T=!C&&_(p),P=E?y:k,A=E?P:f,M=!C&&x(w,s,u),N=!(!C&&k===T)&&T,D=[N,P,M,A].map(e=>e instanceof HTMLElement&&!(e&&e.parentElement)&&e),I=e=>e&&gj(D,e),$=!I(P)&&(e=>{let n=mq(e),r=mX(e),i=mV(e,g0),s=mV(e,g1);return r.w-n.w>0&&!yV(i)||r.h-n.h>0&&!yV(s)})(P)?P:f,R=E?y:P,L=E?m:P,Q={dt:f,vt:A,L:P,rn:M,ht:N,gt:R,Kt:L,ln:g?y:$,Gt:m,bt:g,At:l,V:C,an:O,wt:e=>mx(P,yu,e),yt:(e,n)=>mb(P,yu,e,n),St:()=>mb(R,yu,"scrolling",!0)},{dt:j,vt:V,rn:z,L:B,ht:F}=Q,Z=[()=>{mm(V,[ys,yl]),mm(j,yl),g&&mm(y,[yl,ys])}],q=mT([F,B,z,V,j].find(e=>e&&!I(e))),W=E?j:F||B,X=mt(gW,Z);return[Q,()=>{let e=O(),n=document.activeElement,i=e=>{mM(e&&e.parentElement,mT(e)),mA(e)},s=e=>mJ(e,"focusin focusout focus blur",m2,{I:!0,T:!1}),o="tabindex",a=mp(B,o),l=s(n);return mg(V,ys,C?"":"host"),mg(z,yg,""),mg(B,yu,""),mg(F,ym,""),!C&&(mg(B,o,a||"-1"),g&&mg(y,yc,"")),mM(W,q),mM(V,z),mM(z||V,!C&&B),mM(B,F),gz(Z,[l,()=>{let e=document.activeElement,n=I(B),r=n&&e===B?j:e,l=s(r);mm(z,yg),mm(F,ym),mm(B,yu),g&&mm(y,yc),a?mg(B,o,a):mm(B,o),I(F)&&i(F),n&&i(B),I(z)&&i(z),m7(r),l()}]),r&&!C&&(mv(B,yu,yf),gz(Z,mt(mm,B,yu))),m7(!C&&g&&n===j&&e.top===e?B:n),l(),q=0,X},X]})(e),s={rn:{t:0,r:0,b:0,l:0},fn:!1,F:{[gK]:0,[gJ]:0,[gH]:0,[gX]:0,[gU]:0,[gG]:0,[gY]:0},Vt:{x:0,y:0},Rt:{x:0,y:0},cn:{x:g3,y:g3},j:{x:!1,y:!1},Dt:m3()},{dt:o,gt:a,V:l,St:h}=n,{U:c,k:u}=yG(),d=!c&&(u.x||u.y),p=[(({ht:e})=>({Qt:n,un:r,It:i})=>{let{$t:s}=n||{},{Ot:o}=r;e&&(s||i)&&mj(e,{[g5]:o&&"100%"})})(n),(({vt:e,rn:n,L:r,V:i},s)=>{let[o,a]=gm({i:me,o:mz()},mt(mz,e,"padding",""));return({zt:e,Qt:l,un:h,It:c})=>{let[u,d]=a(c),{U:p}=yG(),{_t:f,xt:g,Ct:m}=l||{},{B:y}=h,[O,b]=e("paddingAbsolute"),x=c||g;(f||d||x)&&([u,d]=o(c));let w=!i&&(b||m||d);if(w){let e=!O||!n&&!p,i=u.r+u.l,o=u.t+u.b,a={[gK]:e&&!y?-i:0,[gJ]:e?-o:0,[gH]:e&&y?-i:0,top:e?-u.t:0,right:e?y?-u.r:"auto":0,left:e?y?"auto":-u.l:0,[g2]:e&&`calc(100% + ${i}px)`},l={[gX]:e?u.t:0,[gU]:e?u.r:0,[gG]:e?u.b:0,[gY]:e?u.l:0};mj(n||r,a),mj(r,l),ma(s,{rn:u,fn:!e,F:n?l:ma({},a,l)})}return{_n:w}}})(n,s),((e,n)=>{let r=yG(),{vt:i,rn:s,L:o,V:a,Kt:l,gt:h,bt:c,yt:u,an:d}=e,{U:p}=r,f=c&&a,g=mt(gO,0),m={display:()=>!1,direction:e=>"ltr"!==e,flexDirection:e=>e.endsWith("-reverse"),writingMode:e=>"horizontal-tb"!==e},y=mo(m),O={i:g7,o:{w:0,h:0}},b={i:g8,o:{}},x=e=>{u(yp,!f&&e)},[w,S]=gm(O,mt(mU,o)),[_,k]=gm(O,mt(mX,o)),[C,E]=gm(O),[T]=gm(b),[P,A]=gm(O),[M]=gm(b),[N]=gm({i:(e,n)=>g9(e,n,y),o:{}},()=>o&&(o.offsetWidth||o.offsetHeight||o.getClientRects().length)?mV(o,y):{}),[D,I]=gm({i:(e,n)=>g8(e.D,n.D)&&g8(e.M,n.M),o:m3()}),$=yi(yF),R=(e,n)=>{let r=n?g0:g1;return`${r}${(e=>{let n=String(e||"");return n?n[0].toUpperCase()+n.slice(1):""})(e)}`};return({zt:a,Qt:c,un:O,It:b},{_n:L})=>{let{_t:Q,Ht:j,xt:V,Ct:z,ft:B,Et:F}=c||{},{X:Z,Y:q,W:W}=$&&$.R(e,n,O,r,a)||{},[X,U]=yj(a,r),[Y,G]=a("overflow"),H=yV(Y.x),K=yV(Y.y),J=Q||L||V||z||F||U,ee=S(b),et=k(b),en=E(b),er=A(b);if(U&&p&&u(yf,!X),J){mx(i,ys,yh)&&x(!0);let e=q&&q(),[n]=ee=w(b),[r]=et=_(b),s=mW(o),a=f&&mZ("inner",d()||gy),l={w:g(r.w+n.w),h:g(r.h+n.h)},h={w:g((a?a.w:s.w+g(s.w-r.w))+n.w),h:g((a?a.h:s.h+g(s.h-r.h))+n.h)};e&&e(),er=P(h),en=C(((e,n)=>{let r=+(gy.devicePixelRatio%1!=0),i={w:g(e.w-n.w),h:g(e.h-n.h)};return{w:i.w>r?i.w:0,h:i.h>r?i.h:0}})(l,h),b)}let[ei,es]=er,[eo,ea]=en,[el,eh]=et,[ec,eu]=ee,[ed,ep]=T({x:eo.w>0,y:eo.h>0}),ef=H&&K&&(ed.x||ed.y)||H&&ed.x&&!ed.y||K&&ed.y&&!ed.x,eg=L||z||F||eu||eh||es||ea||G||U||J||j&&f,[em,ey]=N(b),[eO,ev]=z||B||ey||ep||b?D((e=>{if(!y.some(n=>{let r=e[n];return r&&m[n](r)}))return{D:{x:0,y:0},M:{x:1,y:1}};x(!0);let n=m4(h),r=u("noContent",!0),i=mJ(l,g6,e=>{let r=m4(h);e.isTrusted&&r.x===n.x&&r.y===n.y&&m0(e)},{I:!0,A:!0});m5(h,{x:0,y:0}),r();let s=m4(h),o=mX(h);m5(h,{x:o.w,y:o.h});let a=m4(h);m5(h,{x:a.x-s.x<1&&-o.w,y:a.y-s.y<1&&-o.h});let c=m4(h);return m5(h,n),g_(()=>i()),{D:s,M:c}})(em),b):I(),eb=((e,n)=>{let r=(e,n,r,i)=>{let s=e===g4?g3:e.replace(`${g4}-`,""),o=yV(e),a=yV(r);if(!n&&!i)return g3;if(o&&a)return g4;if(o){let e=n?g4:g3;return n&&i?s:e}let l=a&&i?g4:g3;return n?s:l};return{x:r(n.x,e.x,n.y,e.y),y:r(n.y,e.y,n.x,e.x)}})(ed,Y);if(x(!1),eg){var ex=eb;let e=e=>[g4,g3,g6].map(n=>R(yz(n),e));u(e(!0).concat(e()).join(" ")),u(mo(ex).map(e=>R(ex[e],"x"===e)).join(" "),!0),eb=yB(o,ed),W&&Z&&(Z(eb,el,ec),mj(o,W(eb)))}let[ew,eS]=M(eb);return mb(i,ys,yh,ef),mb(s,yg,yh,ef),ma(n,{cn:ew,Vt:{x:ei.w,y:ei.h},Rt:{x:eo.w,y:eo.h},j:ed,Dt:((e,n)=>{let{D:r,M:i}=e,{w:s,h:o}=n,a=(e,n,r)=>{let i=gw(e)*r,s=gw(n)*r;if(i===s){let r=gx(e),o=gx(n);s=r>o?0:s,i=r<o?0:i}return[(i=i===s?0:i)+0,s+0]},[l,h]=a(r.x,i.x,s),[c,u]=a(r.y,i.y,o);return{D:{x:l,y:c},M:{x:h,y:u}}})(eO,eo)}),{sn:eS,tn:es,nn:ea,en:ev||ea}}})(n,s)];return[r,e=>{let n={},r=d&&m4(a),i=r&&h();return gQ(p,r=>{ma(n,r(e,n)||{})}),m5(a,r),i&&i(),l||m5(o,0),n},s,n,i]})(e),[p,f,g]=((e,n,r,i)=>{let s,o,a,l,h,c,u=`[${ys}]`,d=`[${yu}]`,p=["id","class","style","open","wrap","cols","rows"],{dt:f,vt:g,L:m,gt:y,ht:O,V:b,bt:x,wt:w,yt:S,St:_}=e,k=e=>"rtl"===mV(e,"direction"),C={Ot:!1,B:k(f)},E=yG(),T=yi(yF),[P]=gm({i:g7,o:{w:0,h:0}},()=>{let i=T&&T.R(e,n,C,E,r).Y,s=!(x&&b)&&mx(g,ys,yh),o=!b&&w(yd),a=o&&m4(y),l=a&&_(),h=S(yp,s),c=o&&i&&i(),u=mX(m),d=mU(m);return c&&c(),m5(y,a),l&&l(),s&&h(),{w:u.w+d.w,h:u.h+d.h}}),A=mi(i,{p:()=>s,v:()=>o,m(e,n){let[r]=e,[i]=n;return[gV(mo(r),mo(i)).reduce((e,n)=>(e[n]=r[n]||i[n],e),{})]}}),M=e=>{let n=k(f);ma(e,{Ct:c!==n}),ma(C,{B:n}),c=n},N=(e,n)=>{let[r,s]=e,o={$t:s};return ma(C,{Ot:r}),n||i(o),o},D=({_t:e,ft:n})=>{let r=!(e&&!n)&&E.U?A:i,s={_t:e||n,ft:n};M(s),r(s)},I=(e,n)=>{let[,r]=P(),s={xt:r};M(s);let o=e?i:A;return r&&!n&&o(s),s},$=(e,n,r)=>{let i={Ht:n};return M(i),n&&!r&&A(i),i},[R,L]=O?((e,n)=>{let r,i=mN("os-trinsic-observer"),[s]=gm({o:!1}),o=(e,r)=>{if(e){let i=s(0===e.h||e.isIntersecting||e.intersectionRatio>0),[,o]=i;return o&&!r&&n(i)&&[i]}},a=(e,n)=>o(n.pop(),e);return[()=>{let n=[];if(gP)(r=new gP(mt(a,!1),{root:e})).observe(i),gz(n,()=>{r.disconnect()});else{let e=()=>{o(mq(i))};gz(n,yJ(i,e)()),e()}return mt(gW,gz(n,mM(e,i)))},()=>r&&a(!0,r.takeRecords())]})(g,N):[],Q=!b&&yJ(g,D,{ft:!0}),[j,V]=yH(g,!1,$,{ct:p,et:p}),z=b&&gA&&new gA(e=>{let n=e[e.length-1].contentRect;D({_t:!0,ft:mH(n,h)}),h=n}),B=mi(()=>{let[,e]=P();i({xt:e,_t:x})},{p:222,S:!0});return[()=>{z&&z.observe(g);let e=Q&&Q(),n=R&&R(),r=j(),i=E.G(e=>{e?A({Et:e}):B()});return()=>{z&&z.disconnect(),e&&e(),n&&n(),l&&l(),r(),i()}},({zt:e,Tt:n,It:r})=>{let i={},[h]=e("update.ignoreMutation"),[c,f]=e("update.attributes"),[g,y]=e("update.elementEvents"),[x,w]=e("update.debounce"),S=n||r;if(y||f){a&&a(),l&&l();let[e,n]=yH(O||m,!0,I,{et:gV(p,c||[]),rt:g,it:u,ut:(e,n)=>{let r,{target:i,attributeName:s}=e;return!n&&!!s&&!b&&((e,n,r)=>{let i=mP(e,n),s=e&&((e,n)=>{let r=n?n instanceof Element&&n:document;return r&&r.querySelector(e)})(r,i),o=mP(s,n)===i;return!!i&&!!s&&(i===e||s===e||o&&mP(mP(e,r),n)!==i)})(i,u,d)||!!mP(i,`.${yS}`)||(r=e,!!("function"==typeof h&&h(r)))}});l=e(),a=n}if(w)if(A.O(),gN(x)){let e=x[0],n=x[1];s="number"==typeof e&&e,o="number"==typeof n&&n}else"number"==typeof x?s=x:s=!1,o=!1;if(S){let e=V(),n=L&&L(),r=a&&a();e&&ma(i,$(e[0],e[1],S)),n&&ma(i,N(n[0],S)),r&&ma(i,I(r[0],S))}return M(i),i},C]})(u,c,a,e=>{x({},e)}),[m,y,,O]=((e,n,r,i,s,o)=>{let a,l,h,c,u,d,p=mc,f=0,g=["mouse","pen"],m=e=>g.includes(e.pointerType),[y,O]=mn(),[b,x]=mn(100),[w,S]=mn(100),[_,k]=mn(()=>f),[C,E]=((e,n,r,i)=>{let{K:s}=yG(),{scrollbars:o}=s(),{slot:a}=o,{dt:l,vt:h,L:c,At:u,gt:d,bt:p,V:f}=n,{scrollbars:g}=u?{}:e,{slot:m}=g||{},y=[],O=[],b=[],x=y2([l,h,c],()=>f&&p?l:h,a,m),w=e=>{if(gM){let n=null,i=[],s=new gM({source:d,axis:e}),o=()=>{n&&n.cancel(),n=null};return{kt:a=>{let{Dt:l}=r,h=m6(l)[e],c="x"===e,u=[mB(0,c),mB(`calc(100cq${c?"w":"h"} + -100%)`,c)],d=h?u:u.reverse();return i[0]===d[0]&&i[1]===d[1]||(o(),i=d,n=a.Mt.animate({clear:["left"],transform:d},{timeline:s})),o}}}},S={x:w("x"),y:w("y")},_=(e,n,r)=>{let i=r?m_:mS;gQ(e,e=>{i(e.Lt,n)})},k=(e,n)=>{gQ(e,e=>{let[r,i]=n(e);mj(r,i)})},C=(e,n,r)=>{let i="boolean"==typeof r;(!i||r)&&_(O,e,n),i&&r||_(b,e,n)},E=e=>{let n=e?"x":"y",r=mN(`${yS} ${e?yk:yC}`),s=mN(yE),o=mN(yT),a={Lt:r,Ut:s,Mt:o},l=S[n];return gz(e?O:b,a),gz(y,[mM(r,s),mM(s,o),mt(mA,r),l&&l.kt(a),i(a,C,e)]),a},T=mt(E,!0),P=mt(E,!1);return T(),P(),[{Pt:()=>{let e=(()=>{let{Rt:e,Vt:n}=r,i=(e,n)=>mu(0,1,e/(e+n)||0);return{x:i(n.x,e.x),y:i(n.y,e.y)}})(),n=e=>n=>[n.Lt,{"--os-viewport-percent":mL(e)+""}];k(O,n(e.x)),k(b,n(e.y))},Nt:()=>{if(!gM){let{Dt:e}=r,n=m9(e,m4(d)),i=e=>n=>[n.Lt,{"--os-scroll-percent":mL(e)+""}];k(O,i(n.x)),k(b,i(n.y))}},qt:()=>{let{Dt:e}=r,n=m6(e),i=e=>n=>[n.Lt,{"--os-scroll-direction":e?"0":"1"}];k(O,i(n.x)),k(b,i(n.y)),gM&&(O.forEach(S.x.kt),b.forEach(S.y.kt))},Bt:()=>{if(f&&!p){let{Rt:e,Dt:n}=r,i=m6(n),s=m9(n,m4(d)),o=n=>{let{Lt:r}=n,o=(r&&r.parentElement)===c&&r,a=(e,n,r)=>{let i=n*e;return mQ(r?i:-i)};return[o,o&&{transform:mB({x:a(s.x,e.x,i.x),y:a(s.y,e.y,i.y)})}]};k(O,o),k(b,o)}},Ft:C,jt:{Xt:O,Yt:T,Wt:mt(k,O)},Jt:{Xt:b,Yt:P,Wt:mt(k,b)}},()=>(mM(x,O[0].Lt),mM(x,b[0].Lt),mt(gW,y))]})(e,s,i,(a=e=>m(e)&&L(),(e,r,o)=>{let{vt:l,L:h,V:c,gt:u,Gt:d,St:p}=s,{Lt:f,Ut:g,Mt:m}=e,[y,O]=mn(333),[b,x]=mn(444),w=e=>{"function"==typeof u.scrollBy&&u.scrollBy({behavior:"smooth",left:e.x,top:e.y})},S=!0;return mt(gW,[mJ(m,"pointermove pointerleave",a),mJ(f,"pointerenter",()=>{r(yM,!0)}),mJ(f,"pointerleave pointercancel",()=>{r(yM,!1)}),!c&&mJ(f,"mousedown",()=>{let e=document.activeElement;(mf(e,yu)||mf(e,ys)||e===document.body)&&gk(mt(m7,h),25)}),mJ(f,"wheel",e=>{let{deltaX:n,deltaY:i,deltaMode:s}=e;S&&0===s&&(f&&f.parentElement)===l&&w({x:n,y:i}),S=!1,r(y$,!0),y(()=>{S=!0,r(y$)}),m1(e)},{T:!1,I:!0}),mJ(f,"pointerdown",()=>{let e=mJ(d,"click",e=>{n(),m2(e)},{A:!0,I:!0,T:!1}),n=mJ(d,"pointerup pointercancel",()=>{n(),setTimeout(e,150)},{I:!0,T:!0})},{I:!0,T:!0}),(()=>{let e="pointerup pointercancel lostpointercapture",r=`client${o?"X":"Y"}`,s=o?g2:g5,a=o?"left":"top",l=o?"w":"h",h=o?"x":"y",c=[];return mJ(g,"pointerdown",o=>{let f=mP(o.target,`.${yT}`)===m,y=f?m:g,O=n.scrollbars,S=O[f?"dragScroll":"clickScroll"],{button:_,isPrimary:k,pointerType:C}=o,{pointers:E}=O;if(0===_&&k&&S&&(E||[]).includes(C)){let n,O;gW(c),x();let _=!f&&(o.shiftKey||"instant"===S),k=mt(mY,m),C=mt(mY,g),E=gb(mY(u)[s])/mq(u)[l]||1,T=(n=m4(u)[h],O=1/E,e=>{let{Rt:r}=i,s=O*e/(mq(g)[l]-mq(m)[l])*r[h];m5(u,{[h]:n+s})}),P=o[r],A=k(),M=C(),N=A[s],D=(A||k())[a]-(M||C())[a]+N/2,I=P-M[a],$=f?0:I-D,R=e=>{gW(j),y.releasePointerCapture(e.pointerId)},L=f||_,Q=p(),j=[mJ(d,e,R),mJ(d,"selectstart",e=>m1(e),{T:!1}),mJ(g,e,R),L&&mJ(g,"pointermove",e=>T($+(e[r]-P))),L&&(()=>{let e=m4(u);Q();let n=m4(u),r={x:n.x-e.x,y:n.y-e.y};(gx(r.x)>3||gx(r.y)>3)&&(p(),m5(u,e),w(r),b(Q))})];if(y.setPointerCapture(o.pointerId),_)T($);else if(!f){let e=yi(yZ);if(e){let n=e(T,$,N,e=>{e?Q():gz(j,Q)});gz(j,n),gz(c,mt(n,!0))}}}})})(),O,x])})),{vt:T,Kt:P,bt:A}=s,{Ft:M,Pt:N,Nt:D,qt:I,Bt:$}=C,R=(e,n)=>{if(k(),e)M(yI);else{let e=mt(M,yI,!0);f>0&&!n?_(e):e()}},L=()=>{(c?l:u)||(R(!0),b(()=>{R(!1)}))},Q=e=>{M(yD,e,!0),M(yD,e,!1)},j=e=>{m(e)&&(l=c,c&&R(!0))},V=[k,x,S,O,()=>p(),mJ(T,"pointerover",j,{A:!0}),mJ(T,"pointerenter",j),mJ(T,"pointerleave",e=>{m(e)&&(l=!1,c&&R(!1))}),mJ(T,"pointermove",e=>{m(e)&&h&&L()}),mJ(P,"scroll",e=>{y(()=>{D(),L()}),o(e),$()})],z=yi(yF);return[()=>mt(gW,gz(V,E())),({zt:e,It:n,Qt:s,Zt:o})=>{let{tn:a,nn:l,sn:g,en:m}=o||{},{Ct:y,ft:O}=s||{},{B:b}=r,{k:x,U:S}=yG(),{cn:_,j:k}=i,[C,E]=e("showNativeOverlaidScrollbars"),[T,L]=e("scrollbars.theme"),[j,V]=e("scrollbars.visibility"),[B,F]=e("scrollbars.autoHide"),[Z,q]=e("scrollbars.autoHideSuspend"),[W]=e("scrollbars.autoHideDelay"),[X,U]=e("scrollbars.dragScroll"),[Y,G]=e("scrollbars.clickScroll"),[H,K]=e("overflow"),J=k.x||k.y,ee=C&&x.x&&x.y,et=!S&&!z,en=(e,n,r)=>{let i=e.includes(g6)&&(j===g4||"auto"===j&&n===g6);return M(yP,i,r),i};if(f=W,O&&!n&&(Z&&J?(Q(!1),p(),w(()=>{p=mJ(P,"scroll",mt(Q,!0),{A:!0})})):Q(!0)),(E||et)&&M("os-theme-none",ee||et),L&&(M(d),M(T,!0),d=T),q&&!Z&&Q(!0),F&&(h="move"===B,c="leave"===B,R(u="never"===B,!0)),U&&M(yL,X),G&&M(yR,!!Y),g||V||K){let e=en(H.x,_.x,!0),n=en(H.y,_.y,!1);M(yA,!(e&&n))}(a||l||m||y||n)&&(D(),N(),$(),m&&I(),M(yN,!k.x,!0),M(yN,!k.y,!1),M(y_,b&&!A))},{},C]})(e,n,g,c,u,s),b=e=>mo(e).some(n=>!!e[n]),x=(e,s)=>{if(r())return!1;let{dn:a,It:l,Tt:c,pn:u}=e,d=a||{},p=!!l||!o,m={zt:yY(n,d,p),dn:d,It:p};if(u)return y(m),!1;let O=s||f(ma({},m,{Tt:c})),x=h(ma({},m,{un:g,Qt:O}));y(ma({},m,{Qt:O,Zt:x}));let w=b(O),S=b(x),_=w||S||!mh(d)||p;return o=!0,_&&i(e,{Qt:O,Zt:x}),_};return[()=>{let{ln:e,gt:n,St:r}=u,i=m4(e),s=[p(),l(),m()],o=r();return m5(n,i),o(),mt(gW,s)},x,()=>({vn:g,gn:c}),{hn:u,bn:O},d]})(e,u,()=>a,({dn:e,It:n},{Qt:r,Zt:i})=>{let{_t:s,Ct:o,$t:a,xt:l,Ht:h,ft:c}=r,{tn:u,nn:d,sn:p,en:f}=i;O("updated",[C,{updateHints:{sizeChanged:!!s,directionChanged:!!o,heightIntrinsicChanged:!!a,overflowEdgeChanged:!!u,overflowAmountChanged:!!d,overflowStyleChanged:!!p,scrollCoordinatesChanged:!!f,contentMutation:!!l,hostMutation:!!h,appear:!!c},changedOptions:e||{},force:!!n}])},e=>O("scroll",[C,e])),k=e=>{y5.delete(o),gW(l),a=!0,O("destroyed",[C,e]),p(),m()},C={options(e,n){if(e){let r=yU(u,ma(n?i():{},c(e)));mh(r)||(ma(u,r),x({dn:r}))}return ma({},u)},on:g,off:(e,n)=>{e&&n&&m(e,n)},state(){let{vn:e,gn:n}=w(),{B:r}=e,{Vt:i,Rt:s,cn:o,j:l,rn:h,fn:c,Dt:u}=n;return ma({},{overflowEdge:i,overflowAmount:s,overflowStyle:o,hasOverflow:l,scrollCoordinates:{start:u.D,end:u.M},padding:h,paddingAbsolute:c,directionRTL:r,destroyed:a})},elements(){let{dt:e,vt:n,rn:r,L:i,ht:s,gt:o,Kt:a}=S.hn,{jt:l,Jt:h}=S.bn,c=e=>{let{Mt:n,Ut:r,Lt:i}=e;return{scrollbar:i,track:r,handle:n}},u=e=>{let{Xt:n,Yt:r}=e;return ma({},c(n[0]),{clone:()=>{let e=c(r());return x({pn:!0}),e}})};return ma({},{target:e,host:n,padding:r||i,viewport:i,content:s||i,scrollOffsetElement:o,scrollEventElement:a,scrollbarHorizontal:u(l),scrollbarVertical:u(h)})},update:e=>x({It:e,Tt:!0}),destroy:mt(k,!1),plugin:e=>h[mo(e)[0]]};return(gz(l,[_]),y5.set(o,C),yr(yt,y3,[C,d,h]),((e,n)=>{let{nativeScrollbarsOverlaid:r,body:i}=n||{},{k:s,U:o,K:a}=yG(),{nativeScrollbarsOverlaid:l,body:h}=a().cancel,c=void 0===i?h:i,u=(s.x||s.y)&&(null!=r?r:l);return!!u||!!(e&&(null===c?!o:c))})(S.hn.bt,!s&&e.cancel))?k(!0):(gz(l,b()),O("initialized",[C]),C.update()),C}return a};function y6(e){return e?"os-theme-codemirror-dark":"os-theme-codemirror"}function y9(e){e.preventDefault()}y3.plugin=e=>{let n=gN(e),r=n?e:[e],i=r.map(e=>yr(e,y3)[0]);return gQ(r,e=>gQ(e,(n,r)=>{yt[r]=e[r]})),n?i:i[0]},y3.valid=e=>{let n=e&&e.elements,r="function"==typeof n&&n();return g$(r)&&!!y4(r.target)},y3.env=()=>{let{P:e,k:n,U:r,J:i,ot:s,st:o,K:a,Z:l,tt:h,nt:c}=yG();return ma({},{scrollbarsSize:e,scrollbarsOverlaid:n,scrollbarsHiding:r,scrollTimeline:i,staticDefaultInitialization:s,staticDefaultOptions:o,getDefaultInitialization:a,setDefaultInitialization:l,getDefaultOptions:h,setDefaultOptions:c})},y3.nonce=e=>{a=e},y3.trustedTypePolicy=e=>{o=e},y3.plugin([{[yF]:{static:()=>({R:(e,n,r,i,s)=>{let{V:o,L:a}=e,{U:l,k:h,P:c}=i,u=!o&&!l&&(h.x||h.y),[d]=yj(s,i),p=e=>{let n=l||d?0:42,r=(e,r,i)=>[r&&!l?e?n:i:0,e&&!!n],[i,s]=r(h.x,e.x===g6,c.x),[o,a]=r(h.y,e.y===g6,c.y);return{N:{x:i,y:o},q:{x:s,y:a}}},f=e=>{if(!o){let{B:i}=r,s=ma({},{[gK]:0,[gJ]:0,[gH]:0}),{N:o,q:a}=p(e),{x:l,y:h}=a,{x:c,y:d}=o,{F:f}=n,g=i?gH:gK,m=i?gY:gU,y=f[g],O=f[gJ],b=f[m],x=f[gG];return s[g2]=`calc(100% + ${d+-1*y}px)`,s[g]=-d+y,s[gJ]=-c+O,u&&(s[m]=b+(h?d:0),s[gG]=x+(l?c:0)),s}};return{X:(e,i,s)=>{if(u){let{F:o}=n,{N:l,q:h}=p(e),{x:c,y:u}=h,{x:d,y:f}=l,{B:g}=r,m=o[g?gU:gY],y=o.paddingTop,O=i.w+s.w,b=i.h+s.h,x={w:f&&u?`${f+O-m}px`:"",h:d&&c?`${d+b-y}px`:""};mj(a,{"--os-vaw":x.w,"--os-vah":x.h})}return u},Y:()=>{if(u){let{j:e,F:r}=n,i=yB(a,e),{q:s}=p(i),{x:o,y:l}=s,h={},c=e=>gQ(e,e=>{h[e]=r[e]});o&&c([gJ,gX,gG]),l&&c([gH,gK,gY,gU]);let u=mV(a,mo(h)),d=mO(a,yu,yd);return mj(a,h),()=>{mj(a,ma({},u,f(i))),d()}}return mc},W:f}}})}},{[yQ]:{static:()=>(e,n,r)=>{let i,s="scroll",o=mD(`<div class="${yx}" dir="ltr"><div class="${yx}"><div class="${yw}"></div></div><div class="${yx}"><div class="${yw}" style="width: 200%; height: 200%"></div></div></div>`),a=o[0],l=a.lastChild,h=a.firstChild,c=null==h?void 0:h.firstChild,u=mq(a),d=u,p=!1,f=()=>{m5(h,3333333),m5(l,3333333)},g=e=>{i=0,p&&(u=d,n(!0===e))},m=e=>{d=mq(a),p=!e||!g7(d,u),e?(m0(e),p&&!i&&(gS(i),i=g_(g))):g(!1===e),f()},y=[mM(e,o),mJ(h,s,m),mJ(l,s,m)];return m_(e,yb),mj(c,{[g2]:3333333,[g5]:3333333}),g_(f),[r?mt(m,!1):f,y]}}},{[yZ]:{static:()=>(e,n,r,i)=>{let s=!1,o=mc,[a,l]=mn(133),h=Math.sign(n),c=r*h,u=c/2,d=e=>1-(1-e)*(1-e),p=(n,r)=>gL(n,r,222,e,d),f=gL(0,c,222,(l,d,f)=>{if(e(l),f&&(i(s),!s)){let i=n-l;Math.sign(i-u)===h&&a(()=>{let s=i-c;o=Math.sign(s)===h?gL(l,n-c,Math.abs(s)/r*133,(r,i,s)=>{e(r),s&&(o=p(r,n))}):p(l,n)})}},d);return e=>{s=!0,e&&f(),l(),o()}}}}]);var y7=aO.theme({".cm-completionIcon::after":{fontFamily:'"codicon-cm"',"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale"},".cm-completionIcon-method::after":{content:'"\\e00d"'},".cm-completionIcon-function::after":{content:'"\\e00d"'},".cm-completionIcon-constructor::after":{content:'"\\e00d"'},".cm-completionIcon-variable::after":{content:'"\\e015"'},".cm-completionIcon-field::after":{content:'"\\e009"'},".cm-completionIcon-typeParameter::after":{content:'"\\e010"'},".cm-completionIcon-constant::after":{content:'"\\e006"'},".cm-completionIcon-class::after":{content:'"\\e004"'},".cm-completionIcon-interface::after":{content:'"\\e00a"'},".cm-completionIcon-struct::after":{content:'"\\e014"'},".cm-completionIcon-event::after":{content:'"\\e008"'},".cm-completionIcon-operator::after":{content:'"\\e00f"'},".cm-completionIcon-module::after":{content:'"\\e00e"'},".cm-completionIcon-property::after":{content:'"\\e011"'},".cm-completionIcon-value::after":{content:'"\\e007"'},".cm-completionIcon-enum::after":{content:'"\\e007"'},".cm-completionIcon-reference::after":{content:'"\\e003"'},".cm-completionIcon-keyword::after":{content:'"\\e00c"'},".cm-completionIcon-file::after":{content:'"\\e001"'},".cm-completionIcon-folder::after":{content:'"\\e002"'},".cm-completionIcon-color::after":{content:'"\\e005"'},".cm-completionIcon-unit::after":{content:'"\\e012"'},".cm-completionIcon-snippet::after":{content:'"\\e013"'},".cm-completionIcon-text::after":{content:'"\\e00b"'}});(eM||(eM={})).is=function(e){return"string"==typeof e},(eN||(eN={})).is=function(e){return"string"==typeof e},(p=eD||(eD={})).MIN_VALUE=-0x80000000,p.MAX_VALUE=0x7fffffff,p.is=function(e){return"number"==typeof e&&p.MIN_VALUE<=e&&e<=p.MAX_VALUE},(f=eI||(eI={})).MIN_VALUE=0,f.MAX_VALUE=0x7fffffff,f.is=function(e){return"number"==typeof e&&f.MIN_VALUE<=e&&e<=f.MAX_VALUE},(g=e$||(e$={})).create=function(e,n){return e===Number.MAX_VALUE&&(e=eI.MAX_VALUE),n===Number.MAX_VALUE&&(n=eI.MAX_VALUE),{line:e,character:n}},g.is=function(e){return tW.objectLiteral(e)&&tW.uinteger(e.line)&&tW.uinteger(e.character)},(m=eR||(eR={})).create=function(e,n,r,i){if(tW.uinteger(e)&&tW.uinteger(n)&&tW.uinteger(r)&&tW.uinteger(i))return{start:e$.create(e,n),end:e$.create(r,i)};if(e$.is(e)&&e$.is(n))return{start:e,end:n};throw Error(`Range#create called with invalid arguments[${e}, ${n}, ${r}, ${i}]`)},m.is=function(e){return tW.objectLiteral(e)&&e$.is(e.start)&&e$.is(e.end)},(y=eL||(eL={})).create=function(e,n){return{uri:e,range:n}},y.is=function(e){return tW.objectLiteral(e)&&eR.is(e.range)&&(tW.string(e.uri)||tW.undefined(e.uri))},(O=eQ||(eQ={})).create=function(e,n,r,i){return{targetUri:e,targetRange:n,targetSelectionRange:r,originSelectionRange:i}},O.is=function(e){return tW.objectLiteral(e)&&eR.is(e.targetRange)&&tW.string(e.targetUri)&&eR.is(e.targetSelectionRange)&&(eR.is(e.originSelectionRange)||tW.undefined(e.originSelectionRange))},(b=ej||(ej={})).create=function(e,n,r,i){return{red:e,green:n,blue:r,alpha:i}},b.is=function(e){return tW.objectLiteral(e)&&tW.numberRange(e.red,0,1)&&tW.numberRange(e.green,0,1)&&tW.numberRange(e.blue,0,1)&&tW.numberRange(e.alpha,0,1)},(x=eV||(eV={})).create=function(e,n){return{range:e,color:n}},x.is=function(e){return tW.objectLiteral(e)&&eR.is(e.range)&&ej.is(e.color)},(w=ez||(ez={})).create=function(e,n,r){return{label:e,textEdit:n,additionalTextEdits:r}},w.is=function(e){return tW.objectLiteral(e)&&tW.string(e.label)&&(tW.undefined(e.textEdit)||eG.is(e))&&(tW.undefined(e.additionalTextEdits)||tW.typedArray(e.additionalTextEdits,eG.is))},(S=eB||(eB={})).Comment="comment",S.Imports="imports",S.Region="region",(_=eF||(eF={})).create=function(e,n,r,i,s,o){let a={startLine:e,endLine:n};return tW.defined(r)&&(a.startCharacter=r),tW.defined(i)&&(a.endCharacter=i),tW.defined(s)&&(a.kind=s),tW.defined(o)&&(a.collapsedText=o),a},_.is=function(e){return tW.objectLiteral(e)&&tW.uinteger(e.startLine)&&tW.uinteger(e.startLine)&&(tW.undefined(e.startCharacter)||tW.uinteger(e.startCharacter))&&(tW.undefined(e.endCharacter)||tW.uinteger(e.endCharacter))&&(tW.undefined(e.kind)||tW.string(e.kind))},(k=eZ||(eZ={})).create=function(e,n){return{location:e,message:n}},k.is=function(e){return tW.defined(e)&&eL.is(e.location)&&tW.string(e.message)},(C=eq||(eq={})).Error=1,C.Warning=2,C.Information=3,C.Hint=4,(E=eW||(eW={})).Unnecessary=1,E.Deprecated=2,(eX||(eX={})).is=function(e){return tW.objectLiteral(e)&&tW.string(e.href)},(T=eU||(eU={})).create=function(e,n,r,i,s,o){let a={range:e,message:n};return tW.defined(r)&&(a.severity=r),tW.defined(i)&&(a.code=i),tW.defined(s)&&(a.source=s),tW.defined(o)&&(a.relatedInformation=o),a},T.is=function(e){var n;return tW.defined(e)&&eR.is(e.range)&&tW.string(e.message)&&(tW.number(e.severity)||tW.undefined(e.severity))&&(tW.integer(e.code)||tW.string(e.code)||tW.undefined(e.code))&&(tW.undefined(e.codeDescription)||tW.string(null==(n=e.codeDescription)?void 0:n.href))&&(tW.string(e.source)||tW.undefined(e.source))&&(tW.undefined(e.relatedInformation)||tW.typedArray(e.relatedInformation,eZ.is))},(P=eY||(eY={})).create=function(e,n,...r){let i={title:e,command:n};return tW.defined(r)&&r.length>0&&(i.arguments=r),i},P.is=function(e){return tW.defined(e)&&tW.string(e.title)&&tW.string(e.command)},(A=eG||(eG={})).replace=function(e,n){return{range:e,newText:n}},A.insert=function(e,n){return{range:{start:e,end:e},newText:n}},A.del=function(e){return{range:e,newText:""}},A.is=function(e){return tW.objectLiteral(e)&&tW.string(e.newText)&&eR.is(e.range)},(M=eH||(eH={})).create=function(e,n,r){let i={label:e};return void 0!==n&&(i.needsConfirmation=n),void 0!==r&&(i.description=r),i},M.is=function(e){return tW.objectLiteral(e)&&tW.string(e.label)&&(tW.boolean(e.needsConfirmation)||void 0===e.needsConfirmation)&&(tW.string(e.description)||void 0===e.description)},(eK||(eK={})).is=function(e){return tW.string(e)},(N=eJ||(eJ={})).replace=function(e,n,r){return{range:e,newText:n,annotationId:r}},N.insert=function(e,n,r){return{range:{start:e,end:e},newText:n,annotationId:r}},N.del=function(e,n){return{range:e,newText:"",annotationId:n}},N.is=function(e){return eG.is(e)&&(eH.is(e.annotationId)||eK.is(e.annotationId))},(D=e0||(e0={})).create=function(e,n){return{textDocument:e,edits:n}},D.is=function(e){return tW.defined(e)&&e9.is(e.textDocument)&&Array.isArray(e.edits)},(I=e1||(e1={})).create=function(e,n,r){let i={kind:"create",uri:e};return void 0!==n&&(void 0!==n.overwrite||void 0!==n.ignoreIfExists)&&(i.options=n),void 0!==r&&(i.annotationId=r),i},I.is=function(e){return e&&"create"===e.kind&&tW.string(e.uri)&&(void 0===e.options||(void 0===e.options.overwrite||tW.boolean(e.options.overwrite))&&(void 0===e.options.ignoreIfExists||tW.boolean(e.options.ignoreIfExists)))&&(void 0===e.annotationId||eK.is(e.annotationId))},($=e2||(e2={})).create=function(e,n,r,i){let s={kind:"rename",oldUri:e,newUri:n};return void 0!==r&&(void 0!==r.overwrite||void 0!==r.ignoreIfExists)&&(s.options=r),void 0!==i&&(s.annotationId=i),s},$.is=function(e){return e&&"rename"===e.kind&&tW.string(e.oldUri)&&tW.string(e.newUri)&&(void 0===e.options||(void 0===e.options.overwrite||tW.boolean(e.options.overwrite))&&(void 0===e.options.ignoreIfExists||tW.boolean(e.options.ignoreIfExists)))&&(void 0===e.annotationId||eK.is(e.annotationId))},(R=e5||(e5={})).create=function(e,n,r){let i={kind:"delete",uri:e};return void 0!==n&&(void 0!==n.recursive||void 0!==n.ignoreIfNotExists)&&(i.options=n),void 0!==r&&(i.annotationId=r),i},R.is=function(e){return e&&"delete"===e.kind&&tW.string(e.uri)&&(void 0===e.options||(void 0===e.options.recursive||tW.boolean(e.options.recursive))&&(void 0===e.options.ignoreIfNotExists||tW.boolean(e.options.ignoreIfNotExists)))&&(void 0===e.annotationId||eK.is(e.annotationId))},(e4||(e4={})).is=function(e){return e&&(void 0!==e.changes||void 0!==e.documentChanges)&&(void 0===e.documentChanges||e.documentChanges.every(e=>tW.string(e.kind)?e1.is(e)||e2.is(e)||e5.is(e):e0.is(e)))},(L=e3||(e3={})).create=function(e){return{uri:e}},L.is=function(e){return tW.defined(e)&&tW.string(e.uri)},(Q=e6||(e6={})).create=function(e,n){return{uri:e,version:n}},Q.is=function(e){return tW.defined(e)&&tW.string(e.uri)&&tW.integer(e.version)},(j=e9||(e9={})).create=function(e,n){return{uri:e,version:n}},j.is=function(e){return tW.defined(e)&&tW.string(e.uri)&&(null===e.version||tW.integer(e.version))},(V=e7||(e7={})).create=function(e,n,r,i){return{uri:e,languageId:n,version:r,text:i}},V.is=function(e){return tW.defined(e)&&tW.string(e.uri)&&tW.string(e.languageId)&&tW.integer(e.version)&&tW.string(e.text)},(z=e8||(e8={})).PlainText="plaintext",z.Markdown="markdown",z.is=function(e){return e===z.PlainText||e===z.Markdown},(te||(te={})).is=function(e){return tW.objectLiteral(e)&&e8.is(e.kind)&&tW.string(e.value)},(B=tt||(tt={})).Text=1,B.Method=2,B.Function=3,B.Constructor=4,B.Field=5,B.Variable=6,B.Class=7,B.Interface=8,B.Module=9,B.Property=10,B.Unit=11,B.Value=12,B.Enum=13,B.Keyword=14,B.Snippet=15,B.Color=16,B.File=17,B.Reference=18,B.Folder=19,B.EnumMember=20,B.Constant=21,B.Struct=22,B.Event=23,B.Operator=24,B.TypeParameter=25,(F=tn||(tn={})).PlainText=1,F.Snippet=2,(tr||(tr={})).Deprecated=1,(Z=ti||(ti={})).create=function(e,n,r){return{newText:e,insert:n,replace:r}},Z.is=function(e){return e&&tW.string(e.newText)&&eR.is(e.insert)&&eR.is(e.replace)},(q=ts||(ts={})).asIs=1,q.adjustIndentation=2,(to||(to={})).is=function(e){return e&&(tW.string(e.detail)||void 0===e.detail)&&(tW.string(e.description)||void 0===e.description)},(ta||(ta={})).create=function(e){return{label:e}},(tl||(tl={})).create=function(e,n){return{items:e||[],isIncomplete:!!n}},(W=th||(th={})).fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},W.is=function(e){return tW.string(e)||tW.objectLiteral(e)&&tW.string(e.language)&&tW.string(e.value)},(tc||(tc={})).is=function(e){return!!e&&tW.objectLiteral(e)&&(te.is(e.contents)||th.is(e.contents)||tW.typedArray(e.contents,th.is))&&(void 0===e.range||eR.is(e.range))},(tu||(tu={})).create=function(e,n){return n?{label:e,documentation:n}:{label:e}},(td||(td={})).create=function(e,n,...r){let i={label:e};return tW.defined(n)&&(i.documentation=n),tW.defined(r)?i.parameters=r:i.parameters=[],i},(X=tp||(tp={})).Text=1,X.Read=2,X.Write=3,(tf||(tf={})).create=function(e,n){let r={range:e};return tW.number(n)&&(r.kind=n),r},(U=tg||(tg={})).File=1,U.Module=2,U.Namespace=3,U.Package=4,U.Class=5,U.Method=6,U.Property=7,U.Field=8,U.Constructor=9,U.Enum=10,U.Interface=11,U.Function=12,U.Variable=13,U.Constant=14,U.String=15,U.Number=16,U.Boolean=17,U.Array=18,U.Object=19,U.Key=20,U.Null=21,U.EnumMember=22,U.Struct=23,U.Event=24,U.Operator=25,U.TypeParameter=26,(tm||(tm={})).Deprecated=1,(ty||(ty={})).create=function(e,n,r,i,s){let o={name:e,kind:n,location:{uri:i,range:r}};return s&&(o.containerName=s),o},(tO||(tO={})).create=function(e,n,r,i){return void 0!==i?{name:e,kind:n,location:{uri:r,range:i}}:{name:e,kind:n,location:{uri:r}}},(Y=tv||(tv={})).create=function(e,n,r,i,s,o){let a={name:e,detail:n,kind:r,range:i,selectionRange:s};return void 0!==o&&(a.children=o),a},Y.is=function(e){return e&&tW.string(e.name)&&tW.number(e.kind)&&eR.is(e.range)&&eR.is(e.selectionRange)&&(void 0===e.detail||tW.string(e.detail))&&(void 0===e.deprecated||tW.boolean(e.deprecated))&&(void 0===e.children||Array.isArray(e.children))&&(void 0===e.tags||Array.isArray(e.tags))},(G=tb||(tb={})).Empty="",G.QuickFix="quickfix",G.Refactor="refactor",G.RefactorExtract="refactor.extract",G.RefactorInline="refactor.inline",G.RefactorRewrite="refactor.rewrite",G.Source="source",G.SourceOrganizeImports="source.organizeImports",G.SourceFixAll="source.fixAll",(H=tx||(tx={})).Invoked=1,H.Automatic=2,(K=tw||(tw={})).create=function(e,n,r){let i={diagnostics:e};return null!=n&&(i.only=n),null!=r&&(i.triggerKind=r),i},K.is=function(e){return tW.defined(e)&&tW.typedArray(e.diagnostics,eU.is)&&(void 0===e.only||tW.typedArray(e.only,tW.string))&&(void 0===e.triggerKind||e.triggerKind===tx.Invoked||e.triggerKind===tx.Automatic)},(J=tS||(tS={})).create=function(e,n,r){let i={title:e},s=!0;return"string"==typeof n?(s=!1,i.kind=n):eY.is(n)?i.command=n:i.edit=n,s&&void 0!==r&&(i.kind=r),i},J.is=function(e){return e&&tW.string(e.title)&&(void 0===e.diagnostics||tW.typedArray(e.diagnostics,eU.is))&&(void 0===e.kind||tW.string(e.kind))&&(void 0!==e.edit||void 0!==e.command)&&(void 0===e.command||eY.is(e.command))&&(void 0===e.isPreferred||tW.boolean(e.isPreferred))&&(void 0===e.edit||e4.is(e.edit))},(ee=t_||(t_={})).create=function(e,n){let r={range:e};return tW.defined(n)&&(r.data=n),r},ee.is=function(e){return tW.defined(e)&&eR.is(e.range)&&(tW.undefined(e.command)||eY.is(e.command))},(et=tk||(tk={})).create=function(e,n){return{tabSize:e,insertSpaces:n}},et.is=function(e){return tW.defined(e)&&tW.uinteger(e.tabSize)&&tW.boolean(e.insertSpaces)},(en=tC||(tC={})).create=function(e,n,r){return{range:e,target:n,data:r}},en.is=function(e){return tW.defined(e)&&eR.is(e.range)&&(tW.undefined(e.target)||tW.string(e.target))},(er=tE||(tE={})).create=function(e,n){return{range:e,parent:n}},er.is=function(e){return tW.objectLiteral(e)&&eR.is(e.range)&&(void 0===e.parent||er.is(e.parent))},(ei=tT||(tT={})).namespace="namespace",ei.type="type",ei.class="class",ei.enum="enum",ei.interface="interface",ei.struct="struct",ei.typeParameter="typeParameter",ei.parameter="parameter",ei.variable="variable",ei.property="property",ei.enumMember="enumMember",ei.event="event",ei.function="function",ei.method="method",ei.macro="macro",ei.keyword="keyword",ei.modifier="modifier",ei.comment="comment",ei.string="string",ei.number="number",ei.regexp="regexp",ei.operator="operator",ei.decorator="decorator",(es=tP||(tP={})).declaration="declaration",es.definition="definition",es.readonly="readonly",es.static="static",es.deprecated="deprecated",es.abstract="abstract",es.async="async",es.modification="modification",es.documentation="documentation",es.defaultLibrary="defaultLibrary",(tA||(tA={})).is=function(e){return tW.objectLiteral(e)&&(void 0===e.resultId||"string"==typeof e.resultId)&&Array.isArray(e.data)&&(0===e.data.length||"number"==typeof e.data[0])},(eo=tM||(tM={})).create=function(e,n){return{range:e,text:n}},eo.is=function(e){return null!=e&&eR.is(e.range)&&tW.string(e.text)},(ea=tN||(tN={})).create=function(e,n,r){return{range:e,variableName:n,caseSensitiveLookup:r}},ea.is=function(e){return null!=e&&eR.is(e.range)&&tW.boolean(e.caseSensitiveLookup)&&(tW.string(e.variableName)||void 0===e.variableName)},(el=tD||(tD={})).create=function(e,n){return{range:e,expression:n}},el.is=function(e){return null!=e&&eR.is(e.range)&&(tW.string(e.expression)||void 0===e.expression)},(eh=tI||(tI={})).create=function(e,n){return{frameId:e,stoppedLocation:n}},eh.is=function(e){return tW.defined(e)&&eR.is(e.stoppedLocation)},(ec=t$||(t$={})).Type=1,ec.Parameter=2,ec.is=function(e){return 1===e||2===e},(eu=tR||(tR={})).create=function(e){return{value:e}},eu.is=function(e){return tW.objectLiteral(e)&&(void 0===e.tooltip||tW.string(e.tooltip)||te.is(e.tooltip))&&(void 0===e.location||eL.is(e.location))&&(void 0===e.command||eY.is(e.command))},(ed=tL||(tL={})).create=function(e,n,r){let i={position:e,label:n};return void 0!==r&&(i.kind=r),i},ed.is=function(e){return tW.objectLiteral(e)&&e$.is(e.position)&&(tW.string(e.label)||tW.typedArray(e.label,tR.is))&&(void 0===e.kind||t$.is(e.kind))&&void 0===e.textEdits||tW.typedArray(e.textEdits,eG.is)&&(void 0===e.tooltip||tW.string(e.tooltip)||te.is(e.tooltip))&&(void 0===e.paddingLeft||tW.boolean(e.paddingLeft))&&(void 0===e.paddingRight||tW.boolean(e.paddingRight))},(tQ||(tQ={})).createSnippet=function(e){return{kind:"snippet",value:e}},(tj||(tj={})).create=function(e,n,r,i){return{insertText:e,filterText:n,range:r,command:i}},(tV||(tV={})).create=function(e){return{items:e}},(ep=tz||(tz={})).Invoked=0,ep.Automatic=1,(tB||(tB={})).create=function(e,n){return{range:e,text:n}},(tF||(tF={})).create=function(e,n){return{triggerKind:e,selectedCompletionInfo:n}},(tZ||(tZ={})).is=function(e){return tW.objectLiteral(e)&&eN.is(e.uri)&&tW.string(e.name)},(ef=tq||(tq={})).create=function(e,n,r,i){return new y8(e,n,r,i)},ef.is=function(e){return!!(tW.defined(e)&&tW.string(e.uri)&&(tW.undefined(e.languageId)||tW.string(e.languageId))&&tW.uinteger(e.lineCount)&&tW.func(e.getText)&&tW.func(e.positionAt)&&tW.func(e.offsetAt))},ef.applyEdits=function(e,n){let r=e.getText(),i=function e(n,r){if(n.length<=1)return n;let i=n.length/2|0,s=n.slice(0,i),o=n.slice(i);e(s,r),e(o,r);let a=0,l=0,h=0;for(;a<s.length&&l<o.length;)0>=r(s[a],o[l])?n[h++]=s[a++]:n[h++]=o[l++];for(;a<s.length;)n[h++]=s[a++];for(;l<o.length;)n[h++]=o[l++];return n}(n,(e,n)=>{let r=e.range.start.line-n.range.start.line;return 0===r?e.range.start.character-n.range.start.character:r}),s=r.length;for(let n=i.length-1;n>=0;n--){let o=i[n],a=e.offsetAt(o.range.start),l=e.offsetAt(o.range.end);if(l<=s)r=r.substring(0,a)+o.newText+r.substring(l,r.length);else throw Error("Overlapping edit");s=a}return r};class y8{constructor(e,n,r,i){this._uri=e,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content}update(e,n){this._content=e.text,this._version=n,this._lineOffsets=void 0}getLineOffsets(){if(void 0===this._lineOffsets){let e=[],n=this._content,r=!0;for(let i=0;i<n.length;i++){r&&(e.push(i),r=!1);let s=n.charAt(i);r="\r"===s||"\n"===s,"\r"===s&&i+1<n.length&&"\n"===n.charAt(i+1)&&i++}r&&n.length>0&&e.push(n.length),this._lineOffsets=e}return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let n=this.getLineOffsets(),r=0,i=n.length;if(0===i)return e$.create(0,e);for(;r<i;){let s=Math.floor((r+i)/2);n[s]>e?i=s:r=s+1}let s=r-1;return e$.create(s,e-n[s])}offsetAt(e){let n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;let r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)}get lineCount(){return this.getLineOffsets().length}}var Oe=tW||(tW={});let Ot=Object.prototype.toString;Oe.defined=function(e){return void 0!==e},Oe.undefined=function(e){return void 0===e},Oe.boolean=function(e){return!0===e||!1===e},Oe.string=function(e){return"[object String]"===Ot.call(e)},Oe.number=function(e){return"[object Number]"===Ot.call(e)},Oe.numberRange=function(e,n,r){return"[object Number]"===Ot.call(e)&&n<=e&&e<=r},Oe.integer=function(e){return"[object Number]"===Ot.call(e)&&-0x80000000<=e&&e<=0x7fffffff},Oe.uinteger=function(e){return"[object Number]"===Ot.call(e)&&0<=e&&e<=0x7fffffff},Oe.func=function(e){return"[object Function]"===Ot.call(e)},Oe.objectLiteral=function(e){return null!==e&&"object"==typeof e},Oe.typedArray=function(e,n){return Array.isArray(e)&&e.every(n)};class On{constructor(e,n,r,i){this._uri=e,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content}update(e,n){for(let n of e)if(On.isIncremental(n)){let e=Os(n.range),r=this.offsetAt(e.start),i=this.offsetAt(e.end);this._content=this._content.substring(0,r)+n.text+this._content.substring(i,this._content.length);let s=Math.max(e.start.line,0),o=Math.max(e.end.line,0),a=this._lineOffsets,l=Or(n.text,!1,r);if(o-s===l.length)for(let e=0,n=l.length;e<n;e++)a[e+s+1]=l[e];else l.length<1e4?a.splice(s+1,o-s,...l):this._lineOffsets=a=a.slice(0,s+1).concat(l,a.slice(o+1));let h=n.text.length-(i-r);if(0!==h)for(let e=s+1+l.length,n=a.length;e<n;e++)a[e]=a[e]+h}else if(On.isFull(n))this._content=n.text,this._lineOffsets=void 0;else throw Error("Unknown change event received");this._version=n}getLineOffsets(){return void 0===this._lineOffsets&&(this._lineOffsets=Or(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let n=this.getLineOffsets(),r=0,i=n.length;if(0===i)return{line:0,character:e};for(;r<i;){let s=Math.floor((r+i)/2);n[s]>e?i=s:r=s+1}let s=r-1;return e=this.ensureBeforeEOL(e,n[s]),{line:s,character:e-n[s]}}offsetAt(e){let n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;let r=n[e.line];if(e.character<=0)return r;let i=e.line+1<n.length?n[e.line+1]:this._content.length,s=Math.min(r+e.character,i);return this.ensureBeforeEOL(s,r)}ensureBeforeEOL(e,n){for(;e>n&&Oi(this._content.charCodeAt(e-1));)e--;return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){return null!=e&&"string"==typeof e.text&&void 0!==e.range&&(void 0===e.rangeLength||"number"==typeof e.rangeLength)}static isFull(e){return null!=e&&"string"==typeof e.text&&void 0===e.range&&void 0===e.rangeLength}}function Or(e,n,r=0){let i=n?[r]:[];for(let n=0;n<e.length;n++){let s=e.charCodeAt(n);Oi(s)&&(13===s&&n+1<e.length&&10===e.charCodeAt(n+1)&&n++,i.push(r+n+1))}return i}function Oi(e){return 13===e||10===e}function Os(e){let n=e.start,r=e.end;return n.line>r.line||n.line===r.line&&n.character>r.character?{start:r,end:n}:e}function Oo(e){let n=Os(e.range);return n!==e.range?{newText:e.newText,range:n}:e}(eg=tX||(tX={})).create=function(e,n,r,i){return new On(e,n,r,i)},eg.update=function(e,n,r){if(e instanceof On)return e.update(n,r),e;throw Error("TextDocument.update: document must be created by TextDocument.create")},eg.applyEdits=function(e,n){let r=e.getText(),i=function e(n,r){if(n.length<=1)return n;let i=n.length/2|0,s=n.slice(0,i),o=n.slice(i);e(s,r),e(o,r);let a=0,l=0,h=0;for(;a<s.length&&l<o.length;)0>=r(s[a],o[l])?n[h++]=s[a++]:n[h++]=o[l++];for(;a<s.length;)n[h++]=s[a++];for(;l<o.length;)n[h++]=o[l++];return n}(n.map(Oo),(e,n)=>{let r=e.range.start.line-n.range.start.line;return 0===r?e.range.start.character-n.range.start.character:r}),s=0,o=[];for(let n of i){let i=e.offsetAt(n.range.start);if(i<s)throw Error("Overlapping edit");i>s&&o.push(r.substring(s,i)),n.newText.length&&o.push(n.newText),s=e.offsetAt(n.range.end)}return o.push(r.substr(s)),o.join("")};var Oa=rg.define({combine:cr}),Ol=rg.define({combine:cr}),Oh=rg.define({combine:cr});function Oc(e){return e}function Ou(e,n){let r=n.facet(Ol),i=n.facet(Oh)??"unknown",s=n.facet(Oa),o=e?e.version+1:0;if("function"==typeof s){let{code:e,mapping:a}=s(n.doc.toString());return{textDocument:tX.create(r,i,o,e),originalRangeFor:e=>a.originalRangeFor(e),generatedRangeFor:e=>a.generatedRangeFor(e),originalOffsetFor:e=>a.originalOffsetFor(e),generatedOffsetFor:e=>a.generatedOffsetFor(e)}}return{textDocument:tX.create(r,i,o,n.doc.toString()),originalRangeFor:Oc,generatedRangeFor:Oc,originalOffsetFor:Oc,generatedOffsetFor:Oc}}var Od=rx.define({create:e=>Ou(null,e),update:(e,n)=>n.docChanged?Ou(e.textDocument,n.state):e}),Op=((em=Op||{})[em.Unnecessary=1]="Unnecessary",em[em.Deprecated=2]="Deprecated",em);rS.high(aO.theme({"& .cm-panels.cm-panels-top":{borderBottom:"none",backgroundColor:"transparent"},"& .cm-panels.cm-panels-bottom":{borderTop:"none",backgroundColor:"transparent",border:"1px solid rgba(28, 31, 35, .08)"},"& .cm-searchMatch":{backgroundColor:"rgba(164, 164, 184, 0.3)",outline:"none"},"& .cm-custom-search":{position:"absolute",top:0,right:"10px",backgroundColor:"#f3f3f3",display:"flex",padding:"4px",boxSizing:"border-box",minWidth:"420px",maxWidth:"calc(100% - 30px)",borderRadius:"4px",boxShadow:"0 2px 8px 2px rgba(0, 0, 0, 0.16)",overflow:"hidden"},"& .cm-custom-search button":{borderWidth:0},"& .cm-custom-search input":{outline:"none"},"& .cm-custom-search .cm-custom-search-drag":{width:"3px",height:"100%",position:"absolute",top:"0px",left:"0px",backgroundColor:"#c8c8c8"},"& .cm-custom-search .cm-custom-search-drag:hover":{backgroundColor:"#0090f1",cursor:"col-resize"},"& .cm-custom-text-field":{backgroundColor:"inherit",padding:0,border:"none",color:"#444d56",fontSize:"12px",lineHeight:"16px",verticalAlign:"middle",width:"calc(100% - 58px)"},"& .cm-custom-search-panel-icon":{display:"inline-flex","align-items":"center","justify-content":"center",padding:"4px","border-radius":"2px","background-color":"transparent","box-sizing":"border-box",width:"20px",height:"20px",cursor:"pointer"},"& .cm-custom-search-panel-icon:hover":{color:"rgba(0, 100, 250, 1)",backgroundColor:"rgba(46, 60, 56, .09)"},"& .cm-custom-search-panel-icon:active":{backgroundColor:"rgba(46, 50, 56, .13)"},"& .cm-custom-search-panel-icon span":{display:"inline-flex",lineHeight:"12px",fontSize:"12px"},"& .cm-custom-search-panel-icon-active":{color:"rgba(0, 100, 250, 1)",backgroundColor:"rgba(46, 50, 56, .05)"},"& .cm-custom-search-panel-icon-disabled":{color:"rgba(28, 31, 35, .35)",backgroundColor:"transparent"},"& .cm-custom-search-panel-icon-disabled:hover":{color:"rgba(28, 31, 35, .35)",backgroundColor:"transparent"},"& .cm-custom-search-panel-icon-disabled:active":{color:"rgba(28, 31, 35, .35)",backgroundColor:"transparent"},"& .cm-custom-search-panel-expand":{display:"flex",padding:"4px"},"& .cm-custom-search-panel-content":{display:"flex",flexDirection:"column",flex:1},"& .cm-custom-search-panel-content-top":{display:"flex",alignItems:"center"},"& .cm-custom-search-action-wrapper":{display:"flex",alignItems:"center",justifyContent:"end"},"& .cm-custom-search-panel-content-input-wrapper":{display:"flex",alignItems:"center",flex:1,position:"relative",border:"1px solid #555",padding:"4px",minWidth:"220px",marginLeft:"4px",marginRight:"6px",borderRadius:"2px"},"& .cm-custom-search-panel-content-input-wrapper-focus":{borderColor:"rgba(0, 100, 250, 1)"},"& .cm-custom-search-panel-content-input-wrapper .cm-custom-search-panel-icon":{position:"absolute",top:"4px",right:"4px",padding:"2px",width:"16px",height:"16px !important"},"& .cm-panel.cm-custom-search [name=word]":{right:"22px"},"& .cm-panel.cm-custom-search [name=case]":{right:"40px"},"& .cm-panel.cm-custom-search [name=enter]":{right:"58px"},"& .cm-panel.cm-custom-search [name=previous]":{marginRight:"2px"},"& .cm-panel.cm-custom-search [name=next]":{marginRight:"2px"},"& .cm-panel.cm-custom-search [name=close-icon]":{marginRight:"2px"},"& .cm-panel.cm-custom-search [name=replace]":{marginRight:"2px"},"& .cm-panel.cm-custom-search  [name=expand]":{transform:"rotate(0deg)"},"& .cm-panel.cm-custom-search  [name=expand].cm-custom-search-panel-icon-active":{transform:"rotate(90deg)"},"& .cm-custom-search-match-count":{fontSize:"12px",width:"80px",overflow:"hidden"},"& .cm-custom-search-panel-content-bottom":{marginRight:"104px",display:"flex",alignItems:"center"},"& .cm-custom-search-panel-content-bottom .cm-custom-search-panel-content-input-wrapper":{marginTop:"6px"}}));var Of="#24292e",Og="#d1d5da",Om="#3392FF44",Oy="#c8e1ff",OO="#24292e",Ov="#9197F1",Ob="#ffab70",Ox="#79b8ff",Ow=[{tag:cT.keyword,color:Ov},{tag:cT.variableName,color:"#D9DCFA"},{tag:[cT.name,cT.deleted,cT.character,cT.macroName],color:Ob},{tag:[cT.propertyName],color:"#9197F1"},{tag:[cT.processingInstruction,cT.string,cT.inserted,cT.special(cT.string)],color:"#FF9878"},{tag:[cT.function(cT.variableName),cT.function(cT.propertyName),cT.labelName],color:"#FFCA66"},{tag:[cT.moduleKeyword,cT.controlKeyword],color:"#CC4FD4"},{tag:[cT.color,cT.constant(cT.name),cT.standard(cT.name)],color:"#79b8ff"},{tag:cT.definition(cT.name),color:Ob},{tag:[cT.className],color:"#b392f0"},{tag:[cT.number,cT.changed,cT.annotation,cT.modifier,cT.self,cT.namespace],color:"#2EC7D9"},{tag:[cT.typeName],color:Ox,fontStyle:Ox},{tag:[cT.operatorKeyword],color:Ov},{tag:[cT.url,cT.escape,cT.regexp,cT.link],color:"#9ecbff"},{tag:[cT.meta,cT.comment],color:"#568B2A"},{tag:cT.strong,fontWeight:"bold"},{tag:cT.emphasis,fontStyle:"italic"},{tag:cT.link,textDecoration:"underline"},{tag:cT.heading,fontWeight:"bold",color:"#79b8ff"},{tag:[cT.atom,cT.bool,cT.special(cT.variableName)],color:Ob},{tag:cT.invalid,color:"#f97583"},{tag:cT.strikethrough,textDecoration:"line-through"},{tag:cT.separator,color:"#888892"}],OS="#f4f5f5",O_="#444d56",Ok="#0366d625",OC="#044289",OE="#fff",OT="#d73a49",OP="#e36209",OA="#005cc5",OM="#005cc5",ON=[{tag:cT.keyword,color:OT},{tag:[cT.name,cT.deleted,cT.character,cT.macroName],color:OP},{tag:[cT.propertyName],color:OA},{tag:[cT.processingInstruction,cT.string,cT.inserted,cT.special(cT.string)],color:"#032f62"},{tag:[cT.function(cT.variableName),cT.labelName],color:OA},{tag:[cT.color,cT.constant(cT.name),cT.standard(cT.name)],color:"#005cc5"},{tag:[cT.definition(cT.name),cT.separator],color:OP},{tag:[cT.className],color:"#6f42c1"},{tag:[cT.number,cT.changed,cT.annotation,cT.modifier,cT.self,cT.namespace],color:"#005cc5"},{tag:[cT.typeName],color:OM,fontStyle:OM},{tag:[cT.operator,cT.operatorKeyword],color:OT},{tag:[cT.url,cT.escape,cT.regexp,cT.link],color:"#032f62"},{tag:[cT.meta,cT.comment],color:"#6a737d"},{tag:cT.strong,fontWeight:"bold"},{tag:cT.emphasis,fontStyle:"italic"},{tag:cT.link,textDecoration:"underline"},{tag:cT.heading,fontWeight:"bold",color:"#005cc5"},{tag:[cT.atom,cT.bool,cT.special(cT.variableName)],color:OP},{tag:cT.invalid,color:"#cb2431"},{tag:cT.strikethrough,textDecoration:"line-through"}],OD=e=>{throw TypeError(e)},OI=(e,n,r)=>n.has(e)||OD("Cannot "+r),O$=(e,n,r)=>(OI(e,n,"read from private field"),r?r.call(e):n.get(e)),OR=(e,n,r)=>n.has(e)?OD("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(e):n.set(e,r),OL=(e,n,r,i)=>(OI(e,n,"write to private field"),i?i.call(e,r):n.set(e,r),r),OQ=class e{constructor(e=[]){this.contents=[],this.contents=e}has(e){return this.contents.some(n=>n.from===e.from&&n.to===e.to)}add(e){this.contents.push(e),this.contents.sort((e,n)=>e.from-n.from)}between(e,n,r){for(let i of this.contents)i.to>=e&&i.from<=n&&r(i)}applyChanges(n){if(n.empty)return this;let r=[];for(let e of this.contents)!1===n.touchesRange(0,e.to)&&r.push({from:n.mapPos(e.from,1),to:n.mapPos(e.to,-1),tokens:e.tokens});return new e(r)}},Oj={},OV=rg.define({combine:function(e){return e[e.length-1]}}),Oz=rV.define(),OB=rV.define(),OF=sG.fromClass((t1=class{constructor(e){OR(this,tJ),this.decorations=ss.none,OR(this,tU,""),OR(this,tY,""),OR(this,tG,null),OR(this,tH,null),OR(this,tK,new OQ);let n=e.state.facet(OV);if(!n)return;OL(this,tU,n.language),OL(this,tY,n.theme),n.highlighter instanceof Promise?n.highlighter.then(n=>{OL(this,tG,n),e.dispatch({effects:Oz.of(null)})}):(OL(this,tG,n.highlighter),e.dispatch({effects:Oz.of(null)}))}update(e){if(!O$(this,tG))return;let n=e.view.state.facet(OV);if(!n)return;let{language:r,theme:i}=n,s=r!==O$(this,tU)||i!==O$(this,tY),o=e.transactions.some(e=>e.effects.some(e=>e.is(Oz))),a=e.transactions.some(e=>e.effects.some(e=>e.is(OB)));if(e.docChanged&&(this.decorations=this.decorations.map(e.changes)),o||s||e.viewportChanged||e.viewportMoved||e.docChanged){let n,s;OL(this,tU,r),OL(this,tY,i),OL(this,tK,O$(this,tK).applyChanges(e.changes)),O$(this,tH)&&O$(this,tH).abort(),OL(this,tH,new AbortController),(n=tJ,s=t0,OI(this,n,"access private method"),s).call(this,{update:e,highlighter:O$(this,tG),language:r,theme:i,signal:O$(this,tH).signal})}if(a){let n=e.view.viewport;this.decorations=function(e,n,r){let i=new r1;for(let s of e.contents)s.to<n||s.from>r||s.tokens.forEach(e=>{if(e.color)try{var n;i.add(s.from+e.offset,s.from+e.offset+e.content.length,(Oj[n=e.color]||(Oj[n]=ss.mark({attributes:{style:`color: ${n};`}})),Oj[n]))}catch(e){}});return i.finish()}(O$(this,tK),n.from,n.to)}}},tU=new WeakMap,tY=new WeakMap,tG=new WeakMap,tH=new WeakMap,tK=new WeakMap,tJ=new WeakSet,t0=async function({update:e,highlighter:n,language:r,theme:i,signal:s}){var o;let a,{to:l}=e.view.viewport,h=e.state.doc.lineAt(l);for(let l=1;l<=h.number;l++){let h=e.state.doc.line(l);if(0===h.length)continue;(null==(o=globalThis.scheduler)?void 0:o.yield)&&await globalThis.scheduler.yield();let{tokens:c,grammarState:u}=function(e,n,r,i,s){var o;let a=n.codeToTokens(e,{lang:r,theme:i,grammarState:s});return{tokens:null!=(o=a.tokens[0])?o:[],grammarState:a.grammarState}}(h.text,n,r,i,a);if(a=u,s.aborted)return;let d={from:h.from,to:h.to,tokens:c};O$(this,tK).has(d)||O$(this,tK).add(d)}queueMicrotask(()=>{e.view.dispatch({effects:OB.of(null)})})},t1),{decorations:e=>e.decorations}),OZ=r(79154);function Oq(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var n=1,r=arguments[1];if(r&&"object"==typeof r&&null==r.nodeType&&!Array.isArray(r)){for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){var s=r[i];"string"==typeof s?e.setAttribute(i,s):null!=s&&(e[i]=s)}n++}for(;n<arguments.length;n++)!function e(n,r){if("string"==typeof r)n.appendChild(document.createTextNode(r));else if(null==r);else if(null!=r.nodeType)n.appendChild(r);else if(Array.isArray(r))for(var i=0;i<r.length;i++)e(n,r[i]);else throw RangeError("Unsupported child node: "+r)}(e,arguments[n]);return e}var OW=class{constructor(e,n,r){this.from=e,this.to=n,this.diagnostic=r}},OX=class e{constructor(e,n,r){this.diagnostics=e,this.panel=n,this.selected=r}static init(n,r,i){let s=n,o=i.facet(O4).markerFilter;o&&(s=o(s,i));let a=ss.set(s.map(e=>e.from==e.to||e.from==e.to-1&&i.doc.lineAt(e.from).to==e.from?ss.widget({widget:new O9(e),diagnostic:e}).range(e.from):ss.mark({attributes:{class:`cm-lintRange cm-lintRange-${e.severity}${e.markClass?` ${e.markClass}`:""}`},diagnostic:e}).range(e.from,e.to)),!0);return new e(a,r,OU(a))}};function OU(e,n=null,r=0){let i=null;return e.between(r,1e9,(e,r,{spec:s})=>{if(!n||s.diagnostic==n)return i=new OW(e,r,s.diagnostic),!1}),i}function OY(e,n){let r=n.pos,i=n.end||r,s=e.state.facet(O4).hideOn(e,r,i);if(null!=s)return s;let o=e.startState.doc.lineAt(n.pos);return!!(e.effects.some(e=>e.is(OG))||e.changes.touchesRange(o.from,Math.max(o.to,i)))}var OG=rV.define(),OH=rV.define(),OK=rV.define(),OJ=rx.define({create:()=>new OX(ss.none,null,null),update(e,n){if(n.docChanged&&e.diagnostics.size){let r=e.diagnostics.map(n.changes),i=null,{panel:s}=e;if(e.selected){let s=n.changes.mapPos(e.selected.from,1);i=OU(r,e.selected.diagnostic,s)||OU(r,null,s)}!r.size&&s&&n.state.facet(O4).autoPanel&&(s=null),e=new OX(r,s,i)}for(let r of n.effects)if(r.is(OG)){let i=n.state.facet(O4).autoPanel?r.value.length?O8.open:null:e.panel;e=OX.init(r.value,i,n.state)}else r.is(OH)?e=new OX(e.diagnostics,r.value?O8.open:null,e.selected):r.is(OK)&&(e=new OX(e.diagnostics,e.panel,r.value));return e},provide:e=>[lO.from(e,e=>e.panel),aO.decorations.from(e,e=>(e=>{try{let n=(e=>{let n=new Map,r=e.iter();for(;r.value;){let{severity:e}=r.value.spec.diagnostic;n.has(e)||n.set(e,[]),n.get(e).push(r.value.spec.diagnostic),r.next()}return n})(e),r=[];return n.forEach((e,n)=>{(e=>{let n=e.map(e=>({from:e.from,to:e.to})),r=[];n.sort((e,n)=>e.from-n.from);let i=n[0],s=[e[0]];for(let o=1;o<n.length;o++){let a=n[o];a.from<=i.to?(s.push(e[o]),i.to=Math.max(i.to,a.to)):(r.push({...i,sourceDiagnostics:s}),i=a,s=[e[o]])}return r.push({...i,sourceDiagnostics:s}),r})(e).forEach(e=>{"number"==typeof e.from&&"number"==typeof e.to&&e.from<e.to&&r.push(((e,n,r,i)=>{let s=i[i.length-1];return ss.mark({attributes:{class:`cm-lintRange cm-lintRange-${r}${s.markClass?` ${s.markClass}`:""}`},sourceDiagnostics:i}).range(e,n)})(e.from,e.to,n,e.sourceDiagnostics))})}),r.sort((e,n)=>e.from!==n.from?e.from-n.from:e.value.startSide-n.value.startSide),ss.set(r)}catch(n){return console.error("linter mergeDecorations error",n),e}})(e.diagnostics))]}),O0=ss.mark({class:"cm-lintRange cm-lintRange-active"});function O1(e,n){return Oq("ul",{class:"cm-tooltip-lint"},n.map(n=>O6(e,n,!1)))}var O2=e=>{let n=e.state.field(OJ,!1);return!!n&&!!n.panel&&(e.dispatch({effects:OH.of(!1)}),!0)},O5=sG.fromClass(class{constructor(e){this.view=e;let{delay:n}=e.state.facet(O4);this.lintTime=Date.now()+n,this.run=this.run.bind(this),this.timeout=window.setTimeout(this.run,n)}lintTime;timeout=-1;set=!0;run(){clearTimeout(this.timeout);let e=Date.now();if(e<this.lintTime-10)this.timeout=window.setTimeout(this.run,this.lintTime-e);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(O4);n.length&&Promise.all(n.map(e=>Promise.resolve(e(this.view)))).then(n=>{var r,i;let s=n.reduce((e,n)=>e.concat(n));this.view.state.doc==e.doc&&this.view.dispatch((r=this.view.state,{effects:(i=[OG.of(s)],r.field(OJ,!1)?i:i.concat(rV.appendConfig.of(vh)))}))},e=>{sW(this.view.state,e)})}}update(e){let n=e.state.facet(O4);(e.docChanged||n!=e.startState.facet(O4)||n.needsRefresh&&n.needsRefresh(e))&&(this.lintTime=Date.now()+n.delay,this.set||(this.set=!0,this.timeout=window.setTimeout(this.run,n.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),O4=rg.define({combine:e=>({sources:e.map(e=>e.source).filter(e=>null!=e),...rY(e.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,n)=>e?n?r=>e(r)||n(r):e:n})})});function O3(e){let n=[];if(e)i:for(let{name:r}of e){for(let e=0;e<r.length;e++){let i=r[e];if(/[a-zA-Z]/.test(i)&&!n.some(e=>e.toLowerCase()==i.toLowerCase())){n.push(i);continue i}}n.push("")}return n}function O6(e,n,r){var i;let s=r?O3(n.actions):[];return Oq("li",{class:`cm-diagnostic cm-diagnostic-${n.severity}`},Oq("span",{class:"cm-diagnosticText"},n.renderMessage?n.renderMessage(e):n.message),null==(i=n.actions)?void 0:i.map((r,i)=>{let o=!1,a=i=>{if(i.preventDefault(),o)return;o=!0;let s=OU(e.state.field(OJ).diagnostics,n);s&&r.apply(e,s.from,s.to)},{name:l}=r,h=s[i]?l.indexOf(s[i]):-1,c=h<0?l:[l.slice(0,h),Oq("u",l.slice(h,h+1)),l.slice(h+1)];return Oq("button",{type:"button",class:"cm-diagnosticAction",onclick:a,onmousedown:a,"aria-label":` Action: ${l}${h<0?"":` (access key "${s[i]})"`}.`},c)}),n.source&&Oq("div",{class:"cm-diagnosticSource"},n.source))}var O9=class extends sr{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return Oq("span",{class:`cm-lintPoint cm-lintPoint-${this.diagnostic.severity}`})}},O7=class{constructor(e,n){this.diagnostic=n,this.dom=O6(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}id=`item_${Math.floor(0xffffffff*Math.random()).toString(16)}`;dom},O8=class e{constructor(e){this.view=e;let n=n=>{if(27==n.keyCode)O2(this.view),this.view.focus();else if(38==n.keyCode||33==n.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==n.keyCode||34==n.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==n.keyCode)this.moveSelection(0);else if(35==n.keyCode)this.moveSelection(this.items.length-1);else if(13==n.keyCode)this.view.focus();else{if(!(n.keyCode>=65)||!(n.keyCode<=90)||!(this.selectedIndex>=0))return;let{diagnostic:r}=this.items[this.selectedIndex],i=O3(r.actions);for(let s=0;s<i.length;s++)if(i[s].toUpperCase().charCodeAt(0)==n.keyCode){let n=OU(this.view.state.field(OJ).diagnostics,r);n&&r.actions[s].apply(e,n.from,n.to)}}n.preventDefault()},r=e=>{for(let n=0;n<this.items.length;n++)this.items[n].dom.contains(e.target)&&this.moveSelection(n)};this.list=Oq("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:r}),this.dom=Oq("div",{class:"cm-panel-lint"},this.list,Oq("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>O2(this.view)},"\xd7")),this.update()}items=[];dom;list;get selectedIndex(){let{selected:e}=this.view.state.field(OJ);if(!e)return -1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return -1}update(){let{diagnostics:e,selected:n}=this.view.state.field(OJ),r=0,i=!1,s=null;for(e.between(0,this.view.state.doc.length,(e,o,{spec:a})=>{let l=-1,h;for(let e=r;e<this.items.length;e++)if(this.items[e].diagnostic==a.diagnostic){l=e;break}l<0?(h=new O7(this.view,a.diagnostic),this.items.splice(r,0,h),i=!0):(h=this.items[l],l>r&&(this.items.splice(r,l-r),i=!0)),n&&h.diagnostic==n.diagnostic?h.dom.hasAttribute("aria-selected")||(h.dom.setAttribute("aria-selected","true"),s=h):h.dom.hasAttribute("aria-selected")&&h.dom.removeAttribute("aria-selected"),r++});r<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();0==this.items.length&&(this.items.push(new O7(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:e,panel:n})=>{let r=n.height/this.list.offsetHeight;e.top<n.top?this.list.scrollTop-=(n.top-e.top)/r:e.bottom>n.bottom&&(this.list.scrollTop+=(e.bottom-n.bottom)/r)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function n(){let n=e;e=n.nextSibling,n.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)n();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=OU(this.view.state.field(OJ).diagnostics,this.items[e].diagnostic);n&&this.view.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:OK.of(n)})}static open(n){return new e(n)}};function ve(e,n='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${n}>${encodeURIComponent(e)}</svg>')`}function vt(e){return ve(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${e}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}var vn=aO.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:vt("#d11")},".cm-lintRange-warning":{backgroundImage:vt("orange")},".cm-lintRange-info":{backgroundImage:vt("#999")},".cm-lintRange-hint":{backgroundImage:vt("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function vr(e){return"error"==e?4:"warning"==e?3:"info"==e?2:1}var vs=class extends lv{constructor(e){super(),this.diagnostics=e,this.severity=e.reduce((e,n)=>vr(e)<vr(n.severity)?n.severity:e,"hint")}severity;toDOM(e){let n=document.createElement("div");n.className=`cm-lint-marker cm-lint-marker-${this.severity}`;let{diagnostics:r}=this,i=e.state.facet(vc).tooltipFilter;return i&&(r=i(r,e.state)),r.length&&(n.onmouseover=()=>(function(e,n,r){function i(){let i=e.elementAtHeight(n.getBoundingClientRect().top+5-e.documentTop);e.coordsAtPos(i.from)&&e.dispatch({effects:va.of({pos:i.from,above:!1,create:()=>({dom:O1(e,r),getCoords:()=>n.getBoundingClientRect()})})}),n.onmouseout=n.onmousemove=null;let s=r=>{let i=n.getBoundingClientRect();if(!(r.clientX>i.left-10)||!(r.clientX<i.right+10)||!(r.clientY>i.top-10)||!(r.clientY<i.bottom+10)){for(let e=r.target;e;e=e.parentNode)if(1==e.nodeType&&e.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",s),e.state.field(vl)&&e.dispatch({effects:va.of(null)})}};window.addEventListener("mousemove",s)}let{hoverTime:s}=e.state.facet(vc),o=setTimeout(i,s);n.onmouseout=()=>{clearTimeout(o),n.onmouseout=n.onmousemove=null},n.onmousemove=()=>{clearTimeout(o),o=setTimeout(i,s)}})(e,n,r)),n}};l_({class:"cm-gutter-lint",markers:e=>e.state.field(vo)});var vo=rx.define({create:()=>r0.empty,update(e,n){e=e.map(n.changes);let r=n.state.facet(vc).markerFilter;for(let i of n.effects)if(i.is(OG)){let s=i.value;r&&(s=r(s||[],n.state)),e=function(e,n){let r=Object.create(null);for(let i of n){let n=e.lineAt(i.from);(r[n.from]||(r[n.from]=[])).push(i)}let i=[];for(let e in r)i.push(new vs(r[e]).range(+e));return r0.of(i,!0)}(n.state.doc,s.slice(0))}return e}}),va=rV.define(),vl=rx.define({create:()=>null,update:(e,n)=>(e&&n.docChanged&&(e=OY(n,e)?null:{...e,pos:n.changes.mapPos(e.pos)}),n.effects.reduce((e,n)=>n.is(va)?n.value:e,e)),provide:e=>lo.from(e)});aO.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:ve('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:ve('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error":{content:ve('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}});var vh=[OJ,aO.decorations.compute([OJ],e=>{let{selected:n,panel:r}=e.field(OJ);return n&&r&&n.from!=n.to?ss.set([O0.range(n.from,n.to)]):ss.none}),lu(function(e,n,r){let{diagnostics:i}=e.state.field(OJ),s=[],o=2e8,a=0;i.between(n-(r<0),n+ +(r>0),(e,i,{spec:l})=>{n>=e&&n<=i&&(e==i||(n>e||r>0)&&(n<i||r<0))&&(s.push(l.diagnostic),o=Math.min(e,o),a=Math.max(i,a))});let l=e.state.facet(O4).tooltipFilter;return(l&&(s=l(s,e.state)),s.length)?{pos:o,end:a,above:e.state.doc.lineAt(o).to<a,create:()=>({dom:O1(e,s)})}:null},{hideOn:OY}),vn],vc=rg.define({combine:e=>rY(e,{hoverTime:300,markerFilter:null,tooltipFilter:null})});async function vu(e,n){let r=await n(e),i=ss.none;return i.update({add:r.map(({target:e,range:n})=>ss.mark({class:"cm-link",attributes:{"data-link":e}}).range(n.from,n.to))})}class vd{constructor(e,n,r,i){this.state=e,this.pos=n,this.explicit=r,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=c$(this.state).resolveInner(this.pos,-1);for(;n&&0>e.indexOf(n.name);)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),r=Math.max(n.from,this.pos-250),i=n.text.slice(r-n.from,this.pos-n.from),s=i.search(vy(e,!1));return s<0?null:{from:r+s,to:this.pos,text:i.slice(s)}}get aborted(){return null==this.abortListeners}addEventListener(e,n,r){"abort"==e&&this.abortListeners&&(this.abortListeners.push(n),r&&r.onDocChange&&(this.abortOnDocChange=!0))}}function vp(e){let n=Object.keys(e).join(""),r=/\w/.test(n);return r&&(n=n.replace(/\w/g,"")),`[${r?"\\w":""}${n.replace(/[^\w\s]/g,"\\$&")}]`}function vf(e){let n=e.map(e=>"string"==typeof e?{label:e}:e),[r,i]=n.every(e=>/^\w+$/.test(e.label))?[/\w*$/,/\w+$/]:function(e){let n=Object.create(null),r=Object.create(null);for(let{label:i}of e){n[i[0]]=!0;for(let e=1;e<i.length;e++)r[i[e]]=!0}let i=vp(n)+vp(r)+"*$";return[RegExp("^"+i),new RegExp(i)]}(n);return e=>{let s=e.matchBefore(i);return s||e.explicit?{from:s?s.from:e.pos,options:n,validFor:r}:null}}class vg{constructor(e,n,r,i){this.completion=e,this.source=n,this.match=r,this.score=i}}function vm(e){return e.selection.main.from}function vy(e,n){var r;let{source:i}=e,s=n&&"^"!=i[0],o="$"!=i[i.length-1];return s||o?RegExp(`${s?"^":""}(?:${i})${o?"$":""}`,null!=(r=e.flags)?r:e.ignoreCase?"i":""):e}let vO=rL.define();function vv(e,n,r,i){let{main:s}=e.selection,o=r-s.from,a=i-s.from;return Object.assign(Object.assign({},e.changeByRange(l=>{if(l!=s&&r!=i&&e.sliceDoc(l.from+o,l.from+a)!=e.sliceDoc(r,i))return{range:l};let h=e.toText(n);return{changes:{from:l.from+o,to:i==s.from?l.to:l.from+a,insert:h},range:rd.cursor(l.from+o+h.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}let vb=new WeakMap;function vx(e){if(!Array.isArray(e))return e;let n=vb.get(e);return n||vb.set(e,n=vf(e)),n}let vw=rV.define(),vS=rV.define();class v_{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let r=n7(e,n),i=re(r);this.chars.push(r);let s=e.slice(n,n+i),o=s.toUpperCase();this.folded.push(n7(o==s?s.toLowerCase():o,0)),n+=i}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(0==this.pattern.length)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:r,any:i,precise:s,byWord:o}=this;if(1==n.length){let i=n7(e,0),s=re(i),o=s==e.length?0:-100;if(i==n[0]);else{if(i!=r[0])return null;o+=-200}return this.ret(o,[0,s])}let a=e.indexOf(this.pattern);if(0==a)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,h=0;if(a<0){for(let s=0,o=Math.min(e.length,200);s<o&&h<l;){let o=n7(e,s);(o==n[h]||o==r[h])&&(i[h++]=s),s+=re(o)}if(h<l)return null}let c=0,u=0,d=!1,p=0,f=-1,g=-1,m=/[a-z]/.test(e),y=!0;for(let i=0,h=Math.min(e.length,200),O=0;i<h&&u<l;){let h=n7(e,i);a<0&&(c<l&&h==n[c]&&(s[c++]=i),p<l&&(h==n[p]||h==r[p]?(0==p&&(f=i),g=i+1,p++):p=0));let b,x=h<255?h>=48&&h<=57||h>=97&&h<=122?2:+(h>=65&&h<=90):(b=n8(h))!=b.toLowerCase()?1:2*(b!=b.toUpperCase());(!i||1==x&&m||0==O&&0!=x)&&(n[u]==h||r[u]==h&&(d=!0)?o[u++]=i:o.length&&(y=!1)),O=x,i+=re(h)}return u==l&&0==o[0]&&y?this.result(-100+(d?-200:0),o,e):p==l&&0==f?this.ret(-200-e.length+(g==e.length?0:-100),[0,g]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):p==l?this.ret(-900-e.length,[f,g]):u==l?this.result(-100+(d?-200:0)+-700+(y?0:-1100),o,e):2==n.length?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,n,r){let i=[],s=0;for(let e of n){let n=e+(this.astral?re(n7(r,e)):1);s&&i[s-1]==e?i[s-1]=n:(i[s++]=e,i[s++]=n)}return this.ret(e-r.length,i)}}class vk{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),r=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return null==r?null:(this.matched=[0,n.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}}let vC=rg.define({combine:e=>rY(e,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:vT,filterStrict:!1,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>r=>vE(e(r),n(r)),optionClass:(e,n)=>r=>vE(e(r),n(r)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})});function vE(e,n){return e?n?e+" "+n:e:n}function vT(e,n,r,i,s,o){let a=e.textDirection==sy.RTL,l=a,h=!1,c="top",u,d,p=n.left-s.left,f=s.right-n.right,g=i.right-i.left,m=i.bottom-i.top;if(l&&p<Math.min(g,f)?l=!1:!l&&f<Math.min(g,p)&&(l=!0),g<=(l?p:f))u=Math.max(s.top,Math.min(r.top,s.bottom-m))-n.top,d=Math.min(400,l?p:f);else{h=!0,d=Math.min(400,(a?n.right:s.right-n.left)-30);let e=s.bottom-n.bottom;e>=m||e>n.top?u=r.bottom-n.top:(c="bottom",u=n.bottom-r.top)}let y=(n.bottom-n.top)/o.offsetHeight,O=(n.right-n.left)/o.offsetWidth;return{style:`${c}: ${u/y}px; max-width: ${d/O}px`,class:"cm-completionInfo-"+(h?a?"left-narrow":"right-narrow":l?"left":"right")}}function vP(e,n,r){if(e<=r)return{from:0,to:e};if(n<0&&(n=0),n<=e>>1){let e=Math.floor(n/r);return{from:e*r,to:(e+1)*r}}let i=Math.floor((e-n)/r);return{from:e-(i+1)*r,to:e-i*r}}class vA{constructor(e,n,r){this.view=e,this.stateField=n,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:e=>this.placeInfo(e),key:this},this.space=null,this.currentClass="";let i=e.state.field(n),{options:s,selected:o}=i.open,a=e.state.facet(vC);this.optionContent=function(e){let n=e.addToOptions.slice();return e.icons&&n.push({render(e){let n=document.createElement("div");return n.classList.add("cm-completionIcon"),e.type&&n.classList.add(...e.type.split(/\s+/g).map(e=>"cm-completionIcon-"+e)),n.setAttribute("aria-hidden","true"),n},position:20}),n.push({render(e,n,r,i){let s=document.createElement("span");s.className="cm-completionLabel";let o=e.displayLabel||e.label,a=0;for(let e=0;e<i.length;){let n=i[e++],r=i[e++];n>a&&s.appendChild(document.createTextNode(o.slice(a,n)));let l=s.appendChild(document.createElement("span"));l.appendChild(document.createTextNode(o.slice(n,r))),l.className="cm-completionMatchedText",a=r}return a<o.length&&s.appendChild(document.createTextNode(o.slice(a))),s},position:50},{render(e){if(!e.detail)return null;let n=document.createElement("span");return n.className="cm-completionDetail",n.textContent=e.detail,n},position:80}),n.sort((e,n)=>e.position-n.position).map(e=>e.render)}(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=vP(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",r=>{let{options:i}=e.state.field(n).open;for(let n=r.target,s;n&&n!=this.dom;n=n.parentNode)if("LI"==n.nodeName&&(s=/-(\d+)$/.exec(n.id))&&+s[1]<i.length){this.applyCompletion(e,i[+s[1]]),r.preventDefault();return}}),this.dom.addEventListener("focusout",n=>{let r=e.state.field(this.stateField,!1);r&&r.tooltip&&e.state.facet(vC).closeOnBlur&&n.relatedTarget!=e.contentDOM&&e.dispatch({effects:vS.of(null)})}),this.showOptions(s,i.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let r=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=i){let{options:s,selected:o,disabled:a}=r.open;i.open&&i.open.options==s||(this.range=vP(s.length,o,e.state.facet(vC).maxRenderedOptions),this.showOptions(s,r.id)),this.updateSel(),a!=(null==(n=i.open)?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let e of this.currentClass.split(" "))e&&this.dom.classList.remove(e);for(let e of n.split(" "))e&&this.dom.classList.add(e);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=vP(n.options.length,n.selected,this.view.state.facet(vC).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:r}=n.options[n.selected],{info:i}=r;if(!i)return;let s="string"==typeof i?document.createTextNode(i):i(r);if(!s)return;"then"in s?s.then(n=>{n&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(n,r)}).catch(e=>sW(this.view.state,e,"completion info")):this.addInfoPane(s,r)}}addInfoPane(e,n){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",null!=e.nodeType)r.appendChild(e),this.infoDestroy=null;else{let{dom:n,destroy:i}=e;r.appendChild(n),this.infoDestroy=i||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){var n,r;let i,s,o,a=null;for(let n=this.list.firstChild,r=this.range.from;n;n=n.nextSibling,r++)"LI"==n.nodeName&&n.id?r==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),a=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected"):r--;return a&&(n=this.list,r=a,i=n.getBoundingClientRect(),s=r.getBoundingClientRect(),o=i.height/n.offsetHeight,s.top<i.top?n.scrollTop-=(i.top-s.top)/o:s.bottom>i.bottom&&(n.scrollTop+=(s.bottom-i.bottom)/o)),a}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let e=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:e.clientWidth,bottom:e.clientHeight}}return i.top>Math.min(s.bottom,n.bottom)-10||i.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(vC).positionInfo(this.view,n,i,r,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,r){let i=document.createElement("ul");i.id=n,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions")),i.addEventListener("mousedown",e=>{e.target==i&&e.preventDefault()});let s=null;for(let o=r.from;o<r.to;o++){let{completion:a,match:l}=e[o],{section:h}=a;if(h){let e="string"==typeof h?h:h.name;e!=s&&(o>r.from||0==r.from)&&(s=e,"string"!=typeof h&&h.header?i.appendChild(h.header(h)):i.appendChild(document.createElement("completion-section")).textContent=e)}let c=i.appendChild(document.createElement("li"));c.id=n+"-"+o,c.setAttribute("role","option");let u=this.optionClass(a);for(let e of(u&&(c.className=u),this.optionContent)){let n=e(a,this.view.state,this.view,l);n&&c.appendChild(n)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function vM(e){return 100*(e.boost||0)+10*!!e.apply+5*!!e.info+ +!!e.type}class vN{constructor(e,n,r,i,s,o){this.options=e,this.attrs=n,this.tooltip=r,this.timestamp=i,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new vN(this.options,vR(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,r,i,s,o){if(i&&!o&&e.some(e=>e.isPending))return i.setDisabled();let a=function(e,n){let r=[],i=null,s=e=>{r.push(e);let{section:n}=e.completion;if(n){i||(i=[]);let e="string"==typeof n?n:n.name;i.some(n=>n.name==e)||i.push("string"==typeof n?{name:e}:n)}},o=n.facet(vC);for(let i of e)if(i.hasResult()){let e=i.result.getMatch;if(!1===i.result.filter)for(let n of i.result.options)s(new vg(n,i.source,e?e(n):[],1e9-r.length));else{let r=n.sliceDoc(i.from,i.to),a,l=o.filterStrict?new vk(r):new v_(r);for(let n of i.result.options)if(a=l.match(n.label)){let r=n.displayLabel?e?e(n,a.matched):[]:a.matched;s(new vg(n,i.source,r,a.score+(n.boost||0)))}}}if(i){let e=Object.create(null),n=0;for(let r of i.sort((e,n)=>{var r,i;return(null!=(r=e.rank)?r:1e9)-(null!=(i=n.rank)?i:1e9)||(e.name<n.name?-1:1)}))n-=1e5,e[r.name]=n;for(let n of r){let{section:r}=n.completion;r&&(n.score+=e["string"==typeof r?r:r.name])}}let a=[],l=null,h=o.compareCompletions;for(let e of r.sort((e,n)=>n.score-e.score||h(e.completion,n.completion))){let n=e.completion;l&&l.label==n.label&&l.detail==n.detail&&(null==l.type||null==n.type||l.type==n.type)&&l.apply==n.apply&&l.boost==n.boost?vM(e.completion)>vM(l)&&(a[a.length-1]=e):a.push(e),l=e.completion}return a}(e,n);if(!a.length)return i&&e.some(e=>e.isPending)?i.setDisabled():null;let l=n.facet(vC).selectOnOpen?0:-1;if(i&&i.selected!=l&&-1!=i.selected){let e=i.options[i.selected].completion;for(let n=0;n<a.length;n++)if(a[n].completion==e){l=n;break}}return new vN(a,vR(r,l),{pos:e.reduce((e,n)=>n.hasResult()?Math.min(e,n.from):e,1e8),create:vq,above:s.aboveCursor},i?i.timestamp:Date.now(),l,!1)}map(e){return new vN(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new vN(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class vD{constructor(e,n,r){this.active=e,this.id=n,this.open=r}static start(){return new vD(vL,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(e){let{state:n}=e,r=n.facet(vC),i=(r.override||n.languageDataAt("autocomplete",vm(n)).map(vx)).map(n=>(this.active.find(e=>e.source==n)||new vj(n,+!!this.active.some(e=>0!=e.state))).update(e,r));i.length==this.active.length&&i.every((e,n)=>e==this.active[n])&&(i=this.active);let s=this.open,o=e.effects.some(e=>e.is(vz));for(let a of(s&&e.docChanged&&(s=s.map(e.changes)),e.selection||i.some(n=>n.hasResult()&&e.changes.touchesRange(n.from,n.to))||!function(e,n){if(e==n)return!0;for(let r=0,i=0;;){for(;r<e.length&&!e[r].hasResult();)r++;for(;i<n.length&&!n[i].hasResult();)i++;let s=r==e.length,o=i==n.length;if(s||o)return s==o;if(e[r++].result!=n[i++].result)return!1}}(i,this.active)||o?s=vN.build(i,n,this.id,s,r,o):s&&s.disabled&&!i.some(e=>e.isPending)&&(s=null),!s&&i.every(e=>!e.isPending)&&i.some(e=>e.hasResult())&&(i=i.map(e=>e.hasResult()?new vj(e.source,0):e)),e.effects))a.is(vB)&&(s=s&&s.setSelected(a.value,this.id));return i==this.active&&s==this.open?this:new vD(i,this.id,s)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?vI:v$}}let vI={"aria-autocomplete":"list"},v$={};function vR(e,n){let r={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":e};return n>-1&&(r["aria-activedescendant"]=e+"-"+n),r}let vL=[];function vQ(e,n){if(e.isUserEvent("input.complete")){let r=e.annotation(vO);if(r&&n.activateOnCompletion(r))return 12}let r=e.isUserEvent("input.type");return r&&n.activateOnTyping?5:r?1:e.isUserEvent("delete.backward")?2:e.selection?8:16*!!e.docChanged}class vj{constructor(e,n,r=!1){this.source=e,this.state=n,this.explicit=r}hasResult(){return!1}get isPending(){return 1==this.state}update(e,n){let r=vQ(e,n),i=this;for(let n of((8&r||16&r&&this.touches(e))&&(i=new vj(i.source,0)),4&r&&0==i.state&&(i=new vj(this.source,1)),i=i.updateFor(e,r),e.effects))if(n.is(vw))i=new vj(i.source,1,n.value);else if(n.is(vS))i=new vj(i.source,0);else if(n.is(vz))for(let e of n.value)e.source==i.source&&(i=e);return i}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(vm(e.state))}}class vV extends vj{constructor(e,n,r,i,s,o){super(e,3,n),this.limit=r,this.result=i,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,n){var r;if(!(3&n))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=vm(e.state);if(a>o||!i||2&n&&(vm(e.startState)==this.from||a<this.limit))return new vj(this.source,4&n?1:0);let l=e.changes.mapPos(this.limit);return!function(e,n,r,i){if(!e)return!1;let s=n.sliceDoc(r,i);return"function"==typeof e?e(s,r,i,n):vy(e,!0).test(s)}(i.validFor,e.state,s,o)?i.update&&(i=i.update(i,s,o,new vd(e.state,a,!1)))?new vV(this.source,this.explicit,l,i,i.from,null!=(r=i.to)?r:vm(e.state)):new vj(this.source,1,this.explicit):new vV(this.source,this.explicit,l,i,s,o)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new vV(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new vj(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}let vz=rV.define({map:(e,n)=>e.map(e=>e.map(n))}),vB=rV.define(),vF=rx.define({create:()=>vD.start(),update:(e,n)=>e.update(n),provide:e=>[lo.from(e,e=>e.tooltip),aO.contentAttributes.from(e,e=>e.attrs)]});function vZ(e,n){let r=n.completion.apply||n.completion.label,i=e.state.field(vF).active.find(e=>e.source==n.source);return i instanceof vV&&("string"==typeof r?e.dispatch(Object.assign(Object.assign({},vv(e.state,r,i.from,i.to)),{annotations:vO.of(n.completion)})):r(e,n.completion,i.from,i.to),!0)}let vq=e=>new vA(e,vF,vZ);function vW(e,n="option"){return r=>{let i=r.state.field(vF,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<r.state.facet(vC).interactionDelay)return!1;let s=1,o;"page"==n&&(o=ld(r,i.open.tooltip))&&(s=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:a}=i.open.options,l=i.open.selected>-1?i.open.selected+s*(e?1:-1):e?0:a-1;return l<0?l="page"==n?0:a-1:l>=a&&(l="page"==n?a-1:0),r.dispatch({effects:vB.of(l)}),!0}}let vX=e=>{let n=e.state.field(vF,!1);return!(e.state.readOnly||!n||!n.open||n.open.selected<0||n.open.disabled||Date.now()-n.open.timestamp<e.state.facet(vC).interactionDelay)&&vZ(e,n.open.options[n.open.selected])},vU=e=>!!e.state.field(vF,!1)&&(e.dispatch({effects:vw.of(!0)}),!0);class vY{constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}let vG=sG.fromClass(class{constructor(e){for(let n of(this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0,e.state.field(vF).active))n.isPending&&this.startQuery(n)}update(e){let n=e.state.field(vF),r=e.state.facet(vC);if(!e.selectionSet&&!e.docChanged&&e.startState.field(vF)==n)return;let i=e.transactions.some(e=>{let n=vQ(e,r);return 8&n||(e.selection||e.docChanged)&&!(3&n)});for(let n=0;n<this.running.length;n++){let r=this.running[n];if(i||r.context.abortOnDocChange&&e.docChanged||r.updates.length+e.transactions.length>50&&Date.now()-r.time>1e3){for(let e of r.context.abortListeners)try{e()}catch(e){sW(this.view.state,e)}r.context.abortListeners=null,this.running.splice(n--,1)}else r.updates.push(...e.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),e.transactions.some(e=>e.effects.some(e=>e.is(vw)))&&(this.pendingStart=!0);let s=this.pendingStart?50:r.activateOnTypingDelay;if(this.debounceUpdate=n.active.some(e=>e.isPending&&!this.running.some(n=>n.active.source==e.source))?setTimeout(()=>this.startUpdate(),s):-1,0!=this.composing)for(let n of e.transactions)n.isUserEvent("input.type")?this.composing=2:2==this.composing&&n.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:e}=this.view,n=e.field(vF);for(let e of n.active)e.isPending&&!this.running.some(n=>n.active.source==e.source)&&this.startQuery(e);this.running.length&&n.open&&n.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(vC).updateSyncTime))}startQuery(e){let{state:n}=this.view,r=vm(n),i=new vd(n,r,e.explicit,this.view),s=new vY(e,i);this.running.push(s),Promise.resolve(e.source(i)).then(e=>{s.context.aborted||(s.done=e||null,this.scheduleAccept())},e=>{this.view.dispatch({effects:vS.of(null)}),sW(this.view.state,e)})}scheduleAccept(){this.running.every(e=>void 0!==e.done)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(vC).updateSyncTime))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let n=[],r=this.view.state.facet(vC),i=this.view.state.field(vF);for(let s=0;s<this.running.length;s++){let o=this.running[s];if(void 0===o.done)continue;if(this.running.splice(s--,1),o.done){let i=vm(o.updates.length?o.updates[0].startState:this.view.state),s=Math.min(i,o.done.from+ +!o.active.explicit),a=new vV(o.active.source,o.active.explicit,s,o.done,o.done.from,null!=(e=o.done.to)?e:i);for(let e of o.updates)a=a.update(e,r);if(a.hasResult()){n.push(a);continue}}let a=i.active.find(e=>e.source==o.active.source);if(a&&a.isPending)if(null==o.done){let e=new vj(o.active.source,0);for(let n of o.updates)e=e.update(n,r);e.isPending||n.push(e)}else this.startQuery(a)}(n.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:vz.of(n)})}},{eventHandlers:{blur(e){let n=this.view.state.field(vF,!1);if(n&&n.tooltip&&this.view.state.facet(vC).closeOnBlur){let r=n.open&&ld(this.view,n.open.tooltip);r&&r.dom.contains(e.relatedTarget)||setTimeout(()=>this.view.dispatch({effects:vS.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout(()=>this.view.dispatch({effects:vw.of(!1)}),20),this.composing=0}}}),vH="object"==typeof navigator&&/Win/.test(navigator.platform),vK=rS.highest(aO.domEventHandlers({keydown(e,n){let r=n.state.field(vF,!1);if(!r||!r.open||r.open.disabled||r.open.selected<0||e.key.length>1||e.ctrlKey&&!(vH&&e.altKey)||e.metaKey)return!1;let i=r.open.options[r.open.selected],s=r.active.find(e=>e.source==i.source),o=i.completion.commitCharacters||s.result.commitCharacters;return o&&o.indexOf(e.key)>-1&&vZ(n,i),!1}})),vJ=aO.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xb7\xb7\xb7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'\uD835\uDC65'"}},".cm-completionIcon-constant":{"&:after":{content:"'\uD835\uDC36'"}},".cm-completionIcon-type":{"&:after":{content:"'\uD835\uDC61'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\uD83D\uDD11︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class v0{constructor(e,n,r,i){this.field=e,this.line=n,this.from=r,this.to=i}}class v1{constructor(e,n,r){this.field=e,this.from=n,this.to=r}map(e){let n=e.mapPos(this.from,-1,rn.TrackDel),r=e.mapPos(this.to,1,rn.TrackDel);return null==n||null==r?null:new v1(this.field,n,r)}}class v2{constructor(e,n){this.lines=e,this.fieldPositions=n}instantiate(e,n){let r=[],i=[n],s=e.doc.lineAt(n),o=/^\s*/.exec(s.text)[0];for(let s of this.lines){if(r.length){let r=o,a=/^\t*/.exec(s)[0].length;for(let n=0;n<a;n++)r+=e.facet(cX);i.push(n+r.length-a),s=r+s.slice(a)}r.push(s),n+=s.length+1}return{text:r,ranges:this.fieldPositions.map(e=>new v1(e.field,i[e.line]+e.from,i[e.line]+e.to))}}static parse(e){let n=[],r=[],i=[],s;for(let o of e.split(/\r\n?|\n/)){for(;s=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(o);){let e=s[1]?+s[1]:null,a=s[2]||s[3]||"",l=-1,h=a.replace(/\\[{}]/g,e=>e[1]);for(let r=0;r<n.length;r++)(null!=e?n[r].seq==e:h&&n[r].name==h)&&(l=r);if(l<0){let r=0;for(;r<n.length&&(null==e||null!=n[r].seq&&n[r].seq<e);)r++;for(let s of(n.splice(r,0,{seq:e,name:h}),l=r,i))s.field>=l&&s.field++}i.push(new v0(l,r.length,s.index,s.index+h.length)),o=o.slice(0,s.index)+a+o.slice(s.index+s[0].length)}o=o.replace(/\\([{}])/g,(e,n,s)=>{for(let e of i)e.line==r.length&&e.from>s&&(e.from--,e.to--);return n}),r.push(o)}return new v2(r,i)}}let v5=ss.widget({widget:new class extends sr{toDOM(){let e=document.createElement("span");return e.className="cm-snippetFieldPosition",e}ignoreEvent(){return!1}}}),v4=ss.mark({class:"cm-snippetField"});class v3{constructor(e,n){this.ranges=e,this.active=n,this.deco=ss.set(e.map(e=>(e.from==e.to?v5:v4).range(e.from,e.to)))}map(e){let n=[];for(let r of this.ranges){let i=r.map(e);if(!i)return null;n.push(i)}return new v3(n,this.active)}selectionInsideField(e){return e.ranges.every(e=>this.ranges.some(n=>n.field==this.active&&n.from<=e.from&&n.to>=e.to))}}let v6=rV.define({map:(e,n)=>e&&e.map(n)}),v9=rV.define(),v7=rx.define({create:()=>null,update(e,n){for(let r of n.effects){if(r.is(v6))return r.value;if(r.is(v9)&&e)return new v3(e.ranges,r.value)}return e&&n.docChanged&&(e=e.map(n.changes)),e&&n.selection&&!e.selectionInsideField(n.selection)&&(e=null),e},provide:e=>aO.decorations.from(e,e=>e?e.deco:ss.none)});function v8(e,n){return rd.create(e.filter(e=>e.field==n).map(e=>rd.range(e.from,e.to)))}function be(e){let n=v2.parse(e);return(e,r,i,s)=>{let{text:o,ranges:a}=n.instantiate(e.state,i),{main:l}=e.state.selection,h={changes:{from:i,to:s==l.from?l.to:s,insert:nK.of(o)},scrollIntoView:!0,annotations:r?[vO.of(r),rz.userEvent.of("input.complete")]:void 0};if(a.length&&(h.selection=v8(a,0)),a.some(e=>e.field>0)){let n=new v3(a,0),r=h.effects=[v6.of(n)];void 0===e.state.field(v7,!1)&&r.push(rV.appendConfig.of([v7,bi,bo,vJ]))}e.dispatch(e.state.update(h))}}function bt(e){return({state:n,dispatch:r})=>{let i=n.field(v7,!1);if(!i||e<0&&0==i.active)return!1;let s=i.active+e,o=e>0&&!i.ranges.some(n=>n.field==s+e);return r(n.update({selection:v8(i.ranges,s),effects:v6.of(o?null:new v3(i.ranges,s)),scrollIntoView:!0})),!0}}let bn=[{key:"Tab",run:bt(1),shift:bt(-1)},{key:"Escape",run:({state:e,dispatch:n})=>!!e.field(v7,!1)&&(n(e.update({effects:v6.of(null)})),!0)}],br=rg.define({combine:e=>e.length?e[0]:bn}),bi=rS.highest(aC.compute([br],e=>e.facet(br)));function bs(e,n){return Object.assign(Object.assign({},n),{apply:be(e)})}let bo=aO.domEventHandlers({mousedown(e,n){let r=n.state.field(v7,!1),i;if(!r||null==(i=n.posAtCoords({x:e.clientX,y:e.clientY})))return!1;let s=r.ranges.find(e=>e.from<=i&&e.to>=i);return!!s&&s.field!=r.active&&(n.dispatch({selection:v8(r.ranges,s.field),effects:v6.of(r.ranges.some(e=>e.field>s.field)?new v3(r.ranges,s.field):null),scrollIntoView:!0}),!0)}}),ba={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},bl=rV.define({map(e,n){let r=n.mapPos(e,-1,rn.TrackAfter);return null==r?void 0:r}}),bh=new class extends rG{};bh.startSide=1,bh.endSide=-1;let bc=rx.define({create:()=>r0.empty,update(e,n){if(e=e.map(n.changes),n.selection){let r=n.state.doc.lineAt(n.selection.main.head);e=e.update({filter:e=>e>=r.from&&e<=r.to})}for(let r of n.effects)r.is(bl)&&(e=e.update({add:[bh.range(r.value,r.value+1)]}));return e}}),bu="()[]{}<>\xab\xbb\xbb\xab［］｛｝";function bd(e){for(let n=0;n<bu.length;n+=2)if(bu.charCodeAt(n)==e)return bu.charAt(n+1);return n8(e<128?e:e+1)}function bp(e,n){return e.languageDataAt("closeBrackets",n)[0]||ba}let bf="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),bg=aO.inputHandler.of((e,n,r,i)=>{if((bf?e.composing:e.compositionStarted)||e.state.readOnly)return!1;let s=e.state.selection.main;if(i.length>2||2==i.length&&1==re(n7(i,0))||n!=s.from||r!=s.to)return!1;let o=function(e,n){let r=bp(e,e.selection.main.head),i=r.brackets||ba.brackets;for(let s of i){let o=bd(n7(s,0));if(n==s)return o==s?function(e,n,r,i){let s=i.stringPrefixes||ba.stringPrefixes,o=null,a=e.changeByRange(i=>{if(!i.empty)return{changes:[{insert:n,from:i.from},{insert:n,from:i.to}],effects:bl.of(i.to+n.length),range:rd.range(i.anchor+n.length,i.head+n.length)};let a=i.head,l=bO(e.doc,a),h;if(l==n){if(bv(e,a))return{changes:{insert:n+n,from:a},effects:bl.of(a+n.length),range:rd.cursor(a+n.length)};else if(by(e,a)){let i=r&&e.sliceDoc(a,a+3*n.length)==n+n+n?n+n+n:n;return{changes:{from:a,to:a+i.length,insert:i},range:rd.cursor(a+i.length)}}}else if(r&&e.sliceDoc(a-2*n.length,a)==n+n&&(h=bb(e,a-2*n.length,s))>-1&&bv(e,h))return{changes:{insert:n+n+n+n,from:a},effects:bl.of(a+n.length),range:rd.cursor(a+n.length)};else if(e.charCategorizer(a)(l)!=rW.Word&&bb(e,a,s)>-1&&!function(e,n,r,i){let s=c$(e).resolveInner(n,-1),o=i.reduce((e,n)=>Math.max(e,n.length),0);for(let a=0;a<5;a++){let a=e.sliceDoc(s.from,Math.min(s.to,s.from+r.length+o)),l=a.indexOf(r);if(!l||l>-1&&i.indexOf(a.slice(0,l))>-1){let n=s.firstChild;for(;n&&n.from==s.from&&n.to-n.from>r.length+l;){if(e.sliceDoc(n.to-r.length,n.to)==r)return!1;n=n.firstChild}return!0}let h=s.to==n&&s.parent;if(!h)break;s=h}return!1}(e,a,n,s))return{changes:{insert:n+n,from:a},effects:bl.of(a+n.length),range:rd.cursor(a+n.length)};return{range:o=i}});return o?null:e.update(a,{scrollIntoView:!0,userEvent:"input.type"})}(e,s,i.indexOf(s+s+s)>-1,r):function(e,n,r,i){let s=null,o=e.changeByRange(o=>{if(!o.empty)return{changes:[{insert:n,from:o.from},{insert:r,from:o.to}],effects:bl.of(o.to+n.length),range:rd.range(o.anchor+n.length,o.head+n.length)};let a=bO(e.doc,o.head);return!a||/\s/.test(a)||i.indexOf(a)>-1?{changes:{insert:n+r,from:o.head},effects:bl.of(o.head+n.length),range:rd.cursor(o.head+n.length)}:{range:s=o}});return s?null:e.update(o,{scrollIntoView:!0,userEvent:"input.type"})}(e,s,o,r.before||ba.before);if(n==o&&by(e,e.selection.main.from))return function(e,n,r){let i=null,s=e.changeByRange(n=>n.empty&&bO(e.doc,n.head)==r?{changes:{from:n.head,to:n.head+r.length,insert:r},range:rd.cursor(n.head+r.length)}:i={range:n});return i?null:e.update(s,{scrollIntoView:!0,userEvent:"input.type"})}(e,0,o)}return null}(e.state,i);return!!o&&(e.dispatch(o),!0)}),bm=[{key:"Backspace",run:({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=bp(e,e.selection.main.head).brackets||ba.brackets,i=null,s=e.changeByRange(n=>{if(n.empty){var s,o;let i,a=(s=e.doc,o=n.head,re(n7(i=s.sliceString(o-2,o),0))==i.length?i:i.slice(1));for(let i of r)if(i==a&&bO(e.doc,n.head)==bd(n7(i,0)))return{changes:{from:n.head-i.length,to:n.head+i.length},range:rd.cursor(n.head-i.length)}}return{range:i=n}});return i||n(e.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!i}}];function by(e,n){let r=!1;return e.field(bc).between(0,e.doc.length,e=>{e==n&&(r=!0)}),r}function bO(e,n){let r=e.sliceString(n,n+2);return r.slice(0,re(n7(r,0)))}function bv(e,n){let r=c$(e).resolveInner(n+1);return r.parent&&r.from==n}function bb(e,n,r){let i=e.charCategorizer(n);if(i(e.sliceDoc(n-1,n))!=rW.Word)return n;for(let s of r){let r=n-s.length;if(e.sliceDoc(r,n)==s&&i(e.sliceDoc(r-1,r))!=rW.Word)return r}return -1}function bx(e={}){return[vK,vF,vC.of(e),vG,bS,vJ]}let bw=[{key:"Ctrl-Space",run:vU},{mac:"Alt-`",run:vU},{key:"Escape",run:e=>{let n=e.state.field(vF,!1);return!!n&&!!n.active.some(e=>0!=e.state)&&(e.dispatch({effects:vS.of(null)}),!0)}},{key:"ArrowDown",run:vW(!0)},{key:"ArrowUp",run:vW(!1)},{key:"PageDown",run:vW(!0,"page")},{key:"PageUp",run:vW(!1,"page")},{key:"Enter",run:vX}],bS=rS.highest(aC.computeN([vC],e=>e.facet(vC).defaultKeymap?[bw]:[]));function b_(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var bk=b_(),bC={exec:()=>null};function bE(e,n=""){let r="string"==typeof e?e:e.source,i={replace:(e,n)=>{let s="string"==typeof n?n:n.source;return s=s.replace(bT.caret,"$1"),r=r.replace(e,s),i},getRegex:()=>new RegExp(r,n)};return i}var bT={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},bP=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,bA=/(?:[*+-]|\d{1,9}[.)])/,bM=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,bN=bE(bM).replace(/bull/g,bA).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),bD=bE(bM).replace(/bull/g,bA).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),bI=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,b$=/(?!\s*\])(?:\\.|[^\[\]\\])+/,bR=bE(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",b$).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),bL=bE(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,bA).getRegex(),bQ="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",bj=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,bV=bE("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",bj).replace("tag",bQ).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),bz=bE(bI).replace("hr",bP).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",bQ).getRegex(),bB={blockquote:bE(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",bz).getRegex(),code:/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,def:bR,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:bP,html:bV,lheading:bN,list:bL,newline:/^(?:[ \t]*(?:\n|$))+/,paragraph:bz,table:bC,text:/^[^\n]+/},bF=bE("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",bP).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",bQ).getRegex(),bZ={...bB,lheading:bD,table:bF,paragraph:bE(bI).replace("hr",bP).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",bF).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",bQ).getRegex()},bq={...bB,html:bE(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",bj).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:bC,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:bE(bI).replace("hr",bP).replace("heading"," *#{1,6} *[^\n]").replace("lheading",bN).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},bW=/^( {2,}|\\)\n(?!\s*$)/,bX=/[\p{P}\p{S}]/u,bU=/[\s\p{P}\p{S}]/u,bY=/[^\s\p{P}\p{S}]/u,bG=bE(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,bU).getRegex(),bH=/(?!~)[\p{P}\p{S}]/u,bK=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,bJ=bE(bK,"u").replace(/punct/g,bX).getRegex(),b0=bE(bK,"u").replace(/punct/g,bH).getRegex(),b1="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",b2=bE(b1,"gu").replace(/notPunctSpace/g,bY).replace(/punctSpace/g,bU).replace(/punct/g,bX).getRegex(),b5=bE(b1,"gu").replace(/notPunctSpace/g,/(?:[^\s\p{P}\p{S}]|~)/u).replace(/punctSpace/g,/(?!~)[\s\p{P}\p{S}]/u).replace(/punct/g,bH).getRegex(),b4=bE("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,bY).replace(/punctSpace/g,bU).replace(/punct/g,bX).getRegex(),b3=bE(/\\(punct)/,"gu").replace(/punct/g,bX).getRegex(),b6=bE(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),b9=bE(bj).replace("(?:--\x3e|$)","--\x3e").getRegex(),b7=bE("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",b9).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),b8=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,xe=bE(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",b8).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),xt=bE(/^!?\[(label)\]\[(ref)\]/).replace("label",b8).replace("ref",b$).getRegex(),xn=bE(/^!?\[(ref)\](?:\[\])?/).replace("ref",b$).getRegex(),xr=bE("reflink|nolink(?!\\()","g").replace("reflink",xt).replace("nolink",xn).getRegex(),xi={_backpedal:bC,anyPunctuation:b3,autolink:b6,blockSkip:/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,br:bW,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:bC,emStrongLDelim:bJ,emStrongRDelimAst:b2,emStrongRDelimUnd:b4,escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,link:xe,nolink:xn,punctuation:bG,reflink:xt,reflinkSearch:xr,tag:b7,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:bC},xs={...xi,link:bE(/^!?\[(label)\]\((.*?)\)/).replace("label",b8).getRegex(),reflink:bE(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",b8).getRegex()},xo={...xi,emStrongRDelimAst:b5,emStrongLDelim:b0,url:bE(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},xa={...xo,br:bE(bW).replace("{2,}","*").getRegex(),text:bE(xo.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},xl={normal:bB,gfm:bZ,pedantic:bq},xh={normal:xi,gfm:xo,breaks:xa,pedantic:xs},xc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},xu=e=>xc[e];function xd(e,n){if(n){if(bT.escapeTest.test(e))return e.replace(bT.escapeReplace,xu)}else if(bT.escapeTestNoEncode.test(e))return e.replace(bT.escapeReplaceNoEncode,xu);return e}function xp(e){try{e=encodeURI(e).replace(bT.percentDecode,"%")}catch{return null}return e}function xf(e,n){let r=e.replace(bT.findPipe,(e,n,r)=>{let i=!1,s=n;for(;--s>=0&&"\\"===r[s];)i=!i;return i?"|":" |"}).split(bT.splitPipe),i=0;if(r[0].trim()||r.shift(),r.length>0&&!r.at(-1)?.trim()&&r.pop(),n)if(r.length>n)r.splice(n);else for(;r.length<n;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(bT.slashPipe,"|");return r}function xg(e,n,r){let i=e.length;if(0===i)return"";let s=0;for(;s<i;){let o=e.charAt(i-s-1);if(o!==n||r)if(o!==n&&r)s++;else break;else s++}return e.slice(0,i-s)}function xm(e,n,r,i,s){let o=n.href,a=n.title||null,l=e[1].replace(s.other.outputLinkReplace,"$1");i.state.inLink=!0;let h={type:"!"===e[0].charAt(0)?"image":"link",raw:r,href:o,title:a,text:l,tokens:i.inlineTokens(l)};return i.state.inLink=!1,h}var xy=class{options;rules;lexer;constructor(e){this.options=e||bk}space(e){let n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){let n=this.rules.block.code.exec(e);if(n){let e=n[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?e:xg(e,"\n")}}}fences(e){let n=this.rules.block.fences.exec(e);if(n){let e=n[0],r=function(e,n,r){let i=e.match(r.other.indentCodeCompensation);if(null===i)return n;let s=i[1];return n.split("\n").map(e=>{let n=e.match(r.other.beginningSpace);if(null===n)return e;let[i]=n;return i.length>=s.length?e.slice(s.length):e}).join("\n")}(e,n[3]||"",this.rules);return{type:"code",raw:e,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:r}}}heading(e){let n=this.rules.block.heading.exec(e);if(n){let e=n[2].trim();if(this.rules.other.endingHash.test(e)){let n=xg(e,"#");this.options.pedantic?e=n.trim():(!n||this.rules.other.endingSpaceChar.test(n))&&(e=n.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){let n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:xg(n[0],"\n")}}blockquote(e){let n=this.rules.block.blockquote.exec(e);if(n){let e=xg(n[0],"\n").split("\n"),r="",i="",s=[];for(;e.length>0;){let n,o=!1,a=[];for(n=0;n<e.length;n++)if(this.rules.other.blockquoteStart.test(e[n]))a.push(e[n]),o=!0;else if(o)break;else a.push(e[n]);e=e.slice(n);let l=a.join("\n"),h=l.replace(this.rules.other.blockquoteSetextReplace,"\n    $1").replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${l}`:l,i=i?`${i}
${h}`:h;let c=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(h,s,!0),this.lexer.state.top=c,0===e.length)break;let u=s.at(-1);if(u?.type==="code")break;if(u?.type==="blockquote"){let n=u.raw+"\n"+e.join("\n"),o=this.blockquote(n);s[s.length-1]=o,r=r.substring(0,r.length-u.raw.length)+o.raw,i=i.substring(0,i.length-u.text.length)+o.text;break}if(u?.type==="list"){let n=u.raw+"\n"+e.join("\n"),o=this.list(n);s[s.length-1]=o,r=r.substring(0,r.length-u.raw.length)+o.raw,i=i.substring(0,i.length-u.raw.length)+o.raw,e=n.substring(s.at(-1).raw.length).split("\n");continue}}return{type:"blockquote",raw:r,tokens:s,text:i}}}list(e){let n=this.rules.block.list.exec(e);if(n){let r=n[1].trim(),i=r.length>1,s={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");let o=this.rules.other.listItemRegex(r),a=!1;for(;e;){let r,i=!1,l="",h="";if(!(n=o.exec(e))||this.rules.block.hr.test(e))break;l=n[0],e=e.substring(l.length);let c=n[2].split("\n",1)[0].replace(this.rules.other.listReplaceTabs,e=>" ".repeat(3*e.length)),u=e.split("\n",1)[0],d=!c.trim(),p=0;if(this.options.pedantic?(p=2,h=c.trimStart()):d?p=n[1].length+1:(p=(p=n[2].search(this.rules.other.nonSpaceChar))>4?1:p,h=c.slice(p),p+=n[1].length),d&&this.rules.other.blankLine.test(u)&&(l+=u+"\n",e=e.substring(u.length+1),i=!0),!i){let n=this.rules.other.nextBulletRegex(p),r=this.rules.other.hrRegex(p),i=this.rules.other.fencesBeginRegex(p),s=this.rules.other.headingBeginRegex(p),o=this.rules.other.htmlBeginRegex(p);for(;e;){let a,f=e.split("\n",1)[0];if(u=f,a=this.options.pedantic?u=u.replace(this.rules.other.listReplaceNesting,"  "):u.replace(this.rules.other.tabCharGlobal,"    "),i.test(u)||s.test(u)||o.test(u)||n.test(u)||r.test(u))break;if(a.search(this.rules.other.nonSpaceChar)>=p||!u.trim())h+="\n"+a.slice(p);else{if(d||c.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||i.test(c)||s.test(c)||r.test(c))break;h+="\n"+u}d||u.trim()||(d=!0),l+=f+"\n",e=e.substring(f.length+1),c=a.slice(p)}}!s.loose&&(a?s.loose=!0:this.rules.other.doubleBlankLine.test(l)&&(a=!0));let f=null;this.options.gfm&&(f=this.rules.other.listIsTask.exec(h))&&(r="[ ] "!==f[0],h=h.replace(this.rules.other.listReplaceTask,"")),s.items.push({type:"list_item",raw:l,task:!!f,checked:r,loose:!1,text:h,tokens:[]}),s.raw+=l}let l=s.items.at(-1);if(!l)return;l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd(),s.raw=s.raw.trimEnd();for(let e=0;e<s.items.length;e++)if(this.lexer.state.top=!1,s.items[e].tokens=this.lexer.blockTokens(s.items[e].text,[]),!s.loose){let n=s.items[e].tokens.filter(e=>"space"===e.type);s.loose=n.length>0&&n.some(e=>this.rules.other.anyLine.test(e.raw))}if(s.loose)for(let e=0;e<s.items.length;e++)s.items[e].loose=!0;return s}}html(e){let n=this.rules.block.html.exec(e);if(n)return{type:"html",block:!0,raw:n[0],pre:"pre"===n[1]||"script"===n[1]||"style"===n[1],text:n[0]}}def(e){let n=this.rules.block.def.exec(e);if(n){let e=n[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=n[2]?n[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:e,raw:n[0],href:r,title:i}}}table(e){let n=this.rules.block.table.exec(e);if(!n||!this.rules.other.tableDelimiter.test(n[2]))return;let r=xf(n[1]),i=n[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=n[3]?.trim()?n[3].replace(this.rules.other.tableRowBlankLine,"").split("\n"):[],o={type:"table",raw:n[0],header:[],align:[],rows:[]};if(r.length===i.length){for(let e of i)this.rules.other.tableAlignRight.test(e)?o.align.push("right"):this.rules.other.tableAlignCenter.test(e)?o.align.push("center"):this.rules.other.tableAlignLeft.test(e)?o.align.push("left"):o.align.push(null);for(let e=0;e<r.length;e++)o.header.push({text:r[e],tokens:this.lexer.inline(r[e]),header:!0,align:o.align[e]});for(let e of s)o.rows.push(xf(e,o.header.length).map((e,n)=>({text:e,tokens:this.lexer.inline(e),header:!1,align:o.align[n]})));return o}}lheading(e){let n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:"="===n[2].charAt(0)?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){let n=this.rules.block.paragraph.exec(e);if(n){let e="\n"===n[1].charAt(n[1].length-1)?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:e,tokens:this.lexer.inline(e)}}}text(e){let n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){let n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:n[1]}}tag(e){let n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&this.rules.other.startATag.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(e){let n=this.rules.inline.link.exec(e);if(n){let e=n[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(e)){if(!this.rules.other.endAngleBracket.test(e))return;let n=xg(e.slice(0,-1),"\\");if((e.length-n.length)%2==0)return}else{let e=function(e,n){if(-1===e.indexOf(")"))return -1;let r=0;for(let i=0;i<e.length;i++)if("\\"===e[i])i++;else if("("===e[i])r++;else if(e[i]===n[1]&&--r<0)return i;return r>0?-2:-1}(n[2],"()");if(-2===e)return;if(e>-1){let r=(0===n[0].indexOf("!")?5:4)+n[1].length+e;n[2]=n[2].substring(0,e),n[0]=n[0].substring(0,r).trim(),n[3]=""}}let r=n[2],i="";if(this.options.pedantic){let e=this.rules.other.pedanticHrefTitle.exec(r);e&&(r=e[1],i=e[3])}else i=n[3]?n[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(r=this.options.pedantic&&!this.rules.other.endAngleBracket.test(e)?r.slice(1):r.slice(1,-1)),xm(n,{href:r?r.replace(this.rules.inline.anyPunctuation,"$1"):r,title:i?i.replace(this.rules.inline.anyPunctuation,"$1"):i},n[0],this.lexer,this.rules)}}reflink(e,n){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let e=n[(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," ").toLowerCase()];if(!e){let e=r[0].charAt(0);return{type:"text",raw:e,text:e}}return xm(r,e,r[0],this.lexer,this.rules)}}emStrong(e,n,r=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!(!i||i[3]&&r.match(this.rules.other.unicodeAlphaNumeric))&&(!(i[1]||i[2])||!r||this.rules.inline.punctuation.exec(r))){let r=[...i[0]].length-1,s,o,a=r,l=0,h="*"===i[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,n=n.slice(-1*e.length+r);null!=(i=h.exec(n));){if(!(s=i[1]||i[2]||i[3]||i[4]||i[5]||i[6]))continue;if(o=[...s].length,i[3]||i[4]){a+=o;continue}if((i[5]||i[6])&&r%3&&!((r+o)%3)){l+=o;continue}if((a-=o)>0)continue;o=Math.min(o,o+a+l);let n=[...i[0]][0].length,h=e.slice(0,r+i.index+n+o);if(Math.min(r,o)%2){let e=h.slice(1,-1);return{type:"em",raw:h,text:e,tokens:this.lexer.inlineTokens(e)}}let c=h.slice(2,-2);return{type:"strong",raw:h,text:c,tokens:this.lexer.inlineTokens(c)}}}}codespan(e){let n=this.rules.inline.code.exec(e);if(n){let e=n[2].replace(this.rules.other.newLineCharGlobal," "),r=this.rules.other.nonSpaceChar.test(e),i=this.rules.other.startingSpaceChar.test(e)&&this.rules.other.endingSpaceChar.test(e);return r&&i&&(e=e.substring(1,e.length-1)),{type:"codespan",raw:n[0],text:e}}}br(e){let n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){let n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e){let n=this.rules.inline.autolink.exec(e);if(n){let e,r;return r="@"===n[2]?"mailto:"+(e=n[1]):e=n[1],{type:"link",raw:n[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}url(e){let n;if(n=this.rules.inline.url.exec(e)){let e,r;if("@"===n[2])r="mailto:"+(e=n[0]);else{let i;do i=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])?.[0]??"";while(i!==n[0]);e=n[0],r="www."===n[1]?"http://"+n[0]:n[0]}return{type:"link",raw:n[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e){let n=this.rules.inline.text.exec(e);if(n){let e=this.lexer.state.inRawBlock;return{type:"text",raw:n[0],text:n[0],escaped:e}}}},xO=class e{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||bk,this.options.tokenizer=this.options.tokenizer||new xy,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let n={other:bT,block:xl.normal,inline:xh.normal};this.options.pedantic?(n.block=xl.pedantic,n.inline=xh.pedantic):this.options.gfm&&(n.block=xl.gfm,this.options.breaks?n.inline=xh.breaks:n.inline=xh.gfm),this.tokenizer.rules=n}static get rules(){return{block:xl,inline:xh}}static lex(n,r){return new e(r).lex(n)}static lexInline(n,r){return new e(r).inlineTokens(n)}lex(e){e=e.replace(bT.carriageReturn,"\n"),this.blockTokens(e,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){let n=this.inlineQueue[e];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],r=!1){for(this.options.pedantic&&(e=e.replace(bT.tabCharGlobal,"    ").replace(bT.spaceLine,""));e;){let i;if(this.options.extensions?.block?.some(r=>!!(i=r.call({lexer:this},e,n))&&(e=e.substring(i.raw.length),n.push(i),!0)))continue;if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length);let r=n.at(-1);1===i.raw.length&&void 0!==r?r.raw+="\n":n.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length);let r=n.at(-1);r?.type==="paragraph"||r?.type==="text"?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.at(-1).src=r.text):n.push(i);continue}if((i=this.tokenizer.fences(e))||(i=this.tokenizer.heading(e))||(i=this.tokenizer.hr(e))||(i=this.tokenizer.blockquote(e))||(i=this.tokenizer.list(e))||(i=this.tokenizer.html(e))){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length);let r=n.at(-1);r?.type==="paragraph"||r?.type==="text"?(r.raw+="\n"+i.raw,r.text+="\n"+i.raw,this.inlineQueue.at(-1).src=r.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if((i=this.tokenizer.table(e))||(i=this.tokenizer.lheading(e))){e=e.substring(i.raw.length),n.push(i);continue}let s=e;if(this.options.extensions?.startBlock){let n,r=1/0,i=e.slice(1);this.options.extensions.startBlock.forEach(e=>{"number"==typeof(n=e.call({lexer:this},i))&&n>=0&&(r=Math.min(r,n))}),r<1/0&&r>=0&&(s=e.substring(0,r+1))}if(this.state.top&&(i=this.tokenizer.paragraph(s))){let o=n.at(-1);r&&o?.type==="paragraph"?(o.raw+="\n"+i.raw,o.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):n.push(i),r=s.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length);let r=n.at(-1);r?.type==="text"?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=r.text):n.push(i);continue}if(e){let n="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(n);break}throw Error(n)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let r=e,i=null;if(this.tokens.links){let e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(i=this.tokenizer.rules.inline.reflinkSearch.exec(r));)e.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(i=this.tokenizer.rules.inline.anyPunctuation.exec(r));)r=r.slice(0,i.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;null!=(i=this.tokenizer.rules.inline.blockSkip.exec(r));)r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let s=!1,o="";for(;e;){let i;if(s||(o=""),s=!1,this.options.extensions?.inline?.some(r=>!!(i=r.call({lexer:this},e,n))&&(e=e.substring(i.raw.length),n.push(i),!0)))continue;if((i=this.tokenizer.escape(e))||(i=this.tokenizer.tag(e))||(i=this.tokenizer.link(e))){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length);let r=n.at(-1);"text"===i.type&&r?.type==="text"?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if((i=this.tokenizer.emStrong(e,r,o))||(i=this.tokenizer.codespan(e))||(i=this.tokenizer.br(e))||(i=this.tokenizer.del(e))||(i=this.tokenizer.autolink(e))||!this.state.inLink&&(i=this.tokenizer.url(e))){e=e.substring(i.raw.length),n.push(i);continue}let a=e;if(this.options.extensions?.startInline){let n,r=1/0,i=e.slice(1);this.options.extensions.startInline.forEach(e=>{"number"==typeof(n=e.call({lexer:this},i))&&n>=0&&(r=Math.min(r,n))}),r<1/0&&r>=0&&(a=e.substring(0,r+1))}if(i=this.tokenizer.inlineText(a)){e=e.substring(i.raw.length),"_"!==i.raw.slice(-1)&&(o=i.raw.slice(-1)),s=!0;let r=n.at(-1);r?.type==="text"?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(e){let n="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(n);break}throw Error(n)}}return n}},xv=class{options;parser;constructor(e){this.options=e||bk}space(e){return""}code({text:e,lang:n,escaped:r}){let i=(n||"").match(bT.notSpaceStart)?.[0],s=e.replace(bT.endingNewline,"")+"\n";return i?'<pre><code class="language-'+xd(i)+'">'+(r?s:xd(s,!0))+"</code></pre>\n":"<pre><code>"+(r?s:xd(s,!0))+"</code></pre>\n"}blockquote({tokens:e}){let n=this.parser.parse(e);return`<blockquote>
${n}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:n}){return`<h${n}>${this.parser.parseInline(e)}</h${n}>
`}hr(e){return"<hr>\n"}list(e){let n=e.ordered,r=e.start,i="";for(let n=0;n<e.items.length;n++){let r=e.items[n];i+=this.listitem(r)}let s=n?"ol":"ul";return"<"+s+(n&&1!==r?' start="'+r+'"':"")+">\n"+i+"</"+s+">\n"}listitem(e){let n="";if(e.task){let r=this.checkbox({checked:!!e.checked});e.loose?e.tokens[0]?.type==="paragraph"?(e.tokens[0].text=r+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&"text"===e.tokens[0].tokens[0].type&&(e.tokens[0].tokens[0].text=r+" "+xd(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):n+=r+" "}return n+=this.parser.parse(e.tokens,!!e.loose),`<li>${n}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let n="",r="";for(let n=0;n<e.header.length;n++)r+=this.tablecell(e.header[n]);n+=this.tablerow({text:r});let i="";for(let n=0;n<e.rows.length;n++){let s=e.rows[n];r="";for(let e=0;e<s.length;e++)r+=this.tablecell(s[e]);i+=this.tablerow({text:r})}return i&&(i=`<tbody>${i}</tbody>`),"<table>\n<thead>\n"+n+"</thead>\n"+i+"</table>\n"}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let n=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+n+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${xd(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:n,tokens:r}){let i=this.parser.parseInline(r),s=xp(e);if(null===s)return i;let o='<a href="'+(e=s)+'"';return n&&(o+=' title="'+xd(n)+'"'),o+=">"+i+"</a>"}image({href:e,title:n,text:r,tokens:i}){i&&(r=this.parser.parseInline(i,this.parser.textRenderer));let s=xp(e);if(null===s)return xd(r);e=s;let o=`<img src="${e}" alt="${r}"`;return n&&(o+=` title="${xd(n)}"`),o+=">"}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:xd(e.text)}},xb=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},xx=class e{options;renderer;textRenderer;constructor(e){this.options=e||bk,this.options.renderer=this.options.renderer||new xv,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new xb}static parse(n,r){return new e(r).parse(n)}static parseInline(n,r){return new e(r).parseInline(n)}parse(e,n=!0){let r="";for(let i=0;i<e.length;i++){let s=e[i];if(this.options.extensions?.renderers?.[s.type]){let e=this.options.extensions.renderers[s.type].call({parser:this},s);if(!1!==e||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(s.type)){r+=e||"";continue}}switch(s.type){case"space":r+=this.renderer.space(s);continue;case"hr":r+=this.renderer.hr(s);continue;case"heading":r+=this.renderer.heading(s);continue;case"code":r+=this.renderer.code(s);continue;case"table":r+=this.renderer.table(s);continue;case"blockquote":r+=this.renderer.blockquote(s);continue;case"list":r+=this.renderer.list(s);continue;case"html":r+=this.renderer.html(s);continue;case"paragraph":r+=this.renderer.paragraph(s);continue;case"text":{let o=s,a=this.renderer.text(o);for(;i+1<e.length&&"text"===e[i+1].type;)o=e[++i],a+="\n"+this.renderer.text(o);n?r+=this.renderer.paragraph({type:"paragraph",raw:a,text:a,tokens:[{type:"text",raw:a,text:a,escaped:!0}]}):r+=a;continue}default:{let e='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw Error(e)}}}return r}parseInline(e,n=this.renderer){let r="";for(let i=0;i<e.length;i++){let s=e[i];if(this.options.extensions?.renderers?.[s.type]){let e=this.options.extensions.renderers[s.type].call({parser:this},s);if(!1!==e||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){r+=e||"";continue}}switch(s.type){case"escape":case"text":r+=n.text(s);break;case"html":r+=n.html(s);break;case"link":r+=n.link(s);break;case"image":r+=n.image(s);break;case"strong":r+=n.strong(s);break;case"em":r+=n.em(s);break;case"codespan":r+=n.codespan(s);break;case"br":r+=n.br(s);break;case"del":r+=n.del(s);break;default:{let e='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw Error(e)}}}return r}},xw=class{options;block;constructor(e){this.options=e||bk}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?xO.lex:xO.lexInline}provideParser(){return this.block?xx.parse:xx.parseInline}},xS=class{defaults=b_();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=xx;Renderer=xv;TextRenderer=xb;Lexer=xO;Tokenizer=xy;Hooks=xw;constructor(...e){this.use(...e)}walkTokens(e,n){let r=[];for(let i of e)switch(r=r.concat(n.call(this,i)),i.type){case"table":for(let e of i.header)r=r.concat(this.walkTokens(e.tokens,n));for(let e of i.rows)for(let i of e)r=r.concat(this.walkTokens(i.tokens,n));break;case"list":r=r.concat(this.walkTokens(i.items,n));break;default:{let e=i;this.defaults.extensions?.childTokens?.[e.type]?this.defaults.extensions.childTokens[e.type].forEach(i=>{let s=e[i].flat(1/0);r=r.concat(this.walkTokens(s,n))}):e.tokens&&(r=r.concat(this.walkTokens(e.tokens,n)))}}return r}use(...e){let n=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(e=>{let r={...e};if(r.async=this.defaults.async||r.async||!1,e.extensions&&(e.extensions.forEach(e=>{if(!e.name)throw Error("extension name required");if("renderer"in e){let r=n.renderers[e.name];r?n.renderers[e.name]=function(...n){let i=e.renderer.apply(this,n);return!1===i&&(i=r.apply(this,n)),i}:n.renderers[e.name]=e.renderer}if("tokenizer"in e){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw Error("extension level must be 'block' or 'inline'");let r=n[e.level];r?r.unshift(e.tokenizer):n[e.level]=[e.tokenizer],e.start&&("block"===e.level?n.startBlock?n.startBlock.push(e.start):n.startBlock=[e.start]:"inline"===e.level&&(n.startInline?n.startInline.push(e.start):n.startInline=[e.start]))}"childTokens"in e&&e.childTokens&&(n.childTokens[e.name]=e.childTokens)}),r.extensions=n),e.renderer){let n=this.defaults.renderer||new xv(this.defaults);for(let r in e.renderer){if(!(r in n))throw Error(`renderer '${r}' does not exist`);if(["options","parser"].includes(r))continue;let i=e.renderer[r],s=n[r];n[r]=(...e)=>{let r=i.apply(n,e);return!1===r&&(r=s.apply(n,e)),r||""}}r.renderer=n}if(e.tokenizer){let n=this.defaults.tokenizer||new xy(this.defaults);for(let r in e.tokenizer){if(!(r in n))throw Error(`tokenizer '${r}' does not exist`);if(["options","rules","lexer"].includes(r))continue;let i=e.tokenizer[r],s=n[r];n[r]=(...e)=>{let r=i.apply(n,e);return!1===r&&(r=s.apply(n,e)),r}}r.tokenizer=n}if(e.hooks){let n=this.defaults.hooks||new xw;for(let r in e.hooks){if(!(r in n))throw Error(`hook '${r}' does not exist`);if(["options","block"].includes(r))continue;let i=e.hooks[r],s=n[r];xw.passThroughHooks.has(r)?n[r]=e=>{if(this.defaults.async)return Promise.resolve(i.call(n,e)).then(e=>s.call(n,e));let r=i.call(n,e);return s.call(n,r)}:n[r]=(...e)=>{let r=i.apply(n,e);return!1===r&&(r=s.apply(n,e)),r}}r.hooks=n}if(e.walkTokens){let n=this.defaults.walkTokens,i=e.walkTokens;r.walkTokens=function(e){let r=[];return r.push(i.call(this,e)),n&&(r=r.concat(n.call(this,e))),r}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,n){return xO.lex(e,n??this.defaults)}parser(e,n){return xx.parse(e,n??this.defaults)}parseMarkdown(e){return(n,r)=>{let i={...r},s={...this.defaults,...i},o=this.onError(!!s.silent,!!s.async);if(!0===this.defaults.async&&!1===i.async)return o(Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(null==n)return o(Error("marked(): input parameter is undefined or null"));if("string"!=typeof n)return o(Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));s.hooks&&(s.hooks.options=s,s.hooks.block=e);let a=s.hooks?s.hooks.provideLexer():e?xO.lex:xO.lexInline,l=s.hooks?s.hooks.provideParser():e?xx.parse:xx.parseInline;if(s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(n):n).then(e=>a(e,s)).then(e=>s.hooks?s.hooks.processAllTokens(e):e).then(e=>s.walkTokens?Promise.all(this.walkTokens(e,s.walkTokens)).then(()=>e):e).then(e=>l(e,s)).then(e=>s.hooks?s.hooks.postprocess(e):e).catch(o);try{s.hooks&&(n=s.hooks.preprocess(n));let e=a(n,s);s.hooks&&(e=s.hooks.processAllTokens(e)),s.walkTokens&&this.walkTokens(e,s.walkTokens);let r=l(e,s);return s.hooks&&(r=s.hooks.postprocess(r)),r}catch(e){return o(e)}}}onError(e,n){return r=>{if(r.message+="\nPlease report this to https://github.com/markedjs/marked.",e){let e="<p>An error occurred:</p><pre>"+xd(r.message+"",!0)+"</pre>";return n?Promise.resolve(e):e}if(n)return Promise.reject(r);throw r}}},x_=new xS;function xk(e,n){return x_.parse(e,n)}xk.options=xk.setOptions=function(e){return x_.setOptions(e),xk.defaults=x_.defaults,bk=xk.defaults,xk},xk.getDefaults=b_,xk.defaults=bk,xk.use=function(...e){return x_.use(...e),xk.defaults=x_.defaults,bk=xk.defaults,xk},xk.walkTokens=function(e,n){return x_.walkTokens(e,n)},xk.parseInline=x_.parseInline,xk.Parser=xx,xk.parser=xx.parse,xk.Renderer=xv,xk.TextRenderer=xb,xk.Lexer=xO,xk.lexer=xO.lex,xk.Tokenizer=xy,xk.Hooks=xw,xk.parse=xk,xk.options,xk.setOptions,xk.use,xk.walkTokens,xk.parseInline,xx.parse,xO.lex;class xC extends Error{constructor(e){super(e),this.name="ShikiError"}}function xE(e,...n){return n.forEach(n=>{for(let r in n)e[r]=n[r]}),e}var xT=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,xP=class{static hasCaptures(e){return null!==e&&(xT.lastIndex=0,xT.test(e))}static replaceCaptures(e,n,r){return e.replace(xT,(e,i,s,o)=>{let a=r[parseInt(i||s,10)];if(!a)return e;{let e=n.substring(a.start,a.end);for(;"."===e[0];)e=e.substring(1);switch(o){case"downcase":return e.toLowerCase();case"upcase":return e.toUpperCase();default:return e}}})}};function xA(e,n){if(null===e&&null===n)return 0;if(!e)return -1;if(!n)return 1;let r=e.length,i=n.length;if(r===i){for(let i=0;i<r;i++){var s,o;let r=(s=e[i],s<(o=n[i])?-1:+(s>o));if(0!==r)return r}return 0}return r-i}function xM(e){return!!(/^#[0-9a-f]{6}$/i.test(e)||/^#[0-9a-f]{8}$/i.test(e)||/^#[0-9a-f]{3}$/i.test(e)||/^#[0-9a-f]{4}$/i.test(e))}function xN(e){return e.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var xD=class{constructor(e){this.fn=e}cache=new Map;get(e){if(this.cache.has(e))return this.cache.get(e);let n=this.fn(e);return this.cache.set(e,n),n}},xI=class{constructor(e,n,r){this._colorMap=e,this._defaults=n,this._root=r}static createFromRawTheme(e,n){return this.createFromParsedTheme(function(e){if(!e||!e.settings||!Array.isArray(e.settings))return[];let n=e.settings,r=[],i=0;for(let e=0,s=n.length;e<s;e++){let s,o=n[e];if(!o.settings)continue;if("string"==typeof o.scope){let e=o.scope;s=(e=(e=e.replace(/^[,]+/,"")).replace(/[,]+$/,"")).split(",")}else s=Array.isArray(o.scope)?o.scope:[""];let a=-1;if("string"==typeof o.settings.fontStyle){a=0;let e=o.settings.fontStyle.split(" ");for(let n=0,r=e.length;n<r;n++)switch(e[n]){case"italic":a|=1;break;case"bold":a|=2;break;case"underline":a|=4;break;case"strikethrough":a|=8}}let l=null;"string"==typeof o.settings.foreground&&xM(o.settings.foreground)&&(l=o.settings.foreground);let h=null;"string"==typeof o.settings.background&&xM(o.settings.background)&&(h=o.settings.background);for(let n=0,o=s.length;n<o;n++){let o=s[n].trim().split(" "),c=o[o.length-1],u=null;o.length>1&&(u=o.slice(0,o.length-1)).reverse(),r[i++]=new xL(c,u,e,a,l,h)}}return r}(e),n)}static createFromParsedTheme(e,n){return function(e,n){e.sort((e,n)=>{var r,i;let s=(r=e.scope,r<(i=n.scope)?-1:+(r>i));return 0!==s||0!==(s=xA(e.parentScopes,n.parentScopes))?s:e.index-n.index});let r=0,i="#000000",s="#ffffff";for(;e.length>=1&&""===e[0].scope;){let n=e.shift();-1!==n.fontStyle&&(r=n.fontStyle),null!==n.foreground&&(i=n.foreground),null!==n.background&&(s=n.background)}let o=new xj(n),a=new xR(r,o.getId(i),o.getId(s)),l=new xB(new xz(0,null,-1,0,0),[]);for(let n=0,r=e.length;n<r;n++){let r=e[n];l.insert(0,r.scope,r.parentScopes,r.fontStyle,o.getId(r.foreground),o.getId(r.background))}return new xI(o,a,l)}(e,n)}_cachedMatchRoot=new xD(e=>this._root.match(e));getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(e){if(null===e)return this._defaults;let n=e.scopeName,r=this._cachedMatchRoot.get(n).find(n=>(function(e,n){if(0===n.length)return!0;for(let s=0;s<n.length;s++){var r,i;let o=n[s],a=!1;if(">"===o){if(s===n.length-1)return!1;o=n[++s],a=!0}for(;e&&(r=e.scopeName,!((i=o)===r||r.startsWith(i)&&"."===r[i.length]));){if(a)return!1;e=e.parent}if(!e)return!1;e=e.parent}return!0})(e.parent,n.parentScopes));return r?new xR(r.fontStyle,r.foreground,r.background):null}},x$=class e{constructor(e,n){this.parent=e,this.scopeName=n}static push(n,r){for(let i of r)n=new e(n,i);return n}static from(...n){let r=null;for(let i=0;i<n.length;i++)r=new e(r,n[i]);return r}push(n){return new e(this,n)}getSegments(){let e=this,n=[];for(;e;)n.push(e.scopeName),e=e.parent;return n.reverse(),n}toString(){return this.getSegments().join(" ")}extends(e){return this===e||null!==this.parent&&this.parent.extends(e)}getExtensionIfDefined(e){let n=[],r=this;for(;r&&r!==e;)n.push(r.scopeName),r=r.parent;return r===e?n.reverse():void 0}},xR=class{constructor(e,n,r){this.fontStyle=e,this.foregroundId=n,this.backgroundId=r}},xL=class{constructor(e,n,r,i,s,o){this.scope=e,this.parentScopes=n,this.index=r,this.fontStyle=i,this.foreground=s,this.background=o}},xQ=((ey=xQ||{})[ey.NotSet=-1]="NotSet",ey[ey.None=0]="None",ey[ey.Italic=1]="Italic",ey[ey.Bold=2]="Bold",ey[ey.Underline=4]="Underline",ey[ey.Strikethrough=8]="Strikethrough",ey),xj=class{_isFrozen;_lastColorId;_id2color;_color2id;constructor(e){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(e)){this._isFrozen=!0;for(let n=0,r=e.length;n<r;n++)this._color2id[e[n]]=n,this._id2color[n]=e[n]}else this._isFrozen=!1}getId(e){if(null===e)return 0;e=e.toUpperCase();let n=this._color2id[e];if(n)return n;if(this._isFrozen)throw Error(`Missing color in color map - ${e}`);return n=++this._lastColorId,this._color2id[e]=n,this._id2color[n]=e,n}getColorMap(){return this._id2color.slice(0)}},xV=Object.freeze([]),xz=class e{scopeDepth;parentScopes;fontStyle;foreground;background;constructor(e,n,r,i,s){this.scopeDepth=e,this.parentScopes=n||xV,this.fontStyle=r,this.foreground=i,this.background=s}clone(){return new e(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let n=[];for(let r=0,i=e.length;r<i;r++)n[r]=e[r].clone();return n}acceptOverwrite(e,n,r,i){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,-1!==n&&(this.fontStyle=n),0!==r&&(this.foreground=r),0!==i&&(this.background=i)}},xB=class e{constructor(e,n=[],r={}){this._mainRule=e,this._children=r,this._rulesWithParentScopes=n}_rulesWithParentScopes;static _cmpBySpecificity(e,n){if(e.scopeDepth!==n.scopeDepth)return n.scopeDepth-e.scopeDepth;let r=0,i=0;for(;">"===e.parentScopes[r]&&r++,">"===n.parentScopes[i]&&i++,!(r>=e.parentScopes.length)&&!(i>=n.parentScopes.length);){let s=n.parentScopes[i].length-e.parentScopes[r].length;if(0!==s)return s;r++,i++}return n.parentScopes.length-e.parentScopes.length}match(n){if(""!==n){let e,r,i=n.indexOf(".");if(-1===i?(e=n,r=""):(e=n.substring(0,i),r=n.substring(i+1)),this._children.hasOwnProperty(e))return this._children[e].match(r)}let r=this._rulesWithParentScopes.concat(this._mainRule);return r.sort(e._cmpBySpecificity),r}insert(n,r,i,s,o,a){let l,h,c;if(""===r)return void this._doInsertHere(n,i,s,o,a);let u=r.indexOf(".");-1===u?(l=r,h=""):(l=r.substring(0,u),h=r.substring(u+1)),this._children.hasOwnProperty(l)?c=this._children[l]:(c=new e(this._mainRule.clone(),xz.cloneArr(this._rulesWithParentScopes)),this._children[l]=c),c.insert(n+1,h,i,s,o,a)}_doInsertHere(e,n,r,i,s){if(null===n)return void this._mainRule.acceptOverwrite(e,r,i,s);for(let o=0,a=this._rulesWithParentScopes.length;o<a;o++){let a=this._rulesWithParentScopes[o];if(0===xA(a.parentScopes,n))return void a.acceptOverwrite(e,r,i,s)}-1===r&&(r=this._mainRule.fontStyle),0===i&&(i=this._mainRule.foreground),0===s&&(s=this._mainRule.background),this._rulesWithParentScopes.push(new xz(e,n,r,i,s))}},xF=class e{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(n){let r=e.getLanguageId(n),i=e.getTokenType(n),s=e.getFontStyle(n);console.log({languageId:r,tokenType:i,fontStyle:s,foreground:e.getForeground(n),background:e.getBackground(n)})}static getLanguageId(e){return(255&e)>>>0}static getTokenType(e){return(768&e)>>>8}static containsBalancedBrackets(e){return(1024&e)!=0}static getFontStyle(e){return(30720&e)>>>11}static getForeground(e){return(0xff8000&e)>>>15}static getBackground(e){return(0xff000000&e)>>>24}static set(n,r,i,s,o,a,l){let h=e.getLanguageId(n),c=e.getTokenType(n),u=+!!e.containsBalancedBrackets(n),d=e.getFontStyle(n),p=e.getForeground(n),f=e.getBackground(n);return 0!==r&&(h=r),8!==i&&(c=i),null!==s&&(u=+!!s),-1!==o&&(d=o),0!==a&&(p=a),0!==l&&(f=l),(0|h|c<<8|u<<10|d<<11|p<<15|f<<24)>>>0}};function xZ(e,n){var r;let i,s,o=[],a=(r=e,s=(i=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g).exec(r),{next:()=>{if(!s)return null;let e=s[0];return s=i.exec(r),e}}),l=a.next();for(;null!==l;){let e=0;if(2===l.length&&":"===l.charAt(1)){switch(l.charAt(0)){case"R":e=1;break;case"L":e=-1;break;default:console.log(`Unknown priority ${l} in scope selector`)}l=a.next()}let n=c();if(o.push({matcher:n,priority:e}),","!==l)break;l=a.next()}return o;function h(){if("-"===l){l=a.next();let e=h();return n=>!!e&&!e(n)}if("("===l){l=a.next();let e=function(){let e=[],n=c();for(;n&&(e.push(n),"|"===l||","===l);){do l=a.next();while("|"===l||","===l);n=c()}return n=>e.some(e=>e(n))}();return")"===l&&(l=a.next()),e}if(xq(l)){let e=[];do e.push(l),l=a.next();while(xq(l));return r=>n(e,r)}return null}function c(){let e=[],n=h();for(;n;)e.push(n),n=h();return n=>e.every(e=>e(n))}}function xq(e){return!!e&&!!e.match(/[\w\.:]+/)}function xW(e){"function"==typeof e.dispose&&e.dispose()}var xX=class{constructor(e){this.scopeName=e}toKey(){return this.scopeName}},xU=class{constructor(e,n){this.scopeName=e,this.ruleName=n}toKey(){return`${this.scopeName}#${this.ruleName}`}},xY=class{_references=[];_seenReferenceKeys=new Set;get references(){return this._references}visitedRule=new Set;add(e){let n=e.toKey();this._seenReferenceKeys.has(n)||(this._seenReferenceKeys.add(n),this._references.push(e))}},xG=class{constructor(e,n){this.repo=e,this.initialScopeName=n,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new xX(this.initialScopeName)]}seenFullScopeRequests=new Set;seenPartialScopeRequests=new Set;Q;processQueue(){let e=this.Q;this.Q=[];let n=new xY;for(let r of e)!function(e,n,r,i){let s=r.lookup(e.scopeName);if(!s){if(e.scopeName===n)throw Error(`No grammar provided for <${n}>`);return}let o=r.lookup(n);e instanceof xX?xK({baseGrammar:o,selfGrammar:s},i):xH(e.ruleName,{baseGrammar:o,selfGrammar:s,repository:s.repository},i);let a=r.injections(e.scopeName);if(a)for(let e of a)i.add(new xX(e))}(r,this.initialScopeName,this.repo,n);for(let e of n.references)if(e instanceof xX){if(this.seenFullScopeRequests.has(e.scopeName))continue;this.seenFullScopeRequests.add(e.scopeName),this.Q.push(e)}else{if(this.seenFullScopeRequests.has(e.scopeName)||this.seenPartialScopeRequests.has(e.toKey()))continue;this.seenPartialScopeRequests.add(e.toKey()),this.Q.push(e)}}};function xH(e,n,r){n.repository&&n.repository[e]&&xJ([n.repository[e]],n,r)}function xK(e,n){e.selfGrammar.patterns&&Array.isArray(e.selfGrammar.patterns)&&xJ(e.selfGrammar.patterns,{...e,repository:e.selfGrammar.repository},n),e.selfGrammar.injections&&xJ(Object.values(e.selfGrammar.injections),{...e,repository:e.selfGrammar.repository},n)}function xJ(e,n,r){for(let i of e){if(r.visitedRule.has(i))continue;r.visitedRule.add(i);let e=i.repository?xE({},n.repository,i.repository):n.repository;Array.isArray(i.patterns)&&xJ(i.patterns,{...n,repository:e},r);let s=i.include;if(!s)continue;let o=x3(s);switch(o.kind){case 0:xK({...n,selfGrammar:n.baseGrammar},r);break;case 1:xK(n,r);break;case 2:xH(o.ruleName,{...n,repository:e},r);break;case 3:case 4:let a=o.scopeName===n.selfGrammar.scopeName?n.selfGrammar:o.scopeName===n.baseGrammar.scopeName?n.baseGrammar:void 0;if(a){let i={baseGrammar:n.baseGrammar,selfGrammar:a,repository:e};4===o.kind?xH(o.ruleName,i,r):xK(i,r)}else 4===o.kind?r.add(new xU(o.scopeName,o.ruleName)):r.add(new xX(o.scopeName))}}}var x0=class{kind=0},x1=class{kind=1},x2=class{constructor(e){this.ruleName=e}kind=2},x5=class{constructor(e){this.scopeName=e}kind=3},x4=class{constructor(e,n){this.scopeName=e,this.ruleName=n}kind=4};function x3(e){if("$base"===e)return new x0;if("$self"===e)return new x1;let n=e.indexOf("#");return -1===n?new x5(e):0===n?new x2(e.substring(1)):new x4(e.substring(0,n),e.substring(n+1))}var x6=/\\(\d+)/,x9=/\\(\d+)/g;Symbol("RuleId");var x7=class{$location;id;_nameIsCapturing;_name;_contentNameIsCapturing;_contentName;constructor(e,n,r,i){this.$location=e,this.id=n,this._name=r||null,this._nameIsCapturing=xP.hasCaptures(this._name),this._contentName=i||null,this._contentNameIsCapturing=xP.hasCaptures(this._contentName)}get debugName(){let e=this.$location?`${function e(n){let r=~n.lastIndexOf("/")||~n.lastIndexOf("\\");return 0===r?n:~r==n.length-1?e(n.substring(0,n.length-1)):n.substr(~r+1)}(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${e}`}getName(e,n){return this._nameIsCapturing&&null!==this._name&&null!==e&&null!==n?xP.replaceCaptures(this._name,e,n):this._name}getContentName(e,n){return this._contentNameIsCapturing&&null!==this._contentName?xP.replaceCaptures(this._contentName,e,n):this._contentName}},x8=class extends x7{retokenizeCapturedWithRuleId;constructor(e,n,r,i,s){super(e,n,r,i),this.retokenizeCapturedWithRuleId=s}dispose(){}collectPatterns(e,n){throw Error("Not supported!")}compile(e,n){throw Error("Not supported!")}compileAG(e,n,r,i){throw Error("Not supported!")}},we=class extends x7{_match;captures;_cachedCompiledPatterns;constructor(e,n,r,i,s){super(e,n,r,null),this._match=new ws(i,this.id),this.captures=s,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(e,n){n.push(this._match)}compile(e,n){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,n,r,i){return this._getCachedCompiledPatterns(e).compileAG(e,r,i)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new wo,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},wt=class extends x7{hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(e,n,r,i,s){super(e,n,r,i),this.patterns=s.patterns,this.hasMissingPatterns=s.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(e,n){for(let r of this.patterns)e.getRule(r).collectPatterns(e,n)}compile(e,n){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,n,r,i){return this._getCachedCompiledPatterns(e).compileAG(e,r,i)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new wo,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},wn=class extends x7{_begin;beginCaptures;_end;endHasBackReferences;endCaptures;applyEndPatternLast;hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(e,n,r,i,s,o,a,l,h,c){super(e,n,r,i),this._begin=new ws(s,this.id),this.beginCaptures=o,this._end=new ws(a||"￿",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=l,this.applyEndPatternLast=h||!1,this.patterns=c.patterns,this.hasMissingPatterns=c.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(e,n){return this._end.resolveBackReferences(e,n)}collectPatterns(e,n){n.push(this._begin)}compile(e,n){return this._getCachedCompiledPatterns(e,n).compile(e)}compileAG(e,n,r,i){return this._getCachedCompiledPatterns(e,n).compileAG(e,r,i)}_getCachedCompiledPatterns(e,n){if(!this._cachedCompiledPatterns){for(let n of(this._cachedCompiledPatterns=new wo,this.patterns))e.getRule(n).collectPatterns(e,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,n):this._cachedCompiledPatterns.setSource(0,n)),this._cachedCompiledPatterns}},wr=class extends x7{_begin;beginCaptures;whileCaptures;_while;whileHasBackReferences;hasMissingPatterns;patterns;_cachedCompiledPatterns;_cachedCompiledWhilePatterns;constructor(e,n,r,i,s,o,a,l,h){super(e,n,r,i),this._begin=new ws(s,this.id),this.beginCaptures=o,this.whileCaptures=l,this._while=new ws(a,-2),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=h.patterns,this.hasMissingPatterns=h.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(e,n){return this._while.resolveBackReferences(e,n)}collectPatterns(e,n){n.push(this._begin)}compile(e,n){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,n,r,i){return this._getCachedCompiledPatterns(e).compileAG(e,r,i)}_getCachedCompiledPatterns(e){if(!this._cachedCompiledPatterns)for(let n of(this._cachedCompiledPatterns=new wo,this.patterns))e.getRule(n).collectPatterns(e,this._cachedCompiledPatterns);return this._cachedCompiledPatterns}compileWhile(e,n){return this._getCachedCompiledWhilePatterns(e,n).compile(e)}compileWhileAG(e,n,r,i){return this._getCachedCompiledWhilePatterns(e,n).compileAG(e,r,i)}_getCachedCompiledWhilePatterns(e,n){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new wo,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,n||"￿"),this._cachedCompiledWhilePatterns}},wi=class e{static createCaptureRule(e,n,r,i,s){return e.registerRule(e=>new x8(n,e,r,i,s))}static getCompiledRuleId(n,r,i){return n.id||r.registerRule(s=>{if(n.id=s,n.match)return new we(n.$vscodeTextmateLocation,n.id,n.name,n.match,e._compileCaptures(n.captures,r,i));if(void 0===n.begin){n.repository&&(i=xE({},i,n.repository));let s=n.patterns;return void 0===s&&n.include&&(s=[{include:n.include}]),new wt(n.$vscodeTextmateLocation,n.id,n.name,n.contentName,e._compilePatterns(s,r,i))}return n.while?new wr(n.$vscodeTextmateLocation,n.id,n.name,n.contentName,n.begin,e._compileCaptures(n.beginCaptures||n.captures,r,i),n.while,e._compileCaptures(n.whileCaptures||n.captures,r,i),e._compilePatterns(n.patterns,r,i)):new wn(n.$vscodeTextmateLocation,n.id,n.name,n.contentName,n.begin,e._compileCaptures(n.beginCaptures||n.captures,r,i),n.end,e._compileCaptures(n.endCaptures||n.captures,r,i),n.applyEndPatternLast,e._compilePatterns(n.patterns,r,i))}),n.id}static _compileCaptures(n,r,i){let s=[];if(n){let o=0;for(let e in n){if("$vscodeTextmateLocation"===e)continue;let n=parseInt(e,10);n>o&&(o=n)}for(let e=0;e<=o;e++)s[e]=null;for(let o in n){if("$vscodeTextmateLocation"===o)continue;let a=parseInt(o,10),l=0;n[o].patterns&&(l=e.getCompiledRuleId(n[o],r,i)),s[a]=e.createCaptureRule(r,n[o].$vscodeTextmateLocation,n[o].name,n[o].contentName,l)}}return s}static _compilePatterns(n,r,i){let s=[];if(n)for(let o=0,a=n.length;o<a;o++){let a=n[o],l=-1;if(a.include){let n=x3(a.include);switch(n.kind){case 0:case 1:l=e.getCompiledRuleId(i[a.include],r,i);break;case 2:let s=i[n.ruleName];s&&(l=e.getCompiledRuleId(s,r,i));break;case 3:case 4:let o=n.scopeName,h=4===n.kind?n.ruleName:null,c=r.getExternalGrammar(o,i);if(c)if(h){let n=c.repository[h];n&&(l=e.getCompiledRuleId(n,r,c.repository))}else l=e.getCompiledRuleId(c.repository.$self,r,c.repository)}}else l=e.getCompiledRuleId(a,r,i);if(-1!==l){let e=r.getRule(l),n=!1;if((e instanceof wt||e instanceof wn||e instanceof wr)&&e.hasMissingPatterns&&0===e.patterns.length&&(n=!0),n)continue;s.push(l)}}return{patterns:s,hasMissingPatterns:(n?n.length:0)!==s.length}}},ws=class e{source;ruleId;hasAnchor;hasBackReferences;_anchorCache;constructor(e,n){if(e&&"string"==typeof e){let n=e.length,r=0,i=[],s=!1;for(let o=0;o<n;o++)if("\\"===e.charAt(o)&&o+1<n){let n=e.charAt(o+1);"z"===n?(i.push(e.substring(r,o)),i.push("$(?!\\n)(?<!\\n)"),r=o+2):("A"===n||"G"===n)&&(s=!0),o++}this.hasAnchor=s,0===r?this.source=e:(i.push(e.substring(r,n)),this.source=i.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=n,"string"==typeof this.source?this.hasBackReferences=x6.test(this.source):this.hasBackReferences=!1}clone(){return new e(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,n){if("string"!=typeof this.source)throw Error("This method should only be called if the source is a string");let r=n.map(n=>e.substring(n.start,n.end));return x9.lastIndex=0,this.source.replace(x9,(e,n)=>xN(r[parseInt(n,10)]||""))}_buildAnchorCache(){let e,n,r,i;if("string"!=typeof this.source)throw Error("This method should only be called if the source is a string");let s=[],o=[],a=[],l=[];for(e=0,n=this.source.length;e<n;e++)r=this.source.charAt(e),s[e]=r,o[e]=r,a[e]=r,l[e]=r,"\\"===r&&e+1<n&&("A"===(i=this.source.charAt(e+1))?(s[e+1]="￿",o[e+1]="￿",a[e+1]="A",l[e+1]="A"):"G"===i?(s[e+1]="￿",o[e+1]="G",a[e+1]="￿",l[e+1]="G"):(s[e+1]=i,o[e+1]=i,a[e+1]=i,l[e+1]=i),e++);return{A0_G0:s.join(""),A0_G1:o.join(""),A1_G0:a.join(""),A1_G1:l.join("")}}resolveAnchors(e,n){if(!this.hasAnchor||!this._anchorCache||"string"!=typeof this.source)return this.source;if(e)if(n)return this._anchorCache.A1_G1;else return this._anchorCache.A1_G0;return n?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},wo=class{_items;_hasAnchors;_cached;_anchorCache;constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(e){this._items.push(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}unshift(e){this._items.unshift(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}length(){return this._items.length}setSource(e,n){this._items[e].source!==n&&(this._disposeCaches(),this._items[e].setSource(n))}compile(e){if(!this._cached){let n=this._items.map(e=>e.source);this._cached=new wa(e,n,this._items.map(e=>e.ruleId))}return this._cached}compileAG(e,n,r){if(!this._hasAnchors)return this.compile(e);if(n)if(r)return this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(e,n,r)),this._anchorCache.A1_G1;else return this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(e,n,r)),this._anchorCache.A1_G0;return r?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(e,n,r)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(e,n,r)),this._anchorCache.A0_G0)}_resolveAnchors(e,n,r){return new wa(e,this._items.map(e=>e.resolveAnchors(n,r)),this._items.map(e=>e.ruleId))}},wa=class{constructor(e,n,r){this.regExps=n,this.rules=r,this.scanner=e.createOnigScanner(n)}scanner;dispose(){"function"==typeof this.scanner.dispose&&this.scanner.dispose()}toString(){let e=[];for(let n=0,r=this.rules.length;n<r;n++)e.push("   - "+this.rules[n]+": "+this.regExps[n]);return e.join("\n")}findNextMatchSync(e,n,r){let i=this.scanner.findNextMatchSync(e,n,r);return i?{ruleId:this.rules[i.index],captureIndices:i.captureIndices}:null}},wl=class{constructor(e,n){this.languageId=e,this.tokenType=n}},wh=class e{_defaultAttributes;_embeddedLanguagesMatcher;constructor(e,n){this._defaultAttributes=new wl(e,8),this._embeddedLanguagesMatcher=new wc(Object.entries(n||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(n){return null===n?e._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(n)}static _NULL_SCOPE_METADATA=new wl(0,0);_getBasicScopeAttributes=new xD(e=>new wl(this._scopeToLanguage(e),this._toStandardTokenType(e)));_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(n){let r=n.match(e.STANDARD_TOKEN_TYPE_REGEXP);if(!r)return 8;switch(r[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw Error("Unexpected match for standard token type!")}static STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/},wc=class{values;scopesRegExp;constructor(e){if(0===e.length)this.values=null,this.scopesRegExp=null;else{this.values=new Map(e);let n=e.map(([e,n])=>xN(e));n.sort(),n.reverse(),this.scopesRegExp=RegExp(`^((${n.join(")|(")}))($|\\.)`,"")}}match(e){if(!this.scopesRegExp)return;let n=e.match(this.scopesRegExp);if(n)return this.values.get(n[1])}};"undefined"!=typeof process&&process.env.VSCODE_TEXTMATE_DEBUG;var wu=class{constructor(e,n){this.stack=e,this.stoppedEarly=n}};function wd(e,n,r,i,s,o,a,l){let h=n.content.length,c=!1,u=-1;if(a){let a=function(e,n,r,i,s,o){let a=s.beginRuleCapturedEOL?0:-1,l=[];for(let n=s;n;n=n.pop()){let r=n.getRule(e);r instanceof wr&&l.push({rule:r,stack:n})}for(let f=l.pop();f;f=l.pop()){var h,c,u,d,p;let{ruleScanner:l,findOptions:g}=(h=f.rule,c=e,u=f.stack.endRule,d=r,p=i===a,{ruleScanner:h.compileWhileAG(c,u,d,p),findOptions:0}),m=l.findNextMatchSync(n,i,g);if(m){if(-2!==m.ruleId){s=f.stack.pop();break}m.captureIndices&&m.captureIndices.length&&(o.produce(f.stack,m.captureIndices[0].start),wf(e,n,r,f.stack,o,f.rule.whileCaptures,m.captureIndices),o.produce(f.stack,m.captureIndices[0].end),a=m.captureIndices[0].end,m.captureIndices[0].end>i&&(i=m.captureIndices[0].end,r=!1))}else{s=f.stack.pop();break}}return{stack:s,linePos:i,anchorPosition:a,isFirstLine:r}}(e,n,r,i,s,o);s=a.stack,i=a.linePos,r=a.isFirstLine,u=a.anchorPosition}let d=Date.now();for(;!c;){if(0!==l&&Date.now()-d>l)return new wu(s,!0);!function(){let a=function(e,n,r,i,s,o){let a=function(e,n,r,i,s,o){let{ruleScanner:a,findOptions:l}=wp(s.getRule(e),e,s.endRule,r,i===o),h=a.findNextMatchSync(n,i,l);return h?{captureIndices:h.captureIndices,matchedRuleId:h.ruleId}:null}(e,n,r,i,s,o),l=e.getInjections();if(0===l.length)return a;let h=function(e,n,r,i,s,o,a){let l,h=Number.MAX_VALUE,c=null,u=0,d=o.contentNameScopesList.getScopeNames();for(let o=0,p=e.length;o<p;o++){let p=e[o];if(!p.matcher(d))continue;let{ruleScanner:f,findOptions:g}=wp(n.getRule(p.ruleId),n,null,i,s===a),m=f.findNextMatchSync(r,s,g);if(!m)continue;let y=m.captureIndices[0].start;if(!(y>=h)&&(h=y,c=m.captureIndices,l=m.ruleId,u=p.priority,h===s))break}return c?{priorityMatch:-1===u,captureIndices:c,matchedRuleId:l}:null}(l,e,n,r,i,s,o);if(!h)return a;if(!a)return h;let c=a.captureIndices[0].start,u=h.captureIndices[0].start;return u<c||h.priorityMatch&&u===c?h:a}(e,n,r,i,s,u);if(!a){o.produce(s,h),c=!0;return}let l=a.captureIndices,d=a.matchedRuleId,p=!!l&&l.length>0&&l[0].end>i;if(-1===d){let a=s.getRule(e);o.produce(s,l[0].start),s=s.withContentNameScopesList(s.nameScopesList),wf(e,n,r,s,o,a.endCaptures,l),o.produce(s,l[0].end);let d=s;if(s=s.parent,u=d.getAnchorPos(),!p&&d.getEnterPos()===i){s=d,o.produce(s,h),c=!0;return}}else{let a=e.getRule(d);o.produce(s,l[0].start);let f=s,g=a.getName(n.content,l),m=s.contentNameScopesList.pushAttributed(g,e);if(s=s.push(d,i,u,l[0].end===h,null,m,m),a instanceof wn){wf(e,n,r,s,o,a.beginCaptures,l),o.produce(s,l[0].end),u=l[0].end;let i=a.getContentName(n.content,l),d=m.pushAttributed(i,e);if(s=s.withContentNameScopesList(d),a.endHasBackReferences&&(s=s.withEndRule(a.getEndWithResolvedBackReferences(n.content,l))),!p&&f.hasSameRuleAs(s)){s=s.pop(),o.produce(s,h),c=!0;return}}else if(a instanceof wr){wf(e,n,r,s,o,a.beginCaptures,l),o.produce(s,l[0].end),u=l[0].end;let i=a.getContentName(n.content,l),d=m.pushAttributed(i,e);if(s=s.withContentNameScopesList(d),a.whileHasBackReferences&&(s=s.withEndRule(a.getWhileWithResolvedBackReferences(n.content,l))),!p&&f.hasSameRuleAs(s)){s=s.pop(),o.produce(s,h),c=!0;return}}else if(wf(e,n,r,s,o,a.captures,l),o.produce(s,l[0].end),s=s.pop(),!p){s=s.safePop(),o.produce(s,h),c=!0;return}}l[0].end>i&&(i=l[0].end,r=!1)}()}return new wu(s,!1)}function wp(e,n,r,i,s){return{ruleScanner:e.compileAG(n,r,i,s),findOptions:0}}function wf(e,n,r,i,s,o,a){if(0===o.length)return;let l=n.content,h=Math.min(o.length,a.length),c=[],u=a[0].end;for(let n=0;n<h;n++){let h=o[n];if(null===h)continue;let d=a[n];if(0===d.length)continue;if(d.start>u)break;for(;c.length>0&&c[c.length-1].endPos<=d.start;)s.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop();if(c.length>0?s.produceFromScopes(c[c.length-1].scopes,d.start):s.produce(i,d.start),h.retokenizeCapturedWithRuleId){let n=h.getName(l,a),o=i.contentNameScopesList.pushAttributed(n,e),c=h.getContentName(l,a),u=o.pushAttributed(c,e),p=i.push(h.retokenizeCapturedWithRuleId,d.start,-1,!1,null,o,u),f=e.createOnigString(l.substring(0,d.end));wd(e,f,r&&0===d.start,d.start,p,s,!1,0),xW(f);continue}let p=h.getName(l,a);if(null!==p){let n=(c.length>0?c[c.length-1].scopes:i.contentNameScopesList).pushAttributed(p,e);c.push(new wg(n,d.end))}}for(;c.length>0;)s.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop()}var wg=class{scopes;endPos;constructor(e,n){this.scopes=e,this.endPos=n}};function wm(e,n,r,i,s){let o=xZ(n,wy),a=wi.getCompiledRuleId(r,i,s.repository);for(let r of o)e.push({debugSelector:n,matcher:r.matcher,ruleId:a,grammar:s,priority:r.priority})}function wy(e,n){if(n.length<e.length)return!1;let r=0;return e.every(e=>{for(let i=r;i<n.length;i++)if(function(e,n){if(!e)return!1;if(e===n)return!0;let r=n.length;return e.length>r&&e.substr(0,r)===n&&"."===e[r]}(n[i],e))return r=i+1,!0;return!1})}var wO=class{constructor(e,n,r,i,s,o,a,l){if(this._rootScopeName=e,this.balancedBracketSelectors=o,this._onigLib=l,this._basicScopeAttributesProvider=new wh(r,i),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=a,this._grammar=wv(n,null),this._injections=null,this._tokenTypeMatchers=[],s)for(let e of Object.keys(s))for(let n of xZ(e,wy))this._tokenTypeMatchers.push({matcher:n.matcher,type:s[e]})}_rootId;_lastRuleId;_ruleId2desc;_includedGrammars;_grammarRepository;_grammar;_injections;_basicScopeAttributesProvider;_tokenTypeMatchers;get themeProvider(){return this._grammarRepository}dispose(){for(let e of this._ruleId2desc)e&&e.dispose()}createOnigScanner(e){return this._onigLib.createOnigScanner(e)}createOnigString(e){return this._onigLib.createOnigString(e)}getMetadataForScope(e){return this._basicScopeAttributesProvider.getBasicScopeAttributes(e)}_collectInjections(){let e=[],n=this._rootScopeName,r=({lookup:e=>e===this._rootScopeName?this._grammar:this.getExternalGrammar(e),injections:e=>this._grammarRepository.injections(e)}).lookup(n);if(r){let i=r.injections;if(i)for(let n in i)wm(e,n,i[n],this,r);let s=this._grammarRepository.injections(n);s&&s.forEach(n=>{let r=this.getExternalGrammar(n);if(r){let n=r.injectionSelector;n&&wm(e,n,r,this,r)}})}return e.sort((e,n)=>e.priority-n.priority),e}getInjections(){return null===this._injections&&(this._injections=this._collectInjections()),this._injections}registerRule(e){let n=++this._lastRuleId,r=e(n);return this._ruleId2desc[n]=r,r}getRule(e){return this._ruleId2desc[e]}getExternalGrammar(e,n){if(this._includedGrammars[e])return this._includedGrammars[e];if(this._grammarRepository){let r=this._grammarRepository.lookup(e);if(r)return this._includedGrammars[e]=wv(r,n&&n.$base),this._includedGrammars[e]}}tokenizeLine(e,n,r=0){let i=this._tokenize(e,n,!1,r);return{tokens:i.lineTokens.getResult(i.ruleStack,i.lineLength),ruleStack:i.ruleStack,stoppedEarly:i.stoppedEarly}}tokenizeLine2(e,n,r=0){let i=this._tokenize(e,n,!0,r);return{tokens:i.lineTokens.getBinaryResult(i.ruleStack,i.lineLength),ruleStack:i.ruleStack,stoppedEarly:i.stoppedEarly}}_tokenize(e,n,r,i){let s;if(-1===this._rootId&&(this._rootId=wi.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections()),n&&n!==wx.NULL)s=!1,n.reset();else{let e;s=!0;let r=this._basicScopeAttributesProvider.getDefaultAttributes(),i=this.themeProvider.getDefaults(),o=xF.set(0,r.languageId,r.tokenType,null,i.fontStyle,i.foregroundId,i.backgroundId),a=this.getRule(this._rootId).getName(null,null);e=a?wb.createRootAndLookUpScopeName(a,o,this):wb.createRoot("unknown",o),n=new wx(null,this._rootId,-1,-1,!1,null,e,e)}e+="\n";let o=this.createOnigString(e),a=o.content.length,l=new wS(r,e,this._tokenTypeMatchers,this.balancedBracketSelectors),h=wd(this,o,s,0,n,l,!0,i);return xW(o),{lineLength:a,lineTokens:l,ruleStack:h.stack,stoppedEarly:h.stoppedEarly}}};function wv(e,n){return(e=function e(n){return Array.isArray(n)?function(n){let r=[];for(let i=0,s=n.length;i<s;i++)r[i]=e(n[i]);return r}(n):n instanceof RegExp?n:"object"==typeof n?function(n){let r={};for(let i in n)r[i]=e(n[i]);return r}(n):n}(e)).repository=e.repository||{},e.repository.$self={$vscodeTextmateLocation:e.$vscodeTextmateLocation,patterns:e.patterns,name:e.scopeName},e.repository.$base=n||e.repository.$self,e}var wb=class e{constructor(e,n,r){this.parent=e,this.scopePath=n,this.tokenAttributes=r}static fromExtension(n,r){let i=n,s=n?.scopePath??null;for(let n of r)i=new e(i,s=x$.push(s,n.scopeNames),n.encodedTokenAttributes);return i}static createRoot(n,r){return new e(null,new x$(null,n),r)}static createRootAndLookUpScopeName(n,r,i){let s=i.getMetadataForScope(n),o=new x$(null,n),a=i.themeProvider.themeMatch(o),l=e.mergeAttributes(r,s,a);return new e(null,o,l)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(n){return e.equals(this,n)}static equals(e,n){for(;;){if(e===n||!e&&!n)return!0;if(!e||!n||e.scopeName!==n.scopeName||e.tokenAttributes!==n.tokenAttributes)return!1;e=e.parent,n=n.parent}}static mergeAttributes(e,n,r){let i=-1,s=0,o=0;return null!==r&&(i=r.fontStyle,s=r.foregroundId,o=r.backgroundId),xF.set(e,n.languageId,n.tokenType,null,i,s,o)}pushAttributed(n,r){if(null===n)return this;if(-1===n.indexOf(" "))return e._pushAttributed(this,n,r);let i=n.split(/ /g),s=this;for(let n of i)s=e._pushAttributed(s,n,r);return s}static _pushAttributed(n,r,i){let s=i.getMetadataForScope(r),o=n.scopePath.push(r),a=i.themeProvider.themeMatch(o),l=e.mergeAttributes(n.tokenAttributes,s,a);return new e(n,o,l)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){let n=[],r=this;for(;r&&r!==e;)n.push({encodedTokenAttributes:r.tokenAttributes,scopeNames:r.scopePath.getExtensionIfDefined(r.parent?.scopePath??null)}),r=r.parent;return r===e?n.reverse():void 0}},wx=class e{constructor(e,n,r,i,s,o,a,l){this.parent=e,this.ruleId=n,this.beginRuleCapturedEOL=s,this.endRule=o,this.nameScopesList=a,this.contentNameScopesList=l,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=r,this._anchorPos=i}_stackElementBrand=void 0;static NULL=new e(null,0,0,0,!1,null,null,null);_enterPos;_anchorPos;depth;equals(n){return null!==n&&e._equals(this,n)}static _equals(e,n){return e===n||!!this._structuralEquals(e,n)&&wb.equals(e.contentNameScopesList,n.contentNameScopesList)}static _structuralEquals(e,n){for(;;){if(e===n||!e&&!n)return!0;if(!e||!n||e.depth!==n.depth||e.ruleId!==n.ruleId||e.endRule!==n.endRule)return!1;e=e.parent,n=n.parent}}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){e._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(n,r,i,s,o,a,l){return new e(this,n,r,i,s,o,a,l)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){let e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,n){return this.parent&&(n=this.parent._writeString(e,n)),e[n++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,n}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(n){return this.endRule===n?this:new e(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,n,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let n=this;for(;n&&n._enterPos===e._enterPos;){if(n.ruleId===e.ruleId)return!0;n=n.parent}return!1}toStateStackFrame(){return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(n,r){let i=wb.fromExtension(n?.nameScopesList??null,r.nameScopesList);return new e(n,r.ruleId,r.enterPos??-1,r.anchorPos??-1,r.beginRuleCapturedEOL,r.endRule,i,wb.fromExtension(i,r.contentNameScopesList))}},ww=class{balancedBracketScopes;unbalancedBracketScopes;allowAny=!1;constructor(e,n){this.balancedBracketScopes=e.flatMap(e=>"*"===e?(this.allowAny=!0,[]):xZ(e,wy).map(e=>e.matcher)),this.unbalancedBracketScopes=n.flatMap(e=>xZ(e,wy).map(e=>e.matcher))}get matchesAlways(){return this.allowAny&&0===this.unbalancedBracketScopes.length}get matchesNever(){return 0===this.balancedBracketScopes.length&&!this.allowAny}match(e){for(let n of this.unbalancedBracketScopes)if(n(e))return!1;for(let n of this.balancedBracketScopes)if(n(e))return!0;return this.allowAny}},wS=class{constructor(e,n,r,i){this.balancedBracketSelectors=i,this._emitBinaryTokens=e,this._tokenTypeOverrides=r,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}_emitBinaryTokens;_lineText;_tokens;_binaryTokens;_lastTokenEndIndex;_tokenTypeOverrides;produce(e,n){this.produceFromScopes(e.contentNameScopesList,n)}produceFromScopes(e,n){if(this._lastTokenEndIndex>=n)return;if(this._emitBinaryTokens){let r=e?.tokenAttributes??0,i=!1;if(this.balancedBracketSelectors?.matchesAlways&&(i=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){let n=e?.getScopeNames()??[];for(let e of this._tokenTypeOverrides)e.matcher(n)&&(r=xF.set(r,0,e.type,null,-1,0,0));this.balancedBracketSelectors&&(i=this.balancedBracketSelectors.match(n))}if(i&&(r=xF.set(r,0,8,i,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===r){this._lastTokenEndIndex=n;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(r),this._lastTokenEndIndex=n;return}let r=e?.getScopeNames()??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:n,scopes:r}),this._lastTokenEndIndex=n}getResult(e,n){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===n-1&&this._tokens.pop(),0===this._tokens.length&&(this._lastTokenEndIndex=-1,this.produce(e,n),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(e,n){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===n-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),0===this._binaryTokens.length&&(this._lastTokenEndIndex=-1,this.produce(e,n),this._binaryTokens[this._binaryTokens.length-2]=0);let r=new Uint32Array(this._binaryTokens.length);for(let e=0,n=this._binaryTokens.length;e<n;e++)r[e]=this._binaryTokens[e];return r}},w_=class{constructor(e,n){this._onigLib=n,this._theme=e}_grammars=new Map;_rawGrammars=new Map;_injectionGrammars=new Map;_theme;dispose(){for(let e of this._grammars.values())e.dispose()}setTheme(e){this._theme=e}getColorMap(){return this._theme.getColorMap()}addGrammar(e,n){this._rawGrammars.set(e.scopeName,e),n&&this._injectionGrammars.set(e.scopeName,n)}lookup(e){return this._rawGrammars.get(e)}injections(e){return this._injectionGrammars.get(e)}getDefaults(){return this._theme.getDefaults()}themeMatch(e){return this._theme.match(e)}grammarForScopeName(e,n,r,i,s){if(!this._grammars.has(e)){let o=this._rawGrammars.get(e);if(!o)return null;this._grammars.set(e,new wO(e,o,n,r,i,s,this,this._onigLib))}return this._grammars.get(e)}},wk=class{_options;_syncRegistry;_ensureGrammarCache;constructor(e){this._options=e,this._syncRegistry=new w_(xI.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,n){this._syncRegistry.setTheme(xI.createFromRawTheme(e,n))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,n,r){return this.loadGrammarWithConfiguration(e,n,{embeddedLanguages:r})}loadGrammarWithConfiguration(e,n,r){return this._loadGrammar(e,n,r.embeddedLanguages,r.tokenTypes,new ww(r.balancedBracketSelectors||[],r.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}_loadGrammar(e,n,r,i,s){let o=new xG(this._syncRegistry,e);for(;o.Q.length>0;)o.Q.map(e=>this._loadSingleGrammar(e.scopeName)),o.processQueue();return this._grammarForScopeName(e,n,r,i,s)}_loadSingleGrammar(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}_doLoadSingleGrammar(e){let n=this._options.loadGrammar(e);if(n){let r="function"==typeof this._options.getInjections?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(n,r)}}addGrammar(e,n=[],r=0,i=null){return this._syncRegistry.addGrammar(e,n),this._grammarForScopeName(e.scopeName,r,i)}_grammarForScopeName(e,n=0,r=null,i=null,s=null){return this._syncRegistry.grammarForScopeName(e,n,r,i,s)}},wC=wx.NULL;let wE=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];class wT{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}function wP(e,n){let r={},i={};for(let n of e)Object.assign(r,n.property),Object.assign(i,n.normal);return new wT(r,i,n)}function wA(e){return e.toLowerCase()}wT.prototype.normal={},wT.prototype.property={},wT.prototype.space=void 0;class wM{constructor(e,n){this.attribute=n,this.property=e}}wM.prototype.attribute="",wM.prototype.booleanish=!1,wM.prototype.boolean=!1,wM.prototype.commaOrSpaceSeparated=!1,wM.prototype.commaSeparated=!1,wM.prototype.defined=!1,wM.prototype.mustUseProperty=!1,wM.prototype.number=!1,wM.prototype.overloadedBoolean=!1,wM.prototype.property="",wM.prototype.spaceSeparated=!1,wM.prototype.space=void 0;let wN=0,wD=wV(),wI=wV(),w$=wV(),wR=wV(),wL=wV(),wQ=wV(),wj=wV();function wV(){return 2**++wN}let wz=Object.keys(na);class wB extends wM{constructor(e,n,r,i){let s=-1;if(super(e,n),function(e,n,r){r&&(e[n]=r)}(this,"space",i),"number"==typeof r)for(;++s<wz.length;){let e=wz[s];!function(e,n,r){r&&(e[n]=r)}(this,wz[s],(r&na[e])===na[e])}}}function wF(e){let n={},r={};for(let[i,s]of Object.entries(e.properties)){let o=new wB(i,e.transform(e.attributes||{},i),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(i)&&(o.mustUseProperty=!0),n[i]=o,r[wA(i)]=i,r[wA(o.attribute)]=i}return new wT(n,r,e.space)}wB.prototype.defined=!0;let wZ=wF({properties:{ariaActiveDescendant:null,ariaAtomic:wI,ariaAutoComplete:null,ariaBusy:wI,ariaChecked:wI,ariaColCount:wR,ariaColIndex:wR,ariaColSpan:wR,ariaControls:wL,ariaCurrent:null,ariaDescribedBy:wL,ariaDetails:null,ariaDisabled:wI,ariaDropEffect:wL,ariaErrorMessage:null,ariaExpanded:wI,ariaFlowTo:wL,ariaGrabbed:wI,ariaHasPopup:null,ariaHidden:wI,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:wL,ariaLevel:wR,ariaLive:null,ariaModal:wI,ariaMultiLine:wI,ariaMultiSelectable:wI,ariaOrientation:null,ariaOwns:wL,ariaPlaceholder:null,ariaPosInSet:wR,ariaPressed:wI,ariaReadOnly:wI,ariaRelevant:null,ariaRequired:wI,ariaRoleDescription:wL,ariaRowCount:wR,ariaRowIndex:wR,ariaRowSpan:wR,ariaSelected:wI,ariaSetSize:wR,ariaSort:null,ariaValueMax:wR,ariaValueMin:wR,ariaValueNow:wR,ariaValueText:null,role:null},transform:(e,n)=>"role"===n?n:"aria-"+n.slice(4).toLowerCase()});function wq(e,n){return n in e?e[n]:n}function wW(e,n){return wq(e,n.toLowerCase())}let wX=wF({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:wQ,acceptCharset:wL,accessKey:wL,action:null,allow:null,allowFullScreen:wD,allowPaymentRequest:wD,allowUserMedia:wD,alt:null,as:null,async:wD,autoCapitalize:null,autoComplete:wL,autoFocus:wD,autoPlay:wD,blocking:wL,capture:null,charSet:null,checked:wD,cite:null,className:wL,cols:wR,colSpan:null,content:null,contentEditable:wI,controls:wD,controlsList:wL,coords:wR|wQ,crossOrigin:null,data:null,dateTime:null,decoding:null,default:wD,defer:wD,dir:null,dirName:null,disabled:wD,download:w$,draggable:wI,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:wD,formTarget:null,headers:wL,height:wR,hidden:w$,high:wR,href:null,hrefLang:null,htmlFor:wL,httpEquiv:wL,id:null,imageSizes:null,imageSrcSet:null,inert:wD,inputMode:null,integrity:null,is:null,isMap:wD,itemId:null,itemProp:wL,itemRef:wL,itemScope:wD,itemType:wL,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:wD,low:wR,manifest:null,max:null,maxLength:wR,media:null,method:null,min:null,minLength:wR,multiple:wD,muted:wD,name:null,nonce:null,noModule:wD,noValidate:wD,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:wD,optimum:wR,pattern:null,ping:wL,placeholder:null,playsInline:wD,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:wD,referrerPolicy:null,rel:wL,required:wD,reversed:wD,rows:wR,rowSpan:wR,sandbox:wL,scope:null,scoped:wD,seamless:wD,selected:wD,shadowRootClonable:wD,shadowRootDelegatesFocus:wD,shadowRootMode:null,shape:null,size:wR,sizes:null,slot:null,span:wR,spellCheck:wI,src:null,srcDoc:null,srcLang:null,srcSet:null,start:wR,step:null,style:null,tabIndex:wR,target:null,title:null,translate:null,type:null,typeMustMatch:wD,useMap:null,value:wI,width:wR,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:wL,axis:null,background:null,bgColor:null,border:wR,borderColor:null,bottomMargin:wR,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:wD,declare:wD,event:null,face:null,frame:null,frameBorder:null,hSpace:wR,leftMargin:wR,link:null,longDesc:null,lowSrc:null,marginHeight:wR,marginWidth:wR,noResize:wD,noHref:wD,noShade:wD,noWrap:wD,object:null,profile:null,prompt:null,rev:null,rightMargin:wR,rules:null,scheme:null,scrolling:wI,standby:null,summary:null,text:null,topMargin:wR,valueType:null,version:null,vAlign:null,vLink:null,vSpace:wR,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:wD,disableRemotePlayback:wD,prefix:null,property:null,results:wR,security:null,unselectable:null},space:"html",transform:wW}),wU=wF({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:wj,accentHeight:wR,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:wR,amplitude:wR,arabicForm:null,ascent:wR,attributeName:null,attributeType:null,azimuth:wR,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:wR,by:null,calcMode:null,capHeight:wR,className:wL,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:wR,diffuseConstant:wR,direction:null,display:null,dur:null,divisor:wR,dominantBaseline:null,download:wD,dx:null,dy:null,edgeMode:null,editable:null,elevation:wR,enableBackground:null,end:null,event:null,exponent:wR,externalResourcesRequired:null,fill:null,fillOpacity:wR,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:wQ,g2:wQ,glyphName:wQ,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:wR,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:wR,horizOriginX:wR,horizOriginY:wR,id:null,ideographic:wR,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:wR,k:wR,k1:wR,k2:wR,k3:wR,k4:wR,kernelMatrix:wj,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:wR,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:wR,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:wR,overlineThickness:wR,paintOrder:null,panose1:null,path:null,pathLength:wR,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:wL,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:wR,pointsAtY:wR,pointsAtZ:wR,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:wj,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:wj,rev:wj,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:wj,requiredFeatures:wj,requiredFonts:wj,requiredFormats:wj,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:wR,specularExponent:wR,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:wR,strikethroughThickness:wR,string:null,stroke:null,strokeDashArray:wj,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:wR,strokeOpacity:wR,strokeWidth:null,style:null,surfaceScale:wR,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:wj,tabIndex:wR,tableValues:null,target:null,targetX:wR,targetY:wR,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:wj,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:wR,underlineThickness:wR,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:wR,values:null,vAlphabetic:wR,vMathematical:wR,vectorEffect:null,vHanging:wR,vIdeographic:wR,version:null,vertAdvY:wR,vertOriginX:wR,vertOriginY:wR,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:wR,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:wq}),wY=wF({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform:(e,n)=>"xlink:"+n.slice(5).toLowerCase()}),wG=wF({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:wW}),wH=wF({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform:(e,n)=>"xml:"+n.slice(3).toLowerCase()}),wK=wP([wZ,wX,wY,wG,wH],"html"),wJ=wP([wZ,wU,wY,wG,wH],"svg"),w0={}.hasOwnProperty,w1=/["&'<>`]/g,w2=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,w5=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,w4=/[|\\{}()[\]^$+*?.]/g,w3=new WeakMap,w6=/[\dA-Fa-f]/,w9=/\d/,w7=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],w8={nbsp:"\xa0",iexcl:"\xa1",cent:"\xa2",pound:"\xa3",curren:"\xa4",yen:"\xa5",brvbar:"\xa6",sect:"\xa7",uml:"\xa8",copy:"\xa9",ordf:"\xaa",laquo:"\xab",not:"\xac",shy:"\xad",reg:"\xae",macr:"\xaf",deg:"\xb0",plusmn:"\xb1",sup2:"\xb2",sup3:"\xb3",acute:"\xb4",micro:"\xb5",para:"\xb6",middot:"\xb7",cedil:"\xb8",sup1:"\xb9",ordm:"\xba",raquo:"\xbb",frac14:"\xbc",frac12:"\xbd",frac34:"\xbe",iquest:"\xbf",Agrave:"\xc0",Aacute:"\xc1",Acirc:"\xc2",Atilde:"\xc3",Auml:"\xc4",Aring:"\xc5",AElig:"\xc6",Ccedil:"\xc7",Egrave:"\xc8",Eacute:"\xc9",Ecirc:"\xca",Euml:"\xcb",Igrave:"\xcc",Iacute:"\xcd",Icirc:"\xce",Iuml:"\xcf",ETH:"\xd0",Ntilde:"\xd1",Ograve:"\xd2",Oacute:"\xd3",Ocirc:"\xd4",Otilde:"\xd5",Ouml:"\xd6",times:"\xd7",Oslash:"\xd8",Ugrave:"\xd9",Uacute:"\xda",Ucirc:"\xdb",Uuml:"\xdc",Yacute:"\xdd",THORN:"\xde",szlig:"\xdf",agrave:"\xe0",aacute:"\xe1",acirc:"\xe2",atilde:"\xe3",auml:"\xe4",aring:"\xe5",aelig:"\xe6",ccedil:"\xe7",egrave:"\xe8",eacute:"\xe9",ecirc:"\xea",euml:"\xeb",igrave:"\xec",iacute:"\xed",icirc:"\xee",iuml:"\xef",eth:"\xf0",ntilde:"\xf1",ograve:"\xf2",oacute:"\xf3",ocirc:"\xf4",otilde:"\xf5",ouml:"\xf6",divide:"\xf7",oslash:"\xf8",ugrave:"\xf9",uacute:"\xfa",ucirc:"\xfb",uuml:"\xfc",yacute:"\xfd",thorn:"\xfe",yuml:"\xff",fnof:"ƒ",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",bull:"•",hellip:"…",prime:"′",Prime:"″",oline:"‾",frasl:"⁄",weierp:"℘",image:"ℑ",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",lang:"〈",rang:"〉",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦",quot:'"',amp:"&",lt:"<",gt:">",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",circ:"ˆ",tilde:"˜",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",permil:"‰",lsaquo:"‹",rsaquo:"›",euro:"€"},Se=["cent","copy","divide","gt","lt","not","para","times"],St={}.hasOwnProperty,Sn={};for(h in w8)St.call(w8,h)&&(Sn[w8[h]]=h);let Sr=/[^\dA-Za-z]/;function Si(e,n,r){let i,s=function(e,n,r){let i="&#x"+e.toString(16).toUpperCase();return r&&n&&!w6.test(String.fromCharCode(n))?i:i+";"}(e,n,r.omitOptionalSemicolons);if((r.useNamedReferences||r.useShortestReferences)&&(i=function(e,n,r,i){let s=String.fromCharCode(e);if(St.call(Sn,s)){let e=Sn[s],o="&"+e;return r&&w7.includes(e)&&!Se.includes(e)&&(!i||n&&61!==n&&Sr.test(String.fromCharCode(n)))?o:o+";"}return""}(e,n,r.omitOptionalSemicolons,r.attribute)),(r.useShortestReferences||!i)&&r.useShortestReferences){let i=function(e,n,r){let i="&#"+String(e);return r&&n&&!w9.test(String.fromCharCode(n))?i:i+";"}(e,n,r.omitOptionalSemicolons);i.length<s.length&&(s=i)}return i&&(!r.useShortestReferences||i.length<s.length)?i:s}function Ss(e,n){let r;var i,s=e,o=Object.assign({format:Si},n);if(s=s.replace(o.subset?(i=o.subset,(r=w3.get(i))||(r=function(e){let n=[],r=-1;for(;++r<e.length;)n.push(e[r].replace(w4,"\\$&"));return RegExp("(?:"+n.join("|")+")","g")}(i),w3.set(i,r)),r):w1,a),o.subset||o.escapeOnly)return s;return s.replace(w2,function(e,n,r){return o.format((e.charCodeAt(0)-55296)*1024+e.charCodeAt(1)-56320+65536,r.charCodeAt(n+2),o)}).replace(w5,a);function a(e,n,r){return o.format(e.charCodeAt(0),r.charCodeAt(n+1),o)}}let So=/^>|^->|<!--|-->|--!>|<!-$/g,Sa=[">"],Sl=["<",">"];function Sh(e,n){let r=String(e);if("string"!=typeof n)throw TypeError("Expected character");let i=0,s=r.indexOf(n);for(;-1!==s;)i++,s=r.indexOf(n,s+n.length);return i}let Sc=/[A-Z]/g,Su=/-[a-z]/g,Sd=/^data[-\w.:]+$/i;function Sp(e){return"-"+e.toLowerCase()}function Sf(e){return e.charAt(1).toUpperCase()}let Sg=/[ \t\n\f\r]/g;function Sm(e){return"object"==typeof e?"text"===e.type&&Sy(e.value):Sy(e)}function Sy(e){return""===e.replace(Sg,"")}let SO=Sx(1),Sv=Sx(-1),Sb=[];function Sx(e){return function(n,r,i){let s=n?n.children:Sb,o=(r||0)+e,a=s[o];if(!i)for(;a&&Sm(a);)o+=e,a=s[o];return a}}let Sw={}.hasOwnProperty;function SS(e){return function(n,r,i){return Sw.call(e,n.tagName)&&e[n.tagName](n,r,i)}}let S_=SS({body:function(e,n,r){let i=SO(r,n);return!i||"comment"!==i.type},caption:Sk,colgroup:Sk,dd:function(e,n,r){let i=SO(r,n);return!i||"element"===i.type&&("dt"===i.tagName||"dd"===i.tagName)},dt:function(e,n,r){let i=SO(r,n);return!!(i&&"element"===i.type&&("dt"===i.tagName||"dd"===i.tagName))},head:Sk,html:function(e,n,r){let i=SO(r,n);return!i||"comment"!==i.type},li:function(e,n,r){let i=SO(r,n);return!i||"element"===i.type&&"li"===i.tagName},optgroup:function(e,n,r){let i=SO(r,n);return!i||"element"===i.type&&"optgroup"===i.tagName},option:function(e,n,r){let i=SO(r,n);return!i||"element"===i.type&&("option"===i.tagName||"optgroup"===i.tagName)},p:function(e,n,r){let i=SO(r,n);return i?"element"===i.type&&("address"===i.tagName||"article"===i.tagName||"aside"===i.tagName||"blockquote"===i.tagName||"details"===i.tagName||"div"===i.tagName||"dl"===i.tagName||"fieldset"===i.tagName||"figcaption"===i.tagName||"figure"===i.tagName||"footer"===i.tagName||"form"===i.tagName||"h1"===i.tagName||"h2"===i.tagName||"h3"===i.tagName||"h4"===i.tagName||"h5"===i.tagName||"h6"===i.tagName||"header"===i.tagName||"hgroup"===i.tagName||"hr"===i.tagName||"main"===i.tagName||"menu"===i.tagName||"nav"===i.tagName||"ol"===i.tagName||"p"===i.tagName||"pre"===i.tagName||"section"===i.tagName||"table"===i.tagName||"ul"===i.tagName):!r||"element"!==r.type||"a"!==r.tagName&&"audio"!==r.tagName&&"del"!==r.tagName&&"ins"!==r.tagName&&"map"!==r.tagName&&"noscript"!==r.tagName&&"video"!==r.tagName},rp:SC,rt:SC,tbody:function(e,n,r){let i=SO(r,n);return!i||"element"===i.type&&("tbody"===i.tagName||"tfoot"===i.tagName)},td:SE,tfoot:function(e,n,r){return!SO(r,n)},th:SE,thead:function(e,n,r){let i=SO(r,n);return!!(i&&"element"===i.type&&("tbody"===i.tagName||"tfoot"===i.tagName))},tr:function(e,n,r){let i=SO(r,n);return!i||"element"===i.type&&"tr"===i.tagName}});function Sk(e,n,r){let i=SO(r,n,!0);return!i||"comment"!==i.type&&!("text"===i.type&&Sm(i.value.charAt(0)))}function SC(e,n,r){let i=SO(r,n);return!i||"element"===i.type&&("rp"===i.tagName||"rt"===i.tagName)}function SE(e,n,r){let i=SO(r,n);return!i||"element"===i.type&&("td"===i.tagName||"th"===i.tagName)}let ST=SS({body:function(e){let n=SO(e,-1,!0);return!n||"comment"!==n.type&&!("text"===n.type&&Sm(n.value.charAt(0)))&&("element"!==n.type||"meta"!==n.tagName&&"link"!==n.tagName&&"script"!==n.tagName&&"style"!==n.tagName&&"template"!==n.tagName)},colgroup:function(e,n,r){let i=Sv(r,n),s=SO(e,-1,!0);return!(r&&i&&"element"===i.type&&"colgroup"===i.tagName&&S_(i,r.children.indexOf(i),r))&&!!(s&&"element"===s.type&&"col"===s.tagName)},head:function(e){let n=new Set;for(let r of e.children)if("element"===r.type&&("base"===r.tagName||"title"===r.tagName)){if(n.has(r.tagName))return!1;n.add(r.tagName)}let r=e.children[0];return!r||"element"===r.type},html:function(e){let n=SO(e,-1);return!n||"comment"!==n.type},tbody:function(e,n,r){let i=Sv(r,n),s=SO(e,-1);return!(r&&i&&"element"===i.type&&("thead"===i.tagName||"tbody"===i.tagName)&&S_(i,r.children.indexOf(i),r))&&!!(s&&"element"===s.type&&"tr"===s.tagName)}}),SP={name:[["	\n\f\r &/=>".split(""),"	\n\f\r \"&'/=>`".split("")],["\0	\n\f\r \"&'/<=>".split(""),"\0	\n\f\r \"&'/<=>`".split("")]],unquoted:[["	\n\f\r &>".split(""),"\0	\n\f\r \"&'<=>`".split("")],["\0	\n\f\r \"&'<=>`".split(""),"\0	\n\f\r \"&'<=>`".split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]},SA=["<","&"];function SM(e,n,r,i){return r&&"element"===r.type&&("script"===r.tagName||"style"===r.tagName)?e.value:Ss(e.value,Object.assign({},i.settings.characterReferences,{subset:SA}))}let SN=function(e,n){let r=n||{};function i(n,...r){let s=i.invalid,o=i.handlers;if(n&&w0.call(n,e)){let r=String(n[e]);s=w0.call(o,r)?o[r]:i.unknown}if(s)return s.call(this,n,...r)}return i.handlers=r.handlers||{},i.invalid=r.invalid,i.unknown=r.unknown,i}("type",{invalid:function(e){throw Error("Expected node, not `"+e+"`")},unknown:function(e){throw Error("Cannot compile unknown node `"+e.type+"`")},handlers:{comment:function(e,n,r,i){return i.settings.bogusComments?"<?"+Ss(e.value,Object.assign({},i.settings.characterReferences,{subset:Sa}))+">":"\x3c!--"+e.value.replace(So,function(e){return Ss(e,Object.assign({},i.settings.characterReferences,{subset:Sl}))})+"--\x3e"},doctype:function(e,n,r,i){return"<!"+(i.settings.upperDoctype?"DOCTYPE":"doctype")+(i.settings.tightDoctype?"":" ")+"html>"},element:function(e,n,r,i){let s,o=i.schema,a="svg"!==o.space&&i.settings.omitOptionalTags,l="svg"===o.space?i.settings.closeEmptyElements:i.settings.voids.includes(e.tagName.toLowerCase()),h=[];"html"===o.space&&"svg"===e.tagName&&(i.schema=wJ);let c=function(e,n){let r,i=[],s=-1;if(n){for(r in n)if(null!==n[r]&&void 0!==n[r]){let s=function(e,n,r){let i,s=function(e,n){let r=wA(n),i=n,s=wM;if(r in e.normal)return e.property[e.normal[r]];if(r.length>4&&"data"===r.slice(0,4)&&Sd.test(n)){if("-"===n.charAt(4)){let e=n.slice(5).replace(Su,Sf);i="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{let e=n.slice(4);if(!Su.test(e)){let r=e.replace(Sc,Sp);"-"!==r.charAt(0)&&(r="-"+r),n="data"+r}}s=wB}return new s(i,n)}(e.schema,n),o=e.settings.allowParseErrors&&"html"===e.schema.space?0:1,a=+!e.settings.allowDangerousCharacters,l=e.quote;if(s.overloadedBoolean&&(r===s.attribute||""===r)?r=!0:(s.boolean||s.overloadedBoolean)&&("string"!=typeof r||r===s.attribute||""===r)&&(r=!!r),null==r||!1===r||"number"==typeof r&&Number.isNaN(r))return"";let h=Ss(s.attribute,Object.assign({},e.settings.characterReferences,{subset:SP.name[o][a]}));return!0===r||(r=Array.isArray(r)?(s.commaSeparated?function(e,n){let r=n||{};return(""===e[e.length-1]?[...e,""]:e).join((r.padRight?" ":"")+","+(!1===r.padLeft?"":" ")).trim()}:function(e){return e.join(" ").trim()})(r,{padLeft:!e.settings.tightCommaSeparatedLists}):String(r),e.settings.collapseEmptyAttributes&&!r)?h:(e.settings.preferUnquoted&&(i=Ss(r,Object.assign({},e.settings.characterReferences,{attribute:!0,subset:SP.unquoted[o][a]}))),i!==r&&(e.settings.quoteSmart&&Sh(r,l)>Sh(r,e.alternative)&&(l=e.alternative),i=l+Ss(r,Object.assign({},e.settings.characterReferences,{subset:("'"===l?SP.single:SP.double)[o][a],attribute:!0}))+l),h+(i?"="+i:i))}(e,r,n[r]);s&&i.push(s)}}for(;++s<i.length;){let n=e.settings.tightAttributes?i[s].charAt(i[s].length-1):void 0;s!==i.length-1&&'"'!==n&&"'"!==n&&(i[s]+=" ")}return i.join("")}(i,e.properties),u=i.all("html"===o.space&&"template"===e.tagName?e.content:e);return i.schema=o,u&&(l=!1),!c&&a&&ST(e,n,r)||(h.push("<",e.tagName,c?" "+c:""),l&&("svg"===o.space||i.settings.closeSelfClosing)&&(s=c.charAt(c.length-1),(!i.settings.tightSelfClosing||"/"===s||s&&'"'!==s&&"'"!==s)&&h.push(" "),h.push("/")),h.push(">")),h.push(u),l||a&&S_(e,n,r)||h.push("</"+e.tagName+">"),h.join("")},raw:function(e,n,r,i){return i.settings.allowDangerousHtml?e.value:SM(e,n,r,i)},root:function(e,n,r,i){return i.all(e)},text:SM}}),SD={},SI={},S$=[];function SR(e,n,r){return SN(e,n,r,this)}function SL(e){let n=[],r=e&&e.children||S$,i=-1;for(;++i<r.length;)n[i]=this.one(r[i],i,e);return n.join("")}function SQ(e,n){let r="string"==typeof e?{}:{...e.colorReplacements},i="string"==typeof e?e:e.name;for(let[e,s]of Object.entries(n?.colorReplacements||{}))"string"==typeof s?r[e]=s:e===i&&Object.assign(r,s);return r}function Sj(e,n){return e&&n?.[e?.toLowerCase()]||e}async function SV(e){return Promise.resolve("function"==typeof e?e():e).then(e=>e.default||e)}function Sz(e){return!e||["plaintext","txt","text","plain"].includes(e)}function SB(e){return"ansi"===e||Sz(e)}function SF(e){return"none"===e}function SZ(e,n){if(!n)return e;for(let r of(e.properties||={},e.properties.class||=[],"string"==typeof e.properties.class&&(e.properties.class=e.properties.class.split(/\s+/g)),Array.isArray(e.properties.class)||(e.properties.class=[]),Array.isArray(n)?n:n.split(/\s+/g)))r&&!e.properties.class.includes(r)&&e.properties.class.push(r);return e}function Sq(e,n=!1){let r=e.split(/(\r?\n)/g),i=0,s=[];for(let e=0;e<r.length;e+=2){let o=n?r[e]+(r[e+1]||""):r[e];s.push([o,i]),i+=r[e].length,i+=r[e+1]?.length||0}return s}let SW="light-dark()",SX=["color","background-color"];function SU(e){let n={};if(e.color&&(n.color=e.color),e.bgColor&&(n["background-color"]=e.bgColor),e.fontStyle){e.fontStyle&xQ.Italic&&(n["font-style"]="italic"),e.fontStyle&xQ.Bold&&(n["font-weight"]="bold");let r=[];e.fontStyle&xQ.Underline&&r.push("underline"),e.fontStyle&xQ.Strikethrough&&r.push("line-through"),r.length&&(n["text-decoration"]=r.join(" "))}return n}function SY(e){return"string"==typeof e?e:Object.entries(e).map(([e,n])=>`${e}:${n}`).join(";")}let SG=new WeakMap;function SH(e,n){SG.set(e,n)}function SK(e){return SG.get(e)}class SJ{_stacks={};lang;get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,n){return new SJ(Object.fromEntries((Array.isArray(n)?n:[n]).map(e=>[e,wC])),e)}constructor(...e){if(2===e.length){let[n,r]=e;this.lang=r,this._stacks=n}else{let[n,r,i]=e;this.lang=r,this._stacks={[i]:n}}}getInternalStack(e=this.theme){return this._stacks[e]}getScopes(e=this.theme){var n=this._stacks[e];let r=[],i=new Set;return!function e(n){if(i.has(n))return;i.add(n);let s=n?.nameScopesList?.scopeName;s&&r.push(s),n.parent&&e(n.parent)}(n),r}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.getScopes()}}}let S0=[function(){let e=new WeakMap;function n(n){if(!e.has(n.meta)){let r=function(e){if("number"==typeof e){if(e<0||e>n.source.length)throw new xC(`Invalid decoration offset: ${e}. Code length: ${n.source.length}`);return{...i.indexToPos(e),offset:e}}{let n=i.lines[e.line];if(void 0===n)throw new xC(`Invalid decoration position ${JSON.stringify(e)}. Lines length: ${i.lines.length}`);let r=e.character;if(r<0&&(r=n.length+r),r<0||r>n.length)throw new xC(`Invalid decoration position ${JSON.stringify(e)}. Line ${e.line} length: ${n.length}`);return{...e,character:r,offset:i.posToIndex(e.line,r)}}},i=function(e){let n=Sq(e,!0).map(([e])=>e);return{lines:n,indexToPos:function(r){if(r===e.length)return{line:n.length-1,character:n[n.length-1].length};let i=r,s=0;for(let e of n){if(i<e.length)break;i-=e.length,s++}return{line:s,character:i}},posToIndex:function(e,r){let i=0;for(let r=0;r<e;r++)i+=n[r].length;return i+r}}}(n.source),s=(n.options.decorations||[]).map(e=>({...e,start:r(e.start),end:r(e.end)}));(function(e){for(let n=0;n<e.length;n++){let r=e[n];if(r.start.offset>r.end.offset)throw new xC(`Invalid decoration range: ${JSON.stringify(r.start)} - ${JSON.stringify(r.end)}`);for(let i=n+1;i<e.length;i++){let n=e[i],s=r.start.offset<=n.start.offset&&n.start.offset<r.end.offset,o=r.start.offset<n.end.offset&&n.end.offset<=r.end.offset,a=n.start.offset<=r.start.offset&&r.start.offset<n.end.offset,l=n.start.offset<r.end.offset&&r.end.offset<=n.end.offset;if(s||o||a||l){if(s&&o||a&&l||a&&r.start.offset===r.end.offset||o&&n.start.offset===n.end.offset)continue;throw new xC(`Decorations ${JSON.stringify(r.start)} and ${JSON.stringify(n.start)} intersect.`)}}}})(s),e.set(n.meta,{decorations:s,converter:i,source:n.source})}return e.get(n.meta)}return{name:"shiki:decorations",tokens(e){if(this.options.decorations?.length){var r=e,i=n(this).decorations.flatMap(e=>[e.start.offset,e.end.offset]);let s=Array.from(i instanceof Set?i:new Set(i)).sort((e,n)=>e-n);return s.length?r.map(e=>e.flatMap(e=>{let n=s.filter(n=>e.offset<n&&n<e.offset+e.content.length).map(n=>n-e.offset).sort((e,n)=>e-n);if(!n.length)return e;let r=0,i=[];for(let s of n)s>r&&i.push({...e,content:e.content.slice(r,s),offset:e.offset+r}),r=s;return r<e.content.length&&i.push({...e,content:e.content.slice(r),offset:e.offset+r}),i})):r}},code(e){if(!this.options.decorations?.length)return;let r=n(this),i=Array.from(e.children).filter(e=>"element"===e.type&&"span"===e.tagName);if(i.length!==r.converter.lines.length)throw new xC(`Number of lines in code element (${i.length}) does not match the number of lines in the source (${r.converter.lines.length}). Failed to apply decorations.`);function s(e,n,r,s){let a=i[e],l="",h=-1,c=-1;if(0===n&&(h=0),0===r&&(c=0),r===1/0&&(c=a.children.length),-1===h||-1===c)for(let e=0;e<a.children.length;e++)l+=function e(n){return"text"===n.type?n.value:"element"===n.type?n.children.map(e).join(""):""}(a.children[e]),-1===h&&l.length===n&&(h=e+1),-1===c&&l.length===r&&(c=e+1);if(-1===h)throw new xC(`Failed to find start index for decoration ${JSON.stringify(s.start)}`);if(-1===c)throw new xC(`Failed to find end index for decoration ${JSON.stringify(s.end)}`);let u=a.children.slice(h,c);if(s.alwaysWrap||u.length!==a.children.length)if(s.alwaysWrap||1!==u.length||"element"!==u[0].type){let e={type:"element",tagName:"span",properties:{},children:u};o(e,s,"wrapper"),a.children.splice(h,u.length,e)}else o(u[0],s,"token");else o(a,s,"line")}function o(e,n,r){let i=n.properties||{},s=n.transform||(e=>e);return e.tagName=n.tagName||"span",e.properties={...e.properties,...i,class:e.properties.class},n.properties?.class&&SZ(e,n.properties.class),e=s(e,r)||e}let a=[];for(let e of r.decorations.sort((e,n)=>n.start.offset-e.start.offset||e.end.offset-n.end.offset)){let{start:n,end:r}=e;if(n.line===r.line)s(n.line,n.character,r.character,e);else if(n.line<r.line){s(n.line,n.character,1/0,e);for(let s=n.line+1;s<r.line;s++)a.unshift(()=>{var n;i[n=s]=o(i[n],e,"line")});s(r.line,0,r.character,e)}}a.forEach(e=>e())}}}()];function S1(e){let n=function(e){let n=[],r=[],i=[];for(let s of e)switch(s.enforce){case"pre":n.push(s);break;case"post":r.push(s);break;default:i.push(s)}return{pre:n,post:r,normal:i}}(e.transformers||[]);return[...n.pre,...n.normal,...n.post,...S0]}var S2=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],S5={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",8:"hidden",9:"strikethrough"};function S4(e){let n=e.shift();if("2"===n){let n=e.splice(0,3).map(e=>Number.parseInt(e));if(3!==n.length||n.some(e=>Number.isNaN(e)))return;return{type:"rgb",rgb:n}}if("5"===n){let n=e.shift();if(n)return{type:"table",index:Number(n)}}}var S3={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function S6(e,n,r={}){let{lang:i="text",theme:s=e.getLoadedThemes()[0]}=r;if(Sz(i)||SF(s))return Sq(n).map(e=>[{content:e[0],offset:e[1]}]);let{theme:o,colorMap:a}=e.setTheme(s);if("ansi"===i)return function(e,n,r){let i,s,o,a=SQ(e,r),l=Sq(n),h=function(e=S3){let n;function r(e){return`#${e.map(e=>Math.max(0,Math.min(e,255)).toString(16).padStart(2,"0")).join("")}`}return{value:function(i){switch(i.type){case"named":return e[i.name];case"rgb":return r(i.rgb);case"table":var s;return s=i.index,function(){if(n)return n;n=[];for(let r=0;r<S2.length;r++)n.push(e[S2[r]]);let i=[0,95,135,175,215,255];for(let e=0;e<6;e++)for(let s=0;s<6;s++)for(let o=0;o<6;o++)n.push(r([i[e],i[s],i[o]]));let s=8;for(let e=0;e<24;e++,s+=10)n.push(r([s,s,s]));return n}()[s]}}}}(Object.fromEntries(S2.map(n=>[n,e.colors?.[`terminal.ansi${n[0].toUpperCase()}${n.substring(1)}`]]))),c=(i=null,s=null,o=new Set,{parse(e){let n=[],r=0;do{let a=function(e,n){let r=e.indexOf("\x1b",n);if(-1!==r&&"["===e[r+1]){let n=e.indexOf("m",r);if(-1!==n)return{sequence:e.substring(r+2,n).split(";"),startPosition:r,position:n+1}}return{position:e.length}}(e,r),l=a.sequence?e.substring(r,a.startPosition):e.substring(r);if(l.length>0&&n.push({value:l,foreground:i,background:s,decorations:new Set(o)}),a.sequence){let e=function(e){let n=[];for(;e.length>0;){let r=e.shift();if(!r)continue;let i=Number.parseInt(r);if(!Number.isNaN(i))if(0===i)n.push({type:"resetAll"});else if(i<=9)S5[i]&&n.push({type:"setDecoration",value:S5[i]});else if(i<=29){let e=S5[i-20];e&&(n.push({type:"resetDecoration",value:e}),"dim"===e&&n.push({type:"resetDecoration",value:"bold"}))}else if(i<=37)n.push({type:"setForegroundColor",value:{type:"named",name:S2[i-30]}});else if(38===i){let r=S4(e);r&&n.push({type:"setForegroundColor",value:r})}else if(39===i)n.push({type:"resetForegroundColor"});else if(i<=47)n.push({type:"setBackgroundColor",value:{type:"named",name:S2[i-40]}});else if(48===i){let r=S4(e);r&&n.push({type:"setBackgroundColor",value:r})}else 49===i?n.push({type:"resetBackgroundColor"}):53===i?n.push({type:"setDecoration",value:"overline"}):55===i?n.push({type:"resetDecoration",value:"overline"}):i>=90&&i<=97?n.push({type:"setForegroundColor",value:{type:"named",name:S2[i-90+8]}}):i>=100&&i<=107&&n.push({type:"setBackgroundColor",value:{type:"named",name:S2[i-100+8]}})}return n}(a.sequence);for(let n of e)"resetAll"===n.type?(i=null,s=null,o.clear()):"resetForegroundColor"===n.type?i=null:"resetBackgroundColor"===n.type?s=null:"resetDecoration"===n.type&&o.delete(n.value);for(let n of e)"setForegroundColor"===n.type?i=n.value:"setBackgroundColor"===n.type?s=n.value:"setDecoration"===n.type&&o.add(n.value)}r=a.position}while(r<e.length);return n}});return l.map(n=>c.parse(n[0]).map(r=>{let i,s;r.decorations.has("reverse")?(i=r.background?h.value(r.background):e.bg,s=r.foreground?h.value(r.foreground):e.fg):(i=r.foreground?h.value(r.foreground):e.fg,s=r.background?h.value(r.background):void 0),i=Sj(i,a),s=Sj(s,a),r.decorations.has("dim")&&(i=function(e){let n=e.match(/#([0-9a-f]{3})([0-9a-f]{3})?([0-9a-f]{2})?/);if(n)if(n[3]){let e=Math.round(Number.parseInt(n[3],16)/2).toString(16).padStart(2,"0");return`#${n[1]}${n[2]}${e}`}else if(n[2])return`#${n[1]}${n[2]}80`;else return`#${Array.from(n[1]).map(e=>`${e}${e}`).join("")}80`;let r=e.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return r?`var(${r[1]}-dim)`:e}(i));let o=xQ.None;return r.decorations.has("bold")&&(o|=xQ.Bold),r.decorations.has("italic")&&(o|=xQ.Italic),r.decorations.has("underline")&&(o|=xQ.Underline),r.decorations.has("strikethrough")&&(o|=xQ.Strikethrough),{content:r.value,offset:n[1],color:i,bgColor:s,fontStyle:o}}))}(o,n,r);let l=e.getLanguage(i);if(r.grammarState){if(r.grammarState.lang!==l.name)throw new xC(`Grammar state language "${r.grammarState.lang}" does not match highlight language "${l.name}"`);if(!r.grammarState.themes.includes(o.name))throw new xC(`Grammar state themes "${r.grammarState.themes}" do not contain highlight theme "${o.name}"`)}var h=n,c=l,u=o,d=a,p=r;let f=S9(h,c,u,d,p),g=new SJ(S9(h,c,u,d,p).stateStack,c.name,u.name);return SH(f.tokens,g),f.tokens}function S9(e,n,r,i,s){let o=SQ(r,s),{tokenizeMaxLineLength:a=0,tokenizeTimeLimit:l=500}=s,h=Sq(e),c=s.grammarState?function(e,n){if(!(e instanceof SJ))throw new xC("Invalid grammar state");return e.getInternalStack(n)}(s.grammarState,r.name)??wC:null!=s.grammarContextCode?S9(s.grammarContextCode,n,r,i,{...s,grammarState:void 0,grammarContextCode:void 0}).stateStack:wC,u=[],d=[];for(let e=0,p=h.length;e<p;e++){let p,f,[g,m]=h[e];if(""===g){u=[],d.push([]);continue}if(a>0&&g.length>=a){u=[],d.push([{content:g,offset:m,color:"",fontStyle:0}]);continue}s.includeExplanation&&(p=n.tokenizeLine(g,c,l).tokens,f=0);let y=n.tokenizeLine2(g,c,l),O=y.tokens.length/2;for(let e=0;e<O;e++){let n=y.tokens[2*e],a=e+1<O?y.tokens[2*e+2]:g.length;if(n===a)continue;let l=y.tokens[2*e+1],h=Sj(i[xF.getForeground(l)],o),c=xF.getFontStyle(l),d={content:g.substring(n,a),offset:m+n,color:h,fontStyle:c};if(s.includeExplanation){let e=[];if("scopeName"!==s.includeExplanation)for(let n of r.settings){let r;switch(typeof n.scope){case"string":r=n.scope.split(/,/).map(e=>e.trim());break;case"object":r=n.scope;break;default:continue}e.push({settings:n,selectors:r.map(e=>e.split(/ /))})}d.explanation=[];let i=0;for(;n+i<a;){let n=p[f],r=g.substring(n.startIndex,n.endIndex);i+=r.length,d.explanation.push({content:r,scopes:"scopeName"===s.includeExplanation?n.scopes.map(e=>({scopeName:e})):function(e,n){let r=[];for(let i=0,s=n.length;i<s;i++){let s=n[i];r[i]={scopeName:s,themeMatches:function(e,n,r){let i=[];for(let{selectors:s,settings:o}of e)for(let e of s)if(function(e,n,r){if(!S7(e[e.length-1],n))return!1;let i=e.length-2,s=r.length-1;for(;i>=0&&s>=0;)S7(e[i],r[s])&&(i-=1),s-=1;return -1===i}(e,n,r)){i.push(o);break}return i}(e,s,n.slice(0,i))}}return r}(e,n.scopes)}),f+=1}}u.push(d)}d.push(u),u=[],c=y.ruleStack}return{tokens:d,stateStack:c}}function S7(e,n){return e===n||n.substring(0,e.length)===e&&"."===n[e.length]}function S8(e,n,r){let i=Object.entries(r.themes).filter(e=>e[1]).map(e=>({color:e[0],theme:e[1]})),s=i.map(i=>{let s=S6(e,n,{...r,theme:i.theme}),o=SK(s);return{tokens:s,state:o,theme:"string"==typeof i.theme?i.theme:i.theme.name}}),o=function(...e){let n=e.map(()=>[]),r=e.length;for(let i=0;i<e[0].length;i++){let s=e.map(e=>e[i]),o=n.map(()=>[]);n.forEach((e,n)=>e.push(o[n]));let a=s.map(()=>0),l=s.map(e=>e[0]);for(;l.every(e=>e);){let e=Math.min(...l.map(e=>e.content.length));for(let n=0;n<r;n++){let r=l[n];r.content.length===e?(o[n].push(r),a[n]+=1,l[n]=s[n][a[n]]):(o[n].push({...r,content:r.content.slice(0,e)}),l[n]={...r,content:r.content.slice(e),offset:r.offset+e})}}}return n}(...s.map(e=>e.tokens)),a=o[0].map((e,n)=>e.map((e,s)=>{let a={content:e.content,variants:{},offset:e.offset};return"includeExplanation"in r&&r.includeExplanation&&(a.explanation=e.explanation),o.forEach((e,r)=>{let{content:o,explanation:l,offset:h,...c}=e[n][s];a.variants[i[r].color]=c}),a})),l=s[0].state?new SJ(Object.fromEntries(s.map(e=>[e.theme,e.state?.getInternalStack(e.theme)])),s[0].state.lang):void 0;return l&&SH(a,l),a}function _e(e,n,r){let i,s,o,a,l,h;if("themes"in r){let{defaultColor:c="light",cssVariablePrefix:u="--shiki-",colorsRendering:d="css-vars"}=r,p=Object.entries(r.themes).filter(e=>e[1]).map(e=>({color:e[0],theme:e[1]})).sort((e,n)=>e.color===c?-1:+(n.color===c));if(0===p.length)throw new xC("`themes` option must not be empty");let f=S8(e,n,r);if(h=SK(f),c&&SW!==c&&!p.find(e=>e.color===c))throw new xC(`\`themes\` option must contain the defaultColor key \`${c}\``);let g=p.map(n=>e.getTheme(n.theme)),m=p.map(e=>e.color);o=f.map(e=>e.map(e=>(function(e,n,r,i,s="css-vars"){let o={content:e.content,explanation:e.explanation,offset:e.offset},a=n.map(n=>SU(e.variants[n])),l=new Set(a.flatMap(e=>Object.keys(e))),h={},c=(e,i)=>{let s="color"===i?"":"background-color"===i?"-bg":`-${i}`;return r+n[e]+("color"===i?"":s)};return a.forEach((e,r)=>{for(let o of l){let l=e[o]||"inherit";if(0===r&&i&&SX.includes(o))if(i===SW&&a.length>1){let e=n.findIndex(e=>"light"===e),i=n.findIndex(e=>"dark"===e);if(-1===e||-1===i)throw new xC('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');let u=a[e][o]||"inherit",d=a[i][o]||"inherit";h[o]=`light-dark(${u}, ${d})`,"css-vars"===s&&(h[c(r,o)]=l)}else h[o]=l;else"css-vars"===s&&(h[c(r,o)]=l)}}),o.htmlStyle=h,o})(e,m,u,c,d))),h&&SH(o,h);let y=p.map(e=>SQ(e.theme,r));s=_t(p,g,y,u,c,"fg",d),i=_t(p,g,y,u,c,"bg",d),a=`shiki-themes ${g.map(e=>e.name).join(" ")}`,l=c?void 0:[s,i].join(";")}else if("theme"in r){let l=SQ(r.theme,r);o=S6(e,n,r);let c=e.getTheme(r.theme);i=Sj(c.bg,l),s=Sj(c.fg,l),a=c.name,h=SK(o)}else throw new xC("Invalid options, either `theme` or `themes` must be provided");return{tokens:o,fg:s,bg:i,themeName:a,rootStyle:l,grammarState:h}}function _t(e,n,r,i,s,o,a){return e.map((l,h)=>{let c=Sj(n[h][o],r[h])||"inherit",u=`${i+l.color}${"bg"===o?"-bg":""}:${c}`;if(0===h&&s){if(s===SW&&e.length>1){let i=e.findIndex(e=>"light"===e.color),s=e.findIndex(e=>"dark"===e.color);if(-1===i||-1===s)throw new xC('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');let a=Sj(n[i][o],r[i])||"inherit",l=Sj(n[s][o],r[s])||"inherit";return`light-dark(${a}, ${l});${u}`}return c}return"css-vars"===a?u:null}).filter(e=>!!e).join(";")}function _n(e,n,r,i={meta:{},options:r,codeToHast:(n,r)=>_n(e,n,r),codeToTokens:(n,r)=>_e(e,n,r)}){let s=n;for(let e of S1(r))s=e.preprocess?.call(i,s,r)||s;let{tokens:o,fg:a,bg:l,themeName:h,rootStyle:c,grammarState:u}=_e(e,s,r),{mergeWhitespaces:d=!0,mergeSameStyleTokens:p=!1}=r;!0===d?o=o.map(e=>{let n=[],r="",i=0;return e.forEach((s,o)=>{let a=!(s.fontStyle&&(s.fontStyle&xQ.Underline||s.fontStyle&xQ.Strikethrough));a&&s.content.match(/^\s+$/)&&e[o+1]?(i||(i=s.offset),r+=s.content):r?(a?n.push({...s,offset:i,content:r+s.content}):n.push({content:r,offset:i},s),i=0,r=""):n.push(s)}),n}):"never"===d&&(o=o.map(e=>e.flatMap(e=>{if(e.content.match(/^\s+$/))return e;let n=e.content.match(/^(\s*)(.*?)(\s*)$/);if(!n)return e;let[,r,i,s]=n;if(!r&&!s)return e;let o=[{...e,offset:e.offset+r.length,content:i}];return r&&o.unshift({content:r,offset:e.offset}),s&&o.push({content:s,offset:e.offset+r.length+i.length}),o}))),p&&(o=o.map(e=>{let n=[];for(let r of e){if(0===n.length){n.push({...r});continue}let e=n[n.length-1],i=SY(e.htmlStyle||SU(e)),s=SY(r.htmlStyle||SU(r)),o=e.fontStyle&&(e.fontStyle&xQ.Underline||e.fontStyle&xQ.Strikethrough),a=r.fontStyle&&(r.fontStyle&xQ.Underline||r.fontStyle&xQ.Strikethrough);o||a||i!==s?n.push({...r}):e.content+=r.content}return n}));let f={...i,get source(){return s}};for(let e of S1(r))o=e.tokens?.call(f,o)||o;return function(e,n,r,i=SK(e)){let s=S1(n),o=[],a={type:"root",children:[]},{structure:l="classic",tabindex:h="0"}=n,c={type:"element",tagName:"pre",properties:{class:`shiki ${n.themeName||""}`,style:n.rootStyle||`background-color:${n.bg};color:${n.fg}`,...!1!==h&&null!=h?{tabindex:h.toString()}:{},...Object.fromEntries(Array.from(Object.entries(n.meta||{})).filter(([e])=>!e.startsWith("_")))},children:[]},u={type:"element",tagName:"code",properties:{},children:o},d=[],p={...r,structure:l,addClassToHast:SZ,get source(){return r.source},get tokens(){return e},get options(){return n},get root(){return a},get pre(){return c},get code(){return u},get lines(){return d}};if(e.forEach((e,n)=>{n&&("inline"===l?a.children.push({type:"element",tagName:"br",properties:{},children:[]}):"classic"===l&&o.push({type:"text",value:"\n"}));let r={type:"element",tagName:"span",properties:{class:"line"},children:[]},i=0;for(let o of e){let e={type:"element",tagName:"span",properties:{...o.htmlAttrs},children:[{type:"text",value:o.content}]},h=SY(o.htmlStyle||SU(o));for(let a of(h&&(e.properties.style=h),s))e=a?.span?.call(p,e,n+1,i,r,o)||e;"inline"===l?a.children.push(e):"classic"===l&&r.children.push(e),i+=o.content.length}if("classic"===l){for(let e of s)r=e?.line?.call(p,r,n+1)||r;d.push(r),o.push(r)}}),"classic"===l){for(let e of s)u=e?.code?.call(p,u)||u;for(let e of(c.children.push(u),s))c=e?.pre?.call(p,c)||c;a.children.push(c)}let f=a;for(let e of s)f=e?.root?.call(p,f)||f;return i&&SH(f,i),f}(o,{...r,fg:a,bg:l,themeName:h,rootStyle:c},f,u)}let _r=function(e,n){let r=n||SD,i=r.quote||'"';if('"'!==i&&"'"!==i)throw Error("Invalid quote `"+i+"`, expected `'` or `\"`");return({one:SR,all:SL,settings:{omitOptionalTags:r.omitOptionalTags||!1,allowParseErrors:r.allowParseErrors||!1,allowDangerousCharacters:r.allowDangerousCharacters||!1,quoteSmart:r.quoteSmart||!1,preferUnquoted:r.preferUnquoted||!1,tightAttributes:r.tightAttributes||!1,upperDoctype:r.upperDoctype||!1,tightDoctype:r.tightDoctype||!1,bogusComments:r.bogusComments||!1,tightCommaSeparatedLists:r.tightCommaSeparatedLists||!1,tightSelfClosing:r.tightSelfClosing||!1,collapseEmptyAttributes:r.collapseEmptyAttributes||!1,allowDangerousHtml:r.allowDangerousHtml||!1,voids:r.voids||wE,characterReferences:r.characterReferences||SI,closeSelfClosing:r.closeSelfClosing||!1,closeEmptyElements:r.closeEmptyElements||!1},schema:"svg"===r.space?wJ:wK,quote:i,alternative:'"'===i?"'":'"'}).one(Array.isArray(e)?{type:"root",children:e}:e,void 0,void 0)},_i="__shiki_resolved";function _s(e){if(e?.[_i])return e;let n={...e};n.tokenColors&&!n.settings&&(n.settings=n.tokenColors,delete n.tokenColors),n.type||="dark",n.colorReplacements={...n.colorReplacements},n.settings||=[];let{bg:r,fg:i}=n;if(!r||!i){let e=n.settings?n.settings.find(e=>!e.name&&!e.scope):void 0;e?.settings?.foreground&&(i=e.settings.foreground),e?.settings?.background&&(r=e.settings.background),!i&&n?.colors?.["editor.foreground"]&&(i=n.colors["editor.foreground"]),!r&&n?.colors?.["editor.background"]&&(r=n.colors["editor.background"]),i||(i="light"===n.type?"#333333":"#bbbbbb"),r||(r="light"===n.type?"#fffffe":"#1e1e1e"),n.fg=i,n.bg=r}n.settings[0]&&n.settings[0].settings&&!n.settings[0].scope||n.settings.unshift({settings:{foreground:n.fg,background:n.bg}});let s=0,o=new Map;function a(e){if(o.has(e))return o.get(e);s+=1;let r=`#${s.toString(16).padStart(8,"0").toLowerCase()}`;return n.colorReplacements?.[`#${r}`]?a(e):(o.set(e,r),r)}for(let e of(n.settings=n.settings.map(e=>{let r=e.settings?.foreground&&!e.settings.foreground.startsWith("#"),i=e.settings?.background&&!e.settings.background.startsWith("#");if(!r&&!i)return e;let s={...e,settings:{...e.settings}};if(r){let r=a(e.settings.foreground);n.colorReplacements[r]=e.settings.foreground,s.settings.foreground=r}if(i){let r=a(e.settings.background);n.colorReplacements[r]=e.settings.background,s.settings.background=r}return s}),Object.keys(n.colors||{})))if(("editor.foreground"===e||"editor.background"===e||e.startsWith("terminal.ansi"))&&!n.colors[e]?.startsWith("#")){let r=a(n.colors[e]);n.colorReplacements[r]=n.colors[e],n.colors[e]=r}return Object.defineProperty(n,_i,{enumerable:!1,writable:!1,value:!0}),n}async function _o(e){return Array.from(new Set((await Promise.all(e.filter(e=>!SB(e)).map(async e=>await SV(e).then(e=>Array.isArray(e)?e:[e])))).flat()))}async function _a(e){return(await Promise.all(e.map(async e=>SF(e)?null:_s(await SV(e))))).filter(e=>!!e)}class _l extends Error{constructor(e){super(e),this.name="ShikiError"}}class _h extends wk{constructor(e,n,r,i={}){super(e),this._resolver=e,this._themes=n,this._langs=r,this._alias=i,this._themes.map(e=>this.loadTheme(e)),this.loadLanguages(this._langs)}_resolvedThemes=new Map;_resolvedGrammars=new Map;_langMap=new Map;_langGraph=new Map;_textmateThemeCache=new WeakMap;_loadedThemesCache=null;_loadedLanguagesCache=null;getTheme(e){return"string"==typeof e?this._resolvedThemes.get(e):this.loadTheme(e)}loadTheme(e){let n=_s(e);return n.name&&(this._resolvedThemes.set(n.name,n),this._loadedThemesCache=null),n}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(e){let n=this._textmateThemeCache.get(e);n||(n=xI.createFromRawTheme(e),this._textmateThemeCache.set(e,n)),this._syncRegistry.setTheme(n)}getGrammar(e){if(this._alias[e]){let n=new Set([e]);for(;this._alias[e];){if(e=this._alias[e],n.has(e))throw new _l(`Circular alias \`${Array.from(n).join(" -> ")} -> ${e}\``);n.add(e)}}return this._resolvedGrammars.get(e)}loadLanguage(e){if(this.getGrammar(e.name))return;let n=new Set([...this._langMap.values()].filter(n=>n.embeddedLangsLazy?.includes(e.name)));this._resolver.addLanguage(e);let r={balancedBracketSelectors:e.balancedBracketSelectors||["*"],unbalancedBracketSelectors:e.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(e.scopeName,e);let i=this.loadGrammarWithConfiguration(e.scopeName,1,r);if(i.name=e.name,this._resolvedGrammars.set(e.name,i),e.aliases&&e.aliases.forEach(n=>{this._alias[n]=e.name}),this._loadedLanguagesCache=null,n.size)for(let e of n)this._resolvedGrammars.delete(e.name),this._loadedLanguagesCache=null,this._syncRegistry?._injectionGrammars?.delete(e.scopeName),this._syncRegistry?._grammars?.delete(e.scopeName),this.loadLanguage(this._langMap.get(e.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(e){for(let n of e)this.resolveEmbeddedLanguages(n);let n=Array.from(this._langGraph.entries()),r=n.filter(([e,n])=>!n);if(r.length){let e=n.filter(([e,n])=>n&&n.embeddedLangs?.some(e=>r.map(([e])=>e).includes(e))).filter(e=>!r.includes(e));throw new _l(`Missing languages ${r.map(([e])=>`\`${e}\``).join(", ")}, required by ${e.map(([e])=>`\`${e}\``).join(", ")}`)}for(let[e,r]of n)this._resolver.addLanguage(r);for(let[e,r]of n)this.loadLanguage(r)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(e){if(this._langMap.set(e.name,e),this._langGraph.set(e.name,e),e.embeddedLangs)for(let n of e.embeddedLangs)this._langGraph.set(n,this._langMap.get(n))}}class _c{_langs=new Map;_scopeToLang=new Map;_injections=new Map;_onigLib;constructor(e,n){this._onigLib={createOnigScanner:n=>e.createScanner(n),createOnigString:n=>e.createString(n)},n.forEach(e=>this.addLanguage(e))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach(n=>{this._langs.set(n,e)}),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach(n=>{this._injections.get(n)||this._injections.set(n,[]),this._injections.get(n).push(e.scopeName)})}getInjections(e){let n=e.split("."),r=[];for(let e=1;e<=n.length;e++){let i=n.slice(0,e).join(".");r=[...r,...this._injections.get(i)||[]]}return r}}let _u=0;async function _d(e){e.engine||function(e,n=3){if(!(n>3))if(1)console.trace(`[SHIKI DEPRECATE]: ${e}`);else throw Error(`[SHIKI DEPRECATE]: ${e}`)}("`engine` option is required. Use `createOnigurumaEngine` or `createJavaScriptRegexEngine` to create an engine.");let[n,r,i]=await Promise.all([_a(e.themes||[]),_o(e.langs||[]),e.engine]);return function(e){let n;_u+=1,!1!==e.warnings&&_u>=10&&_u%10==0&&console.warn(`[Shiki] ${_u} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let r=!1;if(!e.engine)throw new _l("`engine` option is required for synchronous mode");let i=(e.langs||[]).flat(1),s=(e.themes||[]).flat(1).map(_s),o=new _h(new _c(e.engine,i),s,i,e.langAlias);function a(e){if("none"===e)return{bg:"",fg:"",name:"none",settings:[],type:"dark"};c();let n=o.getTheme(e);if(!n)throw new _l(`Theme \`${e}\` not found, you may need to load it first`);return n}function l(...e){c(),o.loadLanguages(e.flat(1))}function h(...e){for(let n of(c(),e.flat(1)))o.loadTheme(n)}function c(){if(r)throw new _l("Shiki instance has been disposed")}function u(){r||(r=!0,o.dispose(),_u-=1)}return{setTheme:function(e){c();let r=a(e);return n!==e&&(o.setTheme(r),n=e),{theme:r,colorMap:o.getColorMap()}},getTheme:a,getLanguage:function(e){c();let n=o.getGrammar("string"==typeof e?e:e.name);if(!n)throw new _l(`Language \`${e}\` not found, you may need to load it first`);return n},getLoadedThemes:function(){return c(),o.getLoadedThemes()},getLoadedLanguages:function(){return c(),o.getLoadedLanguages()},loadLanguage:async function(...e){return l(await _o(e))},loadLanguageSync:l,loadTheme:async function(...e){return c(),h(await _a(e))},loadThemeSync:h,dispose:u,[Symbol.dispose]:u}}({...e,themes:n,langs:r,engine:i})}async function _p(e){let n=await _d(e);return{getLastGrammarState:(...e)=>(function(...e){if(2===e.length)return SK(e[1]);let[n,r,i={}]=e,{lang:s="text",theme:o=n.getLoadedThemes()[0]}=i;if(Sz(s)||SF(o))throw new xC("Plain language does not have grammar state");if("ansi"===s)throw new xC("ANSI language does not have grammar state");let{theme:a,colorMap:l}=n.setTheme(o),h=n.getLanguage(s);return new SJ(S9(r,h,a,l,i).stateStack,h.name,a.name)})(n,...e),codeToTokensBase:(e,r)=>S6(n,e,r),codeToTokensWithThemes:(e,r)=>S8(n,e,r),codeToTokens:(e,r)=>_e(n,e,r),codeToHast:(e,r)=>_n(n,e,r),codeToHtml:(e,r)=>(function(e,n,r){let i={meta:{},options:r,codeToHast:(n,r)=>_n(e,n,r),codeToTokens:(n,r)=>_e(e,n,r)},s=_r(_n(e,n,r,i));for(let e of S1(r))s=e.postprocess?.call(i,s,r)||s;return s})(n,e,r),getBundledLanguages:()=>({}),getBundledThemes:()=>({}),...n,getInternalContext:()=>n}}let _f=[{id:"abap",name:"ABAP",import:()=>r.e("9552").then(r.bind(r,57859))},{id:"actionscript-3",name:"ActionScript",import:()=>r.e("819").then(r.bind(r,20878))},{id:"ada",name:"Ada",import:()=>r.e("9032").then(r.bind(r,70395))},{id:"angular-html",name:"Angular HTML",import:()=>Promise.all([r.e("597"),r.e("9468"),r.e("9247"),r.e("6818")]).then(r.bind(r,74169))},{id:"angular-ts",name:"Angular TypeScript",import:()=>Promise.all([r.e("597"),r.e("9468"),r.e("9247"),r.e("5922"),r.e("6818"),r.e("3451")]).then(r.bind(r,70230))},{id:"apache",name:"Apache Conf",import:()=>r.e("6520").then(r.bind(r,54155))},{id:"apex",name:"Apex",import:()=>r.e("194").then(r.bind(r,73017))},{id:"apl",name:"APL",import:()=>Promise.all([r.e("597"),r.e("9468"),r.e("9247"),r.e("4662"),r.e("8575")]).then(r.bind(r,75922))},{id:"applescript",name:"AppleScript",import:()=>r.e("1679").then(r.bind(r,60706))},{id:"ara",name:"Ara",import:()=>r.e("6322").then(r.bind(r,69593))},{id:"asciidoc",name:"AsciiDoc",aliases:["adoc"],import:()=>r.e("5721").then(r.bind(r,93216))},{id:"asm",name:"Assembly",import:()=>r.e("3751").then(r.bind(r,68266))},{id:"astro",name:"Astro",import:()=>Promise.all([r.e("597"),r.e("9468"),r.e("6405"),r.e("9887"),r.e("475")]).then(r.bind(r,92774))},{id:"awk",name:"AWK",import:()=>r.e("3065").then(r.bind(r,90240))},{id:"ballerina",name:"Ballerina",import:()=>r.e("5624").then(r.bind(r,35115))},{id:"bat",name:"Batch File",aliases:["batch"],import:()=>r.e("6367").then(r.bind(r,69442))},{id:"beancount",name:"Beancount",import:()=>r.e("3377").then(r.bind(r,88011))},{id:"berry",name:"Berry",aliases:["be"],import:()=>r.e("1148").then(r.bind(r,39223))},{id:"bibtex",name:"BibTeX",import:()=>r.e("1252").then(r.bind(r,11471))},{id:"bicep",name:"Bicep",import:()=>r.e("7511").then(r.bind(r,69114))},{id:"blade",name:"Blade",import:()=>Promise.all([r.e("597"),r.e("9468"),r.e("9247"),r.e("4662"),r.e("8444"),r.e("8922")]).then(r.bind(r,64945))},{id:"bsl",name:"1C (Enterprise)",aliases:["1c"],import:()=>r.e("6597").then(r.bind(r,69252))},{id:"c",name:"C",import:()=>r.e("4773").then(r.bind(r,48676))},{id:"cadence",name:"Cadence",aliases:["cdc"],import:()=>r.e("2219").then(r.bind(r,70886))},{id:"cairo",name:"Cairo",import:()=>Promise.all([r.e("1868"),r.e("7304")]).then(r.bind(r,97691))},{id:"clarity",name:"Clarity",import:()=>r.e("6980").then(r.bind(r,99743))},{id:"clojure",name:"Clojure",aliases:["clj"],import:()=>r.e("9864").then(r.bind(r,93115))},{id:"cmake",name:"CMake",import:()=>r.e("5703").then(r.bind(r,91866))},{id:"cobol",name:"COBOL",import:()=>Promise.all([r.e("597"),r.e("9468"),r.e("9247"),r.e("4662"),r.e("4955")]).then(r.bind(r,44230))},{id:"codeowners",name:"CODEOWNERS",import:()=>r.e("4255").then(r.bind(r,60146))},{id:"codeql",name:"CodeQL",aliases:["ql"],import:()=>r.e("850").then(r.bind(r,76361))},{id:"coffee",name:"CoffeeScript",aliases:["coffeescript"],import:()=>Promise.all([r.e("597"),r.e("8274")]).then(r.bind(r,8057))},{id:"common-lisp",name:"Common Lisp",aliases:["lisp"],import:()=>r.e("1740").then(r.bind(r,43863))},{id:"coq",name:"Coq",import:()=>r.e("3981").then(r.bind(r,1532))},{id:"cpp",name:"C++",aliases:["c++"],import:()=>Promise.all([r.e("8444"),r.e("4773"),r.e("8032")]).then(r.bind(r,74051))},{id:"crystal",name:"Crystal",import:()=>Promise.all([r.e("597"),r.e("9468"),r.e("9247"),r.e("8444"),r.e("4773"),r.e("8529"),r.e("4298")]).then(r.bind(r,1857))},{id:"csharp",name:"C#",aliases:["c#","cs"],import:()=>r.e("4877").then(r.bind(r,47516))},{id:"css",name:"CSS",import:()=>r.e("9468").then(r.bind(r,37986))},{id:"csv",name:"CSV",import:()=>r.e("780").then(r.bind(r,71367))},{id:"cue",name:"CUE",import:()=>r.e("911").then(r.bind(r,51378))},{id:"cypher",name:"Cypher",aliases:["cql"],import:()=>r.e("5037").then(r.bind(r,44572))},{id:"d",name:"D",import:()=>r.e("3328").then(r.bind(r,42595))},{id:"dart",name:"Dart",import:()=>r.e("4271").then(r.bind(r,61346))},{id:"dax",name:"DAX",import:()=>r.e("69").then(r.bind(r,77684))},{id:"desktop",name:"Desktop",import:()=>r.e("5208").then(r.bind(r,95467))},{id:"diff",name:"Diff",import:()=>r.e("365").then(r.bind(r,96700))},{id:"docker",name:"Dockerfile",aliases:["dockerfile"],import:()=>r.e("1070").then(r.bind(r,22173))},{id:"dotenv",name:"dotEnv",import:()=>r.e("5644").then(r.bind(r,91975))},{id:"dream-maker",name:"Dream Maker",import:()=>r.e("4794").then(r.bind(r,69713))},{id:"edge",name:"Edge",import:()=>Promise.all([r.e("597"),r.e("9468"),r.e("9247"),r.e("6405"),r.e("4723")]).then(r.bind(r,24830))},{id:"elixir",name:"Elixir",import:()=>Promise.all([r.e("597"),r.e("9468"),r.e("9247"),r.e("245")]).then(r.bind(r,89636))},{id:"elm",name:"Elm",import:()=>Promise.all([r.e("4773"),r.e("8456")]).then(r.bind(r,47643))},{id:"emacs-lisp",name:"Emacs Lisp",aliases:["elisp"],import:()=>r.e("960").then(r.bind(r,27363))},{id:"erb",name:"ERB",import:()=>Promise.all([r.e("597"),r.e("9468"),r.e("9247"),r.e("6405"),r.e("4662"),r.e("8444"),r.e("4773"),r.e("8529"),r.e("9887"),r.e("8537"),r.e("8032"),r.e("8189"),r.e("5374"),r.e("7747")]).then(r.bind(r,19998))},{id:"erlang",name:"Erlang",aliases:["erl"],import:()=>Promise.all([r.e("7115"),r.e("3813")]).then(r.bind(r,98404))},{id:"fennel",name:"Fennel",import:()=>r.e("5394").then(r.bind(r,18889))},{id:"fish",name:"Fish",import:()=>r.e("8920").then(r.bind(r,30331))},{id:"fluent",name:"Fluent",aliases:["ftl"],import:()=>r.e("7752").then(r.bind(r,58571))},{id:"fortran-fixed-form",name:"Fortran (Fixed Form)",aliases:["f","for","f77"],import:()=>Promise.all([r.e("8184"),r.e("5716")]).then(r.bind(r,36895))},{id:"fortran-free-form",name:"Fortran (Free Form)",aliases:["f90","f95","f03","f08","f18"],import:()=>r.e("8184").then(r.bind(r,27627))},{id:"fsharp",name:"F#",aliases:["f#","fs"],import:()=>Promise.all([r.e("7115"),r.e("7544")]).then(r.bind(r,94187))},{id:"gdresource",name:"GDResource",import:()=>Promise.all([r.e("2870"),r.e("5897")]).then(r.bind(r,77120))},{id:"gdscript",name:"GDScript",import:()=>r.e("2870").then(r.bind(r,39653))},{id:"gdshader",name:"GDShader",import:()=>r.e("1916").then(r.bind(r,46487))},{id:"genie",name:"Genie",import:()=>r.e("5272").then(r.bind(r,9419))},{id:"gherkin",name:"Gherkin",import:()=>r.e("3558").then(r.bind(r,40565))},{id:"git-commit",name:"Git Commit Message",import:()=>r.e("8980").then(r.bind(r,53647))},{id:"git-rebase",name:"Git Rebase Message",import:()=>Promise.all([r.e("8529"),r.e("9429")]).then(r.bind(r,71527))},{id:"gleam",name:"Gleam",import:()=>r.e("7980").then(r.bind(r,27511))},{id:"glimmer-js",name:"Glimmer JS",aliases:["gjs"],import:()=>Promise.all([r.e("597"),r.e("9468"),r.e("9247"),r.e("6405"),r.e("8519")]).then(r.bind(r,71658))},{id:"glimmer-ts",name:"Glimmer TS",aliases:["gts"],import:()=>Promise.all([r.e("597"),r.e("9468"),r.e("9247"),r.e("6405"),r.e("3965")]).then(r.bind(r,32268))},{id:"glsl",name:"GLSL",import:()=>Promise.all([r.e("4773"),r.e("3058")]).then(r.bind(r,98521))},{id:"gnuplot",name:"Gnuplot",import:()=>r.e("4311").then(r.bind(r,96634))},{id:"go",name:"Go",import:()=>r.e("7512").then(r.bind(r,41451))},{id:"graphql",name:"GraphQL",aliases:["gql"],import:()=>Promise.all([r.e("597"),r.e("6405"),r.e("9887"),r.e("8537"),r.e("8189")]).then(r.bind(r,23308))},{id:"groovy",name:"Groovy",import:()=>r.e("8476").then(r.bind(r,76231))},{id:"hack",name:"Hack",import:()=>Promise.all([r.e("597"),r.e("9468"),r.e("9247"),r.e("8444"),r.e("6175")]).then(r.bind(r,8194))},{id:"haml",name:"Ruby Haml",import:()=>Promise.all([r.e("597"),r.e("9468"),r.e("2784")]).then(r.bind(r,62723))},{id:"handlebars",name:"Handlebars",aliases:["hbs"],import:()=>Promise.all([r.e("597"),r.e("9468"),r.e("9247"),r.e("6518")]).then(r.bind(r,82005))},{id:"haskell",name:"Haskell",aliases:["hs"],import:()=>r.e("3556").then(r.bind(r,52079))},{id:"haxe",name:"Haxe",import:()=>r.e("9250").then(r.bind(r,29737))},{id:"hcl",name:"HashiCorp HCL",import:()=>r.e("9031").then(r.bind(r,16394))},{id:"hjson",name:"Hjson",import:()=>r.e("9558").then(r.bind(r,90341))},{id:"hlsl",name:"HLSL",import:()=>r.e("6297").then(r.bind(r,29120))},{id:"html",name:"HTML",import:()=>Promise.all([r.e("597"),r.e("9468"),r.e("9247")]).then(r.bind(r,77554))},{id:"html-derivative",name:"HTML (Derivative)",import:()=>Promise.all([r.e("597"),r.e("9468"),r.e("9247"),r.e("5889")]).then(r.bind(r,46200))},{id:"http",name:"HTTP",import:()=>Promise.all([r.e("597"),r.e("6405"),r.e("4662"),r.e("8529"),r.e("9887"),r.e("8537"),r.e("8189"),r.e("5310")]).then(r.bind(r,30861))},{id:"hxml",name:"HXML",import:()=>Promise.all([r.e("9250"),r.e("379")]).then(r.bind(r,15718))},{id:"hy",name:"Hy",import:()=>r.e("7957").then(r.bind(r,25700))},{id:"imba",name:"Imba",import:()=>r.e("5585").then(r.bind(r,83432))},{id:"ini",name:"INI",aliases:["properties"],import:()=>r.e("6718").then(r.bind(r,90589))},{id:"java",name:"Java",import:()=>r.e("4662").then(r.bind(r,11429))},{id:"javascript",name:"JavaScript",aliases:["js"],import:()=>r.e("597").then(r.bind(r,58516))},{id:"jinja",name:"Jinja",import:()=>Promise.all([r.e("597"),r.e("9468"),r.e("9247"),r.e("966")]).then(r.bind(r,12741))},{id:"jison",name:"Jison",import:()=>Promise.all([r.e("597"),r.e("1767")]).then(r.bind(r,22746))},{id:"json",name:"JSON",import:()=>r.e("4192").then(r.bind(r,67491))},{id:"json5",name:"JSON5",import:()=>r.e("877").then(r.bind(r,54380))},{id:"jsonc",name:"JSON with Comments",import:()=>r.e("6111").then(r.bind(r,25298))},{id:"jsonl",name:"JSON Lines",import:()=>r.e("2582").then(r.bind(r,39461))},{id:"jsonnet",name:"Jsonnet",import:()=>r.e("2881").then(r.bind(r,51304))},{id:"jssm",name:"JSSM",aliases:["fsl"],import:()=>r.e("549").then(r.bind(r,34772))},{id:"jsx",name:"JSX",import:()=>r.e("8537").then(r.bind(r,90384))},{id:"julia",name:"Julia",aliases:["jl"],import:()=>Promise.all([r.e("597"),r.e("8444"),r.e("4773"),r.e("8032"),r.e("1868"),r.e("3142"),r.e("77")]).then(r.bind(r,93548))},{id:"kotlin",name:"Kotlin",aliases:["kt","kts"],import:()=>r.e("2275").then(r.bind(r,42622))},{id:"kusto",name:"Kusto",aliases:["kql"],import:()=>r.e("2684").then(r.bind(r,30503))},{id:"latex",name:"LaTeX",import:()=>Promise.all([r.e("3142"),r.e("712")]).then(r.bind(r,47819))},{id:"lean",name:"Lean 4",aliases:["lean4"],import:()=>r.e("4430").then(r.bind(r,22541))},{id:"less",name:"Less",import:()=>r.e("607").then(r.bind(r,87826))},{id:"liquid",name:"Liquid",import:()=>Promise.all([r.e("597"),r.e("9468"),r.e("9247"),r.e("4126")]).then(r.bind(r,88669))},{id:"llvm",name:"LLVM IR",import:()=>r.e("963").then(r.bind(r,30846))},{id:"log",name:"Log file",import:()=>r.e("8986").then(r.bind(r,53537))},{id:"logo",name:"Logo",import:()=>r.e("5861").then(r.bind(r,66228))},{id:"lua",name:"Lua",import:()=>Promise.all([r.e("4773"),r.e("7810")]).then(r.bind(r,22585))},{id:"luau",name:"Luau",import:()=>r.e("3672").then(r.bind(r,70182))},{id:"make",name:"Makefile",aliases:["makefile"],import:()=>r.e("2748").then(r.bind(r,95127))},{id:"markdown",name:"Markdown",aliases:["md"],import:()=>r.e("7115").then(r.bind(r,48774))},{id:"marko",name:"Marko",import:()=>Promise.all([r.e("9468"),r.e("6405"),r.e("5922"),r.e("607"),r.e("4942")]).then(r.bind(r,93453))},{id:"matlab",name:"MATLAB",import:()=>r.e("251").then(r.bind(r,91510))},{id:"mdc",name:"MDC",import:()=>Promise.all([r.e("597"),r.e("9468"),r.e("9247"),r.e("7115"),r.e("694")]).then(r.bind(r,4037))},{id:"mdx",name:"MDX",import:()=>r.e("4019").then(r.bind(r,49630))},{id:"mermaid",name:"Mermaid",aliases:["mmd"],import:()=>r.e("1279").then(r.bind(r,39410))},{id:"mipsasm",name:"MIPS Assembly",aliases:["mips"],import:()=>r.e("9110").then(r.bind(r,65973))},{id:"mojo",name:"Mojo",import:()=>r.e("3961").then(r.bind(r,60592))},{id:"move",name:"Move",import:()=>r.e("107").then(r.bind(r,66502))},{id:"narrat",name:"Narrat Language",aliases:["nar"],import:()=>r.e("3026").then(r.bind(r,99241))},{id:"nextflow",name:"Nextflow",aliases:["nf"],import:()=>r.e("9695").then(r.bind(r,75586))},{id:"nginx",name:"Nginx",import:()=>Promise.all([r.e("4773"),r.e("8572")]).then(r.bind(r,83351))},{id:"nim",name:"Nim",import:()=>Promise.all([r.e("597"),r.e("9468"),r.e("9247"),r.e("4662"),r.e("4773"),r.e("7115"),r.e("6948")]).then(r.bind(r,54687))},{id:"nix",name:"Nix",import:()=>r.e("7127").then(r.bind(r,4266))},{id:"nushell",name:"nushell",aliases:["nu"],import:()=>r.e("7929").then(r.bind(r,61440))},{id:"objective-c",name:"Objective-C",aliases:["objc"],import:()=>r.e("291").then(r.bind(r,95710))},{id:"objective-cpp",name:"Objective-C++",import:()=>r.e("5203").then(r.bind(r,20158))},{id:"ocaml",name:"OCaml",import:()=>r.e("6240").then(r.bind(r,77843))},{id:"pascal",name:"Pascal",import:()=>r.e("2214").then(r.bind(r,21957))},{id:"perl",name:"Perl",import:()=>Promise.all([r.e("597"),r.e("9468"),r.e("9247"),r.e("4662"),r.e("8444"),r.e("9612")]).then(r.bind(r,91698))},{id:"php",name:"PHP",import:()=>Promise.all([r.e("597"),r.e("9468"),r.e("9247"),r.e("4662"),r.e("8444"),r.e("4452"),r.e("8409")]).then(r.bind(r,95247))},{id:"plsql",name:"PL/SQL",import:()=>r.e("8136").then(r.bind(r,33883))},{id:"po",name:"Gettext PO",aliases:["pot","potx"],import:()=>r.e("3407").then(r.bind(r,53490))},{id:"polar",name:"Polar",import:()=>r.e("5532").then(r.bind(r,24855))},{id:"postcss",name:"PostCSS",import:()=>r.e("6397").then(r.bind(r,36364))},{id:"powerquery",name:"PowerQuery",import:()=>r.e("9693").then(r.bind(r,1084))},{id:"powershell",name:"PowerShell",aliases:["ps","ps1"],import:()=>r.e("5887").then(r.bind(r,87122))},{id:"prisma",name:"Prisma",import:()=>r.e("4490").then(r.bind(r,55569))},{id:"prolog",name:"Prolog",import:()=>r.e("9093").then(r.bind(r,2324))},{id:"proto",name:"Protocol Buffer 3",aliases:["protobuf"],import:()=>r.e("7530").then(r.bind(r,99185))},{id:"pug",name:"Pug",aliases:["jade"],import:()=>Promise.all([r.e("597"),r.e("9468"),r.e("9247"),r.e("1904")]).then(r.bind(r,22403))},{id:"puppet",name:"Puppet",import:()=>r.e("2900").then(r.bind(r,15439))},{id:"purescript",name:"PureScript",import:()=>r.e("4755").then(r.bind(r,69902))},{id:"python",name:"Python",aliases:["py"],import:()=>r.e("1868").then(r.bind(r,5063))},{id:"qml",name:"QML",import:()=>Promise.all([r.e("597"),r.e("6190")]).then(r.bind(r,83405))},{id:"qmldir",name:"QML Directory",import:()=>r.e("1979").then(r.bind(r,9046))},{id:"qss",name:"Qt Style Sheets",import:()=>r.e("957").then(r.bind(r,76124))},{id:"r",name:"R",import:()=>r.e("3142").then(r.bind(r,45125))},{id:"racket",name:"Racket",import:()=>r.e("5776").then(r.bind(r,81843))},{id:"raku",name:"Raku",aliases:["perl6"],import:()=>r.e("7823").then(r.bind(r,82338))},{id:"razor",name:"ASP.NET Razor",import:()=>Promise.all([r.e("597"),r.e("9468"),r.e("9247"),r.e("4877"),r.e("3932")]).then(r.bind(r,4583))},{id:"reg",name:"Windows Registry Script",import:()=>r.e("8838").then(r.bind(r,55829))},{id:"regexp",name:"RegExp",aliases:["regex"],import:()=>r.e("4279").then(r.bind(r,30346))},{id:"rel",name:"Rel",import:()=>r.e("6611").then(r.bind(r,19153))},{id:"riscv",name:"RISC-V",import:()=>r.e("9187").then(r.bind(r,12094))},{id:"rst",name:"reStructuredText",import:()=>Promise.all([r.e("597"),r.e("9468"),r.e("9247"),r.e("6405"),r.e("4662"),r.e("8444"),r.e("4773"),r.e("8529"),r.e("9887"),r.e("8537"),r.e("8032"),r.e("8189"),r.e("1868"),r.e("5374"),r.e("7885")]).then(r.bind(r,82604))},{id:"ruby",name:"Ruby",aliases:["rb"],import:()=>Promise.all([r.e("597"),r.e("9468"),r.e("9247"),r.e("6405"),r.e("4662"),r.e("8444"),r.e("4773"),r.e("8529"),r.e("9887"),r.e("8537"),r.e("8032"),r.e("8189"),r.e("5374")]).then(r.bind(r,42973))},{id:"rust",name:"Rust",aliases:["rs"],import:()=>r.e("2932").then(r.bind(r,3519))},{id:"sas",name:"SAS",import:()=>Promise.all([r.e("8444"),r.e("6289")]).then(r.bind(r,90440))},{id:"sass",name:"Sass",import:()=>r.e("3892").then(r.bind(r,22991))},{id:"scala",name:"Scala",import:()=>r.e("8982").then(r.bind(r,94229))},{id:"scheme",name:"Scheme",import:()=>r.e("4437").then(r.bind(r,73284))},{id:"scss",name:"SCSS",import:()=>Promise.all([r.e("9468"),r.e("5922")]).then(r.bind(r,5689))},{id:"sdbl",name:"1C (Query)",aliases:["1c-query"],import:()=>r.e("6891").then(r.bind(r,8294))},{id:"shaderlab",name:"ShaderLab",aliases:["shader"],import:()=>r.e("7036").then(r.bind(r,79767))},{id:"shellscript",name:"Shell",aliases:["bash","sh","shell","zsh"],import:()=>r.e("8529").then(r.bind(r,64363))},{id:"shellsession",name:"Shell Session",aliases:["console"],import:()=>Promise.all([r.e("8529"),r.e("4800")]).then(r.bind(r,49171))},{id:"smalltalk",name:"Smalltalk",import:()=>r.e("6277").then(r.bind(r,94900))},{id:"solidity",name:"Solidity",import:()=>r.e("1879").then(r.bind(r,95226))},{id:"soy",name:"Closure Templates",aliases:["closure-templates"],import:()=>Promise.all([r.e("597"),r.e("9468"),r.e("9247"),r.e("9989")]).then(r.bind(r,8004))},{id:"sparql",name:"SPARQL",import:()=>r.e("1567").then(r.bind(r,41602))},{id:"splunk",name:"Splunk Query Language",aliases:["spl"],import:()=>r.e("4645").then(r.bind(r,69540))},{id:"sql",name:"SQL",import:()=>r.e("8444").then(r.bind(r,59591))},{id:"ssh-config",name:"SSH Config",import:()=>r.e("2197").then(r.bind(r,73764))},{id:"stata",name:"Stata",import:()=>Promise.all([r.e("8444"),r.e("3109")]).then(r.bind(r,7332))},{id:"stylus",name:"Stylus",aliases:["styl"],import:()=>r.e("1396").then(r.bind(r,63919))},{id:"svelte",name:"Svelte",import:()=>Promise.all([r.e("597"),r.e("9468"),r.e("6405"),r.e("229")]).then(r.bind(r,99556))},{id:"swift",name:"Swift",import:()=>r.e("7231").then(r.bind(r,38402))},{id:"system-verilog",name:"SystemVerilog",import:()=>r.e("6844").then(r.bind(r,63751))},{id:"systemd",name:"Systemd Units",import:()=>r.e("3159").then(r.bind(r,83418))},{id:"talonscript",name:"TalonScript",aliases:["talon"],import:()=>r.e("9447").then(r.bind(r,47082))},{id:"tasl",name:"Tasl",import:()=>r.e("9378").then(r.bind(r,80537))},{id:"tcl",name:"Tcl",import:()=>r.e("8483").then(r.bind(r,73790))},{id:"templ",name:"Templ",import:()=>Promise.all([r.e("597"),r.e("9468"),r.e("7512"),r.e("9138")]).then(r.bind(r,42073))},{id:"terraform",name:"Terraform",aliases:["tf","tfvars"],import:()=>r.e("564").then(r.bind(r,51983))},{id:"tex",name:"TeX",import:()=>Promise.all([r.e("3142"),r.e("545")]).then(r.bind(r,18168))},{id:"toml",name:"TOML",import:()=>r.e("9694").then(r.bind(r,23293))},{id:"ts-tags",name:"TypeScript with Tags",aliases:["lit"],import:()=>Promise.all([r.e("597"),r.e("9468"),r.e("9247"),r.e("6405"),r.e("4662"),r.e("8444"),r.e("4773"),r.e("9291")]).then(r.bind(r,70342))},{id:"tsv",name:"TSV",import:()=>r.e("4117").then(r.bind(r,98628))},{id:"tsx",name:"TSX",import:()=>r.e("9887").then(r.bind(r,70274))},{id:"turtle",name:"Turtle",import:()=>r.e("9444").then(r.bind(r,95807))},{id:"twig",name:"Twig",import:()=>Promise.all([r.e("597"),r.e("9468"),r.e("9247"),r.e("6405"),r.e("4662"),r.e("8444"),r.e("4773"),r.e("8529"),r.e("9887"),r.e("8537"),r.e("8032"),r.e("8189"),r.e("1868"),r.e("5922"),r.e("5374"),r.e("4452"),r.e("2871")]).then(r.bind(r,94762))},{id:"typescript",name:"TypeScript",aliases:["ts"],import:()=>r.e("6405").then(r.bind(r,93268))},{id:"typespec",name:"TypeSpec",aliases:["tsp"],import:()=>r.e("6073").then(r.bind(r,92672))},{id:"typst",name:"Typst",aliases:["typ"],import:()=>r.e("7950").then(r.bind(r,94333))},{id:"v",name:"V",import:()=>r.e("7042").then(r.bind(r,19385))},{id:"vala",name:"Vala",import:()=>r.e("3396").then(r.bind(r,1743))},{id:"vb",name:"Visual Basic",aliases:["cmd"],import:()=>r.e("7970").then(r.bind(r,66985))},{id:"verilog",name:"Verilog",import:()=>r.e("2230").then(r.bind(r,57765))},{id:"vhdl",name:"VHDL",import:()=>r.e("3616").then(r.bind(r,74563))},{id:"viml",name:"Vim Script",aliases:["vim","vimscript"],import:()=>r.e("1186").then(r.bind(r,65689))},{id:"vue",name:"Vue",import:()=>Promise.all([r.e("597"),r.e("9468"),r.e("9247"),r.e("6405"),r.e("7450")]).then(r.bind(r,23633))},{id:"vue-html",name:"Vue HTML",import:()=>Promise.all([r.e("597"),r.e("9468"),r.e("9247"),r.e("6405"),r.e("7450"),r.e("636")]).then(r.bind(r,94183))},{id:"vue-vine",name:"Vue Vine",import:()=>Promise.all([r.e("597"),r.e("9468"),r.e("9247"),r.e("6405"),r.e("5922"),r.e("607"),r.e("7450"),r.e("1396"),r.e("9645")]).then(r.bind(r,14348))},{id:"vyper",name:"Vyper",aliases:["vy"],import:()=>r.e("8588").then(r.bind(r,5991))},{id:"wasm",name:"WebAssembly",import:()=>r.e("534").then(r.bind(r,67077))},{id:"wenyan",name:"Wenyan",aliases:["文言"],import:()=>r.e("816").then(r.bind(r,68819))},{id:"wgsl",name:"WGSL",import:()=>r.e("1568").then(r.bind(r,5038))},{id:"wikitext",name:"Wikitext",aliases:["mediawiki","wiki"],import:()=>r.e("6333").then(r.bind(r,24652))},{id:"wit",name:"WebAssembly Interface Types",import:()=>r.e("2208").then(r.bind(r,82643))},{id:"wolfram",name:"Wolfram",aliases:["wl"],import:()=>r.e("6644").then(r.bind(r,77068))},{id:"xml",name:"XML",import:()=>Promise.all([r.e("4662"),r.e("790")]).then(r.bind(r,37072))},{id:"xsl",name:"XSL",import:()=>Promise.all([r.e("4662"),r.e("4231")]).then(r.bind(r,69322))},{id:"yaml",name:"YAML",aliases:["yml"],import:()=>r.e("2265").then(r.bind(r,61008))},{id:"zenscript",name:"ZenScript",import:()=>r.e("626").then(r.bind(r,83001))},{id:"zig",name:"Zig",import:()=>r.e("2346").then(r.bind(r,90865))}],_g=Object.fromEntries(_f.map(e=>[e.id,e.import])),_m=Object.fromEntries(_f.flatMap(e=>e.aliases?.map(n=>[n,e.import])||[])),_y={..._g,..._m},_O=Object.fromEntries([{id:"andromeeda",displayName:"Andromeeda",type:"dark",import:()=>r.e("505").then(r.bind(r,79440))},{id:"aurora-x",displayName:"Aurora X",type:"dark",import:()=>r.e("6260").then(r.bind(r,76575))},{id:"ayu-dark",displayName:"Ayu Dark",type:"dark",import:()=>r.e("53").then(r.bind(r,49284))},{id:"catppuccin-frappe",displayName:"Catppuccin Frapp\xe9",type:"dark",import:()=>r.e("8942").then(r.bind(r,42653))},{id:"catppuccin-latte",displayName:"Catppuccin Latte",type:"light",import:()=>r.e("224").then(r.bind(r,65763))},{id:"catppuccin-macchiato",displayName:"Catppuccin Macchiato",type:"dark",import:()=>r.e("4309").then(r.bind(r,55303))},{id:"catppuccin-mocha",displayName:"Catppuccin Mocha",type:"dark",import:()=>r.e("4036").then(r.bind(r,17615))},{id:"dark-plus",displayName:"Dark Plus",type:"dark",import:()=>r.e("8690").then(r.bind(r,95801))},{id:"dracula",displayName:"Dracula Theme",type:"dark",import:()=>r.e("4391").then(r.bind(r,51194))},{id:"dracula-soft",displayName:"Dracula Theme Soft",type:"dark",import:()=>r.e("2496").then(r.bind(r,80355))},{id:"everforest-dark",displayName:"Everforest Dark",type:"dark",import:()=>r.e("993").then(r.bind(r,93512))},{id:"everforest-light",displayName:"Everforest Light",type:"light",import:()=>r.e("8417").then(r.bind(r,14264))},{id:"github-dark",displayName:"GitHub Dark",type:"dark",import:()=>r.e("8319").then(r.bind(r,93842))},{id:"github-dark-default",displayName:"GitHub Dark Default",type:"dark",import:()=>r.e("87").then(r.bind(r,36298))},{id:"github-dark-dimmed",displayName:"GitHub Dark Dimmed",type:"dark",import:()=>r.e("2108").then(r.bind(r,83767))},{id:"github-dark-high-contrast",displayName:"GitHub Dark High Contrast",type:"dark",import:()=>r.e("5287").then(r.bind(r,96874))},{id:"github-light",displayName:"GitHub Light",type:"light",import:()=>r.e("6919").then(r.bind(r,39498))},{id:"github-light-default",displayName:"GitHub Light Default",type:"light",import:()=>r.e("2847").then(r.bind(r,10370))},{id:"github-light-high-contrast",displayName:"GitHub Light High Contrast",type:"light",import:()=>r.e("7087").then(r.bind(r,20882))},{id:"gruvbox-dark-hard",displayName:"Gruvbox Dark Hard",type:"dark",import:()=>r.e("7693").then(r.bind(r,45500))},{id:"gruvbox-dark-medium",displayName:"Gruvbox Dark Medium",type:"dark",import:()=>r.e("5087").then(r.bind(r,71842))},{id:"gruvbox-dark-soft",displayName:"Gruvbox Dark Soft",type:"dark",import:()=>r.e("8472").then(r.bind(r,48443))},{id:"gruvbox-light-hard",displayName:"Gruvbox Light Hard",type:"light",import:()=>r.e("1509").then(r.bind(r,54436))},{id:"gruvbox-light-medium",displayName:"Gruvbox Light Medium",type:"light",import:()=>r.e("8951").then(r.bind(r,60554))},{id:"gruvbox-light-soft",displayName:"Gruvbox Light Soft",type:"light",import:()=>r.e("4496").then(r.bind(r,78211))},{id:"houston",displayName:"Houston",type:"dark",import:()=>r.e("3935").then(r.bind(r,13778))},{id:"kanagawa-dragon",displayName:"Kanagawa Dragon",type:"dark",import:()=>r.e("4630").then(r.bind(r,44117))},{id:"kanagawa-lotus",displayName:"Kanagawa Lotus",type:"light",import:()=>r.e("8662").then(r.bind(r,87717))},{id:"kanagawa-wave",displayName:"Kanagawa Wave",type:"dark",import:()=>r.e("8224").then(r.bind(r,45987))},{id:"laserwave",displayName:"LaserWave",type:"dark",import:()=>r.e("6087").then(r.bind(r,84666))},{id:"light-plus",displayName:"Light Plus",type:"light",import:()=>r.e("1490").then(r.bind(r,49689))},{id:"material-theme",displayName:"Material Theme",type:"dark",import:()=>r.e("5396").then(r.bind(r,74575))},{id:"material-theme-darker",displayName:"Material Theme Darker",type:"dark",import:()=>r.e("2782").then(r.bind(r,25549))},{id:"material-theme-lighter",displayName:"Material Theme Lighter",type:"light",import:()=>r.e("4822").then(r.bind(r,55989))},{id:"material-theme-ocean",displayName:"Material Theme Ocean",type:"dark",import:()=>r.e("5347").then(r.bind(r,29118))},{id:"material-theme-palenight",displayName:"Material Theme Palenight",type:"dark",import:()=>r.e("3151").then(r.bind(r,37506))},{id:"min-dark",displayName:"Min Dark",type:"dark",import:()=>r.e("9002").then(r.bind(r,54689))},{id:"min-light",displayName:"Min Light",type:"light",import:()=>r.e("6904").then(r.bind(r,9483))},{id:"monokai",displayName:"Monokai",type:"dark",import:()=>r.e("2047").then(r.bind(r,23762))},{id:"night-owl",displayName:"Night Owl",type:"dark",import:()=>r.e("5212").then(r.bind(r,56919))},{id:"nord",displayName:"Nord",type:"dark",import:()=>r.e("628").then(r.bind(r,70511))},{id:"one-dark-pro",displayName:"One Dark Pro",type:"dark",import:()=>r.e("5488").then(r.bind(r,80291))},{id:"one-light",displayName:"One Light",type:"light",import:()=>r.e("3684").then(r.bind(r,70991))},{id:"plastic",displayName:"Plastic",type:"dark",import:()=>r.e("777").then(r.bind(r,96064))},{id:"poimandres",displayName:"Poimandres",type:"dark",import:()=>r.e("6483").then(r.bind(r,35150))},{id:"red",displayName:"Red",type:"dark",import:()=>r.e("7882").then(r.bind(r,79761))},{id:"rose-pine",displayName:"Ros\xe9 Pine",type:"dark",import:()=>r.e("497").then(r.bind(r,51528))},{id:"rose-pine-dawn",displayName:"Ros\xe9 Pine Dawn",type:"light",import:()=>r.e("832").then(r.bind(r,82803))},{id:"rose-pine-moon",displayName:"Ros\xe9 Pine Moon",type:"dark",import:()=>r.e("6291").then(r.bind(r,51742))},{id:"slack-dark",displayName:"Slack Dark",type:"dark",import:()=>r.e("1646").then(r.bind(r,93053))},{id:"slack-ochin",displayName:"Slack Ochin",type:"light",import:()=>r.e("4945").then(r.bind(r,14280))},{id:"snazzy-light",displayName:"Snazzy Light",type:"light",import:()=>r.e("1291").then(r.bind(r,37126))},{id:"solarized-dark",displayName:"Solarized Dark",type:"dark",import:()=>r.e("6675").then(r.bind(r,85678))},{id:"solarized-light",displayName:"Solarized Light",type:"light",import:()=>r.e("7155").then(r.bind(r,56094))},{id:"synthwave-84",displayName:"Synthwave '84",type:"dark",import:()=>r.e("2947").then(r.bind(r,54094))},{id:"tokyo-night",displayName:"Tokyo Night",type:"dark",import:()=>r.e("4668").then(r.bind(r,74567))},{id:"vesper",displayName:"Vesper",type:"dark",import:()=>r.e("7084").then(r.bind(r,14391))},{id:"vitesse-black",displayName:"Vitesse Black",type:"dark",import:()=>r.e("160").then(r.bind(r,47091))},{id:"vitesse-dark",displayName:"Vitesse Dark",type:"dark",import:()=>r.e("2187").then(r.bind(r,79158))},{id:"vitesse-light",displayName:"Vitesse Light",type:"light",import:()=>r.e("619").then(r.bind(r,34518))}].map(e=>[e.id,e.import]));class _v extends Error{constructor(e){super(e),this.name="ShikiError"}}function _b(){return"undefined"!=typeof performance?performance.now():Date.now()}let _x=(e,n)=>e+(n-e%n)%n;async function _w(e){let n,r,i={};function s(e){r=e,i.HEAPU8=new Uint8Array(e),i.HEAPU32=new Uint32Array(e)}let o="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function a(e,n){return e?function(e,n,r=1024){let i=n+r,s=n;for(;e[s]&&!(s>=i);)++s;if(s-n>16&&e.buffer&&o)return o.decode(e.subarray(n,s));let a="";for(;n<s;){let r=e[n++];if(!(128&r)){a+=String.fromCharCode(r);continue}let i=63&e[n++];if((224&r)==192){a+=String.fromCharCode((31&r)<<6|i);continue}let s=63&e[n++];if((r=(240&r)==224?(15&r)<<12|i<<6|s:(7&r)<<18|i<<12|s<<6|63&e[n++])<65536)a+=String.fromCharCode(r);else{let e=r-65536;a+=String.fromCharCode(55296|e>>10,56320|1023&e)}}return a}(i.HEAPU8,e,n):""}let l={emscripten_get_now:_b,emscripten_memcpy_big:function(e,n,r){i.HEAPU8.copyWithin(e,n,n+r)},emscripten_resize_heap:function(e){let o=i.HEAPU8.length;if((e>>>=0)>0x80000000)return!1;for(let i=1;i<=4;i*=2){let a=o*(1+.2/i);if(a=Math.min(a,e+0x6000000),function(e){try{return n.grow(e-r.byteLength+65535>>>16),s(n.buffer),1}catch{}}(Math.min(0x80000000,_x(Math.max(e,a),65536))))return!0}return!1},fd_write:()=>0};async function h(){let r=await e({env:l,wasi_snapshot_preview1:l});s((n=r.memory).buffer),Object.assign(i,r),i.UTF8ToString=a}return await h(),i}var _S=Object.defineProperty,__=(e,n,r)=>{let i;return(i="symbol"!=typeof n?n+"":n)in e?_S(e,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[i]=r};let _k=null;class _C{constructor(e){__(this,"utf16Length"),__(this,"utf8Length"),__(this,"utf16Value"),__(this,"utf8Value"),__(this,"utf16OffsetToUtf8"),__(this,"utf8OffsetToUtf16");let n=e.length,r=_C._utf8ByteLength(e),i=r!==n,s=i?new Uint32Array(n+1):null;i&&(s[n]=r);let o=i?new Uint32Array(r+1):null;i&&(o[r]=n);let a=new Uint8Array(r),l=0;for(let r=0;r<n;r++){let h=e.charCodeAt(r),c=h,u=!1;if(h>=55296&&h<=56319&&r+1<n){let n=e.charCodeAt(r+1);n>=56320&&n<=57343&&(c=(h-55296<<10)+65536|n-56320,u=!0)}i&&(s[r]=l,u&&(s[r+1]=l),c<=127?o[l+0]=r:c<=2047?(o[l+0]=r,o[l+1]=r):c<=65535?(o[l+0]=r,o[l+1]=r,o[l+2]=r):(o[l+0]=r,o[l+1]=r,o[l+2]=r,o[l+3]=r)),c<=127?a[l++]=c:(c<=2047?a[l++]=192|(1984&c)>>>6:(c<=65535?a[l++]=224|(61440&c)>>>12:(a[l++]=240|(1835008&c)>>>18,a[l++]=128|(258048&c)>>>12),a[l++]=128|(4032&c)>>>6),a[l++]=128|(63&c)>>>0),u&&r++}this.utf16Length=n,this.utf8Length=r,this.utf16Value=e,this.utf8Value=a,this.utf16OffsetToUtf8=s,this.utf8OffsetToUtf16=o}static _utf8ByteLength(e){let n=0;for(let r=0,i=e.length;r<i;r++){let s=e.charCodeAt(r),o=s,a=!1;if(s>=55296&&s<=56319&&r+1<i){let n=e.charCodeAt(r+1);n>=56320&&n<=57343&&(o=(s-55296<<10)+65536|n-56320,a=!0)}o<=127?n+=1:o<=2047?n+=2:o<=65535?n+=3:n+=4,a&&r++}return n}createString(e){let n=e.omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,n),n}}let _E=class e{constructor(n){if(__(this,"id",++e.LAST_ID),__(this,"_onigBinding"),__(this,"content"),__(this,"utf16Length"),__(this,"utf8Length"),__(this,"utf16OffsetToUtf8"),__(this,"utf8OffsetToUtf16"),__(this,"ptr"),!_k)throw new _v("Must invoke loadWasm first.");this._onigBinding=_k,this.content=n;let r=new _C(n);this.utf16Length=r.utf16Length,this.utf8Length=r.utf8Length,this.utf16OffsetToUtf8=r.utf16OffsetToUtf8,this.utf8OffsetToUtf16=r.utf8OffsetToUtf16,this.utf8Length<1e4&&!e._sharedPtrInUse?(e._sharedPtr||(e._sharedPtr=_k.omalloc(1e4)),e._sharedPtrInUse=!0,_k.HEAPU8.set(r.utf8Value,e._sharedPtr),this.ptr=e._sharedPtr):this.ptr=r.createString(_k)}convertUtf8OffsetToUtf16(e){return this.utf8OffsetToUtf16?e<0?0:e>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[e]:e}convertUtf16OffsetToUtf8(e){return this.utf16OffsetToUtf8?e<0?0:e>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[e]:e}dispose(){this.ptr===e._sharedPtr?e._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}};__(_E,"LAST_ID",0),__(_E,"_sharedPtr",0),__(_E,"_sharedPtrInUse",!1);class _T{constructor(e){if(__(this,"_onigBinding"),__(this,"_ptr"),!_k)throw new _v("Must invoke loadWasm first.");let n=[],r=[];for(let i=0,s=e.length;i<s;i++){let s=new _C(e[i]);n[i]=s.createString(_k),r[i]=s.utf8Length}let i=_k.omalloc(4*e.length);_k.HEAPU32.set(n,i/4);let s=_k.omalloc(4*e.length);_k.HEAPU32.set(r,s/4);let o=_k.createOnigScanner(i,s,e.length);for(let r=0,i=e.length;r<i;r++)_k.ofree(n[r]);_k.ofree(s),_k.ofree(i),0===o&&function(e){throw new _v(e.UTF8ToString(e.getLastOnigError()))}(_k),this._onigBinding=_k,this._ptr=o}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(e,n,r){let i=0;if("number"==typeof r&&(i=r),"string"==typeof e){e=new _E(e);let r=this._findNextMatchSync(e,n,!1,i);return e.dispose(),r}return this._findNextMatchSync(e,n,!1,i)}_findNextMatchSync(e,n,r,i){let s=this._onigBinding,o=s.findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(n),i);if(0===o)return null;let a=s.HEAPU32,l=o/4,h=a[l++],c=a[l++],u=[];for(let n=0;n<c;n++){let r=e.convertUtf8OffsetToUtf16(a[l++]),i=e.convertUtf8OffsetToUtf16(a[l++]);u[n]={start:r,end:i,length:i-r}}return{index:h,captureIndices:u}}}function _P(e){return n=>WebAssembly.instantiate(e,n)}async function _A(e){return e&&await (c||(c=async function(){_k=await _w(async n=>{let r=e;if("function"==typeof(r=await r)&&(r=await r(n)),"function"==typeof r&&(r=await r(n)),"function"==typeof r.instantiator)r=await r.instantiator(n);else if("function"==typeof r.default)r=await r.default(n);else{var i,s,o,a;if(void 0!==r.data&&(r=r.data),i=r,"undefined"!=typeof Response&&i instanceof Response){r="function"==typeof WebAssembly.instantiateStreaming?await (o=r,e=>WebAssembly.instantiateStreaming(o,e))(n):await (a=r,async e=>{let n=await a.arrayBuffer();return WebAssembly.instantiate(n,e)})(n)}else(s=r,"undefined"!=typeof ArrayBuffer&&(s instanceof ArrayBuffer||ArrayBuffer.isView(s))||"undefined"!=typeof Buffer&&Buffer.isBuffer?.(s)||"undefined"!=typeof SharedArrayBuffer&&s instanceof SharedArrayBuffer||"undefined"!=typeof Uint32Array&&s instanceof Uint32Array||r instanceof WebAssembly.Module)?r=await _P(r)(n):"default"in r&&r.default instanceof WebAssembly.Module&&(r=await _P(r.default)(n))}return"instance"in r&&(r=r.instance),"exports"in r&&(r=r.exports),r})}())),{createScanner:e=>new _T(e.map(e=>"string"==typeof e?e:e.source)),createString:e=>new _E(e)}}let _M=function(e){let n=e.langs,r=e.themes,i=e.engine;return async function(e){function s(r){if("string"==typeof r){if(SB(r))return[];let i=n[r=e.langAlias?.[r]||r];if(!i)throw new xC(`Language \`${r}\` is not included in this bundle. You may want to load it from external source.`);return i}return r}function o(e){if(SF(e))return"none";if("string"==typeof e){let n=r[e];if(!n)throw new xC(`Theme \`${e}\` is not included in this bundle. You may want to load it from external source.`);return n}return e}let a=(e.themes??[]).map(e=>o(e)),l=(e.langs??[]).map(e=>s(e)),h=await _p({engine:e.engine??i(),...e,themes:a,langs:l});return{...h,loadLanguage:(...e)=>h.loadLanguage(...e.map(s)),loadTheme:(...e)=>h.loadTheme(...e.map(o)),getBundledLanguages:()=>n,getBundledThemes:()=>r}}}({langs:_y,themes:_O,engine:()=>_A(r.e("9592").then(r.bind(r,51995)))});var _N=class{constructor(e){this.mappings=e}originalOffsetFor(e){let n=_D(this.mappings,e,"generatedRange"),r=this.mappings[n];return r?_$(r,e,"generatedRange"):-1}generatedOffsetFor(e){let n=_D(this.mappings,e,"sourceRange"),r=this.mappings[n];return r?_$(r,e,"sourceRange"):-1}originalRangeFor(e){let n="generatedRange",r=_D(this.mappings,e.from,n),i=_I(this.mappings,e.to,n,r),s=this.mappings[r],o=this.mappings[i];if(s||o)return{from:s?_R(s,e.from,n):_R(o,e.from,n),to:o?_R(o,e.to,n):_R(s,e.to,n)}}generatedRangeFor(e){let n="sourceRange",r=_D(this.mappings,e.from,n),i=_I(this.mappings,e.to,n,r),s=this.mappings[r],o=this.mappings[i];if(s||o)return{from:s?_R(s,e.from,n):_R(o,e.from,n),to:o?_R(o,e.to,n):_R(s,e.to,n)}}};function _D(e,n,r){for(let[i,s]of e.entries()){let[e,o]=s[r];if(n>=e&&n<o)return i}return -1}function _I(e,n,r,i=-1){for(let[s,o]of e.entries()){if(s<i)continue;let[e,a]=o[r];if(n>=e&&n<=a)return s}return -1}function _$(e,n,r){let i=_L(r),[s]=e[r],[o,a]=e[i];return"retain"!==e.type?-1:o+Math.min(n-s,a-o)}function _R(e,n,r){let i=_L(r),[s,o]=e[r],[a,l]=e[i];return n===o?l:a+Math.min(Math.max(n-s,0),l-a)}function _L(e){return"generatedRange"===e?"sourceRange":"generatedRange"}var _Q=/\r\n|\r|\n/g;function _j(e,n=""){return e.replace(_Q,e=>e+n)}var _V=class{constructor(){this._insertions={left:"",right:""},this._edit=null}overwrite(e,n){var r,i;if(e<=0)throw Error("Count should be positive");return e<(null!=(i=null==(r=this._edit)?void 0:r.count)?i:1/0)&&(this._edit={count:e,insert:n}),this}remove(e){return this.overwrite(e,"")}prependLeft(e){return this._insertions.left=e+this._insertions.left,this}appendLeft(e){return this._insertions.left=this._insertions.left+e,this}prependRight(e){return this._insertions.right=e+this._insertions.right,this}appendRight(e){return this._insertions.right=this._insertions.right+e,this}indent(e){var n;this._insertions.left=_j(this._insertions.left,e),this._insertions.right=_j(this._insertions.right,e),"string"==typeof(null==(n=this._edit)?void 0:n.insert)&&(this._edit.insert=_j(this._edit.insert,e))}getEdit(){let{_edit:e}=this;return e?{...e}:null}getInsertText(){return this._insertions.left+this._insertions.right}},_z=class{constructor(e){this.string=e,this.edits=new Map,this.version=0,this.consumerMap=new Map,this.mappingsCache=new Map}_getEditsAt(e){let n=this.edits.get(e);return n||(n=new _V,this.edits.set(e,n)),n}_changed(){this.version++}prepend(e){return this._getEditsAt(0).prependLeft(e),this._changed(),this}append(e){let n=this.string.length;return this._getEditsAt(n).appendRight(e),this._changed(),this}prependLeft(e,n){return this._getEditsAt(e).prependLeft(n),this._changed(),this}appendLeft(e,n){return this._getEditsAt(e).appendLeft(n),this._changed(),this}prependRight(e,n){return this._getEditsAt(e).prependRight(n),this._changed(),this}appendRight(e,n){return this._getEditsAt(e).appendRight(n),this._changed(),this}remove(e,n){return this._getEditsAt(e).remove(n-e),this._changed(),this}replaceRange(e,n,r){return this._getEditsAt(e).overwrite(n-e,r),this._changed(),this}_indentInRange(e,n,r){let{string:i}=this,s=i.substring(e,n);_Q.lastIndex=0;let o=_Q.exec(s);for(;o;)this._getEditsAt(e+o.index+1).prependLeft(r),o=_Q.exec(s)}indent(e="  "){let{string:n,edits:r}=this,i=[...r.entries()].sort((e,n)=>e[0]-n[0]);this.prependLeft(0,e);let s=-1/0;for(let[n,r]of i){if(n<s)continue;n>s&&this._indentInRange(Math.max(0,s),n,e);let i=r.getEdit();r.indent(e),s=i?n+i.count:n}return this._indentInRange(Math.max(0,s),n.length,e),this._changed(),this}toString(){return this._getCachedSourceMappings().map(e=>e.generatedText).join("")}originalOffsetFor(e){return this._getSourceMapConsumer().originalOffsetFor(e)}generatedOffsetFor(e){return this._getSourceMapConsumer().generatedOffsetFor(e)}originalRangeFor(e){return this._getSourceMapConsumer().originalRangeFor(e)}generatedRangeFor(e){return this._getSourceMapConsumer().generatedRangeFor(e)}_getCachedSourceMappings(){let e=this.mappingsCache.get(this.version);return e||(e=this._getSourceMappings(),this.mappingsCache.set(this.version,e)),e}_getSourceMappings(){let{string:e,edits:n}=this,r=[...n.entries()].sort((e,n)=>e[0]-n[0]),i=[],s=0,o=0;for(let[n,a]of r){if(n<s)continue;let r=n-s;if(r>0){let a=o+r;i.push({sourceRange:[s,n],generatedRange:[o,a],type:"retain",generatedText:e.substring(s,n)}),o=a}s=n;let l=a.getInsertText(),h=a.getEdit();if(l){let e=o+l.length;i.push({sourceRange:[n,n],generatedRange:[o,e],type:"insert",generatedText:l}),o=e}if(h){let e=o+h.insert.length;i.push({sourceRange:[n,n+h.count],generatedRange:[o,e],type:h.insert.length>0?"update":"delete",generatedText:h.insert}),o=e,s=n+h.count}}if(s<e.length){let n=e.length-s;i.push({sourceRange:[s,e.length],generatedRange:[o,o+n],type:"retain",generatedText:e.substring(s,e.length)})}return i}_getSourceMapConsumer(){let e=this.consumerMap.get(this.version);return e||(e=new _N(this._getCachedSourceMappings()),this.consumerMap.set(this.version,e)),e}dispose(){this.consumerMap.clear(),this.mappingsCache.clear()}},_B=class{_store=Object.create(null);register(e,n){this._store[e]=n}get(e){return this._store[e]}},_F=Symbol.for("codemirror.themes");globalThis[_F]||(globalThis[_F]=new _B);var _Z=globalThis[_F],_q=[uw(uO.define(ON)),aO.theme({"&":{color:O_,backgroundColor:OS},".cm-content":{caretColor:OC},".cm-cursor, .cm-dropCursor":{borderLeftColor:OC},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Ok},".cm-panels":{backgroundColor:OE,color:O_},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:OE,outline:"1px solid #e1e4e8"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:Ok},".cm-activeLine":{backgroundColor:"#c6c6c622"},".cm-selectionMatch":{backgroundColor:Ok},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#34d05840",outline:"none"},".cm-gutters":{backgroundColor:OS,color:O_,border:"none"},".cm-activeLineGutter":{backgroundColor:OS},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:O_},".cm-tooltip":{backgroundColor:OE,color:O_,border:"none",boxShadow:"0 0 1px rgba(0, 0, 0, .3), 0 4px 14px rgba(0, 0, 0, .1)!important",maxWidth:"400px"},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:O_,borderBottomColor:O_},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{background:Ok,color:O_}},".cm-tooltip code[class*=language-]":{whiteSpace:"pre-wrap",wordBreak:"break-word",color:"rgba(28, 31, 35, 1)"},"& .cm-scroller":{border:"1px solid transparent"},"& .cm-hover-tooltip-content":{fontSize:"12px",padding:"0 10px",width:"400px",overflow:"auto","max-height":"calc(100% - 20px)"},"& .cm-hover-tooltip-content h1":{fontSize:"14px"},"& .cm-tooltip-autocomplete.cm-tooltip":{padding:"5px",borderRadius:"5px"},"& .cm-tooltip.cm-tooltip-autocomplete > ul > li":{borderRadius:"3px",lineHeight:1.6}},{dark:!1})],_W=[uw(uO.define(Ow)),aO.theme({"&":{color:Og,backgroundColor:Of},".cm-content":{caretColor:Oy},".cm-cursor, .cm-dropCursor":{borderLeftColor:Oy},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Om},".cm-panels":{backgroundColor:OO,color:Og},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:OO,outline:"1px solid #1b1f23"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:Om},".cm-activeLine":{backgroundColor:"#4d566022"},".cm-selectionMatch":{backgroundColor:Om},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#888892",outline:"none"},".cm-gutters":{backgroundColor:Of,color:"#888892",border:"none"},".cm-activeLineGutter":{backgroundColor:Of},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:Og},".cm-tooltip":{backgroundColor:OO,color:Og,border:"none",boxShadow:"inset 0 0 0 1px rgba(255, 255, 255, .1), 0 4px 14px rgba(0, 0, 0, .25)!important",maxWidth:"400px"},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Og,borderBottomColor:Og},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{background:Om,color:Og}},".cm-tooltip code[class*=language-]":{whiteSpace:"pre-wrap",wordBreak:"break-word",color:"rgba(249, 249, 249, 1)"},"& .cm-scroller":{border:"1px solid transparent"},"& .cm-hover-tooltip-content":{fontSize:"12px",padding:"0 10px",width:"400px",overflow:"auto","max-height":"calc(100% - 20px)"},"& .cm-hover-tooltip-content h1":{fontSize:"14px"},"& .cm-tooltip-autocomplete.cm-tooltip":{padding:"5px",borderRadius:"5px"},"& .cm-tooltip.cm-tooltip-autocomplete > ul > li":{borderRadius:"3px",lineHeight:1.6}},{dark:!0})],_X=_M({langs:["md","js","ts","python"],themes:["github-dark","one-dark-pro"]}),_U="sdk.lint.refresh",_Y="one-dark-pro",_G=new xS().use(function(e={}){let{highlight:n,container:r}=e;return{async:!0,async walkTokens(e){var i;if("code"!==e.type||"function"!=typeof n)return;let[s="text",...o]=(null==(i=e.lang)?void 0:i.split(" "))??[],{text:a}=e,l=await n(a,s,o),h=r?r.replace("%l",String(s).toUpperCase()).replace("%s",l).replace("%t",a):l;Object.assign(e,{type:"html",block:!0,text:`${h}
`})}}}({async highlight(e,n,r){let i=await _X;return(await i).codeToHtml(e,{lang:n,theme:_Y,transformers:[{pre(e){delete e.properties.style,e.properties.style="white-space: pre-wrap;"}}]})}})).use({renderer:{link:e=>`<a title="${e.title??""}" target="_blank" href="${e.href}">${e.text}</a>`}});async function _H(e){return await _G.parse(e)}var _K=rV.define({}),_J=rV.define({}),_0=class{pos;result;constructor(e,n){if(n&&-1===e)throw Error("Invalid state");this.pos=e,this.result=n}},_1=rx.define({create:()=>new _0(-1,null),update(e,n){let{pos:r,result:i}=e;for(let e of n.effects)e.is(_K)?r=e.value:e.is(_J)&&((i=e.value)||(r=-1));return(-1===r&&(i=null),r=-1===r?-1:n.changes.mapPos(r),e.pos===r&&e.result===i)?e:new _0(r,i)},provide:e=>lo.compute([e],e=>{let{result:n,pos:r}=e.field(_1);return n?{pos:r,above:!0,create:()=>{let e=document.createElement("div");e.className="cm-signature-tooltip",e.style.cssText="font-size: 12px;max-width: 320px;";let r=document.createElement("div");return r.innerHTML=n,e.appendChild(r),{dom:e}}}:null})});async function _2(e,n){var r,i;let{signatures:s,activeSignature:o,activeParameter:a}=n;if("number"!=typeof o||"number"!=typeof a)return;let l=s[o];if(!l||!Array.isArray(l.parameters))return;let{label:h}=l,c=function(e,n){let r=(null==n?void 0:n.label)??"";if(Array.isArray(r)){let[n,i]=r;r=e.slice(n,i)}return r}(l.label,l.parameters[a]),u=te.is(l.documentation)?l.documentation.value:l.documentation??"";return await _H((r=h,(i=c)?r.split(i).join(`<span class="cm-signature-parameter-active">${i}</span>`):r))+await _H(u.trim().split("\n")[0])}var _5=[{key:"Escape",run:e=>-1!==e.state.field(_1).pos&&(e.dispatch({effects:_K.of(-1)}),!0)}],_4=class{constructor(e){this.view=e}update(e){(e.docChanged||e.selectionSet)&&-1!==this.view.state.field(_1).pos?_6(this.view,e.state):e.docChanged&&e.transactions[e.transactions.length-1].isUserEvent("input")&&e.changes.iterChanges((n,r,i,s,o)=>{(o.sliceString(0).trim().endsWith("()")||","===o.toString())&&_6(this.view,e.state)})}},_3=rg.define({combine:e=>e[e.length-1]}),_6=async(e,n)=>{let r=n.facet(_3),i=n.selection.main.from;try{queueMicrotask(()=>{e.dispatch({effects:[_K.of(i)]})});let s=await r(n,i);if(!s||!s.signatures||0===s.signatures.length)return void queueMicrotask(()=>{e.dispatch({effects:[_J.of(null)]})});let o=await _2(n,s)??"";queueMicrotask(()=>{e.dispatch({effects:[_J.of(o)]})})}catch(n){queueMicrotask(()=>{e.dispatch({effects:[_J.of(null)]})})}},_9=aO.baseTheme({".cm-tooltip.cm-signature-tooltip":{padding:"3px 9px",width:"max-content",maxWidth:"500px"},".cm-tooltip .cm-signature-parameter-active":{fontWeight:"bold"}}),_7=rg.define({combine:cr}),_8=sG.fromClass(class{dispose;constructor(e){function n(n){let r=n.target;if(!n.metaKey||!r.closest(".cm-content"))return;let i=e.posAtCoords({x:n.clientX,y:n.clientY});"number"==typeof i&&e.state.facet(_7)({view:e,pos:i})}document.addEventListener("click",n,!1),this.dispose=()=>{document.removeEventListener("click",n,!1)}}destroy(){"function"==typeof this.dispose&&this.dispose()}}),ke=/^[\w$]+$/,kt=new class{languages={};register(e,n){return this.languages[e]||(this.languages[e]=n),()=>{delete this.languages[e]}}get(e){return this.languages[e]}getExtension(e){var n,r,i,s;if(!this.languages[e])return[];let{languageService:o,language:a,extensions:l}=this.languages[e],h=[];return h.push(new cq(a)),("typescript"===e||"python"===e)&&h.push((r={highlighter:_X,language:e,theme:_Y},[OV.of(r),OF])),h.push(rx.define({create(e){if(null==o?void 0:o.onTextDocumentDidChange){let{textDocument:n}=e.field(Od);o.onTextDocumentDidChange({textDocument:n})}},update(e,n){if(n.docChanged&&(null==o?void 0:o.onTextDocumentDidChange)){let{textDocument:e}=n.state.field(Od);o.onTextDocumentDidChange({textDocument:e})}}})),o&&o.doValidation&&(h.push(sG.fromClass(class{toDispose;constructor(e){var n;function r(){e.dispatch({userEvent:_U})}null==(n=o.events)||n.on("refresh-diagnostics",r),this.toDispose=()=>{var e;null==(e=o.events)||e.off("refresh-diagnostics",r)}}destroy(){"function"==typeof this.toDispose&&this.toDispose()}}),aO.theme({".cm-tooltip-lint":{maxWidth:"360px"},".cm-lint-tag-unnecessary":{opacity:"0.5"},".cm-lint-tag-deprecated":{textDecoration:"line-through"},".cm-lintRange-hint.cm-lint-tag-deprecated":{backgroundImage:"unset"},".cm-lintRange-hint.cm-lint-tag-unnecessary":{backgroundImage:"unset"}})),h.push(function(e,n={}){return[O4.of({source:e,config:n}),O5,vh]}(async e=>{var n;let{textDocument:r,originalRangeFor:i}=e.state.field(Od),s=(await o.doValidation({textDocument:r})).map(e=>{var n,r;let s=i({from:e.from,to:e.to});if(s){let i="";return(null==(n=e.tags)?void 0:n.includes(Op.Unnecessary))&&(i+="cm-lint-tag-unnecessary"),(null==(r=e.tags)?void 0:r.includes(Op.Deprecated))&&(i+="cm-lint-tag-deprecated"),{...e,markClass:i,...s}}}).filter(e=>!!e);return null==(n=o.events)||n.emit("diagnostics",{uri:r.uri,diagnostics:s.map(e=>({from:e.from,to:e.to,message:e.message,severity:e.severity}))}),s},{delay:(null==(n=o.options)?void 0:n.lintDelay)??100,needsRefresh:e=>e.transactions.some(e=>e.isUserEvent(_U))}))),(null==o?void 0:o.doHover)&&h.push(lu(async(e,n)=>{let{textDocument:r,generatedOffsetFor:i}=e.state.field(Od),s=i(n);if("number"!=typeof s)return null;let a=await o.doHover({textDocument:r,offset:s});if(!a)return null;let l=await _H(function e(n){if(te.is(n)){let{value:e}=n;return n.kind,e}return Array.isArray(n)?n.map(n=>`${e(n)}

`).join(""):"string"==typeof n?n:""}(a)),h=e.state.wordAt(s);return{pos:(null==h?void 0:h.from)??s,end:(null==h?void 0:h.to)??s,create(){let e=document.createElement("div");return e.classList.add("cm-code-hover"),e.innerHTML=l,e.style.cssText="padding: 5px 10px;max-width: 360px;",{dom:e}}}}),aO.theme({".cm-code-hover a":{color:"#3b98ff"},".cm-code-hover pre":{margin:"0"}})),(null==o?void 0:o.doSignatureHelp)&&h.push((i=async(e,n)=>{let{textDocument:r,generatedRangeFor:i}=e.field(Od),s=i({from:n,to:n}),a=null==s?void 0:s.from;return"number"!=typeof a?null:await o.doSignatureHelp({textDocument:r,offset:a})},[_3.of(i),sG.fromClass(_4),_1,_9,aC.of(_5),aO.domEventHandlers({blur(e,n){e.relatedTarget instanceof Element&&e.relatedTarget.closest(".cm-signature-tooltip")||queueMicrotask(()=>{n.dispatch({effects:_K.of(-1)})})}})])),(null==o?void 0:o.doComplete)&&h.push(aO.theme({".cm-completionInfo p":{margin:0},".cm-completionMatchedText":{textDecoration:"none",color:"#4daafc"}}),bx({override:[async function({state:e,pos:n,view:r}){var i;let s,{textDocument:a,originalRangeFor:l,generatedRangeFor:h}=e.field(Od),c=h({from:n,to:n}),u=null==c?void 0:c.from;if("number"!=typeof u)return null;let d=await o.doComplete({textDocument:a,offset:u});if(!d||!Array.isArray(d.items)||0===d.items.length)return null;let{items:p}=d,f=e.doc.toString(),g=f.slice(n-1,n);if(!(o.triggerCharacters??[]).includes(g)){let e=n-1,r="";for(;e>=0;){let r=f.slice(e,e+1);if("\n"===r||!ke.test(r)&&e+1<=n)break;e--}(r=f.slice(e+1,n))?p=(0,OZ.default)(p,{key:"label"})(r).map(r=>({...r.item,textEdit:{range:{start:a.positionAt(e+1),end:a.positionAt(n)},newText:r.item.label},data:{matches:r.matches.reduce((e,n)=>n?[...e,...n.reduce((e,n)=>[...e,n[0],n[1]+1],[])]:e,[])}})):Array.isArray(o.triggerCharacters)&&(p=[])}let m=[],y=new WeakMap;"function"==typeof o.resolveCompletionItem&&(s=function(e,n,r){let i=document.createElement("div"),s=new AbortController;function o(e){e.signal.aborted||(i.style.display="none")}return a=>{s.abort();let l=s=new AbortController;return(async()=>{let s=r.get(a);if(!e||!s||"function"!=typeof n.resolveCompletionItem)return o(l);let{textDocument:h,originalRangeFor:c}=e.state.field(Od),u=c({from:e.state.selection.main.from,to:e.state.selection.main.from});if(!u)return o(l);let d=await n.resolveCompletionItem({textDocument:h,offset:u.from},s);if(!d.detail&&!d.documentation)return o(l);let p=te.is(d.documentation)?await _H(d.documentation.value):d.documentation??"",f=[`<div style="opacity: 0.8;white-space: pre-wrap;">${d.detail??""}</div>`,d.documentation?"<br />":"",`<div>${p}</div>`].join("");!l.signal.aborted&&(l.signal.aborted||(i.innerHTML=f,i.style.display="block"))})(),i}}(r,o,y));let O=new WeakMap;for(let e of p){let{kind:n,label:r,textEdit:o,textEditText:h}=e,c={label:r,type:function(e){switch(e){case 1:return"text";case 15:return"snippet";case 2:return"method";case 3:return"function";case 4:return"constructor";case 7:return"class";case 5:return"field";case 10:return"property";case 6:return"variable";case 18:return"reference";case 23:return"event";case 8:return"interface";case 22:return"struct";case 25:return"typeParameter";case 9:return"module";case 12:default:return"value";case 13:case 20:return"enum";case 11:return"unit";case 14:return"keyword";case 24:return"operator";case 16:return"color";case 21:return"constant"}}(n),detail:e.detail??""};if(y.set(c,e),O.set(c,null==(i=e.data)?void 0:i.matches),o){let n="range"in o?o.range:o.replace,r=l({from:a.offsetAt(n.start),to:a.offsetAt(n.end)});if(!r)continue;let i=o.newText,{insertTextFormat:s}=e;c.apply=e=>{var n;2===s?be((n=i.replace(/\$(\d+)/g,"$${$1}").replace(/\\\$/g,"$")).includes("${")?n:`${n}\${0}`)(e,c,r.from,r.to):e.dispatch(vv(e.state,i,r.from,r.to))}}else h&&(c.apply=h);c.info=s,m.push(c)}return{from:n,options:m,filter:!1,getMatch:e=>O.get(e)??[]}}]})),(null==o?void 0:o.findDefinition)&&h.push((s=async({pos:e,view:n})=>{let{textDocument:r,originalRangeFor:i,generatedRangeFor:s}=n.state.field(Od),a=s({from:e,to:e}),l=null==a?void 0:a.from;if("number"!=typeof l)return null;let h=await o.findDefinition({textDocument:r,offset:l});if(!Array.isArray(h)||0===h.length)return;let c=h[0],u=i({from:c.from,to:c.to});u&&n.dispatch({effects:aO.scrollIntoView(u.from,{y:"center"}),selection:rd.range(u.from,u.to)})},[_7.of(s),_8])),(null==o?void 0:o.findLinks)&&h.push(function(e,n=500){return[[sG.fromClass(class{controller=null;decorations=ss.none;constructor(e){this.schedule(e)}schedule(r){this.controller&&(this.controller.abort(),this.controller=null);let i=new AbortController,{signal:s}=i;this.controller=i,setTimeout(()=>{s.aborted||vu(r,e).then(e=>{s.aborted||(this.decorations=e,r.dispatch({userEvent:"sdk.links.update"}),this.controller=null)})},n)}update(e){e.docChanged&&(this.decorations=this.decorations.map(e.changes),this.schedule(e.view))}},{provide:e=>rS.highest(aO.decorations.of(n=>{var r;return(null==(r=n.plugin(e))?void 0:r.decorations)??ss.none}))})]]}(async e=>{let{textDocument:n,originalRangeFor:r}=e.state.field(Od);return(await o.findLinks({textDocument:n})).map(e=>{let n=r(e.range);if(n)return{range:n,target:e.target}}).filter(e=>!!e)})),l&&h.push(l),h}},kn=[lz,aK(),pU(),function(e={}){return[aR.of(e),aQ,aV,az,sz.of(!0)]}(),[aF,aZ],rU.allowMultipleSelections.of(!0),rU.transactionFilter.of(e=>{if(!e.docChanged||!e.isUserEvent("input.type")&&!e.isUserEvent("input.complete"))return e;let n=e.startState.languageDataAt("indentOnInput",e.startState.selection.main.head);if(!n.length)return e;let r=e.newDoc,{head:i}=e.newSelection.main,s=r.lineAt(i);if(i>s.from+200)return e;let o=r.sliceString(s.from,i);if(!n.some(e=>e.test(o)))return e;let{state:a}=e,l=-1,h=[];for(let{head:e}of a.selection.ranges){let n=a.doc.lineAt(e);if(n.from==l)continue;l=n.from;let r=cG(a,n.from);if(null==r)continue;let i=/^\s*/.exec(n.text)[0],s=cY(a,r);i!=s&&h.push({from:n.from,to:n.from+i.length,insert:s})}return h.length?[e,{changes:h,sequential:!0}]:e}),uw(u_,{fallback:!0}),[bg,bc],bx(),(u=e=>e.altKey&&0==e.button,aO.mouseSelectionStyle.of((e,n)=>{let r,i;return u(n)?(r=a4(e,n),i=e.state.selection,r?{update(e){if(e.docChanged){let n=e.changes.mapPos(e.startState.doc.line(r.line).from),s=e.state.doc.lineAt(n);r={line:s.number,col:r.col,off:Math.min(r.off,s.length)},i=i.map(e.changes)}},get(n,s,o){let a=a4(e,n);if(!a)return i;let l=function(e,n,r){let i=Math.min(n.line,r.line),s=Math.max(n.line,r.line),o=[];if(n.off>2e3||r.off>2e3||n.col<0||r.col<0){let a=Math.min(n.off,r.off),l=Math.max(n.off,r.off);for(let n=i;n<=s;n++){let r=e.doc.line(n);r.length<=l&&o.push(rd.range(r.from+a,r.to+l))}}else{let a=Math.min(n.col,r.col),l=Math.max(n.col,r.col);for(let n=i;n<=s;n++){let r=e.doc.line(n),i=ii(r.text,a,e.tabSize,!0);if(i<0)o.push(rd.cursor(r.to));else{let n=ii(r.text,l,e.tabSize);o.push(rd.range(r.from+i,r.from+n))}}}return o}(e.state,r,a);return l.length?o?rd.create(l.concat(i.ranges)):rd.create(l):i}}:null):null})),function(e={}){let[n,r]=a3[e.key||"Alt"],i=sG.fromClass(class{constructor(e){this.view=e,this.isDown=!1}set(e){this.isDown!=e&&(this.isDown=e,this.view.update([]))}},{eventObservers:{keydown(e){this.set(e.keyCode==n||r(e))},keyup(e){e.keyCode!=n&&r(e)||this.set(!1)},mousemove(e){this.set(r(e))}}});return[i,aO.contentAttributes.of(e=>{var n;return(null==(n=e.plugin(i))?void 0:n.isDown)?a6:null})]}(),a5,aC.of([...fY,...bm,...p7,...ul,...bw,{key:"Tab",run:fW,shift:fX},{key:"Tab",run:vX}])],kr=({variant:e,settings:n,styles:r})=>{let i=(n.bracketColors??[]).reduce((e,n,r)=>({...e,[`.colorization-bracket-${r}`]:{color:n},[`.colorization-bracket-${r} > span`]:{color:n}}),{}),s={".cm-tooltip":n.tooltip??{},".cm-tooltip-autocomplete":n.tooltipCompletion??{},".cm-tooltip a":n.link??{color:"#4daafc"}},o={".cm-tooltip-autocomplete ul li[aria-selected]":n.completionItemSelected??{},".cm-tooltip-autocomplete ul li:not([aria-selected]):hover":n.completionItemHover??{},".cm-completionIcon":n.completionItemIcon??{},".cm-completionLabel":n.completionItemLabel??{},".cm-completionDetail":n.completionItemDetail??{},".cm-completionInfo":n.completionItemInfo??{}};return[aO.theme({"&":{backgroundColor:n.background,color:n.foreground},".cm-content":{caretColor:n.caret},".cm-cursor, .cm-dropCursor":{borderLeftColor:n.caret},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:n.selection},".cm-activeLine":{backgroundColor:n.lineHighlight},".cm-gutters":{backgroundColor:n.gutterBackground,color:n.gutterForeground,borderRightColor:n.gutterBorderColor,borderRightWidth:`${n.gutterBorderWidth}px`},".cm-activeLineGutter":{backgroundColor:n.lineHighlight},...i,...s,...o},{dark:"dark"===e}),uw(uO.define(r))]},ki=[...gg,lX([kn,[dW],y7,Od,rS.low(aO.theme({".cm-foldGutter .cm-gutterElement":{display:"flex",alignItems:"center",cursor:"pointer"}})),rS.low(aO.theme({".cm-link":{textDecoration:"underline"}})),rS.low(aO.theme({".cm-tooltip":{borderRadius:"5px",fontSize:"12px"},".cm-diagnostic-error":{borderLeft:"none"},".cm-diagnostic":{padding:"5px 10px"},".cm-lineNumbers":{userSelect:"none"},".cm-tooltip.cm-tooltip-autocomplete > ul":{width:"264px",padding:"4px"},".cm-completionInfo":{minWidth:"200px",margin:"0 2px"},".cm-tooltip.cm-completionInfo":{padding:"6px 9px"},".cm-completionInfo p:last-child":{display:"inline-block"},".cm-tooltip.cm-tooltip-autocomplete > ul > li[aria-selected]":{color:"inherit"},".cm-tooltip.cm-tooltip-autocomplete > ul > li":{padding:"1px 9px",height:"24px",display:"flex",alignItems:"center",borderRadius:"5px"},".cm-tooltip.cm-tooltip-autocomplete > ul > li:not(:first-child)":{marginTop:"2px"},".cm-completionIcon":{fontSize:"11px",opacity:"1",display:"flex"},".cm-completionLabel":{flex:1,overflow:"hidden",textOverflow:"ellipsis"},".cm-completionDetail":{maxWidth:"86px",overflow:"hidden",textOverflow:"ellipsis",textAlign:"right",fontStyle:"initial"},".cm-tooltip-autocomplete":{borderRadius:"8px"},".cm-tooltip-hover":{overflowY:"auto",maxHeight:"360px",wordBreak:"break-word"},".cm-tooltip-hover p":{margin:0},".cm-tooltip-section:not(:first-child)":{"border-top":"solid 0.5px #666666ab"}}))]),lF("tabSize",(e=2)=>[rU.tabSize.of(e),cX.of(" ".repeat(e))]),lF("height",gl),lF("minHeight",go),lF("maxHeight",ga),lF("scrollBeyondLastLine",e=>{let n;return e?[a$({above:!1,updateOnDocViewUpdate:!0,class:"cm-empty-marker-layer",update:e=>e.state.doc.lines!==e.startState.doc.lines,markers:e=>[new dB(e.state.doc.lines,e.contentHeight,n)]}),aO.theme({"& .cm-empty-marker-layer":{height:"100%"}})]:[]}),lF("uri",e=>Ol.of(e)),lF("theme",e=>_Z.get(e)??[]),lF("languageId",e=>[Oh.of(e),kt.getExtension(e)]),lF("transformer",e=>Oa.of(e)),lF("overlayScrollbar",(e=!0)=>{let n;return e?[sG.fromClass(class{instance;constructor(e){let r=e.state.facet(aO.darkTheme);this.instance=y3({target:e.scrollDOM,elements:{viewport:e.scrollDOM,padding:e.dom.querySelector(".cm-gutters")}},{overflow:{y:"scroll",x:"scroll"},scrollbars:{theme:y6(r),visibility:"auto",autoHide:"scroll",autoHideDelay:(null==n?void 0:n.autoHideDelay)??1500,dragScroll:!0,clickScroll:!0,pointers:["mouse","touch","pen"]}}),this.instance.elements().scrollbarVertical.handle.addEventListener("mousedown",y9,!1),this.instance.elements().scrollbarHorizontal.handle.addEventListener("mousedown",y9,!1)}update(e){let n=y6(e.view.state.facet(aO.darkTheme));this.instance.options().scrollbars.theme!==n&&this.instance.options({scrollbars:{theme:n}})}destroy(){this.instance.elements().scrollbarVertical.handle.removeEventListener("mousedown",y9,!1),this.instance.elements().scrollbarHorizontal.handle.removeEventListener("mousedown",y9,!1),this.instance.destroy()}})]:[]}),lF("lineNumbersGutter",(e=!0)=>e?function(e={}){return[l$.of(e),lC(),lQ]}({domEventHandlers:{mousedown:(e,n,r)=>(r.preventDefault(),!1)}}):[]),lF("foldGutter",(e=!0)=>e?function(e={}){let n={...ug,...e},r=new um(n,!0),i=new um(n,!1),s=sG.fromClass(class{constructor(e){this.from=e.viewport.from,this.markers=this.buildMarkers(e)}update(e){(e.docChanged||e.viewportChanged||e.startState.facet(cZ)!=e.state.facet(cZ)||e.startState.field(ur,!1)!=e.state.field(ur,!1)||c$(e.startState)!=c$(e.state)||n.foldingChanged(e))&&(this.markers=this.buildMarkers(e.view))}buildMarkers(e){let n=new r1;for(let s of e.viewportLineBlocks){let o=us(e.state,s.from,s.to)?i:c7(e.state,s.from,s.to)?r:null;o&&n.add(s.from,s.from,o)}return n.finish()}}),{domEventHandlers:o}=n;return[s,l_({class:"cm-foldGutter",markers(e){var n;return(null==(n=e.plugin(s))?void 0:n.markers)||r0.empty},initialSpacer:()=>new um(n,!1),domEventHandlers:{...o,click:(e,n,r)=>{if(o.click&&o.click(e,n,r))return!0;let i=us(e.state,n.from,n.to);if(i)return e.dispatch({effects:ut.of(i)}),!0;let s=c7(e.state,n.from,n.to);return!!s&&(e.dispatch({effects:ue.of(s)}),!0)}}}),uu()]}({markerDOM(e){let n=document.createElement("div");return n.innerHTML=e?'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentColor" fill-rule="evenodd" d="m7.976 10.072l4.357-4.357l.62.618L8.284 11h-.618L3 6.333l.619-.618z" clip-rule="evenodd"/></svg>':'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentColor" fill-rule="evenodd" d="M10.072 8.024L5.715 3.667l.618-.62L11 7.716v.618L6.333 13l-.618-.619z" clip-rule="evenodd"/></svg>',n},domEventHandlers:{mousedown:(e,n,r)=>(r.preventDefault(),!1)}}):[]),lF("colorizeBrackets",(e=!0)=>e?dX:[]),lZ("validate",({view:e})=>()=>{e.dispatch({userEvent:_U})})];_Z.register("_light",_q),_Z.register("_dark",_W);let ks=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],ko=new ds({start:!1,shift:(e,n)=>5==n||6==n||319==n?e:320==n,strict:!1}),ka=new u5((e,n)=>{let{next:r}=e;(125==r||-1==r||n.context)&&e.acceptToken(317)},{contextual:!0,fallback:!0}),kl=new u5((e,n)=>{let{next:r}=e,i;!(ks.indexOf(r)>-1)&&(47!=r||47!=(i=e.peek(1))&&42!=i)&&(125==r||59==r||-1==r||n.context||e.acceptToken(315))},{contextual:!0}),kh=new u5((e,n)=>{91!=e.next||n.context||e.acceptToken(316)},{contextual:!0}),kc=new u5((e,n)=>{let{next:r}=e;if(43==r||45==r){if(e.advance(),r==e.next){e.advance();let r=!n.context&&n.canShift(1);e.acceptToken(r?1:2)}}else 63==r&&46==e.peek(1)&&(e.advance(),e.advance(),(e.next<48||e.next>57)&&e.acceptToken(3))},{contextual:!0});function ku(e,n){return e>=65&&e<=90||e>=97&&e<=122||95==e||e>=192||!n&&e>=48&&e<=57}let kd=new u5((e,n)=>{if(60!=e.next||!n.dialectEnabled(0)||(e.advance(),47==e.next))return;let r=0;for(;ks.indexOf(e.next)>-1;)e.advance(),r++;if(ku(e.next,!0)){for(e.advance(),r++;ku(e.next,!1);)e.advance(),r++;for(;ks.indexOf(e.next)>-1;)e.advance(),r++;if(44==e.next)return;for(let n=0;;n++){if(7==n){if(!ku(e.next,!0))return;break}if(e.next!="extends".charCodeAt(n))break;e.advance(),r++}}e.acceptToken(4,-r)}),kp=cl({"get set async static":cT.modifier,"for while do if else switch try catch finally return throw break continue default case":cT.controlKeyword,"in of await yield void typeof delete instanceof as satisfies":cT.operatorKeyword,"let var const using function class extends":cT.definitionKeyword,"import export from":cT.moduleKeyword,"with debugger new":cT.keyword,TemplateString:cT.special(cT.string),super:cT.atom,BooleanLiteral:cT.bool,this:cT.self,null:cT.null,Star:cT.modifier,VariableName:cT.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":cT.function(cT.variableName),VariableDefinition:cT.definition(cT.variableName),Label:cT.labelName,PropertyName:cT.propertyName,PrivatePropertyName:cT.special(cT.propertyName),"CallExpression/MemberExpression/PropertyName":cT.function(cT.propertyName),"FunctionDeclaration/VariableDefinition":cT.function(cT.definition(cT.variableName)),"ClassDeclaration/VariableDefinition":cT.definition(cT.className),"NewExpression/VariableName":cT.className,PropertyDefinition:cT.definition(cT.propertyName),PrivatePropertyDefinition:cT.definition(cT.special(cT.propertyName)),UpdateOp:cT.updateOperator,"LineComment Hashbang":cT.lineComment,BlockComment:cT.blockComment,Number:cT.number,String:cT.string,Escape:cT.escape,ArithOp:cT.arithmeticOperator,LogicOp:cT.logicOperator,BitOp:cT.bitwiseOperator,CompareOp:cT.compareOperator,RegExp:cT.regexp,Equals:cT.definitionOperator,Arrow:cT.function(cT.punctuation),": Spread":cT.punctuation,"( )":cT.paren,"[ ]":cT.squareBracket,"{ }":cT.brace,"InterpolationStart InterpolationEnd":cT.special(cT.brace),".":cT.derefOperator,", ;":cT.separator,"@":cT.meta,TypeName:cT.typeName,TypeDefinition:cT.definition(cT.typeName),"type enum interface implements namespace module declare":cT.definitionKeyword,"abstract global Privacy readonly override":cT.modifier,"is keyof unique infer asserts":cT.operatorKeyword,JSXAttributeValue:cT.attributeValue,JSXText:cT.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":cT.angleBracket,"JSXIdentifier JSXNameSpacedName":cT.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":cT.attributeName,"JSXBuiltin/JSXIdentifier":cT.standard(cT.tagName)}),kf={__proto__:null,export:20,as:25,from:33,default:36,async:41,function:42,in:52,out:55,const:56,extends:60,this:64,true:72,false:72,null:84,void:88,typeof:92,super:108,new:142,delete:154,yield:163,await:167,class:172,public:235,private:235,protected:235,readonly:237,instanceof:256,satisfies:259,import:292,keyof:349,unique:353,infer:359,asserts:395,is:397,abstract:417,implements:419,type:421,let:424,var:426,using:429,interface:435,enum:439,namespace:445,module:447,declare:451,global:455,for:474,of:483,while:486,with:490,do:494,if:498,else:500,switch:504,case:510,try:516,catch:520,finally:524,return:528,throw:532,break:536,continue:540,debugger:544},kg={__proto__:null,async:129,get:131,set:133,declare:195,public:197,private:197,protected:197,static:199,abstract:201,override:203,readonly:209,accessor:211,new:401},km={__proto__:null,"<":193},ky=da.deserialize({version:14,states:"$EOQ%TQlOOO%[QlOOO'_QpOOP(lO`OOO*zQ!0MxO'#CiO+RO#tO'#CjO+aO&jO'#CjO+oO#@ItO'#DaO.QQlO'#DgO.bQlO'#DrO%[QlO'#DzO0fQlO'#ESOOQ!0Lf'#E['#E[O1PQ`O'#EXOOQO'#Ep'#EpOOQO'#Ik'#IkO1XQ`O'#GsO1dQ`O'#EoO1iQ`O'#EoO3hQ!0MxO'#JqO6[Q!0MxO'#JrO6uQ`O'#F]O6zQ,UO'#FtOOQ!0Lf'#Ff'#FfO7VO7dO'#FfO7eQMhO'#F|O9[Q`O'#F{OOQ!0Lf'#Jr'#JrOOQ!0Lb'#Jq'#JqO9aQ`O'#GwOOQ['#K^'#K^O9lQ`O'#IXO9qQ!0LrO'#IYOOQ['#J_'#J_OOQ['#I^'#I^Q`QlOOQ`QlOOO9yQ!L^O'#DvO:QQlO'#EOO:XQlO'#EQO9gQ`O'#GsO:`QMhO'#CoO:nQ`O'#EnO:yQ`O'#EyO;OQMhO'#FeO;mQ`O'#GsOOQO'#K_'#K_O;rQ`O'#K_O<QQ`O'#G{O<QQ`O'#G|O<QQ`O'#HOO9gQ`O'#HRO<wQ`O'#HUO>`Q`O'#CeO>pQ`O'#HbO>xQ`O'#HhO>xQ`O'#HjO`QlO'#HlO>xQ`O'#HnO>xQ`O'#HqO>}Q`O'#HwO?SQ!0LsO'#H}O%[QlO'#IPO?_Q!0LsO'#IRO?jQ!0LsO'#ITO9qQ!0LrO'#IVO?uQ!0MxO'#CiO@wQpO'#DlQOQ`OOO%[QlO'#EQOA_Q`O'#ETO:`QMhO'#EnOAjQ`O'#EnOAuQ!bO'#FeOOQ['#Cg'#CgOOQ!0Lb'#Dq'#DqOOQ!0Lb'#Ju'#JuO%[QlO'#JuOOQO'#Jx'#JxOOQO'#Ig'#IgOBuQpO'#EgOOQ!0Lb'#Ef'#EfOOQ!0Lb'#J|'#J|OCqQ!0MSO'#EgOC{QpO'#EWOOQO'#Jw'#JwODaQpO'#JxOEnQpO'#EWOC{QpO'#EgPE{O&2DjO'#CbPOOO)CD|)CD|OOOO'#I_'#I_OFWO#tO,59UOOQ!0Lh,59U,59UOOOO'#I`'#I`OFfO&jO,59UOFtQ!L^O'#DcOOOO'#Ib'#IbOF{O#@ItO,59{OOQ!0Lf,59{,59{OGZQlO'#IcOGnQ`O'#JsOImQ!fO'#JsO+}QlO'#JsOItQ`O,5:ROJ[Q`O'#EpOJiQ`O'#KSOJtQ`O'#KROJtQ`O'#KROJ|Q`O,5;^OKRQ`O'#KQOOQ!0Ln,5:^,5:^OKYQlO,5:^OMWQ!0MxO,5:fOMwQ`O,5:nONbQ!0LrO'#KPONiQ`O'#KOO9aQ`O'#KOON}Q`O'#KOO! VQ`O,5;]O! [Q`O'#KOO!#aQ!fO'#JrOOQ!0Lh'#Ci'#CiO%[QlO'#ESO!$PQ!fO,5:sOOQS'#Jy'#JyOOQO-E<i-E<iO9gQ`O,5=_O!$gQ`O,5=_O!$lQlO,5;ZO!&oQMhO'#EkO!(YQ`O,5;ZO!(_QlO'#DyO!(iQpO,5;dO!(qQpO,5;dO%[QlO,5;dOOQ['#FT'#FTOOQ['#FV'#FVO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eOOQ['#FZ'#FZO!)PQlO,5;tOOQ!0Lf,5;y,5;yOOQ!0Lf,5;z,5;zOOQ!0Lf,5;|,5;|O%[QlO'#IoO!+SQ!0LrO,5<iO%[QlO,5;eO!&oQMhO,5;eO!+qQMhO,5;eO!-cQMhO'#E^O%[QlO,5;wOOQ!0Lf,5;{,5;{O!-jQ,UO'#FjO!.gQ,UO'#KWO!.RQ,UO'#KWO!.nQ,UO'#KWOOQO'#KW'#KWO!/SQ,UO,5<SOOOW,5<`,5<`O!/eQlO'#FvOOOW'#In'#InO7VO7dO,5<QO!/lQ,UO'#FxOOQ!0Lf,5<Q,5<QO!0]Q$IUO'#CyOOQ!0Lh'#C}'#C}O!0pO#@ItO'#DRO!1^QMjO,5<eO!1eQ`O,5<hO!3QQ(CWO'#GXO!3_Q`O'#GYO!3dQ`O'#GYO!5SQ(CWO'#G^O!6XQpO'#GbOOQO'#Gn'#GnO!+xQMhO'#GmOOQO'#Gp'#GpO!+xQMhO'#GoO!6zQ$IUO'#JkOOQ!0Lh'#Jk'#JkO!7UQ`O'#JjO!7dQ`O'#JiO!7lQ`O'#CuOOQ!0Lh'#C{'#C{O!7}Q`O'#C}OOQ!0Lh'#DV'#DVOOQ!0Lh'#DX'#DXO1SQ`O'#DZO!+xQMhO'#GPO!+xQMhO'#GRO!8SQ`O'#GTO!8XQ`O'#GUO!3dQ`O'#G[O!+xQMhO'#GaO<QQ`O'#JjO!8^Q`O'#EqO!8{Q`O,5<gOOQ!0Lb'#Cr'#CrO!9TQ`O'#ErO!9}QpO'#EsOOQ!0Lb'#KQ'#KQO!:UQ!0LrO'#K`O9qQ!0LrO,5=cO`QlO,5>sOOQ['#Jg'#JgOOQ[,5>t,5>tOOQ[-E<[-E<[O!<TQ!0MxO,5:bO!9xQpO,5:`O!>nQ!0MxO,5:jO%[QlO,5:jO!AUQ!0MxO,5:lOOQO,5@y,5@yO!AuQMhO,5=_O!BTQ!0LrO'#JhO9[Q`O'#JhO!BfQ!0LrO,59ZO!BqQpO,59ZO!ByQMhO,59ZO:`QMhO,59ZO!CUQ`O,5;ZO!C^Q`O'#HaO!CrQ`O'#KcO%[QlO,5;}O!9xQpO,5<PO!CzQ`O,5=zO!DPQ`O,5=zO!DUQ`O,5=zO9qQ!0LrO,5=zO<QQ`O,5=jOOQO'#Cy'#CyO!DdQpO,5=gO!DlQMhO,5=hO!DwQ`O,5=jO!D|Q!bO,5=mO!EUQ`O'#K_O>}Q`O'#HWO9gQ`O'#HYO!EZQ`O'#HYO:`QMhO'#H[O!E`Q`O'#H[OOQ[,5=p,5=pO!EeQ`O'#H]O!EvQ`O'#CoO!E{Q`O,59PO!FVQ`O,59PO!H[QlO,59POOQ[,59P,59PO!HlQ!0LrO,59PO%[QlO,59PO!JwQlO'#HdOOQ['#He'#HeOOQ['#Hf'#HfO`QlO,5=|O!K_Q`O,5=|O`QlO,5>SO`QlO,5>UO!KdQ`O,5>WO`QlO,5>YO!KiQ`O,5>]O!KnQlO,5>cOOQ[,5>i,5>iO%[QlO,5>iO9qQ!0LrO,5>kOOQ[,5>m,5>mO# xQ`O,5>mOOQ[,5>o,5>oO# xQ`O,5>oOOQ[,5>q,5>qO#!fQpO'#D_O%[QlO'#JuO##XQpO'#JuO##cQpO'#DmO##tQpO'#DmO#&VQlO'#DmO#&^Q`O'#JtO#&fQ`O,5:WO#&kQ`O'#EtO#&yQ`O'#KTO#'RQ`O,5;_O#'WQpO'#DmO#'eQpO'#EVOOQ!0Lf,5:o,5:oO%[QlO,5:oO#'lQ`O,5:oO>}Q`O,5;YO!BqQpO,5;YO!ByQMhO,5;YO:`QMhO,5;YO#'tQ`O,5@aO#'yQ07dO,5:sOOQO-E<e-E<eO#)PQ!0MSO,5;ROC{QpO,5:rO#)ZQpO,5:rOC{QpO,5;RO!BfQ!0LrO,5:rOOQ!0Lb'#Ej'#EjOOQO,5;R,5;RO%[QlO,5;RO#)hQ!0LrO,5;RO#)sQ!0LrO,5;RO!BqQpO,5:rOOQO,5;X,5;XO#*RQ!0LrO,5;RPOOO'#I]'#I]P#*gO&2DjO,58|POOO,58|,58|OOOO-E<]-E<]OOQ!0Lh1G.p1G.pOOOO-E<^-E<^OOOO,59},59}O#*rQ!bO,59}OOOO-E<`-E<`OOQ!0Lf1G/g1G/gO#*wQ!fO,5>}O+}QlO,5>}OOQO,5?T,5?TO#+RQlO'#IcOOQO-E<a-E<aO#+`Q`O,5@_O#+hQ!fO,5@_O#+oQ`O,5@mOOQ!0Lf1G/m1G/mO%[QlO,5@nO#+wQ`O'#IiOOQO-E<g-E<gO#+oQ`O,5@mOOQ!0Lb1G0x1G0xOOQ!0Ln1G/x1G/xOOQ!0Ln1G0Y1G0YO%[QlO,5@kO#,]Q!0LrO,5@kO#,nQ!0LrO,5@kO#,uQ`O,5@jO9aQ`O,5@jO#,}Q`O,5@jO#-]Q`O'#IlO#,uQ`O,5@jOOQ!0Lb1G0w1G0wO!(iQpO,5:uO!(tQpO,5:uOOQS,5:w,5:wO#-}QdO,5:wO#.VQMhO1G2yO9gQ`O1G2yOOQ!0Lf1G0u1G0uO#.eQ!0MxO1G0uO#/jQ!0MvO,5;VOOQ!0Lh'#GW'#GWO#0WQ!0MzO'#JkO!$lQlO1G0uO#2cQ!fO'#JvO%[QlO'#JvO#2mQ`O,5:eOOQ!0Lh'#D_'#D_OOQ!0Lf1G1O1G1OO%[QlO1G1OOOQ!0Lf1G1f1G1fO#2rQ`O1G1OO#5WQ!0MxO1G1PO#5_Q!0MxO1G1PO#7uQ!0MxO1G1PO#7|Q!0MxO1G1PO#:dQ!0MxO1G1PO#<zQ!0MxO1G1PO#=RQ!0MxO1G1PO#=YQ!0MxO1G1PO#?pQ!0MxO1G1PO#?wQ!0MxO1G1PO#BUQ?MtO'#CiO#DPQ?MtO1G1`O#DWQ?MtO'#JrO#DkQ!0MxO,5?ZOOQ!0Lb-E<m-E<mO#FxQ!0MxO1G1PO#GuQ!0MzO1G1POOQ!0Lf1G1P1G1PO#HxQMjO'#J{O#ISQ`O,5:xO#IXQ!0MxO1G1cO#I{Q,UO,5<WO#JTQ,UO,5<XO#J]Q,UO'#FoO#JtQ`O'#FnOOQO'#KX'#KXOOQO'#Im'#ImO#JyQ,UO1G1nOOQ!0Lf1G1n1G1nOOOW1G1y1G1yO#K[Q?MtO'#JqO#KfQ`O,5<bO!)PQlO,5<bOOOW-E<l-E<lOOQ!0Lf1G1l1G1lO#KkQpO'#KWOOQ!0Lf,5<d,5<dO#KsQpO,5<dO#KxQMhO'#DTOOOO'#Ia'#IaO#LPO#@ItO,59mOOQ!0Lh,59m,59mO%[QlO1G2PO!8XQ`O'#IqO#L[Q`O,5<zOOQ!0Lh,5<w,5<wO!+xQMhO'#ItO#LxQMjO,5=XO!+xQMhO'#IvO#MkQMjO,5=ZO!&oQMhO,5=]OOQO1G2S1G2SO#MuQ!dO'#CrO#NYQ(CWO'#ErO$ _QpO'#GbO$ uQ!dO,5<sO$ |Q`O'#KZO9aQ`O'#KZO$![Q`O,5<uO!+xQMhO,5<tO$!aQ`O'#GZO$!rQ`O,5<tO$!wQ!dO'#GWO$#UQ!dO'#K[O$#`Q`O'#K[O!&oQMhO'#K[O$#eQ`O,5<xO$#jQlO'#JuO$#tQpO'#GcO##tQpO'#GcO$$VQ`O'#GgO!3dQ`O'#GkO$$[Q!0LrO'#IsO$$gQpO,5<|OOQ!0Lp,5<|,5<|O$$nQpO'#GcO$${QpO'#GdO$%^QpO'#GdO$%cQMjO,5=XO$%sQMjO,5=ZOOQ!0Lh,5=^,5=^O!+xQMhO,5@UO!+xQMhO,5@UO$&TQ`O'#IxO$&iQ`O,5@TO$&qQ`O,59aOOQ!0Lh,59i,59iO$'hQ$IYO,59uOOQ!0Lh'#Jo'#JoO$(ZQMjO,5<kO$(|QMjO,5<mO@oQ`O,5<oOOQ!0Lh,5<p,5<pO$)WQ`O,5<vO$)]QMjO,5<{O$)mQ`O,5@UO$){Q`O'#KOO!$lQlO1G2RO$*QQ`O1G2RO9aQ`O'#KRO9aQ`O'#EtO%[QlO'#EtO9aQ`O'#IzO$*VQ!0LrO,5@zOOQ[1G2}1G2}OOQ[1G4_1G4_OOQ!0Lf1G/|1G/|OOQ!0Lf1G/z1G/zO$,XQ!0MxO1G0UOOQ[1G2y1G2yO!&oQMhO1G2yO%[QlO1G2yO#.YQ`O1G2yO$.]QMhO'#EkOOQ!0Lb,5@S,5@SO$.jQ!0LrO,5@SOOQ[1G.u1G.uO!BfQ!0LrO1G.uO!BqQpO1G.uO!ByQMhO1G.uO$.{Q`O1G0uO$/QQ`O'#CiO$/]Q`O'#KdO$/eQ`O,5={O$/jQ`O'#KdO$/oQ`O'#KdO$/}Q`O'#JQO$0]Q`O,5@}O$0eQ!fO1G1iOOQ!0Lf1G1k1G1kO9gQ`O1G3fO@oQ`O1G3fO$0lQ`O1G3fO$0qQ`O1G3fOOQ[1G3f1G3fO!DwQ`O1G3UO!&oQMhO1G3RO$0vQ`O1G3ROOQ[1G3S1G3SO!&oQMhO1G3SO$0{Q`O1G3SO$1TQpO'#HQOOQ[1G3U1G3UO!6SQpO'#I|O!D|Q!bO1G3XOOQ[1G3X1G3XOOQ[,5=r,5=rO$1]QMhO,5=tO9gQ`O,5=tO$$VQ`O,5=vO9[Q`O,5=vO!BqQpO,5=vO!ByQMhO,5=vO:`QMhO,5=vO$1kQ`O'#KbO$1vQ`O,5=wOOQ[1G.k1G.kO$1{Q!0LrO1G.kO@oQ`O1G.kO$2WQ`O1G.kO9qQ!0LrO1G.kO$4`Q!fO,5APO$4mQ`O,5APO9aQ`O,5APO$4xQlO,5>OO$5PQ`O,5>OOOQ[1G3h1G3hO`QlO1G3hOOQ[1G3n1G3nOOQ[1G3p1G3pO>xQ`O1G3rO$5UQlO1G3tO$9YQlO'#HsOOQ[1G3w1G3wO$9gQ`O'#HyO>}Q`O'#H{OOQ[1G3}1G3}O$9oQlO1G3}O9qQ!0LrO1G4TOOQ[1G4V1G4VOOQ!0Lb'#G_'#G_O9qQ!0LrO1G4XO9qQ!0LrO1G4ZO$=vQ`O,5@aO!)PQlO,5;`O9aQ`O,5;`O>}Q`O,5:XO!)PQlO,5:XO!BqQpO,5:XO$={Q?MtO,5:XOOQO,5;`,5;`O$>VQpO'#IdO$>mQ`O,5@`OOQ!0Lf1G/r1G/rO$>uQpO'#IjO$?PQ`O,5@oOOQ!0Lb1G0y1G0yO##tQpO,5:XOOQO'#If'#IfO$?XQpO,5:qOOQ!0Ln,5:q,5:qO#'oQ`O1G0ZOOQ!0Lf1G0Z1G0ZO%[QlO1G0ZOOQ!0Lf1G0t1G0tO>}Q`O1G0tO!BqQpO1G0tO!ByQMhO1G0tOOQ!0Lb1G5{1G5{O!BfQ!0LrO1G0^OOQO1G0m1G0mO%[QlO1G0mO$?`Q!0LrO1G0mO$?kQ!0LrO1G0mO!BqQpO1G0^OC{QpO1G0^O$?yQ!0LrO1G0mOOQO1G0^1G0^O$@_Q!0MxO1G0mPOOO-E<Z-E<ZPOOO1G.h1G.hOOOO1G/i1G/iO$@iQ!bO,5<iO$@qQ!fO1G4iOOQO1G4o1G4oO%[QlO,5>}O$@{Q`O1G5yO$ATQ`O1G6XO$A]Q!fO1G6YO9aQ`O,5?TO$AgQ!0MxO1G6VO%[QlO1G6VO$AwQ!0LrO1G6VO$BYQ`O1G6UO$BYQ`O1G6UO9aQ`O1G6UO$BbQ`O,5?WO9aQ`O,5?WOOQO,5?W,5?WO$BvQ`O,5?WO$){Q`O,5?WOOQO-E<j-E<jOOQS1G0a1G0aOOQS1G0c1G0cO#.QQ`O1G0cOOQ[7+(e7+(eO!&oQMhO7+(eO%[QlO7+(eO$CUQ`O7+(eO$CaQMhO7+(eO$CoQ!0MzO,5=XO$EzQ!0MzO,5=ZO$HVQ!0MzO,5=XO$JhQ!0MzO,5=ZO$LyQ!0MzO,59uO% OQ!0MzO,5<kO%#ZQ!0MzO,5<mO%%fQ!0MzO,5<{OOQ!0Lf7+&a7+&aO%'wQ!0MxO7+&aO%(kQlO'#IeO%(xQ`O,5@bO%)QQ!fO,5@bOOQ!0Lf1G0P1G0PO%)[Q`O7+&jOOQ!0Lf7+&j7+&jO%)aQ?MtO,5:fO%[QlO7+&zO%)kQ?MtO,5:bO%)xQ?MtO,5:jO%*SQ?MtO,5:lO%*^QMhO'#IhO%*hQ`O,5@gOOQ!0Lh1G0d1G0dOOQO1G1r1G1rOOQO1G1s1G1sO%*pQ!jO,5<ZO!)PQlO,5<YOOQO-E<k-E<kOOQ!0Lf7+'Y7+'YOOOW7+'e7+'eOOOW1G1|1G1|O%*{Q`O1G1|OOQ!0Lf1G2O1G2OOOOO,59o,59oO%+QQ!dO,59oOOOO-E<_-E<_OOQ!0Lh1G/X1G/XO%+XQ!0MxO7+'kOOQ!0Lh,5?],5?]O%+{QMhO1G2fP%,SQ`O'#IqPOQ!0Lh-E<o-E<oO%,pQMjO,5?`OOQ!0Lh-E<r-E<rO%-cQMjO,5?bOOQ!0Lh-E<t-E<tO%-mQ!dO1G2wO%-tQ!dO'#CrO%.[QMhO'#KRO$#jQlO'#JuOOQ!0Lh1G2_1G2_O%.cQ`O'#IpO%.wQ`O,5@uO%.wQ`O,5@uO%/PQ`O,5@uO%/[Q`O,5@uOOQO1G2a1G2aO%/jQMjO1G2`O!+xQMhO1G2`O%/zQ(CWO'#IrO%0XQ`O,5@vO!&oQMhO,5@vO%0aQ!dO,5@vOOQ!0Lh1G2d1G2dO%2qQ!fO'#CiO%2{Q`O,5=POOQ!0Lb,5<},5<}O%3TQpO,5<}OOQ!0Lb,5=O,5=OOClQ`O,5<}O%3`QpO,5<}OOQ!0Lb,5=R,5=RO$){Q`O,5=VOOQO,5?_,5?_OOQO-E<q-E<qOOQ!0Lp1G2h1G2hO##tQpO,5<}O$#jQlO,5=PO%3nQ`O,5=OO%3yQpO,5=OO!+xQMhO'#ItO%4sQMjO1G2sO!+xQMhO'#IvO%5fQMjO1G2uO%5pQMjO1G5pO%5zQMjO1G5pOOQO,5?d,5?dOOQO-E<v-E<vOOQO1G.{1G.{O!9xQpO,59wO%[QlO,59wOOQ!0Lh,5<j,5<jO%6XQ`O1G2ZO!+xQMhO1G2bO!+xQMhO1G5pO!+xQMhO1G5pO%6^Q!0MxO7+'mOOQ!0Lf7+'m7+'mO!$lQlO7+'mO%7QQ`O,5;`OOQ!0Lb,5?f,5?fOOQ!0Lb-E<x-E<xO%7VQ!dO'#K]O#'oQ`O7+(eO4UQ!fO7+(eO$CXQ`O7+(eO%7aQ!0MvO'#CiO%7tQ!0MvO,5=SO%8fQ`O,5=SO%8nQ`O,5=SOOQ!0Lb1G5n1G5nOOQ[7+$a7+$aO!BfQ!0LrO7+$aO!BqQpO7+$aO!$lQlO7+&aO%8sQ`O'#JPO%9[Q`O,5AOOOQO1G3g1G3gO9gQ`O,5AOO%9[Q`O,5AOO%9dQ`O,5AOOOQO,5?l,5?lOOQO-E=O-E=OOOQ!0Lf7+'T7+'TO%9iQ`O7+)QO9qQ!0LrO7+)QO9gQ`O7+)QO@oQ`O7+)QOOQ[7+(p7+(pO%9nQ!0MvO7+(mO!&oQMhO7+(mO!DrQ`O7+(nOOQ[7+(n7+(nO!&oQMhO7+(nO%9xQ`O'#KaO%:TQ`O,5=lOOQO,5?h,5?hOOQO-E<z-E<zOOQ[7+(s7+(sO%;gQpO'#HZOOQ[1G3`1G3`O!&oQMhO1G3`O%[QlO1G3`O%;nQ`O1G3`O%;yQMhO1G3`O9qQ!0LrO1G3bO$$VQ`O1G3bO9[Q`O1G3bO!BqQpO1G3bO!ByQMhO1G3bO%<XQ`O'#JOO%<mQ`O,5@|O%<uQpO,5@|OOQ!0Lb1G3c1G3cOOQ[7+$V7+$VO@oQ`O7+$VO9qQ!0LrO7+$VO%=QQ`O7+$VO%[QlO1G6kO%[QlO1G6lO%=VQ!0LrO1G6kO%=aQlO1G3jO%=hQ`O1G3jO%=mQlO1G3jOOQ[7+)S7+)SO9qQ!0LrO7+)^O`QlO7+)`OOQ['#Kg'#KgOOQ['#JR'#JRO%=tQlO,5>_OOQ[,5>_,5>_O%[QlO'#HtO%>RQ`O'#HvOOQ[,5>e,5>eO9aQ`O,5>eOOQ[,5>g,5>gOOQ[7+)i7+)iOOQ[7+)o7+)oOOQ[7+)s7+)sOOQ[7+)u7+)uO%>WQpO1G5{O%>rQ?MtO1G0zO%>|Q`O1G0zOOQO1G/s1G/sO%?XQ?MtO1G/sO>}Q`O1G/sO!)PQlO'#DmOOQO,5?O,5?OOOQO-E<b-E<bOOQO,5?U,5?UOOQO-E<h-E<hO!BqQpO1G/sOOQO-E<d-E<dOOQ!0Ln1G0]1G0]OOQ!0Lf7+%u7+%uO#'oQ`O7+%uOOQ!0Lf7+&`7+&`O>}Q`O7+&`O!BqQpO7+&`OOQO7+%x7+%xO$@_Q!0MxO7+&XOOQO7+&X7+&XO%[QlO7+&XO%?cQ!0LrO7+&XO!BfQ!0LrO7+%xO!BqQpO7+%xO%?nQ!0LrO7+&XO%?|Q!0MxO7++qO%[QlO7++qO%@^Q`O7++pO%@^Q`O7++pOOQO1G4r1G4rO9aQ`O1G4rO%@fQ`O1G4rOOQS7+%}7+%}O#'oQ`O<<LPO4UQ!fO<<LPO%@tQ`O<<LPOOQ[<<LP<<LPO!&oQMhO<<LPO%[QlO<<LPO%@|Q`O<<LPO%AXQ!0MzO,5?`O%CdQ!0MzO,5?bO%EoQ!0MzO1G2`O%HQQ!0MzO1G2sO%J]Q!0MzO1G2uO%LhQ!fO,5?PO%[QlO,5?POOQO-E<c-E<cO%LrQ`O1G5|OOQ!0Lf<<JU<<JUO%LzQ?MtO1G0uO& RQ?MtO1G1PO& YQ?MtO1G1PO&#ZQ?MtO1G1PO&#bQ?MtO1G1PO&%cQ?MtO1G1PO&'dQ?MtO1G1PO&'kQ?MtO1G1PO&'rQ?MtO1G1PO&)sQ?MtO1G1PO&)zQ?MtO1G1PO&*RQ!0MxO<<JfO&+yQ?MtO1G1PO&,vQ?MvO1G1PO&-yQ?MvO'#JkO&0PQ?MtO1G1cO&0^Q?MtO1G0UO&0hQMjO,5?SOOQO-E<f-E<fO!)PQlO'#FqOOQO'#KY'#KYOOQO1G1u1G1uO&0rQ`O1G1tO&0wQ?MtO,5?ZOOOW7+'h7+'hOOOO1G/Z1G/ZO&1RQ!dO1G4wOOQ!0Lh7+(Q7+(QP!&oQMhO,5?]O!+xQMhO7+(cO&1YQ`O,5?[O9aQ`O,5?[OOQO-E<n-E<nO&1hQ`O1G6aO&1hQ`O1G6aO&1pQ`O1G6aO&1{QMjO7+'zO&2]Q!dO,5?^O&2gQ`O,5?^O!&oQMhO,5?^OOQO-E<p-E<pO&2lQ!dO1G6bO&2vQ`O1G6bO&3OQ`O1G2kO!&oQMhO1G2kOOQ!0Lb1G2i1G2iOOQ!0Lb1G2j1G2jO%3TQpO1G2iO!BqQpO1G2iOClQ`O1G2iOOQ!0Lb1G2q1G2qO&3TQpO1G2iO&3cQ`O1G2kO$){Q`O1G2jOClQ`O1G2jO$#jQlO1G2kO&3kQ`O1G2jO&4_QMjO,5?`OOQ!0Lh-E<s-E<sO&5QQMjO,5?bOOQ!0Lh-E<u-E<uO!+xQMhO7++[OOQ!0Lh1G/c1G/cO&5[Q`O1G/cOOQ!0Lh7+'u7+'uO&5aQMjO7+'|O&5qQMjO7++[O&5{QMjO7++[O&6YQ!0MxO<<KXOOQ!0Lf<<KX<<KXO&6|Q`O1G0zO!&oQMhO'#IyO&7RQ`O,5@wO&9TQ!fO<<LPO!&oQMhO1G2nO&9[Q!0LrO1G2nOOQ[<<G{<<G{O!BfQ!0LrO<<G{O&9mQ!0MxO<<I{OOQ!0Lf<<I{<<I{OOQO,5?k,5?kO&:aQ`O,5?kO&:fQ`O,5?kOOQO-E<}-E<}O&:tQ`O1G6jO&:tQ`O1G6jO9gQ`O1G6jO@oQ`O<<LlOOQ[<<Ll<<LlO&:|Q`O<<LlO9qQ!0LrO<<LlOOQ[<<LX<<LXO%9nQ!0MvO<<LXOOQ[<<LY<<LYO!DrQ`O<<LYO&;RQpO'#I{O&;^Q`O,5@{O!)PQlO,5@{OOQ[1G3W1G3WOOQO'#I}'#I}O9qQ!0LrO'#I}O&;fQpO,5=uOOQ[,5=u,5=uO&;mQpO'#EgO&;tQpO'#GeO&;yQ`O7+(zO&<OQ`O7+(zOOQ[7+(z7+(zO!&oQMhO7+(zO%[QlO7+(zO&<WQ`O7+(zOOQ[7+(|7+(|O9qQ!0LrO7+(|O$$VQ`O7+(|O9[Q`O7+(|O!BqQpO7+(|O&<cQ`O,5?jOOQO-E<|-E<|OOQO'#H^'#H^O&<nQ`O1G6hO9qQ!0LrO<<GqOOQ[<<Gq<<GqO@oQ`O<<GqO&<vQ`O7+,VO&<{Q`O7+,WO%[QlO7+,VO%[QlO7+,WOOQ[7+)U7+)UO&=QQ`O7+)UO&=VQlO7+)UO&=^Q`O7+)UOOQ[<<Lx<<LxOOQ[<<Lz<<LzOOQ[-E=P-E=POOQ[1G3y1G3yO&=cQ`O,5>`OOQ[,5>b,5>bO&=hQ`O1G4PO9aQ`O7+&fO!)PQlO7+&fOOQO7+%_7+%_O&=mQ?MtO1G6YO>}Q`O7+%_OOQ!0Lf<<Ia<<IaOOQ!0Lf<<Iz<<IzO>}Q`O<<IzOOQO<<Is<<IsO$@_Q!0MxO<<IsO%[QlO<<IsOOQO<<Id<<IdO!BfQ!0LrO<<IdO&=wQ!0LrO<<IsO&>SQ!0MxO<= ]O&>dQ`O<= [OOQO7+*^7+*^O9aQ`O7+*^OOQ[ANAkANAkO&>lQ!fOANAkO!&oQMhOANAkO#'oQ`OANAkO4UQ!fOANAkO&>sQ`OANAkO%[QlOANAkO&>{Q!0MzO7+'zO&A^Q!0MzO,5?`O&CiQ!0MzO,5?bO&EtQ!0MzO7+'|O&HVQ!fO1G4kO&HaQ?MtO7+&aO&JeQ?MvO,5=XO&LlQ?MvO,5=ZO&L|Q?MvO,5=XO&M^Q?MvO,5=ZO&MnQ?MvO,59uO' tQ?MvO,5<kO'#wQ?MvO,5<mO'&]Q?MvO,5<{O'(RQ?MtO7+'kO'(`Q?MtO7+'mO'(mQ`O,5<]OOQO7+'`7+'`OOQ!0Lh7+*c7+*cO'(rQMjO<<K}OOQO1G4v1G4vO'(yQ`O1G4vO')UQ`O1G4vO')dQ`O7++{O')dQ`O7++{O!&oQMhO1G4xO')lQ!dO1G4xO')vQ`O7++|O'*OQ`O7+(VO'*ZQ!dO7+(VOOQ!0Lb7+(T7+(TOOQ!0Lb7+(U7+(UO!BqQpO7+(TOClQ`O7+(TO'*eQ`O7+(VO!&oQMhO7+(VO$){Q`O7+(UO'*jQ`O7+(VOClQ`O7+(UO'*rQMjO<<NvOOQ!0Lh7+$}7+$}O!+xQMhO<<NvO'*|Q!dO,5?eOOQO-E<w-E<wO'+WQ!0MvO7+(YO!&oQMhO7+(YOOQ[AN=gAN=gO9gQ`O1G5VOOQO1G5V1G5VO'+hQ`O1G5VO'+mQ`O7+,UO'+mQ`O7+,UO9qQ!0LrOANBWO@oQ`OANBWOOQ[ANBWANBWOOQ[ANAsANAsOOQ[ANAtANAtO'+uQ`O,5?gOOQO-E<y-E<yO',QQ?MtO1G6gOOQO,5?i,5?iOOQO-E<{-E<{OOQ[1G3a1G3aO',[Q`O,5=POOQ[<<Lf<<LfO!&oQMhO<<LfO&;yQ`O<<LfO',aQ`O<<LfO%[QlO<<LfOOQ[<<Lh<<LhO9qQ!0LrO<<LhO$$VQ`O<<LhO9[Q`O<<LhO',iQpO1G5UO',tQ`O7+,SOOQ[AN=]AN=]O9qQ!0LrOAN=]OOQ[<= q<= qOOQ[<= r<= rO',|Q`O<= qO'-RQ`O<= rOOQ[<<Lp<<LpO'-WQ`O<<LpO'-]QlO<<LpOOQ[1G3z1G3zO>}Q`O7+)kO'-dQ`O<<JQO'-oQ?MtO<<JQOOQO<<Hy<<HyOOQ!0LfAN?fAN?fOOQOAN?_AN?_O$@_Q!0MxOAN?_OOQOAN?OAN?OO%[QlOAN?_OOQO<<Mx<<MxOOQ[G27VG27VO!&oQMhOG27VO#'oQ`OG27VO'-yQ!fOG27VO4UQ!fOG27VO'.QQ`OG27VO'.YQ?MtO<<JfO'.gQ?MvO1G2`O'0]Q?MvO,5?`O'2`Q?MvO,5?bO'4cQ?MvO1G2sO'6fQ?MvO1G2uO'8iQ?MtO<<KXO'8vQ?MtO<<I{OOQO1G1w1G1wO!+xQMhOANAiOOQO7+*b7+*bO'9TQ`O7+*bO'9`Q`O<= gO'9hQ!dO7+*dOOQ!0Lb<<Kq<<KqO$){Q`O<<KqOClQ`O<<KqO'9rQ`O<<KqO!&oQMhO<<KqOOQ!0Lb<<Ko<<KoO!BqQpO<<KoO'9}Q!dO<<KqOOQ!0Lb<<Kp<<KpO':XQ`O<<KqO!&oQMhO<<KqO$){Q`O<<KpO':^QMjOANDbO':hQ!0MvO<<KtOOQO7+*q7+*qO9gQ`O7+*qO':xQ`O<= pOOQ[G27rG27rO9qQ!0LrOG27rO!)PQlO1G5RO';QQ`O7+,RO';YQ`O1G2kO&;yQ`OANBQOOQ[ANBQANBQO!&oQMhOANBQO';_Q`OANBQOOQ[ANBSANBSO9qQ!0LrOANBSO$$VQ`OANBSOOQO'#H_'#H_OOQO7+*p7+*pOOQ[G22wG22wOOQ[ANE]ANE]OOQ[ANE^ANE^OOQ[ANB[ANB[O';gQ`OANB[OOQ[<<MV<<MVO!)PQlOAN?lOOQOG24yG24yO$@_Q!0MxOG24yO#'oQ`OLD,qOOQ[LD,qLD,qO!&oQMhOLD,qO';lQ!fOLD,qO';sQ?MvO7+'zO'=iQ?MvO,5?`O'?lQ?MvO,5?bO'AoQ?MvO7+'|O'CeQMjOG27TOOQO<<M|<<M|OOQ!0LbANA]ANA]O$){Q`OANA]OClQ`OANA]O'CuQ!dOANA]OOQ!0LbANAZANAZO'C|Q`OANA]O!&oQMhOANA]O'DXQ!dOANA]OOQ!0LbANA[ANA[OOQO<<N]<<N]OOQ[LD-^LD-^O'DcQ?MtO7+*mOOQO'#Gf'#GfOOQ[G27lG27lO&;yQ`OG27lO!&oQMhOG27lOOQ[G27nG27nO9qQ!0LrOG27nOOQ[G27vG27vO'DmQ?MtOG25WOOQOLD*eLD*eOOQ[!$(!]!$(!]O#'oQ`O!$(!]O!&oQMhO!$(!]O'DwQ!0MzOG27TOOQ!0LbG26wG26wO$){Q`OG26wO'GYQ`OG26wOClQ`OG26wO'GeQ!dOG26wO!&oQMhOG26wOOQ[LD-WLD-WO&;yQ`OLD-WOOQ[LD-YLD-YOOQ[!)9Ew!)9EwO#'oQ`O!)9EwOOQ!0LbLD,cLD,cO$){Q`OLD,cOClQ`OLD,cO'GlQ`OLD,cO'GwQ!dOLD,cOOQ[!$(!r!$(!rOOQ[!.K;c!.K;cO'HOQ?MvOG27TOOQ!0Lb!$( }!$( }O$){Q`O!$( }OClQ`O!$( }O'ItQ`O!$( }OOQ!0Lb!)9Ei!)9EiO$){Q`O!)9EiOClQ`O!)9EiOOQ!0Lb!.K;T!.K;TO$){Q`O!.K;TOOQ!0Lb!4/0o!4/0oO!)PQlO'#DzO1PQ`O'#EXO'JPQ!fO'#JqO'JWQ!L^O'#DvO'J_QlO'#EOO'JfQ!fO'#CiO'L|Q!fO'#CiO!)PQlO'#EQO'M^QlO,5;ZO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO'#IoO( aQ`O,5<iO!)PQlO,5;eO( iQMhO,5;eO(#SQMhO,5;eO!)PQlO,5;wO!&oQMhO'#GmO( iQMhO'#GmO!&oQMhO'#GoO( iQMhO'#GoO1SQ`O'#DZO1SQ`O'#DZO!&oQMhO'#GPO( iQMhO'#GPO!&oQMhO'#GRO( iQMhO'#GRO!&oQMhO'#GaO( iQMhO'#GaO!)PQlO,5:jO(#ZQpO'#D_O(#eQpO'#JuO!)PQlO,5@nO'M^QlO1G0uO(#oQ?MtO'#CiO!)PQlO1G2PO!&oQMhO'#ItO( iQMhO'#ItO!&oQMhO'#IvO( iQMhO'#IvO(#yQ!dO'#CrO!&oQMhO,5<tO( iQMhO,5<tO'M^QlO1G2RO!)PQlO7+&zO!&oQMhO1G2`O( iQMhO1G2`O!&oQMhO'#ItO( iQMhO'#ItO!&oQMhO'#IvO( iQMhO'#IvO!&oQMhO1G2bO( iQMhO1G2bO'M^QlO7+'mO'M^QlO7+&aO!&oQMhOANAiO( iQMhOANAiO($^Q`O'#EoO($cQ`O'#EoO($kQ`O'#F]O($pQ`O'#EyO($uQ`O'#KSO(%QQ`O'#KQO(%]Q`O,5;ZO(%bQMjO,5<eO(%iQ`O'#GYO(%nQ`O'#GYO(%sQ`O,5<gO(%{Q`O,5;ZO(&TQ?MtO1G1`O(&[Q`O,5<tO(&aQ`O,5<tO(&fQ`O,5<vO(&kQ`O,5<vO(&pQ`O1G2RO(&uQ`O1G0uO(&zQMjO<<K}O('RQMjO<<K}O7eQMhO'#F|O9[Q`O'#F{OAjQ`O'#EnO!)PQlO,5;tO!3dQ`O'#GYO!3dQ`O'#GYO!3dQ`O'#G[O!3dQ`O'#G[O!+xQMhO7+(cO!+xQMhO7+(cO%-mQ!dO1G2wO%-mQ!dO1G2wO!&oQMhO,5=]O!&oQMhO,5=]",stateData:"((X~O'{OS'|OSTOS'}RQ~OPYOQYOSfOY!VOaqOdzOeyOl!POpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!uwO!xxO!|]O$W|O$niO%h}O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO&V!WO&]!XO&_!YO&a!ZO&c![O&f!]O&l!^O&r!_O&t!`O&v!aO&x!bO&z!cO(SSO(UTO(XUO(`VO(n[O~OWtO~P`OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(S!dO(UTO(XUO(`VO(n[O~Oa!wOs!nO!S!oO!b!yO!c!vO!d!vO!|;wO#T!pO#U!pO#V!xO#W!pO#X!pO#[!zO#]!zO(T!lO(UTO(XUO(d!mO(n!sO~O'}!{O~OP]XR]X[]Xa]Xj]Xr]X!Q]X!S]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X'y]X(`]X(q]X(x]X(y]X~O!g%RX~P(qO_!}O(U#PO(V!}O(W#PO~O_#QO(W#PO(X#PO(Y#QO~Ox#SO!U#TO(a#TO(b#VO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(S;{O(UTO(XUO(`VO(n[O~O![#ZO!]#WO!Y(gP!Y(uP~P+}O!^#cO~P`OPYOQYOSfOd!jOe!iOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(UTO(XUO(`VO(n[O~Op#mO![#iO!|]O#i#lO#j#iO(S;|O!k(rP~P.iO!l#oO(S#nO~O!x#sO!|]O%h#tO~O#k#uO~O!g#vO#k#uO~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!]$_O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(`VO(q$YO(x#|O(y#}O~Oa(eX'y(eX'v(eX!k(eX!Y(eX!_(eX%i(eX!g(eX~P1qO#S$dO#`$eO$Q$eOP(fXR(fX[(fXj(fXr(fX!Q(fX!S(fX!](fX!l(fX!p(fX#R(fX#n(fX#o(fX#p(fX#q(fX#r(fX#s(fX#t(fX#u(fX#v(fX#x(fX#z(fX#{(fX(`(fX(q(fX(x(fX(y(fX!_(fX%i(fX~Oa(fX'y(fX'v(fX!Y(fX!k(fXv(fX!g(fX~P4UO#`$eO~O$]$hO$_$gO$f$mO~OSfO!_$nO$i$oO$k$qO~Oh%VOj%cOk%cOl%cOp%WOr%XOs$tOt$tOz%YO|%ZO!O%[O!S${O!_$|O!i%aO!l$xO#j%bO$W%_O$t%]O$v%^O$y%`O(S$sO(UTO(XUO(`$uO(x$}O(y%POg(]P~O!l%dO~O!S%gO!_%hO(S%fO~O!g%lO~Oa%mO'y%mO~O!Q%qO~P%[O(T!lO~P%[O%n%uO~P%[Oh%VO!l%dO(S%fO(T!lO~Oe%|O!l%dO(S%fO~Oj$RO~O!Q&RO!_&OO!l&QO%j&UO(S%fO(T!lO(UTO(XUO`)VP~O!x#sO~O%s&WO!S)RX!_)RX(S)RX~O(S&XO~Ol!PO!u&^O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO~Od&cOe&bO!x&`O%h&aO%{&_O~P<VOd&fOeyOl!PO!_&eO!u&^O!xxO!|]O%h}O%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO~Ob&iO#`&lO%j&gO(T!lO~P=[O!l&mO!u&qO~O!l#oO~O!_XO~Oa%mO'w&yO'y%mO~Oa%mO'w&|O'y%mO~Oa%mO'w'OO'y%mO~O'v]X!Y]Xv]X!k]X&Z]X!_]X%i]X!g]X~P(qO!b']O!c'UO!d'UO(T!lO(UTO(XUO~Os'SO!S'RO!['VO(d'QO!^(hP!^(wP~P@cOn'`O!_'^O(S%fO~Oe'eO!l%dO(S%fO~O!Q&RO!l&QO~Os!nO!S!oO!|;wO#T!pO#U!pO#W!pO#X!pO(T!lO(UTO(XUO(d!mO(n!sO~O!b'kO!c'jO!d'jO#V!pO#['lO#]'lO~PA}Oa%mOh%VO!g#vO!l%dO'y%mO(q'nO~O!p'rO#`'pO~PC]Os!nO!S!oO(UTO(XUO(d!mO(n!sO~O!_XOs(lX!S(lX!b(lX!c(lX!d(lX!|(lX#T(lX#U(lX#V(lX#W(lX#X(lX#[(lX#](lX(T(lX(U(lX(X(lX(d(lX(n(lX~O!c'jO!d'jO(T!lO~PC{O(O'vO(P'vO(Q'xO~O_!}O(U'zO(V!}O(W'zO~O_#QO(W'zO(X'zO(Y#QO~Ov'|O~P%[Ox#SO!U#TO(a#TO(b(PO~O![(RO!Y'VX!Y']X!]'VX!]']X~P+}O!](TO!Y(gX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!](TO!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(`VO(q$YO(x#|O(y#}O~O!Y(gX~PGvO!Y(YO~O!Y(tX!](tX!g(tX!k(tX(q(tX~O#`(tX#k#dX!^(tX~PIyO#`(ZO!Y(vX!](vX~O!]([O!Y(uX~O!Y(_O~O#`$eO~PIyO!^(`O~P`OR#zO!Q#yO!S#{O!l#xO(`VOP!na[!naj!nar!na!]!na!p!na#R!na#n!na#o!na#p!na#q!na#r!na#s!na#t!na#u!na#v!na#x!na#z!na#{!na(q!na(x!na(y!na~Oa!na'y!na'v!na!Y!na!k!nav!na!_!na%i!na!g!na~PKaO!k(aO~O!g#vO#`(bO(q'nO!](sXa(sX'y(sX~O!k(sX~PM|O!S%gO!_%hO!|]O#i(gO#j(fO(S%fO~O!](hO!k(rX~O!k(jO~O!S%gO!_%hO#j(fO(S%fO~OP(fXR(fX[(fXj(fXr(fX!Q(fX!S(fX!](fX!l(fX!p(fX#R(fX#n(fX#o(fX#p(fX#q(fX#r(fX#s(fX#t(fX#u(fX#v(fX#x(fX#z(fX#{(fX(`(fX(q(fX(x(fX(y(fX~O!g#vO!k(fX~P! jOR(lO!Q(kO!l#xO#S$dO!|!{a!S!{a~O!x!{a%h!{a!_!{a#i!{a#j!{a(S!{a~P!#kO!x(pO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(S!dO(UTO(XUO(`VO(n[O~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<eO!S${O!_$|O!i=vO!l$xO#j<kO$W%_O$t<gO$v<iO$y%`O(S(tO(UTO(XUO(`$uO(x$}O(y%PO~O#k(vO~O![(xO!k(jP~P%[O(d(zO(n[O~O!S(|O!l#xO(d(zO(n[O~OP;vOQ;vOSfOd=rOe!iOpkOr;vOskOtkOzkO|;vO!O;vO!SWO!WkO!XkO!_!eO!i;yO!lZO!o;vO!p;vO!q;vO!s;zO!u;}O!x!hO$W!kO$n=pO(S)ZO(UTO(XUO(`VO(n[O~O!]$_Oa$qa'y$qa'v$qa!k$qa!Y$qa!_$qa%i$qa!g$qa~Ol)bO~P!&oOh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O%[O!S${O!_$|O!i%aO!l$xO#j%bO$W%_O$t%]O$v%^O$y%`O(S(tO(UTO(XUO(`$uO(x$}O(y%PO~Og(oP~P!+xO!Q)gO!g)fO!_$^X$Z$^X$]$^X$_$^X$f$^X~O!g)fO!_(zX$Z(zX$](zX$_(zX$f(zX~O!Q)gO~P!.RO!Q)gO!_(zX$Z(zX$](zX$_(zX$f(zX~O!_)iO$Z)mO$])hO$_)hO$f)nO~O![)qO~P!)PO$]$hO$_$gO$f)uO~On$zX!Q$zX#S$zX'x$zX(x$zX(y$zX~OgmXg$zXnmX!]mX#`mX~P!/wOx)wO(a)xO(b)zO~On*TO!Q)|O'x)}O(x$}O(y%PO~Og){O~P!0{Og*UO~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<eO!S*WO!_*XO!i=vO!l$xO#j<kO$W%_O$t<gO$v<iO$y%`O(UTO(XUO(`$uO(x$}O(y%PO~O![*[O(S*VO!k(}P~P!1jO#k*^O~O!l*_O~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<eO!S${O!_$|O!i=vO!l$xO#j<kO$W%_O$t<gO$v<iO$y%`O(S*aO(UTO(XUO(`$uO(x$}O(y%PO~O![*dO!Y)OP~P!3iOr*pOs!nO!S*fO!b*nO!c*hO!d*hO!l*_O#[*oO%`*jO(T!lO(UTO(XUO(d!mO~O!^*mO~P!5^O#S$dOn(_X!Q(_X'x(_X(x(_X(y(_X!](_X#`(_X~Og(_X$O(_X~P!6`On*uO#`*tOg(^X!](^X~O!]*vOg(]X~Oj%cOk%cOl%cO(S&XOg(]P~Os*yO~O!l+OO~O(S(tO~Op+TO!S%gO![#iO!_%hO!|]O#i#lO#j#iO(S%fO!k(rP~O!g#vO#k+UO~O!S%gO![+WO!]([O!_%hO(S%fO!Y(uP~Os'YO!S+YO![+XO(UTO(XUO(d(zO~O!^(wP~P!9iO!]+ZOa)SX'y)SX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(`VO(q$YO(x#|O(y#}O~Oa!ja!]!ja'y!ja'v!ja!Y!ja!k!jav!ja!_!ja%i!ja!g!ja~P!:aOR#zO!Q#yO!S#{O!l#xO(`VOP!ra[!raj!rar!ra!]!ra!p!ra#R!ra#n!ra#o!ra#p!ra#q!ra#r!ra#s!ra#t!ra#u!ra#v!ra#x!ra#z!ra#{!ra(q!ra(x!ra(y!ra~Oa!ra'y!ra'v!ra!Y!ra!k!rav!ra!_!ra%i!ra!g!ra~P!<wOR#zO!Q#yO!S#{O!l#xO(`VOP!ta[!taj!tar!ta!]!ta!p!ta#R!ta#n!ta#o!ta#p!ta#q!ta#r!ta#s!ta#t!ta#u!ta#v!ta#x!ta#z!ta#{!ta(q!ta(x!ta(y!ta~Oa!ta'y!ta'v!ta!Y!ta!k!tav!ta!_!ta%i!ta!g!ta~P!?_Oh%VOn+dO!_'^O%i+cO~O!g+fOa([X!_([X'y([X!]([X~Oa%mO!_XO'y%mO~Oh%VO!l%dO~Oh%VO!l%dO(S%fO~O!g#vO#k(vO~Ob+qO%j+rO(S+nO(UTO(XUO!^)WP~O!]+sO`)VX~O[+wO~O`+xO~O!_&OO(S%fO(T!lO`)VP~Oh%VO#`+}O~Oh%VOn,QO!_$|O~O!_,SO~O!Q,UO!_XO~O%n%uO~O!x,ZO~Oe,`O~Ob,aO(S#nO(UTO(XUO!^)UP~Oe%|O~O%j!QO(S&XO~P=[O[,fO`,eO~OPYOQYOSfOdzOeyOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!iuO!lZO!oYO!pYO!qYO!svO!xxO!|]O$niO%h}O(UTO(XUO(`VO(n[O~O!_!eO!u!gO$W!kO(S!dO~P!F_O`,eOa%mO'y%mO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!x!hO$W!kO$niO(S!dO(UTO(XUO(`VO(n[O~Oa,kOl!OO!uwO%l!OO%m!OO%n!OO~P!HwO!l&mO~O&],qO~O!_,sO~O&n,uO&p,vOP&kaQ&kaS&kaY&kaa&kad&kae&kal&kap&kar&kas&kat&kaz&ka|&ka!O&ka!S&ka!W&ka!X&ka!_&ka!i&ka!l&ka!o&ka!p&ka!q&ka!s&ka!u&ka!x&ka!|&ka$W&ka$n&ka%h&ka%j&ka%l&ka%m&ka%n&ka%q&ka%s&ka%v&ka%w&ka%y&ka&V&ka&]&ka&_&ka&a&ka&c&ka&f&ka&l&ka&r&ka&t&ka&v&ka&x&ka&z&ka'v&ka(S&ka(U&ka(X&ka(`&ka(n&ka!^&ka&d&kab&ka&i&ka~O(S,{O~Oh!eX!]!RX!^!RX!g!RX!g!eX!l!eX#`!RX~O!]!eX!^!eX~P# }O!g-QO#`-POh(iX!]#hX!^#hX!g(iX!l(iX~O!](iX!^(iX~P#!pOh%VO!g-SO!l%dO!]!aX!^!aX~Os!nO!S!oO(UTO(XUO(d!mO~OP;vOQ;vOSfOd=rOe!iOpkOr;vOskOtkOzkO|;vO!O;vO!SWO!WkO!XkO!_!eO!i;yO!lZO!o;vO!p;vO!q;vO!s;zO!u;}O!x!hO$W!kO$n=pO(UTO(XUO(`VO(n[O~O(S<rO~P#$VO!]-WO!^(hX~O!^-YO~O!g-QO#`-PO!]#hX!^#hX~O!]-ZO!^(wX~O!^-]O~O!c-^O!d-^O(T!lO~P##tO!^-aO~P'_On-dO!_'^O~O!Y-iO~Os!{a!b!{a!c!{a!d!{a#T!{a#U!{a#V!{a#W!{a#X!{a#[!{a#]!{a(T!{a(U!{a(X!{a(d!{a(n!{a~P!#kO!p-nO#`-lO~PC]O!c-pO!d-pO(T!lO~PC{Oa%mO#`-lO'y%mO~Oa%mO!g#vO#`-lO'y%mO~Oa%mO!g#vO!p-nO#`-lO'y%mO(q'nO~O(O'vO(P'vO(Q-uO~Ov-vO~O!Y'Va!]'Va~P!:aO![-zO!Y'VX!]'VX~P%[O!](TO!Y(ga~O!Y(ga~PGvO!]([O!Y(ua~O!S%gO![.OO!_%hO(S%fO!Y']X!]']X~O#`.QO!](sa!k(saa(sa'y(sa~O!g#vO~P#,]O!](hO!k(ra~O!S%gO!_%hO#j.UO(S%fO~Op.ZO!S%gO![.WO!_%hO!|]O#i.YO#j.WO(S%fO!]'`X!k'`X~OR._O!l#xO~Oh%VOn.bO!_'^O%i.aO~Oa#ci!]#ci'y#ci'v#ci!Y#ci!k#civ#ci!_#ci%i#ci!g#ci~P!:aOn=|O!Q)|O'x)}O(x$}O(y%PO~O#k#_aa#_a#`#_a'y#_a!]#_a!k#_a!_#_a!Y#_a~P#/XO#k(_XP(_XR(_X[(_Xa(_Xj(_Xr(_X!S(_X!l(_X!p(_X#R(_X#n(_X#o(_X#p(_X#q(_X#r(_X#s(_X#t(_X#u(_X#v(_X#x(_X#z(_X#{(_X'y(_X(`(_X(q(_X!k(_X!Y(_X'v(_Xv(_X!_(_X%i(_X!g(_X~P!6`O!].oO!k(jX~P!:aO!k.rO~O!Y.tO~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(`VO[#mia#mij#mir#mi!]#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'y#mi(q#mi(x#mi(y#mi'v#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#n#mi~P#2wO#n$OO~P#2wOP$[OR#zOr$aO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(`VO[#mia#mij#mi!]#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'y#mi(q#mi(x#mi(y#mi'v#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#r#mi~P#5fO#r$QO~P#5fOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO(`VOa#mi!]#mi#x#mi#z#mi#{#mi'y#mi(q#mi(x#mi(y#mi'v#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#v#mi~P#8TOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO(`VO(y#}Oa#mi!]#mi#z#mi#{#mi'y#mi(q#mi(x#mi'v#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#x$UO~P#:kO#x#mi~P#:kO#v$SO~P#8TOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO(`VO(x#|O(y#}Oa#mi!]#mi#{#mi'y#mi(q#mi'v#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#z#mi~P#=aO#z$WO~P#=aOP]XR]X[]Xj]Xr]X!Q]X!S]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(`]X(q]X(x]X(y]X!]]X!^]X~O$O]X~P#@OOP$[OR#zO[<_Oj<SOr<]O!Q#yO!S#{O!l#xO!p$[O#R<SO#n<PO#o<QO#p<QO#q<QO#r<RO#s<SO#t<SO#u<^O#v<TO#x<VO#z<XO#{<YO(`VO(q$YO(x#|O(y#}O~O$O.vO~P#B]O#S$dO#`<`O$Q<`O$O(fX!^(fX~P! jOa'ca!]'ca'y'ca'v'ca!k'ca!Y'cav'ca!_'ca%i'ca!g'ca~P!:aO[#mia#mij#mir#mi!]#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'y#mi(q#mi'v#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(`VO(x#mi(y#mi~P#E_On=|O!Q)|O'x)}O(x$}O(y%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(`#mi~P#E_O!].zOg(oX~P!0{Og.|O~Oa$Pi!]$Pi'y$Pi'v$Pi!Y$Pi!k$Piv$Pi!_$Pi%i$Pi!g$Pi~P!:aO$].}O$_.}O~O$]/OO$_/OO~O!g)fO#`/PO!_$cX$Z$cX$]$cX$_$cX$f$cX~O![/QO~O!_)iO$Z/SO$])hO$_)hO$f/TO~O!]<ZO!^(eX~P#B]O!^/UO~O!g)fO$f(zX~O$f/WO~Ov/XO~P!&oOx)wO(a)xO(b/[O~O!S/_O~O(x$}On%aa!Q%aa'x%aa(y%aa!]%aa#`%aa~Og%aa$O%aa~P#LaO(y%POn%ca!Q%ca'x%ca(x%ca!]%ca#`%ca~Og%ca$O%ca~P#MSO!]fX!gfX!kfX!k$zX(qfX~P!/wO![/hO!]([O(S/gO!Y(uP!Y)OP~P!1jOr*pO!b*nO!c*hO!d*hO!l*_O#[*oO%`*jO(T!lO(UTO(XUO~Os<oO!S/iO![+XO!^*mO(d<nO!^(wP~P#NmO!k/jO~P#/XO!]/kO!g#vO(q'nO!k(}X~O!k/pO~O!S%gO![*[O!_%hO(S%fO!k(}P~O#k/rO~O!Y$zX!]$zX!g%RX~P!/wO!]/sO!Y)OX~P#/XO!g/uO~O!Y/wO~OpkO(S/xO~P.iOh%VOr/}O!g#vO!l%dO(q'nO~O!g+fO~Oa%mO!]0RO'y%mO~O!^0TO~P!5^O!c0UO!d0UO(T!lO~P##tOs!nO!S0VO(UTO(XUO(d!mO~O#[0XO~Og%aa!]%aa#`%aa$O%aa~P!0{Og%ca!]%ca#`%ca$O%ca~P!0{Oj%cOk%cOl%cO(S&XOg'lX!]'lX~O!]*vOg(]a~Og0bO~OR0cO!Q0cO!S0dO#S$dOn}a'x}a(x}a(y}a!]}a#`}a~Og}a$O}a~P$&vO!Q)|O'x)}On$sa(x$sa(y$sa!]$sa#`$sa~Og$sa$O$sa~P$'rO!Q)|O'x)}On$ua(x$ua(y$ua!]$ua#`$ua~Og$ua$O$ua~P$(eO#k0gO~Og%Ta!]%Ta#`%Ta$O%Ta~P!0{On0iO#`0hOg(^a!](^a~O!g#vO~O#k0lO~O!]+ZOa)Sa'y)Sa~OR#zO!Q#yO!S#{O!l#xO(`VOP!ri[!rij!rir!ri!]!ri!p!ri#R!ri#n!ri#o!ri#p!ri#q!ri#r!ri#s!ri#t!ri#u!ri#v!ri#x!ri#z!ri#{!ri(q!ri(x!ri(y!ri~Oa!ri'y!ri'v!ri!Y!ri!k!riv!ri!_!ri%i!ri!g!ri~P$*bOh%VOr%XOs$tOt$tOz%YO|%ZO!O<eO!S${O!_$|O!i=vO!l$xO#j<kO$W%_O$t<gO$v<iO$y%`O(UTO(XUO(`$uO(x$}O(y%PO~Op0uO%]0vO(S0tO~P$,xO!g+fOa([a!_([a'y([a!]([a~O#k0|O~O[]X!]fX!^fX~O!]0}O!^)WX~O!^1PO~O[1QO~Ob1SO(S+nO(UTO(XUO~O!_&OO(S%fO`'tX!]'tX~O!]+sO`)Va~O!k1VO~P!:aO[1YO~O`1ZO~O#`1^O~On1aO!_$|O~O(d(zO!^)TP~Oh%VOn1jO!_1gO%i1iO~O[1tO!]1rO!^)UX~O!^1uO~O`1wOa%mO'y%mO~O(S#nO(UTO(XUO~O#S$dO#`$eO$Q$eOP(fXR(fX[(fXr(fX!Q(fX!S(fX!](fX!l(fX!p(fX#R(fX#n(fX#o(fX#p(fX#q(fX#r(fX#s(fX#t(fX#u(fX#v(fX#x(fX#z(fX#{(fX(`(fX(q(fX(x(fX(y(fX~Oj1zO&Z1{Oa(fX~P$2cOj1zO#`$eO&Z1{O~Oa1}O~P%[Oa2PO~O&d2SOP&biQ&biS&biY&bia&bid&bie&bil&bip&bir&bis&bit&biz&bi|&bi!O&bi!S&bi!W&bi!X&bi!_&bi!i&bi!l&bi!o&bi!p&bi!q&bi!s&bi!u&bi!x&bi!|&bi$W&bi$n&bi%h&bi%j&bi%l&bi%m&bi%n&bi%q&bi%s&bi%v&bi%w&bi%y&bi&V&bi&]&bi&_&bi&a&bi&c&bi&f&bi&l&bi&r&bi&t&bi&v&bi&x&bi&z&bi'v&bi(S&bi(U&bi(X&bi(`&bi(n&bi!^&bib&bi&i&bi~Ob2YO!^2WO&i2XO~P`O!_XO!l2[O~O&p,vOP&kiQ&kiS&kiY&kia&kid&kie&kil&kip&kir&kis&kit&kiz&ki|&ki!O&ki!S&ki!W&ki!X&ki!_&ki!i&ki!l&ki!o&ki!p&ki!q&ki!s&ki!u&ki!x&ki!|&ki$W&ki$n&ki%h&ki%j&ki%l&ki%m&ki%n&ki%q&ki%s&ki%v&ki%w&ki%y&ki&V&ki&]&ki&_&ki&a&ki&c&ki&f&ki&l&ki&r&ki&t&ki&v&ki&x&ki&z&ki'v&ki(S&ki(U&ki(X&ki(`&ki(n&ki!^&ki&d&kib&ki&i&ki~O!Y2bO~O!]!aa!^!aa~P#B]Os!nO!S!oO![2hO(d!mO!]'WX!^'WX~P@cO!]-WO!^(ha~O!]'^X!^'^X~P!9iO!]-ZO!^(wa~O!^2oO~P'_Oa%mO#`2xO'y%mO~Oa%mO!g#vO#`2xO'y%mO~Oa%mO!g#vO!p2|O#`2xO'y%mO(q'nO~Oa%mO'y%mO~P!:aO!]$_Ov$qa~O!Y'Vi!]'Vi~P!:aO!](TO!Y(gi~O!]([O!Y(ui~O!Y(vi!](vi~P!:aO!](si!k(sia(si'y(si~P!:aO#`3OO!](si!k(sia(si'y(si~O!](hO!k(ri~O!S%gO!_%hO!|]O#i3TO#j3SO(S%fO~O!S%gO!_%hO#j3SO(S%fO~On3[O!_'^O%i3ZO~Oh%VOn3[O!_'^O%i3ZO~O#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'y%aa(`%aa(q%aa!k%aa!Y%aa'v%aav%aa!_%aa%i%aa!g%aa~P#LaO#k%caP%caR%ca[%caa%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'y%ca(`%ca(q%ca!k%ca!Y%ca'v%cav%ca!_%ca%i%ca!g%ca~P#MSO#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!]%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'y%aa(`%aa(q%aa!k%aa!Y%aa'v%aa#`%aav%aa!_%aa%i%aa!g%aa~P#/XO#k%caP%caR%ca[%caa%caj%car%ca!S%ca!]%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'y%ca(`%ca(q%ca!k%ca!Y%ca'v%ca#`%cav%ca!_%ca%i%ca!g%ca~P#/XO#k}aP}a[}aa}aj}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a'y}a(`}a(q}a!k}a!Y}a'v}av}a!_}a%i}a!g}a~P$&vO#k$saP$saR$sa[$saa$saj$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa'y$sa(`$sa(q$sa!k$sa!Y$sa'v$sav$sa!_$sa%i$sa!g$sa~P$'rO#k$uaP$uaR$ua[$uaa$uaj$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua'y$ua(`$ua(q$ua!k$ua!Y$ua'v$uav$ua!_$ua%i$ua!g$ua~P$(eO#k%TaP%TaR%Ta[%Taa%Taj%Tar%Ta!S%Ta!]%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta'y%Ta(`%Ta(q%Ta!k%Ta!Y%Ta'v%Ta#`%Tav%Ta!_%Ta%i%Ta!g%Ta~P#/XOa#cq!]#cq'y#cq'v#cq!Y#cq!k#cqv#cq!_#cq%i#cq!g#cq~P!:aO![3dO!]'XX!k'XX~P%[O!].oO!k(ja~O!].oO!k(ja~P!:aO!Y3gO~O$O!na!^!na~PKaO$O!ja!]!ja!^!ja~P#B]O$O!ra!^!ra~P!<wO$O!ta!^!ta~P!?_Og'[X!]'[X~P!+xO!].zOg(oa~OSfO!_3{O$d3|O~O!^4QO~Ov4RO~P#/XOa$mq!]$mq'y$mq'v$mq!Y$mq!k$mqv$mq!_$mq%i$mq!g$mq~P!:aO!Y4TO~P!&oO!S4UO~O!Q)|O'x)}O(y%POn'ha(x'ha!]'ha#`'ha~Og'ha$O'ha~P%,XO!Q)|O'x)}On'ja(x'ja(y'ja!]'ja#`'ja~Og'ja$O'ja~P%,zO(q$YO~P#/XO!YfX!Y$zX!]fX!]$zX!g%RX#`fX~P!/wO(S<xO~P!1jO!S%gO![4XO!_%hO(S%fO!]'dX!k'dX~O!]/kO!k(}a~O!]/kO!g#vO!k(}a~O!]/kO!g#vO(q'nO!k(}a~Og$|i!]$|i#`$|i$O$|i~P!0{O![4aO!Y'fX!]'fX~P!3iO!]/sO!Y)Oa~O!]/sO!Y)Oa~P#/XOP]XR]X[]Xj]Xr]X!Q]X!S]X!Y]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(`]X(q]X(x]X(y]X~Oj%YX!g%YX~P%0kOj4fO!g#vO~Oh%VO!g#vO!l%dO~Oh%VOr4kO!l%dO(q'nO~Or4pO!g#vO(q'nO~Os!nO!S4qO(UTO(XUO(d!mO~O(x$}On%ai!Q%ai'x%ai(y%ai!]%ai#`%ai~Og%ai$O%ai~P%4[O(y%POn%ci!Q%ci'x%ci(x%ci!]%ci#`%ci~Og%ci$O%ci~P%4}Og(^i!](^i~P!0{O#`4wOg(^i!](^i~P!0{O!k4zO~Oa$oq!]$oq'y$oq'v$oq!Y$oq!k$oqv$oq!_$oq%i$oq!g$oq~P!:aO!Y5QO~O!]5RO!_)PX~P#/XOa$zX!_$zX%^]X'y$zX!]$zX~P!/wO%^5UOaoXnoX!QoX!_oX'xoX'yoX(xoX(yoX!]oX~Op5VO(S#nO~O%^5UO~Ob5]O%j5^O(S+nO(UTO(XUO!]'sX!^'sX~O!]0}O!^)Wa~O[5bO~O`5cO~Oa%mO'y%mO~P#/XO!]5kO#`5mO!^)TX~O!^5nO~Or5tOs!nO!S*fO!b!yO!c!vO!d!vO!|;wO#T!pO#U!pO#V!pO#W!pO#X!pO#[5sO#]!zO(T!lO(UTO(XUO(d!mO(n!sO~O!^5rO~P%:YOn5yO!_1gO%i5xO~Oh%VOn5yO!_1gO%i5xO~Ob6QO(S#nO(UTO(XUO!]'rX!^'rX~O!]1rO!^)Ua~O(UTO(XUO(d6SO~O`6WO~Oj6ZO&Z6[O~PM|O!k6]O~P%[Oa6_O~Oa6_O~P%[Ob2YO!^6dO&i2XO~P`O!g6fO~O!g6hOh(ii!](ii!^(ii!g(ii!l(iir(ii(q(ii~O!]#hi!^#hi~P#B]O#`6iO!]#hi!^#hi~O!]!ai!^!ai~P#B]Oa%mO#`6rO'y%mO~Oa%mO!g#vO#`6rO'y%mO~O!](sq!k(sqa(sq'y(sq~P!:aO!](hO!k(rq~O!S%gO!_%hO#j6yO(S%fO~O!_'^O%i6|O~On7QO!_'^O%i6|O~O#k'haP'haR'ha['haa'haj'har'ha!S'ha!l'ha!p'ha#R'ha#n'ha#o'ha#p'ha#q'ha#r'ha#s'ha#t'ha#u'ha#v'ha#x'ha#z'ha#{'ha'y'ha(`'ha(q'ha!k'ha!Y'ha'v'hav'ha!_'ha%i'ha!g'ha~P%,XO#k'jaP'jaR'ja['jaa'jaj'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja'y'ja(`'ja(q'ja!k'ja!Y'ja'v'jav'ja!_'ja%i'ja!g'ja~P%,zO#k$|iP$|iR$|i[$|ia$|ij$|ir$|i!S$|i!]$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i'y$|i(`$|i(q$|i!k$|i!Y$|i'v$|i#`$|iv$|i!_$|i%i$|i!g$|i~P#/XO#k%aiP%aiR%ai[%aia%aij%air%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai'y%ai(`%ai(q%ai!k%ai!Y%ai'v%aiv%ai!_%ai%i%ai!g%ai~P%4[O#k%ciP%ciR%ci[%cia%cij%cir%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci'y%ci(`%ci(q%ci!k%ci!Y%ci'v%civ%ci!_%ci%i%ci!g%ci~P%4}O!]'Xa!k'Xa~P!:aO!].oO!k(ji~O$O#ci!]#ci!^#ci~P#B]OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(`VO[#mij#mir#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(q#mi(x#mi(y#mi!]#mi!^#mi~O#n#mi~P%MXO#n<PO~P%MXOP$[OR#zOr<]O!Q#yO!S#{O!l#xO!p$[O#n<PO#o<QO#p<QO#q<QO(`VO[#mij#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(q#mi(x#mi(y#mi!]#mi!^#mi~O#r#mi~P& aO#r<RO~P& aOP$[OR#zO[<_Oj<SOr<]O!Q#yO!S#{O!l#xO!p$[O#R<SO#n<PO#o<QO#p<QO#q<QO#r<RO#s<SO#t<SO#u<^O(`VO#x#mi#z#mi#{#mi$O#mi(q#mi(x#mi(y#mi!]#mi!^#mi~O#v#mi~P&#iOP$[OR#zO[<_Oj<SOr<]O!Q#yO!S#{O!l#xO!p$[O#R<SO#n<PO#o<QO#p<QO#q<QO#r<RO#s<SO#t<SO#u<^O#v<TO(`VO(y#}O#z#mi#{#mi$O#mi(q#mi(x#mi!]#mi!^#mi~O#x<VO~P&%jO#x#mi~P&%jO#v<TO~P&#iOP$[OR#zO[<_Oj<SOr<]O!Q#yO!S#{O!l#xO!p$[O#R<SO#n<PO#o<QO#p<QO#q<QO#r<RO#s<SO#t<SO#u<^O#v<TO#x<VO(`VO(x#|O(y#}O#{#mi$O#mi(q#mi!]#mi!^#mi~O#z#mi~P&'yO#z<XO~P&'yOa#|y!]#|y'y#|y'v#|y!Y#|y!k#|yv#|y!_#|y%i#|y!g#|y~P!:aO[#mij#mir#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(q#mi!]#mi!^#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n<PO#o<QO#p<QO#q<QO(`VO(x#mi(y#mi~P&*uOn=}O!Q)|O'x)}O(x$}O(y%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(`#mi~P&*uO#S$dOP(_XR(_X[(_Xj(_Xn(_Xr(_X!Q(_X!S(_X!l(_X!p(_X#R(_X#n(_X#o(_X#p(_X#q(_X#r(_X#s(_X#t(_X#u(_X#v(_X#x(_X#z(_X#{(_X$O(_X'x(_X(`(_X(q(_X(x(_X(y(_X!](_X!^(_X~O$O$Pi!]$Pi!^$Pi~P#B]O$O!ri!^!ri~P$*bOg'[a!]'[a~P!0{O!^7dO~O!]'ca!^'ca~P#B]O!Y7eO~P#/XO!g#vO(q'nO!]'da!k'da~O!]/kO!k(}i~O!]/kO!g#vO!k(}i~Og$|q!]$|q#`$|q$O$|q~P!0{O!Y'fa!]'fa~P#/XO!g7lO~O!]/sO!Y)Oi~P#/XO!]/sO!Y)Oi~O!Y7oO~Oh%VOr7tO!l%dO(q'nO~Oj7vO!g#vO~Or7yO!g#vO(q'nO~O!Q)|O'x)}O(y%POn'ia(x'ia!]'ia#`'ia~Og'ia$O'ia~P&3vO!Q)|O'x)}On'ka(x'ka(y'ka!]'ka#`'ka~Og'ka$O'ka~P&4iO!Y7{O~Og%Oq!]%Oq#`%Oq$O%Oq~P!0{Og(^q!](^q~P!0{O#`7|Og(^q!](^q~P!0{Oa$oy!]$oy'y$oy'v$oy!Y$oy!k$oyv$oy!_$oy%i$oy!g$oy~P!:aO!g6hO~O!]5RO!_)Pa~O!_'^OP$TaR$Ta[$Taj$Tar$Ta!Q$Ta!S$Ta!]$Ta!l$Ta!p$Ta#R$Ta#n$Ta#o$Ta#p$Ta#q$Ta#r$Ta#s$Ta#t$Ta#u$Ta#v$Ta#x$Ta#z$Ta#{$Ta(`$Ta(q$Ta(x$Ta(y$Ta~O%i6|O~P&7ZO%^8QOa%[i!_%[i'y%[i!]%[i~Oa#cy!]#cy'y#cy'v#cy!Y#cy!k#cyv#cy!_#cy%i#cy!g#cy~P!:aO[8SO~Ob8UO(S+nO(UTO(XUO~O!]0}O!^)Wi~O`8YO~O(d(zO!]'oX!^'oX~O!]5kO!^)Ta~O!^8cO~P%:YO(n!sO~P$${O#[8dO~O!_1gO~O!_1gO%i8fO~On8iO!_1gO%i8fO~O[8nO!]'ra!^'ra~O!]1rO!^)Ui~O!k8rO~O!k8sO~O!k8vO~O!k8vO~P%[Oa8xO~O!g8yO~O!k8zO~O!](vi!^(vi~P#B]Oa%mO#`9SO'y%mO~O!](sy!k(sya(sy'y(sy~P!:aO!](hO!k(ry~O%i9VO~P&7ZO!_'^O%i9VO~O#k$|qP$|qR$|q[$|qa$|qj$|qr$|q!S$|q!]$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q'y$|q(`$|q(q$|q!k$|q!Y$|q'v$|q#`$|qv$|q!_$|q%i$|q!g$|q~P#/XO#k'iaP'iaR'ia['iaa'iaj'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia'y'ia(`'ia(q'ia!k'ia!Y'ia'v'iav'ia!_'ia%i'ia!g'ia~P&3vO#k'kaP'kaR'ka['kaa'kaj'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka'y'ka(`'ka(q'ka!k'ka!Y'ka'v'kav'ka!_'ka%i'ka!g'ka~P&4iO#k%OqP%OqR%Oq[%Oqa%Oqj%Oqr%Oq!S%Oq!]%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq'y%Oq(`%Oq(q%Oq!k%Oq!Y%Oq'v%Oq#`%Oqv%Oq!_%Oq%i%Oq!g%Oq~P#/XO!]'Xi!k'Xi~P!:aO$O#cq!]#cq!^#cq~P#B]O(x$}OP%aaR%aa[%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa$O%aa(`%aa(q%aa!]%aa!^%aa~On%aa!Q%aa'x%aa(y%aa~P&HnO(y%POP%caR%ca[%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca$O%ca(`%ca(q%ca!]%ca!^%ca~On%ca!Q%ca'x%ca(x%ca~P&JuOn=}O!Q)|O'x)}O(y%PO~P&HnOn=}O!Q)|O'x)}O(x$}O~P&JuOR0cO!Q0cO!S0dO#S$dOP}a[}aj}an}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a$O}a'x}a(`}a(q}a(x}a(y}a!]}a!^}a~O!Q)|O'x)}OP$saR$sa[$saj$san$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa$O$sa(`$sa(q$sa(x$sa(y$sa!]$sa!^$sa~O!Q)|O'x)}OP$uaR$ua[$uaj$uan$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua$O$ua(`$ua(q$ua(x$ua(y$ua!]$ua!^$ua~On=}O!Q)|O'x)}O(x$}O(y%PO~OP%TaR%Ta[%Taj%Tar%Ta!S%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta$O%Ta(`%Ta(q%Ta!]%Ta!^%Ta~P'%zO$O$mq!]$mq!^$mq~P#B]O$O$oq!]$oq!^$oq~P#B]O!^9dO~O$O9eO~P!0{O!g#vO!]'di!k'di~O!g#vO(q'nO!]'di!k'di~O!]/kO!k(}q~O!Y'fi!]'fi~P#/XO!]/sO!Y)Oq~Or9lO!g#vO(q'nO~O[9nO!Y9mO~P#/XO!Y9mO~Oj9tO!g#vO~Og(^y!](^y~P!0{O!]'ma!_'ma~P#/XOa%[q!_%[q'y%[q!]%[q~P#/XO[9yO~O!]0}O!^)Wq~O#`9}O!]'oa!^'oa~O!]5kO!^)Ti~P#B]O!S:PO~O!_1gO%i:SO~O(UTO(XUO(d:XO~O!]1rO!^)Uq~O!k:[O~O!k:]O~O!k:^O~O!k:^O~P%[O#`:aO!]#hy!^#hy~O!]#hy!^#hy~P#B]O%i:fO~P&7ZO!_'^O%i:fO~O$O#|y!]#|y!^#|y~P#B]OP$|iR$|i[$|ij$|ir$|i!S$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i$O$|i(`$|i(q$|i!]$|i!^$|i~P'%zO!Q)|O'x)}O(y%POP'haR'ha['haj'han'har'ha!S'ha!l'ha!p'ha#R'ha#n'ha#o'ha#p'ha#q'ha#r'ha#s'ha#t'ha#u'ha#v'ha#x'ha#z'ha#{'ha$O'ha(`'ha(q'ha(x'ha!]'ha!^'ha~O!Q)|O'x)}OP'jaR'ja['jaj'jan'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja$O'ja(`'ja(q'ja(x'ja(y'ja!]'ja!^'ja~O(x$}OP%aiR%ai[%aij%ain%air%ai!Q%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai$O%ai'x%ai(`%ai(q%ai(y%ai!]%ai!^%ai~O(y%POP%ciR%ci[%cij%cin%cir%ci!Q%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci$O%ci'x%ci(`%ci(q%ci(x%ci!]%ci!^%ci~O$O$oy!]$oy!^$oy~P#B]O$O#cy!]#cy!^#cy~P#B]O!g#vO!]'dq!k'dq~O!]/kO!k(}y~O!Y'fq!]'fq~P#/XOr:pO!g#vO(q'nO~O[:tO!Y:sO~P#/XO!Y:sO~Og(^!R!](^!R~P!0{Oa%[y!_%[y'y%[y!]%[y~P#/XO!]0}O!^)Wy~O!]5kO!^)Tq~O(S:zO~O!_1gO%i:}O~O!k;QO~O%i;VO~P&7ZOP$|qR$|q[$|qj$|qr$|q!S$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q$O$|q(`$|q(q$|q!]$|q!^$|q~P'%zO!Q)|O'x)}O(y%POP'iaR'ia['iaj'ian'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia$O'ia(`'ia(q'ia(x'ia!]'ia!^'ia~O!Q)|O'x)}OP'kaR'ka['kaj'kan'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka$O'ka(`'ka(q'ka(x'ka(y'ka!]'ka!^'ka~OP%OqR%Oq[%Oqj%Oqr%Oq!S%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq$O%Oq(`%Oq(q%Oq!]%Oq!^%Oq~P'%zOg%e!Z!]%e!Z#`%e!Z$O%e!Z~P!0{O!Y;ZO~P#/XOr;[O!g#vO(q'nO~O[;^O!Y;ZO~P#/XO!]'oq!^'oq~P#B]O!]#h!Z!^#h!Z~P#B]O#k%e!ZP%e!ZR%e!Z[%e!Za%e!Zj%e!Zr%e!Z!S%e!Z!]%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z'y%e!Z(`%e!Z(q%e!Z!k%e!Z!Y%e!Z'v%e!Z#`%e!Zv%e!Z!_%e!Z%i%e!Z!g%e!Z~P#/XOr;fO!g#vO(q'nO~O!Y;gO~P#/XOr;nO!g#vO(q'nO~O!Y;oO~P#/XOP%e!ZR%e!Z[%e!Zj%e!Zr%e!Z!S%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z$O%e!Z(`%e!Z(q%e!Z!]%e!Z!^%e!Z~P'%zOr;rO!g#vO(q'nO~Ov(eX~P1qO!Q%qO~P!)PO(T!lO~P!)PO!YfX!]fX#`fX~P%0kOP]XR]X[]Xj]Xr]X!Q]X!S]X!]]X!]fX!l]X!p]X#R]X#S]X#`]X#`fX#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(`]X(q]X(x]X(y]X~O!gfX!k]X!kfX(qfX~P'JsOP;vOQ;vOSfOd=rOe!iOpkOr;vOskOtkOzkO|;vO!O;vO!SWO!WkO!XkO!_XO!i;yO!lZO!o;vO!p;vO!q;vO!s;zO!u;}O!x!hO$W!kO$n=pO(S)ZO(UTO(XUO(`VO(n[O~O!]<ZO!^$qa~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<fO!S${O!_$|O!i=wO!l$xO#j<lO$W%_O$t<hO$v<jO$y%`O(S(tO(UTO(XUO(`$uO(x$}O(y%PO~Ol)bO~P( iOr!eX(q!eX~P# }Or(iX(q(iX~P#!pO!^]X!^fX~P'JsO!YfX!Y$zX!]fX!]$zX#`fX~P!/wO#k<OO~O!g#vO#k<OO~O#`<`O~Oj<SO~O#`<pO!](vX!^(vX~O#`<`O!](tX!^(tX~O#k<qO~Og<sO~P!0{O#k<yO~O#k<zO~O!g#vO#k<{O~O!g#vO#k<qO~O$O<|O~P#B]O#k<}O~O#k=OO~O#k=TO~O#k=UO~O#k=VO~O#k=WO~O$O=XO~P!0{O$O=YO~P!0{Ok#S#T#U#W#X#[#i#j#u$n$t$v$y%]%^%h%i%j%q%s%v%w%y%{~'}T#o!X'{(T#ps#n#qr!Q'|$]'|(S$_(d~",goto:"$8g)[PPPPPP)]PP)`P)qP+R/WPPPP6bPP6xPP<pPPP@dP@zP@zPPP@zPCSP@zP@zP@zPCWPC]PCzPHtPPPHxPPPPHxK{PPPLRLsPHxPHxPP! RHxPPPHxPHxP!#YHxP!&p!'u!(OP!(r!(v!(r!,TPPPPPPP!,t!'uPP!-U!.vP!2SHxHx!2X!5e!:R!:R!>QPPP!>YHxPPPPPPPPP!AiP!BvPPHx!DXPHxPHxHxHxHxHxPHx!EkP!HuP!K{P!LP!LZ!L_!L_P!HrP!Lc!LcP# iP# mHxPHx# s#$xCW@zP@zP@z@zP#&V@z@z#(i@z#+a@z#-m@z@z#.]#0q#0q#0v#1P#0q#1[PP#0qP@z#1t@z#5s@z@z6bPPP#9xPPP#:c#:cP#:cP#:y#:cPP#;PP#:vP#:v#;d#:v#<O#<U#<X)`#<[)`P#<c#<c#<cP)`P)`P)`P)`PP)`P#<i#<lP#<l)`P#<pP#<sP)`P)`P)`P)`P)`P)`)`PP#<y#=P#=[#=b#=h#=n#=t#>S#>Y#>d#>j#>t#>z#?[#?b#@S#@f#@l#@r#AQ#Ag#C[#Cj#Cq#E]#Ek#G]#Gk#Gq#Gw#G}#HX#H_#He#Ho#IR#IXPPPPPPPPPPP#I_PPPPPPP#JS#MZ#Ns#Nz$ SPPP$&nP$&w$)p$0Z$0^$0a$1`$1c$1j$1rP$1x$1{P$2i$2m$3e$4s$4x$5`PP$5e$5k$5o$5r$5v$5z$6v$7_$7v$7z$7}$8Q$8W$8Z$8_$8cR!|RoqOXst!Z#d%l&p&r&s&u,n,s2S2VY!vQ'^-`1g5qQ%svQ%{yQ&S|Q&h!VS'U!e-WQ'd!iS'j!r!yU*h$|*X*lQ+l%|Q+y&UQ,_&bQ-^']Q-h'eQ-p'kQ0U*nQ1q,`R<m;z%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y,k,n,s-d-l-z.Q.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3d4q5y6Z6[6_6r8i8x9SS#q];w!r)]$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sU*{%[<e<fQ+q&OQ,a&eQ,h&mQ0r+dQ0w+fQ1S+rQ1y,fQ3W.bQ5V0vQ5]0}Q6Q1rQ7O3[Q8U5^R9Y7Q'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=s!S!nQ!r!v!y!z$|'U']'^'j'k'l*h*l*n*o-W-^-`-p0U0X1g5q5s%[$ti#v$b$c$d$x${%O%Q%]%^%b)w*P*R*T*W*^*d*t*u+c+f+},Q.a.z/_/h/r/s/u0Y0[0g0h0i1^1a1i3Z4U4V4a4f4w5R5U5x6|7l7v7|8Q8f9V9e9n9t:S:f:t:};V;^<^<_<a<b<c<d<g<h<i<j<k<l<t<u<v<w<y<z<}=O=P=Q=R=S=T=U=X=Y=p=x=y=|=}Q&V|Q'S!eS'Y%h-ZQ+q&OQ,a&eQ0f+OQ1S+rQ1X+xQ1x,eQ1y,fQ5]0}Q5f1ZQ6Q1rQ6T1tQ6U1wQ8U5^Q8X5cQ8q6WQ9|8YQ:Y8nR<o*XrnOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VR,c&i&z^OPXYstuvwz!Z!`!g!j!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=r=s[#]WZ#W#Z'V(R!b%im#h#i#l$x%d%g([(f(g(h*W*[*_+W+X+Z,j-Q.O.U.V.W.Y/h/k2[3S3T4X6h6yQ%vxQ%zyS&P|&UQ&]!TQ'a!hQ'c!iQ(o#sS+k%{%|Q+o&OQ,Y&`Q,^&bS-g'd'eQ.d(pQ0{+lQ1R+rQ1T+sQ1W+wQ1l,ZS1p,_,`Q2t-hQ5[0}Q5`1QQ5e1YQ6P1qQ8T5^Q8W5bQ9x8SR:w9y!U$zi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y!^%xy!i!u%z%{%|'T'c'd'e'i's*g+k+l-T-g-h-o/{0O0{2m2t2{4i4j4m7s9pQ+e%vQ,O&YQ,R&ZQ,]&bQ.c(oQ1k,YU1o,^,_,`Q3].dQ5z1lS6O1p1qQ8m6P#f=t#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}o=u<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=YW%Ti%V*v=pS&Y!Q&gQ&Z!RQ&[!SQ+S%cR+|&W%]%Si#v$b$c$d$x${%O%Q%]%^%b)w*P*R*T*W*^*d*t*u+c+f+},Q.a.z/_/h/r/s/u0Y0[0g0h0i1^1a1i3Z4U4V4a4f4w5R5U5x6|7l7v7|8Q8f9V9e9n9t:S:f:t:};V;^<^<_<a<b<c<d<g<h<i<j<k<l<t<u<v<w<y<z<}=O=P=Q=R=S=T=U=X=Y=p=x=y=|=}T)x$u)yV*{%[<e<fW'Y!e%h*X-ZS({#y#zQ+`%qQ+v&RS.](k(lQ1b,SQ4x0cR8^5k'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=s$i$^c#Y#e%p%r%t(Q(W(r(w)P)Q)R)S)T)U)V)W)X)Y)[)^)`)e)o+a+u-U-s-x-}.P.n.q.u.w.x.y/]0j2c2f2v2}3c3h3i3j3k3l3m3n3o3p3q3r3s3t3w3x4P5O5Y6k6q6v7V7W7a7b8`8|9Q9[9b9c:c:y;R;x=gT#TV#U'RkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sQ'W!eR2i-W!W!nQ!e!r!v!y!z$|'U']'^'j'k'l*X*h*l*n*o-W-^-`-p0U0X1g5q5sR1d,UnqOXst!Z#d%l&p&r&s&u,n,s2S2VQ&w!^Q't!xS(q#u<OQ+i%yQ,W&]Q,X&_Q-e'bQ-r'mS.m(v<qS0k+U<{Q0y+jQ1f,VQ2Z,uQ2],vQ2e-RQ2r-fQ2u-jS5P0l=VQ5W0zS5Z0|=WQ6j2gQ6n2sQ6s2zQ8R5XQ8}6lQ9O6oQ9R6tR:`8z$d$]c#Y#e%r%t(Q(W(r(w)P)Q)R)S)T)U)V)W)X)Y)[)^)`)e)o+a+u-U-s-x-}.P.n.q.u.x.y/]0j2c2f2v2}3c3h3i3j3k3l3m3n3o3p3q3r3s3t3w3x4P5O5Y6k6q6v7V7W7a7b8`8|9Q9[9b9c:c:y;R;x=gS(m#p'gQ(}#zS+_%p.wS.^(l(nR3U._'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sS#q];wQ&r!XQ&s!YQ&u![Q&v!]R2R,qQ'_!hQ+b%vQ-c'aS.`(o+eQ2p-bW3Y.c.d0q0sQ6m2qW6z3V3X3]5TU9U6{6}7PU:e9W9X9ZS;T:d:gQ;b;UR;j;cU!wQ'^-`T5o1g5q!Q_OXZ`st!V!Z#d#h%d%l&g&i&p&r&s&u(h,n,s.V2S2V]!pQ!r'^-`1g5qT#q];w%^{OPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SS({#y#zS.](k(l!s=^$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sU$fd)],hS(n#p'gU*s%R(u3vU0e*z.i7]Q5T0rQ6{3WQ9X7OR:g9Ym!tQ!r!v!y!z'^'j'k'l-`-p1g5q5sQ'r!uS(d#g1|S-n'i'uQ/n*ZQ/{*gQ2|-qQ4]/oQ4i/}Q4j0OQ4o0WQ7h4WS7s4k4mS7w4p4rQ9g7iQ9k7oQ9p7tQ9u7yS:o9l9mS;Y:p:sS;e;Z;[S;m;f;gS;q;n;oR;t;rQ#wbQ'q!uS(c#g1|S(e#m+TQ+V%eQ+g%wQ+m%}U-m'i'r'uQ.R(dQ/m*ZQ/|*gQ0P*iQ0x+hQ1m,[S2y-n-qQ3R.ZS4[/n/oQ4e/yS4h/{0WQ4l0QQ5|1nQ6u2|Q7g4WQ7k4]U7r4i4o4rQ7u4nQ8k5}S9f7h7iQ9j7oQ9r7wQ9s7xQ:V8lQ:m9gS:n9k9mQ:v9uQ;P:WS;X:o:sS;d;Y;ZS;l;e;gS;p;m;oQ;s;qQ;u;tQ=a=[Q=l=eR=m=fV!wQ'^-`%^aOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SS#wz!j!r=Z$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sR=a=r%^bOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SQ%ej!^%wy!i!u%z%{%|'T'c'd'e'i's*g+k+l-T-g-h-o/{0O0{2m2t2{4i4j4m7s9pS%}z!jQ+h%xQ,[&bW1n,],^,_,`U5}1o1p1qS8l6O6PQ:W8m!r=[$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sQ=e=qR=f=r%QeOPXYstuvw!Z!`!g!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&p&r&s&u&y'R'`'p(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SY#bWZ#W#Z(R!b%im#h#i#l$x%d%g([(f(g(h*W*[*_+W+X+Z,j-Q.O.U.V.W.Y/h/k2[3S3T4X6h6yQ,i&m!p=]$Z$n)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sR=`'VU'Z!e%h*XR2k-Z%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y,k,n,s-d-l-z.Q.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3d4q5y6Z6[6_6r8i8x9S!r)]$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sQ,h&mQ0r+dQ3W.bQ7O3[R9Y7Q!b$Tc#Y%p(Q(W(r(w)X)Y)^)e+u-s-x-}.P.n.q/]0j2v2}3c3s5O5Y6q6v7V9Q:c;x!P<U)[)o-U.w2c2f3h3q3r3w4P6k7W7a7b8`8|9[9b9c:y;R=g!f$Vc#Y%p(Q(W(r(w)U)V)X)Y)^)e+u-s-x-}.P.n.q/]0j2v2}3c3s5O5Y6q6v7V9Q:c;x!T<W)[)o-U.w2c2f3h3n3o3q3r3w4P6k7W7a7b8`8|9[9b9c:y;R=g!^$Zc#Y%p(Q(W(r(w)^)e+u-s-x-}.P.n.q/]0j2v2}3c3s5O5Y6q6v7V9Q:c;xQ4V/fz=s)[)o-U.w2c2f3h3w4P6k7W7a7b8`8|9[9b9c:y;R=gQ=x=zR=y={'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sS$oh$pR3|/P'XgOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/P/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sT$kf$qQ$ifS)h$l)lR)t$qT$jf$qT)j$l)l'XhOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/P/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sT$oh$pQ$rhR)s$p%^jOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9S!s=q$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=s#glOPXZst!Z!`!o#S#d#o#{$n%l&i&l&m&p&r&s&u&y'R'`(|)q*f+Y+d,k,n,s-d.b/Q/i0V0d1j1z1{1}2P2S2V2X3[3{4q5y6Z6[6_7Q8i8x!U%Ri$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y#f(u#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}Q+P%`Q/^)|o3v<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=Y!U$yi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=yQ*`$zU*i$|*X*lQ+Q%aQ0Q*j#f=c#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}n=d<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=YQ=h=tQ=i=uQ=j=vR=k=w!U%Ri$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y#f(u#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}o3v<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=YnoOXst!Z#d%l&p&r&s&u,n,s2S2VS*c${*WQ,|&|Q,}'OR4`/s%[%Si#v$b$c$d$x${%O%Q%]%^%b)w*P*R*T*W*^*d*t*u+c+f+},Q.a.z/_/h/r/s/u0Y0[0g0h0i1^1a1i3Z4U4V4a4f4w5R5U5x6|7l7v7|8Q8f9V9e9n9t:S:f:t:};V;^<^<_<a<b<c<d<g<h<i<j<k<l<t<u<v<w<y<z<}=O=P=Q=R=S=T=U=X=Y=p=x=y=|=}Q,P&ZQ1`,RQ5i1_R8]5jV*k$|*X*lU*k$|*X*lT5p1g5qS/y*f/iQ4n0VT7x4q:PQ+g%wQ0P*iQ0x+hQ1m,[Q5|1nQ8k5}Q:V8lR;P:W!U%Oi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=yx*P$v)c*Q*r+R/q0^0_3y4^4{4|4}7f7z9v:l=b=n=oS0Y*q0Z#f<a#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}n<b<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=Y!d<t(s)a*Y*b.e.h.l/Y/f/v0p1]3`4S4_4c5h7R7U7m7p7}8P9i9q9w:q:u;W;];h=z={`<u3u7X7[7`9]:h:k;kS=P.g3aT=Q7Z9`!U%Qi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y|*R$v)c*S*q+R/b/q0^0_3y4^4s4{4|4}7f7z9v:l=b=n=oS0[*r0]#f<c#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}n<d<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=Y!h<v(s)a*Y*b.f.g.l/Y/f/v0p1]3^3`4S4_4c5h7R7S7U7m7p7}8P9i9q9w:q:u;W;];h=z={d<w3u7Y7Z7`9]9^:h:i:k;kS=R.h3bT=S7[9arnOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VQ&d!UR,k&mrnOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VR&d!UQ,T&[R1[+|snOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VQ1h,YS5w1k1lU8e5u5v5zS:R8g8hS:{:Q:TQ;_:|R;i;`Q&k!VR,d&gR6T1tR:Y8nS&P|&UR1T+sQ&p!WR,n&qR,t&vT2T,s2VR,x&wQ,w&wR2^,xQ'w!{R-t'wSsOtQ#dXT%os#dQ#OTR'y#OQ#RUR'{#RQ)y$uR/Z)yQ#UVR(O#UQ#XWU(U#X(V-{Q(V#YR-{(WQ-X'WR2j-XQ.p(wS3e.p3fR3f.qQ-`'^R2n-`Y!rQ'^-`1g5qR'h!rQ.{)cR3z.{U#_W%g*WU(]#_(^-|Q(^#`R-|(XQ-['ZR2l-[t`OXst!V!Z#d%l&g&i&p&r&s&u,n,s2S2VS#hZ%dU#r`#h.VR.V(hQ(i#jQ.S(eW.[(i.S3P6wQ3P.TR6w3QQ)l$lR/R)lQ$phR)r$pQ$`cU)_$`-w<[Q-w;xR<[)oQ/l*ZW4Y/l4Z7j9hU4Z/m/n/oS7j4[4]R9h7k$e*O$v(s)a)c*Y*b*q*r*|*}+R.g.h.j.k.l/Y/b/d/f/q/v0^0_0p1]3^3_3`3u3y4S4^4_4c4s4u4{4|4}5h7R7S7T7U7Z7[7^7_7`7f7m7p7z7}8P9]9^9_9i9q9v9w:h:i:j:k:l:q:u;W;];h;k=b=n=o=z={Q/t*bU4b/t4d7nQ4d/vR7n4cS*l$|*XR0S*lx*Q$v)c*q*r+R/q0^0_3y4^4{4|4}7f7z9v:l=b=n=o!d.e(s)a*Y*b.g.h.l/Y/f/v0p1]3`4S4_4c5h7R7U7m7p7}8P9i9q9w:q:u;W;];h=z={U/c*Q.e7Xa7X3u7Z7[7`9]:h:k;kQ0Z*qQ3a.gU4t0Z3a9`R9`7Z|*S$v)c*q*r+R/b/q0^0_3y4^4s4{4|4}7f7z9v:l=b=n=o!h.f(s)a*Y*b.g.h.l/Y/f/v0p1]3^3`4S4_4c5h7R7S7U7m7p7}8P9i9q9w:q:u;W;];h=z={U/e*S.f7Ye7Y3u7Z7[7`9]9^:h:i:k;kQ0]*rQ3b.hU4v0]3b9aR9a7[Q*w%UR0a*wQ5S0pR8O5SQ+[%jR0o+[Q5l1bS8_5l:OR:O8`Q,V&]R1e,VQ5q1gR8b5qQ1s,aS6R1s8oR8o6TQ1O+oW5_1O5a8V9zQ5a1RQ8V5`R9z8WQ+t&PR1U+tQ2V,sR6c2VYrOXst#dQ&t!ZQ+^%lQ,m&pQ,o&rQ,p&sQ,r&uQ2Q,nS2T,s2VR6b2SQ%npQ&x!_Q&{!aQ&}!bQ'P!cQ'o!uQ+]%kQ+i%yQ+{&VQ,c&kQ,z&zW-k'i'q'r'uQ-r'mQ0R*kQ0y+jS1v,d,gQ2_,yQ2`,|Q2a,}Q2u-jW2w-m-n-q-sQ5W0zQ5d1XQ5g1]Q5{1mQ6V1xQ6a2RU6p2v2y2|Q6s2zQ8R5XQ8Z5fQ8[5hQ8a5pQ8j5|Q8p6US9P6q6uQ9R6tQ9{8XQ:U8kQ:Z8qQ:b9QQ:x9|Q;O:VQ;S:cR;a;PQ%yyQ'b!iQ'm!uU+j%z%{%|Q-R'TU-f'c'd'eS-j'i'sQ/z*gS0z+k+lQ2g-TS2s-g-hQ2z-oS4g/{0OQ5X0{Q6l2mQ6o2tQ6t2{U7q4i4j4mQ9o7sR:r9pS$wi=pR*x%VU%Ui%V=pR0`*vQ$viS(s#v+fS)a$b$cQ)c$dQ*Y$xS*b${*WQ*q%OQ*r%QQ*|%]Q*}%^Q+R%bQ.g<aQ.h<cQ.j<gQ.k<iQ.l<kQ/Y)wQ/b*PQ/d*RQ/f*TQ/q*^S/v*d/hQ0^*tQ0_*ul0p+c,Q.a1a1i3Z5x6|8f9V:S:f:};VQ1]+}Q3^<tQ3_<vQ3`<yS3u<^<_Q3y.zS4S/_4UQ4^/rQ4_/sQ4c/uQ4s0YQ4u0[Q4{0gQ4|0hQ4}0iQ5h1^Q7R<}Q7S=PQ7T=RQ7U=TQ7Z<bQ7[<dQ7^<hQ7_<jQ7`<lQ7f4VQ7m4aQ7p4fQ7z4wQ7}5RQ8P5UQ9]<zQ9^<uQ9_<wQ9i7lQ9q7vQ9v7|Q9w8QQ:h=OQ:i=QQ:j=SQ:k=UQ:l9eQ:q9nQ:u9tQ;W=XQ;]:tQ;h;^Q;k=YQ=b=pQ=n=xQ=o=yQ=z=|R={=}Q*z%[Q.i<eR7]<fnpOXst!Z#d%l&p&r&s&u,n,s2S2VQ!fPS#fZ#oQ&z!`W'f!o*f0V4qQ'}#SQ)O#{Q)p$nS,g&i&lQ,l&mQ,y&yS-O'R/iQ-b'`Q.s(|Q/V)qQ0m+YQ0s+dQ2O,kQ2q-dQ3X.bQ4O/QQ4y0dQ5v1jQ6X1zQ6Y1{Q6^1}Q6`2PQ6e2XQ7P3[Q7c3{Q8h5yQ8t6ZQ8u6[Q8w6_Q9Z7QQ:T8iR:_8x#[cOPXZst!Z!`!o#d#o#{%l&i&l&m&p&r&s&u&y'R'`(|*f+Y+d,k,n,s-d.b/i0V0d1j1z1{1}2P2S2V2X3[4q5y6Z6[6_7Q8i8xQ#YWQ#eYQ%puQ%rvS%tw!gS(Q#W(TQ(W#ZQ(r#uQ(w#xQ)P$OQ)Q$PQ)R$QQ)S$RQ)T$SQ)U$TQ)V$UQ)W$VQ)X$WQ)Y$XQ)[$ZQ)^$_Q)`$aQ)e$eW)o$n)q/Q3{Q+a%sQ+u&QS-U'V2hQ-s'pS-x(R-zQ-}(ZQ.P(bQ.n(vQ.q(xQ.u;vQ.w;yQ.x;zQ.y;}Q/]){Q0j+UQ2c-PQ2f-SQ2v-lQ2}.QQ3c.oQ3h<OQ3i<PQ3j<QQ3k<RQ3l<SQ3m<TQ3n<UQ3o<VQ3p<WQ3q<XQ3r<YQ3s.vQ3t<]Q3w<`Q3x<mQ4P<ZQ5O0lQ5Y0|Q6k<pQ6q2xQ6v3OQ7V3dQ7W<qQ7a<sQ7b<{Q8`5mQ8|6iQ9Q6rQ9[<|Q9b=VQ9c=WQ:c9SQ:y9}Q;R:aQ;x#SR=g=sR#[WR'X!el!tQ!r!v!y!z'^'j'k'l-`-p1g5q5sS'T!e-WU*g$|*X*lS-T'U']S0O*h*nQ0W*oQ2m-^Q4m0UR4r0XR(y#xQ!fQT-_'^-`]!qQ!r'^-`1g5qQ#p]R'g;wR)d$dY!uQ'^-`1g5qQ'i!rS's!v!yS'u!z5sS-o'j'kQ-q'lR2{-pT#kZ%dS#jZ%dS%jm,jU(e#h#i#lS.T(f(gQ.X(hQ0n+ZQ3Q.UU3R.V.W.YS6x3S3TR9T6yd#^W#W#Z%g(R([*W+W.O/hr#gZm#h#i#l%d(f(g(h+Z.U.V.W.Y3S3T6yS*Z$x*_Q/o*[Q1|,jQ2d-QQ4W/kQ6g2[Q7i4XQ8{6hT=_'V+XV#aW%g*WU#`W%g*WS(S#W([U(X#Z+W/hS-V'V+XT-y(R.OV'[!e%h*XQ$lfR)v$qT)k$l)lR3}/PT*]$x*_T*e${*WQ0q+cQ1_,QQ3V.aQ5j1aQ5u1iQ6}3ZQ8g5xQ9W6|Q:Q8fQ:d9VQ:|:SQ;U:fQ;`:}R;c;VnqOXst!Z#d%l&p&r&s&u,n,s2S2VQ&j!VR,c&gtmOXst!U!V!Z#d%l&g&p&r&s&u,n,s2S2VR,j&mT%km,jR1c,SR,b&eQ&T|R+z&UR+p&OT&n!W&qT&o!W&qT2U,s2V",nodeNames:"⚠ ArithOp ArithOp ?. JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList in out const TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewTarget new NewExpression ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression TypeArgList CompareOp < declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression InstantiationExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast < ArrowFunction TypeParamList SequenceExpression InstantiationExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate asserts is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:379,context:ko,nodeProps:[["isolate",-8,5,6,14,37,39,51,53,55,""],["group",-26,9,17,19,68,207,211,215,216,218,221,224,234,236,242,244,246,248,251,257,263,265,267,269,271,273,274,"Statement",-34,13,14,32,35,36,42,51,54,55,57,62,70,72,76,80,82,84,85,110,111,120,121,136,139,141,142,143,144,145,147,148,167,169,171,"Expression",-23,31,33,37,41,43,45,173,175,177,178,180,181,182,184,185,186,188,189,190,201,203,205,206,"Type",-3,88,103,109,"ClassItem"],["openedBy",23,"<",38,"InterpolationStart",56,"[",60,"{",73,"(",160,"JSXStartCloseTag"],["closedBy",-2,24,168,">",40,"InterpolationEnd",50,"]",61,"}",74,")",165,"JSXEndTag"]],propSources:[kp],skippedNodes:[0,5,6,277],repeatNodeCount:37,tokenData:"$Fq07[R!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#:O!R![#<_![!]#I_!]!^#Jk!^!_#Ku!_!`$![!`!a$$v!a!b$*T!b!c$,r!c!}Er!}#O$-|#O#P$/W#P#Q$4o#Q#R$5y#R#SEr#S#T$7W#T#o$8b#o#p$<r#p#q$=h#q#r$>x#r#s$@U#s$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$I|Er$I|$I}$Dk$I}$JO$Dk$JO$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr(n%d_$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$i&j(Y!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(Y!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$i&j(VpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(VpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Vp(Y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z07[+rq$i&j(Vp(Y!b'{0/lOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z07[.ST(W#S$i&j'|0/lO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c07[.n_$i&j(Vp(Y!b'|0/lOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)3p/x`$i&j!p),Q(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW1V`#v(Ch$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW2d_#v(Ch$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At3l_(U':f$i&j(Y!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$i&j(Y!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$i&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$d`$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$d``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$d`$i&j(Y!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(Y!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$d`(Y!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k%9[:hh$i&j(Vp(Y!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__WS$i&j(Vp(Y!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]WS$i&j(Y!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXWS$i&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSWSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWWS(Y!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]WS$i&j(VpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWWS(VpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYWS(Vp(Y!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S%9[C}i$i&j(n%1l(Vp(Y!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr%9[EoP;=`<%lCr07[FRk$i&j(Vp(Y!b$]#t(S,2j(d$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$i&j(Vp(Y!b$]#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv07[JPP;=`<%lEr(KWJ_`$i&j(Vp(Y!b#p(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWKl_$i&j$Q(Ch(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,#xLva(y+JY$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWNW`$i&j#z(Ch(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At! c_(X';W$i&j(VpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$i&j(VpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$i&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$d`$i&j(VpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(VpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$d`(VpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b/5|!'t_!l/.^$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&U!)O_!k!Lf$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z-!n!*[b$i&j(Vp(Y!b(T%&f#q(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW!+o`$i&j(Vp(Y!b#n(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;x!,|`$i&j(Vp(Y!br+4YOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,$U!.Z_!]+Jf$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!/ec$i&j(Vp(Y!b!Q.2^OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!0ya$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!2Z_![!L^$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!3eg$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!5Vg$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!6wc$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!8_c$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!9uf$i&j(Vp(Y!b#o(ChOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcxz!;Zz{#-}{!P!;Z!P!Q#/d!Q!^!;Z!^!_#(i!_!`#7S!`!a#8i!a!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z?O!;fb$i&j(Vp(Y!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z>^!<w`$i&j(Y!b!X7`OY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eq!Q!^!<n!^!_!Gr!_!}!<n!}#O!KS#O#P!Dy#P#o!<n#o#p!Gr#p;'S!<n;'S;=`!L]<%lO!<n<z!>Q^$i&j!X7`OY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@c!_!}!=y!}#O!CW#O#P!Dy#P#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!?Td$i&j!X7`O!^&c!_#W&c#W#X!>|#X#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#k!>|#k#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&c7`!@hX!X7`OY!@cZ!P!@c!P!Q!AT!Q!}!@c!}#O!Ar#O#P!Bq#P;'S!@c;'S;=`!CQ<%lO!@c7`!AYW!X7`#W#X!AT#Z#[!AT#]#^!AT#a#b!AT#g#h!AT#i#j!AT#j#k!AT#m#n!AT7`!AuVOY!ArZ#O!Ar#O#P!B[#P#Q!@c#Q;'S!Ar;'S;=`!Bk<%lO!Ar7`!B_SOY!ArZ;'S!Ar;'S;=`!Bk<%lO!Ar7`!BnP;=`<%l!Ar7`!BtSOY!@cZ;'S!@c;'S;=`!CQ<%lO!@c7`!CTP;=`<%l!@c<z!C][$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#O!CW#O#P!DR#P#Q!=y#Q#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DWX$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DvP;=`<%l!CW<z!EOX$i&jOY!=yYZ&cZ!^!=y!^!_!@c!_#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!EnP;=`<%l!=y>^!Ezl$i&j(Y!b!X7`OY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#W&}#W#X!Eq#X#Z&}#Z#[!Eq#[#]&}#]#^!Eq#^#a&}#a#b!Eq#b#g&}#g#h!Eq#h#i&}#i#j!Eq#j#k!Eq#k#m&}#m#n!Eq#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}8r!GyZ(Y!b!X7`OY!GrZw!Grwx!@cx!P!Gr!P!Q!Hl!Q!}!Gr!}#O!JU#O#P!Bq#P;'S!Gr;'S;=`!J|<%lO!Gr8r!Hse(Y!b!X7`OY'}Zw'}x#O'}#P#W'}#W#X!Hl#X#Z'}#Z#[!Hl#[#]'}#]#^!Hl#^#a'}#a#b!Hl#b#g'}#g#h!Hl#h#i'}#i#j!Hl#j#k!Hl#k#m'}#m#n!Hl#n;'S'};'S;=`(f<%lO'}8r!JZX(Y!bOY!JUZw!JUwx!Arx#O!JU#O#P!B[#P#Q!Gr#Q;'S!JU;'S;=`!Jv<%lO!JU8r!JyP;=`<%l!JU8r!KPP;=`<%l!Gr>^!KZ^$i&j(Y!bOY!KSYZ&cZw!KSwx!CWx!^!KS!^!_!JU!_#O!KS#O#P!DR#P#Q!<n#Q#o!KS#o#p!JU#p;'S!KS;'S;=`!LV<%lO!KS>^!LYP;=`<%l!KS>^!L`P;=`<%l!<n=l!Ll`$i&j(Vp!X7`OY!LcYZ&cZr!Lcrs!=ys!P!Lc!P!Q!Mn!Q!^!Lc!^!_# o!_!}!Lc!}#O#%P#O#P!Dy#P#o!Lc#o#p# o#p;'S!Lc;'S;=`#&Y<%lO!Lc=l!Mwl$i&j(Vp!X7`OY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#W(r#W#X!Mn#X#Z(r#Z#[!Mn#[#](r#]#^!Mn#^#a(r#a#b!Mn#b#g(r#g#h!Mn#h#i(r#i#j!Mn#j#k!Mn#k#m(r#m#n!Mn#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r8Q# vZ(Vp!X7`OY# oZr# ors!@cs!P# o!P!Q#!i!Q!}# o!}#O#$R#O#P!Bq#P;'S# o;'S;=`#$y<%lO# o8Q#!pe(Vp!X7`OY)rZr)rs#O)r#P#W)r#W#X#!i#X#Z)r#Z#[#!i#[#])r#]#^#!i#^#a)r#a#b#!i#b#g)r#g#h#!i#h#i)r#i#j#!i#j#k#!i#k#m)r#m#n#!i#n;'S)r;'S;=`*Z<%lO)r8Q#$WX(VpOY#$RZr#$Rrs!Ars#O#$R#O#P!B[#P#Q# o#Q;'S#$R;'S;=`#$s<%lO#$R8Q#$vP;=`<%l#$R8Q#$|P;=`<%l# o=l#%W^$i&j(VpOY#%PYZ&cZr#%Prs!CWs!^#%P!^!_#$R!_#O#%P#O#P!DR#P#Q!Lc#Q#o#%P#o#p#$R#p;'S#%P;'S;=`#&S<%lO#%P=l#&VP;=`<%l#%P=l#&]P;=`<%l!Lc?O#&kn$i&j(Vp(Y!b!X7`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#W%Z#W#X#&`#X#Z%Z#Z#[#&`#[#]%Z#]#^#&`#^#a%Z#a#b#&`#b#g%Z#g#h#&`#h#i%Z#i#j#&`#j#k#&`#k#m%Z#m#n#&`#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z9d#(r](Vp(Y!b!X7`OY#(iZr#(irs!Grsw#(iwx# ox!P#(i!P!Q#)k!Q!}#(i!}#O#+`#O#P!Bq#P;'S#(i;'S;=`#,`<%lO#(i9d#)th(Vp(Y!b!X7`OY*gZr*grs'}sw*gwx)rx#O*g#P#W*g#W#X#)k#X#Z*g#Z#[#)k#[#]*g#]#^#)k#^#a*g#a#b#)k#b#g*g#g#h#)k#h#i*g#i#j#)k#j#k#)k#k#m*g#m#n#)k#n;'S*g;'S;=`+Z<%lO*g9d#+gZ(Vp(Y!bOY#+`Zr#+`rs!JUsw#+`wx#$Rx#O#+`#O#P!B[#P#Q#(i#Q;'S#+`;'S;=`#,Y<%lO#+`9d#,]P;=`<%l#+`9d#,cP;=`<%l#(i?O#,o`$i&j(Vp(Y!bOY#,fYZ&cZr#,frs!KSsw#,fwx#%Px!^#,f!^!_#+`!_#O#,f#O#P!DR#P#Q!;Z#Q#o#,f#o#p#+`#p;'S#,f;'S;=`#-q<%lO#,f?O#-tP;=`<%l#,f?O#-zP;=`<%l!;Z07[#.[b$i&j(Vp(Y!b'}0/l!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z07[#/o_$i&j(Vp(Y!bT0/lOY#/dYZ&cZr#/drs#0nsw#/dwx#4Ox!^#/d!^!_#5}!_#O#/d#O#P#1p#P#o#/d#o#p#5}#p;'S#/d;'S;=`#6|<%lO#/d06j#0w]$i&j(Y!bT0/lOY#0nYZ&cZw#0nwx#1px!^#0n!^!_#3R!_#O#0n#O#P#1p#P#o#0n#o#p#3R#p;'S#0n;'S;=`#3x<%lO#0n05W#1wX$i&jT0/lOY#1pYZ&cZ!^#1p!^!_#2d!_#o#1p#o#p#2d#p;'S#1p;'S;=`#2{<%lO#1p0/l#2iST0/lOY#2dZ;'S#2d;'S;=`#2u<%lO#2d0/l#2xP;=`<%l#2d05W#3OP;=`<%l#1p01O#3YW(Y!bT0/lOY#3RZw#3Rwx#2dx#O#3R#O#P#2d#P;'S#3R;'S;=`#3r<%lO#3R01O#3uP;=`<%l#3R06j#3{P;=`<%l#0n05x#4X]$i&j(VpT0/lOY#4OYZ&cZr#4Ors#1ps!^#4O!^!_#5Q!_#O#4O#O#P#1p#P#o#4O#o#p#5Q#p;'S#4O;'S;=`#5w<%lO#4O00^#5XW(VpT0/lOY#5QZr#5Qrs#2ds#O#5Q#O#P#2d#P;'S#5Q;'S;=`#5q<%lO#5Q00^#5tP;=`<%l#5Q05x#5zP;=`<%l#4O01p#6WY(Vp(Y!bT0/lOY#5}Zr#5}rs#3Rsw#5}wx#5Qx#O#5}#O#P#2d#P;'S#5};'S;=`#6v<%lO#5}01p#6yP;=`<%l#5}07[#7PP;=`<%l#/d)3h#7ab$i&j$Q(Ch(Vp(Y!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;ZAt#8vb$Z#t$i&j(Vp(Y!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z'Ad#:Zp$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#U%Z#U#V#?i#V#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#d#Bq#d#l%Z#l#m#Es#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#<jk$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#>j_$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#?rd$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#A]f$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Bzc$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Dbe$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#E|g$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Gpi$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x#Il_!g$b$i&j$O)Lv(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Jv_al$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f#LS^h#)`#R-<U(Vp(Y!b$n7`OY*gZr*grs'}sw*gwx)rx!P*g!P!Q#MO!Q!^*g!^!_#Mt!_!`$ f!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#MXX$k&j(Vp(Y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El#M}Z#r(Ch(Vp(Y!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Np!`#O*g#P;'S*g;'S;=`+Z<%lO*g(El#NyX$Q(Ch(Vp(Y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El$ oX#s(Ch(Vp(Y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g*)x$!ga#`*!Y$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$#l!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(K[$#w_#k(Cl$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x$%Vag!*r#s(Ch$f#|$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$&[!`!a$'f!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$&g_#s(Ch$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$'qa#r(Ch$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$(v!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$)R`#r(Ch$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(Kd$*`a(q(Ct$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!a%Z!a!b$+e!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$+p`$i&j#{(Ch(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`$,}_!|$Ip$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f$.X_!S0,v$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/]Z$i&jO!^$0O!^!_$0f!_#i$0O#i#j$0k#j#l$0O#l#m$2^#m#o$0O#o#p$0f#p;'S$0O;'S;=`$4i<%lO$0O(n$0VT_#S$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0kO_#S(n$0p[$i&jO!Q&c!Q![$1f![!^&c!_!c&c!c!i$1f!i#T&c#T#Z$1f#Z#o&c#o#p$3|#p;'S&c;'S;=`&w<%lO&c(n$1kZ$i&jO!Q&c!Q![$2^![!^&c!_!c&c!c!i$2^!i#T&c#T#Z$2^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2cZ$i&jO!Q&c!Q![$3U![!^&c!_!c&c!c!i$3U!i#T&c#T#Z$3U#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3ZZ$i&jO!Q&c!Q![$0O![!^&c!_!c&c!c!i$0O!i#T&c#T#Z$0O#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$4PR!Q![$4Y!c!i$4Y#T#Z$4Y#S$4]S!Q![$4Y!c!i$4Y#T#Z$4Y#q#r$0f(n$4lP;=`<%l$0O#1[$4z_!Y#)l$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$6U`#x(Ch$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;p$7c_$i&j(Vp(Y!b(`+4QOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$8qk$i&j(Vp(Y!b(S,2j$_#t(d$I[OY%ZYZ&cZr%Zrs&}st%Ztu$8buw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$8b![!^%Z!^!_*g!_!c%Z!c!}$8b!}#O%Z#O#P&c#P#R%Z#R#S$8b#S#T%Z#T#o$8b#o#p*g#p$g%Z$g;'S$8b;'S;=`$<l<%lO$8b+d$:qk$i&j(Vp(Y!b$_#tOY%ZYZ&cZr%Zrs&}st%Ztu$:fuw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$:f![!^%Z!^!_*g!_!c%Z!c!}$:f!}#O%Z#O#P&c#P#R%Z#R#S$:f#S#T%Z#T#o$:f#o#p*g#p$g%Z$g;'S$:f;'S;=`$<f<%lO$:f+d$<iP;=`<%l$:f07[$<oP;=`<%l$8b#Jf$<{X!_#Hb(Vp(Y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g,#x$=sa(x+JY$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+e#q;'S%Z;'S;=`+a<%lO%Z)>v$?V_!^(CdvBr$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z?O$@a_!q7`$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$Aq|$i&j(Vp(Y!b'{0/l$]#t(S,2j(d$I[OX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr07[$D|k$i&j(Vp(Y!b'|0/l$]#t(S,2j(d$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[kl,kh,kc,kd,2,3,4,5,6,7,8,9,10,11,12,13,14,ka,new u2("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOx~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!U~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(b~~",141,339),new u2("j~RQYZXz{^~^O(P~~aP!P!Qd~iO(Q~~",25,322)],topRules:{Script:[0,7],SingleExpression:[1,275],SingleClassItem:[2,276]},dialects:{jsx:0,ts:15098},dynamicPrecedences:{80:1,82:1,94:1,169:1,199:1},specialized:[{term:326,get:e=>kf[e]||-1},{term:342,get:e=>kg[e]||-1},{term:95,get:e=>km[e]||-1}],tokenPrec:15124}),kO=cI.define({name:"javascript",parser:ky.configure({props:[cK.add({IfStatement:c4({except:/^\s*({|else\b)/}),TryStatement:c4({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:e=>e.baseIndent,SwitchBody:e=>{let n=e.textAfter,r=/^\s*\}/.test(n),i=/^\s*(case|default)\b/.test(n);return e.baseIndent+(r?0:i?1:2)*e.unit},Block:c2({closing:"}"}),ArrowFunction:e=>e.baseIndent+e.unit,"TemplateString BlockComment":()=>null,"Statement Property":c4({except:/^\s*{/}),JSXElement(e){let n=/^\s*<\//.test(e.textAfter);return e.lineIndent(e.node.from)+(n?0:e.unit)},JSXEscape(e){let n=/\s*\}/.test(e.textAfter);return e.lineIndent(e.node.from)+(n?0:e.unit)},"JSXOpenTag JSXSelfClosingTag":e=>e.column(e.node.from)+e.unit}),c6.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":c9,BlockComment:e=>({from:e.from+2,to:e.to-2})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),kv=(e=>/^JSX/.test(e.name),kO.configure({dialect:"ts"},"typescript"));"object"==typeof navigator&&navigator.userAgent,(()=>{let e;var n,r,i={975:e=>{function n(e){if("string"!=typeof e)throw TypeError("Path must be a string. Received "+JSON.stringify(e))}function r(e,n){for(var r,i="",s=0,o=-1,a=0,l=0;l<=e.length;++l){if(l<e.length)r=e.charCodeAt(l);else{if(47===r)break;r=47}if(47===r){if(o===l-1||1===a);else if(o!==l-1&&2===a){if(i.length<2||2!==s||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2)){if(i.length>2){var h=i.lastIndexOf("/");if(h!==i.length-1){-1===h?(i="",s=0):s=(i=i.slice(0,h)).length-1-i.lastIndexOf("/"),o=l,a=0;continue}}else if(2===i.length||1===i.length){i="",s=0,o=l,a=0;continue}}n&&(i.length>0?i+="/..":i="..",s=2)}else i.length>0?i+="/"+e.slice(o+1,l):i=e.slice(o+1,l),s=l-o-1;o=l,a=0}else 46===r&&-1!==a?++a:a=-1}return i}var i={resolve:function(){for(var e,i,s="",o=!1,a=arguments.length-1;a>=-1&&!o;a--)a>=0?e=arguments[a]:(void 0===i&&(i=process.cwd()),e=i),n(e),0!==e.length&&(s=e+"/"+s,o=47===e.charCodeAt(0));return s=r(s,!o),o?s.length>0?"/"+s:"/":s.length>0?s:"."},normalize:function(e){if(n(e),0===e.length)return".";var i=47===e.charCodeAt(0),s=47===e.charCodeAt(e.length-1);return 0!==(e=r(e,!i)).length||i||(e="."),e.length>0&&s&&(e+="/"),i?"/"+e:e},isAbsolute:function(e){return n(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0==arguments.length)return".";for(var e,r=0;r<arguments.length;++r){var s=arguments[r];n(s),s.length>0&&(void 0===e?e=s:e+="/"+s)}return void 0===e?".":i.normalize(e)},relative:function(e,r){if(n(e),n(r),e===r||(e=i.resolve(e))===(r=i.resolve(r)))return"";for(var s=1;s<e.length&&47===e.charCodeAt(s);++s);for(var o=e.length,a=o-s,l=1;l<r.length&&47===r.charCodeAt(l);++l);for(var h=r.length-l,c=a<h?a:h,u=-1,d=0;d<=c;++d){if(d===c){if(h>c){if(47===r.charCodeAt(l+d))return r.slice(l+d+1);if(0===d)return r.slice(l+d)}else a>c&&(47===e.charCodeAt(s+d)?u=d:0===d&&(u=0));break}var p=e.charCodeAt(s+d);if(p!==r.charCodeAt(l+d))break;47===p&&(u=d)}var f="";for(d=s+u+1;d<=o;++d)d!==o&&47!==e.charCodeAt(d)||(0===f.length?f+="..":f+="/..");return f.length>0?f+r.slice(l+u):(l+=u,47===r.charCodeAt(l)&&++l,r.slice(l))},_makeLong:function(e){return e},dirname:function(e){if(n(e),0===e.length)return".";for(var r=e.charCodeAt(0),i=47===r,s=-1,o=!0,a=e.length-1;a>=1;--a)if(47===(r=e.charCodeAt(a))){if(!o){s=a;break}}else o=!1;return -1===s?i?"/":".":i&&1===s?"//":e.slice(0,s)},basename:function(e,r){if(void 0!==r&&"string"!=typeof r)throw TypeError('"ext" argument must be a string');n(e);var i,s=0,o=-1,a=!0;if(void 0!==r&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var l=r.length-1,h=-1;for(i=e.length-1;i>=0;--i){var c=e.charCodeAt(i);if(47===c){if(!a){s=i+1;break}}else -1===h&&(a=!1,h=i+1),l>=0&&(c===r.charCodeAt(l)?-1==--l&&(o=i):(l=-1,o=h))}return s===o?o=h:-1===o&&(o=e.length),e.slice(s,o)}for(i=e.length-1;i>=0;--i)if(47===e.charCodeAt(i)){if(!a){s=i+1;break}}else -1===o&&(a=!1,o=i+1);return -1===o?"":e.slice(s,o)},extname:function(e){n(e);for(var r=-1,i=0,s=-1,o=!0,a=0,l=e.length-1;l>=0;--l){var h=e.charCodeAt(l);if(47!==h)-1===s&&(o=!1,s=l+1),46===h?-1===r?r=l:1!==a&&(a=1):-1!==r&&(a=-1);else if(!o){i=l+1;break}}return -1===r||-1===s||0===a||1===a&&r===s-1&&r===i+1?"":e.slice(r,s)},format:function(e){var n,r;if(null===e||"object"!=typeof e)throw TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return n=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||""),n?n===e.root?n+r:n+"/"+r:r},parse:function(e){n(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return r;var i,s=e.charCodeAt(0),o=47===s;o?(r.root="/",i=1):i=0;for(var a=-1,l=0,h=-1,c=!0,u=e.length-1,d=0;u>=i;--u)if(47!==(s=e.charCodeAt(u)))-1===h&&(c=!1,h=u+1),46===s?-1===a?a=u:1!==d&&(d=1):-1!==a&&(d=-1);else if(!c){l=u+1;break}return -1===a||-1===h||0===d||1===d&&a===h-1&&a===l+1?-1!==h&&(r.base=r.name=0===l&&o?e.slice(1,h):e.slice(l,h)):(0===l&&o?(r.name=e.slice(1,a),r.base=e.slice(1,h)):(r.name=e.slice(l,a),r.base=e.slice(l,h)),r.ext=e.slice(a,h)),l>0?r.dir=e.slice(0,l-1):o&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};i.posix=i,e.exports=i}},s={};function o(e){var n=s[e];if(void 0!==n)return n.exports;var r=s[e]={exports:{}};return i[e](r,r.exports,o),r.exports}o.d=(e,n)=>{for(var r in n)o.o(n,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};(o.r(a),o.d(a,{URI:()=>p,Utils:()=>r}),"object"==typeof process)?e="win32"===process.platform:"object"==typeof navigator&&(e=navigator.userAgent.indexOf("Windows")>=0);let l=/^\w[\w\d+.-]*$/,h=/^\//,c=/^\/\//;function u(e,n){if(!e.scheme&&n)throw Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`);if(e.scheme&&!l.test(e.scheme))throw Error("[UriError]: Scheme contains illegal characters.");if(e.path){if(e.authority){if(!h.test(e.path))throw Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(c.test(e.path))throw Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let d=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class p{static isUri(e){return e instanceof p||!!e&&"string"==typeof e.authority&&"string"==typeof e.fragment&&"string"==typeof e.path&&"string"==typeof e.query&&"string"==typeof e.scheme&&"string"==typeof e.fsPath&&"function"==typeof e.with&&"function"==typeof e.toString}scheme;authority;path;query;fragment;constructor(e,n,r,i,s,o=!1){"object"==typeof e?(this.scheme=e.scheme||"",this.authority=e.authority||"",this.path=e.path||"",this.query=e.query||"",this.fragment=e.fragment||""):(this.scheme=function(e,n){return e||n?e:"file"}(e,o),this.authority=n||"",this.path=function(e,n){switch(e){case"https":case"http":case"file":n?"/"!==n[0]&&(n="/"+n):n="/"}return n}(this.scheme,r||""),this.query=i||"",this.fragment=s||"",u(this,o))}get fsPath(){return b(this,!1)}with(e){if(!e)return this;let{scheme:n,authority:r,path:i,query:s,fragment:o}=e;return void 0===n?n=this.scheme:null===n&&(n=""),void 0===r?r=this.authority:null===r&&(r=""),void 0===i?i=this.path:null===i&&(i=""),void 0===s?s=this.query:null===s&&(s=""),void 0===o?o=this.fragment:null===o&&(o=""),n===this.scheme&&r===this.authority&&i===this.path&&s===this.query&&o===this.fragment?this:new g(n,r,i,s,o)}static parse(e,n=!1){let r=d.exec(e);return r?new g(r[2]||"",S(r[4]||""),S(r[5]||""),S(r[7]||""),S(r[9]||""),n):new g("","","","","")}static file(n){let r="";if(e&&(n=n.replace(/\\/g,"/")),"/"===n[0]&&"/"===n[1]){let e=n.indexOf("/",2);-1===e?(r=n.substring(2),n="/"):(r=n.substring(2,e),n=n.substring(e)||"/")}return new g("file",r,n,"","")}static from(e){let n=new g(e.scheme,e.authority,e.path,e.query,e.fragment);return u(n,!0),n}toString(e=!1){return x(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof p)return e;{let n=new g(e);return n._formatted=e.external,n._fsPath=e._sep===f?e.fsPath:null,n}}return e}}let f=e?1:void 0;class g extends p{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=b(this,!1)),this._fsPath}toString(e=!1){return e?x(this,!0):(this._formatted||(this._formatted=x(this,!1)),this._formatted)}toJSON(){let e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=f),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}}let m={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function y(e,n,r){let i,s=-1;for(let o=0;o<e.length;o++){let a=e.charCodeAt(o);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||45===a||46===a||95===a||126===a||n&&47===a||r&&91===a||r&&93===a||r&&58===a)-1!==s&&(i+=encodeURIComponent(e.substring(s,o)),s=-1),void 0!==i&&(i+=e.charAt(o));else{void 0===i&&(i=e.substr(0,o));let n=m[a];void 0!==n?(-1!==s&&(i+=encodeURIComponent(e.substring(s,o)),s=-1),i+=n):-1===s&&(s=o)}}return -1!==s&&(i+=encodeURIComponent(e.substring(s))),void 0!==i?i:e}function O(e){let n;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);35===i||63===i?(void 0===n&&(n=e.substr(0,r)),n+=m[i]):void 0!==n&&(n+=e[r])}return void 0!==n?n:e}function b(n,r){let i;return i=n.authority&&n.path.length>1&&"file"===n.scheme?`//${n.authority}${n.path}`:47===n.path.charCodeAt(0)&&(n.path.charCodeAt(1)>=65&&90>=n.path.charCodeAt(1)||n.path.charCodeAt(1)>=97&&122>=n.path.charCodeAt(1))&&58===n.path.charCodeAt(2)?r?n.path.substr(1):n.path[1].toLowerCase()+n.path.substr(2):n.path,e&&(i=i.replace(/\//g,"\\")),i}function x(e,n){let r=n?O:y,i="",{scheme:s,authority:o,path:a,query:l,fragment:h}=e;if(s&&(i+=s,i+=":"),(o||"file"===s)&&(i+="/",i+="/"),o){let e=o.indexOf("@");if(-1!==e){let n=o.substr(0,e);o=o.substr(e+1),-1===(e=n.lastIndexOf(":"))?i+=r(n,!1,!1):(i+=r(n.substr(0,e),!1,!1),i+=":",i+=r(n.substr(e+1),!1,!0)),i+="@"}-1===(e=(o=o.toLowerCase()).lastIndexOf(":"))?i+=r(o,!1,!0):(i+=r(o.substr(0,e),!1,!0),i+=o.substr(e))}if(a){if(a.length>=3&&47===a.charCodeAt(0)&&58===a.charCodeAt(2)){let e=a.charCodeAt(1);e>=65&&e<=90&&(a=`/${String.fromCharCode(e+32)}:${a.substr(3)}`)}else if(a.length>=2&&58===a.charCodeAt(1)){let e=a.charCodeAt(0);e>=65&&e<=90&&(a=`${String.fromCharCode(e+32)}:${a.substr(2)}`)}i+=r(a,!0,!1)}return l&&(i+="?",i+=r(l,!1,!1)),h&&(i+="#",i+=n?h:y(h,!1,!1)),i}let w=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function S(e){return e.match(w)?e.replace(w,e=>(function e(n){try{return decodeURIComponent(n)}catch{return n.length>3?n.substr(0,3)+e(n.substr(3)):n}})(e)):e}var _=o(975);let k=_.posix||_;(n=r||(r={})).joinPath=function(e,...n){return e.with({path:k.join(e.path,...n)})},n.resolvePath=function(e,...n){let r=e.path,i=!1;"/"!==r[0]&&(r="/"+r,i=!0);let s=k.resolve(r,...n);return i&&"/"===s[0]&&!e.authority&&(s=s.substring(1)),e.with({path:s})},n.dirname=function(e){if(0===e.path.length||"/"===e.path)return e;let n=k.dirname(e.path);return 1===n.length&&46===n.charCodeAt(0)&&(n=""),e.with({path:n})},n.basename=function(e){return k.basename(e.path)},n.extname=function(e){return k.extname(e.path)},t2=a})();let{URI:kb,Utils:kx}=t2;var kw=r(58843);let kS=Symbol("Comlink.proxy"),k_=Symbol("Comlink.endpoint"),kk=Symbol("Comlink.releaseProxy"),kC=Symbol("Comlink.finalizer"),kE=Symbol("Comlink.thrown"),kT=e=>"object"==typeof e&&null!==e||"function"==typeof e,kP=new Map([["proxy",{canHandle:e=>kT(e)&&e[kS],serialize(e){let{port1:n,port2:r}=new MessageChannel;return function e(n,r=globalThis,i=["*"]){r.addEventListener("message",function s(o){let a;if(!o||!o.data)return;if(!function(e,n){for(let r of e)if(n===r||"*"===r||r instanceof RegExp&&r.test(n))return!0;return!1}(i,o.origin))return void console.warn(`Invalid origin '${o.origin}' for comlink proxy`);let{id:l,type:h,path:c}=Object.assign({path:[]},o.data),u=(o.data.argumentList||[]).map(kj);try{var d,p,f;let r=c.slice(0,-1).reduce((e,n)=>e[n],n),i=c.reduce((e,n)=>e[n],n);switch(h){case"GET":a=i;break;case"SET":r[c.slice(-1)[0]]=kj(o.data.value),a=!0;break;case"APPLY":a=i.apply(r,u);break;case"CONSTRUCT":d=new i(...u),a=Object.assign(d,{[kS]:!0});break;case"ENDPOINT":{let{port1:r,port2:i}=new MessageChannel;e(n,i),p=r,f=[r],kL.set(p,f),a=p}break;case"RELEASE":a=void 0;break;default:return}}catch(e){a={value:e,[kE]:0}}Promise.resolve(a).catch(e=>({value:e,[kE]:0})).then(e=>{let[i,o]=kQ(e);r.postMessage(Object.assign(Object.assign({},i),{id:l}),o),"RELEASE"===h&&(r.removeEventListener("message",s),kA(r),kC in n&&"function"==typeof n[kC]&&n[kC]())}).catch(e=>{let[n,i]=kQ({value:TypeError("Unserializable return value"),[kE]:0});r.postMessage(Object.assign(Object.assign({},n),{id:l}),i)})}),r.start&&r.start()}(e,n),[r,[r]]},deserialize:e=>(e.start(),kM(e))}],["throw",{canHandle:e=>kT(e)&&kE in e,serialize:({value:e})=>[e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[]],deserialize(e){if(e.isError)throw Object.assign(Error(e.value.message),e.value);throw e.value}}]]);function kA(e){"MessagePort"===e.constructor.name&&e.close()}function kM(e,n){let r=new Map;return e.addEventListener("message",function(e){let{data:n}=e;if(!n||!n.id)return;let i=r.get(n.id);if(i)try{i(n)}finally{r.delete(n.id)}}),function e(n,r,i=[],s=function(){}){let o=!1,a=new Proxy(s,{get(s,l){if(kN(o),l===kk)return()=>{k$&&k$.unregister(a),kD(n),r.clear(),o=!0};if("then"===l){if(0===i.length)return{then:()=>a};let e=kV(n,r,{type:"GET",path:i.map(e=>e.toString())}).then(kj);return e.then.bind(e)}return e(n,r,[...i,l])},set(e,s,a){kN(o);let[l,h]=kQ(a);return kV(n,r,{type:"SET",path:[...i,s].map(e=>e.toString()),value:l},h).then(kj)},apply(s,a,l){kN(o);let h=i[i.length-1];if(h===k_)return kV(n,r,{type:"ENDPOINT"}).then(kj);if("bind"===h)return e(n,r,i.slice(0,-1));let[c,u]=kR(l);return kV(n,r,{type:"APPLY",path:i.map(e=>e.toString()),argumentList:c},u).then(kj)},construct(e,s){kN(o);let[a,l]=kR(s);return kV(n,r,{type:"CONSTRUCT",path:i.map(e=>e.toString()),argumentList:a},l).then(kj)}}),l=(kI.get(n)||0)+1;return kI.set(n,l),k$&&k$.register(a,n,a),a}(e,r,[],n)}function kN(e){if(e)throw Error("Proxy has been released and is not useable")}function kD(e){return kV(e,new Map,{type:"RELEASE"}).then(()=>{kA(e)})}let kI=new WeakMap,k$="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{let n=(kI.get(e)||0)-1;kI.set(e,n),0===n&&kD(e)});function kR(e){var n;let r=e.map(kQ);return[r.map(e=>e[0]),(n=r.map(e=>e[1]),Array.prototype.concat.apply([],n))]}let kL=new WeakMap;function kQ(e){for(let[n,r]of kP)if(r.canHandle(e)){let[i,s]=r.serialize(e);return[{type:"HANDLER",name:n,value:i},s]}return[{type:"RAW",value:e},kL.get(e)||[]]}function kj(e){switch(e.type){case"HANDLER":return kP.get(e.name).deserialize(e.value);case"RAW":return e.value}}function kV(e,n,r,i){return new Promise(s=>{let o=[,,,,].fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-");n.set(o,s),e.start&&e.start(),e.postMessage(Object.assign({id:o},r),i)})}function kz(e){let n=`*@${e.name}*`;if("param"===e.name&&e.text){let[r,...i]=e.text;n+=`\`${r.text}\``,i.length>0&&(n+=` \u2014 ${i.map(e=>e.text).join(" ")}`)}else Array.isArray(e.text)?n+=` \u2014 ${e.text.map(e=>e.text).join(" ")}`:e.text&&(n+=` \u2014 ${e.text}`);return n}var kB=new class{worker=null;starting=null;_cachedFiles=Object.create(null);events=nB();triggerCharacters=[".","'",'"'];async synchronize(e){if(await this.starting,!this.worker)throw Error("TypeScript LanguageService is not initialized");let n={};return e.forEach(e=>{n[e]=this._cachedFiles[e]??""}),await this.worker.syncFiles(n),this.worker}onTextDocumentDidChange=e=>{let{textDocument:n}=e,r=n.getText(),i=kb.parse(n.uri).fsPath;this._cachedFiles[i]=r};doHover=async e=>{let{textDocument:n}=e,r=kb.parse(n.uri).fsPath,i=await this.synchronize([r]),s=await i.getQuickInfoAtPosition(r,e.offset);if(!s)return;let o=s.tags?s.tags.map(e=>kz(e)).join("  \n\n"):"",a=(0,kw.displayPartsToString)(s.displayParts),l=(0,kw.displayPartsToString)(s.documentation);return{kind:e8.Markdown,value:`\`\`\`ts
${a}
\`\`\`
${l}${o?`

${o}`:""}`}};async synchronizeByURI(e,n){await this.onTextDocumentDidChange({textDocument:{uri:e,getText:()=>n}})}async validateByURI(e){return this.doValidation({textDocument:{uri:e}})}doValidation=async e=>{let{textDocument:n}=e,r=kb.parse(n.uri).fsPath,i=await this.synchronize([r]);try{let e=[...await i.getSyntacticDiagnostics(r),...await i.getSemanticDiagnostics(r),...await i.getSuggestionDiagnostics(r)],n={[kw.DiagnosticCategory.Error]:"error",[kw.DiagnosticCategory.Warning]:"warning",[kw.DiagnosticCategory.Message]:"info",[kw.DiagnosticCategory.Suggestion]:"hint"};return e.map(e=>{if("number"!=typeof e.start||!n[e.category])return;let r=[];return e.reportsUnnecessary&&r.push(Op.Unnecessary),e.reportsDeprecated&&r.push(Op.Deprecated),{from:e.start,to:e.start+(e.length??0),severity:n[e.category],message:"string"==typeof e.messageText?e.messageText:e.messageText.messageText,tags:r}}).filter(e=>!!e)}catch(e){return[]}};doComplete=async e=>{let n=kb.parse(e.textDocument.uri).fsPath,r=await this.synchronize([n]),i=await r.getCompletionsAtPosition(n,e.offset);if(!i)return null;let s=i.entries.map(e=>({label:e.name,kind:function(e){switch(e){case kw.ScriptElementKind.primitiveType:case kw.ScriptElementKind.keyword:return tt.Keyword;case kw.ScriptElementKind.constElement:case kw.ScriptElementKind.letElement:case kw.ScriptElementKind.variableElement:case kw.ScriptElementKind.localVariableElement:case kw.ScriptElementKind.alias:case kw.ScriptElementKind.parameterElement:return tt.Variable;case kw.ScriptElementKind.memberVariableElement:case kw.ScriptElementKind.memberGetAccessorElement:case kw.ScriptElementKind.memberSetAccessorElement:return tt.Field;case kw.ScriptElementKind.functionElement:case kw.ScriptElementKind.localFunctionElement:return tt.Function;case kw.ScriptElementKind.memberFunctionElement:case kw.ScriptElementKind.constructSignatureElement:case kw.ScriptElementKind.callSignatureElement:case kw.ScriptElementKind.indexSignatureElement:return tt.Method;case kw.ScriptElementKind.enumElement:return tt.Enum;case kw.ScriptElementKind.enumMemberElement:return tt.EnumMember;case kw.ScriptElementKind.moduleElement:case kw.ScriptElementKind.externalModuleName:return tt.Module;case kw.ScriptElementKind.classElement:case kw.ScriptElementKind.typeElement:return tt.Class;case kw.ScriptElementKind.interfaceElement:return tt.Interface;case kw.ScriptElementKind.warning:return tt.Text;case kw.ScriptElementKind.scriptElement:return tt.File;case kw.ScriptElementKind.directory:return tt.Folder;case kw.ScriptElementKind.string:return tt.Constant}return tt.Property}(e.kind)}));return{isIncomplete:i.isIncomplete??!0,items:s}};async resolveCompletionItem(e,n){let r=kb.parse(e.textDocument.uri).fsPath,i=await this.synchronize([r]),s=await i.getCompletionEntryDetails(r,e.offset,n.label,void 0,void 0,void 0,void 0);if(!s)return n;let o=function(e){let n=(0,kw.displayPartsToString)(e.documentation);if(e.tags)for(let r of e.tags)n+=`

${kz(r)}`;return n}(s);return{label:s.name,detail:(0,kw.displayPartsToString)(null==s?void 0:s.displayParts),documentation:o?{kind:e8.Markdown,value:o}:void 0}}async format(e,n={}){let{textDocument:r,originalRangeFor:i}=e.field(Od),s=kb.parse(r.uri).fsPath,o=await this.synchronize([s]),a=await o.getFormattingEditsForDocument(s,{indentSize:2,tabSize:2,convertTabsToSpaces:!0,newLineCharacter:"\n",...n});return a?{changes:a.map(e=>{let n=i({from:e.span.start,to:e.span.start+e.span.length});if(n)return{...n,insert:e.newText}}).filter(e=>!!e)}:{changes:[]}}async getTypeInformation(e){let{textDocument:n}=e,r=kb.parse(n.uri).fsPath,i=await this.synchronize([r]);return await i.getTypeInfoAtPosition(r,e.offset)}async doSignatureHelp(e){let n=kb.parse(e.textDocument.uri).fsPath,r=await this.synchronize([n]),i=await r.getSignatureHelpItems(n,e.offset,{});if(!i)return null;let s={activeSignature:i.selectedItemIndex,activeParameter:i.argumentIndex,signatures:[]};return i.items.forEach(e=>{let n={label:"",parameters:[]};n.documentation={kind:e8.Markdown,value:(0,kw.displayPartsToString)(e.documentation)},n.label+=(0,kw.displayPartsToString)(e.prefixDisplayParts),e.parameters.forEach((r,i,s)=>{let o=(0,kw.displayPartsToString)(r.displayParts),a={label:o,documentation:{kind:e8.Markdown,value:(0,kw.displayPartsToString)(r.documentation)}};n.label+=o,n.parameters.push(a),i<s.length-1&&(n.label+=(0,kw.displayPartsToString)(e.separatorDisplayParts))}),n.label+=(0,kw.displayPartsToString)(e.suffixDisplayParts),s.signatures.push(n)}),s}initialize(e,n){this.worker=kM(e),this.starting=this.worker.initialize({compilerOptions:(null==n?void 0:n.compilerOptions)??{},initialFiles:{...this.extraFiles,...(null==n?void 0:n.initialFiles)??{}}})}extraFiles=Object.create(null);async addExtraFiles(e){this.extraFiles=Object.assign({},this.extraFiles,e),await this.starting,this.worker&&(await this.worker.syncFiles(e),this.events.emit("refresh-diagnostics"))}},kF=rx.define({create:()=>!1,update:(e,n)=>{for(let e of n.effects)if(e.is(kZ))return e.value;return e}}),kZ=rV.define(),kq=sG.fromClass(class{dispose;constructor(e){let n=n=>{n.metaKey&&!e.state.field(kF)&&e.dispatch({effects:kZ.of(!0)})},r=n=>{!n.metaKey&&e.state.field(kF)&&e.dispatch({effects:kZ.of(!1)})},i=()=>{e.state.field(kF)&&e.dispatch({effects:kZ.of(!1)})};window.addEventListener("keydown",n),window.addEventListener("keyup",r),window.addEventListener("blur",i),this.dispose=()=>{window.removeEventListener("keydown",n),window.removeEventListener("keyup",r),window.removeEventListener("blur",i)}}destroy(){this.dispose()}}),kW=rg.define({combine:e=>e[e.length-1]}),kX=async(e,n,r)=>{let i=e.state.wordAt(n);if(!i||!e.state.facet(kW))return null;let s=e.state.facet(kW),o=await (null==s?void 0:s(e.state,i.from));return o?{pos:i.from,end:i.to,above:!0,create(){var n;let r=document.createElement("div");r.className="cm-type-tooltip";let i=e.state.field(kF,!1);if(r.style.display=i?"block":"none",null==(n=null==o?void 0:o.properties)?void 0:n.length){let e=document.createElement("div");e.className="cm-type-tooltip-properties";let n=document.createElement("div");n.className="cm-type-tooltip-props-header",n.textContent="Properties:",e.appendChild(n);let i=document.createElement("ul");i.className="cm-type-tooltip-props-list",o.properties.forEach(e=>{if(e&&"string"==typeof e.name&&"string"==typeof e.type){let n=document.createElement("li");n.className="cm-type-tooltip-prop-item";let r=document.createElement("span");r.className="cm-type-tooltip-prop-name",r.textContent=e.name,n.appendChild(r);let s=document.createTextNode(": ");n.appendChild(s);let o=document.createElement("span");o.className="cm-type-tooltip-prop-type",o.textContent=e.type,n.appendChild(o),i.appendChild(n)}}),e.appendChild(i),r.appendChild(e)}return{dom:r,update(e){for(let n of e.transactions)for(let e of n.effects)if(e.is(kZ)){let n=e.value;r.style.display=n?"block":"none";break}}}}}:null},kU=aO.theme({".cm-tooltip .cm-type-tooltip":{padding:"0 10px 6px 10px",maxWidth:"350px"},".cm-type-tooltip-properties":{paddingTop:"6px"},".cm-type-tooltip-props-header":{fontWeight:"bold",marginBottom:"4px",color:"#E06C75"},".cm-type-tooltip-props-list":{listStyle:"none",margin:"0",paddingInlineStart:"20px"},".cm-type-tooltip-prop-item":{marginBottom:"3px"},".cm-type-tooltip-prop-name":{color:"#E5C07B"},".cm-type-tooltip-prop-type":{color:"#ABB2BF"}}),kY=[(eO=async(e,n)=>{let{textDocument:r,generatedRangeFor:i}=e.field(Od),s=i({from:n,to:n}),o=null==s?void 0:s.from;return"number"!=typeof o?null:await kB.getTypeInformation({textDocument:r,offset:o})},[kW.of(eO),kU,kF,kq,lu(kX,{hoverTime:300})])],kG={language:kv,languageService:kB,extensions:kY},kH={};function kK(e,n){for(var r=0;r<n.length;r++)kH[n[r]]=e}var kJ=["get","head","post","put","delete","connect","options","trace","patch"];kK("atom",["true","false"]),kK("keyword",["if","then","do","else","elif","while","until","for","in","esac","fi","fin","fil","done","exit","set","unset","export","function"]),kK("builtin",["ab","awk","bash","beep","cat","cc","cd","chown","chmod","chroot","clear","cp","curl","cut","diff","echo","find","gawk","gcc","get","git","grep","hg","kill","killall","ln","ls","make","mkdir","openssl","mv","nc","nl","node","npm","ping","ps","restart","rm","rmdir","sed","service","sh","shopt","shred","source","sort","sleep","ssh","start","stop","su","sudo","svn","tee","telnet","top","touch","vi","vim","wall","wc","wget","who","write","yes","zsh"]),kK("attributeValue",[...kJ,...kJ.map(e=>e.toUpperCase())]);var k0=/^(https?:\/\/|www\.)[\w-\.]+\.[\w-\.]+(\/([\S]+)?)?$/i;function k1(e,n){var r="("==e?")":"{"==e?"}":e;return function(i,s){var o,a=!1;let l=i.pos;for(;null!=(o=i.next());){if(o!==r||a)if("$"!==o||a||"'"===e||i.peek()==r){if(!a&&e!==r&&o===e)return s.tokens.unshift(k1(e,n)),k5(i,s);else if(!a&&/['"]/.test(o)&&!/['"]/.test(e)){s.tokens.unshift(function(e,n){return function(r,i){return i.tokens[0]=k1(e,n),r.next(),k5(r,i)}}(o,"string")),i.backUp(1);break}}else{a=!0,i.backUp(1),s.tokens.unshift(k2);break}else{s.tokens.shift();break}a=!a&&"\\"===o}if("string"===n){let e=i.pos-1,n=i.string.slice(l,e);if(k0.test(n))return"string.special"}return n}}var k2=function(e,n){n.tokens.length>1&&e.eat("$");var r=e.next();return/['"({]/.test(r)?(n.tokens[0]=k1(r,"("==r?"quote":"{"==r?"def":"string"),k5(e,n)):(/\d/.test(r)||e.eatWhile(/\w/),n.tokens.shift(),"def")};function k5(e,n){return(n.tokens[0]||function(e,n){if(e.eatSpace())return null;var r=e.sol(),i=e.next();if("\\"===i)return e.next(),null;if("'"===i||'"'===i||"`"===i)return n.tokens.unshift(k1(i,"`"===i?"quote":"string")),k5(e,n);if("#"===i)return r&&e.eat("!")?(e.skipToEnd(),"meta"):(e.skipToEnd(),"comment");if("$"===i)return n.tokens.unshift(k2),k5(e,n);if("+"===i||"="===i)return"operator";if("-"===i)return e.eat("-"),e.eatWhile(/\w/),"attribute";if("<"==i){if(e.match("<<"))return"operator";var s,o=e.match(/^<-?\s*(?:['"]([^'"]*)['"]|([^'"\s]*))/);if(o){return n.tokens.unshift((s=o[1]||o[2],function(e,n){return e.sol()&&e.string==s&&n.tokens.shift(),e.skipToEnd(),"string.special"})),"string.special"}}if(/\d/.test(i)&&(e.eatWhile(/\d/),e.eol()||!/\w/.test(e.peek())))return"number";e.eatWhile(/[\w-]/);var a=e.current();return"="===e.peek()&&/\w+/.test(a)?"def":kH.hasOwnProperty(a)?kH[a]:null})(e,n)}var k4=uD.define({name:"shell",startState:function(){return{tokens:[]}},token:function(e,n){return k5(e,n)},languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"#"}}}),k3=new class{};let k6=new Set([25,49,50,263,65,130,56,57,238,62,63,72,73,77,60,61,151,152,155,112]);function k9(e){return 10==e||13==e}function k7(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}let k8=new u5((e,n)=>{let r;if(e.next<0)e.acceptToken(199);else if(n.context.flags&Ct)k9(e.next)&&e.acceptToken(198,1);else if(((r=e.peek(-1))<0||k9(r))&&n.canShift(197)){let n=0;for(;32==e.next||9==e.next;)e.advance(),n++;(10==e.next||13==e.next||35==e.next)&&e.acceptToken(197,-n)}else k9(e.next)&&e.acceptToken(196,1)},{contextual:!0}),Ce=new u5((e,n)=>{let r=n.context;if(r.flags)return;let i=e.peek(-1);if(10==i||13==i){let n=0,i=0;for(;;){if(32==e.next)n++;else if(9==e.next)n+=8-n%8;else break;e.advance(),i++}n!=r.indent&&10!=e.next&&13!=e.next&&35!=e.next&&(n<r.indent?e.acceptToken(195,-i):e.acceptToken(194))}}),Ct=1;function Cn(e,n,r){this.parent=e,this.indent=n,this.flags=r,this.hash=(e?e.hash+e.hash<<8:0)+n+(n<<4)+r+(r<<6)}let Cr=new Cn(null,0,0),Ci=new Map([[241,0],[242,4],[243,8],[244,12],[245,16],[246,20],[247,24],[248,28],[249,32],[250,36],[251,40],[252,44],[253,48],[254,52],[255,56],[256,60]].map(([e,n])=>[e,2|n])),Cs=new ds({start:Cr,reduce:(e,n,r,i)=>e.flags&Ct&&k6.has(n)||(71==n||72==n)&&2&e.flags?e.parent:e,shift:(e,n,r,i)=>194==n?new Cn(e,function(e){let n=0;for(let r=0;r<e.length;r++)n+=9==e.charCodeAt(r)?8-n%8:1;return n}(i.read(i.pos,r.pos)),0):195==n?e.parent:24==n||55==n||59==n||3==n?new Cn(e,0,Ct):Ci.has(n)?new Cn(e,0,Ci.get(n)|e.flags&Ct):e,hash:e=>e.hash}),Co=new u5(e=>{for(let n=0;n<5;n++){if(e.next!="print".charCodeAt(n))return;e.advance()}if(!/\w/.test(String.fromCharCode(e.next)))for(let n=0;;n++){let r=e.peek(n);if(32!=r&&9!=r){40!=r&&46!=r&&10!=r&&13!=r&&35!=r&&e.acceptToken(1);return}}}),Ca=new u5((e,n)=>{let{flags:r}=n.context,i=4&r?34:39,s=(8&r)>0,o=!(16&r),a=(32&r)>0,l=e.pos;for(;;)if(e.next<0)break;else if(a&&123==e.next)if(123==e.peek(1))e.advance(2);else{if(e.pos==l)return void e.acceptToken(3,1);break}else if(o&&92==e.next){if(e.pos==l){e.advance();let n=e.next;n>=0&&(e.advance(),function(e,n){if(111==n)for(let n=0;n<2&&e.next>=48&&e.next<=55;n++)e.advance();else if(120==n)for(let n=0;n<2&&k7(e.next);n++)e.advance();else if(117==n)for(let n=0;n<4&&k7(e.next);n++)e.advance();else if(85==n)for(let n=0;n<8&&k7(e.next);n++)e.advance();else if(78==n&&123==e.next){for(e.advance();e.next>=0&&125!=e.next&&39!=e.next&&34!=e.next&&10!=e.next;)e.advance();125==e.next&&e.advance()}}(e,n)),e.acceptToken(2);return}break}else if(92==e.next&&!o&&e.peek(1)>-1)e.advance(2);else if(e.next!=i||s&&(e.peek(1)!=i||e.peek(2)!=i))if(10==e.next){if(s)e.advance();else if(e.pos==l)return void e.acceptToken(201);break}else e.advance();else{if(e.pos==l)return void e.acceptToken(201,s?3:1);break}e.pos>l&&e.acceptToken(200)}),Cl=cl({'async "*" "**" FormatConversion FormatSpec':cT.modifier,"for while if elif else try except finally return raise break continue with pass assert await yield match case":cT.controlKeyword,"in not and or is del":cT.operatorKeyword,"from def class global nonlocal lambda":cT.definitionKeyword,import:cT.moduleKeyword,"with as print":cT.keyword,Boolean:cT.bool,None:cT.null,VariableName:cT.variableName,"CallExpression/VariableName":cT.function(cT.variableName),"FunctionDefinition/VariableName":cT.function(cT.definition(cT.variableName)),"ClassDefinition/VariableName":cT.definition(cT.className),PropertyName:cT.propertyName,"CallExpression/MemberExpression/PropertyName":cT.function(cT.propertyName),Comment:cT.lineComment,Number:cT.number,String:cT.string,FormatString:cT.special(cT.string),Escape:cT.escape,UpdateOp:cT.updateOperator,"ArithOp!":cT.arithmeticOperator,BitOp:cT.bitwiseOperator,CompareOp:cT.compareOperator,AssignOp:cT.definitionOperator,Ellipsis:cT.punctuation,At:cT.meta,"( )":cT.paren,"[ ]":cT.squareBracket,"{ }":cT.brace,".":cT.derefOperator,", ;":cT.separator}),Ch={__proto__:null,await:44,or:54,and:56,in:60,not:62,is:64,if:70,else:72,lambda:76,yield:94,from:96,async:102,for:104,None:162,True:164,False:164,del:178,pass:182,break:186,continue:190,return:194,raise:202,import:206,as:208,global:212,nonlocal:214,assert:218,type:223,elif:236,while:240,try:246,except:248,finally:250,with:254,def:258,class:268,match:279,case:285},Cc=da.deserialize({version:14,states:"##jO`QeOOP$}OSOOO&WQtO'#HUOOQS'#Co'#CoOOQS'#Cp'#CpO'vQdO'#CnO*UQtO'#HTOOQS'#HU'#HUOOQS'#DU'#DUOOQS'#HT'#HTO*rQdO'#D_O+VQdO'#DfO+gQdO'#DjO+zOWO'#DuO,VOWO'#DvO.[QtO'#GuOOQS'#Gu'#GuO'vQdO'#GtO0ZQtO'#GtOOQS'#Eb'#EbO0rQdO'#EcOOQS'#Gs'#GsO0|QdO'#GrOOQV'#Gr'#GrO1XQdO'#FYOOQS'#G^'#G^O1^QdO'#FXOOQV'#IS'#ISOOQV'#Gq'#GqOOQV'#Fq'#FqQ`QeOOO'vQdO'#CqO1lQdO'#C}O1sQdO'#DRO2RQdO'#HYO2cQtO'#EVO'vQdO'#EWOOQS'#EY'#EYOOQS'#E['#E[OOQS'#E^'#E^O2wQdO'#E`O3_QdO'#EdO3rQdO'#EfO3zQtO'#EfO1XQdO'#EiO0rQdO'#ElO1XQdO'#EnO0rQdO'#EtO0rQdO'#EwO4VQdO'#EyO4^QdO'#FOO4iQdO'#EzO0rQdO'#FOO1XQdO'#FQO1XQdO'#FVO4nQdO'#F[P4uOdO'#GpPOOO)CBd)CBdOOQS'#Ce'#CeOOQS'#Cf'#CfOOQS'#Cg'#CgOOQS'#Ch'#ChOOQS'#Ci'#CiOOQS'#Cj'#CjOOQS'#Cl'#ClO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO5TQdO'#DoOOQS,5:Y,5:YO5hQdO'#HdOOQS,5:],5:]O5uQ!fO,5:]O5zQtO,59YO1lQdO,59bO1lQdO,59bO1lQdO,59bO8jQdO,59bO8oQdO,59bO8vQdO,59jO8}QdO'#HTO:TQdO'#HSOOQS'#HS'#HSOOQS'#D['#D[O:lQdO,59aO'vQdO,59aO:zQdO,59aOOQS,59y,59yO;PQdO,5:RO'vQdO,5:ROOQS,5:Q,5:QO;_QdO,5:QO;dQdO,5:XO'vQdO,5:XO'vQdO,5:VOOQS,5:U,5:UO;uQdO,5:UO;zQdO,5:WOOOW'#Fy'#FyO<POWO,5:aOOQS,5:a,5:aO<[QdO'#HwOOOW'#Dw'#DwOOOW'#Fz'#FzO<lOWO,5:bOOQS,5:b,5:bOOQS'#F}'#F}O<zQtO,5:iO?lQtO,5=`O@VQ#xO,5=`O@vQtO,5=`OOQS,5:},5:}OA_QeO'#GWOBqQdO,5;^OOQV,5=^,5=^OB|QtO'#IPOCkQdO,5;tOOQS-E:[-E:[OOQV,5;s,5;sO4dQdO'#FQOOQV-E9o-E9oOCsQtO,59]OEzQtO,59iOFeQdO'#HVOFpQdO'#HVO1XQdO'#HVOF{QdO'#DTOGTQdO,59mOGYQdO'#HZO'vQdO'#HZO0rQdO,5=tOOQS,5=t,5=tO0rQdO'#EROOQS'#ES'#ESOGwQdO'#GPOHXQdO,58|OHXQdO,58|O*xQdO,5:oOHgQtO'#H]OOQS,5:r,5:rOOQS,5:z,5:zOHzQdO,5;OOI]QdO'#IOO1XQdO'#H}OOQS,5;Q,5;QOOQS'#GT'#GTOIqQtO,5;QOJPQdO,5;QOJUQdO'#IQOOQS,5;T,5;TOJdQdO'#H|OOQS,5;W,5;WOJuQdO,5;YO4iQdO,5;`O4iQdO,5;cOJ}QtO'#ITO'vQdO'#ITOKXQdO,5;eO4VQdO,5;eO0rQdO,5;jO1XQdO,5;lOK^QeO'#EuOLjQgO,5;fO!!kQdO'#IUO4iQdO,5;jO!!vQdO,5;lO!#OQdO,5;qO!#ZQtO,5;vO'vQdO,5;vPOOO,5=[,5=[P!#bOSO,5=[P!#jOdO,5=[O!&bQtO1G.jO!&iQtO1G.jO!)YQtO1G.jO!)dQtO1G.jO!+}QtO1G.jO!,bQtO1G.jO!,uQdO'#HcO!-TQtO'#GuO0rQdO'#HcO!-_QdO'#HbOOQS,5:Z,5:ZO!-gQdO,5:ZO!-lQdO'#HeO!-wQdO'#HeO!.[QdO,5>OOOQS'#Ds'#DsOOQS1G/w1G/wOOQS1G.|1G.|O!/[QtO1G.|O!/cQtO1G.|O1lQdO1G.|O!0OQdO1G/UOOQS'#DZ'#DZO0rQdO,59tOOQS1G.{1G.{O!0VQdO1G/eO!0gQdO1G/eO!0oQdO1G/fO'vQdO'#H[O!0tQdO'#H[O!0yQtO1G.{O!1ZQdO,59iO!2aQdO,5=zO!2qQdO,5=zO!2yQdO1G/mO!3OQtO1G/mOOQS1G/l1G/lO!3`QdO,5=uO!4VQdO,5=uO0rQdO1G/qO!4tQdO1G/sO!4yQtO1G/sO!5ZQtO1G/qOOQS1G/p1G/pOOQS1G/r1G/rOOOW-E9w-E9wOOQS1G/{1G/{O!5kQdO'#HxO0rQdO'#HxO!5|QdO,5>cOOOW-E9x-E9xOOQS1G/|1G/|OOQS-E9{-E9{O!6[Q#xO1G2zO!6{QtO1G2zO'vQdO,5<jOOQS,5<j,5<jOOQS-E9|-E9|OOQS,5<r,5<rOOQS-E:U-E:UOOQV1G0x1G0xO1XQdO'#GRO!7dQtO,5>kOOQS1G1`1G1`O!8RQdO1G1`OOQS'#DV'#DVO0rQdO,5=qOOQS,5=q,5=qO!8WQdO'#FrO!8cQdO,59oO!8kQdO1G/XO!8uQtO,5=uOOQS1G3`1G3`OOQS,5:m,5:mO!9fQdO'#GtOOQS,5<k,5<kOOQS-E9}-E9}O!9wQdO1G.hOOQS1G0Z1G0ZO!:VQdO,5=wO!:gQdO,5=wO0rQdO1G0jO0rQdO1G0jO!:xQdO,5>jO!;ZQdO,5>jO1XQdO,5>jO!;lQdO,5>iOOQS-E:R-E:RO!;qQdO1G0lO!;|QdO1G0lO!<RQdO,5>lO!<aQdO,5>lO!<oQdO,5>hO!=VQdO,5>hO!=hQdO'#EpO0rQdO1G0tO!=sQdO1G0tO!=xQgO1G0zO!AvQgO1G0}O!EqQdO,5>oO!E{QdO,5>oO!FTQtO,5>oO0rQdO1G1PO!F_QdO1G1PO4iQdO1G1UO!!vQdO1G1WOOQV,5;a,5;aO!FdQfO,5;aO!FiQgO1G1QO!JjQdO'#GZO4iQdO1G1QO4iQdO1G1QO!JzQdO,5>pO!KXQdO,5>pO1XQdO,5>pOOQV1G1U1G1UO!KaQdO'#FSO!KrQ!fO1G1WO!KzQdO1G1WOOQV1G1]1G1]O4iQdO1G1]O!LPQdO1G1]O!LXQdO'#F^OOQV1G1b1G1bO!#ZQtO1G1bPOOO1G2v1G2vP!L^OSO1G2vOOQS,5=},5=}OOQS'#Dp'#DpO0rQdO,5=}O!LfQdO,5=|O!LyQdO,5=|OOQS1G/u1G/uO!MRQdO,5>PO!McQdO,5>PO!MkQdO,5>PO!NOQdO,5>PO!N`QdO,5>POOQS1G3j1G3jOOQS7+$h7+$hO!8kQdO7+$pO#!RQdO1G.|O#!YQdO1G.|OOQS1G/`1G/`OOQS,5<`,5<`O'vQdO,5<`OOQS7+%P7+%PO#!aQdO7+%POOQS-E9r-E9rOOQS7+%Q7+%QO#!qQdO,5=vO'vQdO,5=vOOQS7+$g7+$gO#!vQdO7+%PO##OQdO7+%QO##TQdO1G3fOOQS7+%X7+%XO##eQdO1G3fO##mQdO7+%XOOQS,5<_,5<_O'vQdO,5<_O##rQdO1G3aOOQS-E9q-E9qO#$iQdO7+%]OOQS7+%_7+%_O#$wQdO1G3aO#%fQdO7+%_O#%kQdO1G3gO#%{QdO1G3gO#&TQdO7+%]O#&YQdO,5>dO#&sQdO,5>dO#&sQdO,5>dOOQS'#Dx'#DxO#'UO&jO'#DzO#'aO`O'#HyOOOW1G3}1G3}O#'fQdO1G3}O#'nQdO1G3}O#'yQ#xO7+(fO#(jQtO1G2UP#)TQdO'#GOOOQS,5<m,5<mOOQS-E:P-E:POOQS7+&z7+&zOOQS1G3]1G3]OOQS,5<^,5<^OOQS-E9p-E9pOOQS7+$s7+$sO#)bQdO,5=`O#){QdO,5=`O#*^QtO,5<aO#*qQdO1G3cOOQS-E9s-E9sOOQS7+&U7+&UO#+RQdO7+&UO#+aQdO,5<nO#+uQdO1G4UOOQS-E:Q-E:QO#,WQdO1G4UOOQS1G4T1G4TOOQS7+&W7+&WO#,iQdO7+&WOOQS,5<p,5<pO#,tQdO1G4WOOQS-E:S-E:SOOQS,5<l,5<lO#-SQdO1G4SOOQS-E:O-E:OO1XQdO'#EqO#-jQdO'#EqO#-uQdO'#IRO#-}QdO,5;[OOQS7+&`7+&`O0rQdO7+&`O#.SQgO7+&fO!JmQdO'#GXO4iQdO7+&fO4iQdO7+&iO#2QQtO,5<tO'vQdO,5<tO#2[QdO1G4ZOOQS-E:W-E:WO#2fQdO1G4ZO4iQdO7+&kO0rQdO7+&kOOQV7+&p7+&pO!KrQ!fO7+&rO!KzQdO7+&rO`QeO1G0{OOQV-E:X-E:XO4iQdO7+&lO4iQdO7+&lOOQV,5<u,5<uO#2nQdO,5<uO!JmQdO,5<uOOQV7+&l7+&lO#2yQgO7+&lO#6tQdO,5<vO#7PQdO1G4[OOQS-E:Y-E:YO#7^QdO1G4[O#7fQdO'#IWO#7tQdO'#IWO1XQdO'#IWOOQS'#IW'#IWO#8PQdO'#IVOOQS,5;n,5;nO#8XQdO,5;nO0rQdO'#FUOOQV7+&r7+&rO4iQdO7+&rOOQV7+&w7+&wO4iQdO7+&wO#8^QfO,5;xOOQV7+&|7+&|POOO7+(b7+(bO#8cQdO1G3iOOQS,5<c,5<cO#8qQdO1G3hOOQS-E9u-E9uO#9UQdO,5<dO#9aQdO,5<dO#9tQdO1G3kOOQS-E9v-E9vO#:UQdO1G3kO#:^QdO1G3kO#:nQdO1G3kO#:UQdO1G3kOOQS<<H[<<H[O#:yQtO1G1zOOQS<<Hk<<HkP#;WQdO'#FtO8vQdO1G3bO#;eQdO1G3bO#;jQdO<<HkOOQS<<Hl<<HlO#;zQdO7+)QOOQS<<Hs<<HsO#<[QtO1G1yP#<{QdO'#FsO#=YQdO7+)RO#=jQdO7+)RO#=rQdO<<HwO#=wQdO7+({OOQS<<Hy<<HyO#>nQdO,5<bO'vQdO,5<bOOQS-E9t-E9tOOQS<<Hw<<HwOOQS,5<g,5<gO0rQdO,5<gO#>sQdO1G4OOOQS-E9y-E9yO#?^QdO1G4OO<[QdO'#H{OOOO'#D{'#D{OOOO'#F|'#F|O#?oO&jO,5:fOOOW,5>e,5>eOOOW7+)i7+)iO#?zQdO7+)iO#@SQdO1G2zO#@mQdO1G2zP'vQdO'#FuO0rQdO<<IpO1XQdO1G2YP1XQdO'#GSO#AOQdO7+)pO#AaQdO7+)pOOQS<<Ir<<IrP1XQdO'#GUP0rQdO'#GQOOQS,5;],5;]O#ArQdO,5>mO#BQQdO,5>mOOQS1G0v1G0vOOQS<<Iz<<IzOOQV-E:V-E:VO4iQdO<<JQOOQV,5<s,5<sO4iQdO,5<sOOQV<<JQ<<JQOOQV<<JT<<JTO#BYQtO1G2`P#BdQdO'#GYO#BkQdO7+)uO#BuQgO<<JVO4iQdO<<JVOOQV<<J^<<J^O4iQdO<<J^O!KrQ!fO<<J^O#FpQgO7+&gOOQV<<JW<<JWO#FzQgO<<JWOOQV1G2a1G2aO1XQdO1G2aO#JuQdO1G2aO4iQdO<<JWO1XQdO1G2bP0rQdO'#G[O#KQQdO7+)vO#K_QdO7+)vOOQS'#FT'#FTO0rQdO,5>rO#KgQdO,5>rO#KrQdO,5>rO#K}QdO,5>qO#L`QdO,5>qOOQS1G1Y1G1YOOQS,5;p,5;pOOQV<<Jc<<JcO#LhQdO1G1dOOQS7+)T7+)TP#LmQdO'#FwO#L}QdO1G2OO#MbQdO1G2OO#MrQdO1G2OP#M}QdO'#FxO#N[QdO7+)VO#NlQdO7+)VO#NlQdO7+)VO#NtQdO7+)VO$ UQdO7+(|O8vQdO7+(|OOQSAN>VAN>VO$ oQdO<<LmOOQSAN>cAN>cO0rQdO1G1|O$!PQtO1G1|P$!ZQdO'#FvOOQS1G2R1G2RP$!hQdO'#F{O$!uQdO7+)jO$#`QdO,5>gOOOO-E9z-E9zOOOW<<MT<<MTO$#nQdO7+(fOOQSAN?[AN?[OOQS7+'t7+'tO$$XQdO<<M[OOQS,5<q,5<qO$$jQdO1G4XOOQS-E:T-E:TOOQVAN?lAN?lOOQV1G2_1G2_O4iQdOAN?qO$$xQgOAN?qOOQVAN?xAN?xO4iQdOAN?xOOQV<<JR<<JRO4iQdOAN?rO4iQdO7+'{OOQV7+'{7+'{O1XQdO7+'{OOQVAN?rAN?rOOQS7+'|7+'|O$(sQdO<<MbOOQS1G4^1G4^O0rQdO1G4^OOQS,5<w,5<wO$)QQdO1G4]OOQS-E:Z-E:ZOOQU'#G_'#G_O$)cQfO7+'OO$)nQdO'#F_O$*uQdO7+'jO$+VQdO7+'jOOQS7+'j7+'jO$+bQdO<<LqO$+rQdO<<LqO$+rQdO<<LqO$+zQdO'#H^OOQS<<Lh<<LhO$,UQdO<<LhOOQS7+'h7+'hOOQS'#D|'#D|OOOO1G4R1G4RO$,oQdO1G4RO$,wQdO1G4RP!=hQdO'#GVOOQVG25]G25]O4iQdOG25]OOQVG25dG25dOOQVG25^G25^OOQV<<Kg<<KgO4iQdO<<KgOOQS7+)x7+)xP$-SQdO'#G]OOQU-E:]-E:]OOQV<<Jj<<JjO$-vQtO'#FaOOQS'#Fc'#FcO$.WQdO'#FbO$.xQdO'#FbOOQS'#Fb'#FbO$.}QdO'#IYO$)nQdO'#FiO$)nQdO'#FiO$/fQdO'#FjO$)nQdO'#FkO$/mQdO'#IZOOQS'#IZ'#IZO$0[QdO,5;yOOQS<<KU<<KUO$0dQdO<<KUO$0tQdOANB]O$1UQdOANB]O$1^QdO'#H_OOQS'#H_'#H_O1sQdO'#DcO$1wQdO,5=xOOQSANBSANBSOOOO7+)m7+)mO$2`QdO7+)mOOQVLD*wLD*wOOQVANARANARO5uQ!fO'#GaO$2hQtO,5<SO$)nQdO'#FmOOQS,5<W,5<WOOQS'#Fd'#FdO$3YQdO,5;|O$3_QdO,5;|OOQS'#Fg'#FgO$)nQdO'#G`O$4PQdO,5<QO$4kQdO,5>tO$4{QdO,5>tO1XQdO,5<PO$5^QdO,5<TO$5cQdO,5<TO$)nQdO'#I[O$5hQdO'#I[O$5mQdO,5<UOOQS,5<V,5<VO0rQdO'#FpOOQU1G1e1G1eO4iQdO1G1eOOQSAN@pAN@pO$5rQdOG27wO$6SQdO,59}OOQS1G3d1G3dOOOO<<MX<<MXOOQS,5<{,5<{OOQS-E:_-E:_O$6XQtO'#FaO$6`QdO'#I]O$6nQdO'#I]O$6vQdO,5<XOOQS1G1h1G1hO$6{QdO1G1hO$7QQdO,5<zOOQS-E:^-E:^O$7lQdO,5=OO$8TQdO1G4`OOQS-E:b-E:bOOQS1G1k1G1kOOQS1G1o1G1oO$8eQdO,5>vO$)nQdO,5>vOOQS1G1p1G1pOOQS,5<[,5<[OOQU7+'P7+'PO$+zQdO1G/iO$)nQdO,5<YO$8sQdO,5>wO$8zQdO,5>wOOQS1G1s1G1sOOQS7+'S7+'SP$)nQdO'#GdO$9SQdO1G4bO$9^QdO1G4bO$9fQdO1G4bOOQS7+%T7+%TO$9tQdO1G1tO$:SQtO'#FaO$:ZQdO,5<}OOQS,5<},5<}O$:iQdO1G4cOOQS-E:a-E:aO$)nQdO,5<|O$:pQdO,5<|O$:uQdO7+)|OOQS-E:`-E:`O$;PQdO7+)|O$)nQdO,5<ZP$)nQdO'#GcO$;XQdO1G2hO$)nQdO1G2hP$;gQdO'#GbO$;nQdO<<MhO$;xQdO1G1uO$<WQdO7+(SO8vQdO'#C}O8vQdO,59bO8vQdO,59bO8vQdO,59bO$<fQtO,5=`O8vQdO1G.|O0rQdO1G/XO0rQdO7+$pP$<yQdO'#GOO'vQdO'#GtO$=WQdO,59bO$=]QdO,59bO$=dQdO,59mO$=iQdO1G/UO1sQdO'#DRO8vQdO,59j",stateData:"$>S~O%cOS%^OSSOS%]PQ~OPdOVaOfoOhYOopOs!POvqO!PrO!Q{O!T!SO!U!RO!XZO!][O!h`O!r`O!s`O!t`O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO#l!QO#o!TO#s!UO#u!VO#z!WO#}hO$P!XO%oRO%pRO%tSO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O~O%]!YO~OV!aO_!aOa!bOh!iO!X!kO!f!mO%j![O%k!]O%l!^O%m!_O%n!_O%o!`O%p!`O%q!aO%r!aO%s!aO~Ok%xXl%xXm%xXn%xXo%xXp%xXs%xXz%xX{%xX!x%xX#g%xX%[%xX%_%xX%z%xXg%xX!T%xX!U%xX%{%xX!W%xX![%xX!Q%xX#[%xXt%xX!m%xX~P%SOfoOhYO!XZO!][O!h`O!r`O!s`O!t`O%oRO%pRO%tSO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O~Oz%wX{%wX#g%wX%[%wX%_%wX%z%wX~Ok!pOl!qOm!oOn!oOo!rOp!sOs!tO!x%wX~P)pOV!zOg!|Oo0cOv0qO!PrO~P'vOV#OOo0cOv0qO!W#PO~P'vOV#SOa#TOo0cOv0qO![#UO~P'vOQ#XO%`#XO%a#ZO~OQ#^OR#[O%`#^O%a#`O~OV%iX_%iXa%iXh%iXk%iXl%iXm%iXn%iXo%iXp%iXs%iXz%iX!X%iX!f%iX%j%iX%k%iX%l%iX%m%iX%n%iX%o%iX%p%iX%q%iX%r%iX%s%iXg%iX!T%iX!U%iX~O&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O{%iX!x%iX#g%iX%[%iX%_%iX%z%iX%{%iX!W%iX![%iX!Q%iX#[%iXt%iX!m%iX~P,eOz#dO{%hX!x%hX#g%hX%[%hX%_%hX%z%hX~Oo0cOv0qO~P'vO#g#gO%[#iO%_#iO~O%uWO~O!T#nO#u!VO#z!WO#}hO~OopO~P'vOV#sOa#tO%uWO{wP~OV#xOo0cOv0qO!Q#yO~P'vO{#{O!x$QO%z#|O#g!yX%[!yX%_!yX~OV#xOo0cOv0qO#g#SX%[#SX%_#SX~P'vOo0cOv0qO#g#WX%[#WX%_#WX~P'vOh$WO%uWO~O!f$YO!r$YO%uWO~OV$eO~P'vO!U$gO#s$hO#u$iO~O{$jO~OV$qO~P'vOS$sO%[$rO%_$rO%c$tO~OV$}Oa$}Og%POo0cOv0qO~P'vOo0cOv0qO{%SO~P'vO&Y%UO~Oa!bOh!iO!X!kO!f!mOVba_bakbalbambanbaobapbasbazba{ba!xba#gba%[ba%_ba%jba%kba%lba%mba%nba%oba%pba%qba%rba%sba%zbagba!Tba!Uba%{ba!Wba![ba!Qba#[batba!mba~On%ZO~Oo%ZO~P'vOo0cO~P'vOk0eOl0fOm0dOn0dOo0mOp0nOs0rOg%wX!T%wX!U%wX%{%wX!W%wX![%wX!Q%wX#[%wX!m%wX~P)pO%{%]Og%vXz%vX!T%vX!U%vX!W%vX{%vX~Og%_Oz%`O!T%dO!U%cO~Og%_O~Oz%gO!T%dO!U%cO!W&SX~O!W%kO~Oz%lO{%nO!T%dO!U%cO![%}X~O![%rO~O![%sO~OQ#XO%`#XO%a%uO~OV%wOo0cOv0qO!PrO~P'vOQ#^OR#[O%`#^O%a%zO~OV!qa_!qaa!qah!qak!qal!qam!qan!qao!qap!qas!qaz!qa{!qa!X!qa!f!qa!x!qa#g!qa%[!qa%_!qa%j!qa%k!qa%l!qa%m!qa%n!qa%o!qa%p!qa%q!qa%r!qa%s!qa%z!qag!qa!T!qa!U!qa%{!qa!W!qa![!qa!Q!qa#[!qat!qa!m!qa~P#yOz%|O{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~P%SOV&OOopOvqO{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~P'vOz%|O{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~OPdOVaOopOvqO!PrO!Q{O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO#g$zX%[$zX%_$zX~P'vO#g#gO%[&TO%_&TO~O!f&UOh&sX%[&sXz&sX#[&sX#g&sX%_&sX#Z&sXg&sX~Oh!iO%[&WO~Okealeameaneaoeapeaseazea{ea!xea#gea%[ea%_ea%zeagea!Tea!Uea%{ea!Wea![ea!Qea#[eatea!mea~P%SOsqazqa{qa#gqa%[qa%_qa%zqa~Ok!pOl!qOm!oOn!oOo!rOp!sO!xqa~PEcO%z&YOz%yX{%yX~O%uWOz%yX{%yX~Oz&]O{wX~O{&_O~Oz%lO#g%}X%[%}X%_%}Xg%}X{%}X![%}X!m%}X%z%}X~OV0lOo0cOv0qO!PrO~P'vO%z#|O#gUa%[Ua%_Ua~Oz&hO#g&PX%[&PX%_&PXn&PX~P%SOz&kO!Q&jO#g#Wa%[#Wa%_#Wa~Oz&lO#[&nO#g&rX%[&rX%_&rXg&rX~O!f$YO!r$YO#Z&qO%uWO~O#Z&qO~Oz&sO#g&tX%[&tX%_&tX~Oz&uO#g&pX%[&pX%_&pX{&pX~O!X&wO%z&xO~Oz&|On&wX~P%SOn'PO~OPdOVaOopOvqO!PrO!Q{O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO%['UO~P'vOt'YO#p'WO#q'XOP#naV#naf#nah#nao#nas#nav#na!P#na!Q#na!T#na!U#na!X#na!]#na!h#na!r#na!s#na!t#na!{#na!}#na#P#na#R#na#T#na#X#na#Z#na#^#na#_#na#a#na#c#na#l#na#o#na#s#na#u#na#z#na#}#na$P#na%X#na%o#na%p#na%t#na%u#na&Z#na&[#na&]#na&^#na&_#na&`#na&a#na&b#na&c#na&d#na&e#na&f#na&g#na&h#na&i#na&j#na%Z#na%_#na~Oz'ZO#[']O{&xX~Oh'_O!X&wO~Oh!iO{$jO!X&wO~O{'eO~P%SO%['hO%_'hO~OS'iO%['hO%_'hO~OV!aO_!aOa!bOh!iO!X!kO!f!mO%l!^O%m!_O%n!_O%o!`O%p!`O%q!aO%r!aO%s!aOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~O%k!]O~P!#uO%kWi~P!#uOV!aO_!aOa!bOh!iO!X!kO!f!mO%o!`O%p!`O%q!aO%r!aO%s!aOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%kWi%lWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~O%m!_O%n!_O~P!&pO%mWi%nWi~P!&pOa!bOh!iO!X!kO!f!mOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%kWi%lWi%mWi%nWi%oWi%pWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~OV!aO_!aO%q!aO%r!aO%s!aO~P!)nOVWi_Wi%qWi%rWi%sWi~P!)nO!T%dO!U%cOg&VXz&VX~O%z'kO%{'kO~P,eOz'mOg&UX~Og'oO~Oz'pO{'rO!W&XX~Oo0cOv0qOz'pO{'sO!W&XX~P'vO!W'uO~Om!oOn!oOo!rOp!sOkjisjizji{ji!xji#gji%[ji%_ji%zji~Ol!qO~P!.aOlji~P!.aOk0eOl0fOm0dOn0dOo0mOp0nO~Ot'wO~P!/jOV'|Og'}Oo0cOv0qO~P'vOg'}Oz(OO~Og(QO~O!U(SO~Og(TOz(OO!T%dO!U%cO~P%SOk0eOl0fOm0dOn0dOo0mOp0nOgqa!Tqa!Uqa%{qa!Wqa![qa!Qqa#[qatqa!mqa~PEcOV'|Oo0cOv0qO!W&Sa~P'vOz(WO!W&Sa~O!W(XO~Oz(WO!T%dO!U%cO!W&Sa~P%SOV(]Oo0cOv0qO![%}a#g%}a%[%}a%_%}ag%}a{%}a!m%}a%z%}a~P'vOz(^O![%}a#g%}a%[%}a%_%}ag%}a{%}a!m%}a%z%}a~O![(aO~Oz(^O!T%dO!U%cO![%}a~P%SOz(dO!T%dO!U%cO![&Ta~P%SOz(gO{&lX![&lX!m&lX%z&lX~O{(kO![(mO!m(nO%z(jO~OV&OOopOvqO{%hi!x%hi#g%hi%[%hi%_%hi%z%hi~P'vOz(pO{%hi!x%hi#g%hi%[%hi%_%hi%z%hi~O!f&UOh&sa%[&saz&sa#[&sa#g&sa%_&sa#Z&sag&sa~O%[(uO~OV#sOa#tO%uWO~Oz&]O{wa~OopOvqO~P'vOz(^O#g%}a%[%}a%_%}ag%}a{%}a![%}a!m%}a%z%}a~P%SOz(zO#g%hX%[%hX%_%hX%z%hX~O%z#|O#gUi%[Ui%_Ui~O#g&Pa%[&Pa%_&Pan&Pa~P'vOz(}O#g&Pa%[&Pa%_&Pan&Pa~O%uWO#g&ra%[&ra%_&rag&ra~Oz)SO#g&ra%[&ra%_&rag&ra~Og)VO~OV)WOh$WO%uWO~O#Z)XO~O%uWO#g&ta%[&ta%_&ta~Oz)ZO#g&ta%[&ta%_&ta~Oo0cOv0qO#g&pa%[&pa%_&pa{&pa~P'vOz)^O#g&pa%[&pa%_&pa{&pa~OV)`Oa)`O%uWO~O%z)eO~Ot)hO#j)gOP#hiV#hif#hih#hio#his#hiv#hi!P#hi!Q#hi!T#hi!U#hi!X#hi!]#hi!h#hi!r#hi!s#hi!t#hi!{#hi!}#hi#P#hi#R#hi#T#hi#X#hi#Z#hi#^#hi#_#hi#a#hi#c#hi#l#hi#o#hi#s#hi#u#hi#z#hi#}#hi$P#hi%X#hi%o#hi%p#hi%t#hi%u#hi&Z#hi&[#hi&]#hi&^#hi&_#hi&`#hi&a#hi&b#hi&c#hi&d#hi&e#hi&f#hi&g#hi&h#hi&i#hi&j#hi%Z#hi%_#hi~Ot)iOP#kiV#kif#kih#kio#kis#kiv#ki!P#ki!Q#ki!T#ki!U#ki!X#ki!]#ki!h#ki!r#ki!s#ki!t#ki!{#ki!}#ki#P#ki#R#ki#T#ki#X#ki#Z#ki#^#ki#_#ki#a#ki#c#ki#l#ki#o#ki#s#ki#u#ki#z#ki#}#ki$P#ki%X#ki%o#ki%p#ki%t#ki%u#ki&Z#ki&[#ki&]#ki&^#ki&_#ki&`#ki&a#ki&b#ki&c#ki&d#ki&e#ki&f#ki&g#ki&h#ki&i#ki&j#ki%Z#ki%_#ki~OV)kOn&wa~P'vOz)lOn&wa~Oz)lOn&wa~P%SOn)pO~O%Y)tO~Ot)wO#p'WO#q)vOP#niV#nif#nih#nio#nis#niv#ni!P#ni!Q#ni!T#ni!U#ni!X#ni!]#ni!h#ni!r#ni!s#ni!t#ni!{#ni!}#ni#P#ni#R#ni#T#ni#X#ni#Z#ni#^#ni#_#ni#a#ni#c#ni#l#ni#o#ni#s#ni#u#ni#z#ni#}#ni$P#ni%X#ni%o#ni%p#ni%t#ni%u#ni&Z#ni&[#ni&]#ni&^#ni&_#ni&`#ni&a#ni&b#ni&c#ni&d#ni&e#ni&f#ni&g#ni&h#ni&i#ni&j#ni%Z#ni%_#ni~OV)zOo0cOv0qO{$jO~P'vOo0cOv0qO{&xa~P'vOz*OO{&xa~OV*SOa*TOg*WO%q*UO%uWO~O{$jO&{*YO~Oh'_O~Oh!iO{$jO~O%[*_O~O%[*aO%_*aO~OV$}Oa$}Oo0cOv0qOg&Ua~P'vOz*dOg&Ua~Oo0cOv0qO{*gO!W&Xa~P'vOz*hO!W&Xa~Oo0cOv0qOz*hO{*kO!W&Xa~P'vOo0cOv0qOz*hO!W&Xa~P'vOz*hO{*kO!W&Xa~Om0dOn0dOo0mOp0nOgjikjisjizji!Tji!Uji%{ji!Wji{ji![ji#gji%[ji%_ji!Qji#[jitji!mji%zji~Ol0fO~P!NkOlji~P!NkOV'|Og*pOo0cOv0qO~P'vOn*rO~Og*pOz*tO~Og*uO~OV'|Oo0cOv0qO!W&Si~P'vOz*vO!W&Si~O!W*wO~OV(]Oo0cOv0qO![%}i#g%}i%[%}i%_%}ig%}i{%}i!m%}i%z%}i~P'vOz*zO!T%dO!U%cO![&Ti~Oz*}O![%}i#g%}i%[%}i%_%}ig%}i{%}i!m%}i%z%}i~O![+OO~Oa+QOo0cOv0qO![&Ti~P'vOz*zO![&Ti~O![+SO~OV+UOo0cOv0qO{&la![&la!m&la%z&la~P'vOz+VO{&la![&la!m&la%z&la~O!]+YO&n+[O![!nX~O![+^O~O{(kO![+_O~O{(kO![+_O!m+`O~OV&OOopOvqO{%hq!x%hq#g%hq%[%hq%_%hq%z%hq~P'vOz$ri{$ri!x$ri#g$ri%[$ri%_$ri%z$ri~P%SOV&OOopOvqO~P'vOV&OOo0cOv0qO#g%ha%[%ha%_%ha%z%ha~P'vOz+aO#g%ha%[%ha%_%ha%z%ha~Oz$ia#g$ia%[$ia%_$ian$ia~P%SO#g&Pi%[&Pi%_&Pin&Pi~P'vOz+dO#g#Wq%[#Wq%_#Wq~O#[+eOz$va#g$va%[$va%_$vag$va~O%uWO#g&ri%[&ri%_&rig&ri~Oz+gO#g&ri%[&ri%_&rig&ri~OV+iOh$WO%uWO~O%uWO#g&ti%[&ti%_&ti~Oo0cOv0qO#g&pi%[&pi%_&pi{&pi~P'vO{#{Oz#eX!W#eX~Oz+mO!W&uX~O!W+oO~Ot+rO#j)gOP#hqV#hqf#hqh#hqo#hqs#hqv#hq!P#hq!Q#hq!T#hq!U#hq!X#hq!]#hq!h#hq!r#hq!s#hq!t#hq!{#hq!}#hq#P#hq#R#hq#T#hq#X#hq#Z#hq#^#hq#_#hq#a#hq#c#hq#l#hq#o#hq#s#hq#u#hq#z#hq#}#hq$P#hq%X#hq%o#hq%p#hq%t#hq%u#hq&Z#hq&[#hq&]#hq&^#hq&_#hq&`#hq&a#hq&b#hq&c#hq&d#hq&e#hq&f#hq&g#hq&h#hq&i#hq&j#hq%Z#hq%_#hq~On$|az$|a~P%SOV)kOn&wi~P'vOz+yOn&wi~Oz,TO{$jO#[,TO~O#q,VOP#nqV#nqf#nqh#nqo#nqs#nqv#nq!P#nq!Q#nq!T#nq!U#nq!X#nq!]#nq!h#nq!r#nq!s#nq!t#nq!{#nq!}#nq#P#nq#R#nq#T#nq#X#nq#Z#nq#^#nq#_#nq#a#nq#c#nq#l#nq#o#nq#s#nq#u#nq#z#nq#}#nq$P#nq%X#nq%o#nq%p#nq%t#nq%u#nq&Z#nq&[#nq&]#nq&^#nq&_#nq&`#nq&a#nq&b#nq&c#nq&d#nq&e#nq&f#nq&g#nq&h#nq&i#nq&j#nq%Z#nq%_#nq~O#[,WOz%Oa{%Oa~Oo0cOv0qO{&xi~P'vOz,YO{&xi~O{#{O%z,[Og&zXz&zX~O%uWOg&zXz&zX~Oz,`Og&yX~Og,bO~O%Y,eO~O!T%dO!U%cOg&Viz&Vi~OV$}Oa$}Oo0cOv0qOg&Ui~P'vO{,hOz$la!W$la~Oo0cOv0qO{,iOz$la!W$la~P'vOo0cOv0qO{*gO!W&Xi~P'vOz,lO!W&Xi~Oo0cOv0qOz,lO!W&Xi~P'vOz,lO{,oO!W&Xi~Og$hiz$hi!W$hi~P%SOV'|Oo0cOv0qO~P'vOn,qO~OV'|Og,rOo0cOv0qO~P'vOV'|Oo0cOv0qO!W&Sq~P'vOz$gi![$gi#g$gi%[$gi%_$gig$gi{$gi!m$gi%z$gi~P%SOV(]Oo0cOv0qO~P'vOa+QOo0cOv0qO![&Tq~P'vOz,sO![&Tq~O![,tO~OV(]Oo0cOv0qO![%}q#g%}q%[%}q%_%}qg%}q{%}q!m%}q%z%}q~P'vO{,uO~OV+UOo0cOv0qO{&li![&li!m&li%z&li~P'vOz,zO{&li![&li!m&li%z&li~O!]+YO&n+[O![!na~O{(kO![,}O~OV&OOo0cOv0qO#g%hi%[%hi%_%hi%z%hi~P'vOz-OO#g%hi%[%hi%_%hi%z%hi~O%uWO#g&rq%[&rq%_&rqg&rq~Oz-RO#g&rq%[&rq%_&rqg&rq~OV)`Oa)`O%uWO!W&ua~Oz-TO!W&ua~On$|iz$|i~P%SOV)kO~P'vOV)kOn&wq~P'vOt-XOP#myV#myf#myh#myo#mys#myv#my!P#my!Q#my!T#my!U#my!X#my!]#my!h#my!r#my!s#my!t#my!{#my!}#my#P#my#R#my#T#my#X#my#Z#my#^#my#_#my#a#my#c#my#l#my#o#my#s#my#u#my#z#my#}#my$P#my%X#my%o#my%p#my%t#my%u#my&Z#my&[#my&]#my&^#my&_#my&`#my&a#my&b#my&c#my&d#my&e#my&f#my&g#my&h#my&i#my&j#my%Z#my%_#my~O%Z-]O%_-]O~P`O#q-^OP#nyV#nyf#nyh#nyo#nys#nyv#ny!P#ny!Q#ny!T#ny!U#ny!X#ny!]#ny!h#ny!r#ny!s#ny!t#ny!{#ny!}#ny#P#ny#R#ny#T#ny#X#ny#Z#ny#^#ny#_#ny#a#ny#c#ny#l#ny#o#ny#s#ny#u#ny#z#ny#}#ny$P#ny%X#ny%o#ny%p#ny%t#ny%u#ny&Z#ny&[#ny&]#ny&^#ny&_#ny&`#ny&a#ny&b#ny&c#ny&d#ny&e#ny&f#ny&g#ny&h#ny&i#ny&j#ny%Z#ny%_#ny~Oz-aO{$jO#[-aO~Oo0cOv0qO{&xq~P'vOz-dO{&xq~O%z,[Og&zaz&za~O{#{Og&zaz&za~OV*SOa*TO%q*UO%uWOg&ya~Oz-hOg&ya~O$S-lO~OV$}Oa$}Oo0cOv0qO~P'vOo0cOv0qO{-mOz$li!W$li~P'vOo0cOv0qOz$li!W$li~P'vO{-mOz$li!W$li~Oo0cOv0qO{*gO~P'vOo0cOv0qO{*gO!W&Xq~P'vOz-pO!W&Xq~Oo0cOv0qOz-pO!W&Xq~P'vOs-sO!T%dO!U%cOg&Oq!W&Oq![&Oqz&Oq~P!/jOa+QOo0cOv0qO![&Ty~P'vOz$ji![$ji~P%SOa+QOo0cOv0qO~P'vOV+UOo0cOv0qO~P'vOV+UOo0cOv0qO{&lq![&lq!m&lq%z&lq~P'vO{(kO![-xO!m-yO%z-wO~OV&OOo0cOv0qO#g%hq%[%hq%_%hq%z%hq~P'vO%uWO#g&ry%[&ry%_&ryg&ry~OV)`Oa)`O%uWO!W&ui~Ot-}OP#m!RV#m!Rf#m!Rh#m!Ro#m!Rs#m!Rv#m!R!P#m!R!Q#m!R!T#m!R!U#m!R!X#m!R!]#m!R!h#m!R!r#m!R!s#m!R!t#m!R!{#m!R!}#m!R#P#m!R#R#m!R#T#m!R#X#m!R#Z#m!R#^#m!R#_#m!R#a#m!R#c#m!R#l#m!R#o#m!R#s#m!R#u#m!R#z#m!R#}#m!R$P#m!R%X#m!R%o#m!R%p#m!R%t#m!R%u#m!R&Z#m!R&[#m!R&]#m!R&^#m!R&_#m!R&`#m!R&a#m!R&b#m!R&c#m!R&d#m!R&e#m!R&f#m!R&g#m!R&h#m!R&i#m!R&j#m!R%Z#m!R%_#m!R~Oo0cOv0qO{&xy~P'vOV*SOa*TO%q*UO%uWOg&yi~O$S-lO%Z.VO%_.VO~OV.aOh._O!X.^O!].`O!h.YO!s.[O!t.[O%p.XO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O~Oo0cOv0qOz$lq!W$lq~P'vO{.fOz$lq!W$lq~Oo0cOv0qO{*gO!W&Xy~P'vOz.gO!W&Xy~Oo0cOv.kO~P'vOs-sO!T%dO!U%cOg&Oy!W&Oy![&Oyz&Oy~P!/jO{(kO![.nO~O{(kO![.nO!m.oO~OV*SOa*TO%q*UO%uWO~Oh.tO!f.rOz$TX#[$TX%j$TXg$TX~Os$TX{$TX!W$TX![$TX~P$-bO%o.vO%p.vOs$UXz$UX{$UX#[$UX%j$UX!W$UXg$UX![$UX~O!h.xO~Oz.|O#[/OO%j.yOs&|X{&|X!W&|Xg&|X~Oa/RO~P$)zOh.tOs&}Xz&}X{&}X#[&}X%j&}X!W&}Xg&}X![&}X~Os/VO{$jO~Oo0cOv0qOz$ly!W$ly~P'vOo0cOv0qO{*gO!W&X!R~P'vOz/ZO!W&X!R~Og&RXs&RX!T&RX!U&RX!W&RX![&RXz&RX~P!/jOs-sO!T%dO!U%cOg&Qa!W&Qa![&Qaz&Qa~O{(kO![/^O~O!f.rOh$[as$[az$[a{$[a#[$[a%j$[a!W$[ag$[a![$[a~O!h/eO~O%o.vO%p.vOs$Uaz$Ua{$Ua#[$Ua%j$Ua!W$Uag$Ua![$Ua~O%j.yOs$Yaz$Ya{$Ya#[$Ya!W$Yag$Ya![$Ya~Os&|a{&|a!W&|ag&|a~P$)nOz/jOs&|a{&|a!W&|ag&|a~O!W/mO~Og/mO~O{/oO~O![/pO~Oo0cOv0qO{*gO!W&X!Z~P'vO{/sO~O%z/tO~P$-bOz/uO#[/OO%j.yOg'PX~Oz/uOg'PX~Og/wO~O!h/xO~O#[/OOs%Saz%Sa{%Sa%j%Sa!W%Sag%Sa![%Sa~O#[/OO%j.yOs%Waz%Wa{%Wa!W%Wag%Wa~Os&|i{&|i!W&|ig&|i~P$)nOz/zO#[/OO%j.yO!['Oa~Og'Pa~P$)nOz0SOg'Pa~Oa0UO!['Oi~P$)zOz0WO!['Oi~Oz0WO#[/OO%j.yO!['Oi~O#[/OO%j.yOg$biz$bi~O%z0ZO~P$-bO#[/OO%j.yOg%Vaz%Va~Og'Pi~P$)nO{0^O~Oa0UO!['Oq~P$)zOz0`O!['Oq~O#[/OO%j.yOz%Ui![%Ui~Oa0UO~P$)zOa0UO!['Oy~P$)zO#[/OO%j.yOg$ciz$ci~O#[/OO%j.yOz%Uq![%Uq~Oz+aO#g%ha%[%ha%_%ha%z%ha~P%SOV&OOo0cOv0qO~P'vOn0hO~Oo0hO~P'vO{0iO~Ot0jO~P!/jO&]&Z&j&h&i&g&f&d&e&c&b&`&a&_&^&[%u~",goto:"!=j'QPPPPPP'RP'Z*s+[+t,_,y-fP.SP'Z.r.r'ZPPP'Z2[PPPPPP2[5PPP5PP7b7k=sPP=v>h>kPP'Z'ZPP>zPP'Z'ZPP'Z'Z'Z'Z'Z?O?w'ZP?zP@QDXGuGyPG|HWH['ZPPPH_Hk'RP'R'RP'RP'RP'RP'RP'R'R'RP'RPP'RPP'RP'RPHqH}IVPI^IdPI^PI^I^PPPI^PKrPK{LVL]KrPI^LfPI^PLmLsPLwM]MzNeLwLwNkNxLwLwLwLw! ^! d! g! l! o! y!!P!!]!!o!!u!#P!#V!#s!#y!$P!$Z!$a!$g!$y!%T!%Z!%a!%k!%q!%w!%}!&T!&Z!&e!&k!&u!&{!'U!'[!'k!'s!'}!(UPPPPPPPPPPP!([!(_!(e!(n!(x!)TPPPPPPPPPPPP!-u!/Z!3^!6oPP!6w!7W!7a!8Y!8P!8c!8i!8l!8o!8r!8z!9jPPPPPPPPPPPPPPPPP!9m!9q!9wP!:]!:a!:m!:v!;S!;j!;m!;p!;v!;|!<S!<VP!<_!<h!=d!=g]eOn#g$j)t,P'}`OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0r{!cQ#c#p$R$d$p%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g}!dQ#c#p$R$d$p$u%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g!P!eQ#c#p$R$d$p$u$v%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g!R!fQ#c#p$R$d$p$u$v$w%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g!T!gQ#c#p$R$d$p$u$v$w$x%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g!V!hQ#c#p$R$d$p$u$v$w$x$y%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g!Z!hQ!n#c#p$R$d$p$u$v$w$x$y$z%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g'}TOTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0r&eVOYZ[dnprxy}!P!Q!U!i!k!o!p!q!s!t#[#d#g#y#{#}$Q$h$j$}%S%Z%^%`%g%l%n%w%|&Z&_&j&k&u&x'P'W'Z'l'm'p'r's'w(O(W(^(d(g(p(r(z)^)e)g)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+U+V+Y+a+d+k,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0n0r%oXOYZ[dnrxy}!P!Q!U!i!k#[#d#g#y#{#}$Q$h$j$}%S%^%`%g%l%n%w%|&Z&_&j&k&u&x'P'W'Z'l'm'p'r's'w(O(W(^(d(g(p(r(z)^)e)g)p)t)z*O*Y*d*g*h*k*q*t*v*y*z*}+U+V+Y+a+d+k,P,X,Y,],g,h,i,k,l,o,s,u,w,y,z-O-d-f-m-p.f.g/V/Z0i0j0kQ#vqQ/[.kR0o0q't`OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0rh#jhz{$W$Z&l&q)S)X+f+g-RW#rq&].k0qQ$]|Q$a!OQ$n!VQ$o!WW$|!i'm*d,gS&[#s#tQ'S$iQ(s&UQ)U&nU)Y&s)Z+jW)a&w+m-T-{Q*Q']W*R'_,`-h.TQ+l)`S,_*S*TQ-Q+eQ-_,TQ-c,WQ.R-al.W-l.^._.a.z.|/R/j/o/t/y0U0Z0^Q/S.`Q/a.tQ/l/OU0P/u0S0[X0V/z0W0_0`R&Z#r!_!wYZ!P!Q!k%S%`%g'p'r's(O(W)g*g*h*k*q*t*v,h,i,k,l,o-m-p.f.g/ZR%^!vQ!{YQ%x#[Q&d#}Q&g$QR,{+YT.j-s/s!Y!jQ!n#c#p$R$d$p$u$v$w$x$y$z%e%j%p%q&`'O'g(q(|)j*o*x+w,v0gQ&X#kQ'c$oR*^'dR'l$|Q%V!mR/_.r'|_OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0rS#a_#b!P.[-l.^._.`.a.t.z.|/R/j/o/t/u/y/z0S0U0W0Z0[0^0_0`'|_OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0rT#a_#bT#^^#_R(o%xa(l%x(n(o+`,{-y-z.oT+[(k+]R-z,{Q$PsQ+l)aQ,^*RR-e,_X#}s$O$P&fQ&y$aQ'a$nQ'd$oR)s'SQ)b&wV-S+m-T-{ZgOn$j)t,PXkOn)t,PQ$k!TQ&z$bQ&{$cQ'^$mQ'b$oQ)q'RQ)x'WQ){'XQ)|'YQ*Z'`S*]'c'dQ+s)gQ+u)hQ+v)iQ+z)oS+|)r*[Q,Q)vQ,R)wS,S)y)zQ,d*^Q-V+rQ-W+tQ-Y+{S-Z+},OQ-`,UQ-b,VQ-|-XQ.O-[Q.P-^Q.Q-_Q.p-}Q.q.RQ/W.dR/r/XWkOn)t,PR#mjQ'`$nS)r'S'aR,O)sQ,]*RR-f,^Q*['`Q+})rR-[,OZiOjn)t,PQ'f$pR*`'gT-j,e-ku.c-l.^._.a.t.z.|/R/j/o/t/u/y0S0U0Z0[0^t.c-l.^._.a.t.z.|/R/j/o/t/u/y0S0U0Z0[0^Q/S.`X0V/z0W0_0`!P.Z-l.^._.`.a.t.z.|/R/j/o/t/u/y/z0S0U0W0Z0[0^0_0`Q.w.YR/f.xg.z.].{/b/i/n/|0O0Q0]0a0bu.b-l.^._.a.t.z.|/R/j/o/t/u/y0S0U0Z0[0^X.u.W.b/a0PR/c.tV0R/u0S0[R/X.dQnOS#on,PR,P)tQ&^#uR(x&^S%m#R#wS(_%m(bT(b%p&`Q%a!yQ%h!}W(P%a%h(U(YQ(U%eR(Y%jQ&i$RR)O&iQ(e%qQ*{(`T+R(e*{Q'n%OR*e'nS'q%R%SY*i'q*j,m-q.hU*j'r's'tU,m*k*l*mS-q,n,oR.h-rQ#Y]R%t#YQ#_^R%y#_Q(h%vS+W(h+XR+X(iQ+](kR,|+]Q#b_R%{#bQ#ebQ%}#cW&Q#e%}({+bQ({&cR+b0gQ$OsS&e$O&fR&f$PQ&v$_R)_&vQ&V#jR(t&VQ&m$VS)T&m+hR+h)UQ$Z{R&p$ZQ&t$]R)[&tQ+n)bR-U+nQ#hfR&S#hQ)f&zR+q)fQ&}$dS)m&})nR)n'OQ'V$kR)u'VQ'[$lS*P'[,ZR,Z*QQ,a*VR-i,aWjOn)t,PR#ljQ-k,eR.U-kd.{.]/b/i/n/|0O0Q0]0a0bR/h.{U.s.W/a0PR/`.sQ/{/nS0X/{0YR0Y/|S/v/b/cR0T/vQ.}.]R/k.}R!ZPXmOn)t,PWlOn)t,PR'T$jYfOn$j)t,PR&R#g[sOn#g$j)t,PR&d#}&dQOYZ[dnprxy}!P!Q!U!i!k!o!p!q!s!t#[#d#g#y#{#}$Q$h$j$}%S%Z%^%`%g%l%n%w%|&Z&_&j&k&u&x'P'W'Z'l'm'p'r's'w(O(W(^(d(g(p(r(z)^)e)g)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+U+V+Y+a+d+k,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0n0rQ!nTQ#caQ#poU$Rt%c(SS$d!R$gQ$p!XQ$u!cQ$v!dQ$w!eQ$x!fQ$y!gQ$z!hQ%e!zQ%j#OQ%p#SQ%q#TQ&`#xQ'O$eQ'g$qQ(q&OU(|&h(}+cW)j&|)l+x+yQ*o'|Q*x(]Q+w)kQ,v+QR0g0lQ!yYQ!}ZQ$b!PQ$c!QQ%R!kQ't%S^'{%`%g(O(W*q*t*v^*f'p*h,k,l-p.g/ZQ*l'rQ*m'sQ+t)gQ,j*gQ,n*kQ-n,hQ-o,iQ-r,oQ.e-mR/Y.f[bOn#g$j)t,P!^!vYZ!P!Q!k%S%`%g'p'r's(O(W)g*g*h*k*q*t*v,h,i,k,l,o-m-p.f.g/ZQ#R[Q#fdS#wrxQ$UyW$_}$Q'P)pS$l!U$hW${!i'm*d,gS%v#[+Y`&P#d%|(p(r(z+a-O0kQ&a#yQ&b#{Q&c#}Q'j$}Q'z%^W([%l(^*y*}Q(`%nQ(i%wQ(v&ZS(y&_0iQ)P&jQ)Q&kU)]&u)^+kQ)d&xQ)y'WY)}'Z*O,X,Y-dQ*b'lS*n'w0jW+P(d*z,s,wW+T(g+V,y,zQ+p)eQ,U)zQ,c*YQ,x+UQ-P+dQ-e,]Q-v,uQ.S-fR/q/VhUOn#d#g$j%|&_'w(p(r)t,P%U!uYZ[drxy}!P!Q!U!i!k#[#y#{#}$Q$h$}%S%^%`%g%l%n%w&Z&j&k&u&x'P'W'Z'l'm'p'r's(O(W(^(d(g(z)^)e)g)p)z*O*Y*d*g*h*k*q*t*v*y*z*}+U+V+Y+a+d+k,X,Y,],g,h,i,k,l,o,s,u,w,y,z-O-d-f-m-p.f.g/V/Z0i0j0kQ#qpW%W!o!s0d0nQ%X!pQ%Y!qQ%[!tQ%f0cS'v%Z0hQ'x0eQ'y0fQ,p*rQ-u,qS.i-s/sR0p0rU#uq.k0qR(w&][cOn#g$j)t,PZ!xY#[#}$Q+YQ#W[Q#zrR$TxQ%b!yQ%i!}Q%o#RQ'j${Q(V%eQ(Z%jQ(c%pQ(f%qQ*|(`Q,f*bQ-t,pQ.m-uR/].lQ$StQ(R%cR*s(SQ.l-sR/}/sR#QZR#V[R%Q!iQ%O!iV*c'm*d,g!Z!lQ!n#c#p$R$d$p$u$v$w$x$y$z%e%j%p%q&`'O'g(q(|)j*o*x+w,v0gR%T!kT#]^#_Q%x#[R,{+YQ(m%xS+_(n(oQ,}+`Q-x,{S.n-y-zR/^.oT+Z(k+]Q$`}Q&g$QQ)o'PR+{)pQ$XzQ)W&qR+i)XQ$XzQ&o$WQ)W&qR+i)XQ#khW$Vz$W&q)XQ$[{Q&r$ZZ)R&l)S+f+g-RR$^|R)c&wXlOn)t,PQ$f!RR'Q$gQ$m!UR'R$hR*X'_Q*V'_V-g,`-h.TQ.d-lQ/P.^R/Q._U.]-l.^._Q/U.aQ/b.tQ/g.zU/i.|/j/yQ/n/RQ/|/oQ0O/tU0Q/u0S0[Q0]0UQ0a0ZR0b0^R/T.`R/d.t",nodeNames:"⚠ print Escape { Comment Script AssignStatement * BinaryExpression BitOp BitOp BitOp BitOp ArithOp ArithOp @ ArithOp ** UnaryExpression ArithOp BitOp AwaitExpression await ) ( ParenthesizedExpression BinaryExpression or and CompareOp in not is UnaryExpression ConditionalExpression if else LambdaExpression lambda ParamList VariableName AssignOp , : NamedExpression AssignOp YieldExpression yield from TupleExpression ComprehensionExpression async for LambdaExpression ] [ ArrayExpression ArrayComprehensionExpression } { DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression CallExpression ArgList AssignOp MemberExpression . PropertyName Number String FormatString FormatReplacement FormatSelfDoc FormatConversion FormatSpec FormatReplacement FormatSelfDoc ContinuedString Ellipsis None Boolean TypeDef AssignOp UpdateStatement UpdateOp ExpressionStatement DeleteStatement del PassStatement pass BreakStatement break ContinueStatement continue ReturnStatement return YieldStatement PrintStatement RaiseStatement raise ImportStatement import as ScopeStatement global nonlocal AssertStatement assert TypeDefinition type TypeParamList TypeParam StatementGroup ; IfStatement Body elif WhileStatement while ForStatement TryStatement try except finally WithStatement with FunctionDefinition def ParamList AssignOp TypeDef ClassDefinition class DecoratedStatement Decorator At MatchStatement match MatchBody MatchClause case CapturePattern LiteralPattern ArithOp ArithOp AsPattern OrPattern LogicOp AttributePattern SequencePattern MappingPattern StarPattern ClassPattern PatternArgList KeywordPattern KeywordPattern Guard",maxTerm:277,context:Cs,nodeProps:[["isolate",-5,4,71,72,73,77,""],["group",-15,6,85,87,88,90,92,94,96,98,99,100,102,105,108,110,"Statement Statement",-22,8,18,21,25,40,49,50,56,57,60,61,62,63,64,67,70,71,72,79,80,81,82,"Expression",-10,114,116,119,121,122,126,128,133,135,138,"Statement",-9,143,144,147,148,150,151,152,153,154,"Pattern"],["openedBy",23,"(",54,"[",58,"{"],["closedBy",24,")",55,"]",59,"}"]],propSources:[Cl],skippedNodes:[0,4],repeatNodeCount:34,tokenData:"!2|~R!`OX%TXY%oY[%T[]%o]p%Tpq%oqr'ars)Yst*xtu%Tuv,dvw-hwx.Uxy/tyz0[z{0r{|2S|}2p}!O3W!O!P4_!P!Q:Z!Q!R;k!R![>_![!]Do!]!^Es!^!_FZ!_!`Gk!`!aHX!a!b%T!b!cIf!c!dJU!d!eK^!e!hJU!h!i!#f!i!tJU!t!u!,|!u!wJU!w!x!.t!x!}JU!}#O!0S#O#P&o#P#Q!0j#Q#R!1Q#R#SJU#S#T%T#T#UJU#U#VK^#V#YJU#Y#Z!#f#Z#fJU#f#g!,|#g#iJU#i#j!.t#j#oJU#o#p!1n#p#q!1s#q#r!2a#r#s!2f#s$g%T$g;'SJU;'S;=`KW<%lOJU`%YT&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T`%lP;=`<%l%To%v]&n`%c_OX%TXY%oY[%T[]%o]p%Tpq%oq#O%T#O#P&o#P#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To&tX&n`OY%TYZ%oZ]%T]^%o^#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc'f[&n`O!_%T!_!`([!`#T%T#T#U(r#U#f%T#f#g(r#g#h(r#h#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc(cTmR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc(yT!mR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk)aV&n`&[ZOr%Trs)vs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk){V&n`Or%Trs*bs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk*iT&n`&^ZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To+PZS_&n`OY*xYZ%TZ]*x]^%T^#o*x#o#p+r#p#q*x#q#r+r#r;'S*x;'S;=`,^<%lO*x_+wTS_OY+rZ]+r^;'S+r;'S;=`,W<%lO+r_,ZP;=`<%l+ro,aP;=`<%l*xj,kV%rQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj-XT!xY&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj-oV%lQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk.]V&n`&ZZOw%Twx.rx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk.wV&n`Ow%Twx/^x#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk/eT&n`&]ZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk/{ThZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc0cTgR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk0yXVZ&n`Oz%Tz{1f{!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk1mVaR&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk2ZV%oZ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc2wTzR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To3_W%pZ&n`O!_%T!_!`-Q!`!a3w!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Td4OT&{S&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk4fX!fQ&n`O!O%T!O!P5R!P!Q%T!Q![6T![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk5WV&n`O!O%T!O!P5m!P#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk5tT!rZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti6[a!hX&n`O!Q%T!Q![6T![!g%T!g!h7a!h!l%T!l!m9s!m#R%T#R#S6T#S#X%T#X#Y7a#Y#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti7fZ&n`O{%T{|8X|}%T}!O8X!O!Q%T!Q![8s![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti8^V&n`O!Q%T!Q![8s![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti8z]!hX&n`O!Q%T!Q![8s![!l%T!l!m9s!m#R%T#R#S8s#S#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti9zT!hX&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk:bX%qR&n`O!P%T!P!Q:}!Q!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj;UV%sQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti;ro!hX&n`O!O%T!O!P=s!P!Q%T!Q![>_![!d%T!d!e?q!e!g%T!g!h7a!h!l%T!l!m9s!m!q%T!q!rA]!r!z%T!z!{Bq!{#R%T#R#S>_#S#U%T#U#V?q#V#X%T#X#Y7a#Y#^%T#^#_9s#_#c%T#c#dA]#d#l%T#l#mBq#m#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti=xV&n`O!Q%T!Q![6T![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti>fc!hX&n`O!O%T!O!P=s!P!Q%T!Q![>_![!g%T!g!h7a!h!l%T!l!m9s!m#R%T#R#S>_#S#X%T#X#Y7a#Y#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti?vY&n`O!Q%T!Q!R@f!R!S@f!S#R%T#R#S@f#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti@mY!hX&n`O!Q%T!Q!R@f!R!S@f!S#R%T#R#S@f#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiAbX&n`O!Q%T!Q!YA}!Y#R%T#R#SA}#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiBUX!hX&n`O!Q%T!Q!YA}!Y#R%T#R#SA}#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiBv]&n`O!Q%T!Q![Co![!c%T!c!iCo!i#R%T#R#SCo#S#T%T#T#ZCo#Z#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiCv]!hX&n`O!Q%T!Q![Co![!c%T!c!iCo!i#R%T#R#SCo#S#T%T#T#ZCo#Z#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%ToDvV{_&n`O!_%T!_!`E]!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TcEdT%{R&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkEzT#gZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkFbXmR&n`O!^%T!^!_F}!_!`([!`!a([!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TjGUV%mQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkGrV%zZ&n`O!_%T!_!`([!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkH`WmR&n`O!_%T!_!`([!`!aHx!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TjIPV%nQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkIoV_Q#}P&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%ToJ_]&n`&YS%uZO!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUoKZP;=`<%lJUoKge&n`&YS%uZOr%Trs)Ysw%Twx.Ux!Q%T!Q![JU![!c%T!c!tJU!t!uLx!u!}JU!}#R%T#R#SJU#S#T%T#T#fJU#f#gLx#g#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUoMRa&n`&YS%uZOr%TrsNWsw%Twx! vx!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUkN_V&n`&`ZOr%TrsNts#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkNyV&n`Or%Trs! `s#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk! gT&n`&bZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk! }V&n`&_ZOw%Twx!!dx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!!iV&n`Ow%Twx!#Ox#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!#VT&n`&aZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!#oe&n`&YS%uZOr%Trs!%Qsw%Twx!&px!Q%T!Q![JU![!c%T!c!tJU!t!u!(`!u!}JU!}#R%T#R#SJU#S#T%T#T#fJU#f#g!(`#g#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!%XV&n`&dZOr%Trs!%ns#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!%sV&n`Or%Trs!&Ys#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!&aT&n`&fZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!&wV&n`&cZOw%Twx!'^x#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!'cV&n`Ow%Twx!'xx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!(PT&n`&eZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!(ia&n`&YS%uZOr%Trs!)nsw%Twx!+^x!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!)uV&n`&hZOr%Trs!*[s#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!*aV&n`Or%Trs!*vs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!*}T&n`&jZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!+eV&n`&gZOw%Twx!+zx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!,PV&n`Ow%Twx!,fx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!,mT&n`&iZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!-Vi&n`&YS%uZOr%TrsNWsw%Twx! vx!Q%T!Q![JU![!c%T!c!dJU!d!eLx!e!hJU!h!i!(`!i!}JU!}#R%T#R#SJU#S#T%T#T#UJU#U#VLx#V#YJU#Y#Z!(`#Z#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUo!.}a&n`&YS%uZOr%Trs)Ysw%Twx.Ux!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!0ZT!XZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc!0qT!WR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj!1XV%kQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T~!1sO!]~k!1zV%jR&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T~!2fO![~i!2mT%tX&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T",tokenizers:[Co,Ce,k8,Ca,0,1,2,3,4],topRules:{Script:[0,5]},specialized:[{term:221,get:e=>Ch[e]||-1}],tokenPrec:7668}),Cu=new class{constructor(){this.map=new WeakMap}setBuffer(e,n,r){let i=this.map.get(e);i||this.map.set(e,i=new Map),i.set(n,r)}getBuffer(e,n){let r=this.map.get(e);return r&&r.get(n)}set(e,n){e instanceof hB?this.setBuffer(e.context.buffer,e.index,n):e instanceof hQ&&this.map.set(e.tree,n)}get(e){return e instanceof hB?this.getBuffer(e.context.buffer,e.index):e instanceof hQ?this.map.get(e.tree):void 0}cursorSet(e,n){e.buffer?this.setBuffer(e.buffer.buffer,e.index,n):this.map.set(e.tree,n)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}},Cd=new Set(["Script","Body","FunctionDefinition","ClassDefinition","LambdaExpression","ForStatement","MatchClause"]);function Cp(e){return(n,r,i)=>{if(i)return!1;let s=n.node.getChild("VariableName");return s&&r(s,e),!0}}let Cf={FunctionDefinition:Cp("function"),ClassDefinition:Cp("class"),ForStatement(e,n,r){if(r){for(let r=e.node.firstChild;r;r=r.nextSibling)if("VariableName"==r.name)n(r,"variable");else if("in"==r.name)break}},ImportStatement(e,n){var r,i;let{node:s}=e,o=(null==(r=s.firstChild)?void 0:r.name)=="from";for(let e=s.getChild("import");e;e=e.nextSibling)"VariableName"==e.name&&(null==(i=e.nextSibling)?void 0:i.name)!="as"&&n(e,o?"variable":"namespace")},AssignStatement(e,n){for(let r=e.node.firstChild;r;r=r.nextSibling)if("VariableName"==r.name)n(r,"variable");else if(":"==r.name||"AssignOp"==r.name)break},ParamList(e,n){for(let r=null,i=e.node.firstChild;i;i=i.nextSibling)"VariableName"!=i.name||r&&/\*|AssignOp/.test(r.name)||n(i,"variable"),r=i},CapturePattern:Cp("variable"),AsPattern:Cp("variable"),__proto__:null},Cg=/^[\w\xa1-\uffff][\w\d\xa1-\uffff]*$/,Cm=["String","FormatString","Comment","PropertyName"],Cy=["__annotations__","__builtins__","__debug__","__doc__","__import__","__name__","__loader__","__package__","__spec__","False","None","True"].map(e=>({label:e,type:"constant"})).concat(["ArithmeticError","AssertionError","AttributeError","BaseException","BlockingIOError","BrokenPipeError","BufferError","BytesWarning","ChildProcessError","ConnectionAbortedError","ConnectionError","ConnectionRefusedError","ConnectionResetError","DeprecationWarning","EOFError","Ellipsis","EncodingWarning","EnvironmentError","Exception","FileExistsError","FileNotFoundError","FloatingPointError","FutureWarning","GeneratorExit","IOError","ImportError","ImportWarning","IndentationError","IndexError","InterruptedError","IsADirectoryError","KeyError","KeyboardInterrupt","LookupError","MemoryError","ModuleNotFoundError","NameError","NotADirectoryError","NotImplemented","NotImplementedError","OSError","OverflowError","PendingDeprecationWarning","PermissionError","ProcessLookupError","RecursionError","ReferenceError","ResourceWarning","RuntimeError","RuntimeWarning","StopAsyncIteration","StopIteration","SyntaxError","SyntaxWarning","SystemError","SystemExit","TabError","TimeoutError","TypeError","UnboundLocalError","UnicodeDecodeError","UnicodeEncodeError","UnicodeError","UnicodeTranslateError","UnicodeWarning","UserWarning","ValueError","Warning","ZeroDivisionError"].map(e=>({label:e,type:"type"}))).concat(["bool","bytearray","bytes","classmethod","complex","float","frozenset","int","list","map","memoryview","object","range","set","staticmethod","str","super","tuple","type"].map(e=>({label:e,type:"class"}))).concat(["abs","aiter","all","anext","any","ascii","bin","breakpoint","callable","chr","compile","delattr","dict","dir","divmod","enumerate","eval","exec","exit","filter","format","getattr","globals","hasattr","hash","help","hex","id","input","isinstance","issubclass","iter","len","license","locals","max","min","next","oct","open","ord","pow","print","property","quit","repr","reversed","round","setattr","slice","sorted","sum","vars","zip"].map(e=>({label:e,type:"function"}))),CO=[bs("def ${name}(${params}):\n	${}",{label:"def",detail:"function",type:"keyword"}),bs("for ${name} in ${collection}:\n	${}",{label:"for",detail:"loop",type:"keyword"}),bs("while ${}:\n	${}",{label:"while",detail:"loop",type:"keyword"}),bs("try:\n	${}\nexcept ${error}:\n	${}",{label:"try",detail:"/ except block",type:"keyword"}),bs("if ${}:\n	\n",{label:"if",detail:"block",type:"keyword"}),bs("if ${}:\n	${}\nelse:\n	${}",{label:"if",detail:"/ else block",type:"keyword"}),bs("class ${name}:\n	def __init__(self, ${params}):\n			${}",{label:"class",detail:"definition",type:"keyword"}),bs("import ${module}",{label:"import",detail:"statement",type:"keyword"}),bs("from ${module} import ${names}",{label:"from",detail:"import",type:"keyword"})],Cv=(ev=vf(Cy.concat(CO)),e=>{for(let n=c$(e.state).resolveInner(e.pos,-1);n;n=n.parent){if(Cm.indexOf(n.name)>-1)return null;if(n.type.isTop)break}return ev(e)});function Cb(e){let{node:n,pos:r}=e,i=e.lineIndent(r,-1),s=null;for(;;){let o=n.childBefore(r);if(o)if("Comment"==o.name)r=o.from;else if("Body"==o.name||"MatchBody"==o.name)e.baseIndentFor(o)+e.unit<=i&&(s=o),n=o;else if("MatchClause"==o.name)n=o;else if(o.type.is("Statement"))n=o;else break;else break}return s}function Cx(e,n){let r=e.baseIndentFor(n),i=e.lineAt(e.pos,-1),s=i.from+i.text.length;return/^\s*($|#)/.test(i.text)&&e.node.to<s+100&&!/\S/.test(e.state.sliceDoc(s,e.node.to))&&e.lineIndent(e.pos,-1)<=r||/^\s*(else:|elif |except |finally:|case\s+[^=:]+:)/.test(e.textAfter)&&e.lineIndent(e.pos,-1)>r?null:r+e.unit}let Cw=cI.define({name:"python",parser:Cc.configure({props:[cK.add({Body:e=>{var n;let r=/^\s*(#|$)/.test(e.textAfter)&&Cb(e)||e.node;return null!=(n=Cx(e,r))?n:e.continue()},MatchBody:e=>{var n;let r=Cb(e);return null!=(n=Cx(e,r||e.node))?n:e.continue()},IfStatement:e=>/^\s*(else:|elif )/.test(e.textAfter)?e.baseIndent:e.continue(),"ForStatement WhileStatement":e=>/^\s*else:/.test(e.textAfter)?e.baseIndent:e.continue(),TryStatement:e=>/^\s*(except[ :]|finally:|else:)/.test(e.textAfter)?e.baseIndent:e.continue(),MatchStatement:e=>/^\s*case /.test(e.textAfter)?e.baseIndent+e.unit:e.continue(),"TupleExpression ComprehensionExpression ParamList ArgList ParenthesizedExpression":c2({closing:")"}),"DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression":c2({closing:"}"}),"ArrayExpression ArrayComprehensionExpression":c2({closing:"]"}),MemberExpression:e=>e.baseIndent+e.unit,"String FormatString":()=>null,Script:e=>{var n;let r=Cb(e);return null!=(n=r&&Cx(e,r))?n:e.continue()}}),c6.add({"ArrayExpression DictionaryExpression SetExpression TupleExpression":c9,Body:(e,n)=>({from:e.from+1,to:e.to-(e.to!=n.doc.length)}),"String FormatString":(e,n)=>({from:n.doc.lineAt(e.from).to,to:e.to})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"'''",'"""'],stringPrefixes:["f","fr","rf","r","u","b","br","rb","F","FR","RF","R","U","B","BR","RB"]},commentTokens:{line:"#"},indentOnInput:/^\s*([\}\]\)]|else:|elif |except |finally:|case\s+[^:]*:?)$/}});var CS=[Cw.data.of({autocomplete:function(e){let n=c$(e.state).resolveInner(e.pos,-1);if(Cm.indexOf(n.name)>-1)return null;let r="VariableName"==n.name||n.to-n.from<20&&Cg.test(e.state.sliceDoc(n.from,n.to));if(!r&&!e.explicit)return null;let i=[];for(let r=n;r;r=r.parent)Cd.has(r.name)&&(i=i.concat(function e(n,r){let i=Cu.get(r);if(i)return i;let s=[],o=!0;function a(e,r){let i=n.sliceString(e.from,e.to);s.push({label:i,type:r})}return r.cursor(pe.IncludeAnonymous).iterate(r=>{if(r.name){let e=Cf[r.name];if(e&&e(r,a,o)||!o&&Cd.has(r.name))return!1;o=!1}else if(r.to-r.from>8192){for(let i of e(n,r.node))s.push(i);return!1}}),Cu.set(r,s),s}(e.state.doc,r)));return{options:i,from:r?n.from:e.pos,validFor:Cg}}}),Cw.data.of({autocomplete:Cv})];function C_(e,n=!1){let r=e.length,i=0,s="",o=0,a=16,l=0,h=0,c=0,u=0,d=0;function p(){if(s="",d=0,o=i,h=l,u=c,i>=r)return o=r,a=17;let n=e.charCodeAt(i);if(Ck(n)){do i++,s+=String.fromCharCode(n),n=e.charCodeAt(i);while(Ck(n));return a=15}if(CC(n))return i++,s+=String.fromCharCode(n),13===n&&10===e.charCodeAt(i)&&(i++,s+="\n"),l++,c=i,a=14;switch(n){case 123:return i++,a=1;case 125:return i++,a=2;case 91:return i++,a=3;case 93:return i++,a=4;case 58:return i++,a=6;case 44:return i++,a=5;case 34:return i++,s=function(){let n="",s=i;for(;;){if(i>=r){n+=e.substring(s,i),d=2;break}let o=e.charCodeAt(i);if(34===o){n+=e.substring(s,i),i++;break}if(92===o){if(n+=e.substring(s,i),++i>=r){d=2;break}switch(e.charCodeAt(i++)){case 34:n+='"';break;case 92:n+="\\";break;case 47:n+="/";break;case 98:n+="\b";break;case 102:n+="\f";break;case 110:n+="\n";break;case 114:n+="\r";break;case 116:n+="	";break;case 117:let o=function(n,r){let s=0,o=0;for(;s<4||!r;){let n=e.charCodeAt(i);if(n>=48&&n<=57)o=16*o+n-48;else if(n>=65&&n<=70)o=16*o+n-65+10;else if(n>=97&&n<=102)o=16*o+n-97+10;else break;i++,s++}return s<4&&(o=-1),o}(4,!0);o>=0?n+=String.fromCharCode(o):d=4;break;default:d=5}s=i;continue}if(o>=0&&o<=31)if(CC(o)){n+=e.substring(s,i),d=2;break}else d=6;i++}return n}(),a=10;case 47:let p=i-1;if(47===e.charCodeAt(i+1)){for(i+=2;i<r&&!CC(e.charCodeAt(i));)i++;return s=e.substring(p,i),a=12}if(42===e.charCodeAt(i+1)){i+=2;let n=r-1,o=!1;for(;i<n;){let n=e.charCodeAt(i);if(42===n&&47===e.charCodeAt(i+1)){i+=2,o=!0;break}i++,CC(n)&&(13===n&&10===e.charCodeAt(i)&&i++,l++,c=i)}return o||(i++,d=1),s=e.substring(p,i),a=13}return s+=String.fromCharCode(n),i++,a=16;case 45:if(s+=String.fromCharCode(n),++i===r||!CE(e.charCodeAt(i)))return a=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return s+=function(){let n=i;if(48===e.charCodeAt(i))i++;else for(i++;i<e.length&&CE(e.charCodeAt(i));)i++;if(i<e.length&&46===e.charCodeAt(i)){if(!(++i<e.length&&CE(e.charCodeAt(i))))return d=3,e.substring(n,i);for(i++;i<e.length&&CE(e.charCodeAt(i));)i++}let r=i;if(i<e.length&&(69===e.charCodeAt(i)||101===e.charCodeAt(i)))if((++i<e.length&&43===e.charCodeAt(i)||45===e.charCodeAt(i))&&i++,i<e.length&&CE(e.charCodeAt(i))){for(i++;i<e.length&&CE(e.charCodeAt(i));)i++;r=i}else d=3;return e.substring(n,r)}(),a=11;default:for(;i<r&&function(e){if(Ck(e)||CC(e))return!1;switch(e){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}(n);)i++,n=e.charCodeAt(i);if(o!==i){switch(s=e.substring(o,i)){case"true":return a=8;case"false":return a=9;case"null":return a=7}return a=16}return s+=String.fromCharCode(n),i++,a=16}}return{setPosition:function(e){i=e,s="",o=0,a=16,d=0},getPosition:()=>i,scan:n?function(){let e;do e=p();while(e>=12&&e<=15);return e}:p,getToken:()=>a,getTokenValue:()=>s,getTokenOffset:()=>o,getTokenLength:()=>i-o,getTokenStartLine:()=>h,getTokenStartCharacter:()=>o-u,getTokenError:()=>d}}function Ck(e){return 32===e||9===e}function CC(e){return 10===e||13===e}function CE(e){return e>=48&&e<=57}(eb=t5||(t5={}))[eb.lineFeed=10]="lineFeed",eb[eb.carriageReturn=13]="carriageReturn",eb[eb.space=32]="space",eb[eb._0=48]="_0",eb[eb._1=49]="_1",eb[eb._2=50]="_2",eb[eb._3=51]="_3",eb[eb._4=52]="_4",eb[eb._5=53]="_5",eb[eb._6=54]="_6",eb[eb._7=55]="_7",eb[eb._8=56]="_8",eb[eb._9=57]="_9",eb[eb.a=97]="a",eb[eb.b=98]="b",eb[eb.c=99]="c",eb[eb.d=100]="d",eb[eb.e=101]="e",eb[eb.f=102]="f",eb[eb.g=103]="g",eb[eb.h=104]="h",eb[eb.i=105]="i",eb[eb.j=106]="j",eb[eb.k=107]="k",eb[eb.l=108]="l",eb[eb.m=109]="m",eb[eb.n=110]="n",eb[eb.o=111]="o",eb[eb.p=112]="p",eb[eb.q=113]="q",eb[eb.r=114]="r",eb[eb.s=115]="s",eb[eb.t=116]="t",eb[eb.u=117]="u",eb[eb.v=118]="v",eb[eb.w=119]="w",eb[eb.x=120]="x",eb[eb.y=121]="y",eb[eb.z=122]="z",eb[eb.A=65]="A",eb[eb.B=66]="B",eb[eb.C=67]="C",eb[eb.D=68]="D",eb[eb.E=69]="E",eb[eb.F=70]="F",eb[eb.G=71]="G",eb[eb.H=72]="H",eb[eb.I=73]="I",eb[eb.J=74]="J",eb[eb.K=75]="K",eb[eb.L=76]="L",eb[eb.M=77]="M",eb[eb.N=78]="N",eb[eb.O=79]="O",eb[eb.P=80]="P",eb[eb.Q=81]="Q",eb[eb.R=82]="R",eb[eb.S=83]="S",eb[eb.T=84]="T",eb[eb.U=85]="U",eb[eb.V=86]="V",eb[eb.W=87]="W",eb[eb.X=88]="X",eb[eb.Y=89]="Y",eb[eb.Z=90]="Z",eb[eb.asterisk=42]="asterisk",eb[eb.backslash=92]="backslash",eb[eb.closeBrace=125]="closeBrace",eb[eb.closeBracket=93]="closeBracket",eb[eb.colon=58]="colon",eb[eb.comma=44]="comma",eb[eb.dot=46]="dot",eb[eb.doubleQuote=34]="doubleQuote",eb[eb.minus=45]="minus",eb[eb.openBrace=123]="openBrace",eb[eb.openBracket=91]="openBracket",eb[eb.plus=43]="plus",eb[eb.slash=47]="slash",eb[eb.formFeed=12]="formFeed",eb[eb.tab=9]="tab";let CT=Array(20).fill(0).map((e,n)=>" ".repeat(n)),CP={" ":{"\n":Array(200).fill(0).map((e,n)=>"\n"+" ".repeat(n)),"\r":Array(200).fill(0).map((e,n)=>"\r"+" ".repeat(n)),"\r\n":Array(200).fill(0).map((e,n)=>"\r\n"+" ".repeat(n))},"	":{"\n":Array(200).fill(0).map((e,n)=>"\n"+"	".repeat(n)),"\r":Array(200).fill(0).map((e,n)=>"\r"+"	".repeat(n)),"\r\n":Array(200).fill(0).map((e,n)=>"\r\n"+"	".repeat(n))}},CA=["\n","\r","\r\n"];function CM(e,n){let r="";for(let i=0;i<n;i++)r+=e;return r}function CN(e,n){return -1!=="\r\n".indexOf(e.charAt(n))}(t4||(t4={})).DEFAULT={allowTrailingComma:!1},(ex=t3||(t3={}))[ex.None=0]="None",ex[ex.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",ex[ex.UnexpectedEndOfString=2]="UnexpectedEndOfString",ex[ex.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",ex[ex.InvalidUnicode=4]="InvalidUnicode",ex[ex.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",ex[ex.InvalidCharacter=6]="InvalidCharacter",(ew=t6||(t6={}))[ew.OpenBraceToken=1]="OpenBraceToken",ew[ew.CloseBraceToken=2]="CloseBraceToken",ew[ew.OpenBracketToken=3]="OpenBracketToken",ew[ew.CloseBracketToken=4]="CloseBracketToken",ew[ew.CommaToken=5]="CommaToken",ew[ew.ColonToken=6]="ColonToken",ew[ew.NullKeyword=7]="NullKeyword",ew[ew.TrueKeyword=8]="TrueKeyword",ew[ew.FalseKeyword=9]="FalseKeyword",ew[ew.StringLiteral=10]="StringLiteral",ew[ew.NumericLiteral=11]="NumericLiteral",ew[ew.LineCommentTrivia=12]="LineCommentTrivia",ew[ew.BlockCommentTrivia=13]="BlockCommentTrivia",ew[ew.LineBreakTrivia=14]="LineBreakTrivia",ew[ew.Trivia=15]="Trivia",ew[ew.Unknown=16]="Unknown",ew[ew.EOF=17]="EOF";let CD=function(e,n=[],r=t4.DEFAULT){let i=null,s=[],o=[];function a(e){Array.isArray(s)?s.push(e):null!==i&&(s[i]=e)}return function(e,n,r=t4.DEFAULT){var i;let s=C_(e,!1),o=[],a=0;function l(e){return e?n=>0===a&&e(n,s.getTokenOffset(),s.getTokenLength(),s.getTokenStartLine(),s.getTokenStartCharacter()):()=>!0}function h(e){return e?n=>0===a&&e(n,s.getTokenOffset(),s.getTokenLength(),s.getTokenStartLine(),s.getTokenStartCharacter(),()=>o.slice()):()=>!0}function c(e){return e?()=>{a>0?a++:!1===e(s.getTokenOffset(),s.getTokenLength(),s.getTokenStartLine(),s.getTokenStartCharacter(),()=>o.slice())&&(a=1)}:()=>!0}function u(e){return e?()=>{a>0&&a--,0===a&&e(s.getTokenOffset(),s.getTokenLength(),s.getTokenStartLine(),s.getTokenStartCharacter())}:()=>!0}let d=c(n.onObjectBegin),p=h(n.onObjectProperty),f=u(n.onObjectEnd),g=c(n.onArrayBegin),m=u(n.onArrayEnd),y=h(n.onLiteralValue),O=l(n.onSeparator),b=(i=n.onComment)?()=>0===a&&i(s.getTokenOffset(),s.getTokenLength(),s.getTokenStartLine(),s.getTokenStartCharacter()):()=>!0,x=l(n.onError),w=r&&r.disallowComments,S=r&&r.allowTrailingComma;function _(){for(;;){let e=s.scan();switch(s.getTokenError()){case 4:k(14);break;case 5:k(15);break;case 3:k(13);break;case 1:w||k(11);break;case 2:k(12);break;case 6:k(16)}switch(e){case 12:case 13:w?k(10):b();break;case 16:k(1);break;case 15:case 14:break;default:return e}}}function k(e,n=[],r=[]){if(x(e),n.length+r.length>0){let e=s.getToken();for(;17!==e;){if(-1!==n.indexOf(e)){_();break}if(-1!==r.indexOf(e))break;e=_()}}}function C(e){let n=s.getTokenValue();return e?y(n):(p(n),o.push(n)),_(),!0}if(_(),17===s.getToken())return r.allowEmptyContent||k(4,[],[]);!function e(){switch(s.getToken()){case 3:g(),_();let n=!0,r=!1;for(;4!==s.getToken()&&17!==s.getToken();){if(5===s.getToken()){if(r||k(4,[],[]),O(","),_(),4===s.getToken()&&S)break}else r&&k(6,[],[]);n?(o.push(0),n=!1):o[o.length-1]++,e()||k(4,[],[4,5]),r=!0}return m(),n||o.pop(),4!==s.getToken()?k(8,[4],[]):_(),!0;case 1:d(),_();let i=!1;for(;2!==s.getToken()&&17!==s.getToken();){if(5===s.getToken()){if(i||k(4,[],[]),O(","),_(),2===s.getToken()&&S)break}else i&&k(6,[],[]);(10!==s.getToken()?(k(3,[],[2,5]),1):(C(!1),6===s.getToken()?(O(":"),_(),e()||k(4,[],[2,5])):k(5,[],[2,5]),o.pop(),0))&&k(4,[],[2,5]),i=!0}return f(),2!==s.getToken()?k(7,[2],[]):_(),!0;case 10:return C(!0);default:switch(s.getToken()){case 11:let a=Number(s.getTokenValue());isNaN(a)&&(k(2),a=0),y(a);break;case 7:y(null);break;case 8:y(!0);break;case 9:y(!1);break;default:return!1}return _(),!0}}()?k(4,[],[]):17!==s.getToken()&&k(9,[],[])}(e,{onObjectBegin:()=>{let e={};a(e),o.push(s),s=e,i=null},onObjectProperty:e=>{i=e},onObjectEnd:()=>{s=o.pop()},onArrayBegin:()=>{let e=[];a(e),o.push(s),s=e,i=null},onArrayEnd:()=>{s=o.pop()},onLiteralValue:a,onError:(e,r,i)=>{n.push({error:e,offset:r,length:i})}},r),s[0]},CI=function e(n,r,i=!1){if(function(e,n,r=!1){return n>=e.offset&&n<e.offset+e.length||r&&n===e.offset+e.length}(n,r,i)){let s=n.children;if(Array.isArray(s))for(let n=0;n<s.length&&s[n].offset<=r;n++){let o=e(s[n],r,i);if(o)return o}return n}},C$=function e(n){if(!n.parent||!n.parent.children)return[];let r=e(n.parent);if("property"===n.parent.type){let e=n.parent.children[0].value;r.push(e)}else if("array"===n.parent.type){let e=n.parent.children.indexOf(n);-1!==e&&r.push(e)}return r},CR=function e(n){switch(n.type){case"array":return n.children.map(e);case"object":let r=Object.create(null);for(let i of n.children){let n=i.children[1];n&&(r[i.children[0].value]=e(n))}return r;case"null":case"string":case"number":case"boolean":return n.value;default:return}};function CL(e,n){let r,i;if(e===n)return!0;if(null==e||null==n||typeof e!=typeof n||"object"!=typeof e||Array.isArray(e)!==Array.isArray(n))return!1;if(Array.isArray(e)){if(e.length!==n.length)return!1;for(r=0;r<e.length;r++)if(!CL(e[r],n[r]))return!1}else{let s=[];for(i in e)s.push(i);s.sort();let o=[];for(i in n)o.push(i);if(o.sort(),!CL(s,o))return!1;for(r=0;r<s.length;r++)if(!CL(e[s[r]],n[s[r]]))return!1}return!0}function CQ(e){return"number"==typeof e}function Cj(e){return void 0!==e}function CV(e){return"boolean"==typeof e}function Cz(e){return"string"==typeof e}function CB(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function CF(e,n){let r=e.length-n.length;return r>0?e.lastIndexOf(n)===r:0===r&&e===n}function CZ(e){let n="";(function(e,n){if(e.length<n.length)return!1;for(let r=0;r<n.length;r++)if(e[r]!==n[r])return!1;return!0})(e,"(?i)")&&(e=e.substring(4),n="i");try{return RegExp(e,n+"u")}catch(r){try{return new RegExp(e,n)}catch(e){return}}}function Cq(e){let n=0;for(let r=0;r<e.length;r++){n++;let i=e.charCodeAt(r);55296<=i&&i<=56319&&r++}return n}function CW(...e){let n,r,i,s=e[0];if("string"==typeof s)n=s,r=s,e.splice(0,1),i=e&&"object"==typeof e[0]?e[0]:e;else if(s instanceof Array){let n=e.slice(1);if(s.length!==n.length+1)throw Error("expected a string as the first argument to l10n.t");let r=s[0];for(let e=1;e<s.length;e++)r+=`{${e-1}}`+s[e];return CW(r,...n)}else n=r=s.message,s.comment&&s.comment.length>0&&(n+=`/${Array.isArray(s.comment)?s.comment.join(""):s.comment}`),i=s.args??{};let o=nt?.[n];return o?"string"==typeof o?CU(o,i):o.comment?CU(o.message,i):CU(r,i):CU(r,i)}(eS=t9||(t9={}))[eS.InvalidSymbol=1]="InvalidSymbol",eS[eS.InvalidNumberFormat=2]="InvalidNumberFormat",eS[eS.PropertyNameExpected=3]="PropertyNameExpected",eS[eS.ValueExpected=4]="ValueExpected",eS[eS.ColonExpected=5]="ColonExpected",eS[eS.CommaExpected=6]="CommaExpected",eS[eS.CloseBraceExpected=7]="CloseBraceExpected",eS[eS.CloseBracketExpected=8]="CloseBracketExpected",eS[eS.EndOfFileExpected=9]="EndOfFileExpected",eS[eS.InvalidCommentToken=10]="InvalidCommentToken",eS[eS.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",eS[eS.UnexpectedEndOfString=12]="UnexpectedEndOfString",eS[eS.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",eS[eS.InvalidUnicode=14]="InvalidUnicode",eS[eS.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",eS[eS.InvalidCharacter=16]="InvalidCharacter",(e_=t7||(t7={}))[e_.Undefined=0]="Undefined",e_[e_.EnumValueMismatch=1]="EnumValueMismatch",e_[e_.Deprecated=2]="Deprecated",e_[e_.UnexpectedEndOfComment=257]="UnexpectedEndOfComment",e_[e_.UnexpectedEndOfString=258]="UnexpectedEndOfString",e_[e_.UnexpectedEndOfNumber=259]="UnexpectedEndOfNumber",e_[e_.InvalidUnicode=260]="InvalidUnicode",e_[e_.InvalidEscapeCharacter=261]="InvalidEscapeCharacter",e_[e_.InvalidCharacter=262]="InvalidCharacter",e_[e_.PropertyExpected=513]="PropertyExpected",e_[e_.CommaExpected=514]="CommaExpected",e_[e_.ColonExpected=515]="ColonExpected",e_[e_.ValueExpected=516]="ValueExpected",e_[e_.CommaOrCloseBacketExpected=517]="CommaOrCloseBacketExpected",e_[e_.CommaOrCloseBraceExpected=518]="CommaOrCloseBraceExpected",e_[e_.TrailingComma=519]="TrailingComma",e_[e_.DuplicateKey=520]="DuplicateKey",e_[e_.CommentNotPermitted=521]="CommentNotPermitted",e_[e_.PropertyKeysMustBeDoublequoted=528]="PropertyKeysMustBeDoublequoted",e_[e_.SchemaResolveError=768]="SchemaResolveError",e_[e_.SchemaUnsupportedFeature=769]="SchemaUnsupportedFeature",(ek=t8||(t8={}))[ek.v3=3]="v3",ek[ek.v4=4]="v4",ek[ek.v6=6]="v6",ek[ek.v7=7]="v7",ek[ek.v2019_09=19]="v2019_09",ek[ek.v2020_12=20]="v2020_12",(ne||(ne={})).LATEST={textDocument:{completion:{completionItem:{documentationFormat:[e8.Markdown,e8.PlainText],commitCharactersSupport:!0,labelDetailsSupport:!0}}}};var CX=/{([^}]+)}/g;function CU(e,n){return 0===Object.keys(n).length?e:e.replace(CX,(e,r)=>n[r]??e)}let CY={"color-hex":{errorMessage:CW("Invalid color format. Use #RGB, #RGBA, #RRGGBB or #RRGGBBAA."),pattern:/^#([0-9A-Fa-f]{3,4}|([0-9A-Fa-f]{2}){3,4})$/},"date-time":{errorMessage:CW("String is not a RFC3339 date-time."),pattern:/^(\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])T([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(Z|(\+|-)([01][0-9]|2[0-3]):([0-5][0-9]))$/i},date:{errorMessage:CW("String is not a RFC3339 date."),pattern:/^(\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$/i},time:{errorMessage:CW("String is not a RFC3339 time."),pattern:/^([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(Z|(\+|-)([01][0-9]|2[0-3]):([0-5][0-9]))$/i},email:{errorMessage:CW("String is not an e-mail address."),pattern:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z0-9-]+\.)+[a-zA-Z]{2,}))$/},hostname:{errorMessage:CW("String is not a hostname."),pattern:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i},ipv4:{errorMessage:CW("String is not an IPv4 address."),pattern:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/},ipv6:{errorMessage:CW("String is not an IPv6 address."),pattern:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i}};class CG{constructor(e,n,r=0){this.offset=n,this.length=r,this.parent=e}get children(){return[]}toString(){return"type: "+this.type+" ("+this.offset+"/"+this.length+")"+(this.parent?" parent: {"+this.parent.toString()+"}":"")}}class CH extends CG{constructor(e,n){super(e,n),this.type="null",this.value=null}}class CK extends CG{constructor(e,n,r){super(e,r),this.type="boolean",this.value=n}}class CJ extends CG{constructor(e,n){super(e,n),this.type="array",this.items=[]}get children(){return this.items}}class C0 extends CG{constructor(e,n){super(e,n),this.type="number",this.isInteger=!0,this.value=NaN}}class C1 extends CG{constructor(e,n,r){super(e,n,r),this.type="string",this.value=""}}class C2 extends CG{constructor(e,n,r){super(e,n),this.type="property",this.colonOffset=-1,this.keyNode=r}get children(){return this.valueNode?[this.keyNode,this.valueNode]:[this.keyNode]}}class C5 extends CG{constructor(e,n){super(e,n),this.type="object",this.properties=[]}get children(){return this.properties}}function C4(e){return CV(e)?e?{}:{not:{}}:e}(eC=nn||(nn={}))[eC.Key=0]="Key",eC[eC.Enum=1]="Enum";let C3="http://json-schema.org/";function C6(e){e.startsWith(C3)&&(e="https://json-schema.org/"+e.substring(C3.length));try{return kb.parse(e).toString(!0)}catch(n){return e}}function C9(e){return C7[C6(e)]??void 0}let C7={"https://json-schema.org/draft-03/schema":t8.v3,"https://json-schema.org/draft-04/schema":t8.v4,"https://json-schema.org/draft-06/schema":t8.v6,"https://json-schema.org/draft-07/schema":t8.v7,"https://json-schema.org/draft/2019-09/schema":t8.v2019_09,"https://json-schema.org/draft/2020-12/schema":t8.v2020_12};class C8{constructor(e){this.schemaDraft=e}}class Ee{constructor(e=-1,n){this.focusOffset=e,this.exclude=n,this.schemas=[]}add(e){this.schemas.push(e)}merge(e){Array.prototype.push.apply(this.schemas,e.schemas)}include(e){return(-1===this.focusOffset||Er(e,this.focusOffset))&&e!==this.exclude}newSub(){return new Ee(-1,this.exclude)}}class Et{constructor(){}get schemas(){return[]}add(e){}merge(e){}include(e){return!0}newSub(){return this}}Et.instance=new Et;class En{constructor(){this.problems=[],this.propertiesMatches=0,this.processedProperties=new Set,this.propertiesValueMatches=0,this.primaryValueMatches=0,this.enumValueMatch=!1,this.enumValues=void 0}hasProblems(){return!!this.problems.length}merge(e){this.problems=this.problems.concat(e.problems),this.propertiesMatches+=e.propertiesMatches,this.propertiesValueMatches+=e.propertiesValueMatches,this.mergeProcessedProperties(e)}mergeEnumValues(e){!this.enumValueMatch&&!e.enumValueMatch&&this.enumValues&&e.enumValues&&(this.enumValues=this.enumValues.concat(e.enumValues))}updateEnumMismatchProblemMessages(){if(!this.enumValueMatch&&this.enumValues)for(let e of this.problems)e.code===t7.EnumValueMismatch&&(e.message=CW("Value is not accepted. Valid values: {0}.",this.enumValues.map(e=>JSON.stringify(e)).join(", ")))}mergePropertyMatch(e){this.problems=this.problems.concat(e.problems),this.propertiesMatches++,(e.enumValueMatch||!e.hasProblems()&&e.propertiesMatches)&&this.propertiesValueMatches++,e.enumValueMatch&&e.enumValues&&1===e.enumValues.length&&this.primaryValueMatches++}mergeProcessedProperties(e){e.processedProperties.forEach(e=>this.processedProperties.add(e))}compare(e){let n=this.hasProblems();return n!==e.hasProblems()?n?-1:1:this.enumValueMatch!==e.enumValueMatch?e.enumValueMatch?-1:1:this.primaryValueMatches!==e.primaryValueMatches?this.primaryValueMatches-e.primaryValueMatches:this.propertiesValueMatches!==e.propertiesValueMatches?this.propertiesValueMatches-e.propertiesValueMatches:this.propertiesMatches-e.propertiesMatches}}function Er(e,n,r=!1){return n>=e.offset&&n<e.offset+e.length||r&&n===e.offset+e.length}class Ei{constructor(e,n=[],r=[]){this.root=e,this.syntaxErrors=n,this.comments=r}getNodeFromOffset(e,n=!1){if(this.root)return CI(this.root,e,n)}visit(e){if(this.root){let n=r=>{let i=e(r),s=r.children;if(Array.isArray(s))for(let e=0;e<s.length&&i;e++)i=n(s[e]);return i};n(this.root)}}validate(e,n,r=eq.Warning,i){if(this.root&&n){let s=new En;return Eo(this.root,n,s,Et.instance,new C8(i??Es(n))),s.problems.map(n=>{let i=eR.create(e.positionAt(n.location.offset),e.positionAt(n.location.offset+n.location.length));return eU.create(i,n.message,n.severity??r,n.code)})}}getMatchingSchemas(e,n=-1,r){if(this.root&&e){let i=new Ee(n,r),s=new C8(Es(e));return Eo(this.root,e,new En,i,s),i.schemas}return[]}}function Es(e,n=t8.v2020_12){let r=e.$schema;return r?C9(r)??n:n}function Eo(e,n,r,i,s){if(e&&i.include(e)){if("property"===e.type)return Eo(e.valueNode,n,r,i,s);switch(function(){function o(n){return e.type===n||"integer"===n&&"number"===e.type&&e.isInteger}if(Array.isArray(n.type)?n.type.some(o)||r.problems.push({location:{offset:e.offset,length:e.length},message:n.errorMessage||CW("Incorrect type. Expected one of {0}.",n.type.join(", "))}):n.type&&!o(n.type)&&r.problems.push({location:{offset:e.offset,length:e.length},message:n.errorMessage||CW('Incorrect type. Expected "{0}".',n.type)}),Array.isArray(n.allOf))for(let o of n.allOf){let n=new En,a=i.newSub();Eo(e,C4(o),n,a,s),r.merge(n),i.merge(a)}let a=C4(n.not);if(a){let o=new En,l=i.newSub();for(let h of(Eo(e,a,o,l,s),o.hasProblems()||r.problems.push({location:{offset:e.offset,length:e.length},message:n.errorMessage||CW("Matches a schema that is not allowed.")}),l.schemas))h.inverted=!h.inverted,i.add(h)}let l=(n,o)=>{let a,l=[];for(let r of n){let n=C4(r),h=new En,c=i.newSub();if(Eo(e,n,h,c,s),h.hasProblems()||l.push(n),a)if(o||h.hasProblems()||a.validationResult.hasProblems()){let e=h.compare(a.validationResult);e>0?a={schema:n,validationResult:h,matchingSchemas:c}:0===e&&(a.matchingSchemas.merge(c),a.validationResult.mergeEnumValues(h))}else a.matchingSchemas.merge(c),a.validationResult.propertiesMatches+=h.propertiesMatches,a.validationResult.propertiesValueMatches+=h.propertiesValueMatches,a.validationResult.mergeProcessedProperties(h);else a={schema:n,validationResult:h,matchingSchemas:c}}return l.length>1&&o&&r.problems.push({location:{offset:e.offset,length:1},message:CW("Matches multiple schemas when only one must validate.")}),a&&(a.validationResult.updateEnumMismatchProblemMessages(),r.merge(a.validationResult),i.merge(a.matchingSchemas)),l.length};Array.isArray(n.anyOf)&&l(n.anyOf,!1),Array.isArray(n.oneOf)&&l(n.oneOf,!0);let h=n=>{let o=new En,a=i.newSub();Eo(e,C4(n),o,a,s),r.merge(o),i.merge(a)},c=C4(n.if);if(c&&((n,o,a)=>{let l=C4(n),c=new En,u=i.newSub();Eo(e,l,c,u,s),i.merge(u),r.mergeProcessedProperties(c),c.hasProblems()?a&&h(a):o&&h(o)})(c,C4(n.then),C4(n.else)),Array.isArray(n.enum)){let i=CR(e),s=!1;for(let e of n.enum)if(CL(i,e)){s=!0;break}r.enumValues=n.enum,r.enumValueMatch=s,s||r.problems.push({location:{offset:e.offset,length:e.length},code:t7.EnumValueMismatch,message:n.errorMessage||CW("Value is not accepted. Valid values: {0}.",n.enum.map(e=>JSON.stringify(e)).join(", "))})}Cj(n.const)&&(CL(CR(e),n.const)?r.enumValueMatch=!0:(r.problems.push({location:{offset:e.offset,length:e.length},code:t7.EnumValueMismatch,message:n.errorMessage||CW("Value must be {0}.",JSON.stringify(n.const))}),r.enumValueMatch=!1),r.enumValues=[n.const]);let u=n.deprecationMessage;if(u||n.deprecated){u=u||CW("Value is deprecated");let n=e.parent?.type==="property"?e.parent:e;r.problems.push({location:{offset:n.offset,length:n.length},severity:eq.Warning,message:u,code:t7.Deprecated})}}(),e.type){case"object":!function(e){let o=Object.create(null),a=new Set;for(let n of e.properties){let e=n.keyNode.value;o[e]=n.valueNode,a.add(e)}if(Array.isArray(n.required)){for(let i of n.required)if(!o[i]){let n=e.parent&&"property"===e.parent.type&&e.parent.keyNode,s=n?{offset:n.offset,length:n.length}:{offset:e.offset,length:1};r.problems.push({location:s,message:CW('Missing property "{0}".',i)})}}let l=e=>{a.delete(e),r.processedProperties.add(e)};if(n.properties)for(let e of Object.keys(n.properties)){l(e);let a=n.properties[e],h=o[e];if(h)if(CV(a))if(a)r.propertiesMatches++,r.propertiesValueMatches++;else{let i=h.parent;r.problems.push({location:{offset:i.keyNode.offset,length:i.keyNode.length},message:n.errorMessage||CW("Property {0} is not allowed.",e)})}else{let e=new En;Eo(h,a,e,i,s),r.mergePropertyMatch(e)}}if(n.patternProperties)for(let e of Object.keys(n.patternProperties)){let h=CZ(e);if(h){let c=[];for(let l of a)if(h.test(l)){c.push(l);let a=o[l];if(a){let o=n.patternProperties[e];if(CV(o))if(o)r.propertiesMatches++,r.propertiesValueMatches++;else{let e=a.parent;r.problems.push({location:{offset:e.keyNode.offset,length:e.keyNode.length},message:n.errorMessage||CW("Property {0} is not allowed.",l)})}else{let e=new En;Eo(a,o,e,i,s),r.mergePropertyMatch(e)}}}c.forEach(l)}}let h=n.additionalProperties;if(void 0!==h)for(let e of a){l(e);let a=o[e];if(a){if(!1===h){let i=a.parent;r.problems.push({location:{offset:i.keyNode.offset,length:i.keyNode.length},message:n.errorMessage||CW("Property {0} is not allowed.",e)})}else if(!0!==h){let e=new En;Eo(a,h,e,i,s),r.mergePropertyMatch(e)}}}let c=n.unevaluatedProperties;if(void 0!==c){let e=[];for(let l of a)if(!r.processedProperties.has(l)){e.push(l);let a=o[l];if(a){if(!1===c){let e=a.parent;r.problems.push({location:{offset:e.keyNode.offset,length:e.keyNode.length},message:n.errorMessage||CW("Property {0} is not allowed.",l)})}else if(!0!==c){let e=new En;Eo(a,c,e,i,s),r.mergePropertyMatch(e)}}}e.forEach(l)}if(CQ(n.maxProperties)&&e.properties.length>n.maxProperties&&r.problems.push({location:{offset:e.offset,length:e.length},message:CW("Object has more properties than limit of {0}.",n.maxProperties)}),CQ(n.minProperties)&&e.properties.length<n.minProperties&&r.problems.push({location:{offset:e.offset,length:e.length},message:CW("Object has fewer properties than the required number of {0}",n.minProperties)}),n.dependentRequired)for(let e in n.dependentRequired){let r=o[e],i=n.dependentRequired[e];r&&Array.isArray(i)&&d(e,i)}if(n.dependentSchemas)for(let e in n.dependentSchemas){let r=o[e],i=n.dependentSchemas[e];r&&CB(i)&&d(e,i)}if(n.dependencies)for(let e in n.dependencies)o[e]&&d(e,n.dependencies[e]);let u=C4(n.propertyNames);if(u)for(let n of e.properties){let e=n.keyNode;e&&Eo(e,u,r,Et.instance,s)}function d(n,a){if(Array.isArray(a))for(let i of a)o[i]?r.propertiesValueMatches++:r.problems.push({location:{offset:e.offset,length:e.length},message:CW("Object is missing property {0} required by property {1}.",i,n)});else{let n=C4(a);if(n){let o=new En;Eo(e,n,o,i,s),r.mergePropertyMatch(o)}}}}(e);break;case"array":!function(e){let o,a;s.schemaDraft>=t8.v2020_12?(o=n.prefixItems,a=Array.isArray(n.items)?void 0:n.items):(o=Array.isArray(n.items)?n.items:void 0,a=Array.isArray(n.items)?n.additionalItems:n.items);let l=0;if(void 0!==o){let n=Math.min(o.length,e.items.length);for(;l<n;l++){let n=C4(o[l]),a=new En,h=e.items[l];h&&(Eo(h,n,a,i,s),r.mergePropertyMatch(a)),r.processedProperties.add(String(l))}}if(void 0!==a&&l<e.items.length)if("boolean"==typeof a)for(!1===a&&r.problems.push({location:{offset:e.offset,length:e.length},message:CW("Array has too many items according to schema. Expected {0} or fewer.",l)});l<e.items.length;l++)r.processedProperties.add(String(l)),r.propertiesValueMatches++;else for(;l<e.items.length;l++){let n=new En;Eo(e.items[l],a,n,i,s),r.mergePropertyMatch(n),r.processedProperties.add(String(l))}let h=C4(n.contains);if(h){let i=0;for(let n=0;n<e.items.length;n++){let o=e.items[n],a=new En;Eo(o,h,a,Et.instance,s),!a.hasProblems()&&(i++,s.schemaDraft>=t8.v2020_12&&r.processedProperties.add(String(n)))}0!==i||CQ(n.minContains)||r.problems.push({location:{offset:e.offset,length:e.length},message:n.errorMessage||CW("Array does not contain required item.")}),CQ(n.minContains)&&i<n.minContains&&r.problems.push({location:{offset:e.offset,length:e.length},message:n.errorMessage||CW("Array has too few items that match the contains contraint. Expected {0} or more.",n.minContains)}),CQ(n.maxContains)&&i>n.maxContains&&r.problems.push({location:{offset:e.offset,length:e.length},message:n.errorMessage||CW("Array has too many items that match the contains contraint. Expected {0} or less.",n.maxContains)})}let c=n.unevaluatedItems;if(void 0!==c)for(let o=0;o<e.items.length;o++){if(!r.processedProperties.has(String(o)))if(!1===c)r.problems.push({location:{offset:e.offset,length:e.length},message:CW("Item does not match any validation rule from the array.")});else{let a=new En;Eo(e.items[o],n.unevaluatedItems,a,i,s),r.mergePropertyMatch(a)}r.processedProperties.add(String(o)),r.propertiesValueMatches++}if(CQ(n.minItems)&&e.items.length<n.minItems&&r.problems.push({location:{offset:e.offset,length:e.length},message:CW("Array has too few items. Expected {0} or more.",n.minItems)}),CQ(n.maxItems)&&e.items.length>n.maxItems&&r.problems.push({location:{offset:e.offset,length:e.length},message:CW("Array has too many items. Expected {0} or fewer.",n.maxItems)}),!0===n.uniqueItems){let n=CR(e);(function(){for(let e=0;e<n.length-1;e++){let r=n[e];for(let i=e+1;i<n.length;i++)if(CL(r,n[i]))return!0}return!1})()&&r.problems.push({location:{offset:e.offset,length:e.length},message:CW("Array has duplicate items.")})}}(e);break;case"string":var o=e;if(CQ(n.minLength)&&Cq(o.value)<n.minLength&&r.problems.push({location:{offset:o.offset,length:o.length},message:CW("String is shorter than the minimum length of {0}.",n.minLength)}),CQ(n.maxLength)&&Cq(o.value)>n.maxLength&&r.problems.push({location:{offset:o.offset,length:o.length},message:CW("String is longer than the maximum length of {0}.",n.maxLength)}),Cz(n.pattern)){let e=CZ(n.pattern);e&&!e.test(o.value)&&r.problems.push({location:{offset:o.offset,length:o.length},message:n.patternErrorMessage||n.errorMessage||CW('String does not match the pattern of "{0}".',n.pattern)})}if(n.format)switch(n.format){case"uri":case"uri-reference":{let e;if(o.value){let r=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/.exec(o.value);r?r[2]||"uri"!==n.format||(e=CW("URI with a scheme is expected.")):e=CW("URI is expected.")}else e=CW("URI expected.");e&&r.problems.push({location:{offset:o.offset,length:o.length},message:n.patternErrorMessage||n.errorMessage||CW("String is not a URI: {0}",e)})}break;case"color-hex":case"date-time":case"date":case"time":case"email":case"hostname":case"ipv4":case"ipv6":let a=CY[n.format];o.value&&a.pattern.exec(o.value)||r.problems.push({location:{offset:o.offset,length:o.length},message:n.patternErrorMessage||n.errorMessage||a.errorMessage})}break;case"number":!function(e){let i=e.value;function s(e){let n=/^(-?\d+)(?:\.(\d+))?(?:e([-+]\d+))?$/.exec(e.toString());return n&&{value:Number(n[1]+(n[2]||"")),multiplier:(n[2]?.length||0)-(parseInt(n[3])||0)}}if(CQ(n.multipleOf)){let o=-1;if(Number.isInteger(n.multipleOf))o=i%n.multipleOf;else{let e=s(n.multipleOf),r=s(i);if(e&&r){let n=10**Math.abs(r.multiplier-e.multiplier);r.multiplier<e.multiplier?r.value*=n:e.value*=n,o=r.value%e.value}}0!==o&&r.problems.push({location:{offset:e.offset,length:e.length},message:CW("Value is not divisible by {0}.",n.multipleOf)})}function o(e,n){return CQ(n)?n:CV(n)&&n?e:void 0}function a(e,n){if(!CV(n)||!n)return e}let l=o(n.minimum,n.exclusiveMinimum);CQ(l)&&i<=l&&r.problems.push({location:{offset:e.offset,length:e.length},message:CW("Value is below the exclusive minimum of {0}.",l)});let h=o(n.maximum,n.exclusiveMaximum);CQ(h)&&i>=h&&r.problems.push({location:{offset:e.offset,length:e.length},message:CW("Value is above the exclusive maximum of {0}.",h)});let c=a(n.minimum,n.exclusiveMinimum);CQ(c)&&i<c&&r.problems.push({location:{offset:e.offset,length:e.length},message:CW("Value is below the minimum of {0}.",c)});let u=a(n.maximum,n.exclusiveMaximum);CQ(u)&&i>u&&r.problems.push({location:{offset:e.offset,length:e.length},message:CW("Value is above the maximum of {0}.",u)})}(e)}i.add({node:e,schema:n})}}class Ea{constructor(e,n=[],r=Promise,i={}){this.schemaService=e,this.contributions=n,this.promiseConstructor=r,this.clientCapabilities=i}doResolve(e){for(let n=this.contributions.length-1;n>=0;n--){let r=this.contributions[n].resolveCompletion;if(r){let n=r(e);if(n)return n}}return this.promiseConstructor.resolve(e)}doComplete(e,n,r){let i,s={items:[],isIncomplete:!1},o=e.getText(),a=e.offsetAt(n),l=r.getNodeFromOffset(a,!0);if(this.isInComment(e,l?l.offset:0,a))return Promise.resolve(s);if(l&&a===l.offset+l.length&&a>0){let e=o[a-1];("object"===l.type&&"}"===e||"array"===l.type&&"]"===e)&&(l=l.parent)}let h=this.getCurrentWord(e,a);if(l&&("string"===l.type||"number"===l.type||"boolean"===l.type||"null"===l.type))i=eR.create(e.positionAt(l.offset),e.positionAt(l.offset+l.length));else{let r=a-h.length;r>0&&'"'===o[r-1]&&r--,i=eR.create(e.positionAt(r),n)}let c=new Map,u={add:e=>{let n=e.label,r=c.get(n);if(r)r.documentation||(r.documentation=e.documentation),r.detail||(r.detail=e.detail),r.labelDetails||(r.labelDetails=e.labelDetails);else{if((n=n.replace(/[\n]/g,"↵")).length>60){let e=n.substr(0,57).trim()+"...";c.has(e)||(n=e)}e.textEdit=eG.replace(i,e.insertText),e.label=n,c.set(n,e),s.items.push(e)}},setAsIncomplete:()=>{s.isIncomplete=!0},error:e=>{console.error(e)},getNumberOfProposals:()=>s.items.length};return this.schemaService.getSchemaForResource(e.uri,r).then(n=>{let d,p=[],f=!0,g="";if(l&&"string"===l.type){let e=l.parent;e&&"property"===e.type&&e.keyNode===l&&(f=!e.valueNode,d=e,g=o.substr(l.offset+1,l.length-2),e&&(l=e.parent))}if(l&&"object"===l.type){if(l.offset===a)return s;l.properties.forEach(e=>{d&&d===e||c.set(e.keyNode.value,ta.create("__"))});let m="";f&&(m=this.evaluateSeparatorAfter(e,e.offsetAt(i.end))),n?this.getPropertyCompletions(n,r,l,f,m,u):this.getSchemaLessPropertyCompletions(r,l,g,u);let y=C$(l);this.contributions.forEach(n=>{let r=n.collectPropertyCompletions(e.uri,y,h,f,""===m,u);r&&p.push(r)}),!n&&h.length>0&&'"'!==o.charAt(a-h.length-1)&&(u.add({kind:tt.Property,label:this.getLabelForValue(h),insertText:this.getInsertTextForProperty(h,void 0,!1,m),insertTextFormat:tn.Snippet,documentation:""}),u.setAsIncomplete())}let m={};return n?this.getValueCompletions(n,r,l,a,e,u,m):this.getSchemaLessValueCompletions(r,l,a,e,u),this.contributions.length>0&&this.getContributedValueCompletions(r,l,a,e,u,p),this.promiseConstructor.all(p).then(()=>{if(0===u.getNumberOfProposals()){let n=a;l&&("string"===l.type||"number"===l.type||"boolean"===l.type||"null"===l.type)&&(n=l.offset+l.length);let r=this.evaluateSeparatorAfter(e,n);this.addFillerValueCompletions(m,r,u)}return s})})}getPropertyCompletions(e,n,r,i,s,o){n.getMatchingSchemas(e.schema,r.offset).forEach(e=>{if(e.node===r&&!e.inverted){let n=e.schema.properties;n&&Object.keys(n).forEach(e=>{let r=n[e];if("object"==typeof r&&!r.deprecationMessage&&!r.doNotSuggest){let n={kind:tt.Property,label:e,insertText:this.getInsertTextForProperty(e,r,i,s),insertTextFormat:tn.Snippet,filterText:this.getFilterTextForValue(e),documentation:this.fromMarkup(r.markdownDescription)||r.description||""};void 0!==r.completionDetail&&(n.detail=r.completionDetail),void 0!==r.suggestSortText&&(n.sortText=r.suggestSortText),n.insertText&&CF(n.insertText,`$1${s}`)&&(n.command={title:"Suggest",command:"editor.action.triggerSuggest"}),o.add(n)}});let r=e.schema.propertyNames;if("object"==typeof r&&!r.deprecationMessage&&!r.doNotSuggest){let e=(e,n,a,l)=>{let h={kind:tt.Property,label:e,insertText:this.getInsertTextForProperty(e,void 0,i,s),insertTextFormat:tn.Snippet,filterText:this.getFilterTextForValue(e),documentation:n||this.fromMarkup(r.markdownDescription)||r.description||"",sortText:l,detail:a};h.insertText&&CF(h.insertText,`$1${s}`)&&(h.command={title:"Suggest",command:"editor.action.triggerSuggest"}),o.add(h)};if(r.enum)for(let n=0;n<r.enum.length;n++){let i;r.markdownEnumDescriptions&&n<r.markdownEnumDescriptions.length?i=this.fromMarkup(r.markdownEnumDescriptions[n]):r.enumDescriptions&&n<r.enumDescriptions.length&&(i=r.enumDescriptions[n]);let s=r.enumSortTexts?.[n],o=r.enumDetails?.[n];e(r.enum[n],i,o,s)}r.const&&e(r.const,void 0,r.completionDetail,r.suggestSortText)}}})}getSchemaLessPropertyCompletions(e,n,r,i){let s=e=>{e.properties.forEach(e=>{let n=e.keyNode.value;i.add({kind:tt.Property,label:n,insertText:this.getInsertTextForValue(n,""),insertTextFormat:tn.Snippet,filterText:this.getFilterTextForValue(n),documentation:""})})};if(n.parent)if("property"===n.parent.type){let r=n.parent.keyNode.value;e.visit(e=>("property"===e.type&&e!==n.parent&&e.keyNode.value===r&&e.valueNode&&"object"===e.valueNode.type&&s(e.valueNode),!0))}else"array"===n.parent.type&&n.parent.items.forEach(e=>{"object"===e.type&&e!==n&&s(e)});else"object"===n.type&&i.add({kind:tt.Property,label:"$schema",insertText:this.getInsertTextForProperty("$schema",void 0,!0,""),insertTextFormat:tn.Snippet,documentation:"",filterText:this.getFilterTextForValue("$schema")})}getSchemaLessValueCompletions(e,n,r,i,s){let o=r;if(n&&("string"===n.type||"number"===n.type||"boolean"===n.type||"null"===n.type)&&(o=n.offset+n.length,n=n.parent),!n){s.add({kind:this.getSuggestionKind("object"),label:"Empty object",insertText:this.getInsertTextForValue({},""),insertTextFormat:tn.Snippet,documentation:""}),s.add({kind:this.getSuggestionKind("array"),label:"Empty array",insertText:this.getInsertTextForValue([],""),insertTextFormat:tn.Snippet,documentation:""});return}let a=this.evaluateSeparatorAfter(i,o),l=e=>{e.parent&&!Er(e.parent,r,!0)&&s.add({kind:this.getSuggestionKind(e.type),label:this.getLabelTextForMatchingNode(e,i),insertText:this.getInsertTextForMatchingNode(e,i,a),insertTextFormat:tn.Snippet,documentation:""}),"boolean"===e.type&&this.addBooleanValueCompletion(!e.value,a,s)};if("property"===n.type&&r>(n.colonOffset||0)){let i=n.valueNode;if(i&&(r>i.offset+i.length||"object"===i.type||"array"===i.type))return;let o=n.keyNode.value;e.visit(e=>("property"===e.type&&e.keyNode.value===o&&e.valueNode&&l(e.valueNode),!0)),"$schema"===o&&n.parent&&!n.parent.parent&&this.addDollarSchemaCompletions(a,s)}if("array"===n.type)if(n.parent&&"property"===n.parent.type){let r=n.parent.keyNode.value;e.visit(e=>("property"===e.type&&e.keyNode.value===r&&e.valueNode&&"array"===e.valueNode.type&&e.valueNode.items.forEach(l),!0))}else n.items.forEach(l)}getValueCompletions(e,n,r,i,s,o,a){let l,h,c=i;if(r&&("string"===r.type||"number"===r.type||"boolean"===r.type||"null"===r.type)&&(c=r.offset+r.length,h=r,r=r.parent),!r)return void this.addSchemaValueCompletions(e.schema,"",o,a);if("property"===r.type&&i>(r.colonOffset||0)){let e=r.valueNode;if(e&&i>e.offset+e.length)return;l=r.keyNode.value,r=r.parent}if(r&&(void 0!==l||"array"===r.type)){let u=this.evaluateSeparatorAfter(s,c);for(let c of n.getMatchingSchemas(e.schema,r.offset,h))if(c.node===r&&!c.inverted&&c.schema){if("array"===r.type&&c.schema.items){let e=o;if(c.schema.uniqueItems){let n=new Set;r.children.forEach(e=>{"array"!==e.type&&"object"!==e.type&&n.add(this.getLabelForValue(CR(e)))}),e={...o,add(e){n.has(e.label)||o.add(e)}}}if(Array.isArray(c.schema.items)){let n=this.findItemAtOffset(r,s,i);n<c.schema.items.length&&this.addSchemaValueCompletions(c.schema.items[n],u,e,a)}else this.addSchemaValueCompletions(c.schema.items,u,e,a)}if(void 0!==l){let e=!1;if(c.schema.properties){let n=c.schema.properties[l];n&&(e=!0,this.addSchemaValueCompletions(n,u,o,a))}if(c.schema.patternProperties&&!e)for(let n of Object.keys(c.schema.patternProperties)){let r=CZ(n);if(r?.test(l)){e=!0;let r=c.schema.patternProperties[n];this.addSchemaValueCompletions(r,u,o,a)}}if(c.schema.additionalProperties&&!e){let e=c.schema.additionalProperties;this.addSchemaValueCompletions(e,u,o,a)}}}"$schema"!==l||r.parent||this.addDollarSchemaCompletions(u,o),a.boolean&&(this.addBooleanValueCompletion(!0,u,o),this.addBooleanValueCompletion(!1,u,o)),a.null&&this.addNullValueCompletion(u,o)}}getContributedValueCompletions(e,n,r,i,s,o){if(n){if(("string"===n.type||"number"===n.type||"boolean"===n.type||"null"===n.type)&&(n=n.parent),n&&"property"===n.type&&r>(n.colonOffset||0)){let e=n.keyNode.value,a=n.valueNode;if((!a||r<=a.offset+a.length)&&n.parent){let r=C$(n.parent);this.contributions.forEach(n=>{let a=n.collectValueCompletions(i.uri,r,e,s);a&&o.push(a)})}}}else this.contributions.forEach(e=>{let n=e.collectDefaultCompletions(i.uri,s);n&&o.push(n)})}addSchemaValueCompletions(e,n,r,i){"object"==typeof e&&(this.addEnumValueCompletions(e,n,r),this.addDefaultValueCompletions(e,n,r),this.collectTypes(e,i),Array.isArray(e.allOf)&&e.allOf.forEach(e=>this.addSchemaValueCompletions(e,n,r,i)),Array.isArray(e.anyOf)&&e.anyOf.forEach(e=>this.addSchemaValueCompletions(e,n,r,i)),Array.isArray(e.oneOf)&&e.oneOf.forEach(e=>this.addSchemaValueCompletions(e,n,r,i)))}addDefaultValueCompletions(e,n,r,i=0){let s=!1;if(Cj(e.default)){let o=e.type,a=e.default;for(let e=i;e>0;e--)a=[a],o="array";let l={kind:this.getSuggestionKind(o),label:this.getLabelForValue(a),insertText:this.getInsertTextForValue(a,n),insertTextFormat:tn.Snippet};this.doesSupportsLabelDetails()?l.labelDetails={description:CW("Default value")}:l.detail=CW("Default value"),r.add(l),s=!0}Array.isArray(e.examples)&&e.examples.forEach(o=>{let a=e.type,l=o;for(let e=i;e>0;e--)l=[l],a="array";r.add({kind:this.getSuggestionKind(a),label:this.getLabelForValue(l),insertText:this.getInsertTextForValue(l,n),insertTextFormat:tn.Snippet}),s=!0}),Array.isArray(e.defaultSnippets)&&e.defaultSnippets.forEach(o=>{let a,l,h=e.type,c=o.body,u=o.label;if(Cj(c)){e.type;for(let e=i;e>0;e--)c=[c];a=this.getInsertTextForSnippetValue(c,n),l=this.getFilterTextForSnippetValue(c),u=u||this.getLabelForSnippetValue(c)}else{if("string"!=typeof o.bodyText)return;let e="",r="",s="";for(let n=i;n>0;n--)e=e+s+"[\n",r=r+"\n"+s+"]",s+="	",h="array";a=e+s+o.bodyText.split("\n").join("\n"+s)+r+n,u=u||a,l=a.replace(/[\n]/g,"")}r.add({kind:this.getSuggestionKind(h),label:u,documentation:this.fromMarkup(o.markdownDescription)||o.description,insertText:a,insertTextFormat:tn.Snippet,filterText:l}),s=!0}),s||"object"!=typeof e.items||Array.isArray(e.items)||!(i<5)||this.addDefaultValueCompletions(e.items,n,r,i+1)}addEnumValueCompletions(e,n,r){if(Cj(e.const)&&r.add({kind:this.getSuggestionKind(e.type),label:this.getLabelForValue(e.const),insertText:this.getInsertTextForValue(e.const,n),insertTextFormat:tn.Snippet,documentation:this.fromMarkup(e.markdownDescription)||e.description}),Array.isArray(e.enum))for(let i=0,s=e.enum.length;i<s;i++){let s=e.enum[i],o=this.fromMarkup(e.markdownDescription)||e.description;e.markdownEnumDescriptions&&i<e.markdownEnumDescriptions.length&&this.doesSupportMarkdown()?o=this.fromMarkup(e.markdownEnumDescriptions[i]):e.enumDescriptions&&i<e.enumDescriptions.length&&(o=e.enumDescriptions[i]),r.add({kind:this.getSuggestionKind(e.type),label:this.getLabelForValue(s),insertText:this.getInsertTextForValue(s,n),insertTextFormat:tn.Snippet,sortText:e.enumSortTexts?.[i],detail:e.enumDetails?.[i],documentation:o})}}collectTypes(e,n){if(Array.isArray(e.enum)||Cj(e.const))return;let r=e.type;Array.isArray(r)?r.forEach(e=>n[e]=!0):r&&(n[r]=!0)}addFillerValueCompletions(e,n,r){e.object&&r.add({kind:this.getSuggestionKind("object"),label:"{}",insertText:this.getInsertTextForGuessedValue({},n),insertTextFormat:tn.Snippet,detail:CW("New object"),documentation:""}),e.array&&r.add({kind:this.getSuggestionKind("array"),label:"[]",insertText:this.getInsertTextForGuessedValue([],n),insertTextFormat:tn.Snippet,detail:CW("New array"),documentation:""})}addBooleanValueCompletion(e,n,r){r.add({kind:this.getSuggestionKind("boolean"),label:e?"true":"false",insertText:this.getInsertTextForValue(e,n),insertTextFormat:tn.Snippet,documentation:""})}addNullValueCompletion(e,n){n.add({kind:this.getSuggestionKind("null"),label:"null",insertText:"null"+e,insertTextFormat:tn.Snippet,documentation:""})}addDollarSchemaCompletions(e,n){this.schemaService.getRegisteredSchemaIds(e=>"http"===e||"https"===e).forEach(r=>{r.startsWith("https://json-schema.org/draft-")&&(r+="#"),n.add({kind:tt.Module,label:this.getLabelForValue(r),filterText:this.getFilterTextForValue(r),insertText:this.getInsertTextForValue(r,e),insertTextFormat:tn.Snippet,documentation:""})})}getLabelForValue(e){return JSON.stringify(e)}getValueFromLabel(e){return JSON.parse(e)}getFilterTextForValue(e){return JSON.stringify(e)}getFilterTextForSnippetValue(e){return JSON.stringify(e).replace(/\$\{\d+:([^}]+)\}|\$\d+/g,"$1")}getLabelForSnippetValue(e){return JSON.stringify(e).replace(/\$\{\d+:([^}]+)\}|\$\d+/g,"$1")}getInsertTextForPlainText(e){return e.replace(/[\\\$\}]/g,"\\$&")}getInsertTextForValue(e,n){let r=JSON.stringify(e,null,"	");return"{}"===r?"{$1}"+n:"[]"===r?"[$1]"+n:this.getInsertTextForPlainText(r+n)}getInsertTextForSnippetValue(e,n){return function e(n,r,i){if(null!==n&&"object"==typeof n){let s=r+"	";if(Array.isArray(n)){if(0===n.length)return"[]";let o="[\n";for(let r=0;r<n.length;r++)o+=s+e(n[r],s,i),r<n.length-1&&(o+=","),o+="\n";return o+(r+"]")}{let o=Object.keys(n);if(0===o.length)return"{}";let a="{\n";for(let r=0;r<o.length;r++){let l=o[r];a+=s+JSON.stringify(l)+": "+e(n[l],s,i),r<o.length-1&&(a+=","),a+="\n"}return a+(r+"}")}}return i(n)}(e,"",e=>"string"==typeof e&&"^"===e[0]?e.substr(1):JSON.stringify(e))+n}getInsertTextForGuessedValue(e,n){switch(typeof e){case"object":if(null===e)return"${1:null}"+n;break;case"string":let r=JSON.stringify(e);return r=r.substr(1,r.length-2),'"${1:'+(r=this.getInsertTextForPlainText(r))+'}"'+n;case"number":case"boolean":return"${1:"+JSON.stringify(e)+"}"+n}return this.getInsertTextForValue(e,n)}getSuggestionKind(e){if(Array.isArray(e)){let n=e;e=n.length>0?n[0]:void 0}if(!e)return tt.Value;switch(e){case"string":default:return tt.Value;case"object":return tt.Module;case"property":return tt.Property}}getLabelTextForMatchingNode(e,n){switch(e.type){case"array":return"[]";case"object":return"{}";default:return n.getText().substr(e.offset,e.length)}}getInsertTextForMatchingNode(e,n,r){switch(e.type){case"array":return this.getInsertTextForValue([],r);case"object":return this.getInsertTextForValue({},r);default:let i=n.getText().substr(e.offset,e.length)+r;return this.getInsertTextForPlainText(i)}}getInsertTextForProperty(e,n,r,i){let s,o=this.getInsertTextForValue(e,"");if(!r)return o;let a=0;if(n){if(Array.isArray(n.defaultSnippets)){if(1===n.defaultSnippets.length){let e=n.defaultSnippets[0].body;Cj(e)&&(s=this.getInsertTextForSnippetValue(e,""))}a+=n.defaultSnippets.length}if(n.enum&&(s||1!==n.enum.length||(s=this.getInsertTextForGuessedValue(n.enum[0],"")),a+=n.enum.length),Cj(n.const)&&(s||(s=this.getInsertTextForGuessedValue(n.const,"")),a++),Cj(n.default)&&(s||(s=this.getInsertTextForGuessedValue(n.default,"")),a++),Array.isArray(n.examples)&&n.examples.length&&(s||(s=this.getInsertTextForGuessedValue(n.examples[0],"")),a+=n.examples.length),0===a){let e=Array.isArray(n.type)?n.type[0]:n.type;switch(!e&&(n.properties?e="object":n.items&&(e="array")),e){case"boolean":s="$1";break;case"string":s='"$1"';break;case"object":s="{$1}";break;case"array":s="[$1]";break;case"number":case"integer":s="${1:0}";break;case"null":s="${1:null}";break;default:return o}}}return(!s||a>1)&&(s="$1"),o+": "+s+i}getCurrentWord(e,n){let r=n-1,i=e.getText();for(;r>=0&&-1===' 	\n\r\v":{[,]}'.indexOf(i.charAt(r));)r--;return i.substring(r+1,n)}evaluateSeparatorAfter(e,n){let r=C_(e.getText(),!0);switch(r.setPosition(n),r.scan()){case 5:case 2:case 4:case 17:return"";default:return","}}findItemAtOffset(e,n,r){let i=C_(n.getText(),!0),s=e.items;for(let e=s.length-1;e>=0;e--){let n=s[e];if(r>n.offset+n.length){if(i.setPosition(n.offset+n.length),5===i.scan()&&r>=i.getTokenOffset()+i.getTokenLength())return e+1;return e}if(r>=n.offset)return e}return 0}isInComment(e,n,r){let i=C_(e.getText(),!1);i.setPosition(n);let s=i.scan();for(;17!==s&&i.getTokenOffset()+i.getTokenLength()<r;)s=i.scan();return(12===s||13===s)&&i.getTokenOffset()<=r}fromMarkup(e){if(e&&this.doesSupportMarkdown())return{kind:e8.Markdown,value:e}}doesSupportMarkdown(){if(!Cj(this.supportsMarkdown)){let e=this.clientCapabilities.textDocument?.completion?.completionItem?.documentationFormat;this.supportsMarkdown=Array.isArray(e)&&-1!==e.indexOf(e8.Markdown)}return this.supportsMarkdown}doesSupportsCommitCharacters(){return Cj(this.supportsCommitCharacters)||(this.labelDetailsSupport=this.clientCapabilities.textDocument?.completion?.completionItem?.commitCharactersSupport),this.supportsCommitCharacters}doesSupportsLabelDetails(){return Cj(this.labelDetailsSupport)||(this.labelDetailsSupport=this.clientCapabilities.textDocument?.completion?.completionItem?.labelDetailsSupport),this.labelDetailsSupport}}class El{constructor(e,n=[],r){this.schemaService=e,this.contributions=n,this.promise=r||Promise}doHover(e,n,r){let i=e.offsetAt(n),s=r.getNodeFromOffset(i);if(!s||("object"===s.type||"array"===s.type)&&i>s.offset+1&&i<s.offset+s.length-1)return this.promise.resolve(null);let o=s;if("string"===s.type){let e=s.parent;if(e&&"property"===e.type&&e.keyNode===s&&!(s=e.valueNode))return this.promise.resolve(null)}let a=eR.create(e.positionAt(o.offset),e.positionAt(o.offset+o.length)),l=e=>({contents:e,range:a}),h=C$(s);for(let n=this.contributions.length-1;n>=0;n--){let r=this.contributions[n].getInfoContribution(e.uri,h);if(r)return r.then(e=>l(e))}return this.schemaService.getSchemaForResource(e.uri,r).then(e=>{if(e&&s){var n;let i,o,a,h;r.getMatchingSchemas(e.schema,s.offset).every(e=>{if(e.node===s&&!e.inverted&&e.schema&&(i=i||e.schema.title,o=o||e.schema.markdownDescription||Eh(e.schema.description),e.schema.enum)){let n=e.schema.enum.indexOf(CR(s));e.schema.markdownEnumDescriptions?a=e.schema.markdownEnumDescriptions[n]:e.schema.enumDescriptions&&(a=Eh(e.schema.enumDescriptions[n])),a&&"string"!=typeof(h=e.schema.enum[n])&&(h=JSON.stringify(h))}return!0});let c="";return i&&(c=Eh(i)),o&&(c.length>0&&(c+="\n\n"),c+=o),a&&(c.length>0&&(c+="\n\n"),c+=`\`${-1!==(n=h).indexOf("`")?"`` "+n+" ``":n}\`: ${a}`),l([c])}return null})}}function Eh(e){if(e)return e.replace(/([^\n\r])(\r?\n)([^\n\r])/gm,"$1\n\n$3").replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}class Ec{constructor(e,n){this.jsonSchemaService=e,this.promise=n,this.validationEnabled=!0}configure(e){e&&(this.validationEnabled=!1!==e.validate,this.commentSeverity=e.allowComments?void 0:eq.Error)}doValidation(e,n,r,i){if(!this.validationEnabled)return this.promise.resolve([]);let s=[],o={},a=e=>{let n=e.range.start.line+" "+e.range.start.character+" "+e.message;o[n]||(o[n]=!0,s.push(e))},l=i=>{let o=r?.trailingCommas?Ed(r.trailingCommas):eq.Error,l=r?.comments?Ed(r.comments):this.commentSeverity,h=r?.schemaValidation?Ed(r.schemaValidation):eq.Warning,c=r?.schemaRequest?Ed(r.schemaRequest):eq.Warning;if(i){let s=(r,i)=>{if(n.root&&c){let s=n.root,o="object"===s.type?s.properties[0]:void 0;if(o&&"$schema"===o.keyNode.value){let n=o.valueNode||o,s=eR.create(e.positionAt(n.offset),e.positionAt(n.offset+n.length));a(eU.create(s,r,c,i))}else{let n=eR.create(e.positionAt(s.offset),e.positionAt(s.offset+1));a(eU.create(n,r,c,i))}}};if(i.errors.length)s(i.errors[0],t7.SchemaResolveError);else if(h){for(let e of i.warnings)s(e,t7.SchemaUnsupportedFeature);let o=n.validate(e,i.schema,h,r?.schemaDraft);o&&o.forEach(a)}(function e(n){if(n&&"object"==typeof n){if(CV(n.allowComments))return n.allowComments;if(n.allOf)for(let r of n.allOf){let n=e(r);if(CV(n))return n}}})(i.schema)&&(l=void 0),function e(n){if(n&&"object"==typeof n){if(CV(n.allowTrailingCommas))return n.allowTrailingCommas;if(CV(n.allowsTrailingCommas))return n.allowsTrailingCommas;if(n.allOf)for(let r of n.allOf){let n=e(r);if(CV(n))return n}}}(i.schema)&&(o=void 0)}for(let e of n.syntaxErrors){if(e.code===t7.TrailingComma){if("number"!=typeof o)continue;e.severity=o}a(e)}if("number"==typeof l){let e=CW("Comments are not permitted in JSON.");n.comments.forEach(n=>{a(eU.create(n,e,l,t7.CommentNotPermitted))})}return s};if(i){let e=i.id||"schemaservice://untitled/"+Eu++;return this.jsonSchemaService.registerExternalSchema({uri:e,schema:i}).getResolvedSchema().then(e=>l(e))}return this.jsonSchemaService.getSchemaForResource(e.uri,n).then(e=>l(e))}getLanguageStatus(e,n){return{schemas:this.jsonSchemaService.getSchemaURIsForResource(e.uri,n)}}}let Eu=0;function Ed(e){switch(e){case"error":return eq.Error;case"warning":return eq.Warning}}function Ep(e){return e<48?0:e<=57?e-48:(e<97&&(e+=32),e>=97&&e<=102)?e-97+10:0}class Ef{constructor(e){this.schemaService=e}findDocumentSymbols(e,n,r={resultLimit:Number.MAX_VALUE}){let i=n.root;if(!i)return[];let s=r.resultLimit||Number.MAX_VALUE,o=e.uri;if(("vscode://defaultsettings/keybindings.json"===o||CF(o.toLowerCase(),"/user/keybindings.json"))&&"array"===i.type){let n=[];for(let a of i.items)if("object"===a.type){for(let i of a.properties)if("key"===i.keyNode.value&&i.valueNode){let l=eL.create(e.uri,Eg(e,a));if(n.push({name:Em(i.valueNode),kind:tg.Function,location:l}),--s<=0)return r&&r.onResultLimitExceeded&&r.onResultLimitExceeded(o),n}}return n}let a=[{node:i,containerName:""}],l=0,h=!1,c=[],u=(n,r)=>{"array"===n.type?n.items.forEach(e=>{e&&a.push({node:e,containerName:r})}):"object"===n.type&&n.properties.forEach(n=>{let i=n.valueNode;if(i)if(s>0){s--;let o=eL.create(e.uri,Eg(e,n)),l=r?r+"."+n.keyNode.value:n.keyNode.value;c.push({name:this.getKeyLabel(n),kind:this.getSymbolKind(i.type),location:o,containerName:r}),a.push({node:i,containerName:l})}else h=!0})};for(;l<a.length;){let e=a[l++];u(e.node,e.containerName)}return h&&r&&r.onResultLimitExceeded&&r.onResultLimitExceeded(o),c}findDocumentSymbols2(e,n,r={resultLimit:Number.MAX_VALUE}){let i=n.root;if(!i)return[];let s=r.resultLimit||Number.MAX_VALUE,o=e.uri;if(("vscode://defaultsettings/keybindings.json"===o||CF(o.toLowerCase(),"/user/keybindings.json"))&&"array"===i.type){let n=[];for(let a of i.items)if("object"===a.type){for(let i of a.properties)if("key"===i.keyNode.value&&i.valueNode){let l=Eg(e,a),h=Eg(e,i.keyNode);if(n.push({name:Em(i.valueNode),kind:tg.Function,range:l,selectionRange:h}),--s<=0)return r&&r.onResultLimitExceeded&&r.onResultLimitExceeded(o),n}}return n}let a=[],l=[{node:i,result:a}],h=0,c=!1,u=(n,r)=>{"array"===n.type?n.items.forEach((n,i)=>{if(n)if(s>0){s--;let o=Eg(e,n),a={name:String(i),kind:this.getSymbolKind(n.type),range:o,selectionRange:o,children:[]};r.push(a),l.push({result:a.children,node:n})}else c=!0}):"object"===n.type&&n.properties.forEach(n=>{let i=n.valueNode;if(i)if(s>0){s--;let o=Eg(e,n),a=Eg(e,n.keyNode),h=[],c={name:this.getKeyLabel(n),kind:this.getSymbolKind(i.type),range:o,selectionRange:a,children:h,detail:this.getDetail(i)};r.push(c),l.push({result:h,node:i})}else c=!0})};for(;h<l.length;){let e=l[h++];u(e.node,e.result)}return c&&r&&r.onResultLimitExceeded&&r.onResultLimitExceeded(o),a}getSymbolKind(e){switch(e){case"object":return tg.Module;case"string":return tg.String;case"number":return tg.Number;case"array":return tg.Array;case"boolean":return tg.Boolean;default:return tg.Variable}}getKeyLabel(e){let n=e.keyNode.value;return(n&&(n=n.replace(/[\n]/g,"↵")),n&&n.trim())?n:`"${n}"`}getDetail(e){if(e){if("boolean"===e.type||"number"===e.type||"null"===e.type||"string"===e.type)return String(e.value);else if("array"===e.type)return e.children.length?void 0:"[]";else if("object"===e.type)return e.children.length?void 0:"{}"}}findDocumentColors(e,n,r){return this.schemaService.getSchemaForResource(e.uri,n).then(i=>{let s=[];if(i){let o=r&&"number"==typeof r.resultLimit?r.resultLimit:Number.MAX_VALUE,a=n.getMatchingSchemas(i.schema),l={};for(let n of a)if(!n.inverted&&n.schema&&("color"===n.schema.format||"color-hex"===n.schema.format)&&n.node&&"string"===n.node.type){let i=String(n.node.offset);if(!l[i]){let a=function(e){if("#"===e[0])switch(e.length){case 4:return{red:17*Ep(e.charCodeAt(1))/255,green:17*Ep(e.charCodeAt(2))/255,blue:17*Ep(e.charCodeAt(3))/255,alpha:1};case 5:return{red:17*Ep(e.charCodeAt(1))/255,green:17*Ep(e.charCodeAt(2))/255,blue:17*Ep(e.charCodeAt(3))/255,alpha:17*Ep(e.charCodeAt(4))/255};case 7:return{red:(16*Ep(e.charCodeAt(1))+Ep(e.charCodeAt(2)))/255,green:(16*Ep(e.charCodeAt(3))+Ep(e.charCodeAt(4)))/255,blue:(16*Ep(e.charCodeAt(5))+Ep(e.charCodeAt(6)))/255,alpha:1};case 9:return{red:(16*Ep(e.charCodeAt(1))+Ep(e.charCodeAt(2)))/255,green:(16*Ep(e.charCodeAt(3))+Ep(e.charCodeAt(4)))/255,blue:(16*Ep(e.charCodeAt(5))+Ep(e.charCodeAt(6)))/255,alpha:(16*Ep(e.charCodeAt(7))+Ep(e.charCodeAt(8)))/255}}}(CR(n.node));if(a){let r=Eg(e,n.node);s.push({color:a,range:r})}if(l[i]=!0,--o<=0){r&&r.onResultLimitExceeded&&r.onResultLimitExceeded(e.uri);break}}}}return s})}getColorPresentations(e,n,r,i){let s,o=[],a=Math.round(255*r.red),l=Math.round(255*r.green),h=Math.round(255*r.blue);function c(e){let n=e.toString(16);return 2!==n.length?"0"+n:n}return o.push({label:s=1===r.alpha?`#${c(a)}${c(l)}${c(h)}`:`#${c(a)}${c(l)}${c(h)}${c(Math.round(255*r.alpha))}`,textEdit:eG.replace(i,JSON.stringify(s))}),o}}function Eg(e,n){return eR.create(e.positionAt(n.offset),e.positionAt(n.offset+n.length))}function Em(e){return CR(e)||CW("<empty>")}let Ey={schemaAssociations:[],schemas:{"https://json-schema.org/draft-04/schema":{definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},positiveInteger:{type:"integer",minimum:0},positiveIntegerDefault0:{allOf:[{$ref:"#/definitions/positiveInteger"},{default:0}]},simpleTypes:{type:"string",enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},minItems:1,uniqueItems:!0}},type:"object",properties:{id:{type:"string",format:"uri"},$schema:{type:"string",format:"uri"},title:{type:"string"},description:{type:"string"},default:{},multipleOf:{type:"number",minimum:0,exclusiveMinimum:!0},maximum:{type:"number"},exclusiveMaximum:{type:"boolean",default:!1},minimum:{type:"number"},exclusiveMinimum:{type:"boolean",default:!1},maxLength:{allOf:[{$ref:"#/definitions/positiveInteger"}]},minLength:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}]},pattern:{type:"string",format:"regex"},additionalItems:{anyOf:[{type:"boolean"},{$ref:"#"}],default:{}},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:{}},maxItems:{allOf:[{$ref:"#/definitions/positiveInteger"}]},minItems:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}]},uniqueItems:{type:"boolean",default:!1},maxProperties:{allOf:[{$ref:"#/definitions/positiveInteger"}]},minProperties:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}]},required:{allOf:[{$ref:"#/definitions/stringArray"}]},additionalProperties:{anyOf:[{type:"boolean"},{$ref:"#"}],default:{}},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},enum:{type:"array",minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{anyOf:[{type:"string",enum:["date-time","uri","email","hostname","ipv4","ipv6","regex"]},{type:"string"}]},allOf:{allOf:[{$ref:"#/definitions/schemaArray"}]},anyOf:{allOf:[{$ref:"#/definitions/schemaArray"}]},oneOf:{allOf:[{$ref:"#/definitions/schemaArray"}]},not:{allOf:[{$ref:"#"}]}},dependencies:{exclusiveMaximum:["maximum"],exclusiveMinimum:["minimum"]},default:{}},"https://json-schema.org/draft-07/schema":{definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}}},EO={id:CW("A unique identifier for the schema."),$schema:CW("The schema to verify this document against."),title:CW("A descriptive title of the schema."),description:CW("A long description of the schema. Used in hover menus and suggestions."),default:CW("A default value. Used by suggestions."),multipleOf:CW("A number that should cleanly divide the current value (i.e. have no remainder)."),maximum:CW("The maximum numerical value, inclusive by default."),exclusiveMaximum:CW("Makes the maximum property exclusive."),minimum:CW("The minimum numerical value, inclusive by default."),exclusiveMinimum:CW("Makes the minimum property exclusive."),maxLength:CW("The maximum length of a string."),minLength:CW("The minimum length of a string."),pattern:CW("A regular expression to match the string against. It is not implicitly anchored."),additionalItems:CW("For arrays, only when items is set as an array. If items are a schema, this schema validates items after the ones specified by the items schema. If false, additional items will cause validation to fail."),items:CW("For arrays. Can either be a schema to validate every element against or an array of schemas to validate each item against in order (the first schema will validate the first element, the second schema will validate the second element, and so on."),maxItems:CW("The maximum number of items that can be inside an array. Inclusive."),minItems:CW("The minimum number of items that can be inside an array. Inclusive."),uniqueItems:CW("If all of the items in the array must be unique. Defaults to false."),maxProperties:CW("The maximum number of properties an object can have. Inclusive."),minProperties:CW("The minimum number of properties an object can have. Inclusive."),required:CW("An array of strings that lists the names of all properties required on this object."),additionalProperties:CW("Either a schema or a boolean. If a schema, used to validate all properties not matched by 'properties', 'propertyNames', or 'patternProperties'. If false, any properties not defined by the adajacent keywords will cause this schema to fail."),definitions:CW("Not used for validation. Place subschemas here that you wish to reference inline with $ref."),properties:CW("A map of property names to schemas for each property."),patternProperties:CW("A map of regular expressions on property names to schemas for matching properties."),dependencies:CW("A map of property names to either an array of property names or a schema. An array of property names means the property named in the key depends on the properties in the array being present in the object in order to be valid. If the value is a schema, then the schema is only applied to the object if the property in the key exists on the object."),enum:CW("The set of literal values that are valid."),type:CW("Either a string of one of the basic schema types (number, integer, null, array, object, boolean, string) or an array of strings specifying a subset of those types."),format:CW("Describes the format expected for the value. By default, not used for validation"),allOf:CW("An array of schemas, all of which must match."),anyOf:CW("An array of schemas, where at least one must match."),oneOf:CW("An array of schemas, exactly one of which must match."),not:CW("A schema which must not match."),$id:CW("A unique identifier for the schema."),$ref:CW("Reference a definition hosted on any location."),$comment:CW("Comments from schema authors to readers or maintainers of the schema."),readOnly:CW("Indicates that the value of the instance is managed exclusively by the owning authority."),examples:CW("Sample JSON values associated with a particular schema, for the purpose of illustrating usage."),contains:CW('An array instance is valid against "contains" if at least one of its elements is valid against the given schema.'),propertyNames:CW("If the instance is an object, this keyword validates if every property name in the instance validates against the provided schema."),const:CW("An instance validates successfully against this keyword if its value is equal to the value of the keyword."),contentMediaType:CW("Describes the media type of a string property."),contentEncoding:CW("Describes the content encoding of a string property."),if:CW('The validation outcome of the "if" subschema controls which of the "then" or "else" keywords are evaluated.'),then:CW('The "then" subschema is used for validation when the "if" subschema succeeds.'),else:CW('The "else" subschema is used for validation when the "if" subschema fails.')};for(let e in Ey.schemas){let n=Ey.schemas[e];for(let e in n.properties){let r=n.properties[e];"boolean"==typeof r&&(r=n.properties[e]={});let i=EO[e];i&&(r.description=i)}}class Ev{constructor(e,n,r){this.folderUri=n,this.uris=r,this.globWrappers=[];try{for(let n of e){let e="!"!==n[0];e||(n=n.substring(1)),n.length>0&&("/"===n[0]&&(n=n.substring(1)),this.globWrappers.push({regexp:function(e,n){let r;if("string"!=typeof e)throw TypeError("Expected a string");let i=String(e),s="",o=!!n&&!!n.extended,a=!!n&&!!n.globstar,l=!1,h=n&&"string"==typeof n.flags?n.flags:"";for(let e=0,n=i.length;e<n;e++)switch(r=i[e]){case"/":case"$":case"^":case"+":case".":case"(":case")":case"=":case"!":case"|":s+="\\"+r;break;case"?":if(o){s+=".";break}case"[":case"]":if(o){s+=r;break}case"{":if(o){l=!0,s+="(";break}case"}":if(o){l=!1,s+=")";break}case",":if(l){s+="|";break}s+="\\"+r;break;case"*":let n=i[e-1],h=1;for(;"*"===i[e+1];)h++,e++;let c=i[e+1];a?h>1&&("/"===n||void 0===n||"{"===n||","===n)&&("/"===c||void 0===c||","===c||"}"===c)?("/"===c?e++:"/"===n&&s.endsWith("\\/")&&(s=s.substr(0,s.length-2)),s+="((?:[^/]*(?:/|$))*)"):s+="([^/]*)":s+=".*";break;default:s+=r}return h&&~h.indexOf("g")||(s="^"+s+"$"),new RegExp(s,h)}("**/"+n,{extended:!0,globstar:!0}),include:e}))}n&&((n=Ek(n)).endsWith("/")||(n+="/"),this.folderUri=n)}catch(e){this.globWrappers.length=0,this.uris=[]}}matchesPattern(e){if(this.folderUri&&!e.startsWith(this.folderUri))return!1;let n=!1;for(let{regexp:r,include:i}of this.globWrappers)r.test(e)&&(n=i);return n}getURIs(){return this.uris}}class Eb{constructor(e,n,r){this.service=e,this.uri=n,this.dependencies=new Set,this.anchors=void 0,r&&(this.unresolvedSchema=this.service.promise.resolve(new Ex(r)))}getUnresolvedSchema(){return this.unresolvedSchema||(this.unresolvedSchema=this.service.loadSchema(this.uri)),this.unresolvedSchema}getResolvedSchema(){return this.resolvedSchema||(this.resolvedSchema=this.getUnresolvedSchema().then(e=>this.service.resolveSchemaContent(e,this))),this.resolvedSchema}clearSchema(){let e=!!this.unresolvedSchema;return this.resolvedSchema=void 0,this.unresolvedSchema=void 0,this.dependencies.clear(),this.anchors=void 0,e}}class Ex{constructor(e,n=[]){this.schema=e,this.errors=n}}class Ew{constructor(e,n=[],r=[],i){this.schema=e,this.errors=n,this.warnings=r,this.schemaDraft=i}getSection(e){let n=this.getSectionRecursive(e,this.schema);if(n)return C4(n)}getSectionRecursive(e,n){if(!n||"boolean"==typeof n||0===e.length)return n;let r=e.shift();if(n.properties&&(n.properties[r],1))return this.getSectionRecursive(e,n.properties[r]);if(n.patternProperties)for(let i of Object.keys(n.patternProperties)){let s=CZ(i);if(s?.test(r))return this.getSectionRecursive(e,n.patternProperties[i])}else if("object"==typeof n.additionalProperties)return this.getSectionRecursive(e,n.additionalProperties);else if(r.match("[0-9]+")){if(Array.isArray(n.items)){let i=parseInt(r,10);if(!isNaN(i)&&n.items[i])return this.getSectionRecursive(e,n.items[i])}else if(n.items)return this.getSectionRecursive(e,n.items)}}}class ES{constructor(e,n,r){this.contextService=n,this.requestService=e,this.promiseConstructor=r||Promise,this.callOnDispose=[],this.contributionSchemas={},this.contributionAssociations=[],this.schemasById={},this.filePatternAssociations=[],this.registeredSchemasIds={}}getRegisteredSchemaIds(e){return Object.keys(this.registeredSchemasIds).filter(n=>{let r=kb.parse(n).scheme;return"schemaservice"!==r&&(!e||e(r))})}get promise(){return this.promiseConstructor}dispose(){for(;this.callOnDispose.length>0;)this.callOnDispose.pop()()}onResourceChange(e){this.cachedSchemaForResource=void 0;let n=!1,r=[e=C6(e)],i=Object.keys(this.schemasById).map(e=>this.schemasById[e]);for(;r.length;){let e=r.pop();for(let s=0;s<i.length;s++){let o=i[s];o&&(o.uri===e||o.dependencies.has(e))&&(o.uri!==e&&r.push(o.uri),o.clearSchema()&&(n=!0),i[s]=void 0)}}return n}setSchemaContributions(e){if(e.schemas){let n=e.schemas;for(let e in n){let r=C6(e);this.contributionSchemas[r]=this.addSchemaHandle(r,n[e])}}if(Array.isArray(e.schemaAssociations))for(let n of e.schemaAssociations){let e=n.uris.map(C6),r=this.addFilePatternAssociation(n.pattern,n.folderUri,e);this.contributionAssociations.push(r)}}addSchemaHandle(e,n){let r=new Eb(this,e,n);return this.schemasById[e]=r,r}getOrAddSchemaHandle(e,n){return this.schemasById[e]||this.addSchemaHandle(e,n)}addFilePatternAssociation(e,n,r){let i=new Ev(e,n,r);return this.filePatternAssociations.push(i),i}registerExternalSchema(e){let n=C6(e.uri);return this.registeredSchemasIds[n]=!0,this.cachedSchemaForResource=void 0,e.fileMatch&&e.fileMatch.length&&this.addFilePatternAssociation(e.fileMatch,e.folderUri,[n]),e.schema?this.addSchemaHandle(n,e.schema):this.getOrAddSchemaHandle(n)}clearExternalSchemas(){for(let e in this.schemasById={},this.filePatternAssociations=[],this.registeredSchemasIds={},this.cachedSchemaForResource=void 0,this.contributionSchemas)this.schemasById[e]=this.contributionSchemas[e],this.registeredSchemasIds[e]=!0;for(let e of this.contributionAssociations)this.filePatternAssociations.push(e)}getResolvedSchema(e){let n=C6(e),r=this.schemasById[n];return r?r.getResolvedSchema():this.promise.resolve(void 0)}loadSchema(e){if(!this.requestService){let n=CW("Unable to load schema from '{0}'. No schema request service available",EC(e));return this.promise.resolve(new Ex({},[n]))}return this.requestService(e).then(n=>{if(!n)return new Ex({},[CW("Unable to load schema from '{0}': No content.",EC(e))]);let r=[];65279===n.charCodeAt(0)&&(r.push(CW("Problem reading content from '{0}': UTF-8 with BOM detected, only UTF 8 is allowed.",EC(e))),n=n.trimStart());let i={},s=[];return i=CD(n,s),s.length&&r.push(CW("Unable to parse content from '{0}': Parse error at offset {1}.",EC(e),s[0].offset)),new Ex(i,r)},n=>{let r=n.toString(),i=n.toString().split("Error: ");return i.length>1&&(r=i[1]),CF(r,".")&&(r=r.substr(0,r.length-1)),new Ex({},[CW("Unable to load schema from '{0}': {1}.",EC(e),r)])})}resolveSchemaContent(e,n){let r=e.errors.slice(0),i=e.schema,s=i.$schema?C9(i.$schema):void 0;if(s===t8.v3)return this.promise.resolve(new Ew({},[CW("Draft-03 schemas are not supported.")],[],s));let o=new Set,a=this.contextService,l=(e,n,i,s)=>{let o;if(void 0===s||0===s.length)o=n;else if("/"===s.charAt(0)){let e;a=decodeURIComponent(a=s),e=n,"/"===a[0]&&(a=a.substring(1)),a.split("/").some(n=>!(e=e[n=n.replace(/~1/g,"/").replace(/~0/g,"~")])),o=e}else i.anchors||(i.anchors=u(n)),o=i.anchors.get(s);if(o){var a,l=o;for(let n in l)l.hasOwnProperty(n)&&"id"!==n&&"$id"!==n&&(e[n]=l[n])}else r.push(CW("$ref '{0}' in '{1}' can not be resolved.",s||"",i.uri))},h=(e,n,i,s)=>{a&&!/^[A-Za-z][A-Za-z0-9+\-.+]*:\/.*/.test(n)&&(n=a.resolveRelativePath(n,s.uri)),n=C6(n);let o=this.getOrAddSchemaHandle(n);return o.getUnresolvedSchema().then(a=>{if(s.dependencies.add(n),a.errors.length){let e=i?n+"#"+i:n;r.push(CW("Problems loading reference '{0}': {1}",e,a.errors[0]))}return l(e,a.schema,o,i),c(e,a.schema,o)})},c=(e,n,r)=>{let i=[];return this.traverseNodes(e,e=>{let s=new Set;for(;e.$ref;){let o=e.$ref,a=o.split("#",2);if(delete e.$ref,a[0].length>0)return void i.push(h(e,a[0],a[1],r));s.has(o)||(l(e,n,r,a[1]),s.add(o))}e.$recursiveRef&&o.add("$recursiveRef"),e.$dynamicRef&&o.add("$dynamicRef")}),this.promise.all(i)},u=e=>{let n=new Map;return this.traverseNodes(e,e=>{let i=e.$id||e.id,s=Cz(i)&&"#"===i.charAt(0)?i.substring(1):e.$anchor;s&&(n.has(s)?r.push(CW("Duplicate anchor declaration: '{0}'",s)):n.set(s,e)),e.$recursiveAnchor&&o.add("$recursiveAnchor"),e.$dynamicAnchor&&o.add("$dynamicAnchor")}),n};return c(i,i,n).then(e=>{let n=[];return o.size&&n.push(CW("The schema uses meta-schema features ({0}) that are not yet supported by the validator.",Array.from(o.keys()).join(", "))),new Ew(i,r,n,s)})}traverseNodes(e,n){if(!e||"object"!=typeof e)return Promise.resolve(null);let r=new Set,i=(...e)=>{for(let n of e)CB(n)&&l.push(n)},s=(...e)=>{for(let n of e)if(CB(n))for(let e in n){let r=n[e];CB(r)&&l.push(r)}},o=(...e)=>{for(let n of e)if(Array.isArray(n))for(let e of n)CB(e)&&l.push(e)},a=e=>{if(Array.isArray(e))for(let n of e)CB(n)&&l.push(n);else CB(e)&&l.push(e)},l=[e],h=l.pop();for(;h;)r.has(h)||(r.add(h),n(h),i(h.additionalItems,h.additionalProperties,h.not,h.contains,h.propertyNames,h.if,h.then,h.else,h.unevaluatedItems,h.unevaluatedProperties),s(h.definitions,h.$defs,h.properties,h.patternProperties,h.dependencies,h.dependentSchemas),o(h.anyOf,h.allOf,h.oneOf,h.prefixItems),a(h.items)),h=l.pop()}getSchemaFromProperty(e,n){if(n.root?.type==="object"){for(let r of n.root.properties)if("$schema"===r.keyNode.value&&r.valueNode?.type==="string"){let n=r.valueNode.value;return this.contextService&&!/^\w[\w\d+.-]*:/.test(n)&&(n=this.contextService.resolveRelativePath(n,e)),n}}}getAssociatedSchemas(e){let n=Object.create(null),r=[],i=Ek(e);for(let e of this.filePatternAssociations)if(e.matchesPattern(i))for(let i of e.getURIs())n[i]||(r.push(i),n[i]=!0);return r}getSchemaURIsForResource(e,n){let r=n&&this.getSchemaFromProperty(e,n);return r?[r]:this.getAssociatedSchemas(e)}getSchemaForResource(e,n){if(n){let r=this.getSchemaFromProperty(e,n);if(r){let e=C6(r);return this.getOrAddSchemaHandle(e).getResolvedSchema()}}if(this.cachedSchemaForResource&&this.cachedSchemaForResource.resource===e)return this.cachedSchemaForResource.resolvedSchema;let r=this.getAssociatedSchemas(e),i=r.length>0?this.createCombinedSchema(e,r).getResolvedSchema():this.promise.resolve(void 0);return this.cachedSchemaForResource={resource:e,resolvedSchema:i},i}createCombinedSchema(e,n){if(1===n.length)return this.getOrAddSchemaHandle(n[0]);{let r="schemaservice://combinedSchema/"+encodeURIComponent(e),i={allOf:n.map(e=>({$ref:e}))};return this.addSchemaHandle(r,i)}}getMatchingSchemas(e,n,r){if(r){let e=r.id||"schemaservice://untitled/matchingSchemas/"+E_++;return this.addSchemaHandle(e,r).getResolvedSchema().then(e=>n.getMatchingSchemas(e.schema).filter(e=>!e.inverted))}return this.getSchemaForResource(e.uri,n).then(e=>e?n.getMatchingSchemas(e.schema).filter(e=>!e.inverted):[])}}let E_=0;function Ek(e){try{return kb.parse(e).with({fragment:null,query:null}).toString(!0)}catch(n){return e}}function EC(e){try{let n=kb.parse(e);if("file"===n.scheme)return n.fsPath}catch(e){}return e}function EE(e,n){let r=[],i=[],s=[],o=-1,a=C_(e.getText(),!1),l=a.scan();function h(e){r.push(e),i.push(s.length)}for(;17!==l;){switch(l){case 1:case 3:{let n=e.positionAt(a.getTokenOffset()).line,r={startLine:n,endLine:n,kind:1===l?"object":"array"};s.push(r);break}case 2:case 4:{let n=2===l?"object":"array";if(s.length>0&&s[s.length-1].kind===n){let n=s.pop(),r=e.positionAt(a.getTokenOffset()).line;n&&r>n.startLine+1&&o!==n.startLine&&(n.endLine=r-1,h(n),o=n.startLine)}break}case 13:{let n=e.positionAt(a.getTokenOffset()).line,r=e.positionAt(a.getTokenOffset()+a.getTokenLength()).line;1===a.getTokenError()&&n+1<e.lineCount?a.setPosition(e.offsetAt(e$.create(n+1,0))):n<r&&(h({startLine:n,endLine:r,kind:eB.Comment}),o=n);break}case 12:{let n=e.getText().substr(a.getTokenOffset(),a.getTokenLength()).match(/^\/\/\s*#(region\b)|(endregion\b)/);if(n){let r=e.positionAt(a.getTokenOffset()).line;if(n[1]){let e={startLine:r,endLine:r,kind:eB.Region};s.push(e)}else{let e=s.length-1;for(;e>=0&&s[e].kind!==eB.Region;)e--;if(e>=0){let n=s[e];s.length=e,r>n.startLine&&o!==n.startLine&&(n.endLine=r,h(n),o=n.startLine)}}}}}l=a.scan()}let c=n&&n.rangeLimit;if("number"!=typeof c||r.length<=c)return r;n&&n.onRangeLimitExceeded&&n.onRangeLimitExceeded(e.uri);let u=[];for(let e of i)e<30&&(u[e]=(u[e]||0)+1);let d=0,p=0;for(let e=0;e<u.length;e++){let n=u[e];if(n){if(n+d>c){p=e;break}d+=n}}let f=[];for(let e=0;e<r.length;e++){let n=i[e];"number"==typeof n&&(n<p||n===p&&d++<c)&&f.push(r[e])}return f}function ET(e,n,r){function i(n,r){return eR.create(e.positionAt(n),e.positionAt(r))}let s=C_(e.getText(),!0);return n.map(function(n){let o,a=e.offsetAt(n),l=r.getNodeFromOffset(a,!0),h=[];for(;l;){switch(l.type){case"string":case"object":case"array":let e=l.offset+1,n=l.offset+l.length-1;e<n&&a>=e&&a<=n&&h.push(i(e,n)),h.push(i(l.offset,l.offset+l.length));break;case"number":case"boolean":case"null":case"property":h.push(i(l.offset,l.offset+l.length))}if("property"===l.type||l.parent&&"array"===l.parent.type){var c;let e=(c=l.offset+l.length,(s.setPosition(c),5===s.scan())?s.getTokenOffset()+s.getTokenLength():-1);-1!==e&&h.push(i(l.offset,e))}l=l.parent}for(let e=h.length-1;e>=0;e--)o=tE.create(h[e],o);return o||(o=tE.create(eR.create(n,n))),o})}function EP(e,n,r){let i;if(r){let n=e.offsetAt(r.start),s=e.offsetAt(r.end)-n;i={offset:n,length:s}}let s={tabSize:n?n.tabSize:4,insertSpaces:n?.insertSpaces===!0,insertFinalNewline:n?.insertFinalNewline===!0,eol:"\n",keepLines:n?.keepLines===!0};return(function(e,n,r){let i,s,o,a,l,h;if(n){for(l=(a=n.offset)+n.length,o=a;o>0&&!CN(e,o-1);)o--;let h=l;for(;h<e.length&&!CN(e,h);)h++;i=function(e,n){let r=0,i=0,s=n.tabSize||4;for(;r<e.length;){let n=e.charAt(r);if(n===CT["1"])i++;else if("	"===n)i+=s;else break;r++}return Math.floor(i/s)}(s=e.substring(o,h),r)}else s=e,i=0,o=0,a=0,l=e.length;let c=function(e,n){for(let e=0;e<n.length;e++){let r=n.charAt(e);if("\r"===r){if(e+1<n.length&&"\n"===n.charAt(e+1))return"\r\n";return"\r"}if("\n"===r)return"\n"}return e&&e.eol||"\n"}(r,e),u=CA.includes(c),d=0,p=0,f="	"===(h=r.insertSpaces?CT[r.tabSize||4]??CM(CT["1"],r.tabSize||4):"	")?"	":" ",g=C_(s,!1),m=!1;function y(){if(d>1)return CM(c,d)+CM(h,i+p);let e=h.length*(i+p);return!u||e>CP[f][c].length?c+CM(h,i+p):e<=0?c:CP[f][c][e]}function O(){let e=g.scan();for(d=0;15===e||14===e;)14===e&&r.keepLines?d+=1:14===e&&(d=1),e=g.scan();return m=16===e||0!==g.getTokenError(),e}let b=[];function x(r,i,s){!m&&(!n||i<l&&s>a)&&e.substring(i,s)!==r&&b.push({offset:i,length:s-i,content:r})}let w=O();if(r.keepLines&&d>0&&x(CM(c,d),0,0),17!==w){let e=g.getTokenOffset()+o;x(h.length*i<20&&r.insertSpaces?CT[h.length*i]:CM(h,i),o,e)}for(;17!==w;){let e=g.getTokenOffset()+g.getTokenLength()+o,n=O(),i="",s=!1;for(;0===d&&(12===n||13===n);){let r=g.getTokenOffset()+o;x(CT["1"],e,r),e=g.getTokenOffset()+g.getTokenLength()+o,i=(s=12===n)?y():"",n=O()}if(2===n)1!==w&&p--,r.keepLines&&d>0||!r.keepLines&&1!==w?i=y():r.keepLines&&(i=CT["1"]);else if(4===n)3!==w&&p--,r.keepLines&&d>0||!r.keepLines&&3!==w?i=y():r.keepLines&&(i=CT["1"]);else{switch(w){case 3:case 1:p++,i=r.keepLines&&d>0||!r.keepLines?y():CT["1"];break;case 5:i=r.keepLines&&d>0||!r.keepLines?y():CT["1"];break;case 12:i=y();break;case 13:d>0?i=y():s||(i=CT["1"]);break;case 6:r.keepLines&&d>0?i=y():s||(i=CT["1"]);break;case 10:r.keepLines&&d>0?i=y():6!==n||s||(i="");break;case 7:case 8:case 9:case 11:case 2:case 4:r.keepLines&&d>0?i=y():12!==n&&13!==n||s?5!==n&&17!==n&&(m=!0):i=CT["1"];break;case 16:m=!0}d>0&&(12===n||13===n)&&(i=y())}17===n&&(i=r.keepLines&&d>0?y():r.insertFinalNewline?c:""),x(i,e,g.getTokenOffset()+o),w=n}return b})(e.getText(),i,s).map(n=>eG.replace(eR.create(e.positionAt(n.offset),e.positionAt(n.offset+n.length)),n.content))}(eE=nr||(nr={}))[eE.Object=0]="Object",eE[eE.Array=1]="Array";class EA{constructor(e,n){this.propertyName=e??"",this.beginningLineNumber=n,this.childrenProperties=[],this.lastProperty=!1,this.noKeyName=!1}addChildProperty(e){if(e.parent=this,this.childrenProperties.length>0){let n=0;(n=e.noKeyName?this.childrenProperties.length:function(e,n,r){let i=n.propertyName.toLowerCase(),s=e[0].propertyName.toLowerCase(),o=e[e.length-1].propertyName.toLowerCase();if(i<s)return 0;if(i>o)return e.length;let a=0,l=e.length-1;for(;a<=l;){let i=l+a>>1,s=r(n,e[i]);if(s>0)a=i+1;else{if(!(s<0))return i;l=i-1}}return-a-1}(this.childrenProperties,e,EM))<0&&(n=-1*n-1),this.childrenProperties.splice(n,0,e)}else this.childrenProperties.push(e);return e}}function EM(e,n){let r=e.propertyName.toLowerCase(),i=n.propertyName.toLowerCase();return r<i?-1:+(r>i)}function EN(e,n,r){if(0!==n.childrenProperties.length)if(n.type===nr.Object){let i=1/0;for(let e of n.childrenProperties)e.beginningLineNumber<i&&(i=e.beginningLineNumber);r+=i-n.beginningLineNumber,n.childrenProperties.sort((e,n)=>e.propertyName.localeCompare(n.propertyName)),e.push(new ED(r,n.childrenProperties))}else n.type===nr.Array&&function e(n,r,i){for(let s of r.childrenProperties){if(s.type===nr.Object){let e=1/0;for(let n of s.childrenProperties)n.beginningLineNumber<e&&(e=n.beginningLineNumber);let o=e-s.beginningLineNumber;n.push(new ED(i+s.beginningLineNumber-r.beginningLineNumber+o,s.childrenProperties))}s.type===nr.Array&&e(n,s,i+s.beginningLineNumber-r.beginningLineNumber)}}(e,n,r)}class ED{constructor(e,n){this.beginningLineNumber=e,this.propertyTreeArray=n}}function EI(e,n){let r=[];return n.visit(i=>{if("property"===i.type&&"$ref"===i.keyNode.value&&i.valueNode?.type==="string"){let a=function(e,n){var r;let i="#"===(r=n)?[]:"#"!==r[0]||"/"!==r[1]?null:r.substring(2).split(/\//).map(E$);return i?function e(n,r){if(!r)return null;if(0===n.length)return r;let i=n.shift();if(r&&"object"===r.type){let s=r.properties.find(e=>e.keyNode.value===i);return s?e(n,s.valueNode):null}if(r&&"array"===r.type&&i.match(/^(0|[1-9][0-9]*)$/)){let s=Number.parseInt(i),o=r.items[s];return o?e(n,o):null}return null}(i,e.root):null}(n,i.valueNode.value);if(a){var s,o;let n=e.positionAt(a.offset);r.push({target:`${e.uri}#${n.line+1},${n.character+1}`,range:(s=e,o=i.valueNode,eR.create(s.positionAt(o.offset+1),s.positionAt(o.offset+o.length-1)))})}}return!0}),Promise.resolve(r)}function E$(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function ER(e){return 32===e||9===e}function EL(e){return 10===e||13===e}function EQ(e){return e>=48&&e<=57}var Ej=class{offset;length;parent;constructor(e,n,r=0){this.offset=n,this.length=r,this.parent=e}get children(){return[]}toString(){return"type: "+this.type+" ("+this.offset+"/"+this.length+")"+(this.parent?" parent: {"+this.parent.toString()+"}":"")}},EV=class extends Ej{type="null";value=null;constructor(e,n){super(e,n)}},Ez=class extends Ej{type="boolean";value;constructor(e,n,r){super(e,r),this.value=n}},EB=class extends Ej{type="array";items;constructor(e,n){super(e,n),this.items=[]}get children(){return this.items}},EF=class extends Ej{type="number";isInteger;value;constructor(e,n){super(e,n),this.isInteger=!0,this.value=NaN}},EZ=class extends Ej{type="string";value;constructor(e,n,r){super(e,n,r),this.value=""}},Eq=class extends Ej{type="property";keyNode;valueNode;colonOffset;constructor(e,n,r){super(e,n),this.colonOffset=-1,this.keyNode=r}get children(){return this.valueNode?[this.keyNode,this.valueNode]:[this.keyNode]}},EW=class extends Ej{type="object";properties;constructor(e,n){super(e,n),this.properties=[]}get children(){return this.properties}};let EX=cl({String:cT.string,Number:cT.number,"True False":cT.bool,PropertyName:cT.propertyName,Null:cT.null,", :":cT.separator,"[ ]":cT.squareBracket,"{ }":cT.brace}),EU=da.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#ClOOQO'#Cr'#CrQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CtOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59W,59WO!iQPO,59WOVQPO,59QOqQPO'#CmO!nQPO,59`OOQO1G.k1G.kOVQPO'#CnO!vQPO,59aOOQO1G.r1G.rOOQO1G.l1G.lOOQO,59X,59XOOQO-E6k-E6kOOQO,59Y,59YOOQO-E6l-E6l",stateData:"#O~OeOS~OQSORSOSSOTSOWQO_ROgPO~OVXOgUO~O^[O~PVO[^O~O]_OVhX~OVaO~O]bO^iX~O^dO~O]_OVha~O]bO^ia~O",goto:"!kjPPPPPPkPPkqwPPPPk{!RPPP!XP!e!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:"⚠ JsonText True False Null Number String } { Object Property PropertyName : , ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",14,"["],["closedBy",8,"}",15,"]"]],propSources:[EX],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oe~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Og~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zO]~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yO[~~'OO_~~'TO^~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0});var EY=cI.define({name:"json",parser:EU.configure({props:[cK.add({Object:c4({except:/^\s*\}/}),Array:c4({except:/^\s*\]/})}),c6.add({"Object Array":c9})]}),languageData:{closeBrackets:{brackets:["[","{",'"',"'"]},indentOnInput:/^\s*[\}\]]$/}});function EG(e){return!!e}var EH=/^(https?:\/\/|www\.)[\w-\.]+\.[\w-\.]+(\/([\S]+)?)?$/i,EK=new class{constructor(e){this.options=e,this.languageService=function(e){let n=e.promiseConstructor||Promise,r=new ES(e.schemaRequestService,e.workspaceContext,n);r.setSchemaContributions(Ey);let i=new Ea(r,e.contributions,n,e.clientCapabilities),s=new El(r,e.contributions,n),o=new Ef(r),a=new Ec(r,n);return{configure:e=>{r.clearExternalSchemas(),e.schemas?.forEach(r.registerExternalSchema.bind(r)),a.configure(e)},resetSchema:e=>r.onResourceChange(e),doValidation:a.doValidation.bind(a),getLanguageStatus:a.getLanguageStatus.bind(a),parseJSONDocument:e=>(function(e,n){let r,i=[],s=-1,o=e.getText(),a=C_(o,!1),l=n&&n.collectComments?[]:void 0;function h(){for(;;){let n=a.scan();switch(function(){switch(a.getTokenError()){case 4:return u(CW("Invalid unicode sequence in string."),t7.InvalidUnicode);case 5:return u(CW("Invalid escape character in string."),t7.InvalidEscapeCharacter);case 3:return u(CW("Unexpected end of number."),t7.UnexpectedEndOfNumber);case 1:return u(CW("Unexpected end of comment."),t7.UnexpectedEndOfComment);case 2:return u(CW("Unexpected end of string."),t7.UnexpectedEndOfString);case 6:return u(CW("Invalid characters in string. Control characters must be escaped."),t7.InvalidCharacter)}}(),n){case 12:case 13:Array.isArray(l)&&l.push(eR.create(e.positionAt(a.getTokenOffset()),e.positionAt(a.getTokenOffset()+a.getTokenLength())));break;case 15:case 14:break;default:return n}}}function c(n,r,o,a,l=eq.Error){if(0===i.length||o!==s){let h=eR.create(e.positionAt(o),e.positionAt(a));i.push(eU.create(h,n,l,r,e.languageId)),s=o}}function u(e,n,r,i=[],s=[]){let l=a.getTokenOffset(),p=a.getTokenOffset()+a.getTokenLength();if(l===p&&l>0){for(l--;l>0&&/\s/.test(o.charAt(l));)l--;p=l+1}if(c(e,n,l,p),r&&d(r,!1),i.length+s.length>0){let e=a.getToken();for(;17!==e;){if(-1!==i.indexOf(e)){h();break}if(-1!==s.indexOf(e))break;e=h()}}return r}function d(e,n){return e.length=a.getTokenOffset()+a.getTokenLength()-e.offset,n&&h(),e}let p=new C1(void 0,0,0);function f(e){if(10!==a.getToken())return;let n=new C1(e,a.getTokenOffset());return n.value=a.getTokenValue(),d(n,!0)}return 17!==h()&&((r=function n(r){return function(e){if(3!==a.getToken())return;let r=new CJ(e,a.getTokenOffset());h();let i=!1;for(;4!==a.getToken()&&17!==a.getToken();){if(5===a.getToken()){i||u(CW("Value expected"),t7.ValueExpected);let e=a.getTokenOffset();if(h(),4===a.getToken()){i&&c(CW("Trailing comma"),t7.TrailingComma,e,e+1);continue}}else i&&u(CW("Expected comma"),t7.CommaExpected);let e=n(r);e?r.items.push(e):u(CW("Value expected"),t7.ValueExpected,void 0,[],[4,5]),i=!0}return 4!==a.getToken()?u(CW("Expected comma or closing bracket"),t7.CommaOrCloseBacketExpected,r):d(r,!0)}(r)||function(r){if(1!==a.getToken())return;let i=new C5(r,a.getTokenOffset()),s=Object.create(null);h();let o=!1;for(;2!==a.getToken()&&17!==a.getToken();){if(5===a.getToken()){o||u(CW("Property expected"),t7.PropertyExpected);let e=a.getTokenOffset();if(h(),2===a.getToken()){o&&c(CW("Trailing comma"),t7.TrailingComma,e,e+1);continue}}else o&&u(CW("Expected comma"),t7.CommaExpected);let r=function(r,i){let s=new C2(r,a.getTokenOffset(),p),o=f(s);if(!o)if(16!==a.getToken())return;else{u(CW("Property keys must be doublequoted"),t7.PropertyKeysMustBeDoublequoted);let e=new C1(s,a.getTokenOffset(),a.getTokenLength());e.value=a.getTokenValue(),o=e,h()}if(s.keyNode=o,"//"!==o.value){let e=i[o.value];e?(c(CW("Duplicate object key"),t7.DuplicateKey,s.keyNode.offset,s.keyNode.offset+s.keyNode.length,eq.Warning),CB(e)&&c(CW("Duplicate object key"),t7.DuplicateKey,e.keyNode.offset,e.keyNode.offset+e.keyNode.length,eq.Warning),i[o.value]=!0):i[o.value]=s}if(6===a.getToken())s.colonOffset=a.getTokenOffset(),h();else if(u(CW("Colon expected"),t7.ColonExpected),10===a.getToken()&&e.positionAt(o.offset+o.length).line<e.positionAt(a.getTokenOffset()).line)return s.length=o.length,s;let l=n(s);return l?(s.valueNode=l,s.length=l.offset+l.length-s.offset,s):u(CW("Value expected"),t7.ValueExpected,s,[],[2,5])}(i,s);r?i.properties.push(r):u(CW("Property expected"),t7.PropertyExpected,void 0,[],[2,5]),o=!0}return 2!==a.getToken()?u(CW("Expected comma or closing brace"),t7.CommaOrCloseBraceExpected,i):d(i,!0)}(r)||f(r)||function(e){if(11!==a.getToken())return;let n=new C0(e,a.getTokenOffset());if(0===a.getTokenError()){let e=a.getTokenValue();try{let r=JSON.parse(e);if(!CQ(r))return u(CW("Invalid number format."),t7.Undefined,n);n.value=r}catch(e){return u(CW("Invalid number format."),t7.Undefined,n)}n.isInteger=-1===e.indexOf(".")}return d(n,!0)}(r)||function(e){switch(a.getToken()){case 7:return d(new CH(e,a.getTokenOffset()),!0);case 8:return d(new CK(e,!0,a.getTokenOffset()),!0);case 9:return d(new CK(e,!1,a.getTokenOffset()),!0);default:return}}(r)}(r))?17!==a.getToken()&&u(CW("End of file expected."),t7.Undefined):u(CW("Expected a JSON object, array or literal."),t7.Undefined)),new Ei(r,i,l)})(e,{collectComments:!0}),newJSONDocument:(e,n,r)=>(function(e,n=[],r=[]){return new Ei(e,n,r)})(e,n,r),getMatchingSchemas:r.getMatchingSchemas.bind(r),doResolve:i.doResolve.bind(i),doComplete:i.doComplete.bind(i),findDocumentSymbols:o.findDocumentSymbols.bind(o),findDocumentSymbols2:o.findDocumentSymbols2.bind(o),findDocumentColors:o.findDocumentColors.bind(o),getColorPresentations:o.getColorPresentations.bind(o),doHover:s.doHover.bind(s),getFoldingRanges:EE,getSelectionRanges:ET,findDefinition:()=>Promise.resolve([]),findLinks:EI,format:(e,n,r)=>EP(e,r,n),sort:(e,n)=>(function(e,n){let r={...n,keepLines:!1},i=tX.applyEdits(e,EP(e,r,void 0)),s=tX.create("test://test.json","json",0,i),o=function(e){let n,r,i,s=C_(e.getText(),!1),o=new EA,a=o,l=o,h=o,c=0,u=0,d=-1,p=-1,f=0,g=0,m=[],y=!1,O=!1;for(;17!==(n=s.scan());){if(!0===y&&14!==n&&15!==n&&12!==n&&13!==n&&void 0===l.endLineNumber){let e=s.getTokenStartLine();2===i||4===i?h.endLineNumber=e-1:l.endLineNumber=e-1,f=e,y=!1}if(!0===O&&14!==n&&15!==n&&12!==n&&13!==n&&(f=s.getTokenStartLine(),O=!1),s.getTokenStartLine()!==c){for(let n=c;n<s.getTokenStartLine();n++)u+=e.getText(eR.create(e$.create(n,0),e$.create(n+1,0))).length;c=s.getTokenStartLine()}switch(n){case 10:if(void 0===r||1===r||5===r&&m[m.length-1]===nr.Object){let e=new EA(s.getTokenValue(),f);h=l,l=a.addChildProperty(e)}break;case 3:if(void 0===o.beginningLineNumber&&(o.beginningLineNumber=s.getTokenStartLine()),m[m.length-1]===nr.Object)a=l;else if(m[m.length-1]===nr.Array){let e=new EA(s.getTokenValue(),f);e.noKeyName=!0,h=l,a=l=a.addChildProperty(e)}m.push(nr.Array),l.type=nr.Array,f=s.getTokenStartLine(),f++;break;case 1:if(void 0===o.beginningLineNumber)o.beginningLineNumber=s.getTokenStartLine();else if(m[m.length-1]===nr.Array){let e=new EA(s.getTokenValue(),f);e.noKeyName=!0,h=l,l=a.addChildProperty(e)}l.type=nr.Object,m.push(nr.Object),a=l,f=s.getTokenStartLine(),f++;break;case 4:g=s.getTokenStartLine(),m.pop(),void 0===l.endLineNumber&&(2===r||4===r)&&(l.endLineNumber=g-1,l.lastProperty=!0,l.lineWhereToAddComma=d,l.indexWhereToAddComa=p,h=l,a=l=l?l.parent:void 0),o.endLineNumber=g,f=g+1;break;case 2:g=s.getTokenStartLine(),m.pop(),1!==r&&(void 0===l.endLineNumber&&(l.endLineNumber=g-1,l.lastProperty=!0,l.lineWhereToAddComma=d,l.indexWhereToAddComa=p),h=l,a=l=l?l.parent:void 0),o.endLineNumber=s.getTokenStartLine(),f=g+1;break;case 5:g=s.getTokenStartLine(),void 0===l.endLineNumber&&(m[m.length-1]===nr.Object||m[m.length-1]===nr.Array&&(2===r||4===r))&&(l.endLineNumber=g,l.commaIndex=s.getTokenOffset()-u,l.commaLine=g),(2===r||4===r)&&(h=l,a=l=l?l.parent:void 0),f=g+1;break;case 13:5===r&&d===s.getTokenStartLine()&&(m[m.length-1]===nr.Array&&(2===i||4===i)||m[m.length-1]===nr.Object)&&(m[m.length-1]===nr.Array&&(2===i||4===i)||m[m.length-1]===nr.Object)&&(l.endLineNumber=void 0,y=!0),(1===r||3===r)&&d===s.getTokenStartLine()&&(O=!0)}14!==n&&13!==n&&12!==n&&15!==n&&(i=r,r=n,d=s.getTokenStartLine(),p=s.getTokenOffset()+s.getTokenLength()-u)}return o}(s),a=function(e,n){if(0===n.childrenProperties.length)return e;let r=tX.create("test://test.json","json",0,e.getText()),i=[];for(EN(i,n,n.beginningLineNumber);i.length>0;){let n=i.shift(),s=n.propertyTreeArray,o=n.beginningLineNumber;for(let n=0;n<s.length;n++){let a=s[n],l=eR.create(e$.create(a.beginningLineNumber,0),e$.create(a.endLineNumber+1,0)),h=e.getText(l),c=tX.create("test://test.json","json",0,h);if(!0===a.lastProperty&&n!==s.length-1){let e=a.lineWhereToAddComma-a.beginningLineNumber,n=a.indexWhereToAddComa,r={range:eR.create(e$.create(e,n),e$.create(e,n)),text:","};tX.update(c,[r],1)}else if(!1===a.lastProperty&&n===s.length-1){let e=a.commaIndex,n=a.commaLine-a.beginningLineNumber,r={range:eR.create(e$.create(n,e),e$.create(n,e+1)),text:""};tX.update(c,[r],1)}let u=a.endLineNumber-a.beginningLineNumber+1,d={range:eR.create(e$.create(o,0),e$.create(o+u,0)),text:c.getText()};tX.update(r,[d],1),EN(i,a,o),o+=u}}return r}(s,o),l=EP(a,r,void 0),h=tX.applyEdits(a,l);return[eG.replace(eR.create(e$.create(0,0),e.positionAt(e.getText().length)),h)]})(e,n)}}({}),this.configure()}languageService;schemasConfigurations=[];triggerCharacters=[":",'"',"'"];configure(){this.languageService.configure({allowComments:!1,schemas:this.schemasConfigurations.map(e=>({fileMatch:e.fileMatch,uri:function(e){try{return kb.parse(e).toString(!0)}catch(n){return e}}(e.uri),schema:e.schema}))})}parseJSONDocument(e){let n=function(e,n){let r,i=[],s=-1,o=e.getText(),a=function(e,n=!1){let r=e.length,i=0,s="",o=0,a=16,l=0,h=0,c=0,u=0,d=0;function p(n){let s="",o=i;for(;;){if(i>=r){s+=e.substring(o,i),d=2;break}let a=e.charCodeAt(i);if(a===n){s+=e.substring(o,i),i++;break}if(92===a){if(s+=e.substring(o,i),++i>=r){d=2;break}switch(e.charCodeAt(i++)){case 34:s+='"';break;case 39:s+="'";break;case 92:s+="\\";break;case 47:s+="/";break;case 98:s+="\b";break;case 102:s+="\f";break;case 110:s+="\n";break;case 114:s+="\r";break;case 116:s+="	";break;case 117:let n=function(n,r){let s=0,o=0;for(;s<4||!r;){let n=e.charCodeAt(i);if(n>=48&&n<=57)o=16*o+n-48;else if(n>=65&&n<=70)o=16*o+n-65+10;else if(n>=97&&n<=102)o=16*o+n-97+10;else break;i++,s++}return s<4&&(o=-1),o}(4,!0);n>=0?s+=String.fromCharCode(n):d=4;break;default:d=5}o=i;continue}if(a>=0&&a<=31)if(EL(a)){s+=e.substring(o,i),d=2;break}else d=6;i++}return s}function f(){if(s="",d=0,o=i,h=l,u=c,i>=r)return o=r,a=17;let n=e.charCodeAt(i);if(ER(n)){do i++,s+=String.fromCharCode(n),n=e.charCodeAt(i);while(ER(n));return a=15}if(EL(n))return i++,s+=String.fromCharCode(n),13===n&&10===e.charCodeAt(i)&&(i++,s+="\n"),l++,c=i,a=14;switch(n){case 123:return i++,a=1;case 125:return i++,a=2;case 91:return i++,a=3;case 93:return i++,a=4;case 58:return i++,a=6;case 44:return i++,a=5;case 34:return i++,s=p(34),a=19;case 39:return i++,s=p(39),a=18;case 47:let f=i-1;if(47===e.charCodeAt(i+1)){for(i+=2;i<r&&!EL(e.charCodeAt(i));)i++;return s=e.substring(f,i),a=12}if(42===e.charCodeAt(i+1)){i+=2;let n=r-1,o=!1;for(;i<n;){let n=e.charCodeAt(i);if(42===n&&47===e.charCodeAt(i+1)){i+=2,o=!0;break}i++,EL(n)&&(13===n&&10===e.charCodeAt(i)&&i++,l++,c=i)}return o||(i++,d=1),s=e.substring(f,i),a=13}return s+=String.fromCharCode(n),i++,a=16;case 45:if(s+=String.fromCharCode(n),++i===r||!EQ(e.charCodeAt(i)))return a=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return s+=function(){let n=i;if(48===e.charCodeAt(i))i++;else for(i++;i<e.length&&EQ(e.charCodeAt(i));)i++;if(i<e.length&&46===e.charCodeAt(i)){if(!(++i<e.length&&EQ(e.charCodeAt(i))))return d=3,e.substring(n,i);for(i++;i<e.length&&EQ(e.charCodeAt(i));)i++}let r=i;if(i<e.length&&(69===e.charCodeAt(i)||101===e.charCodeAt(i)))if((++i<e.length&&43===e.charCodeAt(i)||45===e.charCodeAt(i))&&i++,i<e.length&&EQ(e.charCodeAt(i))){for(i++;i<e.length&&EQ(e.charCodeAt(i));)i++;r=i}else d=3;return e.substring(n,r)}(),a=11;default:for(;i<r&&function(e){if(ER(e)||EL(e))return!1;switch(e){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}(n);)i++,n=e.charCodeAt(i);if(o!==i){switch(s=e.substring(o,i)){case"true":return a=8;case"false":return a=9;case"null":return a=7}return a=16}return s+=String.fromCharCode(n),i++,a=16}}return{setPosition:function(e){i=e,s="",o=0,a=16,d=0},getPosition:()=>i,scan:n?function(){let e;do e=f();while(e>=12&&e<=15);return e}:f,getToken:()=>a,getTokenValue:()=>s,getTokenOffset:()=>o,getTokenLength:()=>i-o,getTokenStartLine:()=>h,getTokenStartCharacter:()=>o-u,getTokenError:()=>d}}(o,!1),l=n&&n.collectComments?[]:void 0;function h(){for(;;){let n=a.scan();switch(function(){switch(a.getTokenError()){case 4:return u(CW("Invalid unicode sequence in string."),260);case 5:return u(CW("Invalid escape character in string."),261);case 3:return u(CW("Unexpected end of number."),259);case 1:return u(CW("Unexpected end of comment."),257);case 2:return u(CW("Unexpected end of string."),258);case 6:return u(CW("Invalid characters in string. Control characters must be escaped."),262)}}(),n){case 12:case 13:Array.isArray(l)&&l.push(eR.create(e.positionAt(a.getTokenOffset()),e.positionAt(a.getTokenOffset()+a.getTokenLength())));break;case 15:case 14:break;default:return n}}}function c(n,r,o,a,l=eq.Error){if(0===i.length||o!==s){let h=eR.create(e.positionAt(o),e.positionAt(a));i.push(eU.create(h,n,l,r,e.languageId)),s=o}}function u(e,n,r,i=[],s=[]){let l=a.getTokenOffset(),p=a.getTokenOffset()+a.getTokenLength();if(l===p&&l>0){for(l--;l>0&&/\s/.test(o.charAt(l));)l--;p=l+1}if(c(e,n,l,p),r&&d(r,!1),i.length+s.length>0){let e=a.getToken();for(;17!==e;){if(-1!==i.indexOf(e)){h();break}if(-1!==s.indexOf(e))break;e=h()}}return r}function d(e,n){return e.length=a.getTokenOffset()+a.getTokenLength()-e.offset,n&&h(),e}let p=new EZ(void 0,0,0);function f(e){if(18!==a.getToken()&&19!==a.getToken())return;18===a.getToken()&&u(CW("String value must be doublequoted"),529);let n=new EZ(e,a.getTokenOffset());return n.value=a.getTokenValue(),d(n,!0)}return 17!==h()&&((r=function n(r){return function(e){if(3!==a.getToken())return;let r=new EB(e,a.getTokenOffset());h();let i=!1;for(;4!==a.getToken()&&17!==a.getToken();){if(5===a.getToken()){i||u(CW("Value expected"),516);let e=a.getTokenOffset();if(h(),4===a.getToken()){i&&c(CW("Trailing comma"),519,e,e+1);continue}}else i&&u(CW("Expected comma"),514);let e=n(r);e?r.items.push(e):u(CW("Value expected"),516,void 0,[],[4,5]),i=!0}return 4!==a.getToken()?u(CW("Expected comma or closing bracket"),517,r):d(r,!0)}(r)||function(r){if(1!==a.getToken())return;let i=new EW(r,a.getTokenOffset()),s=Object.create(null);h();let o=!1;for(;2!==a.getToken()&&17!==a.getToken();){if(5===a.getToken()){o||u(CW("Property expected"),513);let e=a.getTokenOffset();if(h(),2===a.getToken()){o&&c(CW("Trailing comma"),519,e,e+1);continue}}else o&&u(CW("Expected comma"),514);let r=function(r,i){let s=new Eq(r,a.getTokenOffset(),p),o=f(s);if(!o)if(16!==a.getToken())return;else{u(CW("Property keys must be doublequoted"),528);let e=new EZ(s,a.getTokenOffset(),a.getTokenLength());e.value=a.getTokenValue(),o=e,h()}if(s.keyNode=o,"//"!==o.value){let e=i[o.value];if(e)c(CW("Duplicate object key"),520,s.keyNode.offset,s.keyNode.offset+s.keyNode.length,eq.Warning),"object"!=typeof e||null===e||Array.isArray(e)||c(CW("Duplicate object key"),520,e.keyNode.offset,e.keyNode.offset+e.keyNode.length,eq.Warning),i[o.value]=!0;else i[o.value]=s}if(6===a.getToken())s.colonOffset=a.getTokenOffset(),h();else if(u(CW("Colon expected"),515),(18===a.getToken()||19===a.getToken())&&e.positionAt(o.offset+o.length).line<e.positionAt(a.getTokenOffset()).line)return s.length=o.length,s;let l=n(s);return l?(s.valueNode=l,s.length=l.offset+l.length-s.offset,s):u(CW("Value expected"),516,s,[],[2,5])}(i,s);r?i.properties.push(r):u(CW("Property expected"),513,void 0,[],[2,5]),o=!0}return 2!==a.getToken()?u(CW("Expected comma or closing brace"),518,i):d(i,!0)}(r)||f(r)||function(e){if(11!==a.getToken())return;let n=new EF(e,a.getTokenOffset());if(0===a.getTokenError()){let e=a.getTokenValue();try{let r=JSON.parse(e);if("number"!=typeof r)return u(CW("Invalid number format."),0,n);n.value=r}catch(e){return u(CW("Invalid number format."),0,n)}n.isInteger=-1===e.indexOf(".")}return d(n,!0)}(r)||function(e){switch(a.getToken()){case 7:return d(new EV(e,a.getTokenOffset()),!0);case 8:return d(new Ez(e,!0,a.getTokenOffset()),!0);case 9:return d(new Ez(e,!1,a.getTokenOffset()),!0);default:return}}(r)}(r))?17!==a.getToken()&&u(CW("End of file expected."),0):u(CW("Expected a JSON object, array or literal."),0)),{ast:r,problems:i,commentRanges:l}}(e,{collectComments:!0});if(!n.ast)return;let r=this.languageService.newJSONDocument(n.ast,n.problems);return r.comments=n.commentRanges,r}async validate(e,n){let r=new _z(e);"function"==typeof(null==n?void 0:n.transform)&&(r=n.transform(r));let i=tX.create(`file:///anonymous-${function(){var e,n=0,r="";if(!pn||pr+16>256){for(pn=Array(n=256);n--;)pn[n]=256*Math.random()|0;n=pr=0}for(;n<16;n++)e=pn[pr+n],6==n?r+=pi[15&e|64]:8==n?r+=pi[63&e|128]:r+=pi[e],1&n&&n>1&&n<11&&(r+="-");return pr++,r}()}.json`,"json",0,r.toString()),s=this.parseJSONDocument(i);return s?(await this.languageService.doValidation(i,s,{},null==n?void 0:n.schema)).map(e=>({from:i.offsetAt(e.range.start),to:i.offsetAt(e.range.end),severity:e.severity,message:e.message})).map(e=>{let n=r.originalRangeFor({from:e.from,to:e.to});if(n)return{...e,...n}}).filter(EG):[]}configureSchemas(e){let n=[];(n=n.concat(e)).forEach(e=>{let n=this.schemasConfigurations.find(n=>n.uri===e.uri);n?(n.schema=e.schema,n.fileMatch=e.fileMatch):this.schemasConfigurations.push(e)}),this.configure()}deleteSchemas(e){let n=[];n=n.concat(e),this.schemasConfigurations=this.schemasConfigurations.filter(e=>!n.includes(e.uri)),this.configure()}async doValidation(e){let{textDocument:n}=e,r=this.parseJSONDocument(n);return r?(await this.languageService.doValidation(n,r)).map(e=>({from:n.offsetAt(e.range.start),to:n.offsetAt(e.range.end),severity:"error",message:e.message})):[]}async format(e,n){let{textDocument:r,originalRangeFor:i}=e.field(Od);return{changes:this.languageService.format(r,void 0,{tabSize:(null==n?void 0:n.tabSize)??4,insertSpaces:!0,insertFinalNewline:!1}).map(e=>{let n=i({from:r.offsetAt(e.range.start),to:r.offsetAt(e.range.end)});if(n)return{...n,insert:e.newText}}).filter(e=>!!e)}}async doComplete(e){let{textDocument:n}=e,{offset:r}=e,{line:i,character:s}=n.positionAt(r),o=this.parseJSONDocument(n);if(!o)return;let a=await this.languageService.doComplete(n,{line:i,character:s},o);if(a&&a.items.length)return{isIncomplete:!0,items:a.items}}async findLinks(e){let{textDocument:n}=e,r=this.parseJSONDocument(n);if(!r)return[];let i=[];return r.visit(e=>{if("string"===e.type&&EH.test(e.value)){let n={from:e.offset+1,to:e.offset+e.length-1};i.push({target:e.value,range:n})}return!0}),i}}({lintDelay:0}),EJ=r(9217),E0=r(87686),E1=r(69230),E2=r(97424),E5=r(41945),E4=r(52601),E3=r(79500),E6=r(7459),E9=Symbol.for("immer-nothing"),E7=Symbol.for("immer-draftable"),E8=Symbol.for("immer-state");function Te(e){throw Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Tt=Object.getPrototypeOf;function Tn(e){return!!e&&!!e[E8]}function Tr(e){return!!e&&(Ts(e)||Array.isArray(e)||!!e[E7]||!!e.constructor?.[E7]||Tc(e)||Tu(e))}var Ti=Object.prototype.constructor.toString();function Ts(e){if(!e||"object"!=typeof e)return!1;let n=Tt(e);if(null===n)return!0;let r=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===Ti}function To(e,n){0===Ta(e)?Reflect.ownKeys(e).forEach(r=>{n(r,e[r],e)}):e.forEach((r,i)=>n(i,r,e))}function Ta(e){let n=e[E8];return n?n.type_:Array.isArray(e)?1:Tc(e)?2:3*!!Tu(e)}function Tl(e,n){return 2===Ta(e)?e.has(n):Object.prototype.hasOwnProperty.call(e,n)}function Th(e,n,r){let i=Ta(e);2===i?e.set(n,r):3===i?e.add(r):e[n]=r}function Tc(e){return e instanceof Map}function Tu(e){return e instanceof Set}function Td(e){return e.copy_||e.base_}function Tp(e,n){if(Tc(e))return new Map(e);if(Tu(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);let r=Ts(e);if(!0!==n&&("class_only"!==n||r)){let n=Tt(e);return null!==n&&r?{...e}:Object.assign(Object.create(n),e)}{let n=Object.getOwnPropertyDescriptors(e);delete n[E8];let r=Reflect.ownKeys(n);for(let i=0;i<r.length;i++){let s=r[i],o=n[s];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[s]})}return Object.create(Tt(e),n)}}function Tf(e,n=!1){return Tm(e)||Tn(e)||!Tr(e)||(Ta(e)>1&&(e.set=e.add=e.clear=e.delete=Tg),Object.freeze(e),n&&Object.entries(e).forEach(([e,n])=>Tf(n,!0))),e}function Tg(){Te(2)}function Tm(e){return Object.isFrozen(e)}var Ty={};function TO(e){let n=Ty[e];return n||Te(0,e),n}function Tv(e,n){n&&(TO("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=n)}function Tb(e){Tx(e),e.drafts_.forEach(TS),e.drafts_=null}function Tx(e){e===ni&&(ni=e.parent_)}function Tw(e){return ni={drafts_:[],parent_:ni,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function TS(e){let n=e[E8];0===n.type_||1===n.type_?n.revoke_():n.revoked_=!0}function T_(e,n){n.unfinalizedDrafts_=n.drafts_.length;let r=n.drafts_[0];return void 0!==e&&e!==r?(r[E8].modified_&&(Tb(n),Te(4)),Tr(e)&&(e=Tk(n,e),n.parent_||TE(n,e)),n.patches_&&TO("Patches").generateReplacementPatches_(r[E8].base_,e,n.patches_,n.inversePatches_)):e=Tk(n,r,[]),Tb(n),n.patches_&&n.patchListener_(n.patches_,n.inversePatches_),e!==E9?e:void 0}function Tk(e,n,r){if(Tm(n))return n;let i=n[E8];if(!i)return To(n,(s,o)=>TC(e,i,n,s,o,r)),n;if(i.scope_!==e)return n;if(!i.modified_)return TE(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;let n=i.copy_,s=n,o=!1;3===i.type_&&(s=new Set(n),n.clear(),o=!0),To(s,(s,a)=>TC(e,i,n,s,a,r,o)),TE(e,n,!1),r&&e.patches_&&TO("Patches").generatePatches_(i,r,e.patches_,e.inversePatches_)}return i.copy_}function TC(e,n,r,i,s,o,a){if(Tn(s)){let a=Tk(e,s,o&&n&&3!==n.type_&&!Tl(n.assigned_,i)?o.concat(i):void 0);if(Th(r,i,a),!Tn(a))return;e.canAutoFreeze_=!1}else a&&r.add(s);if(Tr(s)&&!Tm(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Tk(e,s),(!n||!n.scope_.parent_)&&"symbol"!=typeof i&&Object.prototype.propertyIsEnumerable.call(r,i)&&TE(e,s)}}function TE(e,n,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Tf(n,r)}var TT={get(e,n){if(n===E8)return e;let r=Td(e);if(!Tl(r,n)){var i=e,s=r,o=n;let a=TM(s,o);return a?"value"in a?a.value:a.get?.call(i.draft_):void 0}let a=r[n];return e.finalized_||!Tr(a)?a:a===TA(e.base_,n)?(TD(e),e.copy_[n]=TI(a,e)):a},has:(e,n)=>n in Td(e),ownKeys:e=>Reflect.ownKeys(Td(e)),set(e,n,r){let i=TM(Td(e),n);if(i?.set)return i.set.call(e.draft_,r),!0;if(!e.modified_){let i=TA(Td(e),n),s=i?.[E8];if(s&&s.base_===r)return e.copy_[n]=r,e.assigned_[n]=!1,!0;if((r===i?0!==r||1/r==1/i:r!=r&&i!=i)&&(void 0!==r||Tl(e.base_,n)))return!0;TD(e),TN(e)}return!!(e.copy_[n]===r&&(void 0!==r||n in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[n]))||(e.copy_[n]=r,e.assigned_[n]=!0,!0)},deleteProperty:(e,n)=>(void 0!==TA(e.base_,n)||n in e.base_?(e.assigned_[n]=!1,TD(e),TN(e)):delete e.assigned_[n],e.copy_&&delete e.copy_[n],!0),getOwnPropertyDescriptor(e,n){let r=Td(e),i=Reflect.getOwnPropertyDescriptor(r,n);return i?{writable:!0,configurable:1!==e.type_||"length"!==n,enumerable:i.enumerable,value:r[n]}:i},defineProperty(){Te(11)},getPrototypeOf:e=>Tt(e.base_),setPrototypeOf(){Te(12)}},TP={};function TA(e,n){let r=e[E8];return(r?Td(r):e)[n]}function TM(e,n){if(!(n in e))return;let r=Tt(e);for(;r;){let e=Object.getOwnPropertyDescriptor(r,n);if(e)return e;r=Tt(r)}}function TN(e){!e.modified_&&(e.modified_=!0,e.parent_&&TN(e.parent_))}function TD(e){e.copy_||(e.copy_=Tp(e.base_,e.scope_.immer_.useStrictShallowCopy_))}function TI(e,n){let r=Tc(e)?TO("MapSet").proxyMap_(e,n):Tu(e)?TO("MapSet").proxySet_(e,n):function(e,n){let r=Array.isArray(e),i={type_:+!!r,scope_:n?n.scope_:ni,modified_:!1,finalized_:!1,assigned_:{},parent_:n,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},s=i,o=TT;r&&(s=[i],o=TP);let{revoke:a,proxy:l}=Proxy.revocable(s,o);return i.draft_=l,i.revoke_=a,l}(e,n);return(n?n.scope_:ni).drafts_.push(r),r}To(TT,(e,n)=>{TP[e]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}}),TP.deleteProperty=function(e,n){return TP.set.call(this,e,n,void 0)},TP.set=function(e,n,r){return TT.set.call(this,e[0],n,r,e[0])};var T$=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{let i;if("function"==typeof e&&"function"!=typeof n){let r=n;n=e;let i=this;return function(e=r,...s){return i.produce(e,e=>n.call(this,e,...s))}}if("function"!=typeof n&&Te(6),void 0!==r&&"function"!=typeof r&&Te(7),Tr(e)){let s=Tw(this),o=TI(e,void 0),a=!0;try{i=n(o),a=!1}finally{a?Tb(s):Tx(s)}return Tv(s,r),T_(i,s)}if(e&&"object"==typeof e)Te(1,e);else{if(void 0===(i=n(e))&&(i=e),i===E9&&(i=void 0),this.autoFreeze_&&Tf(i,!0),r){let n=[],s=[];TO("Patches").generateReplacementPatches_(e,i,n,s),r(n,s)}return i}},this.produceWithPatches=(e,n)=>{let r,i;return"function"==typeof e?(n,...r)=>this.produceWithPatches(n,n=>e(n,...r)):[this.produce(e,n,(e,n)=>{r=e,i=n}),r,i]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){var n;Tr(e)||Te(8),Tn(e)&&(Tn(n=e)||Te(10,n),e=function e(n){let r;if(!Tr(n)||Tm(n))return n;let i=n[E8];if(i){if(!i.modified_)return i.base_;i.finalized_=!0,r=Tp(n,i.scope_.immer_.useStrictShallowCopy_)}else r=Tp(n,!0);return To(r,(n,i)=>{Th(r,n,e(i))}),i&&(i.finalized_=!1),r}(n));let r=Tw(this),i=TI(e,void 0);return i[E8].isManual_=!0,Tx(r),i}finishDraft(e,n){let r=e&&e[E8];r&&r.isManual_||Te(9);let{scope_:i}=r;return Tv(i,n),T_(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){let i=n[r];if(0===i.path.length&&"replace"===i.op){e=i.value;break}}r>-1&&(n=n.slice(r+1));let i=TO("Patches").applyPatches_;return Tn(e)?i(e,n):this.produce(e,e=>i(e,n))}},TR=T$.produce;T$.produceWithPatches.bind(T$),T$.setAutoFreeze.bind(T$),T$.setUseStrictShallowCopy.bind(T$),T$.applyPatches.bind(T$),T$.createDraft.bind(T$),T$.finishDraft.bind(T$);let TL=(0,nu.T)(function(e){return nl.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),nl.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 5.07c-.8.47-1.8.46-2.6 0l-.24-.15a1.4 1.4 0 0 0-1.82.29c-.64.82-1.16 1.73-1.55 2.7a1.4 1.4 0 0 0 .66 1.71l.24.14a2.57 2.57 0 0 1 0 4.48l-.24.14a1.4 1.4 0 0 0-.66 1.72 11.1 11.1 0 0 0 1.55 2.69 1.4 1.4 0 0 0 1.82.3l.25-.15a2.57 2.57 0 0 1 3.88 2.24v.28c-.01.7.46 1.33 1.16 1.43a11 11 0 0 0 3.1 0 1.4 1.4 0 0 0 1.17-1.43v-.28a2.57 2.57 0 0 1 3.87-2.24l.25.14c.6.36 1.38.26 1.82-.29.64-.82 1.16-1.73 1.55-2.7a1.4 1.4 0 0 0-.66-1.71l-.24-.14a2.57 2.57 0 0 1 0-4.48l.24-.14a1.4 1.4 0 0 0 .66-1.72 11.08 11.08 0 0 0-1.55-2.69 1.4 1.4 0 0 0-1.82-.3l-.25.15a2.57 2.57 0 0 1-3.88-2.24v-.28c.01-.7-.46-1.33-1.16-1.43a10.99 10.99 0 0 0-3.1 0c-.7.1-1.17.72-1.17 1.43v.28C9.3 3.75 8.8 4.61 8 5.07Zm6 10.4a4 4 0 1 0-4-6.93 4 4 0 0 0 4 6.92Z",fill:"currentColor"}))},"setting"),TQ=(0,nu.T)(function(e){return nl.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),nl.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.38 2a1 1 0 0 0-.9.55L7.02 5.5H3a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1v-1a1 1 0 0 0-1-1h-4L15.5 2.55a1 1 0 0 0-.9-.55H9.39Zm5.48 3.5-.72-1.25a.5.5 0 0 0-.43-.25h-3.42a.5.5 0 0 0-.43.25L9.14 5.5h5.72Zm3.86 4.5H5.28a1 1 0 0 0-.97 1.24l2.12 8.49A3 3 0 0 0 9.34 22h5.32a3 3 0 0 0 2.9-2.27l2.13-8.49a1 1 0 0 0-.97-1.24Z",fill:"currentColor"}))},"delete");var Tj=r(36833),TV=[lX([aK(),pU(),aC.of([...fY,...p7]),rU.tabSize.of(2),cX.of(" ".repeat(2)),aO.lineWrapping,[rS.low(aO.theme({"&.cm-focused":{outline:"none"},"& .cm-content":{cursor:"text"},"& .cm-placeholder":{wordBreak:"break-all"}}))],gu]),lF("fontSize",gn),lF("placeholder",gr),lF("readOnly",gi),lF("editable",gs),lF("inputRules",dI),lF("contentAttributes",e=>aO.contentAttributes.of(e??{})),lq("change",gh),lq("focus",gd),lq("blur",gp),lq("selectionChange",gf),lq("viewUpdate",e=>e),lW("compositionstart"),lW("compositionend"),lW("mousedown"),lW("mouseup"),lX(f3),lZ("disableKeybindings",f6),lZ("getView",({view:e})=>()=>e),lZ("matchBefore",({view:e})=>n=>{let r=e.state.selection.main.head,i=e.state.doc.lineAt(r),s=Math.max(i.from,r-250),o=i.text.slice(s-i.from,r-i.from);if(n instanceof RegExp){let e=o.search(function(e,n){let{source:r}=e,i=n&&"^"!==r[0],s="$"!==r[r.length-1];return i||s?RegExp(`${i?"^":""}(?:${r})${s?"$":""}`,e.flags??(e.ignoreCase?"i":"")):e}(n,!1));return e<0?null:{from:s+e,to:r,text:o.slice(e)}}return null}),lZ("updateWholeDecorations",({view:e})=>()=>{dg(e)}),lZ("getValue",fG),lZ("setValue",fH),lZ("focus",fK),lZ("blur",fJ),lZ("isFocused",({view:e})=>()=>e.hasFocus),lZ("getCursorPosition",f1),lZ("setCursorPosition",f0),lZ("getSelection",f9),lZ("replaceTextByRange",f2)];[...TV,lX([uw(u_,{fallback:!0}),[bg,bc]])];let Tz=["{%","endraw","%}"],TB=new u5(e=>{let n=Tz[0].charCodeAt(0),r=0,i=!1;for(;!(e.next<0);)if(e.next===n){let n=0,s=0;for(;s<Tz.length;s++){let r=Tz[s];if(function(e,n,r){let i=0,s=0;for(;;)if(e.peek(n+i)===r.charCodeAt(i)&&s<r.length)i++,s++;else break;return s===r.length}(e,n,r)){if(n+=r.length,s<Tz.length-1){let r=TZ(e,n);n+=r}}else break}if(s===Tz.length){i=!0;break}e.advance(),r++}else e.advance(),r++;(i||!(e.next<0))&&r>0&&e.acceptToken(4)}),TF=/^\s+$/;function TZ(e,n){let r=n,i=0;for(;;){let n=String.fromCharCode(e.peek(r));if(TF.test(n))r++,i++;else break}return i}let Tq=TX(39),TW=TX(34);function TX(e){let n=39===e?31:33,r=39===e?30:32;return new u5(i=>{let s=0;for(;!(i.next<0);){if(92===i.next&&92===i.peek(1)||92===i.next&&i.peek(1)===e){i.advance(2),s+=2;continue}if(i.next===e||37===i.next&&125===i.peek(1)||10===i.next||13===i.next)break;s++,i.advance()}s>0&&i.acceptToken(r),i.next===e&&i.advance(),i.acceptToken(n)})}let TU=new u5(e=>{if(45===e.next||43===e.next){let n=TZ(e,1);if(125===e.peek(n+1)&&125===e.peek(n+2)){e.advance(n+3),e.acceptToken(1);return}}if(125===e.next&&125===e.peek(1)){e.advance(2),e.acceptToken(1);return}if(123===e.next&&35===e.peek(1)||e.next<0)return void e.acceptToken(1)}),TY=new u5(e=>{if(45===e.next||43===e.next){let n=TZ(e,1);if(37===e.peek(n+1)&&125===e.peek(n+2)){e.advance(n+3),e.acceptToken(2);return}}if(37===e.next&&125===e.peek(1)){e.advance(2),e.acceptToken(2);return}if(123===e.next&&35===e.peek(1)||e.next<0)return void e.acceptToken(2)}),TG=new u5(e=>{35===e.next&&125===e.peek(1)?(e.advance(2),e.acceptToken(3)):123===e.next&&35===e.peek(1)&&e.acceptToken(3)}),TH=new u5(e=>{let n=0,r=0;for(;;){let i=e.peek(n);if(i<0)break;if(123!==i)n++,r++;else if(123===i&&123!==e.peek(n+1)&&35!==e.peek(n+1)&&37!==e.peek(n+1))n++,r++;else if(123===i&&123===e.peek(n+1)&&(123===e.peek(n+2)||35===e.peek(n+2)||37===e.peek(n+2)))n++,r++;else break}r>0&&(e.advance(r),e.acceptToken(5))}),TK=cl({"JinjaExpressionStart JinjaExpressionEnd JinjaStatementStart JinjaStatementEnd":cT.angleBracket,"JinjaCommentStart JinjaCommentContent JinjaCommentEnd":cT.blockComment}),TJ={__proto__:null,if:76,elif:78,else:80,endif:82,is:84,not:86,set:88,for:90,in:92,endfor:94,extends:96,macro:98,endmacro:100,block:102,endblock:104,call:106,endcall:108,include:110,from:112,import:114,as:116,raw:42,endraw:46},T0=da.deserialize({version:14,states:"&`QYO%WOOOhO&zO'#CcO#jQ#xO'#CfO#qO$fO'#CnO%pQ,^O'#CtOOO!b'#DR'#DROOO!b'#Cu'#CuQYO%WOOOOO`'#Cv'#CvO%zO&zO,58}OOO!b,58},58}O&SOPO'#CjO&[OQO'#CjOOQS'#Cw'#CwO&dQ#xO,59QOOO!b,59Q,59QOOQ['#Ch'#ChO&kQ7[O'#CwOOO!b,59Y,59YO#tO#tO,59YO&pQ#tO'#CrOOQW'#Cx'#CxO&uQ,^O,59`OOO!b,59`,59`O&|Q#|O,59ZOOO!b-E6s-E6sOOO`-E6t-E6tOOO!b1G.i1G.iOOQ[,59U,59UO'ROPO,59UO'WOQO,59UOOQS-E6u-E6uOOO!b1G.l1G.lOOQS,59c,59cOOO!b1G.t1G.tO']Q#|O,59^OOQW-E6v-E6vOOO!b1G.z1G.zOOOp1G.u1G.uOOQ[1G.p1G.pOOO!b1G.x1G.x",stateData:"'m~OsOStOS~OTTOWPOZQOdSO~ORYOXWO~O]]O_]Oa]Ov`Ow`Ox`Oy`Oz`O{`O|`O}`O!O`O!P`O!Q`O!R`O!S`O!T`O!U`O!V`O!W`O!X`O!Y`O!Z`O![`O!]ZO!^[O!_aO!`]O~OP_O~PpOScOddO~O]eO_eOv`Ow`Ox`Oy`Oz`O{`O|`O}`O!O`O!P`O!Q`O!R`O!S`O!T`O!U`O!V`O!W`O!X`O!Y`O!Z`O![`O!]ZO!^[O!`eO!aeO~OQgOehO~P#yORkOXWO~OnmOolO~OpnOqlO~OPpO~PpO`qO~OgsO~OQuO~P#yOQvO~OowO~OqwO~OQxO~Os`dt]_!`!aa]~",goto:"!{vPPPPPPPwPPwP{P{PPPw!TPP!XPw!_!e!k!qPPPPPPPP!wTTOVS]Q^TeSfTROVQbRRrcQVORiVQXPRjXQ^QRo^QfSRtfTUOV",nodeNames:"⚠ JinjaExpressionEnd JinjaStatementEnd JinjaCommentEnd RawText JinjaText JinjaProgram JinjaComment JinjaCommentStart JinjaCommentContent JinjaExpression JinjaExpressionStart JinjaKeyword JinjaIdentifier JinjaStringLiteral JinjaNumberLiteral JinjaFilterName JinjaExpressionUnknownContent JinjaRawBlock JinjaRawOpenStatement JinjaStatementStart JinjaKeyword JinjaRawCloseStatement JinjaKeyword JinjaStatement",maxTerm:63,propSources:[TK],skippedNodes:[0],repeatNodeCount:4,tokenData:"!)f_R!^OX$}XY;_YZ>QZ[;_[]$}]^?e^p$}pq;_qrAOrsBcst'|tuCPuvEUvw$}wxFZxyAOyzAOz{AO{|Fw|}AO}!OFw!O!PGv!P!QAO!Q![KO![!]AO!]!^$}!^!_AO!_!`AO!`!aAO!a!bAO!b!c$}!c!}CP!}#OAO#O#P$}#P#QAO#Q#RAO#R#SCP#S#T$}#T#oCP#o#pLr#p#q!$}#q#r8f#r#sAO#s$f$}$f$g;_$g#BYCP#BY#BZ!&Y#BZ$ISCP$IS$I_!&Y$I_$JTCP$JT$JU!&Y$JU$KVCP$KV$KW!&Y$KW&FUCP&FU&FV!&Y&FV;'SCP;'S;=`EO<%l?HTCP?HT?HU!&Y?HUOCPV%WbXQ!aSaPOr$}rs&`st'|tu$}uv)]vw$}wx&`x{$}{|0}|}$}}!O0}!O#o$}#o#p-k#p#q*`#q#r8f#r;'S$};'S;=`5Q<%lO$}Q&eVXQOs&`st&zt#o&`#o#p'g#p;'S&`;'S;=`'a<%lO&`Q&}UO#q&`#r;'S&`;'S;=`'a<%l~&`~O&`~~&`Q'dP;=`<%l&`Q'jUOs&`t;'S&`;'S;=`'a<%l~&`~O&`~~&`V(Tb!aSaPOr$}rs&`su$}uv)]vw$}wx&`x{$}{|0}|}$}}!O0}!O#o$}#o#q*`#q#r5W#r;'S$};'S;=`5Q<%l~$}~O$}~~&`V)d^XQaPOr$}rs*`st'|tw$}wx*`x#o$}#o#p-k#p#q*`#q#r0V#r;'S$};'S;=`5Q<%l~$}~O$}~~.rU*g`XQ!aSOr*`rs&`st+itu*`uv,svw*`wx&`x{*`{|&`|}*`}!O&`!O#o*`#o#p-k#p;'S*`;'S;=`0P<%lO*`U+na!aSOr*`rs&`su*`uv,svw*`wx&`x{*`{|&`|}*`}!O&`!O#q*`#q#r.r#r;'S*`;'S;=`0P<%l~*`~O*`~~&`U,xZXQOs*`st+it#o*`#o#p-k#p#q*`#q#r&`#r;'S*`;'S;=`0P<%l~*`~O*`~~.rU-p`!aSOr*`rs&`st.rtu*`uv,svw*`wx&`x{*`{|&`|}*`}!O&`!O;'S*`;'S;=`0P<%l~*`~O*`~~&`S.wX!aSOr.rsu.ruv/dvw.rx{.r|}.r!O;'S.r;'S;=`/y<%lO.rS/gUO#q.r#r;'S.r;'S;=`/y<%l~.r~O.r~~.rS/|P;=`<%l.rU0SP;=`<%l*`R0[ZXQOs0}st1zt#o0}#o#p4S#p#q0}#q#r&`#r;'S0};'S;=`3|<%l~0}~O0}~~3[R1U[XQaPOr0}rs&`st1ztw0}wx&`x#o0}#o#p'g#p#q&`#q#r0V#r;'S0};'S;=`3|<%lO0}R2P[aPOr0}rs&`sw0}wx&`x#o0}#o#q&`#q#r2u#r;'S0};'S;=`3|<%l~0}~O0}~~&`P2xUO#q3[#r;'S3[;'S;=`3v<%l~3[~O3[~~3[P3aVaPOr3[sw3[x#o3[#q#r2u#r;'S3[;'S;=`3v<%lO3[P3yP;=`<%l3[R4PP;=`<%l0}R4X]aPOr0}rs&`st3[tw0}wx&`x#o0}#o#q&`#q#r0V#r;'S0};'S;=`3|<%l~0}~O0}~~&`V5TP;=`<%l$}T5]a!aSOr6brs3[su6buv7evw6bwx3[x{6b{|3[|}6b}!O3[!O#q6b#q#r.r#r;'S6b;'S;=`8`<%l~6b~O6b~~3[T6i^!aSaPOr6bsu6buv7evw6bx{6b{|3[|}6b}!O3[!O#o6b#o#q.r#q#r5W#r;'S6b;'S;=`8`<%lO6bT7j[aPOr6brs.rsw6bwx.rx#o6b#o#q.r#q#r2u#r;'S6b;'S;=`8`<%l~6b~O6b~~.rT8cP;=`<%l6bV8mdXQ!aSOr$}rs0}st'|tu$}uv)]vw$}wx0}x{$}{|0}|}$}}!O0}!O#o$}#o#p9{#p#q$}#q#r*`#r;'S$};'S;=`5Q<%l~$}~O$}~~3[V:Sc!aSaPOr$}rs&`st6btu$}uv)]vw$}wx&`x{$}{|0}|}$}}!O0}!O#o$}#o#q*`#q#r8f#r;'S$};'S;=`5Q<%l~$}~O$}~~&`_;jvXQs]!aSaPOX$}XY;_YZ$}Z[;_[p$}pq;_qr$}rs&`st'|tu$}uv)]vw$}wx&`x{$}{|0}|}$}}!O0}!O#o$}#o#p-k#p#q*`#q#r8f#r$f$}$f$g;_$g#BY$}#BY#BZ;_#BZ$IS$}$IS$I_;_$I_$JT$}$JT$JU;_$JU$KV$}$KV$KW;_$KW&FU$}&FU&FV;_&FV;'S$};'S;=`5Q<%l?HT$}?HT?HU;_?HUO$}_>]bXQt]!aSaPOr$}rs&`st'|tu$}uv)]vw$}wx&`x{$}{|0}|}$}}!O0}!O#o$}#o#p-k#p#q*`#q#r8f#r;'S$};'S;=`5Q<%lO$}_?pdXQt]!aSaPOY$}YZ>QZr$}rs&`st'|tu$}uv)]vw$}wx&`x{$}{|0}|}$}}!O0}!O#o$}#o#p-k#p#q*`#q#r8f#r;'S$};'S;=`5Q<%lO$}VAZbXQ!`T!aSaPOr$}rs&`st'|tu$}uv)]vw$}wx&`x{$}{|0}|}$}}!O0}!O#o$}#o#p-k#p#q*`#q#r8f#r;'S$};'S;=`5Q<%lO$}VBjV!^TXQOs&`st&zt#o&`#o#p'g#p;'S&`;'S;=`'a<%lO&`_C^jXQ`W]T!aSaPOr$}rs&`st'|tuCPuv)]vw$}wx&`x{$}{|0}|}$}}!O0}!O!Q$}!Q![CP![!c$}!c!}CP!}#R$}#R#SCP#S#T$}#T#oCP#o#p-k#p#q*`#q#r8f#r$g$}$g;'SCP;'S;=`EO<%lOCP_ERP;=`<%lCPVE_^XQ!`TaPOr$}rs*`st'|tw$}wx*`x#o$}#o#p-k#p#q*`#q#r0V#r;'S$};'S;=`5Q<%l~$}~O$}~~.rVFbV!]TXQOs&`st&zt#o&`#o#p'g#p;'S&`;'S;=`'a<%lO&`VGQ[XQ!`TaPOr0}rs&`st1ztw0}wx&`x#o0}#o#p'g#p#q&`#q#r0V#r;'S0};'S;=`3|<%lO0}VHPdXQ!aSaPOr$}rs&`st'|tu$}uv)]vw$}wx&`x{$}{|0}|}$}}!O0}!O!Q$}!Q![I_![#o$}#o#p-k#p#q*`#q#r8f#r;'S$};'S;=`5Q<%lO$}VIjfXQ_T!aSaPOr$}rs&`st'|tu$}uv)]vw$}wx&`x{$}{|0}|}$}}!O0}!O!Q$}!Q![I_![#R$}#R#SI_#S#o$}#o#p-k#p#q*`#q#r8f#r;'S$};'S;=`5Q<%lO$}VKZgXQ_T!aSaPOr$}rs&`st'|tu$}uv)]vw$}wx&`x{$}{|0}|}$}}!O0}!O!PI_!P!Q$}!Q![KO![#R$}#R#SKO#S#o$}#o#p-k#p#q*`#q#r8f#r;'S$};'S;=`5Q<%lO$}VLwb!aSOr*`rs&`stNPtu*`uvNsvw*`wx&`x{*`{|&`|}*`}!O&`!O#o*`#o#p!#U#p;'S*`;'S;=`0P<%l~*`~O*`~~&`TNWXWP!aSOr.rsu.ruv/dvw.rx{.r|}.r!O;'S.r;'S;=`/y<%lO.rVNz_XQdPOs*`st+it{*`{|! y|}*`}!O! y!O#o*`#o#p-k#p#q*`#q#r&`#r;'S*`;'S;=`0P<%l~*`~O*`~~.rV!!S`XQdP!aSOr*`rs&`st+itu*`uv,svw*`wx&`x{*`{|&`|}*`}!O&`!O#o*`#o#p-k#p;'S*`;'S;=`0P<%lO*`V!#_`XQZP!aSOr*`rs&`st+itu*`uv,svw*`wx&`x{*`{|!$a|}*`}!O!$a!O#o*`#o#p-k#p;'S*`;'S;=`0P<%lO*`R!$hVXQZPOs&`st&zt#o&`#o#p'g#p;'S&`;'S;=`'a<%lO&`V!%W`!_PXQ!aSOr*`rs&`st+itu*`uv,svw*`wx&`x{*`{|&`|}*`}!O&`!O#o*`#o#p-k#p;'S*`;'S;=`0P<%lO*`_!&i}XQs]`W]T!aSaPOX$}XY;_YZ$}Z[;_[p$}pq;_qr$}rs&`st'|tuCPuv)]vw$}wx&`x{$}{|0}|}$}}!O0}!O!Q$}!Q![CP![!c$}!c!}CP!}#R$}#R#SCP#S#T$}#T#oCP#o#p-k#p#q*`#q#r8f#r$f$}$f$g;_$g#BYCP#BY#BZ!&Y#BZ$ISCP$IS$I_!&Y$I_$JTCP$JT$JU!&Y$JU$KVCP$KV$KW!&Y$KW&FUCP&FU&FV!&Y&FV;'SCP;'S;=`EO<%l?HTCP?HT?HU!&Y?HUOCP",tokenizers:[Tq,TW,TU,TY,TG,TB,TH,0,1,2,3],topRules:{JinjaProgram:[0,6]},specialized:[{term:13,get:e=>TJ[e]||-1}],tokenPrec:294});class T1{static create(e,n,r,i,s){return new T1(e,n,r,i+(i<<8)+e+(n<<4)|0,s,[],[])}constructor(e,n,r,i,s,o,a){this.type=e,this.value=n,this.from=r,this.hash=i,this.end=s,this.children=o,this.positions=a,this.hashProp=[[hk.contextHash,i]]}addChild(e,n){e.prop(hk.contextHash)!=this.hash&&(e=new hN(e.type,e.children,e.positions,e.length,this.hashProp)),this.children.push(e),this.positions.push(n)}toTree(e,n=this.end){let r=this.children.length-1;return r>=0&&(n=Math.max(n,this.positions[r]+this.children[r].length+this.from)),new hN(e.types[this.type],this.children,this.positions,n-this.from).balance({makeTree:(e,n,r)=>new hN(hT.none,e,n,r,this.hashProp)})}}(eT=ns||(ns={}))[eT.Document=1]="Document",eT[eT.CodeBlock=2]="CodeBlock",eT[eT.FencedCode=3]="FencedCode",eT[eT.Blockquote=4]="Blockquote",eT[eT.HorizontalRule=5]="HorizontalRule",eT[eT.BulletList=6]="BulletList",eT[eT.OrderedList=7]="OrderedList",eT[eT.ListItem=8]="ListItem",eT[eT.ATXHeading1=9]="ATXHeading1",eT[eT.ATXHeading2=10]="ATXHeading2",eT[eT.ATXHeading3=11]="ATXHeading3",eT[eT.ATXHeading4=12]="ATXHeading4",eT[eT.ATXHeading5=13]="ATXHeading5",eT[eT.ATXHeading6=14]="ATXHeading6",eT[eT.SetextHeading1=15]="SetextHeading1",eT[eT.SetextHeading2=16]="SetextHeading2",eT[eT.HTMLBlock=17]="HTMLBlock",eT[eT.LinkReference=18]="LinkReference",eT[eT.Paragraph=19]="Paragraph",eT[eT.CommentBlock=20]="CommentBlock",eT[eT.ProcessingInstructionBlock=21]="ProcessingInstructionBlock",eT[eT.Escape=22]="Escape",eT[eT.Entity=23]="Entity",eT[eT.HardBreak=24]="HardBreak",eT[eT.Emphasis=25]="Emphasis",eT[eT.StrongEmphasis=26]="StrongEmphasis",eT[eT.Link=27]="Link",eT[eT.Image=28]="Image",eT[eT.InlineCode=29]="InlineCode",eT[eT.HTMLTag=30]="HTMLTag",eT[eT.Comment=31]="Comment",eT[eT.ProcessingInstruction=32]="ProcessingInstruction",eT[eT.Autolink=33]="Autolink",eT[eT.HeaderMark=34]="HeaderMark",eT[eT.QuoteMark=35]="QuoteMark",eT[eT.ListMark=36]="ListMark",eT[eT.LinkMark=37]="LinkMark",eT[eT.EmphasisMark=38]="EmphasisMark",eT[eT.CodeMark=39]="CodeMark",eT[eT.CodeText=40]="CodeText",eT[eT.CodeInfo=41]="CodeInfo",eT[eT.LinkTitle=42]="LinkTitle",eT[eT.LinkLabel=43]="LinkLabel",eT[eT.URL=44]="URL";class T2{constructor(e,n){this.start=e,this.content=n,this.marks=[],this.parsers=[]}}class T5{constructor(){this.text="",this.baseIndent=0,this.basePos=0,this.depth=0,this.markers=[],this.pos=0,this.indent=0,this.next=-1}forward(){this.basePos>this.pos&&this.forwardInner()}forwardInner(){let e=this.skipSpace(this.basePos);this.indent=this.countIndent(e,this.pos,this.indent),this.pos=e,this.next=e==this.text.length?-1:this.text.charCodeAt(e)}skipSpace(e){return T9(this.text,e)}reset(e){for(this.text=e,this.baseIndent=this.basePos=this.pos=this.indent=0,this.forwardInner(),this.depth=1;this.markers.length;)this.markers.pop()}moveBase(e){this.basePos=e,this.baseIndent=this.countIndent(e,this.pos,this.indent)}moveBaseColumn(e){this.baseIndent=e,this.basePos=this.findColumn(e)}addMarker(e){this.markers.push(e)}countIndent(e,n=0,r=0){for(let i=n;i<e;i++)r+=9==this.text.charCodeAt(i)?4-r%4:1;return r}findColumn(e){let n=0;for(let r=0;n<this.text.length&&r<e;n++)r+=9==this.text.charCodeAt(n)?4-r%4:1;return n}scrub(){if(!this.baseIndent)return this.text;let e="";for(let n=0;n<this.basePos;n++)e+=" ";return e+this.text.slice(this.basePos)}}function T4(e,n,r){if(r.pos==r.text.length||e!=n.block&&r.indent>=n.stack[r.depth+1].value+r.baseIndent)return!0;if(r.indent>=r.baseIndent+4)return!1;let i=(e.type==ns.OrderedList?Pi:Pr)(r,n,!1);return i>0&&(e.type!=ns.BulletList||0>Pt(r,n,!1))&&r.text.charCodeAt(r.pos+i-1)==e.value}let T3={[ns.Blockquote]:(e,n,r)=>62==r.next&&(r.markers.push(PP(ns.QuoteMark,n.lineStart+r.pos,n.lineStart+r.pos+1)),r.moveBase(r.pos+(T6(r.text.charCodeAt(r.pos+1))?2:1)),e.end=n.lineStart+r.text.length,!0),[ns.ListItem]:(e,n,r)=>(!(r.indent<r.baseIndent+e.value)||!(r.next>-1))&&(r.moveBaseColumn(r.baseIndent+e.value),!0),[ns.OrderedList]:T4,[ns.BulletList]:T4,[ns.Document]:()=>!0};function T6(e){return 32==e||9==e||10==e||13==e}function T9(e,n=0){for(;n<e.length&&T6(e.charCodeAt(n));)n++;return n}function T7(e,n,r){for(;n>r&&T6(e.charCodeAt(n-1));)n--;return n}function T8(e){if(96!=e.next&&126!=e.next)return -1;let n=e.pos+1;for(;n<e.text.length&&e.text.charCodeAt(n)==e.next;)n++;if(n<e.pos+3)return -1;if(96==e.next){for(let r=n;r<e.text.length;r++)if(96==e.text.charCodeAt(r))return -1}return n}function Pe(e){return 62!=e.next?-1:32==e.text.charCodeAt(e.pos+1)?2:1}function Pt(e,n,r){if(42!=e.next&&45!=e.next&&95!=e.next)return -1;let i=1;for(let n=e.pos+1;n<e.text.length;n++){let r=e.text.charCodeAt(n);if(r==e.next)i++;else if(!T6(r))return -1}return r&&45==e.next&&Po(e)>-1&&e.depth==n.stack.length&&n.parser.leafBlockParsers.indexOf(PO.SetextHeading)>-1||i<3?-1:1}function Pn(e,n){for(let r=e.stack.length-1;r>=0;r--)if(e.stack[r].type==n)return!0;return!1}function Pr(e,n,r){return(45==e.next||43==e.next||42==e.next)&&(e.pos==e.text.length-1||T6(e.text.charCodeAt(e.pos+1)))&&(!r||Pn(n,ns.BulletList)||e.skipSpace(e.pos+2)<e.text.length)?1:-1}function Pi(e,n,r){let i=e.pos,s=e.next;for(;s>=48&&s<=57;){if(++i==e.text.length)return -1;s=e.text.charCodeAt(i)}return i==e.pos||i>e.pos+9||46!=s&&41!=s||i<e.text.length-1&&!T6(e.text.charCodeAt(i+1))||r&&!Pn(n,ns.OrderedList)&&(e.skipSpace(i+1)==e.text.length||i>e.pos+1||49!=e.next)?-1:i+1-e.pos}function Ps(e){if(35!=e.next)return -1;let n=e.pos+1;for(;n<e.text.length&&35==e.text.charCodeAt(n);)n++;if(n<e.text.length&&32!=e.text.charCodeAt(n))return -1;let r=n-e.pos;return r>6?-1:r}function Po(e){if(45!=e.next&&61!=e.next||e.indent>=e.baseIndent+4)return -1;let n=e.pos+1;for(;n<e.text.length&&e.text.charCodeAt(n)==e.next;)n++;let r=n;for(;n<e.text.length&&T6(e.text.charCodeAt(n));)n++;return n==e.text.length?r:-1}let Pa=/^[ \t]*$/,Pl=/-->/,Ph=/\?>/,Pc=[[/^<(?:script|pre|style)(?:\s|>|$)/i,/<\/(?:script|pre|style)>/i],[/^\s*<!--/,Pl],[/^\s*<\?/,Ph],[/^\s*<![A-Z]/,/>/],[/^\s*<!\[CDATA\[/,/\]\]>/],[/^\s*<\/?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|\/?>|$)/i,Pa],[/^\s*(?:<\/[a-z][\w-]*\s*>|<[a-z][\w-]*(\s+[a-z:_][\w-.]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*>)\s*$/i,Pa]];function Pu(e,n,r){if(60!=e.next)return -1;let i=e.text.slice(e.pos);for(let e=0,n=Pc.length-!!r;e<n;e++)if(Pc[e][0].test(i))return e;return -1}function Pd(e,n){let r=e.countIndent(n,e.pos,e.indent),i=e.countIndent(e.skipSpace(n),n,r);return i>=r+5?r+1:i}function Pp(e,n,r){let i=e.length-1;i>=0&&e[i].to==n&&e[i].type==ns.CodeText?e[i].to=r:e.push(PP(ns.CodeText,n,r))}let Pf={LinkReference:void 0,IndentedCode(e,n){let r=n.baseIndent+4;if(n.indent<r)return!1;let i=n.findColumn(r),s=e.lineStart+i,o=e.lineStart+n.text.length,a=[],l=[];for(Pp(a,s,o);e.nextLine()&&n.depth>=e.stack.length;)if(n.pos==n.text.length)for(let r of(Pp(l,e.lineStart-1,e.lineStart),n.markers))l.push(r);else if(n.indent<r)break;else{if(l.length){for(let e of l)e.type==ns.CodeText?Pp(a,e.from,e.to):a.push(e);l=[]}for(let r of(Pp(a,e.lineStart-1,e.lineStart),n.markers))a.push(r);o=e.lineStart+n.text.length;let r=e.lineStart+n.findColumn(n.baseIndent+4);r<o&&Pp(a,r,o)}return l.length&&(l=l.filter(e=>e.type!=ns.CodeText)).length&&(n.markers=l.concat(n.markers)),e.addNode(e.buffer.writeElements(a,-s).finish(ns.CodeBlock,o-s),s),!0},FencedCode(e,n){let r=T8(n);if(r<0)return!1;let i=e.lineStart+n.pos,s=n.next,o=r-n.pos,a=n.skipSpace(r),l=T7(n.text,n.text.length,a),h=[PP(ns.CodeMark,i,i+o)];a<l&&h.push(PP(ns.CodeInfo,e.lineStart+a,e.lineStart+l));for(let r=!0;e.nextLine()&&n.depth>=e.stack.length;r=!1){let i=n.pos;if(n.indent-n.baseIndent<4)for(;i<n.text.length&&n.text.charCodeAt(i)==s;)i++;if(i-n.pos>=o&&n.skipSpace(i)==n.text.length){for(let e of n.markers)h.push(e);h.push(PP(ns.CodeMark,e.lineStart+n.pos,e.lineStart+i)),e.nextLine();break}{for(let i of(r||Pp(h,e.lineStart-1,e.lineStart),n.markers))h.push(i);let i=e.lineStart+n.basePos,s=e.lineStart+n.text.length;i<s&&Pp(h,i,s)}}return e.addNode(e.buffer.writeElements(h,-i).finish(ns.FencedCode,e.prevLineEnd()-i),i),!0},Blockquote(e,n){let r=Pe(n);return!(r<0)&&(e.startContext(ns.Blockquote,n.pos),e.addNode(ns.QuoteMark,e.lineStart+n.pos,e.lineStart+n.pos+1),n.moveBase(n.pos+r),null)},HorizontalRule(e,n){if(0>Pt(n,e,!1))return!1;let r=e.lineStart+n.pos;return e.nextLine(),e.addNode(ns.HorizontalRule,r),!0},BulletList(e,n){let r=Pr(n,e,!1);if(r<0)return!1;e.block.type!=ns.BulletList&&e.startContext(ns.BulletList,n.basePos,n.next);let i=Pd(n,n.pos+1);return e.startContext(ns.ListItem,n.basePos,i-n.baseIndent),e.addNode(ns.ListMark,e.lineStart+n.pos,e.lineStart+n.pos+r),n.moveBaseColumn(i),null},OrderedList(e,n){let r=Pi(n,e,!1);if(r<0)return!1;e.block.type!=ns.OrderedList&&e.startContext(ns.OrderedList,n.basePos,n.text.charCodeAt(n.pos+r-1));let i=Pd(n,n.pos+r);return e.startContext(ns.ListItem,n.basePos,i-n.baseIndent),e.addNode(ns.ListMark,e.lineStart+n.pos,e.lineStart+n.pos+r),n.moveBaseColumn(i),null},ATXHeading(e,n){let r=Ps(n);if(r<0)return!1;let i=n.pos,s=e.lineStart+i,o=T7(n.text,n.text.length,i),a=o;for(;a>i&&n.text.charCodeAt(a-1)==n.next;)a--;a!=o&&a!=i&&T6(n.text.charCodeAt(a-1))||(a=n.text.length);let l=e.buffer.write(ns.HeaderMark,0,r).writeElements(e.parser.parseInline(n.text.slice(i+r+1,a),s+r+1),-s);a<n.text.length&&l.write(ns.HeaderMark,a-i,o-i);let h=l.finish(ns.ATXHeading1-1+r,n.text.length-i);return e.nextLine(),e.addNode(h,s),!0},HTMLBlock(e,n){let r=Pu(n,e,!1);if(r<0)return!1;let i=e.lineStart+n.pos,s=Pc[r][1],o=[],a=s!=Pa;for(;!s.test(n.text)&&e.nextLine();){if(n.depth<e.stack.length){a=!1;break}for(let e of n.markers)o.push(e)}a&&e.nextLine();let l=s==Pl?ns.CommentBlock:s==Ph?ns.ProcessingInstructionBlock:ns.HTMLBlock,h=e.prevLineEnd();return e.addNode(e.buffer.writeElements(o,-i).finish(l,h-i),i),!0},SetextHeading:void 0};class Pg{constructor(e){this.stage=0,this.elts=[],this.pos=0,this.start=e.start,this.advance(e.content)}nextLine(e,n,r){if(-1==this.stage)return!1;let i=r.content+"\n"+n.scrub(),s=this.advance(i);return s>-1&&s<i.length&&this.complete(e,r,s)}finish(e,n){return(2==this.stage||3==this.stage)&&T9(n.content,this.pos)==n.content.length&&this.complete(e,n,n.content.length)}complete(e,n,r){return e.addLeafElement(n,PP(ns.LinkReference,this.start,this.start+r,this.elts)),!0}nextStage(e){return e?(this.pos=e.to-this.start,this.elts.push(e),this.stage++,!0):(!1===e&&(this.stage=-1),!1)}advance(e){for(;;)if(-1==this.stage)return -1;else if(0==this.stage){if(!this.nextStage(PV(e,this.pos,this.start,!0)))return -1;if(58!=e.charCodeAt(this.pos))return this.stage=-1;this.elts.push(PP(ns.LinkMark,this.pos+this.start,this.pos+this.start+1)),this.pos++}else if(1==this.stage){if(!this.nextStage(PQ(e,T9(e,this.pos),this.start)))return -1}else{if(2!=this.stage)return Pm(e,this.pos);let n=T9(e,this.pos),r=0;if(n>this.pos){let i=Pj(e,n,this.start);if(i){let n=Pm(e,i.to-this.start);n>0&&(this.nextStage(i),r=n)}}return r||(r=Pm(e,this.pos)),r>0&&r<e.length?r:-1}}}function Pm(e,n){for(;n<e.length;n++){let r=e.charCodeAt(n);if(10==r)break;if(!T6(r))return -1}return n}class Py{nextLine(e,n,r){let i=n.depth<e.stack.length?-1:Po(n),s=n.next;if(i<0)return!1;let o=PP(ns.HeaderMark,e.lineStart+n.pos,e.lineStart+i);return e.nextLine(),e.addLeafElement(r,PP(61==s?ns.SetextHeading1:ns.SetextHeading2,r.start,e.prevLineEnd(),[...e.parser.parseInline(r.content,r.start),o])),!0}finish(){return!1}}let PO={LinkReference:(e,n)=>91==n.content.charCodeAt(0)?new Pg(n):null,SetextHeading:()=>new Py},Pv={text:"",end:0};class Pb{constructor(e,n,r,i){this.parser=e,this.input=n,this.ranges=i,this.line=new T5,this.atEnd=!1,this.reusePlaceholders=new Map,this.stoppedAt=null,this.rangeI=0,this.to=i[i.length-1].to,this.lineStart=this.absoluteLineStart=this.absoluteLineEnd=i[0].from,this.block=T1.create(ns.Document,0,this.lineStart,0,0),this.stack=[this.block],this.fragments=r.length?new PZ(r,n):null,this.readLine()}get parsedPos(){return this.absoluteLineStart}advance(){if(null!=this.stoppedAt&&this.absoluteLineStart>this.stoppedAt)return this.finish();let{line:e}=this;for(;;){for(let n=0;;){let r=e.depth<this.stack.length?this.stack[this.stack.length-1]:null;for(;n<e.markers.length&&(!r||e.markers[n].from<r.end);){let r=e.markers[n++];this.addNode(r.type,r.from,r.to)}if(!r)break;this.finishContext()}if(e.pos<e.text.length)break;if(!this.nextLine())return this.finish()}if(this.fragments&&this.reuseFragment(e.basePos))return null;s:for(;;){for(let n of this.parser.blockParsers)if(n){let r=n(this,e);if(!1!=r){if(!0==r)return null;e.forward();continue s}}break}let n=new T2(this.lineStart+e.pos,e.text.slice(e.pos));for(let e of this.parser.leafBlockParsers)if(e){let r=e(this,n);r&&n.parsers.push(r)}o:for(;this.nextLine()&&e.pos!=e.text.length;){if(e.indent<e.baseIndent+4){for(let r of this.parser.endLeafBlock)if(r(this,e,n))break o}for(let r of n.parsers)if(r.nextLine(this,e,n))return null;for(let r of(n.content+="\n"+e.scrub(),e.markers))n.marks.push(r)}return this.finishLeaf(n),null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw RangeError("Can't move stoppedAt forward");this.stoppedAt=e}reuseFragment(e){if(!this.fragments.moveTo(this.absoluteLineStart+e,this.absoluteLineStart)||!this.fragments.matches(this.block.hash))return!1;let n=this.fragments.takeNodes(this);return!!n&&(this.absoluteLineStart+=n,this.lineStart=Pq(this.absoluteLineStart,this.ranges),this.moveRangeI(),this.absoluteLineStart<this.to?(this.lineStart++,this.absoluteLineStart++):this.atEnd=!0,this.readLine(),!0)}get depth(){return this.stack.length}parentType(e=this.depth-1){return this.parser.nodeSet.types[this.stack[e].type]}nextLine(){return(this.lineStart+=this.line.text.length,this.absoluteLineEnd>=this.to)?(this.absoluteLineStart=this.absoluteLineEnd,this.atEnd=!0,this.readLine(),!1):(this.lineStart++,this.absoluteLineStart=this.absoluteLineEnd+1,this.moveRangeI(),this.readLine(),!0)}peekLine(){return this.scanLine(this.absoluteLineEnd+1).text}moveRangeI(){for(;this.rangeI<this.ranges.length-1&&this.absoluteLineStart>=this.ranges[this.rangeI].to;)this.rangeI++,this.absoluteLineStart=Math.max(this.absoluteLineStart,this.ranges[this.rangeI].from)}scanLine(e){if(Pv.end=e,e>=this.to)Pv.text="";else if(Pv.text=this.lineChunkAt(e),Pv.end+=Pv.text.length,this.ranges.length>1){let e=this.absoluteLineStart,n=this.rangeI;for(;this.ranges[n].to<Pv.end;){n++;let r=this.ranges[n].from,i=this.lineChunkAt(r);Pv.end=r+i.length,Pv.text=Pv.text.slice(0,this.ranges[n-1].to-e)+i,e=Pv.end-Pv.text.length}}return Pv}readLine(){let{line:e}=this,{text:n,end:r}=this.scanLine(this.absoluteLineStart);for(this.absoluteLineEnd=r,e.reset(n);e.depth<this.stack.length;e.depth++){let n=this.stack[e.depth],r=this.parser.skipContextMarkup[n.type];if(!r)throw Error("Unhandled block context "+ns[n.type]);if(!r(n,this,e))break;e.forward()}}lineChunkAt(e){let n=this.input.chunk(e),r;if(this.input.lineChunks)r="\n"==n?"":n;else{let e=n.indexOf("\n");r=e<0?n:n.slice(0,e)}return e+r.length>this.to?r.slice(0,this.to-e):r}prevLineEnd(){return this.atEnd?this.lineStart:this.lineStart-1}startContext(e,n,r=0){this.block=T1.create(e,r,this.lineStart+n,this.block.hash,this.lineStart+this.line.text.length),this.stack.push(this.block)}startComposite(e,n,r=0){this.startContext(this.parser.getNodeType(e),n,r)}addNode(e,n,r){"number"==typeof e&&(e=new hN(this.parser.nodeSet.types[e],Pk,Pk,(null!=r?r:this.prevLineEnd())-n)),this.block.addChild(e,n-this.block.from)}addElement(e){this.block.addChild(e.toTree(this.parser.nodeSet),e.from-this.block.from)}addLeafElement(e,n){this.addNode(this.buffer.writeElements(PB(n.children,e.marks),-n.from).finish(n.type,n.to-n.from),n.from)}finishContext(){let e=this.stack.pop(),n=this.stack[this.stack.length-1];n.addChild(e.toTree(this.parser.nodeSet),e.from-n.from),this.block=n}finish(){for(;this.stack.length>1;)this.finishContext();return this.addGaps(this.block.toTree(this.parser.nodeSet,this.lineStart))}addGaps(e){return this.ranges.length>1?function e(n,r,i,s,o){let a=n[r].to,l=[],h=[],c=i.from+s;function u(e,i){for(;i?e>=a:e>a;){let i=n[r+1].from-a;s+=i,e+=i,a=n[++r].to}}for(let d=i.firstChild;d;d=d.nextSibling){u(d.from+s,!0);let i=d.from+s,p,f=o.get(d.tree);f?p=f:d.to+s>a?(p=e(n,r,d,s,o),u(d.to+s,!1)):p=d.toTree(),l.push(p),h.push(i-c)}return u(i.to+s,!1),new hN(i.type,l,h,i.to+s-c,i.tree?i.tree.propValues:void 0)}(this.ranges,0,e.topNode,this.ranges[0].from,this.reusePlaceholders):e}finishLeaf(e){for(let n of e.parsers)if(n.finish(this,e))return;let n=PB(this.parser.parseInline(e.content,e.start),e.marks);this.addNode(this.buffer.writeElements(n,-e.start).finish(ns.Paragraph,e.content.length),e.start)}elt(e,n,r,i){return"string"==typeof e?PP(this.parser.getNodeType(e),n,r,i):new PT(e,n)}get buffer(){return new PC(this.parser.nodeSet)}}class Px extends hH{constructor(e,n,r,i,s,o,a,l,h){for(let c of(super(),this.nodeSet=e,this.blockParsers=n,this.leafBlockParsers=r,this.blockNames=i,this.endLeafBlock=s,this.skipContextMarkup=o,this.inlineParsers=a,this.inlineNames=l,this.wrappers=h,this.nodeTypes=Object.create(null),e.types))this.nodeTypes[c.name]=c.id}createParse(e,n,r){let i=new Pb(this,e,n,r);for(let s of this.wrappers)i=s(i,e,n,r);return i}configure(e){let n=function e(n){if(!Array.isArray(n))return n;if(0==n.length)return null;let r=e(n[0]);if(1==n.length)return r;let i=e(n.slice(1));if(!i||!r)return r||i;let s=(e,n)=>(e||Pk).concat(n||Pk),o=r.wrap,a=i.wrap;return{props:s(r.props,i.props),defineNodes:s(r.defineNodes,i.defineNodes),parseBlock:s(r.parseBlock,i.parseBlock),parseInline:s(r.parseInline,i.parseInline),remove:s(r.remove,i.remove),wrap:o?a?(e,n,r,i)=>o(a(e,n,r,i),n,r,i):o:a}}(e);if(!n)return this;let{nodeSet:r,skipContextMarkup:i}=this,s=this.blockParsers.slice(),o=this.leafBlockParsers.slice(),a=this.blockNames.slice(),l=this.inlineParsers.slice(),h=this.inlineNames.slice(),c=this.endLeafBlock.slice(),u=this.wrappers;if(Pw(n.defineNodes)){i=Object.assign({},i);let e=r.types.slice(),s;for(let r of n.defineNodes){let{name:n,block:o,composite:a,style:l}="string"==typeof r?{name:r}:r;if(e.some(e=>e.name==n))continue;a&&(i[e.length]=(e,n,r)=>a(n,r,e.value));let h=e.length,c=a?["Block","BlockContext"]:o?h>=ns.ATXHeading1&&h<=ns.SetextHeading2?["Block","LeafBlock","Heading"]:["Block","LeafBlock"]:void 0;e.push(hT.define({id:h,name:n,props:c&&[[hk.group,c]]})),l&&(s||(s={}),Array.isArray(l)||l instanceof cs?s[n]=l:Object.assign(s,l))}r=new hP(e),s&&(r=r.extend(cl(s)))}if(Pw(n.props)&&(r=r.extend(...n.props)),Pw(n.remove))for(let e of n.remove){let n=this.blockNames.indexOf(e),r=this.inlineNames.indexOf(e);n>-1&&(s[n]=o[n]=void 0),r>-1&&(l[r]=void 0)}if(Pw(n.parseBlock))for(let e of n.parseBlock){let n=a.indexOf(e.name);if(n>-1)s[n]=e.parse,o[n]=e.leaf;else{let n=e.before?PS(a,e.before):e.after?PS(a,e.after)+1:a.length-1;s.splice(n,0,e.parse),o.splice(n,0,e.leaf),a.splice(n,0,e.name)}e.endLeaf&&c.push(e.endLeaf)}if(Pw(n.parseInline))for(let e of n.parseInline){let n=h.indexOf(e.name);if(n>-1)l[n]=e.parse;else{let n=e.before?PS(h,e.before):e.after?PS(h,e.after)+1:h.length-1;l.splice(n,0,e.parse),h.splice(n,0,e.name)}}return n.wrap&&(u=u.concat(n.wrap)),new Px(r,s,o,a,c,i,l,h,u)}getNodeType(e){let n=this.nodeTypes[e];if(null==n)throw RangeError(`Unknown node type '${e}'`);return n}parseInline(e,n){let r=new Pz(this,e,n);r:for(let e=n;e<r.end;){let n=r.char(e);for(let i of this.inlineParsers)if(i){let s=i(r,n,e);if(s>=0){e=s;continue r}}e++}return r.resolveMarkers(0)}}function Pw(e){return null!=e&&e.length>0}function PS(e,n){let r=e.indexOf(n);if(r<0)throw RangeError(`Position specified relative to unknown parser ${n}`);return r}let P_=[hT.none];for(let e=1,n;n=ns[e];e++)P_[e]=hT.define({id:e,name:n,props:e>=ns.Escape?[]:[[hk.group,e in T3?["Block","BlockContext"]:["Block","LeafBlock"]]],top:"Document"==n});let Pk=[];class PC{constructor(e){this.nodeSet=e,this.content=[],this.nodes=[]}write(e,n,r,i=0){return this.content.push(e,n,r,4+4*i),this}writeElements(e,n=0){for(let r of e)r.writeTo(this,n);return this}finish(e,n){return hN.build({buffer:this.content,nodeSet:this.nodeSet,reused:this.nodes,topID:e,length:n})}}class PE{constructor(e,n,r,i=Pk){this.type=e,this.from=n,this.to=r,this.children=i}writeTo(e,n){let r=e.content.length;e.writeElements(this.children,n),e.content.push(this.type,this.from+n,this.to+n,e.content.length+4-r)}toTree(e){return new PC(e).writeElements(this.children,-this.from).finish(this.type,this.to-this.from)}}class PT{constructor(e,n){this.tree=e,this.from=n}get to(){return this.from+this.tree.length}get type(){return this.tree.type.id}get children(){return Pk}writeTo(e,n){e.nodes.push(this.tree),e.content.push(e.nodes.length-1,this.from+n,this.to+n,-1)}toTree(){return this.tree}}function PP(e,n,r,i){return new PE(e,n,r,i)}let PA={resolve:"Emphasis",mark:"EmphasisMark"},PM={resolve:"Emphasis",mark:"EmphasisMark"},PN={},PD={};class PI{constructor(e,n,r,i){this.type=e,this.from=n,this.to=r,this.side=i}}let P$="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~",PR=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\u2010-\u2027]/;try{PR=RegExp("[\\p{S}|\\p{P}]","u")}catch(e){}let PL={Escape(e,n,r){if(92!=n||r==e.end-1)return -1;let i=e.char(r+1);for(let n=0;n<P$.length;n++)if(P$.charCodeAt(n)==i)return e.append(PP(ns.Escape,r,r+2));return -1},Entity(e,n,r){if(38!=n)return -1;let i=/^(?:#\d+|#x[a-f\d]+|\w+);/i.exec(e.slice(r+1,r+31));return i?e.append(PP(ns.Entity,r,r+1+i[0].length)):-1},InlineCode(e,n,r){if(96!=n||r&&96==e.char(r-1))return -1;let i=r+1;for(;i<e.end&&96==e.char(i);)i++;let s=i-r,o=0;for(;i<e.end;i++)if(96==e.char(i)){if(++o==s&&96!=e.char(i+1))return e.append(PP(ns.InlineCode,r,i+1,[PP(ns.CodeMark,r,r+s),PP(ns.CodeMark,i+1-s,i+1)]))}else o=0;return -1},HTMLTag(e,n,r){if(60!=n||r==e.end-1)return -1;let i=e.slice(r+1,e.end),s=/^(?:[a-z][-\w+.]+:[^\s>]+|[a-z\d.!#$%&'*+/=?^_`{|}~-]+@[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?(?:\.[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?)*)>/i.exec(i);if(s)return e.append(PP(ns.Autolink,r,r+1+s[0].length,[PP(ns.LinkMark,r,r+1),PP(ns.URL,r+1,r+s[0].length),PP(ns.LinkMark,r+s[0].length,r+1+s[0].length)]));let o=/^!--[^>](?:-[^-]|[^-])*?-->/i.exec(i);if(o)return e.append(PP(ns.Comment,r,r+1+o[0].length));let a=/^\?[^]*?\?>/.exec(i);if(a)return e.append(PP(ns.ProcessingInstruction,r,r+1+a[0].length));let l=/^(?:![A-Z][^]*?>|!\[CDATA\[[^]*?\]\]>|\/\s*[a-zA-Z][\w-]*\s*>|\s*[a-zA-Z][\w-]*(\s+[a-zA-Z:_][\w-.:]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*(\/\s*)?>)/.exec(i);return l?e.append(PP(ns.HTMLTag,r,r+1+l[0].length)):-1},Emphasis(e,n,r){if(95!=n&&42!=n)return -1;let i=r+1;for(;e.char(i)==n;)i++;let s=e.slice(r-1,r),o=e.slice(i,i+1),a=PR.test(s),l=PR.test(o),h=/\s|^$/.test(s),c=/\s|^$/.test(o),u=!c&&(!l||h||a),d=!h&&(!a||c||l);return e.append(new PI(95==n?PA:PM,r,i,!!(u&&(42==n||!d||a))|2*!!(d&&(42==n||!u||l))))},HardBreak(e,n,r){if(92==n&&10==e.char(r+1))return e.append(PP(ns.HardBreak,r,r+2));if(32==n){let n=r+1;for(;32==e.char(n);)n++;if(10==e.char(n)&&n>=r+2)return e.append(PP(ns.HardBreak,r,n+1))}return -1},Link:(e,n,r)=>91==n?e.append(new PI(PN,r,r+1,1)):-1,Image:(e,n,r)=>33==n&&91==e.char(r+1)?e.append(new PI(PD,r,r+2,1)):-1,LinkEnd(e,n,r){if(93!=n)return -1;for(let n=e.parts.length-1;n>=0;n--){let i=e.parts[n];if(i instanceof PI&&(i.type==PN||i.type==PD)){if(!i.side||e.skipSpace(i.to)==r&&!/[(\[]/.test(e.slice(r+1,r+2)))return e.parts[n]=null,-1;let s=e.takeContent(n),o=e.parts[n]=function(e,n,r,i,s){let{text:o}=e,a=e.char(s),l=s;if(n.unshift(PP(ns.LinkMark,i,i+(r==ns.Image?2:1))),n.push(PP(ns.LinkMark,s-1,s)),40==a){let r=e.skipSpace(s+1),i=PQ(o,r-e.offset,e.offset),a;i&&(r=e.skipSpace(i.to))!=i.to&&(a=Pj(o,r-e.offset,e.offset))&&(r=e.skipSpace(a.to)),41==e.char(r)&&(n.push(PP(ns.LinkMark,s,s+1)),l=r+1,i&&n.push(i),a&&n.push(a),n.push(PP(ns.LinkMark,r,l)))}else if(91==a){let r=PV(o,s-e.offset,e.offset,!1);r&&(n.push(r),l=r.to)}return PP(r,i,l,n)}(e,s,i.type==PN?ns.Link:ns.Image,i.from,r+1);if(i.type==PN)for(let r=0;r<n;r++){let n=e.parts[r];n instanceof PI&&n.type==PN&&(n.side=0)}return o.to}}return -1}};function PQ(e,n,r){if(60==e.charCodeAt(n)){for(let i=n+1;i<e.length;i++){let s=e.charCodeAt(i);if(62==s)return PP(ns.URL,n+r,i+1+r);if(60==s||10==s)return!1}return null}{let i=0,s=n;for(let n=!1;s<e.length;s++){let r=e.charCodeAt(s);if(T6(r))break;if(n)n=!1;else if(40==r)i++;else if(41==r){if(!i)break;i--}else 92==r&&(n=!0)}return s>n?PP(ns.URL,n+r,s+r):s==e.length&&null}}function Pj(e,n,r){let i=e.charCodeAt(n);if(39!=i&&34!=i&&40!=i)return!1;let s=40==i?41:i;for(let i=n+1,o=!1;i<e.length;i++){let a=e.charCodeAt(i);if(o)o=!1;else{if(a==s)return PP(ns.LinkTitle,n+r,i+1+r);92==a&&(o=!0)}}return null}function PV(e,n,r,i){for(let s=!1,o=n+1,a=Math.min(e.length,o+999);o<a;o++){let a=e.charCodeAt(o);if(s)s=!1;else{if(93==a)return!i&&PP(ns.LinkLabel,n+r,o+1+r);if(i&&!T6(a)&&(i=!1),91==a)return!1;92==a&&(s=!0)}}return null}class Pz{constructor(e,n,r){this.parser=e,this.text=n,this.offset=r,this.parts=[]}char(e){return e>=this.end?-1:this.text.charCodeAt(e-this.offset)}get end(){return this.offset+this.text.length}slice(e,n){return this.text.slice(e-this.offset,n-this.offset)}append(e){return this.parts.push(e),e.to}addDelimiter(e,n,r,i,s){return this.append(new PI(e,n,r,!!i|2*!!s))}get hasOpenLink(){for(let e=this.parts.length-1;e>=0;e--){let n=this.parts[e];if(n instanceof PI&&(n.type==PN||n.type==PD))return!0}return!1}addElement(e){return this.append(e)}resolveMarkers(e){for(let n=e;n<this.parts.length;n++){let r=this.parts[n];if(!(r instanceof PI&&r.type.resolve&&2&r.side))continue;let i=r.type==PA||r.type==PM,s=r.to-r.from,o,a=n-1;for(;a>=e;a--){let e=this.parts[a];if(e instanceof PI&&1&e.side&&e.type==r.type&&!(i&&(1&r.side||2&e.side)&&(e.to-e.from+s)%3==0&&((e.to-e.from)%3||s%3))){o=e;break}}if(!o)continue;let l=r.type.resolve,h=[],c=o.from,u=r.to;if(i){let e=Math.min(2,o.to-o.from,s);c=o.to-e,u=r.from+e,l=1==e?"Emphasis":"StrongEmphasis"}o.type.mark&&h.push(this.elt(o.type.mark,c,o.to));for(let e=a+1;e<n;e++)this.parts[e]instanceof PE&&h.push(this.parts[e]),this.parts[e]=null;r.type.mark&&h.push(this.elt(r.type.mark,r.from,u));let d=this.elt(l,c,u,h);this.parts[a]=i&&o.from!=c?new PI(o.type,o.from,c,o.side):null,(this.parts[n]=i&&r.to!=u?new PI(r.type,u,r.to,r.side):null)?this.parts.splice(n,0,d):this.parts[n]=d}let n=[];for(let r=e;r<this.parts.length;r++){let e=this.parts[r];e instanceof PE&&n.push(e)}return n}findOpeningDelimiter(e){for(let n=this.parts.length-1;n>=0;n--){let r=this.parts[n];if(r instanceof PI&&r.type==e)return n}return null}takeContent(e){let n=this.resolveMarkers(e);return this.parts.length=e,n}skipSpace(e){return T9(this.text,e-this.offset)+this.offset}elt(e,n,r,i){return"string"==typeof e?PP(this.parser.getNodeType(e),n,r,i):new PT(e,n)}}function PB(e,n){if(!n.length)return e;if(!e.length)return n;let r=e.slice(),i=0;for(let e of n){for(;i<r.length&&r[i].to<e.to;)i++;if(i<r.length&&r[i].from<e.from){let n=r[i];n instanceof PE&&(r[i]=new PE(n.type,n.from,n.to,PB(n.children,[e])))}else r.splice(i++,0,e)}return r}let PF=[ns.CodeBlock,ns.ListItem,ns.OrderedList,ns.BulletList];class PZ{constructor(e,n){this.fragments=e,this.input=n,this.i=0,this.fragment=null,this.fragmentEnd=-1,this.cursor=null,e.length&&(this.fragment=e[this.i++])}nextFragment(){this.fragment=this.i<this.fragments.length?this.fragments[this.i++]:null,this.cursor=null,this.fragmentEnd=-1}moveTo(e,n){for(;this.fragment&&this.fragment.to<=e;)this.nextFragment();if(!this.fragment||this.fragment.from>(e?e-1:0))return!1;if(this.fragmentEnd<0){let e=this.fragment.to;for(;e>0&&"\n"!=this.input.read(e-1,e);)e--;this.fragmentEnd=e?e-1:0}let r=this.cursor;r||(r=this.cursor=this.fragment.tree.cursor()).firstChild();let i=e+this.fragment.offset;for(;r.to<=i;)if(!r.parent())return!1;for(;;){if(r.from>=i)return this.fragment.from<=n;if(!r.childAfter(i))return!1}}matches(e){let n=this.cursor.tree;return n&&n.prop(hk.contextHash)==e}takeNodes(e){let n=this.cursor,r=this.fragment.offset,i=this.fragmentEnd-!!this.fragment.openEnd,s=e.absoluteLineStart,o=s,a=e.block.children.length,l=o,h=a;for(;;){if(n.to-r>i){if(n.type.isAnonymous&&n.firstChild())continue;break}let s=Pq(n.from-r,e.ranges);if(n.to-r<=e.ranges[e.rangeI].to)e.addNode(n.tree,s);else{let r=new hN(e.parser.nodeSet.types[ns.Paragraph],[],[],0,e.block.hashProp);e.reusePlaceholders.set(r,n.tree),e.addNode(r,s)}if(n.type.is("Block")&&(0>PF.indexOf(n.type.id)?(o=n.to-r,a=e.block.children.length):(o=l,a=h,l=n.to-r,h=e.block.children.length)),!n.nextSibling())break}for(;e.block.children.length>a;)e.block.children.pop(),e.block.positions.pop();return o-s}}function Pq(e,n){let r=e;for(let i=1;i<n.length;i++){let s=n[i-1].to,o=n[i].from;s<e&&(r-=o-s)}return r}let PW=cl({"Blockquote/...":cT.quote,HorizontalRule:cT.contentSeparator,"ATXHeading1/... SetextHeading1/...":cT.heading1,"ATXHeading2/... SetextHeading2/...":cT.heading2,"ATXHeading3/...":cT.heading3,"ATXHeading4/...":cT.heading4,"ATXHeading5/...":cT.heading5,"ATXHeading6/...":cT.heading6,"Comment CommentBlock":cT.comment,Escape:cT.escape,Entity:cT.character,"Emphasis/...":cT.emphasis,"StrongEmphasis/...":cT.strong,"Link/... Image/...":cT.link,"OrderedList/... BulletList/...":cT.list,"BlockQuote/...":cT.quote,"InlineCode CodeText":cT.monospace,"URL Autolink":cT.url,"HeaderMark HardBreak QuoteMark ListMark LinkMark EmphasisMark CodeMark":cT.processingInstruction,"CodeInfo LinkLabel":cT.labelName,LinkTitle:cT.string,Paragraph:cT.content}),PX=new Px(new hP(P_).extend(PW),Object.keys(Pf).map(e=>Pf[e]),Object.keys(Pf).map(e=>PO[e]),Object.keys(Pf),[(e,n)=>Ps(n)>=0,(e,n)=>T8(n)>=0,(e,n)=>Pe(n)>=0,(e,n)=>Pr(n,e,!0)>=0,(e,n)=>Pi(n,e,!0)>=0,(e,n)=>Pt(n,e,!0)>=0,(e,n)=>Pu(n,e,!0)>=0],T3,Object.keys(PL).map(e=>PL[e]),Object.keys(PL),[]),PU={resolve:"Strikethrough",mark:"StrikethroughMark"},PY={defineNodes:[{name:"Strikethrough",style:{"Strikethrough/...":cT.strikethrough}},{name:"StrikethroughMark",style:cT.processingInstruction}],parseInline:[{name:"Strikethrough",parse(e,n,r){if(126!=n||126!=e.char(r+1)||126==e.char(r+2))return -1;let i=e.slice(r-1,r),s=e.slice(r+2,r+3),o=/\s|^$/.test(i),a=/\s|^$/.test(s),l=PR.test(i),h=PR.test(s);return e.addDelimiter(PU,r,r+2,!a&&(!h||o||l),!o&&(!l||a||h))},after:"Emphasis"}]};function PG(e,n,r=0,i,s=0){let o=0,a=!0,l=-1,h=-1,c=!1,u=()=>{i.push(e.elt("TableCell",s+l,s+h,e.parser.parseInline(n.slice(l,h),s+l)))};for(let d=r;d<n.length;d++){let r=n.charCodeAt(d);124!=r||c?(c||32!=r&&9!=r)&&(l<0&&(l=d),h=d+1):((!a||l>-1)&&o++,a=!1,i&&(l>-1&&u(),i.push(e.elt("TableDelimiter",d+s,d+s+1))),l=h=-1),c=!c&&92==r}return l>-1&&(o++,i&&u()),o}function PH(e,n){for(let r=n;r<e.length;r++){let n=e.charCodeAt(r);if(124==n)return!0;92==n&&r++}return!1}let PK=/^\|?(\s*:?-+:?\s*\|)+(\s*:?-+:?\s*)?$/;class PJ{constructor(){this.rows=null}nextLine(e,n,r){if(null==this.rows){let i;if(this.rows=!1,(45==n.next||58==n.next||124==n.next)&&PK.test(i=n.text.slice(n.pos))){let s=[];PG(e,r.content,0,s,r.start)==PG(e,i,n.pos)&&(this.rows=[e.elt("TableHeader",r.start,r.start+r.content.length,s),e.elt("TableDelimiter",e.lineStart+n.pos,e.lineStart+n.text.length)])}}else if(this.rows){let r=[];PG(e,n.text,n.pos,r,e.lineStart),this.rows.push(e.elt("TableRow",e.lineStart+n.pos,e.lineStart+n.text.length,r))}return!1}finish(e,n){return!!this.rows&&(e.addLeafElement(n,e.elt("Table",n.start,n.start+n.content.length,this.rows)),!0)}}let P0={defineNodes:[{name:"Table",block:!0},{name:"TableHeader",style:{"TableHeader/...":cT.heading}},"TableRow",{name:"TableCell",style:cT.content},{name:"TableDelimiter",style:cT.processingInstruction}],parseBlock:[{name:"Table",leaf:(e,n)=>PH(n.content,0)?new PJ:null,endLeaf(e,n,r){if(r.parsers.some(e=>e instanceof PJ)||!PH(n.text,n.basePos))return!1;let i=e.peekLine();return PK.test(i)&&PG(e,n.text,n.basePos)==PG(e,i,n.basePos)},before:"SetextHeading"}]};class P1{nextLine(){return!1}finish(e,n){return e.addLeafElement(n,e.elt("Task",n.start,n.start+n.content.length,[e.elt("TaskMarker",n.start,n.start+3),...e.parser.parseInline(n.content.slice(3),n.start+3)])),!0}}let P2={defineNodes:[{name:"Task",block:!0,style:cT.list},{name:"TaskMarker",style:cT.atom}],parseBlock:[{name:"TaskList",leaf:(e,n)=>/^\[[ xX]\][ \t]/.test(n.content)&&"ListItem"==e.parentType().name?new P1:null,after:"SetextHeading"}]},P5=/(www\.)|(https?:\/\/)|([\w.+-]{1,100}@)|(mailto:|xmpp:)/gy,P4=/[\w-]+(\.[\w-]+)+(\/[^\s<]*)?/gy,P3=/[\w-]+\.[\w-]+($|\/)/,P6=/[\w.+-]+@[\w-]+(\.[\w.-]+)+/gy,P9=/\/[a-zA-Z\d@.]+/gy;function P7(e,n,r,i){let s=0;for(let o=n;o<r;o++)e[o]==i&&s++;return s}function P8(e,n){P6.lastIndex=n;let r=P6.exec(e);if(!r)return -1;let i=r[0][r[0].length-1];return"_"==i||"-"==i?-1:n+r[0].length-("."==i)}let Ae=[P0,P2,PY,{parseInline:[{name:"Autolink",parse(e,n,r){let i=r-e.offset;if(i&&/\w/.test(e.text[i-1]))return -1;P5.lastIndex=i;let s=P5.exec(e.text),o=-1;if(!s)return -1;if(s[1]||s[2]){if((o=function(e,n){P4.lastIndex=n;let r=P4.exec(e);if(!r||P3.exec(r[0])[0].indexOf("_")>-1)return -1;let i=n+r[0].length;for(;;){let r=e[i-1],s;if(/[?!.,:*_~]/.test(r)||")"==r&&P7(e,n,i,")")>P7(e,n,i,"("))i--;else if(";"==r&&(s=/&(?:#\d+|#x[a-f\d]+|\w+);$/.exec(e.slice(n,i))))i=n+s.index;else break}return i}(e.text,i+s[0].length))>-1&&e.hasOpenLink){let n=/([^\[\]]|\[[^\]]*\])*/.exec(e.text.slice(i,o));o=i+n[0].length}}else s[3]?o=P8(e.text,i):(o=P8(e.text,i+s[0].length))>-1&&"xmpp:"==s[0]&&(P9.lastIndex=o,(s=P9.exec(e.text))&&(o=s.index+s[0].length));return o<0?-1:(e.addElement(e.elt("URL",r,o+e.offset)),o+e.offset)}}]}];function At(e,n,r){return(i,s,o)=>{if(s!=e||i.char(o+1)==e)return -1;let a=[i.elt(r,o,o+1)];for(let s=o+1;s<i.end;s++){let l=i.char(s);if(l==e)return i.addElement(i.elt(n,o,s+1,a.concat(i.elt(r,s,s+1))));if(92==l&&a.push(i.elt("Escape",s,s+++2)),T6(l))break}return -1}}let An={defineNodes:[{name:"Superscript",style:cT.special(cT.content)},{name:"SuperscriptMark",style:cT.processingInstruction}],parseInline:[{name:"Superscript",parse:At(94,"Superscript","SuperscriptMark")}]},Ar={defineNodes:[{name:"Subscript",style:cT.special(cT.content)},{name:"SubscriptMark",style:cT.processingInstruction}],parseInline:[{name:"Subscript",parse:At(126,"Subscript","SubscriptMark")}]},Ai={defineNodes:[{name:"Emoji",style:cT.character}],parseInline:[{name:"Emoji",parse(e,n,r){let i;return 58==n&&(i=/^[a-zA-Z_0-9]+:/.exec(e.slice(r+1,e.end)))?e.addElement(e.elt("Emoji",r,r+1+i[0].length)):-1}}]},As={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},Ao={dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},Aa={dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}};function Al(e){return 9==e||10==e||13==e||32==e}let Ah=null,Ac=null,Au=0;function Ad(e,n){var r;let i=e.pos+n;if(Au==i&&Ac==e)return Ah;let s=e.peek(n);for(;Al(s);)s=e.peek(++n);let o="";for(;45==(r=s)||46==r||58==r||r>=65&&r<=90||95==r||r>=97&&r<=122||r>=161;)o+=String.fromCharCode(s),s=e.peek(++n);return Ac=e,Au=i,Ah=o?o.toLowerCase():s==Ap||s==Af?void 0:null}let Ap=63,Af=33;function Ag(e,n){this.name=e,this.parent=n}let Am=[6,10,7,8,9],Ay=new ds({start:null,shift:(e,n,r,i)=>Am.indexOf(n)>-1?new Ag(Ad(i,1)||"",e):e,reduce:(e,n)=>20==n&&e?e.parent:e,reuse(e,n,r,i){let s=n.type.id;return 6==s||36==s?new Ag(Ad(i,1)||"",e):e},strict:!1}),AO=new u5((e,n)=>{if(60!=e.next){e.next<0&&n.context&&e.acceptToken(57);return}e.advance();let r=47==e.next;r&&e.advance();let i=Ad(e,0);if(void 0===i)return;if(!i)return e.acceptToken(r?14:6);let s=n.context?n.context.name:null;if(r){if(i==s)return e.acceptToken(11);if(s&&Ao[s])return e.acceptToken(57,-2);if(n.dialectEnabled(0))return e.acceptToken(12);for(let e=n.context;e;e=e.parent)if(e.name==i)return;e.acceptToken(13)}else{if("script"==i)return e.acceptToken(7);if("style"==i)return e.acceptToken(8);if("textarea"==i)return e.acceptToken(9);if(As.hasOwnProperty(i))return e.acceptToken(10);s&&Aa[s]&&Aa[s][i]?e.acceptToken(57,-1):e.acceptToken(6)}},{contextual:!0}),Av=new u5(e=>{for(let n=0,r=0;;r++){if(e.next<0){r&&e.acceptToken(58);break}if(45==e.next)n++;else if(62==e.next&&n>=2){r>=3&&e.acceptToken(58,-2);break}else n=0;e.advance()}}),Ab=new u5((e,n)=>{if(47==e.next&&62==e.peek(1)){let r=n.dialectEnabled(1)||function(e){for(;e;e=e.parent)if("svg"==e.name||"math"==e.name)return!0;return!1}(n.context);e.acceptToken(r?5:4,2)}else 62==e.next&&e.acceptToken(4,1)});function Ax(e,n,r){let i=2+e.length;return new u5(s=>{for(let o=0,a=0,l=0;;l++){if(s.next<0){l&&s.acceptToken(n);break}if(0==o&&60==s.next||1==o&&47==s.next||o>=2&&o<i&&s.next==e.charCodeAt(o-2))o++,a++;else if((2==o||o==i)&&Al(s.next))a++;else if(o==i&&62==s.next){l>a?s.acceptToken(n,-a):s.acceptToken(r,-(a-2));break}else if((10==s.next||13==s.next)&&l){s.acceptToken(n,1);break}else o=a=0;s.advance()}})}let Aw=Ax("script",54,1),AS=Ax("style",55,2),A_=Ax("textarea",56,3),Ak=cl({"Text RawText":cT.content,"StartTag StartCloseTag SelfClosingEndTag EndTag":cT.angleBracket,TagName:cT.tagName,"MismatchedCloseTag/TagName":[cT.tagName,cT.invalid],AttributeName:cT.attributeName,"AttributeValue UnquotedAttributeValue":cT.attributeValue,Is:cT.definitionOperator,"EntityReference CharacterReference":cT.character,Comment:cT.blockComment,ProcessingInst:cT.processingInstruction,DoctypeDecl:cT.documentMeta}),AC=da.deserialize({version:14,states:",xOVO!rOOO!WQ#tO'#CqO!]Q#tO'#CzO!bQ#tO'#C}O!gQ#tO'#DQO!lQ#tO'#DSO!qOaO'#CpO!|ObO'#CpO#XOdO'#CpO$eO!rO'#CpOOO`'#Cp'#CpO$lO$fO'#DTO$tQ#tO'#DVO$yQ#tO'#DWOOO`'#Dk'#DkOOO`'#DY'#DYQVO!rOOO%OQ&rO,59]O%ZQ&rO,59fO%fQ&rO,59iO%qQ&rO,59lO%|Q&rO,59nOOOa'#D^'#D^O&XOaO'#CxO&dOaO,59[OOOb'#D_'#D_O&lObO'#C{O&wObO,59[OOOd'#D`'#D`O'POdO'#DOO'[OdO,59[OOO`'#Da'#DaO'dO!rO,59[O'kQ#tO'#DROOO`,59[,59[OOOp'#Db'#DbO'pO$fO,59oOOO`,59o,59oO'xQ#|O,59qO'}Q#|O,59rOOO`-E7W-E7WO(SQ&rO'#CsOOQW'#DZ'#DZO(bQ&rO1G.wOOOa1G.w1G.wOOO`1G/Y1G/YO(mQ&rO1G/QOOOb1G/Q1G/QO(xQ&rO1G/TOOOd1G/T1G/TO)TQ&rO1G/WOOO`1G/W1G/WO)`Q&rO1G/YOOOa-E7[-E7[O)kQ#tO'#CyOOO`1G.v1G.vOOOb-E7]-E7]O)pQ#tO'#C|OOOd-E7^-E7^O)uQ#tO'#DPOOO`-E7_-E7_O)zQ#|O,59mOOOp-E7`-E7`OOO`1G/Z1G/ZOOO`1G/]1G/]OOO`1G/^1G/^O*PQ,UO,59_OOQW-E7X-E7XOOOa7+$c7+$cOOO`7+$t7+$tOOOb7+$l7+$lOOOd7+$o7+$oOOO`7+$r7+$rO*[Q#|O,59eO*aQ#|O,59hO*fQ#|O,59kOOO`1G/X1G/XO*kO7[O'#CvO*|OMhO'#CvOOQW1G.y1G.yOOO`1G/P1G/POOO`1G/S1G/SOOO`1G/V1G/VOOOO'#D['#D[O+_O7[O,59bOOQW,59b,59bOOOO'#D]'#D]O+pOMhO,59bOOOO-E7Y-E7YOOQW1G.|1G.|OOOO-E7Z-E7Z",stateData:",]~O!^OS~OUSOVPOWQOXROYTO[]O][O^^O`^Oa^Ob^Oc^Ox^O{_O!dZO~OfaO~OfbO~OfcO~OfdO~OfeO~O!WfOPlP!ZlP~O!XiOQoP!ZoP~O!YlORrP!ZrP~OUSOVPOWQOXROYTOZqO[]O][O^^O`^Oa^Ob^Oc^Ox^O!dZO~O!ZrO~P#dO![sO!euO~OfvO~OfwO~OS|OT}OhyO~OS!POT}OhyO~OS!ROT}OhyO~OS!TOT}OhyO~OS}OT}OhyO~O!WfOPlX!ZlX~OP!WO!Z!XO~O!XiOQoX!ZoX~OQ!ZO!Z!XO~O!YlORrX!ZrX~OR!]O!Z!XO~O!Z!XO~P#dOf!_O~O![sO!e!aO~OS!bO~OS!cO~Oi!dOSgXTgXhgX~OS!fOT!gOhyO~OS!hOT!gOhyO~OS!iOT!gOhyO~OS!jOT!gOhyO~OS!gOT!gOhyO~Of!kO~Of!lO~Of!mO~OS!nO~Ok!qO!`!oO!b!pO~OS!rO~OS!sO~OS!tO~Oa!uOb!uOc!uO!`!wO!a!uO~Oa!xOb!xOc!xO!b!wO!c!xO~Oa!uOb!uOc!uO!`!{O!a!uO~Oa!xOb!xOc!xO!b!{O!c!xO~OT~bac!dx{!d~",goto:"%p!`PPPPPPPPPPPPPPPPPPPP!a!gP!mPP!yP!|#P#S#Y#]#`#f#i#l#r#x!aP!a!aP$O$U$l$r$x%O%U%[%bPPPPPPPP%hX^OX`pXUOX`pezabcde{!O!Q!S!UR!q!dRhUR!XhXVOX`pRkVR!XkXWOX`pRnWR!XnXXOX`pQrXR!XpXYOX`pQ`ORx`Q{aQ!ObQ!QcQ!SdQ!UeZ!e{!O!Q!S!UQ!v!oR!z!vQ!y!pR!|!yQgUR!VgQjVR!YjQmWR![mQpXR!^pQtZR!`tS_O`ToXp",nodeNames:"⚠ StartCloseTag StartCloseTag StartCloseTag EndTag SelfClosingEndTag StartTag StartTag StartTag StartTag StartTag StartCloseTag StartCloseTag StartCloseTag IncompleteCloseTag Document Text EntityReference CharacterReference InvalidEntity Element OpenTag TagName Attribute AttributeName Is AttributeValue UnquotedAttributeValue ScriptText CloseTag OpenTag StyleText CloseTag OpenTag TextareaText CloseTag OpenTag CloseTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag CloseTag DoctypeDecl",maxTerm:67,context:Ay,nodeProps:[["closedBy",-10,1,2,3,7,8,9,10,11,12,13,"EndTag",6,"EndTag SelfClosingEndTag",-4,21,30,33,36,"CloseTag"],["openedBy",4,"StartTag StartCloseTag",5,"StartTag",-4,29,32,35,37,"OpenTag"],["group",-9,14,17,18,19,20,39,40,41,42,"Entity",16,"Entity TextContent",-3,28,31,34,"TextContent Entity"],["isolate",-11,21,29,30,32,33,35,36,37,38,41,42,"ltr",-3,26,27,39,""]],propSources:[Ak],skippedNodes:[0],repeatNodeCount:9,tokenData:"!<p!aR!YOX$qXY,QYZ,QZ[$q[]&X]^,Q^p$qpq,Qqr-_rs3_sv-_vw3}wxHYx}-_}!OH{!O!P-_!P!Q$q!Q![-_![!]Mz!]!^-_!^!_!$S!_!`!;x!`!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4U-_4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!Z$|c`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr$qrs&}sv$qvw+Pwx(tx!^$q!^!_*V!_!a&X!a#S$q#S#T&X#T;'S$q;'S;=`+z<%lO$q!R&bX`P!a`!cpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&Xq'UV`P!cpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}P'pT`POv'kw!^'k!_;'S'k;'S;=`(P<%lO'kP(SP;=`<%l'kp([S!cpOv(Vx;'S(V;'S;=`(h<%lO(Vp(kP;=`<%l(Vq(qP;=`<%l&}a({W`P!a`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t`)jT!a`Or)esv)ew;'S)e;'S;=`)y<%lO)e`)|P;=`<%l)ea*SP;=`<%l(t!Q*^V!a`!cpOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!Q*vP;=`<%l*V!R*|P;=`<%l&XW+UYkWOX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+PW+wP;=`<%l+P!Z+}P;=`<%l$q!a,]``P!a`!cp!^^OX&XXY,QYZ,QZ]&X]^,Q^p&Xpq,Qqr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!_-ljhS`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q[/ebhSkWOX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+PS0rXhSqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0mS1bP;=`<%l0m[1hP;=`<%l/^!V1vchS`P!a`!cpOq&Xqr1krs&}sv1kvw0mwx(tx!P1k!P!Q&X!Q!^1k!^!_*V!_!a&X!a#s1k#s$f&X$f;'S1k;'S;=`3R<%l?Ah1k?Ah?BY&X?BY?Mn1k?MnO&X!V3UP;=`<%l1k!_3[P;=`<%l-_!Z3hV!`h`P!cpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}!_4WihSkWc!ROX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst>]tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^/^!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!Z5zbkWOX5uXZ7SZ[5u[^7S^p5uqr5urs7Sst+Ptw5uwx7Sx!]5u!]!^7w!^!a7S!a#S5u#S#T7S#T;'S5u;'S;=`8n<%lO5u!R7VVOp7Sqs7St!]7S!]!^7l!^;'S7S;'S;=`7q<%lO7S!R7qOa!R!R7tP;=`<%l7S!Z8OYkWa!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!Z8qP;=`<%l5u!_8{ihSkWOX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst/^tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^:j!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!_:sbhSkWa!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!V<QchSOp7Sqr;{rs7Sst0mtw;{wx7Sx!P;{!P!Q7S!Q!];{!]!^=]!^!a7S!a#s;{#s$f7S$f;'S;{;'S;=`>P<%l?Ah;{?Ah?BY7S?BY?Mn;{?MnO7S!V=dXhSa!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!V>SP;=`<%l;{!_>YP;=`<%l8t!_>dhhSkWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^/^!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!Z@TakWOX@OXZAYZ[@O[^AY^p@Oqr@OrsAYsw@OwxAYx!]@O!]!^Az!^!aAY!a#S@O#S#TAY#T;'S@O;'S;=`Bq<%lO@O!RA]UOpAYq!]AY!]!^Ao!^;'SAY;'S;=`At<%lOAY!RAtOb!R!RAwP;=`<%lAY!ZBRYkWb!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!ZBtP;=`<%l@O!_COhhSkWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^Dj!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!_DsbhSkWb!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!VFQbhSOpAYqrE{rsAYswE{wxAYx!PE{!P!QAY!Q!]E{!]!^GY!^!aAY!a#sE{#s$fAY$f;'SE{;'S;=`G|<%l?AhE{?Ah?BYAY?BY?MnE{?MnOAY!VGaXhSb!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!VHPP;=`<%lE{!_HVP;=`<%lBw!ZHcW!bx`P!a`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t!aIYlhS`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OKQ!O!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!aK_khS`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!`&X!`!aMS!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!TM_X`P!a`!cp!eQOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!aNZ!ZhSfQ`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OMz!O!PMz!P!Q$q!Q![Mz![!]Mz!]!^-_!^!_*V!_!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f$}-_$}%OMz%O%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4UMz4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Je-_$Je$JgMz$Jg$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!a!$PP;=`<%lMz!R!$ZY!a`!cpOq*Vqr!$yrs(Vsv*Vwx)ex!a*V!a!b!4t!b;'S*V;'S;=`*s<%lO*V!R!%Q]!a`!cpOr*Vrs(Vsv*Vwx)ex}*V}!O!%y!O!f*V!f!g!']!g#W*V#W#X!0`#X;'S*V;'S;=`*s<%lO*V!R!&QX!a`!cpOr*Vrs(Vsv*Vwx)ex}*V}!O!&m!O;'S*V;'S;=`*s<%lO*V!R!&vV!a`!cp!dPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!'dX!a`!cpOr*Vrs(Vsv*Vwx)ex!q*V!q!r!(P!r;'S*V;'S;=`*s<%lO*V!R!(WX!a`!cpOr*Vrs(Vsv*Vwx)ex!e*V!e!f!(s!f;'S*V;'S;=`*s<%lO*V!R!(zX!a`!cpOr*Vrs(Vsv*Vwx)ex!v*V!v!w!)g!w;'S*V;'S;=`*s<%lO*V!R!)nX!a`!cpOr*Vrs(Vsv*Vwx)ex!{*V!{!|!*Z!|;'S*V;'S;=`*s<%lO*V!R!*bX!a`!cpOr*Vrs(Vsv*Vwx)ex!r*V!r!s!*}!s;'S*V;'S;=`*s<%lO*V!R!+UX!a`!cpOr*Vrs(Vsv*Vwx)ex!g*V!g!h!+q!h;'S*V;'S;=`*s<%lO*V!R!+xY!a`!cpOr!+qrs!,hsv!+qvw!-Swx!.[x!`!+q!`!a!/j!a;'S!+q;'S;=`!0Y<%lO!+qq!,mV!cpOv!,hvx!-Sx!`!,h!`!a!-q!a;'S!,h;'S;=`!.U<%lO!,hP!-VTO!`!-S!`!a!-f!a;'S!-S;'S;=`!-k<%lO!-SP!-kO{PP!-nP;=`<%l!-Sq!-xS!cp{POv(Vx;'S(V;'S;=`(h<%lO(Vq!.XP;=`<%l!,ha!.aX!a`Or!.[rs!-Ssv!.[vw!-Sw!`!.[!`!a!.|!a;'S!.[;'S;=`!/d<%lO!.[a!/TT!a`{POr)esv)ew;'S)e;'S;=`)y<%lO)ea!/gP;=`<%l!.[!R!/sV!a`!cp{POr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!0]P;=`<%l!+q!R!0gX!a`!cpOr*Vrs(Vsv*Vwx)ex#c*V#c#d!1S#d;'S*V;'S;=`*s<%lO*V!R!1ZX!a`!cpOr*Vrs(Vsv*Vwx)ex#V*V#V#W!1v#W;'S*V;'S;=`*s<%lO*V!R!1}X!a`!cpOr*Vrs(Vsv*Vwx)ex#h*V#h#i!2j#i;'S*V;'S;=`*s<%lO*V!R!2qX!a`!cpOr*Vrs(Vsv*Vwx)ex#m*V#m#n!3^#n;'S*V;'S;=`*s<%lO*V!R!3eX!a`!cpOr*Vrs(Vsv*Vwx)ex#d*V#d#e!4Q#e;'S*V;'S;=`*s<%lO*V!R!4XX!a`!cpOr*Vrs(Vsv*Vwx)ex#X*V#X#Y!+q#Y;'S*V;'S;=`*s<%lO*V!R!4{Y!a`!cpOr!4trs!5ksv!4tvw!6Vwx!8]x!a!4t!a!b!:]!b;'S!4t;'S;=`!;r<%lO!4tq!5pV!cpOv!5kvx!6Vx!a!5k!a!b!7W!b;'S!5k;'S;=`!8V<%lO!5kP!6YTO!a!6V!a!b!6i!b;'S!6V;'S;=`!7Q<%lO!6VP!6lTO!`!6V!`!a!6{!a;'S!6V;'S;=`!7Q<%lO!6VP!7QOxPP!7TP;=`<%l!6Vq!7]V!cpOv!5kvx!6Vx!`!5k!`!a!7r!a;'S!5k;'S;=`!8V<%lO!5kq!7yS!cpxPOv(Vx;'S(V;'S;=`(h<%lO(Vq!8YP;=`<%l!5ka!8bX!a`Or!8]rs!6Vsv!8]vw!6Vw!a!8]!a!b!8}!b;'S!8];'S;=`!:V<%lO!8]a!9SX!a`Or!8]rs!6Vsv!8]vw!6Vw!`!8]!`!a!9o!a;'S!8];'S;=`!:V<%lO!8]a!9vT!a`xPOr)esv)ew;'S)e;'S;=`)y<%lO)ea!:YP;=`<%l!8]!R!:dY!a`!cpOr!4trs!5ksv!4tvw!6Vwx!8]x!`!4t!`!a!;S!a;'S!4t;'S;=`!;r<%lO!4t!R!;]V!a`!cpxPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!;uP;=`<%l!4t!V!<TXiS`P!a`!cpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X",tokenizers:[Aw,AS,A_,Ab,AO,Av,0,1,2,3,4,5],topRules:{Document:[0,15]},dialects:{noMatch:0,selfClosing:509},tokenPrec:511});var AE=cI.define({parser:AC.configure({dialect:"noMatch"})}),AT=new hk;function AP(e){let n=/^(?:ATX|Setext)Heading(\d)$/.exec(e.name);return n?Number(n[1]):void 0}var AA=c3.of((e,n,r)=>{for(let i=c$(e).resolveInner(r,-1);i&&!(i.from<n);i=i.parent){let e=i.type.prop(AT);if(null==e)continue;let n=function(e,n){let r=e;for(;;){let e,i=r.nextSibling;if(!i||null!=(e=AP(i.type))&&e<=n)break;r=i}return r.to}(i,e);if(n>r)return{from:r,to:n}}return null}),AM=cA({}),AN=function(e){let{codeParser:n,htmlParser:r}=e;return{wrap:hJ((e,i)=>{let s=e.type.id;if(n&&(s==ns.CodeBlock||s==ns.FencedCode)){let r="";if(s==ns.FencedCode){let n=e.node.getChild(ns.CodeInfo);n&&(r=i.read(n.from,n.to))}let o=n(r);if(o)return{parser:o,overlay:e=>e.type.id==ns.CodeText}}else if(r&&(s==ns.HTMLBlock||s==ns.HTMLTag||s==ns.CommentBlock))return{parser:r,overlay:function(e,n,r){let i=[];for(let s=e.firstChild,o=n;;s=s.nextSibling){let e=s?s.from:r;if(e>o&&i.push({from:o,to:e}),!s)break;o=s.to}return i}(e.node,e.from,e.to)};return null})}}({htmlParser:AE.parser}),AD=PX.configure([AN,Ae,Ar,An,Ai,{props:[AT.add(AP),cK.add({Document:()=>null}),cP.add({Document:AM})]}]),AI=new cN(AM,AD,[],"markdown"),A$=cI.define({parser:T0.configure({wrap:hJ(e=>e.type.isTop?{parser:AI.parser,overlay:[{from:e.from,to:e.to}]}:null)})}),AR=["'",'"',"{","[","("],AL=[[bg,bc],A$.data.of({closeBrackets:{brackets:AR}}),AI.data.of({closeBrackets:{brackets:AR}}),dI([{type:"character",triggerCharacter:"%",handler({view:e,from:n,to:r}){let i=e.state.sliceDoc(Math.max(0,n-1),n),s=e.state.sliceDoc(n,Math.min(n+1,e.state.doc.length));return"{"===i&&"}"===s&&(f2({view:e})({from:n,to:r,text:"%%",cursorOffset:-1}),!0)}},{type:"character",triggerCharacter:"#",handler({view:e,from:n,to:r}){let i=e.state.sliceDoc(Math.max(0,n-1),n),s=e.state.sliceDoc(n,Math.min(n+1,e.state.doc.length));return"{"===i&&"}"===s&&(f2({view:e})({from:n,to:r,text:"##",cursorOffset:-1}),!0)}}])],AQ=new cq(A$,[[AA],AL]),Aj=[...TV,lF("minHeight",go),lF("maxHeight",ga),lF("height",gl),lZ("getMainSelectionRects",({view:e})=>()=>aA.forRange(e,"",e.state.selection.main).map(e=>(function(e,n){let r={};for(let i=0;i<n.length;i++){let s=n[i];Object.hasOwn(e,s)&&(r[s]=e[s])}return r})(e,["top","left","width","height"]))),lZ("replaceText",f7),lZ("undo",f8),lZ("redo",ge),lZ("transformTextInSelection",gt),lX([rS.high(dS)])];function AV(e,n){return r=>{let i=(0,nh.Cyy)();if(!i?.isBound(nh.BYF))return nl.createElement(e,{...r});let s=i.get(nh.BYF),o=n?.renderKey||e.renderKey||e.name||"",a=s.tryToGetRendererComponent(o);return a?.type!==nh.HTR.REACT?nl.createElement(e,{...r}):nl.createElement(a.renderer,{...r})}}var Az=nj.Ay.object({index:nj.Ay.number().optional()}).optional(),AB=nj.Ay.object({type:nj.Ay.literal("constant"),content:nj.Ay.any().optional(),schema:nj.Ay.any().optional(),extra:Az}),AF=nj.Ay.object({type:nj.Ay.literal("ref"),content:nj.Ay.array(nj.Ay.string()).optional(),extra:Az}),AZ=nj.Ay.object({type:nj.Ay.literal("expression"),content:nj.Ay.string().optional(),extra:Az}),Aq=nj.Ay.object({type:nj.Ay.literal("template"),content:nj.Ay.string().optional(),extra:Az});function AW(e){return{render(n){nV.render(n,e)},unmount(){nV.unmountComponentAtNode(e)}}}(e=>{function n(e){return AB.safeParse(e).success}function r(e){return AF.safeParse(e).success}function i(e){return AZ.safeParse(e).success}function s(e){return Aq.safeParse(e).success}function o(e){return e?.schema?e.schema:"string"==typeof e.content?{type:"string"}:"number"==typeof e.content?{type:"number"}:"boolean"==typeof e.content?{type:"boolean"}:(0,nf.isObject)(e.content)?{type:"object"}:void 0}e.isConstant=n,e.isRef=r,e.isExpression=i,e.isTemplate=s,e.isConstantOrRef=function(e){return n(e)||r(e)},e.isFlowValue=function(e){return n(e)||r(e)||i(e)||s(e)},e.traverse=function* e(o,a){let{includeTypes:l=["ref","template"],path:h=""}=a;if((0,nf.isPlainObject)(o)){if(r(o)&&l.includes("ref")||s(o)&&l.includes("template")||i(o)&&l.includes("expression")||n(o)&&l.includes("constant"))return void(yield{value:o,path:h});for(let[n,r]of Object.entries(o))yield*e(r,{...a,path:`${h}.${n}`});return}if((0,nf.isArray)(o))for(let[n,r]of o.entries())yield*e(r,{...a,path:`${h}[${n}]`})},e.getTemplateKeyPaths=function(e){return(0,nf.uniq)(e.content?.match(/\{\{([^\}\{]+)\}\}/g)||[]).map(e=>e.slice(2,-2).split("."))},e.inferConstantJsonSchema=o,e.inferJsonSchema=function e(i,a){if((0,nf.isPlainObject)(i)){if(n(i))return o(i);if(r(i)){let e=a.available.getByKeyPath(i?.content);return e?.type?d8.astToSchema(e?.type):void 0}return s(i)?{type:"string"}:{type:"object",properties:Object.keys(i).reduce((n,r)=>{let s=e(i[r],a);return s&&(n[r]=s),n},{})}}}})(no||(no={})),kt.register("python",{language:Cw,extensions:CS}),kt.register("shell",{language:k4,languageService:k3}),kt.register("typescript",kG),kt.register("json",{language:function({name:e,outerLanguage:n,innerLanguage:r}){return cI.define({name:e,parser:du.configure({wrap:hJ(e=>n&&e.type.isTop?{parser:n.parser,overlay:e=>"Text"===e.type.name}:r&&"InterpolationContent"===e.name?{parser:r.parser}:null)})})}({outerLanguage:EY}),languageService:EK});var AX=!1,AU=kr({variant:"light",settings:{background:"#FFFFFF",foreground:"#1F2937",caret:"#2563EB",selection:"#E5E7EB",gutterBackground:"#F9FAFB",gutterForeground:"#6B7280",gutterBorderColor:"transparent",gutterBorderWidth:0,lineHighlight:"#F3F4F680",bracketColors:["#F59E0B","#8B5CF6","#06B6D4"],tooltip:{backgroundColor:"#FFFFFF",color:"#1F2937",border:"1px solid #E5E7EB",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},link:{color:"#2563EB"},completionItemHover:{backgroundColor:"#F3F4F6"},completionItemSelected:{backgroundColor:"#E5E7EB"},completionItemIcon:{color:"#4B5563"},completionItemLabel:{color:"#1F2937"},completionItemInfo:{color:"#4B5563"},completionItemDetail:{color:"#6B7280"}},styles:[{tag:cT.comment,color:"#6B7280"},{tag:[cT.propertyName],color:"#2563EB"},{tag:[cT.variableName],color:"#DC2626"},{tag:[cT.string],color:"#059669"},{tag:[cT.number],color:"#EA580C"},{tag:[cT.bool],color:"#7C3AED"},{tag:[cT.null],color:"#7C3AED"},{tag:[cT.separator],color:"#374151"},{tag:[cT.heading],color:"#2563EB"},{tag:[cT.processingInstruction],color:"#2563EB"},{tag:[cT.definitionKeyword],color:"#9333EA"},{tag:[cT.modifier],color:"#9333EA"},{tag:[cT.controlKeyword],color:"#9333EA"},{tag:[cT.operatorKeyword],color:"#9333EA"},{tag:[cT.standard(cT.variableName)],color:"#059669"},{tag:[cT.attributeName],color:"#EA580C"},{tag:[cT.special(cT.string)],color:"#2563EB"}]}),AY="#0D1117",AG=kr({variant:"dark",settings:{background:AY,foreground:"#E6EDF3",caret:"#7DD3FC",selection:"#264F7833",gutterBackground:AY,gutterForeground:"#6E7681",gutterBorderColor:"transparent",gutterBorderWidth:0,lineHighlight:"#21262D",bracketColors:["#FBBF24","#A78BFA","#7DD3FC"],tooltip:{backgroundColor:"#21262D",color:"#E6EDF3",border:"1px solid #30363D"},link:{color:"#58A6FF"},completionItemHover:{backgroundColor:"#21262D"},completionItemSelected:{backgroundColor:"#1F6EEB"},completionItemIcon:{color:"#8B949E"},completionItemLabel:{color:"#E6EDF3"},completionItemInfo:{color:"#8B949E"},completionItemDetail:{color:"#6E7681"}},styles:[{tag:cT.comment,color:"#8B949E"},{tag:[cT.propertyName],color:"#7DD3FC"},{tag:[cT.string],color:"#34D399"},{tag:[cT.number],color:"#FBBF24"},{tag:[cT.bool],color:"#A78BFA"},{tag:[cT.null],color:"#A78BFA"},{tag:[cT.separator],color:"#E6EDF3"},{tag:[cT.definitionKeyword],color:"#C084FC"},{tag:[cT.modifier],color:"#C084FC"},{tag:[cT.controlKeyword],color:"#C084FC"},{tag:[cT.operatorKeyword],color:"#C084FC"},{tag:[cT.heading],color:"#7DD3FC"},{tag:[cT.processingInstruction],color:"#7DD3FC"},{tag:[cT.standard(cT.variableName)],color:"#34D399"},{tag:[cT.attributeName],color:"#FBBF24"},{tag:[cT.special(cT.string)],color:"#7DD3FC"}]});_Z.register("dark",AG),_Z.register("light",AU);var AH=(eP=[aO.theme({"&.cm-focused":{outline:"none"}})],function(e){let n=e.extensions,r=(0,nl.useMemo)(()=>[...eP??[],...n??[]],[n]);return nl.createElement(l3,{...e,extensions:r,plugins:ki})});function AK({value:e,onChange:n,languageId:i="python",theme:s="light",children:o,placeholder:a,activeLinePlaceholder:l,options:h,readonly:c}){let u=(0,nl.useRef)(null);return(0,nl.useEffect)(()=>{"typescript"===i&&(()=>{if(AX)return;AX=!0;let e=new Worker(new URL(r.p+r.u("8277"),r.b),Object.assign({},{type:"module"},{type:void 0}));kG.languageService.initialize(e,{compilerOptions:{lib:["es2015","dom"],noImplicitAny:!1}})})()},[i]),(0,nl.useEffect)(()=>{u.current?.getValue()!==e&&u.current?.setValue(String(e||""))},[e]),nl.createElement(l4,null,nl.createElement(AH,{defaultValue:e,options:{uri:`file:///untitled${"python"===i?".py":"typescript"===i?".ts":"shell"===i?".sh":"json"===i?".json":""}`,languageId:i,theme:s,placeholder:a,readOnly:c,editable:!c,...h||{}},didMount:e=>{u.current=e},onChange:e=>n?.(e.value)},l&&nl.createElement(pT,null,l),o))}var AJ=nz.Ay.div`
  .ͼ1 .cm-content {
    padding: 0;
  }
`;function A0(e){return nl.createElement(AJ,null,nl.createElement(AK,{...e,options:{lineNumbersGutter:!1,foldGutter:!1,...e.options||{}}}))}var A1=[{type:"string",ConstantRenderer:e=>e?.enableMultiLineStr?nl.createElement(nc.fs,{autosize:!0,rows:1,placeholder:nh.F24.t("Please Input String"),disabled:e.readonly,...e}):nl.createElement(nc.pd,{size:"small",placeholder:nh.F24.t("Please Input String"),disabled:e.readonly,...e})},{type:"object",ConstantRenderer:e=>nl.createElement(A0,{value:e.value,onChange:n=>e.onChange?.(n),languageId:"json",placeholder:nh.F24.t("Please Input Object"),readonly:e.readonly})},{type:"number",ConstantRenderer:e=>nl.createElement(nc.YI,{placeholder:nh.F24.t("Please Input Number"),size:"small",disabled:e.readonly,hideButtons:!0,...e})},{type:"integer",ConstantRenderer:e=>nl.createElement(nc.YI,{placeholder:nh.F24.t("Please Input Integer"),size:"small",disabled:e.readonly,precision:0,...e})},{type:"boolean",ConstantRenderer:e=>{let{value:n,onChange:r,...i}=e;return nl.createElement(nc.l6,{placeholder:nh.F24.t("Please Select Boolean"),size:"small",disabled:e.readonly,optionList:[{label:nh.F24.t("True"),value:1},{label:nh.F24.t("False"),value:0}],value:+!!n,onChange:e=>r?.(!!e),...i})}},{type:"array",ConstantRenderer:e=>nl.createElement(A0,{value:e.value,languageId:"json",onChange:n=>e.onChange?.(n),placeholder:nh.F24.t("Please Input Array"),readonly:e.readonly})}];A1.forEach(e=>n$.register(e)),(0,nh.XY6)({onInit(e,n){let r=e.get(nw);A1.forEach(e=>r.register(e)),n.types?.forEach(e=>r.register(e)),n.unregisterTypes?.forEach(e=>r.unregister(e))},containerModules:[nQ]});var A2=()=>nL();function A5(e){let{includeSchema:n,excludeSchema:r,customSkip:i}=e,s=A2(),o=(0,nh.G8B)(),a=(0,nl.useCallback)(e=>{if(e.meta?.icon)return"string"==typeof e.meta.icon?nl.createElement("img",{style:{marginRight:8},width:12,height:12,src:e.meta.icon}):e.meta.icon;let n=d8.astToSchema(e.type,{drilldownObject:!1});return nl.createElement(nc.In,{size:"small",svg:s.getDisplayIcon(n||{})})},[]),l=(e,s=[])=>{let o,h=e?.type;if(!h)return null;nh.ItQ.isObject(h)&&(o=(h.properties||[]).map(n=>l(n,[...s,e])).filter(Boolean));let c=[...s.map(e=>e.key),e.key],u=c.join("."),d=!n||d8.isASTMatchSchema(h,n),p=!!r&&d8.isASTMatchSchema(h,r),f=!!i&&i(e),g=e.meta?.disabled,m=d&&!p&&!f&&!g;return m||o?.length?{key:u,label:e.meta?.title||e.key,value:u,keyPath:c,icon:a(e),children:o,disabled:!m,rootMeta:s[0]?.meta||e.meta,isRoot:!s?.length}:null};return[...o.slice(0).reverse()].map(e=>l(e)).filter(Boolean)}(0,nh.XY6)({onInit(e){let n=e.get(nh.xh9),r=e=>{nh.ItQ.isVariableDeclaration(e.ast)&&!e.ast.meta?.disabled&&e.ast.updateMeta({...e.ast.meta||{},disabled:!0})};n.onGlobalEvent("NewAST",r),n.onGlobalEvent("UpdateAST",r)}});var A4=nz.Ay.div`
  margin-right: 4px;
  min-width: 20px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  color: var(--semi-color-text-2);
`,A3=nz.Ay.div`
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;

  ${({$inSelector:e})=>e&&(0,nz.AH)`
      min-width: 50%;
    `}
`,A6=(0,nz.Ay)(nc.vw)`
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: flex-start;

  & .semi-tag-content-center {
    justify-content: flex-start;
  }

  &.semi-tag {
    margin: 0;
    height: 22px;
  }
`,A9=(0,nz.Ay)(nc.f7)`
  outline: ${({$error:e})=>e?"1px solid red":"none"};

  & .semi-tree-select-selection {
    padding: 0px;
    height: 22px;
  }

  & .semi-tree-select-selection-content {
    width: 100%;
  }

  & .semi-tree-select-selection-placeholder {
    padding-left: 10px;
  }
`,A7=nz.Ay.div`
  padding: 10px;
  display: inline-flex;
  align-items: center;
  justify-content: flex-start;
  white-space: nowrap;
`,A8=({value:e,config:n={},onChange:r,style:i,readonly:s=!1,includeSchema:o,excludeSchema:a,hasError:l,triggerRender:h})=>{let c=A5({includeSchema:o,excludeSchema:a}),u=(0,nl.useMemo)(()=>"string"==typeof e?(console.warn("The Value of VariableSelector is a string, it should be an ARRAY. \n","Please check the value of VariableSelector \n"),e):e?.join("."),[e]);return nl.createElement(nl.Fragment,null,nl.createElement(A9,{dropdownMatchSelectWidth:!1,disabled:s,treeData:c,size:"small",value:u,clearIcon:null,$error:l,style:i,validateStatus:l?"error":void 0,onChange:(e,n)=>{r(n.keyPath)},renderSelectedItem:e=>{var i;if(!e?.keyPath)return nl.createElement(A6,{prefixIcon:nl.createElement(nd,null),color:"amber",closable:!s,onClose:()=>r(void 0)},n?.notFoundContent??"Undefined");let o="string"==typeof(i=e.rootMeta?.icon||e?.icon)?nl.createElement("img",{style:{marginRight:8},width:12,height:12,src:i}):i,a=nl.createElement(A4,null,e.rootMeta?.title?`${e.rootMeta?.title} ${e.isRoot?"":"-"} `:null);return nl.createElement("div",null,nl.createElement(nc.AM,{content:nl.createElement(A7,null,o,a,nl.createElement(A3,null,e.keyPath.slice(1).join(".")))},nl.createElement(A6,{prefixIcon:o,closable:!s,onClose:()=>r(void 0)},a,!e.isRoot&&nl.createElement(A3,{$inSelector:!0},e.label))))},showClear:!1,arrowIcon:nl.createElement(np,{size:"small"}),triggerRender:h,placeholder:n?.placeholder??nh.F24.t("Select Variable")}))};A8.renderKey="variable-selector-render-key";var Me=AV(A8),Mt={display:"flex",alignItems:"center",gap:5},Mn=e=>e?.type==="array"&&e?.items?[e.type,...Mn(e.items)||[]]:e?.type?[e.type]:void 0,Mr=e=>{let[n,...r]=e||[];return"array"===n?{type:"array",items:Mr(r)}:{type:n}};function Mi(e){let{value:n,onChange:r,readonly:i,disabled:s,style:o}=e,a=(0,nl.useMemo)(()=>Mn(n),[n]),l=A2(),h=l.getDisplayIcon(n||{}),c=(0,nl.useMemo)(()=>l.getTypeRegistriesWithParentType().map(e=>{let n="array"===e.type;return{label:nl.createElement("div",{style:Mt},nl.createElement(nc.In,{size:"small",svg:e.icon}),l.getTypeBySchema(e)?.label||e.type),value:e.type,children:n?l.getTypeRegistriesWithParentType("array").map(e=>({label:nl.createElement("div",{style:Mt},nl.createElement(nc.In,{size:"small",svg:l.getDisplayIcon({type:"array",items:{type:e.type}})}),l.getTypeBySchema(e)?.label||e.type),value:e.type})):[]}}),[]),u=i||s;return nl.createElement(nc.vx,{disabled:u,size:"small",triggerRender:()=>nl.createElement(nc.K0,{size:"small",style:{...u?{pointerEvents:"none"}:{},...o||{}},disabled:u,icon:h}),treeData:c,value:a,leafOnly:!0,onChange:e=>{r?.(Mr(e))}})}Mi.renderKey="type-selector-render-key";var Ms=AV(Mi);function Mo(e){let[n,r]=(0,nl.useState)("");return(0,nl.useEffect)(()=>{r(e.value)},[e.value]),nl.createElement(E3.A,{...e,value:n,onChange:e=>{r(e)},onBlur:r=>e.onChange?.(n,r)})}var Ma=nz.Ay.div`
  /* & .semi-input {
    background-color: #fff;
    border-radius: 6px;
    height: 24px;
  } */
`,Ml=nz.Ay.div`
  display: flex;
  align-items: center;
  gap: 6px;
`,Mh=nz.Ay.div`
  cursor: pointer;
  margin-right: 5px;
`,Mc=nz.Ay.div`
  display: flex;
  flex-direction: column;
`,Mu=nz.Ay.div`
  font-size: 12px;
  color: #999;
  font-weight: 400;
  margin-bottom: 2px;
`,Md=nz.Ay.div`
  display: grid;
  grid-template-columns: auto 1fr;

  ${({$shrink:e})=>e&&(0,nz.AH)`
      padding-left: 3px;
      margin-top: 10px;
    `}
`,Mp=nz.Ay.div`
  grid-column: 1;
  position: relative;
  width: 16px;

  ${({$showLine:e,$isLast:n,$showCollapse:r})=>e&&(0,nz.AH)`
        &::before {
          /* 竖线 */
          content: '';
          height: ${n?"24px":"100%"};
          position: absolute;
          left: -14px;
          top: -16px;
          width: 1px;
          background: #d9d9d9;
          display: block;
        }

        &::after {
          /* 横线 */
          content: '';
          position: absolute;
          left: -14px; // 横线起点和竖线对齐
          top: 8px; // 跟随你的行高调整
          width: ${r?"12px":"30px"}; // 横线长度
          height: 1px;
          background: #d9d9d9;
          display: block;
        }
      `}
`,Mf=nz.Ay.div`
  grid-column: 2;
  margin-bottom: 10px;

  &:last-child {
    margin-bottom: 0px;
  }
`,Mg=nz.Ay.div`
  display: flex;
  flex-direction: column;
  gap: 10px;
  position: relative;
`,Mm=nz.Ay.div`
  display: none;

  ${({$collapse:e})=>e&&(0,nz.AH)`
      display: block;
    `}
`,My=nz.Ay.div`
  flex-grow: 1;
`,MO=nz.Ay.div``,Mv=nz.Ay.div``,Mb=nz.Ay.div`
  white-space: nowrap;
`,Mx=nl.createElement("svg",{className:"icon-icon icon-icon-coz_add_node ",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},nl.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 6.49988C11 8.64148 9.50397 10.4337 7.49995 10.8884V15.4998C7.49995 16.0521 7.94767 16.4998 8.49995 16.4998H11.208C11.0742 16.8061 11 17.1443 11 17.4998C11 17.8554 11.0742 18.1936 11.208 18.4998H8.49995C6.8431 18.4998 5.49995 17.1567 5.49995 15.4998V10.8884C3.49599 10.4336 2 8.64145 2 6.49988C2 4.0146 4.01472 1.99988 6.5 1.99988C8.98528 1.99988 11 4.0146 11 6.49988ZM6.5 8.99988C7.88071 8.99988 9 7.88059 9 6.49988C9 5.11917 7.88071 3.99988 6.5 3.99988C5.11929 3.99988 4 5.11917 4 6.49988C4 7.88059 5.11929 8.99988 6.5 8.99988Z"}),nl.createElement("path",{d:"M17.5 12.4999C18.0523 12.4999 18.5 12.9476 18.5 13.4999V16.4999H21.5C22.0523 16.4999 22.5 16.9476 22.5 17.4999C22.5 18.0522 22.0523 18.4999 21.5 18.4999H18.5V21.4999C18.5 22.0522 18.0523 22.4999 17.5 22.4999C16.9477 22.4999 16.5 22.0522 16.5 21.4999V18.4999H13.5C12.9477 18.4999 12.5 18.0522 12.5 17.4999C12.5 16.9476 12.9477 16.4999 13.5 16.4999H16.5V13.4999C16.5 12.9476 16.9477 12.4999 17.5 12.4999Z"})),Mw=()=>nl.createElement(E6.Ay$,{size:"small",svg:Mx}),MS=nz.Ay.div`
  margin: 0;
`,M_=nz.Ay.div`
  flex-grow: 1;

  & .semi-tree-select,
  & .semi-input-number,
  & .semi-select {
    width: 100%;
  }
`,Mk=0;function MC(e,n){let r=nL(),i=r.getPropertiesParent(e||{}),s=r.canAddField(e||{}),[o,a]=(0,nl.useState)([]),l=(0,nl.useRef)(0),h=(0,nl.useRef)(0);(0,nl.useEffect)(()=>{l.current=l.current+1,l.current!==h.current&&(l.current=h.current,a(e=>{let n=Object.entries(i?.properties||{}).sort(([,e],[,n])=>(e.extra?.index??0)-(n.extra?.index??0)).map(([e])=>e),r=e.map(e=>e.name).filter(Boolean),s=(0,nf.difference)(n,r);return e.filter(e=>!e.name||n.includes(e.name)).map(e=>({key:e.key,name:e.name,isPropertyRequired:i?.required?.includes(e.name||"")||!1,...i?.properties?.[e.name||""]||e||{}})).concat(s.map(e=>({key:Mk++,name:e,isPropertyRequired:i?.required?.includes(e)||!1,...i?.properties?.[e]||{}})))}))},[i]);let c=i=>{h.current=h.current+1,a(s=>{let o=i(s),a={},l=[];for(let e of o)e.name&&(a[e.name]=(0,nf.omit)(e,["key","name","isPropertyRequired"]),e.isPropertyRequired&&l.push(e.name));return n?.(TR(e||{},e=>{let n=r.getPropertiesParent(e);if(n){n.properties=a,n.required=l;return}})),o})};return(0,nl.useEffect)(()=>{s||a([])},[s]),{propertyList:o,canAddField:s,onAddProperty:()=>{a(e=>[...e,{key:Mk++,name:"",type:"string",extra:{index:e.length+1}}])},onRemoveProperty:e=>{c(n=>n.filter(n=>n.key!==e))},onEditProperty:(e,n)=>{c(r=>r.map(r=>r.key===e?n:r))}}}function ME(e){let{value:n,onChange:r,schema:i,strategies:s,fallbackRenderer:o,readonly:a,...l}=e,h=A2(),c=(0,nl.useMemo)(()=>{let e=(s||[]).find(e=>e.hit(i));return e?e?.Renderer:h.getTypeBySchema(i)?.ConstantRenderer},[s,i]);return c?nl.createElement(c,{value:n,onChange:r,readonly:a,...l}):o?nl.createElement(o,{value:n,onChange:r,readonly:a,...l}):nl.createElement(nc.pd,{size:"small",disabled:!0,placeholder:"Unsupported type"})}function MT(e){let{value:n,schema:r,onChange:i,placeholder:s}=e;return nl.createElement(M_,null,nl.createElement(ME,{value:n,onChange:e=>i(e),schema:r||{type:"string"},placeholder:s??nh.F24.t("Default value if parameter is not provided"),enableMultiLineStr:!0}))}var MP={type:"object"};function MA(e){let{value:n=MP,config:r={},onChange:i,readonly:s}=e,{propertyList:o,onAddProperty:a,onRemoveProperty:l,onEditProperty:h}=MC(n,i);return nl.createElement(Ma,{className:e.className},nl.createElement(Md,null,o.map(e=>nl.createElement(MM,{readonly:s,key:e.key,value:e,config:r,onChange:n=>{h(e.key,n)},onRemove:()=>{l(e.key)}}))),nl.createElement(nc.$n,{disabled:s,size:"small",style:{marginTop:10,marginLeft:16},icon:nl.createElement(EJ.A,null),onClick:a},r?.addButtonText??nh.F24.t("Add")))}function MM(e){let{value:n,config:r,readonly:i,$level:s=0,onChange:o,onRemove:a,$isLast:l}=e,[h,c]=(0,nl.useState)(!1),[u,d]=(0,nl.useState)(!1),{name:p,type:f,items:g,default:m,description:y,isPropertyRequired:O}=n||{},b=(0,nl.useMemo)(()=>({type:f,items:g}),[f,g]),{propertyList:x,canAddField:w,onAddProperty:S,onRemoveProperty:_,onEditProperty:k}=MC(n,o),C=(e,r)=>{o?.({...n||{},[e]:r})},E=w&&x.length>0;return nl.createElement(nl.Fragment,null,nl.createElement(Mp,{$isLast:l,$showLine:s>0,$showCollapse:E},E&&nl.createElement(Mh,{onClick:()=>d(e=>!e)},u?nl.createElement(E0.A,{size:"small"}):nl.createElement(E1.A,{size:"small"}))),nl.createElement(Mf,null,nl.createElement(Mg,null,nl.createElement(Ml,null,nl.createElement(My,null,nl.createElement(Mo,{disabled:i,placeholder:r?.placeholder??nh.F24.t("Input Variable Name"),size:"small",value:p,onChange:e=>C("name",e)})),nl.createElement(MO,null,nl.createElement(Ms,{value:b,readonly:i,onChange:e=>{o?.({...n||{},...e})}})),nl.createElement(Mv,null,nl.createElement(nc.Sc,{disabled:i,checked:O,onChange:e=>C("isPropertyRequired",e.target.checked)})),nl.createElement(Mb,null,nl.createElement(nc.K0,{disabled:i,size:"small",theme:"borderless",icon:h?nl.createElement(E2.A,{size:"small"}):nl.createElement(E5.A,{size:"small"}),onClick:()=>{c(e=>!e)}}),w&&nl.createElement(nc.K0,{disabled:i,size:"small",theme:"borderless",icon:nl.createElement(Mw,null),onClick:()=>{S(),d(!0)}}),nl.createElement(nc.K0,{disabled:i,size:"small",theme:"borderless",icon:nl.createElement(E4.A,{size:"small"}),onClick:a}))),h&&nl.createElement(Mc,null,nl.createElement(Mu,null,r?.descTitle??nh.F24.t("Description")),nl.createElement(Mo,{disabled:i,size:"small",value:y,onChange:e=>C("description",e),placeholder:r?.descPlaceholder??nh.F24.t("Help LLM to understand the property")}),0===s&&nl.createElement(nl.Fragment,null,nl.createElement(Mu,{style:{marginTop:10}},r?.defaultValueTitle??nh.F24.t("Default Value")),nl.createElement(MS,null,nl.createElement(MT,{value:m,schema:n,placeholder:r?.defaultValuePlaceholder??nh.F24.t("Default Value"),onChange:e=>C("default",e)}))))),E&&nl.createElement(Mm,{$collapse:u},nl.createElement(Md,{$shrink:!0},x.map((e,n)=>nl.createElement(MM,{readonly:i,key:e.key,value:e,config:r,$level:s+1,onChange:n=>{k(e.key,n)},onRemove:()=>{_(e.key)},$isLast:n===x.length-1}))))))}var MN={type:"array",extra:{weak:!0}};function MD(e){return nl.createElement(nh.$hw,null,nl.createElement(A8,{...e,includeSchema:MN}))}var MI=nz.Ay.div`
  display: flex;
  align-items: center;
  border-radius: 4px;
  border: 1px solid var(--semi-color-border);

  overflow: hidden;

  background-color: var(--semi-color-fill-0);
`,M$=nz.Ay.div`
  flex-grow: 1;
  overflow: hidden;
  min-width: 0;
  border-left: 1px solid var(--semi-color-border);
  border-right: 1px solid var(--semi-color-border);

  & .semi-tree-select,
  & .semi-input-number,
  & .semi-select {
    width: 100%;
    border: none;
    border-radius: 0;
  }

  & .semi-input-wrapper {
    border: none;
    border-radius: 0;
  }

  & .semi-input-textarea-wrapper {
    border: none;
    border-radius: 0;
  }

  & .semi-input-textarea {
    padding: 2px 6px;
    border: none;
    border-radius: 0;
    word-break: break-all;
  }
`,MR=nz.Ay.div`
  & .semi-button {
    border-radius: 0;
  }
`,ML=nz.Ay.div`
  & .semi-button {
    border-radius: 0;
  }
`,MQ={type:"constant",content:"",schema:{type:"string"}};function Mj({value:e,onChange:n,readonly:r,style:i,schema:s,constantProps:o}){let a=function(e){let n=(0,nh.dL5)();return(0,nl.useMemo)(()=>{if(e?.type==="ref")return n.getByKeyPath(e.content)},[e,n])}(e),[l,h]=function(e,n,r){let i=e||n?.schema||{type:"string"};r?.type==="constant"&&(i=r?.schema||i);let s=(0,nl.useRef)(0),o=(0,nl.useRef)(0),[a,l]=(0,nl.useState)(i);return(0,nl.useEffect)(()=>{if(o.current+=1,s.current!==o.current&&(o.current=s.current,r?.type==="constant"&&r?.schema))return void l(r?.schema)},[r]),[a,e=>{l(e),s.current+=1}]}(s,o,e),c=(0,nl.useMemo)(()=>{if(s)return s?.type==="number"?[s,{type:"integer"}]:{...s,extra:{...s?.extra,weak:!0}}},[s]),u=nL();return nl.createElement(MI,{style:i},nl.createElement(MR,null,(()=>{if(s)return nl.createElement(Mi,{value:s,readonly:!0});if(e?.type==="ref"){let e=a?.type?d8.astToSchema(a?.type):void 0;return nl.createElement(Mi,{value:e,readonly:!0})}return nl.createElement(Mi,{value:l,onChange:e=>{h(e||{type:"string"});let r=e||{type:"string"},i=u.getDefaultValue(r);e?.type==="object"&&(i="{}"),e?.type==="array"&&(i="[]"),n({type:"constant",content:i,schema:r})},readonly:r})})()),nl.createElement(M$,null,(()=>{if(e?.type==="ref")return nl.createElement(Me,{style:{width:"100%"},value:e?.content,onChange:e=>n(e?{type:"ref",content:e}:MQ),includeSchema:c,readonly:r});let i=s||l||{type:"string"};return nl.createElement(ME,{value:e?.content,onChange:e=>n({type:"constant",content:e,schema:i}),schema:i||{type:"string"},readonly:r,fallbackRenderer:()=>nl.createElement(Me,{style:{width:"100%"},onChange:e=>n(e?{type:"ref",content:e}:MQ),includeSchema:c,readonly:r}),...o,strategies:[...o?.strategies||[]]})})()),nl.createElement(ML,null,nl.createElement(Me,{style:{width:"100%"},value:e?.type==="ref"?e?.content:void 0,onChange:e=>n({type:"ref",content:e}),includeSchema:c,readonly:r,triggerRender:()=>nl.createElement(nc.K0,{disabled:r,size:"small",icon:nl.createElement(TL,{size:"small"})})})))}Mj.renderKey="dynamic-value-input-render-key";var MV=AV(Mj),Mz=nz.Ay.div`
  display: flex;
  align-items: center;
  gap: 4px;
`,MB=nz.Ay.div``,MF=nz.Ay.div`
  width: 100%;
`,MZ=nz.Ay.div`
  width: 100%;
`,Mq=nz.Ay.div`
  flex-grow: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
`,MW={string:{eq:"string",neq:"string",contains:"string",not_contains:"string",in:"array",nin:"array",is_empty:null,is_not_empty:null},number:{eq:"number",neq:"number",gt:"number",gte:"number",lt:"number",lte:"number",in:"array",nin:"array"},integer:{eq:"number",neq:"number",gt:"number",gte:"number",lt:"number",lte:"number",in:"array",nin:"array"},boolean:{eq:"boolean",neq:"boolean",is_true:null,is_false:null,in:"array",nin:"array"},object:{is_empty:null,is_not_empty:null},array:{is_empty:null,is_not_empty:null,contains:"array",not_contains:"array",eq:"array",neq:"array"},map:{is_empty:null,is_not_empty:null}},MX={eq:{label:"Equal",abbreviation:"="},neq:{label:"Not Equal",abbreviation:"≠"},gt:{label:"Greater Than",abbreviation:">"},gte:{label:"Greater Than or Equal",abbreviation:">="},lt:{label:"Less Than",abbreviation:"<"},lte:{label:"Less Than or Equal",abbreviation:"<="},in:{label:"In",abbreviation:"∈"},nin:{label:"Not In",abbreviation:"∉"},contains:{label:"Contains",abbreviation:"⊇"},not_contains:{label:"Not Contains",abbreviation:"⊉"},is_empty:{label:"Is Empty",abbreviation:"=",rightDisplay:"Empty"},is_not_empty:{label:"Is Not Empty",abbreviation:"≠",rightDisplay:"Empty"},is_true:{label:"Is True",abbreviation:"=",rightDisplay:"True"},is_false:{label:"Is False",abbreviation:"=",rightDisplay:"False"}},MU={ops:{},rules:{}};function MY({style:e,value:n,onChange:r,readonly:i,ruleConfig:s=MU}){let{left:o,operator:a,right:l}=n||{},{rule:h}=function(e,n){let r=(0,nh.dL5)(),i=(0,nl.useMemo)(()=>({...MW,...n||{}}),[n]),s=(0,nl.useMemo)(()=>{if(e)return r.getByKeyPath(e.content)},[r,e]);return{rule:(0,nl.useMemo)(()=>{if(!s)return;let e=d8.astToSchema(s.type,{drilldown:!1});return i[e?.type]},[s?.type,i])}}(o,s.rules),{renderOpSelect:c,opConfig:u}=function({rule:e,op:n,onChange:r,readonly:i,userOps:s}){let o=(0,nl.useMemo)(()=>Object.keys(e||{}).map(e=>({...MX[e]||{},...s?.[e]||{},value:e,label:nh.F24.t(s?.[e]?.label||MX[e]?.label)})),[e,s]),a=(0,nl.useMemo)(()=>MX[n],[n]);return{renderOpSelect:()=>nl.createElement(nc.l6,{style:{height:22},disabled:i,size:"small",value:n,optionList:o,onChange:e=>{r(e)},triggerRender:({value:n})=>nl.createElement(nc.$n,{size:"small",disabled:!e},a?.abbreviation||nl.createElement(np,{size:"small"}))}),opConfig:a}}({rule:h,op:a,onChange:e=>r({...n,operator:e}),readonly:i,userOps:s.ops}),d=(0,nl.useMemo)(()=>{let e=h?.[a||""]||null;return e?{type:e,extra:{weak:!0}}:null},[h,u]);return nl.createElement(Mz,{style:e},nl.createElement(MB,null,c()),nl.createElement(Mq,null,nl.createElement(MF,null,nl.createElement(Me,{readonly:i,style:{width:"100%"},value:o?.content,onChange:e=>r({...n,left:{type:"ref",content:e}})})),nl.createElement(MZ,null,d?nl.createElement(MV,{readonly:i||!h,value:l,schema:d,onChange:e=>r({...n,right:e})}):nl.createElement(nc.pd,{size:"small",disabled:!0,style:{pointerEvents:"none"},value:u?.rightDisplay||nh.F24.t("Empty")}))))}function MG({value:e,onChange:n,sortIndexKey:r}){let[i,s]=(0,nl.useState)([]),o=(0,nl.useRef)(0),a=(0,nl.useRef)(0),l=e=>"function"==typeof r?(0,nf.get)(e,r(e))||0:(0,nf.get)(e,r||"")||0;return(0,nl.useEffect)(()=>{o.current=o.current+1,o.current!==a.current&&(o.current=a.current,s(n=>{let r=Object.entries(e||{}).sort((e,n)=>l(e[1])-l(n[1])).map(([e])=>e),i=n.map(e=>e.key).filter(Boolean),s=(0,nf.difference)(r,i);return n.filter(e=>!e.key||r.includes(e.key)).map(n=>({id:n.id,key:n.key,value:n.key?e?.[n.key]:n.value})).concat(s.map(n=>({id:(0,Tj.Ak)(),key:n,value:e?.[n]})))}))},[e]),{list:i,add:e=>{s(n=>[...n,{id:(0,Tj.Ak)(),value:e}])},updateKey:(e,r)=>{a.current=a.current+1,s(i=>{let s=i.map(n=>n.id===e?{...n,key:r}:n);return n(Object.fromEntries(s.filter(e=>e.key).map(e=>[e.key,e.value]))),s})},updateValue:(e,i)=>{a.current=a.current+1,s(s=>{let o=s.map(n=>n.id===e?{...n,value:i}:n);return n(Object.fromEntries(o.filter(e=>e.key).map(e=>[e.key,e.value]).map((e,n)=>{let i="function"==typeof r?r(e[1]):r;return(0,nf.isObject)(e[1])&&i&&(0,nf.set)(e[1],i,n),e}))),o})},remove:e=>{a.current=a.current+1,s(r=>{let i=r.filter(n=>n.id!==e);return n(Object.fromEntries(i.filter(e=>e.key).map(e=>[e.key,e.value]))),i})}}}var MH=nz.Ay.div`
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-bottom: 10px;
`,MK=nz.Ay.div`
  display: flex;
  align-items: center;
  gap: 5px;
`;function MJ(e){let{readonly:n,style:r}=e,{list:i,add:s,updateKey:o,updateValue:a,remove:l}=MG(e);return nl.createElement("div",null,nl.createElement(MH,{style:r},i.map(e=>nl.createElement(MK,{key:e.id},nl.createElement(nc.pd,{style:{width:100},disabled:n,size:"small",value:e.key,onChange:n=>o(e.id,n)}),nl.createElement(Me,{style:{flexGrow:1},readonly:n,value:e.value?.content,onChange:n=>a(e.id,{type:"ref",content:n})}),nl.createElement(nc.$n,{disabled:n,icon:nl.createElement(TQ,null),size:"small",onClick:()=>l(e.id)})))),nl.createElement(nc.$n,{disabled:n,icon:nl.createElement(EJ.A,null),size:"small",onClick:()=>s()},nh.F24.t("Add")))}var M0=nz.Ay.div`
  background-color: var(--semi-color-fill-0);
  padding-left: 10px;
  padding-right: 6px;

  ${({$hasError:e})=>e&&(0,nz.AH)`
      border: 1px solid var(--semi-color-danger-6);
    `}
`,M1=function(){let e=l5();return(0,nl.useLayoutEffect)(()=>e.inject([dv.of(e=>e.name.startsWith("ATXHeading")?{type:"className",className:"heading"}:"Emphasis"===e.name?{type:"className",className:"emphasis"}:"StrongEmphasis"===e.name?{type:"className",className:"strong-emphasis"}:"ListMark"===e.name||"QuoteMark"===e.name?{type:"className",className:"mark"}:void 0),aO.theme({".heading":{color:"#00818C",fontWeight:"bold"},".emphasis":{fontStyle:"italic"},".strong-emphasis":{fontWeight:"bold"},".mark":{color:"#4E40E5"}})]),[e]),null},M2=function(){let e=l5();return(0,nl.useLayoutEffect)(()=>e.inject([AQ]),[e]),null},M5=function(){let e=l5();return(0,nl.useLayoutEffect)(()=>e.inject([dv.of(e=>"JinjaStatementStart"===e.name||"JinjaStatementEnd"===e.name?{type:"className",className:"jinja-statement-bracket"}:"JinjaComment"===e.name?{type:"className",className:"jinja-comment"}:"JinjaExpression"===e.name?{type:"className",className:"jinja-expression"}:void 0),aO.theme({".jinja-statement-bracket":{color:"#D1009D"},".jinja-comment":{color:"#0607094D"},".jinja-expression":{color:"#4E40E5"}})]),[e]),null};function M4(e){let{value:n,onChange:r,readonly:i,placeholder:s,activeLinePlaceholder:o,style:a,hasError:l,children:h,disableMarkdownHighlight:c,options:u}=e||{},d=(0,nl.useRef)(null);return(0,nl.useEffect)(()=>{d.current?.getValue()!==n?.content&&d.current?.setValue(String(n?.content||""))},[n]),nl.createElement(M0,{$hasError:l,style:a},nl.createElement(l4,null,nl.createElement(l3,{didMount:e=>{d.current=e},plugins:Aj,defaultValue:String(n?.content),options:{readOnly:i,editable:!i,placeholder:s,...u},onChange:e=>{r({type:"template",content:e.value})}}),o&&nl.createElement(pT,null,o),!c&&nl.createElement(M1,null),nl.createElement(M2,null),nl.createElement(M5,null),h))}function M3(){let[e,n]=(0,nl.useState)(""),[r,i]=(0,nl.useState)(!1),[s,o]=(0,nl.useState)(-1),a=l2();(0,nl.useEffect)(()=>{if(!a)return},[a,r]);let l=A5({});return nl.createElement(nl.Fragment,null,nl.createElement(pI,{triggerCharacters:["{","{}","@"],onOpenChange:function(e){o(e.state.selection.main.head),i(e.value)}}),nl.createElement(nc.AM,{visible:r,trigger:"custom",position:"topLeft",rePosKey:e,content:nl.createElement("div",{style:{width:300}},nl.createElement(nc.PH,{treeData:l,onSelect:e=>{!function(e){let n=pD(a.$view.state);if(!n)return;let{from:r,to:s}=n;for(;"{"===a.$view.state.doc.sliceString(r-1,r);)r--;for(;"}"===a.$view.state.doc.sliceString(s,s+1);)s++;a.replaceText({from:r,to:s,text:"{{"+e+"}}"}),i(!1)}(e)}}))},nl.createElement(pm,{position:s,onChange:()=>n(String(Math.random()))})))}var M6=nz.Ay.div`
  margin-right: 4px;
  min-width: 20px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  color: var(--semi-color-text-2);
`,M9=nz.Ay.div`
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
`,M7=(0,nz.Ay)(nc.vw)`
  display: inline-flex;
  align-items: center;
  justify-content: flex-start;
  max-width: 300px;

  & .semi-tag-content-center {
    justify-content: flex-start;
  }

  &.semi-tag {
    margin: 0 5px;
  }
`,M8=nz.Ay.div`
  padding: 10px;
  display: inline-flex;
  align-items: center;
  justify-content: flex-start;
`,Ne=class extends sr{constructor({keyPath:e,scope:n}){super(),this.toDispose=new nh.VdD,this.renderIcon=e=>"string"==typeof e?nl.createElement("img",{style:{marginRight:8},width:12,height:12,src:e}):e,this.keyPath=e,this.scope=n}renderVariable(e){if(!e)return void this.root.render(nl.createElement(M7,{prefixIcon:nl.createElement(nd,null),color:"amber"},"Unknown"));let n=(0,nf.last)(e.parentFields),r=nl.createElement(M6,null,n?.meta.title?`${n.meta.title} -`:""),i=this.renderIcon(n?.meta.icon);this.root.render(nl.createElement(nc.AM,{content:nl.createElement(M8,null,i,r,nl.createElement(M9,null,e?.keyPath.slice(1).join(".")))},nl.createElement(M7,{prefixIcon:i},r,nl.createElement(M9,null,e?.key))))}toDOM(e){let n=document.createElement("span");return this.root=AW(n),this.toDispose.push(nh.jGt.create(()=>{this.root.unmount()})),this.toDispose.push(this.scope.available.trackByKeyPath(this.keyPath,e=>{this.renderVariable(e)},{triggerOnInit:!1})),this.renderVariable(this.scope.available.getByKeyPath(this.keyPath)),n}eq(e){return(0,nf.isEqual)(this.keyPath,e.keyPath)}ignoreEvent(){return!1}destroy(e){this.toDispose.dispose()}};function Nt(){let e=l5(),n=(0,nh.tFm)();return(0,nl.useLayoutEffect)(()=>{let r=new aW({regexp:/\{\{([^\}\{]+)\}\}/g,decoration:e=>ss.replace({widget:new Ne({keyPath:e[1]?.split(".")??[],scope:n})})});return e.inject([sG.fromClass(class{constructor(e){this.view=e,this.decorations=r.createDeco(e)}update(){this.decorations=r.createDeco(this.view)}},{decorations:e=>e.decorations,provide:e=>aO.atomicRanges.of(n=>n.plugin(e)?.decorations??ss.none)})])},[e]),null}function Nn(e){return nl.createElement(M4,{...e},nl.createElement(M3,null),nl.createElement(Nt,null))}function Nr(){let[e,n]=(0,nl.useState)(""),[r,i]=(0,nl.useState)(!1),[s,o]=(0,nl.useState)(-1),a=l2();(0,nl.useEffect)(()=>{if(!a)return},[a,r]);let l=A5({});return nl.createElement(nl.Fragment,null,nl.createElement(pI,{triggerCharacters:["@"],onOpenChange:function(e){o(e.state.selection.main.head),i(e.value)}}),nl.createElement(nc.AM,{visible:r,trigger:"custom",position:"topLeft",rePosKey:e,content:nl.createElement("div",{style:{width:300}},nl.createElement(nc.PH,{treeData:l,onSelect:e=>{let n=pD(a.$view.state);n&&(a.replaceText({...n,text:"{{"+e+"}}"}),i(!1))}}))},nl.createElement(pm,{position:s,onChange:()=>n(String(Math.random()))})))}var Ni=nz.Ay.div`
  margin-right: 4px;
  min-width: 20px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  color: var(--semi-color-text-2);
`,Ns=nz.Ay.div`
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
`,No=(0,nz.Ay)(nc.vw)`
  display: inline-flex;
  align-items: center;
  justify-content: flex-start;
  max-width: 300px;

  & .semi-tag-content-center {
    justify-content: flex-start;
  }

  &.semi-tag {
    margin: 0 5px;
  }
`,Na=nz.Ay.div`
  padding: 10px;
  display: inline-flex;
  align-items: center;
  justify-content: flex-start;
`,Nl=class extends sr{constructor({keyPath:e,scope:n}){super(),this.toDispose=new nh.VdD,this.renderIcon=e=>"string"==typeof e?nl.createElement("img",{style:{marginRight:8},width:12,height:12,src:e}):e,this.keyPath=e,this.scope=n}renderVariable(e){if(!e)return void this.root.render(nl.createElement(No,{prefixIcon:nl.createElement(nd,null),color:"amber"},"Unknown"));let n=(0,nf.last)(e.parentFields),r=nl.createElement(Ni,null,n?.meta.title?`${n.meta.title} -`:""),i=this.renderIcon(n?.meta.icon);this.root.render(nl.createElement(nc.AM,{content:nl.createElement(Na,null,i,r,nl.createElement(Ns,null,e?.keyPath.slice(1).join(".")))},nl.createElement(No,{prefixIcon:i},r,nl.createElement(Ns,null,e?.key))))}toDOM(e){let n=document.createElement("span");return this.root=AW(n),this.toDispose.push(nh.jGt.create(()=>{this.root.unmount()})),this.toDispose.push(this.scope.available.trackByKeyPath(this.keyPath,e=>{this.renderVariable(e)},{triggerOnInit:!1})),this.renderVariable(this.scope.available.getByKeyPath(this.keyPath)),n}eq(e){return(0,nf.isEqual)(this.keyPath,e.keyPath)}ignoreEvent(){return!1}destroy(e){this.toDispose.dispose()}};function Nh(){let e=l5(),n=(0,nh.tFm)();return(0,nl.useLayoutEffect)(()=>{let r=new aW({regexp:/\{\{([^\}\{]+)\}\}/g,decoration:e=>ss.replace({widget:new Nl({keyPath:e[1]?.split(".")??[],scope:n})})});return e.inject([sG.fromClass(class{constructor(e){this.view=e,this.decorations=r.createDeco(e)}update(){this.decorations=r.createDeco(this.view)}},{decorations:e=>e.decorations,provide:e=>aO.atomicRanges.of(n=>n.plugin(e)?.decorations??ss.none)})])},[e]),null}var Nc=(d=e=>{let n=function(e,n){let r,i=new RegExp(n,n.flags.includes("g")?n.flags:n.flags+"g"),s=[];for(;null!==(r=i.exec(e));)r.index===i.lastIndex&&i.lastIndex++,s.push({match:r[0],range:[r.index,r.index+r[0].length]});return s}(e.toString(),/\{\{([^\}]*)\}\}/g);return n.length>0&&n.forEach(({range:n})=>{e.replaceRange(n[0],n[1],"null")}),e},e=>{let n=d(new _z(e));return{code:n.toString(),mapping:{originalRangeFor:n.originalRangeFor.bind(n),generatedRangeFor:n.generatedRangeFor.bind(n),originalOffsetFor:n.originalOffsetFor.bind(n),generatedOffsetFor:n.generatedOffsetFor.bind(n)}}});function Nu(e){return nl.createElement(AK,{languageId:"json",activeLinePlaceholder:nh.F24.t("Press '@' to Select variable"),...e,options:{transformer:Nc,...e.options||{}}},nl.createElement(Nr,null),nl.createElement(Nh,null))}var Nd=nz.Ay.div`
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-bottom: 10px;
`,Np=nz.Ay.div`
  display: flex;
  align-items: flex-start;
  gap: 5px;
`;function Nf({value:e,onChange:n,style:r,readonly:i,constantProps:s,schema:o,hasError:a}){let{list:l,updateKey:h,updateValue:c,remove:u,add:d}=MG({value:e,onChange:n,sortIndexKey:"extra.index"});return nl.createElement("div",null,nl.createElement(Nd,{style:r},l.map(e=>nl.createElement(Np,{key:e.id},nl.createElement(Mo,{style:{width:100,minWidth:100,maxWidth:100},disabled:i,size:"small",value:e.key,onChange:n=>h(e.id,n),placeholder:nh.F24.t("Input Key")}),nl.createElement(MV,{style:{flexGrow:1},readonly:i,value:e.value,onChange:n=>c(e.id,n),schema:o,hasError:a,constantProps:{...s,strategies:[...s?.strategies||[]]}}),nl.createElement(nc.K0,{disabled:i,theme:"borderless",icon:nl.createElement(TQ,{size:"small"}),size:"small",onClick:()=>u(e.id)})))),nl.createElement(nc.$n,{disabled:i,icon:nl.createElement(EJ.A,null),size:"small",onClick:()=>d({type:"constant",content:"",schema:{type:"string"}})},nh.F24.t("Add")))}var Ng=nz.Ay.div`
  display: flex;
  align-items: center;

  .tree-icon {
    margin-right: 8px;
    width: 14px;
    height: 14px;
  }

  height: 27px;
  white-space: nowrap;
`,Nm=nz.Ay.div`
  position: relative;

  &::before,
  &::after {
    content: '';
    position: absolute;
    background-color: var(--semi-color-text-3);
  }

  &::after {
    top: 0px;
    right: 6px;
    width: 15px;
    height: 1px;
  }
`,Ny=nz.Ay.div`
  // overflow: hidden;
  // text-overflow: ellipsis;
`,NO=nz.Ay.div`
  padding-left: 30px;
  position: relative;

  /* &::before {
    content: '';
    position: absolute;
    background-color: var(--semi-color-text-3);
    top: 0px;
    bottom: 0px;
    left: -22px;
    width: 1px;
  } */
`,Nv=nz.Ay.div`
  position: relative;

  &::before {
    content: '';
    position: absolute;
    background-color: var(--semi-color-text-3);
  }

  &:not(:last-child)::before {
    width: 1px;
    top: 0;
    bottom: 0;
    left: -22px;
  }

  &:last-child::before {
    width: 1px;
    top: 0;
    height: 14px;
    left: -22px;
  }

  ${e=>0===e.depth&&(0,nz.AH)`
      &::before {
        width: 0px !important;
      }
    `}
`;function Nb(e){return nl.createElement(Nx,{...e})}function Nx(e){let{value:n={},drilldown:r=!0,depth:i=0,showIcon:s=!0,parentKey:o=""}=e||{},a=A2(),l=a.getTypeBySchema(n),h=a.getComplexText(n),c=a?.getDisplayIcon(n),u=Object.entries((r&&l?l.getTypeSchemaProperties(n):{})||{});return nl.createElement(Nv,{depth:i,key:o||"root"},nl.createElement(Ng,null,0!==i&&nl.createElement(Nm,null),s&&c&&nl.cloneElement(c,{className:"tree-icon"}),nl.createElement(Ny,null,o?nl.createElement(nl.Fragment,null,`${o} (`,h,")"):h)),u?.length?nl.createElement(NO,null,u.map(([n,r])=>nl.createElement(Nx,{key:n,...e,parentKey:n,value:r,depth:i+1}))):null)}var Nw=nz.Ay.div`
  padding: 10px;
`,NS=(0,nz.Ay)(nc.vw)`
  padding: 4px;

  .tag-icon {
    width: 12px;
    height: 12px;
  }
`,N_=nz.Ay.span`
  display: inline-block;
  margin-left: 4px;
  margin-top: -1px;
  overflow: hidden;
  text-overflow: ellipsis;
`;function Nk({value:e={},showIconInTree:n,title:r,warning:i}){let s=A2(),o=s?.getDisplayIcon(e)||s.getDisplayIcon({type:"unknown"});return nl.createElement(nc.AM,{content:nl.createElement(Nw,null,nl.createElement(Nb,{value:e,typeManager:s,showIcon:n}))},nl.createElement(NS,{color:i?"amber":"white"},o&&nl.cloneElement(o,{className:"tag-icon"}),r&&nl.createElement(N_,null,r)))}var NC=nz.Ay.div`
  display: flex;
  gap: 5px;
  flex-wrap: wrap;
`;function NE({value:e,showIconInTree:n,displayFromScope:r}){let i=(0,nh.tFm)(),s=(0,nh.b6f)();(0,nl.useEffect)(()=>{if(!r)return()=>null;let e=i.output.onListOrAnyVarChange(()=>{s()});return()=>{e.dispose()}},[r]);let o=Object.entries((r?i.output.variables?.reduce((e,n)=>e={...e,...d8.astToSchema(n.type)?.properties||{}},{}):e?.properties||{})||{});return nl.createElement(NC,null,o.map(([e,r])=>nl.createElement(Nk,{key:e,title:e,value:r,showIconInTree:n,warning:!r})))}function NT({value:e,title:n,showIconInTree:r}){let i=(0,nh.dL5)(),s=e?.type==="ref"?i.getByKeyPath(e?.content):void 0,o=(0,nl.useMemo)(()=>e?.type==="ref"?d8.astToSchema(s?.type):e?.type==="template"?{type:"string"}:e?.type==="constant"?no.inferConstantJsonSchema(e):{type:"unknown"},[e,s?.hash]);return nl.createElement(Nk,{title:n,value:o,showIconInTree:r,warning:e?.type==="ref"&&!s})}var NP=nz.Ay.div`
  display: flex;
  gap: 5px;
  flex-wrap: wrap;
`;function NA({value:e,showIconInTree:n}){let r=Object.entries(e||{});return nl.createElement(NP,null,r.map(([e,r])=>no.isFlowValue(r)?nl.createElement(NT,{key:e,title:e,value:r,showIconInTree:n}):(0,nf.isPlainObject)(r)?nl.createElement(NM,{key:e,title:e,value:r,showIconInTree:n}):null))}function NM({value:e,title:n,showIconInTree:r}){let i=(0,nh.dL5)(),s=(0,nl.useMemo)(()=>no.inferJsonSchema(e,i.scope),[i.version,e]);return nl.createElement(Nk,{title:n,value:s,showIconInTree:r})}function NN(e){let[n,r]=(0,nl.useState)("");return(0,nl.useEffect)(()=>{r(e.value)},[e.value]),nl.createElement(E3.A,{...e,value:n,onChange:e=>{r(e)},onBlur:r=>e.onChange?.(n,r)})}function ND(e){let{value:n={operator:"assign"},onChange:r,onDelete:i,readonly:s}=e;return nl.createElement("div",{style:{display:"flex",alignItems:"center",gap:5}},nl.createElement("div",{style:{width:150,minWidth:150,maxWidth:150}},n?.operator==="assign"?nl.createElement(Me,{style:{width:"100%",height:26},value:n?.left?.content,config:{placeholder:"Select Left"},onChange:e=>r?.({...n,left:{type:"ref",content:e}})}):nl.createElement(NN,{style:{height:26},size:"small",placeholder:"Input Name",value:n?.left,onChange:e=>r?.({...n,left:e})})),nl.createElement("div",{style:{flexGrow:1}},nl.createElement(MV,{readonly:s,value:n?.right,onChange:e=>r?.({...n,right:e})})),i&&nl.createElement("div",null,nl.createElement(nc.K0,{size:"small",theme:"borderless",icon:nl.createElement(E4.A,null),onClick:()=>i?.()})))}function NI(e){let{name:n,readonly:r}=e;return nl.createElement(nh.ED_,{name:n},({field:e})=>nl.createElement(nl.Fragment,null,e.map((n,i)=>nl.createElement(ND,{key:n.key,readonly:r,value:n.value,onChange:e=>{n.onChange(e)},onDelete:()=>e.remove(i)})),nl.createElement("div",{style:{display:"flex",gap:5}},nl.createElement(nc.$n,{size:"small",theme:"borderless",icon:nl.createElement(EJ.A,null),onClick:()=>e.append({operator:"assign"})},"Assign"),nl.createElement(nc.$n,{size:"small",theme:"borderless",icon:nl.createElement(EJ.A,null),onClick:()=>e.append({operator:"declare"})},"Declaration"))))}nz.Ay.div``,nz.Ay.div`
  display: flex;
  align-items: flex-start;
  gap: 5px;
`,nz.Ay.div`
  cursor: pointer;
  margin-right: 5px;
`,nz.Ay.div`
  display: grid;
  grid-template-columns: auto 1fr;

  ${({$shrink:e})=>e&&(0,nz.AH)`
      padding-left: 3px;
      margin-top: 10px;
    `}
`,nz.Ay.div`
  grid-column: 1;
  position: relative;
  width: 16px;

  ${({$showLine:e,$isLast:n,$showCollapse:r})=>e&&(0,nz.AH)`
        &::before {
          /* 竖线 */
          content: '';
          height: ${n?"24px":"100%"};
          position: absolute;
          left: -14px;
          top: -16px;
          width: 1px;
          background: #d9d9d9;
          display: block;
        }

        &::after {
          /* 横线 */
          content: '';
          position: absolute;
          left: -14px; // 横线起点和竖线对齐
          top: 8px; // 跟随你的行高调整
          width: ${r?"12px":"30px"}; // 横线长度
          height: 1px;
          background: #d9d9d9;
          display: block;
        }
      `}
`,nz.Ay.div`
  grid-column: 2;
  margin-bottom: 10px;

  &:last-child {
    margin-bottom: 0px;
  }
`,nz.Ay.div`
  display: flex;
  flex-direction: column;
  gap: 10px;
  position: relative;
`,nz.Ay.div`
  display: none;

  ${({$collapse:e})=>e&&(0,nz.AH)`
      display: block;
    `}
`,nz.Ay.div`
  white-space: nowrap;
`;var N$=(0,nh.law)({private:!0,parse:(e,n)=>[nh.vi.createVariableDeclaration({key:`${n.node.id}_locals`,meta:{title:(0,nh.BAU)(n.node)?.getValueIn("title"),icon:n.node.getNodeRegistry().info?.icon},type:nh.vi.createObject({properties:[nh.vi.createProperty({key:"item",initializer:nh.vi.createEnumerateExpression({enumerateFor:nh.vi.createKeyPathExpression({keyPath:e.content||[]})})}),nh.vi.createProperty({key:"index",type:nh.vi.createNumber()})]})})]}),NR=[{event:nh.Poj.onValueInit,effect:e=>{let{context:n,form:r,name:i}=e,s=n.node.getService(nh.DgO).onRename(({before:e,after:n})=>{let s=[...e.parentFields.map(e=>e.key).reverse(),e.key],o=[...n.parentFields.map(e=>e.key).reverse(),n.key];var a=i,l=r.getValueIn(i),h=(e,n)=>{if("ref"===n.type)NL(n.content,s)&&(n.content=[...o,...(n.content||[])?.slice(s.length)],r.setValueIn(e,n));else if("template"===n.type){let i=no.getTemplateKeyPaths(n),a=!1;i.forEach(e=>{if(NL(e,s)){a=!0;let r=[...o,...(e||[])?.slice(s.length)];n.content=n.content?.replace(`{{${e.join(".")}}`,`{{${r.join(".")}}`)}}),a&&r.setValueIn(e,{...n})}};for(let{value:e,path:n}of no.traverse(l,{includeTypes:["ref","template"],path:a}))h(n,e)});return()=>{s.dispose()}}}];function NL(e=[],n){return n.every((n,r)=>n===e[r])}var NQ=(0,nh.law)({parse:(e,n)=>[nh.vi.createVariableDeclaration({key:`${n.node.id}`,meta:{title:(0,nh.BAU)(n.node)?.getValueIn("title")||n.node.id,icon:n.node.getNodeRegistry().info?.icon},type:d8.schemaToAST(e)})]}),Nj=[{event:nh.Poj.onValueChange,effect:({value:e,context:n})=>{n.node.getData(nh.D31).allScopes.forEach(r=>{r.output.variables.forEach(r=>{r.updateMeta({...r.meta||{},title:e||n.node.id,icon:n.node.getNodeRegistry().info?.icon})})})}}],NV=({scope:e}={})=>[{event:nh.Poj.onValueInit,effect:({context:n,form:r})=>{let i=("private"===e?(0,nh._v9)(n.node):(0,nh.$p9)(n.node)).available.onListOrAnyVarChange(()=>{(0,nf.isEmpty)(r.state.errors)||r.validate()});return()=>i.dispose()}}],Nz=e=>[{event:nh.Poj.onValueInitOrChange,effect:n=>{let{context:r,value:i}=n;if(i?.type!=="ref")return()=>null;let s=(0,nh.$p9)(r.node).available.trackByKeyPath(i?.content||[],r=>{e({...n,schema:d8.astToSchema(r)})},{selector:e=>e?.type});return()=>{s.dispose()}}}],NB=(0,nh.law)({parse:(e,n)=>[nh.vi.createVariableDeclaration({key:`${n.node.id}`,meta:{title:(0,nh.BAU)(n.node)?.getValueIn("title"),icon:n.node.getNodeRegistry().info?.icon},type:nh.vi.createObject({properties:Object.entries(e).map(([e,n])=>nh.vi.createProperty({key:e,initializer:nh.vi.createWrapArrayExpression({wrapFor:nh.vi.createKeyPathExpression({keyPath:n?.content||[]})})}))})})]}),NF=(0,nh.$7r)({name:"batch-outputs-plugin",onSetupFormMeta({mergeEffect:e},{outputKey:n}){e({[n]:NB})},onInit(e,{outputKey:n}){let r=e.node.getService(nh.fSl),i=e.node.flowNodeType,s=`${i}-outputs`;r.hasTransformer(s)||r.registerTransformer(s,{transformCovers:(e,n)=>{let r=n.scope.meta?.node;return r?.parent?.flowNodeType===i?[...e,(0,nh.$p9)(r.parent)]:e},transformDeps(e,n){let r=n.scope.meta;if(r?.type===nh.byp.private)return e;let s=r?.node;if(s?.flowNodeType===i){let e=s.blocks;return[(0,nh._v9)(s),...e.map(e=>(0,nh.$p9)(e))]}return e}})}}),NZ=(0,nh.$7r)({onSetupFormMeta({addFormatOnSubmit:e},{sourceKey:n,targetKey:r,scope:i}){n&&r&&e((e,s)=>((0,nf.set)(e,r,no.inferJsonSchema((0,nf.get)(e,n),"private"===i?(0,nh._v9)(s.node):(0,nh.$p9)(s.node))),e))}}),Nq=(0,nh.$7r)({onSetupFormMeta({addFormatOnSubmit:e,mergeEffect:n},{assignKey:r,outputKey:i}){r&&i&&(n({[r]:(0,nh.law)({parse:(e,n)=>{let r=(0,nf.uniqBy)(e.filter(e=>"declare"===e.operator&&e.left&&e.right),"left");return[nh.vi.createVariableDeclaration({key:`${n.node.id}`,meta:{title:(0,nh.BAU)(n.node)?.getValueIn("title"),icon:n.node.getNodeRegistry().info?.icon},type:nh.vi.createObject({properties:r.map(e=>nh.vi.createProperty({key:e.left,type:e.right?.type==="constant"?d8.schemaToAST(e.right?.schema||{}):void 0,initializer:e.right?.type==="ref"?nh.vi.createKeyPathExpression({keyPath:e.right?.content||[]}):{}}))})})]}})}),e((e,n)=>((0,nf.set)(e,i,d8.astToSchema((0,nh.$p9)(n.node).output.variables?.[0]?.type)),e)))}});function NW(e,n){let{node:r,required:i,errorMessages:s}=n,{required:o="Field is required",unknownVariable:a="Unknown Variable"}=s||{};if(i&&((0,nf.isNil)(e)||(0,nf.isNil)(e?.content)||e?.content===""))return{level:nh.S_f.Error,message:o};if(e?.type==="ref"&&!(0,nh.$p9)(r).available.getByKeyPath(e?.content||[]))return{level:nh.S_f.Error,message:a};if(e?.type==="template"){for(let n of no.getTemplateKeyPaths(e))if(!(0,nh.$p9)(r).available.getByKeyPath(n))return{level:nh.S_f.Error,message:a}}}},26768:function(e,n,r){"use strict";r.d(n,{D0:()=>$,DG:()=>q,ED:()=>Y,FH:()=>U,N0:()=>S,RC:()=>F,S_:()=>w,fo:()=>a,ks:()=>A,lV:()=>X});var i,s,o,a,l,h=r(96540),c=r(2543),u=r(67055),d=r(89723),p=r(51548),f=r(36833),g=e=>null!==e&&"object"==typeof e,m=e=>String(Math.floor(Number(e)))===e;function y(e,n){let r=new Set(n),i={};return Object.keys(e).forEach(n=>{r.has(n)&&(i[n]=e[n])}),i}var O=a||(a={});function b(e,...n){let r=n.shift();if(void 0===r)return e.toString();let i="";return(i=""===e&&""===r?"":""!==e&&""===r?e.toString():""===e&&""!==r?r.toString():`${e}${O.DIVIDER}${r}`,n.length>0)?b(i,...n):i}function x(e,n,r){if(!e||!n)return[];let i=n.split(O.DIVIDER),s=i.shift(),o=[],a=e;for(;s;){if("object"!=typeof a||null===a)return[];if(s===O.ALL){let e=o.join(O.DIVIDER);return(0,c.flatten)(Object.keys(a).map(n=>0===i.length?b(e,n):x(a[n],`${i.join(O.DIVIDER)}`,r).map(r=>b(e,n,r))))}if(!(s in a)&&!r)return[];a=a[s],o.push(s),s=i.shift()}return[n]}O.DIVIDER=".",O.ALL="*",O.isMatch=function(e,n){let r=e.split(O.DIVIDER),i=n.split(O.DIVIDER);return r.length===i.length&&r.every((e,n)=>e===O.ALL||e===i[n])},O.isMatchOrParent=function(e,n){if(""===e)return!0;let r=e.split(O.DIVIDER),i=n.split(O.DIVIDER);if(r.length>i.length)return!1;for(let e=0;e<r.length;e++)if(r[e]!==O.ALL&&r[e]!==i[e])return!1;return!0},O.getParentPathByPattern=function(e,n){let r=e.split(O.DIVIDER);return n.split(O.DIVIDER).slice(0,r.length).join(O.DIVIDER)},O.getSubPaths=function(e,n){return n&&"object"==typeof n?(0,c.flatten)(e.map(e=>{let r=""===e?n:(0,c.get)(n,e);return(0,c.isArray)(r)?r.map((n,r)=>b(e,r)):(0,c.isObject)(r)?Object.keys(r).map(n=>b(e,n)):[]})):[]},O.splitPattern=function(e){let n=e.split(O.DIVIDER),r=[],i=0,s=[];for(;i<n.length;)n[i]===O.ALL?(s.length&&r.push(s.join(O.DIVIDER)),r.push(O.ALL),s=[]):s.push(n[i]),i+=1;return s.length&&r.push(s.join(O.DIVIDER)),r},O.findMatchPaths=x,O.findMatchPathsWithEmptyValue=function(e,n){return n.includes("*")?x(e,n,!0):[n]};var w=((i=w||{}).Error="error",i.Warning="warning",i),S=((s=S||{}).onChange="onChange",s.onBlur="onBlur",s),_=class e{constructor(e){this._path=[],this._path=(0,c.toPath)(e)}get parent(){if(!(this._path.length<2))return new e(this._path.slice(0,-1))}toString(){return this._path.join(".")}get value(){return this._path}isChild(n){let r=new e(n).value,i=this.value;if(r.length-i.length!=1)return!1;for(let e=0;e<i.length;e++)if(r[e]!==i[e])return!1;return!0}static compareArrayPath(e,n){let r=0;for(;e.value[r]&&n.value[r];){let i=parseInt(e.value[r]),s=parseInt(n.value[r]);if(!isNaN(i)&&!isNaN(s))return i-s;if(e.value[r]!==n.value[r])throw Error(`[Form] Path.compareArrayPath invalid input Error: two path should refers to the same array, but got path1: ${e.toString()}, path2: ${n.toString()}`);r++}throw Error(`[Form] Path.compareArrayPath invalid input Error: got path1: ${e.toString()}, path2: ${n.toString()}`)}isChildOrGrandChild(n){let r=new e(n).value,i=this.value;if(r.length-i.length<1)return!1;for(let e=0;e<i.length;e++)if(r[e]!==i[e])return!1;return!0}getArrayIndex(e){return parseInt(this._path[e.value.length])}concat(n){if("string"==typeof n||"number"==typeof n)return new e(this._path.concat(new e(n.toString())._path));throw Error(`[Form] Error in Path.concat: invalid param type, require number or string, but got ${typeof n}`)}replaceParent(n,r){if(n.value.length>this.value.length)throw Error(`[Form] Error in Path.replaceParent: invalid parent param: ${n}, parent length should not greater than current length.`);let i=[];for(let e=0;e<this.value.length;e++){if(e<n.value.length&&n.value[e]!==this.value[e])throw Error(`[Form] Error in Path.replaceParent: invalid parent param: '${n}' is not a parent of '${this.toString()}'`);e>=n.value.length&&i.push(this.value[e])}return new e(r.value.concat(i))}};function k(e,n){return(e||[]).map(e=>({...e,name:n}))}function C(e,n){return n?e?Object.keys(n).some(r=>!(0,c.isEqual)(e[r],n[r]))?{...e,...n}:e:{...n}:e}function E(e,n){return n&&e in n&&delete n[e],n}function T(e){let n={get name(){return e.name},get value(){return e.value},onChange:n=>{"object"==typeof n&&null!==n&&"target"in n&&"object"==typeof n.target?e.value="object"==typeof n&&null!==n&&"target"in n&&"object"==typeof n.target&&"checkbox"===n.target.type?n.target.checked:n.target.value:e.value=n},onBlur(){"onBlur"===e.form.validationTrigger&&e.validate()},onFocus(){e.state.isTouched=!0}};return Object.defineProperty(n,"key",{enumerable:!1,get:()=>e.id}),Object.defineProperty(n,"_fieldModel",{enumerable:!1,get:()=>e}),n}function P(e){return{get isTouched(){return e.isTouched},get invalid(){return e.invalid},get isDirty(){return e.isDirty},get isValidating(){return e.isValidating},get errors(){if(e.errors)return Object.values(e.errors).reduce((e,n)=>e.concat(n),[]);return},get warnings(){if(e.warnings)return Object.values(e.warnings).reduce((e,n)=>e.concat(n),[]);return}}}function A(e){let n={initialValues:e.initialValues,get values(){return e.values},set values(v){e.values=v},state:M(e.state),getValueIn:n=>e.getValueIn(n),setValueIn:(n,r)=>e.setValueIn(n,r),validate:e.validate.bind(e)};return Object.defineProperty(n,"_formModel",{enumerable:!1,get:()=>e}),n}function M(e){return{get isTouched(){return e.isTouched},get invalid(){return e.invalid},get isDirty(){return e.isDirty},get isValidating(){return e.isValidating},get errors(){return e.errors},get warnings(){return e.warnings}}}(o=l||(l={})).shouldTriggerFieldChangeEvent=function(e,n){let{name:r,options:i}=e;return!!a.isMatchOrParent(n,r)||!!new _(r).isChildOrGrandChild(n)&&(i?.action==="array-append"?!new _(r).isChildOrGrandChild(n):!(i?.action==="array-splice"&&i?.indexes?.length)||_.compareArrayPath(new _(n),new _(r).concat(i.indexes[0]))>=0)},o.shouldTriggerFieldValidateWhenChange=function(e,n){let{name:r,options:i}=e;return i?.action==="array-splice"||i?.action==="array-swap"?n===r:o.shouldTriggerFieldChangeEvent(e,n)};var N=h.createContext({}),D=h.createContext({});function I(){return(0,h.useContext)(N)}function $({name:e,defaultValue:n,render:r,children:i,deps:s}){let o=I(),a=o.getField(e)||o.createField(e),l=h.useMemo(()=>T(a),[a]),p=(0,d.KN)(a.reactiveState),f=(0,d.KN)(o.reactiveState),g=h.useMemo(()=>P(p),[p]),m=M(f),y=(0,u.b6)();return(h.useEffect(()=>{if(a.disposed)return y(),()=>{};a.renderCount=a.renderCount+1,o.getValueIn(e),void 0!==n&&(o.setInitValueIn(e,n),y());let r=new u.Vd;return r.push(a.onValueChange(()=>{y()})),s&&s.forEach(e=>{let n=o.getField(e)?.onValueChange(()=>{y()});n&&r.push(n)}),()=>{r.dispose(),a.renderCount>1?a.renderCount=a.renderCount-1:o.getField(a.name)===a&&a.dispose()}},[a]),a.disposed)?h.createElement(h.Fragment,null):h.createElement(D.Provider,{value:a},r?r({field:l,fieldState:g,formState:m}):(0,c.isFunction)(i)?i({field:l,fieldState:g,formState:m}):h.cloneElement(i,{...l}))}function R(e){let n={get key(){return e.id},get name(){return e.path.toString()},get value(){return e.value},onChange:n=>{e.value=n},map:n=>e.map((e,r)=>n(T(e),r)),append:n=>T(e.append(n)),delete:n=>e.delete(n),remove:n=>e.delete(n),swap:(n,r)=>e.swap(n,r),move:(n,r)=>e.move(n,r)};return Object.defineProperty(n,"_fieldModel",{enumerable:!1,get:()=>e}),n}function L(e,n){return"string"==typeof e?{name:n,message:e,level:"error"}:e?.message?{...e,name:n}:void 0}function Q(e,n){return{[e]:n?[n]:[]}}var j={invalid:!1,isDirty:!1,isTouched:!1,isValidating:!1},V={invalid:!1,isDirty:!1,isTouched:!1,isValidating:!1},z=class{get values(){return(0,c.clone)(this._values)}set values(e){this._values=(0,c.cloneDeep)(e)}setIn(e,n){this._values=function(e,n,r){let i=(0,c.clone)(e),s=i,o=0,a=(0,c.toPath)(n);for(;o<a.length-1;o++){let n=a[o],r=function(e,n,r,i=0){let s=(0,c.toPath)(n);for(;e&&i<s.length;)e=e[s[i++]];return i===s.length||e?void 0===e?void 0:e:void 0}(e,a.slice(0,o+1));if(r&&(g(r)||Array.isArray(r)))s=s[n]=(0,c.clone)(r);else{let e=a[o+1];s=s[n]=m(e)&&Number(e)>=0?[]:{}}}return(0===o?e:s)[a[o]]===r&&a[o]in e?e:(s[a[o]]=r,i)}(this._values||{},e.toString(),n)}getIn(e){return(0,c.get)(this.values,e.value)}dispose(){}},B=class{constructor(e,n){this.onValueChangeEmitter=new u.vl,this.onValueChange=this.onValueChangeEmitter.event,this.toDispose=new u.Vd,this._state=new d.vK({...j}),this._renderCount=0,this._mount=!1,this._path=e,this.form=n,this.id=(0,f.Ak)();let r=this.form.onFormValuesChange(e=>{let{values:n,prevValues:r}=e;l.shouldTriggerFieldChangeEvent(e,this.name)&&(this.onValueChangeEmitter.fire({value:(0,c.get)(n,this.name),prevValue:(0,c.get)(r,this.name),formValues:n,prevFormValues:r}),"onChange"===this.form.validationTrigger&&l.shouldTriggerFieldValidateWhenChange(e,this.name)&&this.validate())});this.toDispose.push(r),this.toDispose.push(this.onValueChangeEmitter),this.initState()}get renderCount(){return this._renderCount}set renderCount(e){this._renderCount=e}initState(){let e=(0,c.get)(this.form.state.errors,this.name),n=(0,c.get)(this.form.state.warnings,this.name);e&&(this.state.errors={[this.name]:e}),n&&(this.state.warnings={[this.name]:n})}get path(){return this._path}get name(){return this._path.toString()}set name(e){this._path=new _(e)}get ref(){return this._ref}set ref(e){this._ref=e}get state(){return this._state.value}get reactiveState(){return this._state}get value(){return this.form.getValueIn(this.name)}set value(e){this.form.setValueIn(this.name,e),this.state.isTouched||(this.state.isTouched=!0,this.bubbleState())}updateNameForLeafState(e){let{errors:n,warnings:r}=this.state,i=n?Object.keys(n)?.[0]:void 0;i&&n?.[i]&&i!==e&&(this.state.errors={[e]:n?.[i]?k(n?.[i],e):n?.[i]});let s=r?Object.keys(r)?.[0]:void 0;s&&r?.[s]&&s!==e&&(this.state.warnings={[e]:r?.[s]?k(r?.[s],e):r?.[s]})}updateValidate(e,n){"ui"===n&&this.originalValidate||(this.originalValidate=e)}bubbleState(){let{errors:e,warnings:n}=this.state;if(this.parent){this.parent.state.isTouched=(0,c.some)(this.parent.children.map(e=>e.state.isTouched),Boolean),this.parent.state.invalid=(0,c.some)(this.parent.children.map(e=>e.state.invalid),Boolean),this.parent.state.isDirty=(0,c.some)(this.parent.children.map(e=>e.state.isDirty),Boolean),this.parent.state.isValidating=(0,c.some)(this.parent.children.map(e=>e.state.isValidating),Boolean),this.parent.state.errors=e?C(this.parent.state.errors,e):E(this.name,this.parent.state.errors),this.parent.state.warnings=n?C(this.parent.state.warnings,n):E(this.name,this.parent.state.warnings),this.parent.bubbleState();return}this.form.state.isTouched=(0,c.some)(this.form.fields.map(e=>e.state.isTouched),Boolean),this.form.state.invalid=(0,c.some)(this.form.fields.map(e=>e.state.invalid),Boolean),this.form.state.isDirty=(0,c.some)(this.form.fields.map(e=>e.state.isDirty),Boolean),this.form.state.isValidating=(0,c.some)(this.form.fields.map(e=>e.state.isValidating),Boolean),this.form.state.errors=e?C(this.form.state.errors,e):E(this.name,this.form.state.errors),this.form.state.warnings=n?C(this.form.state.warnings,n):E(this.name,this.form.state.warnings)}clearState(){this.state.errors=j.errors,this.state.warnings=j.warnings,this.state.isTouched=j.isTouched,this.state.isDirty=j.isDirty,this.bubbleState()}get children(){let e=[];return this.form.fieldMap.forEach((n,r)=>{this.path.isChild(r)&&e.push(n)}),e}get parent(){let e=this.path.parent;if(e)return this.form.fieldMap.get(e.toString())}clear(){this.value&&(this.value=void 0)}async validate(){await this.validateSelf()}async validateSelf(){this.state.isValidating=!0,this.bubbleState();let{errors:e,warnings:n}=await this._runAsyncValidate();e?.length?(this.state.errors=(0,c.groupBy)(e,"name"),this.state.invalid=!0):(this.state.errors={[this.name]:[]},this.state.invalid=!1),n?.length?this.state.warnings=(0,c.groupBy)(n,"name"):this.state.warnings={[this.name]:[]},this.state.isValidating=!1,this.bubbleState(),this.form.onValidateEmitter.fire(this.form.state)}async _runAsyncValidate(){let e=[],n=[],r=await this.form.validateIn(this.name);if(!r?.length)return{};{let i=r.map(e=>L(e,this.name)).filter(Boolean);if(!i?.length)return{};let s=(0,c.groupBy)(i,"level");n=n.concat(s.warning||[]),e=e.concat(s.error||[])}return{errors:e,warnings:n}}updateState(e){}dispose(){this.children.map(e=>e.dispose()),this.toDispose.dispose(),this.form.fieldMap.delete(this.path.toString())}onDispose(e){this.toDispose.onDispose(e)}get disposed(){return this.toDispose.disposed}},F=class extends B{constructor(){super(...arguments),this.onAppendEmitter=new u.vl,this.onAppend=this.onAppendEmitter.event,this.onDeleteEmitter=new u.vl,this.onDelete=this.onDeleteEmitter.event}get children(){let e=[];return this.form.fieldMap.forEach((n,r)=>{this.path.isChild(r)&&e.push(n)}),e.sort((e,n)=>{let r=e.path.value,i=n.path.value;return parseInt(r[r.length-1])-parseInt(i[i.length-1])})}map(e){return(this.value||[]).map((e,n)=>{let r=this.path.concat(n).toString(),i=this.form.getField(r);return i||(i=this.form.createField(r)),i}).map(e)}append(e){let n=this.value?.length||0,r=this.path.concat(n).toString(),i=this.form.createField(r),s=this.value?[...this.value,e]:[e],o=this.form.values;return this.form.store.setIn(new _(this.name),s),this.form.fireOnFormValuesChange({values:this.form.values,prevValues:o,name:this.name,options:{action:"array-append",indexes:[n]}}),this.form.fireOnFormValuesInit({values:this.form.values,prevValues:o,name:r}),this.onAppendEmitter.fire({value:e,arrayValue:this.value,index:this.value.length-1}),i}delete(e){this._splice(e,1),this.onDeleteEmitter.fire({arrayValue:this.value,index:e})}_splice(e,n=1){if(e<0||n<0)throw Error("[Form] Error in FieldArrayModel.splice: Invalid Params, start and deleteCount should > 0");if(!this.value||0===this.value.length||n>this.value.length)throw Error(`[Form] Error in FieldArrayModel.splice: delete count exceeds array length, tried to delete ${n} elements, but array length is ${this.value?.length||0}`);let r=this.form.values,i=[...this.value];i.splice(e,n),this.form.store.setIn(new _(this.name),i),this.form.fireOnFormValuesChange({values:this.form.values,prevValues:r,name:this.name,options:{action:"array-splice",indexes:Array.from({length:n},(n,r)=>r+e)}});let s=this.children;if(e+n>=s.length)for(let n=e;n<s.length;n++)this.form.disposeField(s[n].name);let o=[],a=new Map(this.form.fieldMap),l=(r,i)=>{if(r.children?.length&&r.children.forEach(e=>{l(e,i)}),i<e)a.set(r.name,r);else if(i<e+n)o.push(r);else{let e=r.name,o=r.path.replaceParent(this.path.concat(i),this.path.concat(i-n)).toString();a.set(o,r),r.children.length||(r.updateNameForLeafState(o),r.bubbleState()),r.name=o,i>s.length-n-1&&a.delete(e)}};s.map((e,n)=>{l(e,n)}),o.forEach(e=>{e.dispose()}),this.form.fieldMap=a,this.form.alignStateWithFieldMap()}swap(e,n){if(!this.value)return;if(e<0||n<0||e>this.value.length-1||n>this.value.length-1)throw Error(`[Form]: FieldArrayModel.swap Error: invalid params 'form' and 'to', form=${e} to=${n}. expect the value between 0 to ${length-1}`);let r=this.form.values,i=[...this.value],s=i[e],o=i[n];i[n]=s,i[e]=o,this.form.store.setIn(this.path,i),this.form.fireOnFormValuesChange({values:this.form.values,prevValues:r,name:this.name,options:{action:"array-swap",indexes:[e,n]}});let a=new Map(this.form.fieldMap),l=this.findAllFieldsAt(e),h=this.findAllFieldsAt(n),c=this.getPathAt(e),u=this.getPathAt(n),d=[];l.forEach(e=>{let n=e.path.replaceParent(c,u).toString();e.name=n,e.children.length||(e.updateNameForLeafState(n),d.push(e)),a.set(n,e)}),h.forEach(e=>{let n=e.path.replaceParent(u,c).toString();e.name=n,e.children.length||e.updateNameForLeafState(n),a.set(n,e),d.push(e)}),this.form.fieldMap=a,d.forEach(e=>e.bubbleState()),this.form.alignStateWithFieldMap()}move(e,n){if(!this.value)return;if(e<0||n<0||e>this.value.length-1||n>this.value.length-1)throw Error(`[Form]: FieldArrayModel.move Error: invalid params 'form' and 'to', form=${e} to=${n}. expect the value between 0 to ${length-1}`);let r=[...this.value],i=r[e];r.splice(e,1),r.splice(n,0,i),this.form.setValueIn(this.name,r)}insertAt(e,n){if(!this.value)return;if(e<0||e>this.value.length)throw Error("[Form]: FieldArrayModel.insertAt Error: index exceeds array boundary");let r=[...this.value];r.splice(e,0,n),this.form.setValueIn(this.name,r)}getPathAt(e){return this.path.concat(e)}findAllFieldsAt(e){let n=this.getPathAt(e),r=n.toString(),i=this.form.fieldMap.get(r)?[this.form.fieldMap.get(r)]:[];return this.form.fieldMap.forEach((e,r)=>{n.isChildOrGrandChild(r)&&i.push(e)}),i}},Z=class{constructor(){this._fieldMap=new Map,this.store=new z,this._options={},this.onFieldModelCreateEmitter=new u.vl,this.onFieldModelCreate=this.onFieldModelCreateEmitter.event,this.onFormValuesChangeEmitter=new u.vl,this.onFormValuesChange=this.onFormValuesChangeEmitter.event,this.onFormValuesInitEmitter=new u.vl,this.onFormValuesInit=this.onFormValuesInitEmitter.event,this.onFormValuesUpdatedEmitter=new u.vl,this.onFormValuesUpdated=this.onFormValuesUpdatedEmitter.event,this.onValidateEmitter=new u.vl,this.onValidate=this.onValidateEmitter.event,this._state=new d.vK({...V}),this._initialized=!1,this.validateDisabled=!1}set fieldMap(e){this._fieldMap=e}get fieldMap(){return this._fieldMap}get context(){return this._options.context}get initialValues(){return this._options.initialValues}get values(){return this.store.values}set values(e){let n=this.values;(0,p.deepEqual)(n,e)||(this.store.values=e,this.fireOnFormValuesChange({values:this.values,prevValues:n,name:""}))}get validationTrigger(){return this._options.validateTrigger}get state(){return this._state.value}get reactiveState(){return this._state}get fields(){return Array.from(this.fieldMap.values())}updateState(e){}get initialized(){return this._initialized}fireOnFormValuesChange(e){this.onFormValuesChangeEmitter.fire(e),this.onFormValuesUpdatedEmitter.fire(e)}fireOnFormValuesInit(e){this.onFormValuesInitEmitter.fire(e),this.onFormValuesUpdatedEmitter.fire(e)}init(e){if(this._options=e,e.initialValues){let n=this.store.values;this.store.values=e.initialValues,this.fireOnFormValuesInit({values:e.initialValues,prevValues:n,name:""})}this._initialized=!0}createField(e,n){let r=new _(e),i=r.toString();if(this.fieldMap.get(i))return this.fieldMap.get(i);let s=n?new F(r,this):new B(r,this);return this.fieldMap.set(i,s),s.onDispose(()=>{this.fieldMap.delete(i)}),this.onFieldModelCreateEmitter.fire(s),s}createFieldArray(e,n){return this.createField(e,!0)}disposeField(e){let n=this.fieldMap.get(e);n&&n.dispose()}deleteField(e){let n=this.fieldMap.get(e);n&&(n.clear(),n.dispose())}getField(e){return this.fieldMap.get(new _(e).toString())}getValueIn(e){return this.store.getIn(new _(e))}setValueIn(e,n){let r=this.values;this.store.setIn(new _(e),n),this.fireOnFormValuesChange({values:this.values,prevValues:r,name:e})}setInitValueIn(e,n){let r=new _(e);if(void 0===this.store.getIn(r)){let r=this.values;this.store.setIn(new _(e),n),this.fireOnFormValuesInit({values:this.values,prevValues:r,name:e})}}clearValueIn(e){this.setValueIn(e,void 0)}async validateIn(e){if(this.validateDisabled)return[];let n=this.getValidateOptions();if(n)return Promise.all(Object.keys(n).filter(n=>a.isMatch(n,e)).map(async r=>(0,n[r])({value:this.getValueIn(e),formValues:this.values,context:this.context,name:e})))}getValidateOptions(){let e=this._options.validate;return"function"==typeof e?e(this.values,this.context):e}async validate(){if(this.validateDisabled)return[];let e=this.getValidateOptions();if(!e)return[];let n=Object.keys(e).map(async n=>{let r=e[n],i=this.values;return Promise.all(a.findMatchPathsWithEmptyValue(i,n).map(async e=>{var n;let s=L(await r({value:(0,c.get)(i,e),formValues:i,context:this.context,name:e}),e),o=this.getField(e),a=Q(e,s?.level==="error"?s:void 0),l=Q(e,s?.level==="warning"?s:void 0);o&&(o.state.errors=a,o.state.warnings=l,o.state.invalid=Object.keys(a).some(e=>a[e]?.length>0),o.bubbleState());return this.state.errors=C(this.state.errors,a),this.state.warnings=C(this.state.warnings,l),this.state.invalid=!(!(n=this.state.errors)||Object.keys(n).every(e=>(0,c.isEmpty)(n[e]))),s}))});this.state.isValidating=!0;let r=await Promise.all(n);return this.state.isValidating=!1,this.onValidateEmitter.fire(this.state),(0,c.flatten)(r).filter(Boolean)}alignStateWithFieldMap(){let e=Array.from(this.fieldMap.keys());this.state.errors&&(this.state.errors=y(this.state.errors,e)),this.state.warnings&&(this.state.warnings=y(this.state.warnings,e)),this.fieldMap.forEach(n=>{n.state.errors&&(n.state.errors=y(n.state.errors,e)),n.state.warnings&&(n.state.warnings=y(n.state.warnings,e))})}dispose(){this.fieldMap.forEach(e=>e.dispose()),this.store.dispose(),this._initialized=!1}};function q(e){let{disableAutoInit:n=!1,...r}=e||{},i=new Z;return n||i.init(r||{}),{form:A(i),control:{_formModel:i,getField:e=>{let n=i.getField(e);if(n)return n instanceof F?R(n):T(n)},init:()=>i.init(r||{})}}}function W(e){let{form:n,render:r}=e;return h.createElement(h.Fragment,null,r({form:n}))}function X(e){let{children:n,keepModelOnUnMount:r=!1,control:i,...s}=e,{_formModel:o}=(0,h.useMemo)(()=>i||q(s).control,[i]);(0,h.useEffect)(()=>()=>{r||o.dispose()},[]);let a=(0,h.useMemo)(()=>A(o),[o]);return h.createElement(N.Provider,{value:o},n?(0,c.isFunction)(n)?h.createElement(W,{form:a,render:n}):h.Children.only(n):null)}function U(e){let n=(0,u.b6)(),r=I();if(!r)throw Error("[Form] error in useWatch, formModel not found");let i=r.getValueIn(e);return(0,h.useEffect)(()=>{let i=r.onFormValuesUpdated(({name:r})=>{r===e&&n()});return()=>i.dispose()},[e,r]),i}function Y({name:e,defaultValue:n,deps:r,render:i,children:s}){let o=I(),a=o.getField(e)||o.createFieldArray(e),l=h.useMemo(()=>R(a),[a]),p=(0,u.b6)(),f=(0,d.KN)(a.reactiveState),g=(0,d.KN)(o.reactiveState),m=P(f),y=h.useMemo(()=>M(g),[g]);return(h.useEffect(()=>{if(a.disposed)return p(),()=>{};a.renderCount=a.renderCount+1,o.getValueIn(e),void 0!==n&&(o.setInitValueIn(e,n),p());let i=new u.Vd;return i.push(a.onValueChange(()=>{p()})),r&&r.forEach(e=>{let n=o.getField(e)?.onValueChange(()=>{p()});n&&i.push(n)}),()=>{i.dispose(),a.renderCount>1?a.renderCount=a.renderCount-1:o.getField(a.name)===a&&a.dispose()}},[a]),a.disposed)?h.createElement(h.Fragment,null):h.createElement(D.Provider,{value:a},i&&(0,c.isFunction)(i)?i({field:l,fieldState:m,formState:y}):(0,c.isFunction)(s)?s({field:l,fieldState:m,formState:y}):h.createElement(h.Fragment,null,"Invalid Array render"))}},47280:function(e,n,r){"use strict";r.d(n,{Bd:()=>_,Rw:()=>w,T9:()=>Q,fZ:()=>S,ix:()=>b,zp:()=>k});var i,s=r(2543),o=r(11812),a=r(67055),l=r(91280),h=r(23011),c=r(32893),u=r(81376),d=r(96540),p=r(64428),f=r(34033),g=r(24174),m=Object.defineProperty,y=Object.getOwnPropertyDescriptor,O=(e,n,r,i)=>{for(var s,o=i>1?void 0:i?y(n,r):n,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i?s(n,r,o):s(o))||o);return i&&o&&m(n,r,o),o},b=((i=b||{}).In="in",i.Out="out",i),x=e=>e?.getNodeMeta().isContainer??!1,w={nextFrame:async()=>{await new Promise(e=>requestAnimationFrame(e))},isContainer:x,adjustSubNodePosition:e=>{let{targetNode:n,containerNode:r,containerPadding:i}=e;if(r.flowNodeType===c.y.ROOT)return n.transform.position;let s=n.transform.transform.worldTransform,o=r.transform.transform.worldTransform,a={x:s.tx,y:s.ty};return r.children&&0!==r.children.length?{x:a.x-o.tx,y:a.y-o.ty}:{x:0,y:i.top}},getContainerTransforms:e=>e.filter(e=>e.originParent?e.getNodeMeta().selectable&&e.originParent.getNodeMeta().selectable:e.getNodeMeta().selectable).filter(e=>x(e)).sort((e,n)=>{let r=e.renderData.stackIndex;return n.renderData.stackIndex-r}).map(e=>e.transform),getCollisionTransform:e=>{let{targetRect:n,targetPoint:r,transforms:i,withPadding:s=!1,document:o}=e;return i.find(e=>{let{bounds:i,entity:l}=e,h=s?o.layout.getPadding(l):{left:0,right:0},c=new a.M_(i.x+h.left+h.right,i.y,i.width,i.height);if(n){let e=n.right>c.left&&n.left<c.right,r=n.bottom>c.top&&n.top<c.bottom;return e&&r}if(r)return r.x>=c.left&&r.x<=c.right&&r.y>=c.top&&r.y<=c.bottom;return!1})}},S=class{constructor(){this.emitter=new a.vl,this.toDispose=new a.Vd,this.on=this.emitter.event}init(){this.initState(),this.toDispose.push(this.emitter)}ready(){this.toDispose.push(this.listenDragToContainer())}dispose(){this.initState(),this.toDispose.dispose()}async moveOutContainer(e){let{node:n}=e,r=n.parent,i=r?.parent,s=this.document.toNodeJSON(n);if(!r||!i||!w.isContainer(r)||!s.meta?.position)return;let o=r.getData(u.hZ);this.operationService.moveNode(n,{parent:i}),await w.nextFrame(),o.fireChange(),this.operationService.updateNodePosition(n,{x:o.position.x+s.meta.position.x,y:o.position.y+s.meta.position.y}),this.emitter.fire({type:"out",node:n,sourceContainer:r,targetContainer:i})}canMoveOutContainer(e){let n=e.parent,r=n?.parent;return!!n&&!!r&&!!w.isContainer(n)&&!!this.dragService.canDropToNode({dragNodeType:e.flowNodeType,dragNode:e,dropNodeType:r?.flowNodeType,dropNode:r}).allowDrop}async clearInvalidLines(e){let{dragNode:n,sourceParent:r}=e;n&&n.parent!==r&&n.parent?.flowNodeType!==c.y.GROUP&&r?.flowNodeType!==c.y.GROUP&&await this.removeNodeLines(n)}async removeNodeLines(e){this.linesManager.getAllLines().forEach(n=>{(n.from.id===e.id||n.to?.id===e.id)&&n.dispose()}),await w.nextFrame()}initState(){this.state={isDraggingNode:!1,isSkipEvent:!1,transforms:void 0,dragNode:void 0,dropNode:void 0,sourceParent:void 0}}listenDragToContainer(){let e=e=>this.draggingNode(e),n=(0,s.throttle)(e,200);return this.dragService.onNodesDrag(async r=>{if(1===this.selectService.selectedNodes.length){if("onDragStart"===r.type){if(this.state.isSkipEvent){this.state.isSkipEvent=!1;return}this.historyService.startTransaction(),this.state.isDraggingNode=!0,this.state.transforms=w.getContainerTransforms(this.document.getAllNodes()),this.state.dragNode=this.selectService.selectedNodes[0],this.state.dropNode=void 0,this.state.sourceParent=this.state.dragNode?.parent,await this.dragOutContainer(r)}if("onDragging"===r.type&&n(r),"onDragEnd"===r.type){if(this.state.isSkipEvent)return;n.cancel(),e(r),await this.dropNodeToContainer(),await this.clearInvalidLines({dragNode:this.state.dragNode,sourceParent:this.state.sourceParent}),this.setDropNode(void 0),this.initState(),this.historyService.endTransaction()}}})}async dragOutContainer(e){let{dragNode:n}=this.state;(e.triggerEvent.metaKey||e.triggerEvent.ctrlKey)&&n&&this.canMoveOutContainer(n)&&(this.moveOutContainer({node:n}),this.state.isSkipEvent=!0,e.dragger.stop(e.dragEvent.clientX,e.dragEvent.clientY),await w.nextFrame(),this.dragService.startDragSelectedNodes(e.triggerEvent))}setDropNode(e){if(this.state.dropNode===e)return;if(this.state.dropNode){let e=this.state.dropNode.getData(c.he),n=e.node?.children?.[0];n&&n.classList.remove("selected")}if(this.state.dropNode=e,!e)return;let n=e.getData(c.he),r=n.node?.children?.[0];r&&r.classList.add("selected")}async dropNodeToContainer(){let{dropNode:e,dragNode:n,isDraggingNode:r}=this.state;if(r&&n&&e)return await this.moveIntoContainer({node:n,containerNode:e})}draggingNode(e){let{dragNode:n,isDraggingNode:r,transforms:i=[]}=this.state;if(!r||!n||!i?.length)return this.setDropNode(void 0);let s=this.playgroundConfig.getPosFromMouseEvent(e.dragEvent),o=i.filter(e=>e.entity.id!==n.id),a=w.getCollisionTransform({targetPoint:s,transforms:o,document:this.document}),l=a?.entity;return this.canDropToContainer({dragNode:n,dropNode:l})?this.setDropNode(l):this.setDropNode(void 0)}canDropToContainer(e){let{dragNode:n,dropNode:r}=e,i=r?.getNodeMeta().isContainer;return!(!r||!i||this.isParent(n,r))&&(n.flowNodeType!==c.y.GROUP||r.flowNodeType===c.y.GROUP)&&!!this.dragService.canDropToNode({dragNodeType:n.flowNodeType,dropNodeType:r?.flowNodeType,dragNode:n,dropNode:r}).allowDrop}isParent(e,n){let r=e.parent;for(;r;){if(r.id===n.id)return!0;r=r.parent}return!1}async moveIntoContainer(e){let{node:n,containerNode:r}=e,i=n.parent;this.operationService.moveNode(n,{parent:r});let s=this.document.layout.getPadding(r),o=w.adjustSubNodePosition({targetNode:n,containerNode:r,containerPadding:s});this.operationService.updateNodePosition(n,o),await w.nextFrame(),this.emitter.fire({type:"in",node:n,sourceContainer:i,targetContainer:r})}};O([(0,o.WQ)(l.Z4)],S.prototype,"dragService",2),O([(0,o.WQ)(l.Vo)],S.prototype,"document",2),O([(0,o.WQ)(u.d0)],S.prototype,"playgroundConfig",2),O([(0,o.WQ)(l.DO)],S.prototype,"operationService",2),O([(0,o.WQ)(l.GH)],S.prototype,"linesManager",2),O([(0,o.WQ)(h.kI)],S.prototype,"historyService",2),O([(0,o.WQ)(l.rm)],S.prototype,"selectService",2),S=O([(0,o._G)()],S);var _=(0,u.XY)({onBind:({bind:e})=>{e(S).toSelf().inSingletonScope()},onInit(e,n){e.get(S).init()},onReady(e,n){!0!==n.disableNodeIntoContainer&&e.get(S).ready()},onDispose(e){e.get(S).dispose()}}),k=()=>{let e=(0,l.QS)(),{size:n={width:300,height:200},isContainer:r}=e.getNodeMeta(),i=e.getData(c.LY),[s,o]=(0,d.useState)(n.width),[a,h]=(0,d.useState)(n.height),u=()=>{if(0===e.blocks.length){o(n.width),h(n.height);return}o(i.bounds.width),h(i.bounds.height)};if((0,d.useEffect)(()=>{let n=i.onDataChange(()=>{u(),e.getData(l.Yd).updateDynamicPorts()});return()=>n.dispose()},[i,s,a]),(0,d.useEffect)(()=>{u()},[]),r)return{width:s,height:a}},C=f.Ay.div`
  width: 100%;
  height: 100%;
  inset: 56px 18px 18px;
  /* 背景色现在通过 style 属性动态设置 */
`,E=()=>{let e=(0,l.QS)(),n={};try{n=(0,u.h1)(p.tx)}catch(e){}let r=n.gridSize??20,i=n.dotSize??1,s=n.dotColor??"#eceeef",o=n.dotOpacity??.5,a=n.backgroundColor??"#f2f3f5",h=n.dotFillColor===s?"":n.dotFillColor,c=`sub-canvas-dot-pattern-${e.id}`;return d.createElement(C,{className:"sub-canvas-background","data-flow-editor-selectable":"true",style:{backgroundColor:a}},d.createElement("svg",{width:"100%",height:"100%"},d.createElement("pattern",{id:c,width:r,height:r,patternUnits:"userSpaceOnUse"},d.createElement("circle",{cx:i,cy:i,r:i,stroke:s,fill:h,fillOpacity:o})),d.createElement("rect",{width:"100%",height:"100%",fill:`url(#${c})`,"data-node-panel-container":e.id})))},T=f.Ay.div`
  pointer-events: none;

  position: relative;

  display: flex;
  align-items: center;

  width: 100%;
  height: 100%;

  background-color: transparent;
  border: 1px solid var(--coz-stroke-plus, rgba(6, 7, 9, 15%));
  border-color: var(--coz-bg-plus, rgb(249, 249, 249));
  border-style: solid;
  border-width: 8px;
  border-radius: 8px;

  &::before {
    content: '';

    position: absolute;
    z-index: 0;
    inset: -4px;

    background-color: transparent;
    border-color: var(--coz-bg-plus, rgb(249, 249, 249));
    border-style: solid;
    border-width: 4px;
    border-radius: 8px;
  }
`,P=({style:e,children:n})=>d.createElement(T,{className:"sub-canvas-border",style:{...e}},n),A=f.Ay.div`
  width: 100%;
  height: 100%;
`,M="workflow-move-into-sub-canvas-tip-visible",N="false",D=class e{constructor(){this.closed=!1}static get instance(){return this._instance||(this._instance=new e),this._instance}isClosed(){return this.isCloseForever()||this.closed}close(){this.closed=!0}isCloseForever(){return localStorage.getItem(M)===N}closeForever(){localStorage.setItem(M,N)}},I=f.Ay.div`
  pointer-events: auto;
  position: absolute;
  top: 0;

  width: 100%;
  height: 28px;

  .container {
    height: 100%;
    background-color: #e4e6f5;
    border-radius: 4px 4px 0 0;

    .content {
      overflow: hidden;
      display: inline-flex;
      align-items: center;
      justify-content: center;

      width: 100%;
      height: 100%;

      .text {
        font-size: 14px;
        font-weight: 400;
        font-style: normal;
        line-height: 20px;
        color: rgba(15, 21, 40, 82%);
        text-overflow: ellipsis;
      }

      .custom-content {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        height: 100%;

        /* 为自定义内容提供默认样式，但允许覆盖 */
        font-size: 14px;
        font-weight: 400;
        line-height: 20px;
        color: rgba(15, 21, 40, 82%);

        /* 确保自定义内容不会超出容器 */
        overflow: hidden;
      }

      .space {
        width: 128px;
      }
    }

    .actions {
      position: absolute;
      top: 0;
      right: 0;

      display: flex;
      gap: 8px;
      align-items: center;

      height: 28px;
      padding: 0 16px;

      .close-forever {
        cursor: pointer;

        padding: 0 3px;

        font-size: 12px;
        font-weight: 400;
        font-style: normal;
        line-height: 12px;
        color: rgba(32, 41, 69, 62%);
      }

      .close {
        display: flex;
        cursor: pointer;
        height: 100%;
        align-items: center;
      }
    }
  }
`,$=/(Macintosh|MacIntel|MacPPC|Mac68K|iPad)/.test(navigator.userAgent),R=()=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16"},d.createElement("path",{fill:"#060709",fillOpacity:"0.5",d:"M12.13 12.128a.5.5 0 0 0 .001-.706L8.71 8l3.422-3.423a.5.5 0 0 0-.001-.705.5.5 0 0 0-.706-.002L8.002 7.293 4.579 3.87a.5.5 0 0 0-.705.002.5.5 0 0 0-.002.705L7.295 8l-3.423 3.422a.5.5 0 0 0 .002.706c.195.195.51.197.705.001l3.423-3.422 3.422 3.422c.196.196.51.194.706-.001"})),L=({tipText:e,neverRemindText:n})=>{let{visible:r,close:i,closeForever:s}=(()=>{let e=(0,l.QS)(),[n,r]=(0,d.useState)(!1),i=D.instance,s=(0,u.h1)(S),o=(0,d.useCallback)(()=>{i.isClosed()||r(!0)},[i]),a=(0,d.useCallback)(()=>{i.close(),r(!1)},[i]),h=(0,d.useCallback)(()=>{i.closeForever(),a()},[a,i]);return(0,d.useEffect)(()=>{let n=s.on(n=>{"in"===n.type&&n.targetContainer===e&&o()}),i=s.on(n=>{"out"===n.type&&(n.sourceContainer!==e||e.blocks.length||r(!1))});return()=>{n.dispose(),i.dispose()}},[s,e,o,a,n]),{visible:n,close:a,closeForever:h}})(),o=e||g.F.t("Hold {{key}} to drag node out",{key:$?"Cmd ⌘":"Ctrl"});return r?d.createElement(I,{className:"sub-canvas-tips"},d.createElement("div",{className:"container"},d.createElement("div",{className:"content"},"string"==typeof o?d.createElement("p",{className:"text"},o):d.createElement("div",{className:"custom-content"},o),d.createElement("div",{className:"space",style:{width:0}})),d.createElement("div",{className:"actions"},d.createElement("p",{className:"close-forever",onClick:s},n||g.F.t("Never Remind")),d.createElement("div",{className:"close",onClick:i},d.createElement(R,null))))):null},Q=({className:e,style:n,offsetY:r=0,tipText:i})=>{let s=k(),o=s?.height??0,a=(0,l.QS)();return(0,d.useLayoutEffect)(()=>{s&&(a.renderData.node.style.width=s.width+"px",a.renderData.node.style.height=s.height+"px")},[s?.width,s?.height]),d.createElement(A,{className:`sub-canvas-render ${e??""}`,style:{height:o+r,...n},"data-flow-editor-selectable":"true",onDragStart:e=>{e.stopPropagation()}},d.createElement(P,null,d.createElement(E,null),d.createElement(L,{tipText:i})))}},15860:function(e,n,r){"use strict";r.d(n,{jX:()=>C,oh:()=>w});var i,s,o=r(51829),a=r(21727),l=r(91280),h=r(32893),c=r(81376),u=r(11812),d=r(67055),p=r(40622),f=r(23011),g=r(47280),m=Object.defineProperty,y=Object.getOwnPropertyDescriptor,O=(e,n,r,i)=>{for(var s,o=i>1?void 0:i?y(n,r):n,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i?s(n,r,o):s(o))||o);return i&&o&&m(n,r,o),o};(s||(s={})).validate=e=>{if(!e||!Array.isArray(e)||0===e.length||e.some(e=>e.flowNodeType===h.y.GROUP)||e.some(e=>e&&e?.parent?.flowNodeType===h.y.GROUP))return!1;let n=e[0].parent;return!!e.every(e=>e.parent===n)};var b=Symbol("WorkflowGroupPluginOptions"),x=class extends h.rk{constructor(){super(...arguments),this.toDispose=new d.Vd}ready(){this.toDispose.push(this.listenContainer())}dispose(){this.toDispose.dispose()}createGroup(e){if(!s.validate(e))return;let n=e[0].parent??this.document.root,r=this.document.getNodeRegistry(h.y.GROUP),i=r?.onAdd?.(this.context);this.opts.initGroupJSON&&(i=this.opts.initGroupJSON(i,e)),this.historyService.startTransaction(),this.document.createWorkflowNodeByType(h.y.GROUP,{x:0,y:0},i,n.id),e.forEach(e=>{this.freeOperationService.moveNode(e,{parent:i.id})}),this.historyService.endTransaction()}ungroup(e){let n=e.blocks.slice();if(!e.parent)return;let r=e.transform.position;this.historyService.startTransaction(),n.forEach(n=>{this.freeOperationService.moveNode(n,{parent:e.parent?.id})}),e.dispose(),n.forEach(e=>{let n=e.getData(c.hZ),i={x:n.position.x+r.x,y:n.position.y+r.y};this.freeOperationService.updateNodePosition(e,i)}),this.historyService.endTransaction()}listenContainer(){return this.nodeIntoContainerService.on(e=>{e.type===g.ix.Out&&e.sourceContainer?.flowNodeType===h.y.GROUP&&e.sourceContainer?.blocks.length===0&&e.sourceContainer.dispose()})}};O([(0,u.WQ)(l.Vo)],x.prototype,"document",2),O([(0,u.WQ)(l.DO)],x.prototype,"freeOperationService",2),O([(0,u.WQ)(f.kI)],x.prototype,"historyService",2),O([(0,u.WQ)(g.fZ)],x.prototype,"nodeIntoContainerService",2),O([(0,u.WQ)(b)],x.prototype,"opts",2),O([(0,u.WQ)(p.TbI)],x.prototype,"context",2),x=O([(0,u._G)()],x);var w=((i=w||{}).Group="group",i.Ungroup="ungroup",i),S=class{constructor(e){this.commandId="group",this.commandDetail={label:"Group"},this.shortcuts=["meta g","ctrl g"],this.selectService=e.get(l.rm),this.groupService=e.get(x),this.execute=this.execute.bind(this)}async execute(){this.groupService.createGroup(this.selectService.selectedNodes),this.selectService.clear()}},_=class{constructor(e){this.commandId="ungroup",this.commandDetail={label:"Ungroup"},this.shortcuts=["meta shift g","ctrl shift g"],this.selectService=e.get(l.rm),this.groupService=e.get(x),this.execute=this.execute.bind(this)}async execute(e){let n=e||this.selectService.activatedNode;n&&n.flowNodeType===h.y.GROUP&&(this.groupService.ungroup(n),this.selectService.clear())}},k={type:h.y.GROUP,meta:{renderKey:h.y.GROUP,defaultPorts:[],isContainer:!0,disableSideBar:!0,size:{width:560,height:400},padding:()=>({top:80,bottom:40,left:65,right:65}),selectable:(e,n)=>!n||!e.getData(h.LY).bounds.contains(n.x,n.y),expandable:!1},formMeta:{render:()=>React.createElement(React.Fragment,null)},onAdd:()=>({type:h.y.GROUP,id:`group_${(0,l.Ak)(5)}`,meta:{position:{x:0,y:0}},data:{}})},C=(0,c.XY)({onBind({bind:e,rebind:n},r){e(x).toSelf().inSingletonScope(),e(b).toConstantValue(r),n(h.rk).toService(x)},onInit(e,{groupNodeRender:n,disableGroupShortcuts:r=!1}){n&&e.get(a.BY).registerReactComponent(h.y.GROUP,n),r||e.get(o.v).addHandlers(new S(e),new _(e));let i=e.get(l.Vo);i.getNodeRegistry(h.y.GROUP)||i.registerFlowNodes(k)},onReady(e){e.get(x).ready()},onDispose(e){e.get(x).dispose()}})},23011:function(e,n,r){"use strict";r.d(n,{CV:()=>V,kI:()=>o.kI,ot:()=>y});var i,s=r(81376),o=r(84808),a=r(2543),l=r(11812),h=r(67055),c=r(28602),u=r(91280),d=r(32893);r(96540);var p=Object.defineProperty,f=Object.getOwnPropertyDescriptor,g=(e,n,r,i)=>{for(var s,o=i>1?void 0:i?f(n,r):n,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i?s(n,r,o):s(o))||o);return i&&o&&p(n,r,o),o},m=class{constructor(){this._entityDataValues=new Map,this._toDispose=new h.Vd}addEntityData(e){this._entityDataValues.set(e,(0,a.cloneDeep)(e.toJSON())),this._toDispose.push(e.onWillChange(n=>{let r=n.toJSON(),i=this._entityDataValues.get(e);(0,a.isEqual)(r,i)||this._entityDataValues.set(e,(0,a.cloneDeep)(r))}))}getValue(e){return this._entityDataValues.get(e)}setValue(e,n){return this._entityDataValues.set(e,n)}dispose(){this._entityDataValues.clear(),this._toDispose.dispose()}};m=g([(0,l._G)()],m);var y=((i=y||{}).addLine="addLine",i.deleteLine="deleteLine",i.changeLineData="changeLineData",i.moveNode="moveNode",i.addNode="addNode",i.deleteNode="deleteNode",i.changeNodeData="changeNodeData",i.resetLayout="resetLayout",i.dragNodes="dragNodes",i.moveChildNodes="moveChildNodes",i),O=class{handle(e){"onDragEnd"===e.type&&this._dragNode(e)}_dragNode(e){this._historyService.pushOperation({type:"dragNodes",value:{ids:e.nodes.map(e=>e.id),value:e.nodes.map(e=>{let{x:n,y:r}=e.getData(s.hZ).position;return{x:n,y:r}}),oldValue:e.startPositions}},{noApply:!0})}};g([(0,l.WQ)(o.kI)],O.prototype,"_historyService",2),O=g([(0,l._G)()],O);var b=class{constructor(){this.enableChangeNode=!0,this.enableChangeLineData=!0,this.enable=!1,this.nodeToJSON=e=>e.toJSON(),this.getNodeLabelById=e=>e,this.getNodeLabel=e=>e.id,this.getBlockLabel=e=>e.id,this.getNodeURI=e=>`node:${e}`,this.getLineURI=e=>`line:${e}`}init(e,n){this.enable=!!n?.enable,n.nodeToJSON&&(this.nodeToJSON=n.nodeToJSON(e)),n.getNodeLabelById&&(this.getNodeLabelById=n.getNodeLabelById(e)),n.getNodeLabel&&(this.getNodeLabel=n.getNodeLabel(e)),n.getBlockLabel&&(this.getBlockLabel=n.getBlockLabel(e)),n.getNodeURI&&(this.getNodeURI=n.getNodeURI(e)),n.getLineURI&&(this.getLineURI=n.getLineURI(e)),void 0!==n.enableChangeNode&&(this.enableChangeNode=n.enableChangeNode),void 0!==n.enableChangeLineData&&(this.enableChangeLineData=n.enableChangeLineData)}};b=g([(0,l._G)()],b);var x=class{handle(e){let{path:n,value:r,initialized:i,node:s}=e,o=s.getData(c.LO),l=this._entityManager.getValue(o),h=n.split("/").filter(Boolean).join("."),u=h?(0,a.get)(l,h):l;if(!(0,a.isEqual)(r,u)){if(i){let e=n,i=(0,a.cloneDeep)(r),o=u;if("/"!==n){let s=(0,a.cloneDeep)(l);(0,a.set)(s,h,r),e=n.split("/").filter(Boolean)[0],i=(0,a.get)(s,e),o=(0,a.get)(l,e)}this._historyService.pushOperation({type:"changeNodeData",value:{id:s.id,path:e,value:i,oldValue:o},uri:this._config.getNodeURI(s.id)},{noApply:!0})}h?(0,a.set)(l,h,(0,a.cloneDeep)(r)):this._entityManager.setValue(o,(0,a.cloneDeep)(r))}}};g([(0,l.WQ)(o.kI)],x.prototype,"_historyService",2),g([(0,l.WQ)(u.Vo)],x.prototype,"document",2),g([(0,l.WQ)(m)],x.prototype,"_entityManager",2),g([(0,l.WQ)(b)],x.prototype,"_config",2),x=g([(0,l._G)()],x);var w={type:u.BI.DELETE_NODE,toOperation:(e,n)=>{let r=n.get(b),i=e.entity;return{type:"deleteNode",value:{node:e.toJSON(),parentID:i.parent?.id},uri:r.getNodeURI(i.id)}}},S={type:u.BI.DELETE_LINE,toOperation:(e,n)=>{let r=n.get(b),i=e.entity;return{type:"deleteLine",value:{from:i.info.from,to:i.info.to||"",fromPort:i.info.fromPort||"",toPort:i.info.toPort||"",data:i.info.data,id:i.id},uri:r.getNodeURI(i.id)}}},_={type:u.BI.LINE_DATA_CHANGE,toOperation:(e,n)=>{let r=n.get(b),i=e.entity;return{type:"changeLineData",value:{id:i.id,oldValue:e.oldValue,newValue:i.lineData},uri:r.getLineURI(i.id)}}},k={type:u.BI.ADD_NODE,toOperation:(e,n)=>{let r=n.get(b),i=n.get(u.Vo),s=e.entity,o=s.parent?.id;return{type:"addNode",value:{node:i.toNodeJSON(s),parentID:o},uri:r.getNodeURI(s.id)}}},C=[{type:u.BI.ADD_LINE,toOperation:(e,n)=>{let r=n.get(b),i=e.entity;return{type:"addLine",value:{from:i.info.from,to:i.info.to||"",fromPort:i.info.fromPort||"",toPort:i.info.toPort||"",data:i.info.data,id:i.id},uri:r.getLineURI(i.id)}}},S,k,w,_],E=class{handle(e,n){if(!this._historyService.undoRedoService.canPush()||!this._historyConfig.enableChangeLineData&&e.type===u.BI.LINE_DATA_CHANGE)return;let r=C.find(n=>n.type===e.type);if(!r)return;let i=r.toOperation(e,n);i&&this._historyService.pushOperation(i,{noApply:!0})}};g([(0,l.WQ)(o.kI)],E.prototype,"_historyService",2),g([(0,l.WQ)(b)],E.prototype,"_historyConfig",2),E=g([(0,l._G)()],E);var T={shouldMerge:(e,n,r)=>!!n&&Date.now()-r.getTimestamp()<500},P={...T,type:"resetLayout",inverse:e=>({...e,value:{...e.value,value:e.value.oldValue,oldValue:e.value.value}}),apply:async(e,n)=>{let r=n.get(u._);await r.layoutToPositions(e.value.ids,e.value.value)},shouldMerge:()=>!1},A={...T,type:d.S5.moveChildNodes,inverse:e=>({...e,value:{...e.value,fromIndex:e.value.toIndex,toIndex:e.value.fromIndex,fromParentId:e.value.toParentId,toParentId:e.value.fromParentId}}),apply:(e,n)=>{let r=n.get(u.Vo);r.moveChildNodes(e.value);let i=r.getNode(e.value.fromParentId);requestAnimationFrame(()=>{i&&i.flowNodeType!==d.y.ROOT&&i.getData(s.hZ).fireChange()})}},M={...T,type:"dragNodes",inverse:e=>({...e,value:{...e.value,value:e.value.oldValue,oldValue:e.value.value}}),apply:(e,n)=>{e.value.ids.forEach((r,i)=>{let o=n.get(u.Vo),a=o.getNode(r);if(!a)return;let l=a.getData(s.hZ),h=e.value.value[i];l.update({position:{x:h.x,y:h.y}}),o.layout.updateAffectedTransform(a)})}},N={...T,type:"deleteNode",inverse:e=>({...e,type:"addNode"}),apply:(e,n)=>{let r=n.get(u.Vo).getNode(e.value.node.id);r&&r.dispose()},getLabel:(e,n)=>{let r=n.get(b);return`Delete Node ${r.getNodeLabel(e.value.node)}`},getDescription:(e,n)=>{let r=n.get(b),i=`Delete Node ${r.getNodeLabel(e.value.node)}`;return e.value.node.meta?.position&&(i+=` at ${e.value.node.meta.position.x},${e.value.node.meta.position.y}`),i}},D={...T,type:"deleteLine",inverse:e=>({...e,type:"addLine"}),apply:(e,n)=>{n.get(u.Vo).removeNode(e.value.id)},getLabel:(e,n)=>"Delete Line",getDescription:(e,n)=>{let r=n.get(b),{value:i}=e;if(!i.from||!i.to)return"Delete Line";let s=r.getNodeLabelById(i.from),o=r.getNodeLabelById(i.to);return`Delete Line from ${s} to ${o}`}},I={...T,type:"changeNodeData",inverse:e=>({...e,value:{...e.value,value:e.value.oldValue,oldValue:e.value.value}}),apply:(e,n)=>{let r=n.get(u.Vo).getNode(e.value.id);if(!r)return;let i=r.getData(c.LO);if(!i)return;let{path:s}=e.value;s.endsWith("/")&&"/"!==s&&(s=s.slice(0,-1)),s.startsWith("/")||(s=`/${s}`);let o=i.formModel.getFormItemByPath(s);o&&(o.value=e.value.value)},shouldMerge:(e,n,r)=>!!n&&!!(Date.now()-r.getTimestamp()<500)&&(e.type!==n.type||e.value.id!==n.value.id||e.value?.path!==n.value?.path||{type:e.type,value:{...e.value,value:e.value.value,oldValue:n.value.oldValue}})},$={...T,type:"changeLineData",inverse:e=>({...e,value:{...e.value,newValue:e.value.oldValue,oldValue:e.value.newValue}}),apply:(e,n)=>{let r=n.get(u.GH).getLineById(e.value.id);r&&(r.lineData=e.value.newValue)},shouldMerge:(e,n,r)=>!!n&&!!(Date.now()-r.getTimestamp()<500)&&(e.type!==n.type||e.value.id!==n.value.id||{type:e.type,value:{...e.value,newValue:e.value.newValue,oldValue:n.value.oldValue}})},R={...T,type:"addNode",inverse:e=>({...e,type:"deleteNode"}),apply:async(e,n)=>{let r=n.get(u.Vo);await r.createWorkflowNode((0,a.cloneDeep)(e.value.node),!1,e.value.parentID)},getLabel:(e,n)=>{let r=n.get(b);return`Create Node ${r.getNodeLabel(e.value.node)}`},getDescription:(e,n)=>{let r=n.get(b),i=`Create Node ${r.getNodeLabel(e.value.node)}`;return e.value.node.meta?.position&&(i+=` at ${e.value.node.meta.position.x},${e.value.node.meta.position.y}`),i}},L=[{...T,type:"addLine",inverse:e=>({...e,type:"deleteLine"}),apply:(e,n)=>{n.get(u.GH).createLine({...e.value,key:e.value.id})},getLabel:(e,n)=>"Create Line",getDescription:(e,n)=>{let r=n.get(b),{value:i}=e;if(!i.from||!i.to)return"Create Line";let s=r.getNodeLabelById(i.from),o=r.getNodeLabelById(i.to);return`Create Line from ${s} to ${o}`}},D,R,N,I,P,M,A,$],Q=class{registerOperationMeta(e){L.forEach(n=>{e.registerOperationMeta(n)})}};Q=g([(0,l._G)()],Q);var j=class{constructor(){this._toDispose=new h.Vd}onInit(e,n){let r=e.get(u.Vo),i=e.get(o.kI),l=e.get(u.Z4),p=e.get(u._);n?.limit&&i.limit(n.limit),i.context.source=e,this._toDispose.pushAll([l.onNodesDrag(async e=>{"onDragEnd"===e.type&&this._dragNodesHandler.handle(e)}),r.onNodeCreate(({node:e,data:n})=>{let r=e.getData(s.q1);r&&this._entityManager.addEntityData(r)}),this._formManager?this._formManager.onFormModelWillInit(({model:e,data:n})=>{let r=e.flowNodeEntity,i=r.getData(c.LO);i&&(this._entityManager.setValue(i,(0,a.cloneDeep)(n)),this._toDispose.push(i.onDetailChange(e=>{this._changeNodeDataHandler.handle({...e,node:r})})))}):h.jG.NULL,r.onContentChange(n=>{this._changeContentHandler.handle(n,e)}),r.onReload(e=>{i.clear()}),p.onResetLayout(e=>{i.pushOperation({type:"resetLayout",value:{ids:e.nodeIds,value:e.positionMap,oldValue:e.oldPositionMap}},{noApply:!0})}),this._operationService.onNodeMove(({node:e,fromParent:n,fromIndex:r,toParent:s,toIndex:o})=>{i.pushOperation({type:d.S5.moveChildNodes,value:{fromParentId:n.id,fromIndex:r,nodeIds:[e.id],toParentId:s.id,toIndex:o}},{noApply:!0})}),this._operationService.onNodePostionUpdate(e=>{let n={ids:[e.node.id],value:[e.newPosition],oldValue:[e.oldPosition]};i.pushOperation({type:"dragNodes",value:n},{noApply:!0})})])}dispose(){this._entityManager.dispose(),this._toDispose.dispose()}};g([(0,l.WQ)(O)],j.prototype,"_dragNodesHandler",2),g([(0,l.WQ)(x)],j.prototype,"_changeNodeDataHandler",2),g([(0,l.WQ)(E)],j.prototype,"_changeContentHandler",2),g([(0,l.WQ)(m)],j.prototype,"_entityManager",2),g([(0,l.WQ)(c.A),(0,l.lq)()],j.prototype,"_formManager",2),g([(0,l.WQ)(u.DO)],j.prototype,"_operationService",2),j=g([(0,l._G)()],j);var V=(0,s.XY)({onBind:({bind:e})=>{(0,s.Nu)(e,Q,[o.Id]),e(b).toSelf().inSingletonScope(),e(j).toSelf().inSingletonScope(),e(m).toSelf().inSingletonScope(),e(O).toSelf().inSingletonScope(),e(x).toSelf().inSingletonScope(),e(E).toSelf().inSingletonScope()},onInit(e,n){e.get(b).init(e,n),n.enable&&e.get(j).onInit(e,n)},onDispose(e){e.get(m).dispose()},containerModules:[o.Kn]})},91280:function(e,n,r){"use strict";r.d(n,{A0:()=>e2,Vo:()=>ty,Yd:()=>tt,Lu:()=>tT,_:()=>tx,rm:()=>tl,Ak:()=>e4,BI:()=>d,Py:()=>tP,CX:()=>ti,Vv:()=>p,Be:()=>th,LJ:()=>tS,GH:()=>td,Df:()=>tc,fv:()=>ta,iW:()=>ts,Z4:()=>tv,rJ:()=>O.rJ,cb:()=>k.cb,tB:()=>tr,QS:()=>tE,IR:()=>te,h1:()=>O.h1,Ff:()=>e8,Wn:()=>tu,tK:()=>e6,DO:()=>f,MV:()=>tC,Pr:()=>e3,c7:()=>tM,_m:()=>e5});var i,s,o,a,l,h,c,u=Symbol(""),d=((i=d||{}).ADD_NODE="ADD_NODE",i.DELETE_NODE="DELETE_NODE",i.MOVE_NODE="MOVE_NODE",i.NODE_DATA_CHANGE="NODE_DATA_CHANGE",i.ADD_LINE="ADD_LINE",i.DELETE_LINE="DELETE_LINE",i.LINE_DATA_CHANGE="LINE_DATA_CHANGE",i.META_CHANGE="META_CHANGE",i),p=((s=p||{})[s.BEZIER=0]="BEZIER",s[s.LINE_CHART=1]="LINE_CHART",s[s.STRAIGHT=2]="STRAIGHT",s),f=Symbol("WorkflowOperationBaseService"),g=Object.defineProperty,m=Object.getOwnPropertyDescriptor,y=(e,n,r,i)=>{for(var s,o=i>1?void 0:i?m(n,r):n,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i?s(n,r,o):s(o))||o);return i&&o&&g(n,r,o),o},O=r(81376),b=r(96540),x=r(89723),w=r(72342),S=r(32893),_=r(11812),k=r(67055),C=r(36833),E=r(33160),T=r(47223),P=r(24928);function A(e){var n=this.__data__=new E.A(e);this.size=n.size}function M(e){var n=-1,r=null==e?0:e.length;for(this.__data__=new P.A;++n<r;)this.add(e[n])}A.prototype.clear=function(){this.__data__=new E.A,this.size=0},A.prototype.delete=function(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r},A.prototype.get=function(e){return this.__data__.get(e)},A.prototype.has=function(e){return this.__data__.has(e)},A.prototype.set=function(e,n){var r=this.__data__;if(r instanceof E.A){var i=r.__data__;if(!T.A||i.length<199)return i.push([e,n]),this.size=++r.size,this;r=this.__data__=new P.A(i)}return r.set(e,n),this.size=r.size,this},M.prototype.add=M.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},M.prototype.has=function(e){return this.__data__.has(e)};let N=function(e,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(e[r],r,e))return!0;return!1},D=function(e,n,r,i,s,o){var a=1&r,l=e.length,h=n.length;if(l!=h&&!(a&&h>l))return!1;var c=o.get(e),u=o.get(n);if(c&&u)return c==n&&u==e;var d=-1,p=!0,f=2&r?new M:void 0;for(o.set(e,n),o.set(n,e);++d<l;){var g=e[d],m=n[d];if(i)var y=a?i(m,g,d,n,e,o):i(g,m,d,e,n,o);if(void 0!==y){if(y)continue;p=!1;break}if(f){if(!N(n,function(e,n){if(!f.has(n)&&(g===e||s(g,e,r,i,o)))return f.push(n)})){p=!1;break}}else if(!(g===m||s(g,m,r,i,o))){p=!1;break}}return o.delete(e),o.delete(n),p};var I=r(99225),$=r(70981),R=$.A.Uint8Array,L=r(75952);let Q=function(e){var n=-1,r=Array(e.size);return e.forEach(function(e,i){r[++n]=[i,e]}),r},j=function(e){var n=-1,r=Array(e.size);return e.forEach(function(e){r[++n]=e}),r};var V=I.A?I.A.prototype:void 0,z=V?V.valueOf:void 0;let B=function(e,n,r,i,s,o,a){switch(r){case"[object DataView]":if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)break;e=e.buffer,n=n.buffer;case"[object ArrayBuffer]":if(e.byteLength!=n.byteLength||!o(new R(e),new R(n)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,L.A)(+e,+n);case"[object Error]":return e.name==n.name&&e.message==n.message;case"[object RegExp]":case"[object String]":return e==n+"";case"[object Map]":var l=Q;case"[object Set]":var h=1&i;if(l||(l=j),e.size!=n.size&&!h)break;var c=a.get(e);if(c)return c==n;i|=2,a.set(e,n);var u=D(l(e),l(n),i,s,o,a);return a.delete(e),u;case"[object Symbol]":if(z)return z.call(e)==z.call(n)}return!1},F=function(e,n){for(var r=-1,i=n.length,s=e.length;++r<i;)e[s+r]=n[r];return e};var Z=r(17993);let q=function(e,n,r){var i=n(e);return(0,Z.A)(e)?i:F(i,r(e))},W=function(e,n){for(var r=-1,i=null==e?0:e.length,s=0,o=[];++r<i;){var a=e[r];n(a,r,e)&&(o[s++]=a)}return o};var X=Object.prototype.propertyIsEnumerable,U=Object.getOwnPropertySymbols,Y=U?function(e){return null==e?[]:W(U(e=Object(e)),function(n){return X.call(e,n)})}:function(){return[]};let G=function(e,n){for(var r=-1,i=Array(e);++r<e;)i[r]=n(r);return i};var H=r(55184),K=r(23666);let J=function(e){return(0,K.A)(e)&&"[object Arguments]"==(0,H.A)(e)};var ee=Object.prototype,et=ee.hasOwnProperty,en=ee.propertyIsEnumerable,er=J(function(){return arguments}())?J:function(e){return(0,K.A)(e)&&et.call(e,"callee")&&!en.call(e,"callee")},ei="object"==typeof exports&&exports&&!exports.nodeType&&exports,es=ei&&"object"==typeof module&&module&&!module.nodeType&&module,eo=es&&es.exports===ei?$.A.Buffer:void 0;let ea=(eo?eo.isBuffer:void 0)||function(){return!1};var el=r(71873);let eh=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=0x1fffffffffffff};var ec={};ec["[object Float32Array]"]=ec["[object Float64Array]"]=ec["[object Int8Array]"]=ec["[object Int16Array]"]=ec["[object Int32Array]"]=ec["[object Uint8Array]"]=ec["[object Uint8ClampedArray]"]=ec["[object Uint16Array]"]=ec["[object Uint32Array]"]=!0,ec["[object Arguments]"]=ec["[object Array]"]=ec["[object ArrayBuffer]"]=ec["[object Boolean]"]=ec["[object DataView]"]=ec["[object Date]"]=ec["[object Error]"]=ec["[object Function]"]=ec["[object Map]"]=ec["[object Number]"]=ec["[object Object]"]=ec["[object RegExp]"]=ec["[object Set]"]=ec["[object String]"]=ec["[object WeakMap]"]=!1;var eu=r(32192),ed="object"==typeof exports&&exports&&!exports.nodeType&&exports,ep=ed&&"object"==typeof module&&module&&!module.nodeType&&module,ef=ep&&ep.exports===ed&&eu.A.process,eg=function(){try{var e=ep&&ep.require&&ep.require("util").types;if(e)return e;return ef&&ef.binding&&ef.binding("util")}catch(e){}}(),em=eg&&eg.isTypedArray,ey=em?function(e){return em(e)}:function(e){return(0,K.A)(e)&&eh(e.length)&&!!ec[(0,H.A)(e)]},eO=Object.prototype.hasOwnProperty;let ev=function(e,n){var r=(0,Z.A)(e),i=!r&&er(e),s=!r&&!i&&ea(e),o=!r&&!i&&!s&&ey(e),a=r||i||s||o,l=a?G(e.length,String):[],h=l.length;for(var c in e)(n||eO.call(e,c))&&!(a&&("length"==c||s&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||(0,el.A)(c,h)))&&l.push(c);return l};var eb=Object.prototype;let ex=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||eb)};var ew=(o=Object.keys,a=Object,function(e){return o(a(e))}),eS=Object.prototype.hasOwnProperty;let e_=function(e){if(!ex(e))return ew(e);var n=[];for(var r in Object(e))eS.call(e,r)&&"constructor"!=r&&n.push(r);return n};var ek=r(26114);let eC=function(e){return null!=e&&eh(e.length)&&!(0,ek.A)(e)?ev(e):e_(e)},eE=function(e){return q(e,eC,Y)};var eT=Object.prototype.hasOwnProperty;let eP=function(e,n,r,i,s,o){var a=1&r,l=eE(e),h=l.length;if(h!=eE(n).length&&!a)return!1;for(var c=h;c--;){var u=l[c];if(!(a?u in n:eT.call(n,u)))return!1}var d=o.get(e),p=o.get(n);if(d&&p)return d==n&&p==e;var f=!0;o.set(e,n),o.set(n,e);for(var g=a;++c<h;){var m=e[u=l[c]],y=n[u];if(i)var O=a?i(y,m,u,n,e,o):i(m,y,u,e,n,o);if(!(void 0===O?m===y||s(m,y,r,i,o):O)){f=!1;break}g||(g="constructor"==u)}if(f&&!g){var b=e.constructor,x=n.constructor;b!=x&&"constructor"in e&&"constructor"in n&&!("function"==typeof b&&b instanceof b&&"function"==typeof x&&x instanceof x)&&(f=!1)}return o.delete(e),o.delete(n),f};var eA=r(58247),eM=(0,eA.A)($.A,"DataView"),eN=(0,eA.A)($.A,"Promise"),eD=(0,eA.A)($.A,"Set"),eI=(0,eA.A)($.A,"WeakMap"),e$=r(29065),eR="[object Map]",eL="[object Promise]",eQ="[object Set]",ej="[object WeakMap]",eV="[object DataView]",ez=(0,e$.A)(eM),eB=(0,e$.A)(T.A),eF=(0,e$.A)(eN),eZ=(0,e$.A)(eD),eq=(0,e$.A)(eI),eW=H.A;(eM&&eW(new eM(new ArrayBuffer(1)))!=eV||T.A&&eW(new T.A)!=eR||eN&&eW(eN.resolve())!=eL||eD&&eW(new eD)!=eQ||eI&&eW(new eI)!=ej)&&(eW=function(e){var n=(0,H.A)(e),r="[object Object]"==n?e.constructor:void 0,i=r?(0,e$.A)(r):"";if(i)switch(i){case ez:return eV;case eB:return eR;case eF:return eL;case eZ:return eQ;case eq:return ej}return n});let eX=eW;var eU="[object Arguments]",eY="[object Array]",eG="[object Object]",eH=Object.prototype.hasOwnProperty;let eK=function(e,n,r,i,s,o){var a=(0,Z.A)(e),l=(0,Z.A)(n),h=a?eY:eX(e),c=l?eY:eX(n);h=h==eU?eG:h,c=c==eU?eG:c;var u=h==eG,d=c==eG,p=h==c;if(p&&ea(e)){if(!ea(n))return!1;a=!0,u=!1}if(p&&!u)return o||(o=new A),a||ey(e)?D(e,n,r,i,s,o):B(e,n,h,r,i,s,o);if(!(1&r)){var f=u&&eH.call(e,"__wrapped__"),g=d&&eH.call(n,"__wrapped__");if(f||g){var m=f?e.value():e,y=g?n.value():n;return o||(o=new A),s(m,y,r,i,o)}}return!!p&&(o||(o=new A),eP(e,n,r,i,s,o))},eJ=function(e,n){return function e(n,r,i,s,o){return n===r||(null!=n&&null!=r&&((0,K.A)(n)||(0,K.A)(r))?eK(n,r,i,s,e,o):n!=n&&r!=r)}(e,n)},e0=function(e){var n=null==e?0:e.length;return n?e[n-1]:void 0};var e1=r(28602),e2=((l=e2||{}).DELETE_NODES="DELETE_NODES",l.COPY_NODES="COPY_NODES",l.PASTE_NODES="PASTE_NODES",l.ZOOM_IN="ZOOM_IN",l.ZOOM_OUT="ZOOM_OUT",l.UNDO="UNDO",l.REDO="REDO",l);function e5(e,n,r,i){return{x:r.center.x,y:r.center.y,labelX:r.center.x-r.x+i,labelY:r.center.y-r.y+i}}function e4(e){return(0,C.Ak)(e)}var e3=(e,n,r=!0)=>{let i=k.M_.enlarge(e.getAllNodes().map(e=>e.getData(O.hZ).bounds));return n.fitView(i,r,30)};function e6(e,n,r){let{x:i,y:s}=n;for(let n of(r?r.collapsedChildren:e.getAllNodes()).map(e=>{let n=e.getData(O.hZ);return{x:n.position.x,y:n.position.y}}).sort((e,n)=>e.y-n.y)){let{x:e,y:r}=n;if(s-r<-3)break;let o=Math.abs(s-r);3>=Math.abs(i-e)&&o<=3&&(i+=30,s+=30)}return{x:i,y:s}}var e9=(e,n,r="")=>`port_${n}_${e.id}_${r}`,e7="WorkflowLineEntity",e8=S.mp,te=class extends O.wC{constructor(e){super(e),this.portID="",this._hasError=!1,this._onErrorChangedEmitter=new k.vl,this.onErrorChanged=this._onErrorChangedEmitter.event,this.portID=e.portID||"",this.portType=e.type,this._disabled=e.disabled,this._offset=e.offset,this._location=e.location,this._size=e.size,this.node=e.node,this.updateTargetElement(e.targetElement),this.toDispose.push(this.node.getData(O.hZ).onDataChange(()=>this.fireChange())),this.toDispose.push(this.node.onDispose(this.dispose.bind(this)))}static getPortEntityId(e,n,r=""){return e9(e,n,r)}get position(){return this._location}get hasError(){return this._hasError}set hasError(e){e!==this._hasError&&(this._hasError=e,this._onErrorChangedEmitter.fire())}validate(){let e=this.allLines.some(e=>!e.disposed&&!e.isHidden&&e.hasError),n=this.node.document.isErrorPort(this);this.hasError=e||n}isErrorPort(){return this.node.document.isErrorPort(this,this.hasError)}get location(){return this._location?this._location:"input"===this.portType?"left":"right"}get point(){let{targetElement:e}=this,{bounds:n}=this.node.getData(S.LY),r=this.location;if(e){var i;let n=(i=e.getBoundingClientRect(),new k.M_(i.x,i.y,i.width,i.height)).center,s=this.entityManager.getEntity(O.d0).getPosFromMouseEvent({clientX:n.x,clientY:n.y});return{x:s.x,y:s.y,location:r}}let s={x:0,y:0},o=this._offset||{x:0,y:0};switch(r){case"left":s=n.leftCenter;break;case"top":s=n.topCenter;break;case"right":s=n.rightCenter;break;case"bottom":s=n.bottomCenter}return{x:s.x+o.x,y:s.y+o.y,location:r}}get bounds(){let{point:e}=this,n=this._size||{width:24,height:24};return new k.M_(e.x-n.width/2,e.y-n.height/2,n.width,n.height)}isHovered(e,n){return this.bounds.contains(e,n)}get relativePosition(){let{point:e}=this,{bounds:n}=this.node.getData(S.LY);return{x:e.x-n.x,y:e.y-n.y}}updateTargetElement(e){e!==this.targetElement&&(this.targetElement=e,this.fireChange())}get disabled(){let e=this.node.document;if("function"==typeof e.options.isDisabledPort)return e.options.isDisabledPort(this);if(this._disabled)return!0;let n=this.node.getNodeMeta();return"input"===this.portType?!!n.inputDisable:!!n.outputDisable}get lines(){return this.allLines.filter(e=>!e.isDrawing)}get availableLines(){return this.allLines.filter(e=>!e.isDrawing&&!e.isHidden)}get allLines(){let e=[];return this.entityManager.getEntities({type:e7}).forEach(n=>{(n.toPort===this||n.fromPort===this)&&e.push(n)}),e}update(e){let n=!1;e.targetElement!==this.targetElement&&(this.targetElement=e.targetElement,n=!0),e.location!==this._location&&(this._location=e.location,n=!0),k.Gs.isChanged(e.offset,this._offset)&&(this._offset=e.offset,n=!0),k.Gs.isChanged(e.size,this._size)&&(this._size=e.size,n=!0),e.disabled!==this._disabled&&(this._disabled=e.disabled,n=!0),n&&this.fireChange()}dispose(){this.lines.forEach(e=>e.dispose()),super.dispose()}};te.type="WorkflowPortEntity";var tt=class extends O.oW{constructor(e){super(e),this._staticPorts=[],this._portIDSet=new Set,this.entity=e;let n=e.getNodeMeta(),r=n.useDynamicPort?[]:[{type:"input"},{type:"output"}];this._staticPorts=n.defaultPorts?.slice()||r,this.updatePorts(this._staticPorts),n.useDynamicPort&&this.toDispose.push(e.getData(O.Q7).onDataChange(()=>{e.getData(O.Q7).width&&e.getData(O.Q7).height&&this.updateDynamicPorts()})),this.onDispose(()=>{this.allPorts.forEach(e=>e.dispose())})}getDefaultData(){return{}}updateAllPorts(e){let n=this.entity.getNodeMeta();e&&(this._staticPorts=e),n.useDynamicPort?this.updateDynamicPorts():this.updatePorts(this._staticPorts)}updateStaticPorts(e){this.updateAllPorts(e)}updateDynamicPorts(){let e=this.entity.getData(S.he).node.querySelectorAll("[data-port-id]"),n=this._staticPorts,r=[];e.length>0&&r.push(...Array.from(e).map(e=>({portID:e.getAttribute("data-port-id"),type:e.getAttribute("data-port-type"),targetElement:e}))),this.updatePorts(n.concat(r))}getPortEntityByKey(e,n){return this.getOrCreatePortEntity({type:e,portID:n})}updatePorts(e){if(!eJ(this._prePorts,e)){let n=e.map(e=>this.getPortId(e.type,e.portID));this._portIDSet.forEach(e=>{n.includes(e)||this.getPortEntity(e)?.dispose()}),e.forEach(e=>this.updatePortEntity(e)),this._prePorts=e,this.fireChange()}this.allPorts.forEach(e=>{e.allLines.forEach(e=>{e.validate()})})}get allPorts(){return Array.from(this._portIDSet).map(e=>this.getPortEntity(e)).filter(Boolean)}get inputPorts(){return this.allPorts.filter(e=>"input"===e.portType)}get outputPorts(){return this.allPorts.filter(e=>"output"===e.portType)}get inputPoints(){return this.inputPorts.map(e=>e.point)}get outputPoints(){return this.inputPorts.map(e=>e.point)}getInputPoint(e){return this.getPortEntityByKey("input",e).point}getOutputPoint(e){return this.getPortEntityByKey("output",e).point}getPortEntity(e){if(this._portIDSet.has(e))return this.entity.entityManager.getEntityById(e)}getPortId(e,n=""){return e9(this.entity,e,n)}createPortEntity(e){let n=this.getPortId(e.type,e.portID),r=this.entity.entityManager.getEntityById(n);return r||(r=this.entity.entityManager.createEntity(te,{id:n,node:this.entity,...e})),r.onDispose(()=>{this._portIDSet.delete(n)}),this._portIDSet.add(n),r}getOrCreatePortEntity(e){let n=this.getPortId(e.type,e.portID);return this.getPortEntity(n)??this.createPortEntity(e)}updatePortEntity(e){let n=this.getOrCreatePortEntity(e);return n.update(e),n}};tt.type="WorkflowNodePortsData";var tn=class e extends O.oW{getDefaultData(){return{inputLines:[],outputLines:[]}}constructor(e){super(e),this.entity=e,this.entity.preDispose.push(k.jG.create(()=>{this.inputLines.slice().forEach(e=>e.dispose()),this.outputLines.slice().forEach(e=>e.dispose())}))}get inputLines(){return this.data.inputLines}get outputLines(){return this.data.outputLines}get allLines(){return this.data.inputLines.concat(this.data.outputLines)}get availableLines(){return this.allLines.filter(e=>!e.isDrawing&&!e.isHidden)}get inputNodes(){return this.inputLines.map(e=>e.from).filter(Boolean)}get allInputNodes(){let n=new Set,r=i=>{if(n.has(i))return;n.add(i);let{inputNodes:s}=i.getData(e);s&&s.length&&s.forEach(e=>{e?.parent!==i&&i?.parent!==e&&r(e)})};return r(this.entity),n.delete(this.entity),Array.from(n)}get outputNodes(){return this.outputLines.map(e=>e.to).filter(Boolean)}get allOutputNodes(){let n=new Set,r=i=>{if(n.has(i))return;n.add(i);let{outputNodes:s}=i.getData(e);s&&s.length&&s.forEach(e=>{e?.parent!==i&&i?.parent!==e&&r(e)})};return r(this.entity),n.delete(this.entity),Array.from(n)}addLine(e){e.from===this.entity?this.outputLines.push(e):this.inputLines.push(e),this.fireChange()}removeLine(e){let{inputLines:n,outputLines:r}=this,i=n.indexOf(e),s=r.indexOf(e);-1!==i&&(n.splice(i,1),this.fireChange()),-1!==s&&(r.splice(s,1),this.fireChange())}};tn.type="WorkflowNodeLinesData";var tr=tn,ti=class extends O.oW{constructor(e){super(e),this.syncContributions()}getDefaultData(){return{version:"",contributions:new Map,position:{from:{x:0,y:0,location:"right"},to:{x:0,y:0,location:"left"}}}}get renderVersion(){return this.data.version}get position(){return this.data.position}get path(){return this.currentLine?.path??""}calcDistance(e){return this.currentLine?.calcDistance(e)??Number.MAX_SAFE_INTEGER}get bounds(){return this.currentLine?.bounds??new k.M_}update(){this.syncContributions();let e=this.data.version;this.updatePosition();let n=this.data.version;e!==n&&(this.data.version=n,this.currentLine?.update({fromPos:this.data.position.from,toPos:this.data.position.to}))}get lineType(){return this.entity.renderType??this.entity.linesManager.lineType}get center(){return this.currentLine?.center||{x:0,y:0,labelX:0,labelY:0}}updatePosition(){this.data.position.from=this.entity.from.getData(tt).getOutputPoint(this.entity.info.fromPort),this.entity.info.drawingTo?this.data.position.to=this.entity.info.drawingTo:this.data.position.to=this.entity.to?.getData(tt)?.getInputPoint(this.entity.info.toPort)??{x:this.data.position.from.x,y:this.data.position.from.y,location:"right"===this.data.position.from.location?"left":"top"},this.data.version=[this.lineType,this.data.position.from.x,this.data.position.from.y,this.data.position.from.location,this.data.position.to.x,this.data.position.to.y,this.data.position.to.location].join("-")}get currentLine(){return this.data.contributions.get(this.lineType)}syncContributions(){this.entity.linesManager.contributionFactories.length!==this.data.contributions.size&&this.entity.linesManager.contributionFactories.forEach(e=>{this.registerContribution(e)})}registerContribution(e){if(this.data.contributions.has(e.type))return;let n=new e(this.entity);this.data.contributions.set(e.type,n)}};ti.type="WorkflowLineRenderData";var ts=10,to=class e extends O.wC{constructor(e){super(e),this._onLineDataChangeEmitter=new k.vl,this.onLineDataChange=this._onLineDataChangeEmitter.event,this._uiState={hasError:!1,flowing:!1,disabled:!1,hideArrow:!1,reverse:!1,shrink:10,curvature:.25,highlightColor:"",lockedColor:""},this.stackIndex=0,this.info={from:""},this.document=e.document,this.linesManager=e.linesManager,this.initInfo({from:e.from,to:e.to,drawingTo:e.drawingTo,fromPort:e.fromPort,toPort:e.toPort,data:e.data}),e.drawingTo&&(this.isDrawing=!0),this.onEntityChange(()=>{this.fromPort?.validate(),this.toPort?.validate()}),this.onDispose(()=>{this.fromPort?.validate(),this.toPort?.validate()}),this.toDispose.push(this._onLineDataChangeEmitter)}static portInfoToLineId(e){let{from:n,to:r,fromPort:i,toPort:s}=e;return`${n}_${i||""}-${r||""}_${s||""}`}get uiState(){return this._uiState}updateUIState(e){let n=!1;Object.keys(e).forEach(r=>{let i=e[r];this._uiState[r]!==i&&(this._uiState[r]=i,n=!0)}),n&&this.fireChange()}get lineData(){return this._lineData}set lineData(e){let n=this._lineData;eJ(n,e)||(this._lineData=e,this._onLineDataChangeEmitter.fire({oldValue:n,newValue:e}),this.fireChange())}get from(){return this._from}get to(){return this._to}get isHidden(){return this.highlightColor===this.linesManager.lineColor.hidden}get inContainer(){let e=e=>!!e?.parent&&"root"!==e.parent.flowNodeType;return e(this.from)||e(this.to)}get processing(){return this._uiState.flowing}set processing(e){this.flowing=e}get hasError(){return this.uiState.hasError}set hasError(e){this.updateUIState({hasError:e}),this._node&&(this._node.dataset.hasError=this.hasError?"true":"false")}setToPort(e){if(!this.isDrawing)throw Error("[setToPort] only support drawing line.");if(this.toPort===e)return;let n=this.toPort;if(e&&"input"===e.portType&&this.linesManager.canAddLine(this.fromPort,e,!0)){let{node:n,portID:r}=e;this._to=n,this.info.drawingTo=void 0,this.info.to=n.id,this.info.toPort=r}else this._to=void 0,this.info.to=void 0,this.info.toPort="";n&&n.validate(),this.fireChange()}set drawingTo(e){let n=this.info.drawingTo;if(!e){this.info.drawingTo=void 0,this.fireChange();return}n&&e.x===n.x&&e.y===n.y||(this.info.to=void 0,this.info.drawingTo=e,this.fireChange())}get drawingTo(){return this.info.drawingTo}get highlightColor(){return this.uiState.highlightColor||""}set highlightColor(e){this.updateUIState({highlightColor:e})}get lockedColor(){return this.uiState.lockedColor}set lockedColor(e){this.updateUIState({lockedColor:e})}get bounds(){return this.getData(ti).bounds}get center(){return this.getData(ti).center}getHoverDist(e){return this.getData(ti).calcDistance(e)}get fromPort(){return this.from.getData(tt).getPortEntityByKey("output",this.info.fromPort)}get toPort(){if(this.to)return this.to.getData(tt).getPortEntityByKey("input",this.info.toPort)}get position(){return this.getData(ti).position}get reverse(){return this.linesManager.isReverseLine(this,this.uiState.reverse)}get hideArrow(){return this.linesManager.isHideArrowLine(this,this.uiState.hideArrow)}get flowing(){return this.linesManager.isFlowingLine(this,this.uiState.flowing)}set flowing(e){this._uiState.flowing!==e&&(this._uiState.flowing=e,this.fireChange())}get disabled(){return this.linesManager.isDisabledLine(this,this.uiState.disabled)}get vertical(){let e=this.fromPort.location,n=this.toPort?.location;return n?"top"===n:"bottom"===e}get renderType(){return this.linesManager.setLineRenderType(this)}get className(){return[this.linesManager.setLineClassName(this),this._uiState.className].filter(e=>!!e).join(" ")}get color(){return this.linesManager.getLineColor(this)}initInfo(e){eJ(e,this.info)||(this.info=e,this._from=this.document.getNode(e.from),this._to=e.to?this.document.getNode(e.to):void 0,this._lineData=e.data,this.fireChange())}validate(){this.validateSelf()}validateSelf(){let{fromPort:e,toPort:n}=this;e&&(this.hasError=this.linesManager.isErrorLine(e,n,this.uiState.hasError))}is(n){return n instanceof e?this===n:e.portInfoToLineId(n)===this.id}canRemove(e){return this.linesManager.canRemove(this,e)}get node(){return this._node||(this._node=k.Si.createDivWithClass("gedit-flow-activity-line"),this._node.dataset.testid="sdk.workflow.canvas.line",this._node.dataset.lineId=this.id,this._node.dataset.fromNodeId=this.from.id,this._node.dataset.fromPortId=this.fromPort?.id??"",this._node.dataset.toNodeId=this.to?.id??"",this._node.dataset.toPortId=this.toPort?.id??"",this._node.dataset.hasError=this.hasError?"true":"false"),this._node}toJSON(){let e={sourceNodeID:this.info.from,targetNodeID:this.info.to,sourcePortID:this.info.fromPort,targetPortID:this.info.toPort};return void 0!==this._lineData&&(e.data=this._lineData),e.sourcePortID||delete e.sourcePortID,e.targetPortID||delete e.targetPortID,e}fireRender(){this.fireChange()}};to.type=e7;var ta=to,tl=class{get onSelectionChanged(){return this.selectionService.onSelectionChanged}get selection(){return this.selectionService.selection}set selection(e){this.selectionService.selection=e}get activatedNode(){let{selectedNodes:e}=this;if(1===e.length)return e[0]}isSelected(e){return this.selectionService.selection.some(n=>n.id===e)}isActivated(e){return this.activatedNode?.id===e}get selectedNodes(){return this.selectionService.selection.filter(e=>e instanceof e8)}selectNode(e){this.selectionService.selection=[e]}toggleSelect(e){this.selectionService.selection.includes(e)?this.selectionService.selection=this.selectionService.selection.filter(n=>n!==e):this.selectionService.selection=this.selectionService.selection.concat(e)}select(e){this.selectionService.selection=[e]}clear(){this.selectionService.selection=[]}async selectNodeAndScrollToView(e,n){this.selectNodeAndFocus(e),await (0,k.cb)(30);let r={entities:[e]};if(n){let n=k.M_.enlarge([e.getData(O.hZ).bounds]).pad(30,30),i=this.playground.config.getViewport(!1);r.zoom=k.Hw.fixSize(n,i),r.scrollToCenter=!0,r.easing=!0}return this.playground.config.scrollToView(r)}selectNodeAndFocus(e){this.select(e),this.playground.node.focus()}};y([(0,_.WQ)(O.A7)],tl.prototype,"selectionService",2),y([(0,_.WQ)(O.QF)],tl.prototype,"playground",2),tl=y([(0,_._G)()],tl);var th=class{constructor(){this.onHoveredChangeEmitter=new k.vl,this.onUpdateHoverPositionEmitter=new k.vl,this.onHoveredChange=this.onHoveredChangeEmitter.event,this.onUpdateHoverPosition=this.onUpdateHoverPositionEmitter.event,this.hoveredPos={x:0,y:0},this.hoveredKey=""}updateHoveredKey(e){this.hoveredKey!==e&&(this.hoveredKey=e,this.onHoveredChangeEmitter.fire(e))}updateHoverPosition(e,n){this.hoveredPos=e,this.onUpdateHoverPositionEmitter.fire({position:e,target:n})}clearHovered(){this.updateHoveredKey("")}isHovered(e){return e===this.hoveredKey}isSomeHovered(){return!!this.hoveredKey}get hoveredNode(){return this.entityManager.getEntityById(this.hoveredKey)}};y([(0,_.WQ)(O.Zy)],th.prototype,"entityManager",2),th=y([(0,_._G)()],th);var tc=Symbol("WorkflowDocumentOptions"),tu={cursors:{grab:'url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjEiIHZpZXdCb3g9IjAgMCAyMCAyMSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMC40ODczIDIuNjIzNzhDOS45MDczMSAyLjYyMzc4IDkuNDM3MTMgMy4wOTM5NiA5LjQzNzEzIDMuNjczOTZWNS4xNDM3NkM5LjM5NDI4IDQuNDAyNzQgOC43Nzk3OCAzLjgxNTA0IDguMDI4MDIgMy44MTUwNEM3LjI0ODQ4IDMuODE1MDQgNi42MTY1MyA0LjQ0Njk5IDYuNjE2NTMgNS4yMjY1M1YxMS44Mjg5TDUuNjc0MTggMTEuMDA0OUM1LjE1NDg3IDEwLjU1MDkgNC40MDk1IDEwLjQ2MzYgMy43OTkzOCAxMC43ODU1TDMuNjk2OTQgMTAuODM5NkMzLjA2MjE3IDExLjE3NDUgMi45MjI2IDEyLjAyMjggMy40MTY2MiAxMi41NDM0TDcuMzM5NTkgMTYuNjc3NVYxNy4zMjU5QzcuMzM5NTkgMTcuNzg2MiA3LjcxMjY5IDE4LjE1OTMgOC4xNzI5MiAxOC4xNTkzSDEzLjgwODRDMTQuMjY4NyAxOC4xNTkzIDE0LjY0MTcgMTcuNzg2MiAxNC42NDE3IDE3LjMyNTlWMTYuNzkzNUMxNS44MDk0IDE1LjY0ODUgMTYuNDY3MyAxNC4wODE5IDE2LjQ2NzMgMTIuNDQ2NVYxMS40OTY3TDE2LjQ2NzEgNi42MzY4NUMxNi40NjcxIDUuOTU2MyAxNS45MTU0IDUuNDA0NjEgMTUuMjM0OCA1LjQwNDYxQzE0LjU1NDMgNS40MDQ2MSAxNC4wMDI2IDUuOTU2MyAxNC4wMDI2IDYuNjM2ODVMMTQuMDAyMSA1LjA0NzI4QzE0LjAwMjEgNC4zNjY3MyAxMy40NTA0IDMuODE1MDQgMTIuNzY5OCAzLjgxNTA0QzEyLjA4OTMgMy44MTUwNCAxMS41Mzc2IDQuMzY2NzMgMTEuNTM3NiA1LjA0NzI4TDExLjUzNzUgMy42NzM5NUMxMS41Mzc1IDMuMDkzOTYgMTEuMDY3MyAyLjYyMzc4IDEwLjQ4NzMgMi42MjM3OFoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNDg3NCAxLjM3NDAyQzExLjM2MTIgMS4zNzQwMiAxMi4xMjExIDEuODYxMTggMTIuNTEwNSAyLjU3ODY4QzEyLjU5NTggMi41Njk4MyAxMi42ODIzIDIuNTY1MjggMTIuNzcgMi41NjUyOEMxMy44Mjc4IDIuNTY1MjggMTQuNzMxMSAzLjIyNzAxIDE1LjA4ODUgNC4xNTkxMUMxNS4xMzcgNC4xNTYyOSAxNS4xODU4IDQuMTU0ODYgMTUuMjM1IDQuMTU0ODZDMTYuNjA1OSA0LjE1NDg2IDE3LjcxNzIgNS4yNjYxOSAxNy43MTcyIDYuNjM3MDlMMTcuNzE3NCAxMi40NDY3QzE3LjcxNzQgMTQuMjM1NSAxNy4wNjQ0IDE1Ljk1NTkgMTUuODkxOSAxNy4yOTA0VjE3LjMyNjJDMTUuODkxOSAxOC40NzY4IDE0Ljk1OTEgMTkuNDA5NSAxMy44MDg1IDE5LjQwOTVIOC4xNzMwNkM3LjAyMjQ3IDE5LjQwOTUgNi4wODk3MyAxOC40NzY4IDYuMDg5NzMgMTcuMzI2MlYxNy4xNzY0TDIuNTEwMDMgMTMuNDA0MUMxLjQ0NTk5IDEyLjI4MjggMS43NDY2IDEwLjQ1NTUgMy4xMTM3OSA5LjczNDI0TDMuMjE2MjQgOS42ODAxOUMzLjg5MTY4IDkuMzIzODMgNC42NjE4NSA5LjI1NDAxIDUuMzY2NjYgOS40NTE5OFY1LjIyNjc4QzUuMzY2NjYgMy43NTY4NyA2LjU1ODI2IDIuNTY1MjggOC4wMjgxNiAyLjU2NTI4QzguMTcyOTMgMi41NjUyOCA4LjMxNDk5IDIuNTc2ODQgOC40NTM0NyAyLjU5OTA3QzguODM5NDMgMS44NzA0MiA5LjYwNTQ2IDEuMzc0MDIgMTAuNDg3NCAxLjM3NDAyWk0xMi40NDc2IDMuODU3ODdWOS40NzY0NkMxMi40NDc2IDkuNzI4NTIgMTIuMjQzMyA5LjkzMjg1IDExLjk5MTMgOS45MzI4NUMxMS43MzkyIDkuOTMyODUgMTEuNTM0OSA5LjcyODUyIDExLjUzNDkgOS40NzY0NlYzLjc5NjU1QzExLjUzNDkgMy43Nzk1NiAxMS41MzU4IDMuNzYyNzcgMTEuNTM3NiAzLjc0NjI2VjMuNjc0MkMxMS41Mzc2IDMuNDMyODIgMTEuNDU2MiAzLjIxMDQ2IDExLjMxOTMgMy4wMzMwOUMxMS4xMjcyIDIuNzg0MjggMTAuODI2MSAyLjYyNDAyIDEwLjQ4NzQgMi42MjQwMkMxMC4xMjM4IDIuNjI0MDIgOS44MDMzMiAyLjgwODg2IDkuNjE0ODMgMy4wODk3QzkuNTAyNjkgMy4yNTY3OSA5LjQzNzI2IDMuNDU3ODUgOS40MzcyNiAzLjY3NDJWMy43ODU3M0M5LjQzNzM1IDMuNzg5MzMgOS40MzczOSAzLjc5Mjk0IDkuNDM3MzkgMy43OTY1NVY5LjkwMTdDOS40MzczOSAxMC4xNTM3IDkuMjMzMDYgMTAuMzU4MSA4Ljk4MTAxIDEwLjM1ODFDOC43Mjg5NSAxMC4zNTgxIDguNTI0NjIgMTAuMTUzNyA4LjUyNDYyIDkuOTAxN1YzLjkwNTA3QzguNDE3NzMgMy44NjQ5IDguMzA0NjggMy44MzczMiA4LjE4NzI2IDMuODI0MTVDOC4xMzUwNCAzLjgxODI5IDguMDgxOTUgMy44MTUyOCA4LjAyODE2IDMuODE1MjhDNy4yNDg2MSAzLjgxNTI4IDYuNjE2NjYgNC40NDcyMyA2LjYxNjY2IDUuMjI2NzhWMTEuODI5Mkw1LjY3NDMxIDExLjAwNTJDNS41Nzg2OCAxMC45MjE2IDUuNDc1MzcgMTAuODUwNCA1LjM2NjY2IDEwLjc5MTlDNC44ODUwNiAxMC41MzI5IDQuMjk3MjggMTAuNTIzMSAzLjc5OTUyIDEwLjc4NThMMy42OTcwNyAxMC44Mzk4QzMuMDYyMzEgMTEuMTc0NyAyLjkyMjczIDEyLjAyMzEgMy40MTY3NSAxMi41NDM3TDcuMzM5NzMgMTYuNjc3N1YxNy4zMjYyQzcuMzM5NzMgMTcuNzg2NCA3LjcxMjgyIDE4LjE1OTUgOC4xNzMwNiAxOC4xNTk1SDEzLjgwODVDMTQuMjY4OCAxOC4xNTk1IDE0LjY0MTkgMTcuNzg2NCAxNC42NDE5IDE3LjMyNjJWMTYuNzkzOEMxNS43Mzc5IDE1LjcxOSAxNi4zODQ3IDE0LjI3MjggMTYuNDYgMTIuNzQ3QzE2LjQ2NDEgMTIuNjY0MSAxNi40NjY1IDEyLjU4MDkgMTYuNDY3MiAxMi40OTc1TDE2LjQ2NzQgMTIuNDQ2N0wxNi40NjcyIDYuNjM3MDlDMTYuNDY3MiA1Ljk2MjMgMTUuOTI0OCA1LjQxNDE5IDE1LjI1MjIgNS40MDQ5N0wxNS4yMzUgNS40MDQ4NkMxNS4xMjQ2IDUuNDA0ODYgMTUuMDE3NyA1LjQxOTM2IDE0LjkxNTkgNS40NDY1NlY5LjYwMjI2QzE0LjkxNTkgOS44NTQzMSAxNC43MTE2IDEwLjA1ODYgMTQuNDU5NSAxMC4wNTg2QzE0LjIwNzUgMTAuMDU4NiAxNC4wMDMxIDkuODU0MzEgMTQuMDAzMSA5LjYwMjI2VjYuNjA1MTRDMTQuMDAyOSA2LjYxNTc2IDE0LjAwMjcgNi42MjY0MSAxNC4wMDI3IDYuNjM3MDlWOS4yNzcwNUwxNC4wMDIyIDUuMDQ3NTJDMTQuMDAyMiA0Ljg2OTEzIDEzLjk2NDMgNC42OTk2IDEzLjg5NjEgNC41NDY1M0MxMy43MDY0IDQuMTIwNzIgMTMuMjgyMiAzLjgyMjM1IDEyLjc4NzYgMy44MTU0MUwxMi43NyAzLjgxNTI4QzEyLjY1ODQgMy44MTUyOCAxMi41NTA0IDMuODMwMSAxMi40NDc2IDMuODU3ODdaIiBmaWxsPSIjMUQxQzIzIi8+Cjwvc3ZnPg=="), auto',grabbing:'url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjEiIHZpZXdCb3g9IjAgMCAyMCAyMSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02LjYxODE3IDUuNTk4NzVDNi42MTgxNyA0LjgxOTIgNy4yNTAxMiA0LjE4NzI2IDguMDI5NjcgNC4xODcyNkM4Ljc3ODczIDQuMTg3MjYgOS4zOTE1MiA0Ljc3MDc1IDkuNDM4MjkgNS41MDgwMUM5LjQ1OTkyIDQuOTQ3MSA5LjkyMTQ3IDQuNDk5MDIgMTAuNDg3NyA0LjQ5OTAyQzExLjA2NzcgNC40OTkwMiAxMS41Mzc4IDQuOTY5MiAxMS41Mzc4IDUuNTQ5MTlWOC43NjI0NkwxMS41Mzc5IDYuNzExNUMxMS41Mzc5IDYuMDMwOTUgMTIuMDg5NiA1LjQ3OTI2IDEyLjc3MDIgNS40NzkyNkMxMy40NTA3IDUuNDc5MjYgMTQuMDAyNCA2LjAzMDk1IDE0LjAwMjQgNi43MTE1TDE0LjAwMjQgOC43NjI0NkwxNC4wMDI5IDguMDE5ODNDMTQuMDAyOSA3LjMzOTI5IDE0LjU1NDYgNi43ODc1OSAxNS4yMzUyIDYuNzg3NTlDMTUuOTE1NyA2Ljc4NzU5IDE2LjQ2NzQgNy4zMzkyOCAxNi40Njc0IDguMDE5ODNWMTEuNDk3TDE2LjQ2NzUgMTIuNDQ2N0MxNi40Njc1IDE0LjA4MjEgMTUuODA5NiAxNS42NDg3IDE0LjY0MiAxNi43OTM4VjE3LjMyNjJDMTQuNjQyIDE3Ljc4NjQgMTQuMjY4OSAxOC4xNTk1IDEzLjgwODcgMTguMTU5NUg4LjE3MzE3QzcuNzEyOTMgMTguMTU5NSA3LjMzOTg0IDE3Ljc4NjQgNy4zMzk4NCAxNy4zMjYyVjE1Ljk0MjRMNS4zNDU2MiAxNC43NTM0QzQuNTg5MjQgMTQuMzAyNCA0LjEyNTkxIDEzLjQ4NjcgNC4xMjU4OSAxMi42MDYxTDQuMTI1ODMgOS4yODM4M0M0LjEyNTgyIDguOTU0MjcgNC4zMjAwMyA4LjY1NTY2IDQuNjIxMjkgOC41MjIwNUw2LjYxODE3IDcuNjM2MzRWNS41OTg3NVoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNDg3OCAzLjI0OTAyQzExLjI3OTYgMy4yNDkwMiAxMS45Nzc4IDMuNjQ5MDIgMTIuMzkxNyA0LjI1Nzk2QzEyLjUxNTEgNC4yMzkwNiAxMi42NDE2IDQuMjI5MjYgMTIuNzcwMyA0LjIyOTI2QzEzLjcyMjQgNC4yMjkyNiAxNC41NDkzIDQuNzY1MzEgMTQuOTY1NyA1LjU1MjA3QzE1LjA1NDMgNS41NDI1IDE1LjE0NDIgNS41Mzc1OSAxNS4yMzUzIDUuNTM3NTlDMTYuNjA2MiA1LjUzNzU5IDE3LjcxNzYgNi42NDg5MyAxNy43MTc2IDguMDE5ODNMMTcuNzE3NyAxMi40NDY3QzE3LjcxNzcgMTQuMjM1NSAxNy4wNjQ3IDE1Ljk1NTkgMTUuODkyMSAxNy4yOTA0VjE3LjMyNjJDMTUuODkyMSAxOC40NzY4IDE0Ljk1OTQgMTkuNDA5NSAxMy44MDg4IDE5LjQwOTVIOC4xNzMzMkM3LjAyMjczIDE5LjQwOTUgNi4wODk5OCAxOC40NzY4IDYuMDg5OTggMTcuMzI2MlYxNi42NTI0TDQuNzA1NjMgMTUuODI3QzMuNTcxMDYgMTUuMTUwNSAyLjg3NjA3IDEzLjkyNzEgMi44NzYwNCAxMi42MDYxTDIuODc1OTggOS4yODM4NUMyLjg3NTk2IDguNDU5OTYgMy4zNjE0OSA3LjcxMzQ1IDQuMTE0NjIgNy4zNzk0TDUuMzY4MzIgNi44MjMzM1Y1LjU5ODc1QzUuMzY4MzIgNC4xMjg4NSA2LjU1OTkxIDIuOTM3MjYgOC4wMjk4MiAyLjkzNzI2QzguNjA4MzEgMi45MzcyNiA5LjE0MzU1IDMuMTIxNyA5LjU4MDA1IDMuNDM1MDVDOS44NTg1MyAzLjMxNTMyIDEwLjE2NTQgMy4yNDkwMiAxMC40ODc4IDMuMjQ5MDJaTTEyLjQ0NzkgNS41MjE4NlY5LjQ3NTU3QzEyLjQ0NzkgOS43Mjc2MiAxMi4yNDM2IDkuOTMxOTUgMTEuOTkxNiA5LjkzMTk1QzExLjc1NjggOS45MzE5NSAxMS41NjM0IDkuNzU0NjUgMTEuNTM4IDkuNTI2NjNDMTEuNTM2MSA5LjUwOTg3IDExLjUzNTIgOS40OTI4MyAxMS41MzUyIDkuNDc1NTdWNS40NzE1OEMxMS41MTU0IDUuMjAwODMgMTEuMzkzIDQuOTU4NTggMTEuMjA2NiA0Ljc4MzU4QzExLjAxODggNC42MDcxMSAxMC43NjU5IDQuNDk5MDIgMTAuNDg3OCA0LjQ5OTAyQzEwLjQ3NjYgNC40OTkwMiAxMC40NjU0IDQuNDk5MTkgMTAuNDU0MiA0LjQ5OTU0QzkuOTAzNDcgNC41MTY4NCA5LjQ1OTY0IDQuOTU4MjQgOS40Mzg0NCA1LjUwODAxQzkuNDM4MiA1LjUwNDMgOS40Mzc5NSA1LjUwMDU4IDkuNDM3NjkgNS40OTY4OFY5LjkwMjQzQzkuNDM3NjkgMTAuMTU0NSA5LjIzMzM2IDEwLjM1ODggOC45ODEzMSAxMC4zNTg4QzguNzI5MjUgMTAuMzU4OCA4LjUyNDkyIDEwLjE1NDUgOC41MjQ5MiA5LjkwMjQzVjQuMjc2NTNDOC4zNzA4NiA0LjIxODgyIDguMjA0MDIgNC4xODcyNiA4LjAyOTgyIDQuMTg3MjZDNy4yNTAyNyA0LjE4NzI2IDYuNjE4MzIgNC44MTkyIDYuNjE4MzIgNS41OTg3NUw2LjYxODI3IDkuOTc1OTlDNi42MTgyNyAxMC4yMjggNi40MTM5NCAxMC40MzI0IDYuMTYxODkgMTAuNDMyNEM1LjkwOTgzIDEwLjQzMjQgNS43MDU1IDEwLjIyOCA1LjcwNTUgOS45NzU5OVY4LjA0MTIyTDQuNjIxNDQgOC41MjIwNUM0LjMyMDE4IDguNjU1NjYgNC4xMjU5NyA4Ljk1NDI3IDQuMTI1OTggOS4yODM4M0w0LjEyNjA0IDEyLjYwNjFDNC4xMjYwNiAxMy40ODY3IDQuNTg5MzkgMTQuMzAyNCA1LjM0NTc2IDE0Ljc1MzRMNy4zMzk5OCAxNS45NDI0VjE3LjMyNjJDNy4zMzk5OCAxNy43ODY0IDcuNzEzMDggMTguMTU5NSA4LjE3MzMyIDE4LjE1OTVIMTMuODA4OEMxNC4yNjkgMTguMTU5NSAxNC42NDIxIDE3Ljc4NjQgMTQuNjQyMSAxNy4zMjYyVjE2Ljc5MzhDMTUuNzM4MSAxNS43MTkgMTYuMzg1IDE0LjI3MjggMTYuNDYwMyAxMi43NDdDMTYuNDY0NiAxMi42NiAxNi40NjcgMTIuNTcyOCAxNi40Njc2IDEyLjQ4NTRMMTYuNDY3NyAxMi40NDY3TDE2LjQ2NzYgOC4wMTk4M0MxNi40Njc2IDcuMzQ1MDQgMTUuOTI1MiA2Ljc5NjkzIDE1LjI1MjUgNi43ODc3MUwxNS4yMzUzIDYuNzg3NTlDMTUuMTI1IDYuNzg3NTkgMTUuMDE4IDYuODAyMSAxNC45MTYyIDYuODI5MzFWOS42MDEzNkMxNC45MTYyIDkuODUzNDIgMTQuNzExOSAxMC4wNTc3IDE0LjQ1OTggMTAuMDU3N0MxNC4yMDc4IDEwLjA1NzcgMTQuMDAzNCA5Ljg1MzQxIDE0LjAwMzQgOS42MDEzNlY3Ljk4OTg1QzE0LjAwMzIgNy45OTk4MiAxNC4wMDMxIDguMDA5ODEgMTQuMDAzMSA4LjAxOTgzTDE0LjAwMzQgOS42MDEzNkwxNC4wMDI1IDYuNzExNUMxNC4wMDI1IDYuNDQ5NzQgMTMuOTIwOSA2LjIwNzA1IDEzLjc4MTggNi4wMDc0OEMxMy41NjIgNS42OTI0MiAxMy4xOTg5IDUuNDg0ODMgMTIuNzg3IDUuNDc5MzdMMTIuNzcwMyA1LjQ3OTI2QzEyLjY1ODggNS40NzkyNiAxMi41NTA3IDUuNDk0MDggMTIuNDQ3OSA1LjUyMTg2WiIgZmlsbD0iIzFEMUMyMyIvPgo8L3N2Zz4="), auto'},fromNodeJSON(e,n,r){let i=e.getData(e1.LO),{formMeta:s}=e.getNodeRegistry();i&&s&&(r?(i.createForm(s,n.data),i.onDataChange(()=>{e.document.fireContentChange({type:"NODE_DATA_CHANGE",toJSON:()=>i.toJSON(),entity:e})})):i.updateFormValues(n.data))},toNodeJSON(e){let n=e.getData(e1.By)?.getError();if(n)throw n;let r=e.getData(O.hZ),i=function(e){let n=e.getData(e1.LO);if(n&&e.getNodeRegistry().formMeta)return n.toJSON()}(e),s={},o=e.getNodeMeta(),a=o.subCanvas?.(e);if(a?.isCanvas===!1){let{x:e,y:n}=a.canvasNode.getData(S.LY).transform.position;s.canvasPosition={x:e,y:n}}return{id:e.id,type:e.flowNodeType,meta:{position:{x:r.position.x,y:r.position.y},...s},data:i}}},td=class{constructor(){this.toDispose=new k.Vd,this._lineType=0,this.onAvailableLinesChangeEmitter=new k.vl,this.onForceUpdateEmitter=new k.vl,this.onAvailableLinesChange=this.onAvailableLinesChangeEmitter.event,this.onForceUpdate=this.onForceUpdateEmitter.event,this.contributionFactories=[],this.isDrawing=!1}init(e){this.document=e}forceUpdate(){this.onForceUpdateEmitter.fire()}get lineType(){return this._lineType}get lineColor(){let e={default:"var(--g-workflow-line-color-default,#4d53e8)",error:"var(--g-workflow-line-color-error,red)",hidden:"var(--g-workflow-line-color-hidden,transparent)",drawing:"var(--g-workflow-line-color-drawing, #5DD6E3)",hovered:"var(--g-workflow-line-color-hover,#37d0ff)",selected:"var(--g-workflow-line-color-selected,#37d0ff)",flowing:"var(--g-workflow-line-color-flowing,#4d53e8)"};return this.options.lineColor&&Object.assign(e,this.options.lineColor),e}switchLineType(e){return void 0===e&&(e=+(0===this._lineType)),e!==this._lineType&&(this._lineType=e,this.getAllLines().forEach(e=>{e.getData(ti).update()}),window.requestAnimationFrame(()=>{this.entityManager.fireEntityChanged(ta.type)})),this._lineType}getAllLines(){return this.entityManager.getEntities(ta)}hasLine(e){return!!this.entityManager.getEntityById(ta.portInfoToLineId(e))}getLine(e){return this.entityManager.getEntityById(ta.portInfoToLineId(e))}getLineById(e){return this.entityManager.getEntityById(e)}replaceLine(e,n){let r=this.getLine(e);return r&&r.dispose(),this.createLine(n)}createLine(e){let{from:n,to:r,drawingTo:i,fromPort:s,toPort:o,data:a}=e,l=!!(n&&r),h=e.key||ta.portInfoToLineId(e),c=this.entityManager.getEntityById(h);if(c)return c.highlightColor="",c.validate(),c;let u=this.entityManager.getEntityById(n)?.getData(tr),d=r?this.entityManager.getEntityById(r).getData(tr):void 0;if(u)return this.isDrawing=!!i,c=this.entityManager.createEntity(ta,{id:h,document:this.document,linesManager:this,from:n,fromPort:s,toPort:o,to:r,drawingTo:i,data:a}),this.registerData(c),u.addLine(c),d?.addLine(c),c.onDispose(()=>{i&&(this.isDrawing=!1),u.removeLine(c),d?.removeLine(c)}),c.onDispose(()=>{l&&this.onAvailableLinesChangeEmitter.fire({type:"DELETE_LINE",toJSON:()=>c.toJSON(),entity:c})}),c.onLineDataChange(({oldValue:e})=>{this.onAvailableLinesChangeEmitter.fire({type:"LINE_DATA_CHANGE",toJSON:()=>c.toJSON(),oldValue:e,entity:c})}),l&&this.onAvailableLinesChangeEmitter.fire({type:"ADD_LINE",toJSON:()=>c.toJSON(),entity:c}),c.validate(),c}getCloseInLineFromMousePos(e,n=8){let r,i;return this.getAllLines().forEach(s=>{let o=s.getHoverDist(e);o<=n&&(!i||i>=o)&&(i=o,r=s)}),r}dispose(){this.toDispose.dispose()}get disposed(){return this.toDispose.disposed}isErrorLine(e,n,r){return this.options.isErrorLine?this.options.isErrorLine(e,n,this):!!r}isReverseLine(e,n=!1){return this.options.isReverseLine?this.options.isReverseLine(e):n}isHideArrowLine(e,n=!1){return this.options.isHideArrowLine?this.options.isHideArrowLine(e):n}isFlowingLine(e,n=!1){return this.options.isFlowingLine?this.options.isFlowingLine(e):n}isDisabledLine(e,n=!1){return this.options.isDisabledLine?this.options.isDisabledLine(e):n}setLineRenderType(e){if(this.options.setLineRenderType)return this.options.setLineRenderType(e)}setLineClassName(e){if(this.options.setLineClassName)return this.options.setLineClassName(e)}getLineColor(e){return e.isHidden?this.lineColor.hidden:e.lockedColor?e.lockedColor:e.hasError?this.lineColor.error:e.highlightColor?e.highlightColor:e.drawingTo?this.lineColor.drawing:this.hoverService.isHovered(e.id)?this.lineColor.hovered:this.selectService.isSelected(e.id)?this.lineColor.selected:this.isFlowingLine(e)?this.lineColor.flowing:this.lineColor.default}canAddLine(e,n,r){if(e===n||e.node===n.node||"output"!==e.portType||"input"!==n.portType||n.disabled)return!1;let i=e.node.getNodeRegistry().canAddLine,s=n.node.getNodeRegistry().canAddLine;return(!i||!!i(e,n,this,r))&&(!s||!!s(e,n,this,r))&&(this.options.canAddLine?this.options.canAddLine(e,n,this,r):e.node!==n.node)}toJSON(){return this.getAllLines().filter(e=>!e.isDrawing).map(e=>e.toJSON())}getPortById(e){return this.entityManager.getEntityById(e)}canRemove(e,n,r){return!this.options||!this.options.canDeleteLine||!!this.options.canDeleteLine(e,n,r)}canReset(e,n,r){return!this.options||!this.options.canResetLine||!!this.options.canResetLine(e,n,r,this)}getPortFromMousePos(e){let n=this.getSortedNodes().reverse().map(e=>e.getData(tt).allPorts).flat().find(n=>n.isHovered(e.x,e.y));if(n){let r=e0(this.getContainNodesFromMousePos(e));if(r&&r!==n.node)return}return n}getNodeFromMousePos(e){let{selection:n}=this.selectService,r=this.getContainNodesFromMousePos(e);if(n?.length){let e=r.filter(e=>n.some(n=>e.id===n.id));if(e?.length)return e0(e)}return e0(r)}registerContribution(e){return this.contributionFactories.push(e),this}registerData(e){e.addData(ti)}getSortedNodes(){return this.document.getAllNodes().sort((e,n)=>this.getNodeIndex(e)-this.getNodeIndex(n))}getContainNodesFromMousePos(e){let n=this.getSortedNodes(),r=this.entityManager.getEntity(O.d0)?.config?.zoom||1;return n.map(n=>{let{bounds:i}=n.getData(S.LY);if(i.clone().pad(4/r).contains(e.x,e.y))return n}).filter(Boolean)}getNodeIndex(e){return e.getData(S.he).stackIndex}};y([(0,_.WQ)(th)],td.prototype,"hoverService",2),y([(0,_.WQ)(tl)],td.prototype,"selectService",2),y([(0,_.WQ)(O.Zy)],td.prototype,"entityManager",2),y([(0,_.WQ)(tc)],td.prototype,"options",2),td=y([(0,_._G)()],td);var tp="free-layout",tf=class{constructor(){this.name=tp}get document(){return this.documentProvider()}update(){this.document.root.getData(S.LY)?.localDirty&&this.document.root.clearMemoGlobal()}syncTransform(e){let n=e.getData(S.LY);if(n.localDirty)e.clearMemoGlobal(),e.clearMemoLocal(),n.transform.update({size:n.data.size}),e.parent&&(e.parent.clearMemoGlobal(),e.parent.clearMemoLocal(),e.parent.getData(S.LY).transform.fireChange())}updateAffectedTransform(e){if(!e.transform.localDirty)return;let n=this.getAllParents(e);[...this.getAllBlocks(e).reverse(),...n].forEach(e=>{this.fireChange(e)})}getPadding(e){let{padding:n}=e.getNodeMeta(),r=e.getData(S.LY);return n?"function"==typeof n?n(r):n:k.d4.empty()}getInitScroll(e){let n=k.M_.enlarge(this.document.getAllNodes().map(e=>e.getData(O.hZ).bounds)).pad(30,30),r=this.playgroundConfig.getViewport(!1),i=k.Hw.fixSize(n,r);return{scrollX:(n.x+n.width/2)*i-this.playgroundConfig.config.width/2,scrollY:(n.y+n.height/2)*i-this.playgroundConfig.config.height/2}}getDefaultInputPoint(e){return e.getData(O.hZ).bounds.leftCenter}getDefaultOutputPoint(e){return e.getData(O.hZ).bounds.rightCenter}getDefaultNodeOrigin(){return{x:.5,y:0}}getAllParents(e){let n=[],r=e.parent;for(;r;)n.push(r),r=r.parent;return n}getAllBlocks(e){return e.blocks.reduce((e,n)=>[...e,...this.getAllBlocks(n)],[e])}fireChange(e){let n=e?.transform;e&&n?.localDirty&&(e.clearMemoGlobal(),e.clearMemoLocal(),n.transform.fireChange())}};y([(0,_.WQ)(O.d0)],tf.prototype,"playgroundConfig",2),y([(0,_.WQ)(S.H7)],tf.prototype,"documentProvider",2),tf=y([(0,_._G)()],tf);var tg=(0,C.d_)("1234567890",5),tm=Symbol("WorkflowDocumentProvider"),ty=class extends S.mi{constructor(){super(...arguments),this._onContentChangeEmitter=new k.vl,this.onLoadedEmitter=new k.vl,this.onContentChange=this._onContentChangeEmitter.event,this._onReloadEmitter=new k.vl,this.onReload=this._onReloadEmitter.event,this.onLoaded=this.onLoadedEmitter.event,this._loading=!1,this.options={}}get loading(){return this._loading}async fitView(e){return e3(this,this.playgroundConfig,e).then(()=>{this.linesManager.forceUpdate()})}init(){super.init(),this.currentLayoutKey=this.options.defaultLayout||tp,this.linesManager.init(this),this.playgroundConfig.getCursors=()=>this.options.cursors,this.linesManager.onAvailableLinesChange(e=>this.fireContentChange(e)),this.playgroundConfig.onReadonlyOrDisabledChange(({readonly:e})=>{this.nodeEngineContext&&(this.nodeEngineContext.readonly=e)})}async load(){this.disposed||(this._loading=!0,await super.load(),this._loading=!1,this.onLoadedEmitter.fire())}async reload(e,n=0){this.disposed||(this._loading=!0,this.clear(),this.fromJSON(e),await (0,k.cb)(n),this._loading=!1,this._onReloadEmitter.fire(this))}fromJSON(e,n=!0){if(this.disposed)return;let r={nodes:e.nodes??[],edges:e.edges??[]};this.entityManager.changeEntityLocked=!0,this.renderJSON(r),this.entityManager.changeEntityLocked=!1,this.transformer.loading=!1,n&&this.fireRender()}clear(){this.getAllNodes().map(e=>e.dispose()),this.linesManager.getAllLines().map(e=>e.dispose()),this.getAllPorts().map(e=>e.dispose()),this.selectServices.clear()}createWorkflowNode(e,n=!1,r){let i=this.getNode(e.id),s=this.getNode(r??this.root.id)??this.root,o=this.addNode({...e,parent:s},void 0,!0),{formMeta:a}=o.getNodeRegistry(),l=o.getNodeMeta(),h=o.getData(e1.LO),c=o.getData(S.LY),u=this.layout;i||c.onDataChange(()=>{u.syncTransform(o)});let{position:d}=l;d||(d=this.getNodeDefaultPosition(e.type)),o.getData(O.hZ).update({position:d}),a&&h&&!h.formModel.initialized&&(h.createForm(a,e.data),h.onDataChange(()=>{this.fireContentChange({type:"NODE_DATA_CHANGE",toJSON:()=>h.toJSON(),entity:o})}));let p=o.getData(O.q1);i||p.onDataChange(()=>{this.fireContentChange({type:"MOVE_NODE",toJSON:()=>p.toJSON(),entity:o})});let f=this.getNodeSubCanvas(o);if(!i&&!f?.isCanvas){let e;this.fireContentChange({type:"ADD_NODE",entity:o,toJSON:()=>this.toNodeJSON(o)}),o.onDispose(()=>{o.parent&&o.parent.flowNodeType!==S.y.ROOT&&o.parent.getData(S.LY).fireChange()}),o.preDispose.onDispose(()=>{e=this.toNodeJSON(o)}),o.onDispose(()=>{this.fireContentChange({type:"DELETE_NODE",entity:o,toJSON:()=>e})})}return e.blocks&&this.renderJSON({nodes:e.blocks,edges:e.edges??[]},{parent:o,isClone:n}),f&&(f.canvasNode.getData(O.hZ).update({position:f.parentNode.getNodeMeta()?.canvasPosition}),i||(f.parentNode.onDispose(()=>{f.canvasNode.dispose()}),f.canvasNode.onDispose(()=>{f.parentNode.dispose()}))),i?this.onNodeUpdateEmitter.fire({node:o,data:e,json:e}):this.onNodeCreateEmitter.fire({node:o,data:e,json:e}),o}addNode(e,n,r){let{id:i,type:s="block",originParent:o,parent:a,meta:l,hidden:h,index:c}=e,u=this.getNode(i),d=!1,p=this.getNodeRegistry(s,e.originParent);if(u&&u.flowNodeType!==e.type&&(u.dispose(),u=void 0),u)this.options.fromNodeJSON?.(u,e,!1);else{let{dataRegistries:n}=p;u=this.entityManager.createEntity(e8,{id:i,document:this,flowNodeType:s,originParent:o,meta:l});let r=n?this.nodeDataRegistries.concat(...n):this.nodeDataRegistries;u.addInitializeData(r),u.onDispose(()=>this.onNodeDisposeEmitter.fire({node:u})),this.options.fromNodeJSON?.(u,e,!0),d=!0}if(u.initData({originParent:o,parent:a,meta:l,hidden:h,index:c}),n?.push(u),p.onCreate){let r=p.onCreate(u,e);r&&n&&n.push(...r)}return r||(d?this.onNodeCreateEmitter.fire({node:u,data:e,json:e}):this.onNodeUpdateEmitter.fire({node:u,data:e,json:e})),u}get layout(){let e=this.layouts.find(e=>e.name==this.currentLayoutKey);if(!e)throw Error(`Unknown flow layout: ${this.currentLayoutKey}`);return e}getNodeDefaultPosition(e){let{size:n}=this.getNodeRegistry(e).meta||{},r=this.playgroundConfig.getViewport(!0).center;return n&&(r={x:r.x,y:r.y-n.height/2}),e6(this,r)}createWorkflowNodeByType(e,n,r={},i){let s=r.id;if(void 0===s)do s=`1${tg()}`;while(this.entityManager.getEntityById(s));else if(this.entityManager.getEntityById(s))throw Error(`[WorkflowDocument.createWorkflowNodeByType] Node Id "${s}" duplicated.`);return this.createWorkflowNode({...r,id:s,type:e,meta:{position:n,...r?.meta},data:r?.data,blocks:r?.blocks,edges:r?.edges},!1,i)}getAllNodes(){return this.entityManager.getEntities(e8).filter(e=>e.id!==S.y.ROOT)}getAllPorts(){return this.entityManager.getEntities(te).filter(e=>e.node.id!==S.y.ROOT)}getAssociatedNodes(){let e=this.getAllNodes(),n=this.linesManager.getAllLines().filter(e=>e.from&&e.to).map(e=>({from:e.from.id,to:e.to.id})),r=e.find(e=>e.isStart)?.id,i=e.find(e=>e.isNodeEnd)?.id,s=new Set(e.filter(e=>e.parent?.getNodeMeta().isContainer).map(e=>e.id));i&&s.add(i);let o=e=>{s.has(e)||(s.add(e),n.reduce((n,{from:r,to:i})=>(r!==e||s.has(i)||n.push(i),n),[]).forEach(o))};return r&&o(r),e.filter(e=>s.has(e.id))}fireRender(){this.entityManager.fireEntityChanged(e8.type),this.entityManager.fireEntityChanged(ta.type),this.entityManager.fireEntityChanged(te.type)}fireContentChange(e){this._loading||this.disposed||this.entityManager.changeEntityLocked||this._onContentChangeEmitter.fire(e)}toNodeJSON(e){let n=this.getNodeSubCanvas(e);if(n?.isCanvas===!0)return this.toNodeJSON(n.parentNode);let r=this.toNodeJSONFromOptions(e),i=this.getNodeChildren(e),s=i.map(e=>this.toNodeJSON(e)),o=new Map;i.forEach(e=>{let n=e.getData(tr);[...n.inputLines,...n.outputLines].filter(Boolean).forEach(e=>{let n=this.toLineJSON(e);!n||o.has(e.id)||o.set(e.id,n)})});let a=Array.from(o.values());return s.length>0&&(r.blocks=s),a.length>0&&(r.edges=a),r}toNodeJSONFromOptions(e){return this.options.toNodeJSON?this.options.toNodeJSON(e):tu.toNodeJSON(e)}copyNode(e,n,r,i){let s=this.toNodeJSON(e);return r&&(s=r(s)),i=i||{x:s.meta.position.x+30,y:s.meta.position.y+30},this.createWorkflowNode({id:n||`1${tg()}`,type:e.flowNodeType,meta:{...s.meta,position:i},data:s.data,blocks:s.blocks,edges:s.edges},!0,e.parent?.id)}copyNodeFromJSON(e,n,r,i,s){return i=i||{x:n.meta.position.x+30,y:n.meta.position.y+30},this.createWorkflowNode({id:r||`1${tg()}`,type:e,meta:{...n.meta,position:i},data:n.data,blocks:n.blocks,edges:n.edges},!0,s)}canRemove(e,n){return!e.getNodeMeta().deleteDisable&&(!this.options.canDeleteNode||!!this.options.canDeleteNode(e,n))}isErrorPort(e,n=!1){return"function"==typeof this.options.isErrorPort?this.options.isErrorPort(e):n}toJSON(){if(this.disposed)throw Error("The WorkflowDocument has been disposed and it is no longer possible to call toJSON.");let e=this.toNodeJSON(this.root);return{nodes:e.blocks??[],edges:e.edges??[]}}dispose(){super.dispose(),this._onReloadEmitter.dispose()}renderJSON(e,n){return this.batchAddFromJSON(e,n)}batchAddFromJSON(e,n){let{parent:r=this.root,isClone:i=!1}=n??{},s=this.getNodeSubCanvas(r)?.canvasNode.id??r.id,o=(e=>{let{nodes:n,edges:r}=e,i=n.filter(e=>e.type===S.y.GROUP),s=new Map(n.map(e=>[e.id,e])),o=i.map(e=>{let n=(e.data.blockIDs??[]).map(e=>s.get(e)).filter(Boolean),i=r?.filter(e=>n.some(n=>n.id===e.sourceNodeID||n.id===e.targetNodeID));return{...e,blocks:n,edges:i}}),a=new Set(i.map(e=>e.data.blockIDs).flat());return{nodes:n.filter(e=>!a.has(e.id)).concat(o),edges:r}})(e);return{nodes:o.nodes.map(e=>this.createWorkflowNode(e,i,s)),edges:o.edges.map(e=>this.createWorkflowLine(e,s)).filter(Boolean)}}getNodeSubCanvas(e){if(!e)return;let n=e.getNodeMeta();return n.subCanvas?.(e)}getNodeChildren(e){if(!e||e.flowNodeType===S.y.GROUP)return[];let n=this.getNodeSubCanvas(e);return(n?n.canvasNode.blocks:e.blocks).filter(n=>{let r=n.getNodeMeta();return!r.subCanvas?.(e)?.isCanvas}).filter(Boolean).map(e=>e.flowNodeType===S.y.GROUP?[e,...e.blocks]:e).flat()}toLineJSON(e){let n=e.toJSON();if(!e.from||!e.info.from||!e.fromPort||!e.to||!e.info.to||!e.toPort)return;let r=this.getNodeSubCanvas(e.from),i=this.getNodeSubCanvas(e.to);if(!r||r.isCanvas||!i||!i.isCanvas)return e.from===e.to.parent&&r?{...n,sourceNodeID:r.parentNode.id}:e.to===e.from.parent&&i?{...n,targetNodeID:i.parentNode.id}:n}createWorkflowLine(e,n){let r=this.getNode(e.sourceNodeID),i=this.getNode(e.targetNodeID);if(!r||!i)return;let s={from:e.sourceNodeID,fromPort:e.sourcePortID,to:e.targetNodeID,toPort:e.targetPortID,data:e.data};if(!n)return this.linesManager.createLine(s);let o=this.getNode(n);if(!o)return this.linesManager.createLine(s);let a=this.getNodeSubCanvas(o);return a?s.from===a.parentNode.id?this.linesManager.createLine({...s,from:a.canvasNode.id}):s.to===a.parentNode.id?this.linesManager.createLine({...s,to:a.canvasNode.id}):this.linesManager.createLine(s):this.linesManager.createLine(s)}};function tO(e,n,r){return!!(!r||e>100||Math.abs(n.endPos.x-n.startPos.x)>=5||Math.abs(n.endPos.y-n.startPos.y)>=5)}y([(0,_.WQ)(td)],ty.prototype,"linesManager",2),y([(0,_.WQ)(O.d0)],ty.prototype,"playgroundConfig",2),y([(0,O.y)()],ty.prototype,"playgroundContext",2),y([(0,_.WQ)(tc)],ty.prototype,"options",2),y([(0,_.WQ)(e1.Uy),(0,_.lq)()],ty.prototype,"nodeEngineContext",2),y([(0,_.WQ)(tl)],ty.prototype,"selectServices",2),y([(0,_.kr)()],ty.prototype,"init",1),ty=y([(0,_._G)()],ty);var tv=class{constructor(){this._onDragLineEventEmitter=new k.vl,this.onDragLineEventChange=this._onDragLineEventEmitter.event,this.isDragging=!1,this._nodesDragEmitter=new k.vl,this.onNodesDrag=this._nodesDragEmitter.event,this._toDispose=new k.Vd,this._droppableTransforms=[],this.posAdjusters=new Set,this._onDragLineEndCallbacks=new Map}init(){this._toDispose.pushAll([this._onDragLineEventEmitter,this._nodesDragEmitter]),this.options.onDragLineEnd&&this._toDispose.push(this.onDragLineEnd(this.options.onDragLineEnd))}dispose(){this._toDispose.dispose()}async startDragSelectedNodes(e){let{selectedNodes:n}=this.selectService;if(0===n.length||this.playgroundConfig.readonly||this.playgroundConfig.disabled||this.isDragging)return Promise.resolve(!1);this.isDragging=!0;let r=this.childrenOfContainer(n);r&&r.flowNodeType!==S.y.ROOT&&(n=[r]);let i=this.getNodesPosition(n),s=n.map(e=>{let n=e.getData(O.hZ);return{x:n.position.x,y:n.position.y}}),o=!1,a=Date.now(),l=new O.EI({onDragStart:r=>{this._nodesDragEmitter.fire({type:"onDragStart",nodes:n,startPositions:s,dragEvent:r,triggerEvent:e,dragger:l})},onDrag:r=>{!o&&tO(Date.now()-a,r)&&(o=!0);let h=this.getDragPosOffset({event:r,selectedNodes:n,startPosition:i}),c=[];n.forEach((e,n)=>{let r=e.getData(O.hZ),i=s[n],o={x:i.x+h.x,y:i.y+h.y};r.update({position:o}),this.document.layout.updateAffectedTransform(e),c.push(o)}),this._nodesDragEmitter.fire({type:"onDragging",nodes:n,startPositions:s,positions:c,dragEvent:r,triggerEvent:e,dragger:l})},onDragEnd:r=>{this.isDragging=!1,this._nodesDragEmitter.fire({type:"onDragEnd",nodes:n,startPositions:s,dragEvent:r,triggerEvent:e,dragger:l})}}),{clientX:h,clientY:c}=O.D9.getEventCoord(e);return l.start(h,c,this.playgroundConfig)?.then(()=>o)}async dropCard(e,n,r,i){let s=this.playgroundConfig.getPosFromMouseEvent(n);if(!this.playgroundConfig.getViewport().contains(s.x,s.y))return;let o=this.adjustSubNodePosition(e,i,s);return await this.document.createWorkflowNodeByType(e,o,r,i?.id)}async startDragCard(e,n,r,i){let s,o={x:0,y:0},a=new k.hc,l=new O.EI({onDragStart:e=>{let r=n.currentTarget;s=i?i(e):r.cloneNode(!0);let a=r.getBoundingClientRect();o={x:a.left,y:a.top},k.Si.setStyle(s,{zIndex:1e3,position:"absolute",left:o.x,top:o.y,boxShadow:"0 6px 8px 0 rgba(28, 31, 35, .2)"}),document.body.appendChild(s),this.updateDroppableTransforms()},onDrag:e=>{let n=e.endPos.x-e.startPos.x,r=e.endPos.y-e.startPos.y,i=o.x+n,a=o.y+r;s.style.left=`${i}px`,s.style.top=`${a}px`;let{x:l,y:h}=this.playgroundConfig.getPosFromMouseEvent(e),c=new k.M_(l,h,170,90),u=this._droppableTransforms.find(e=>{let{bounds:n,entity:r}=e,i=this.document.layout.getPadding(r),s=new k.M_(n.x+i.left+i.right,n.y,n.width,n.height);return k.M_.intersects(c,s)});this.updateDropNode(u?.entity)},onDragEnd:async n=>{let i=this._dropNode,{allowDrop:l}=this.canDropToNode({dragNodeType:e,dropNodeType:i?.flowNodeType,dropNode:i}),h=l?await this.dropCard(e,n,r,i):void 0;(this.clearDrop(),h)?(s.remove(),a.resolve(h)):(s.style.transition="all ease .2s",s.style.left=`${o.x}px`,s.style.top=`${o.y}px`,await (0,k.cb)(200),s.remove(),a.resolve())}});return await l.start(n.clientX,n.clientY),a.promise}adjustSubNodePosition(e,n,r){if(!r)return{x:0,y:0};if(!e||!n||n.flowNodeType===S.y.ROOT)return r;let i=!n.children||0===n.children.length,s=this.document.layout.getPadding(n),o=n.transform.transform.worldTransform;return i?{x:0,y:s.top}:{x:r.x-o.tx,y:r.y-o.ty}}registerPosAdjuster(e){return this.posAdjusters.add(e),{dispose:()=>this.posAdjusters.delete(e)}}canDropToNode(e){let{canDropToNode:n}=this.document.options,{dragNodeType:r,dropNode:i}=e;return n?n(e)?{allowDrop:!0,dropNode:i}:{allowDrop:!1}:r?{allowDrop:!0,dropNode:i}:{allowDrop:!1,message:"Please select a node to drop"}}getDragPosOffset(e){let{event:n,selectedNodes:r,startPosition:i}=e,{finalScale:s}=this.playgroundConfig,o={x:(n.endPos.x-n.startPos.x)/s,y:(n.endPos.y-n.startPos.y)/s},a={x:i.x+o.x,y:i.y+o.y};return Array.from(this.posAdjusters.values()).map(e=>e({selectedNodes:r,position:a})).reduce((e,n)=>({x:e.x+n.x,y:e.y+n.y}),o)}updateDroppableTransforms(){this._droppableTransforms=this.document.getRenderDatas(S.LY,!1).filter(e=>{let{entity:n}=e;return n.originParent?this.nodeSelectable(n)&&this.nodeSelectable(n.originParent):this.nodeSelectable(n)}).filter(e=>this.isContainer(e.entity))}isContainer(e){return e?.getNodeMeta().isContainer??!1}getNodesPosition(e){let n=k.M_.enlarge(e.map(e=>e.getData(S.LY).bounds));return{x:n.x,y:n.y}}nodeSelectable(e){let n=e.getNodeMeta().selectable;return"function"==typeof n?n(e):n}updateDropNode(e){if(this._dropNode){if(this._dropNode.id===e?.id)return;this.selectService.clear()}e&&this.selectService.selectNode(e),this._dropNode=e}clearDrop(){this._dropNode&&this.selectService.clear(),this._dropNode=void 0,this._droppableTransforms=[]}setLineColor(e,n){e.highlightColor=n,this.hoverService.clearHovered()}handleDragOnNode(e,n,r,i,s){return i&&(s?.toPort===i||"input"===i.portType&&this.linesManager.canAddLine(n,i,!0))?(this.hoverService.updateHoveredKey(i.id),r.setToPort(i),this._onDragLineEventEmitter.fire({type:"onDrag",onDragNodeId:e.id}),{hasError:!1}):this.isContainer(e)?{hasError:!1}:(this.setLineColor(r,this.linesManager.lineColor.error),{hasError:!0})}childrenOfContainer(e){if(0===e.length)return;let n=e[0]?.parent;if(n&&n.collapsedChildren.length===e.length&&e.every(e=>e?.parent===n))return n}async startDrawingLine(e,n,r){let i=!r&&e.isErrorPort()&&e.disabled;if(r?.disabled||i||this.playgroundConfig.readonly||this.playgroundConfig.disabled)return{dragSuccess:!1,newLine:void 0};this.selectService.clear();let s=this.playgroundConfig,o=new k.hc,a=s.cursor,l,h,c,u=!1,d=Date.now(),p=!1,f=new O.EI({onDrag:i=>{if(!l&&tO(Date.now()-d,i,r)){r&&(r.highlightColor=this.linesManager.lineColor.hidden),p=!0;let i=s.getPosFromMouseEvent(n);if(!(l=this.linesManager.createLine({from:e.node.id,fromPort:e.portID,data:r?.lineData,drawingTo:{x:i.x,y:i.y,location:"right"===e.location?"left":"top"}})))return;s.updateCursor("grab"),l.highlightColor=r?.lockedColor||this.linesManager.lineColor.drawing,this.hoverService.updateHoveredKey("")}if(!l)return;u=!1;let o=s.getPosFromMouseEvent(i);if(c=this.linesManager.getNodeFromMousePos(o),(h=this.linesManager.getPortFromMousePos(o))?this.linesManager.canAddLine(e,h,!0)?l.setToPort(h):(l.highlightColor=this.linesManager.lineColor.error,u=!0,l.setToPort(void 0)):l.setToPort(void 0),this._onDragLineEventEmitter.fire({type:"onDrag"}),this.setLineColor(l,r?.lockedColor||this.linesManager.lineColor.drawing),c&&this.canBuildContainerLine(c,o)){h=this.getNearestPort(c,o);let{hasError:n}=this.handleDragOnNode(c,e,l,h,r);u=n}l.toPort?l.drawingTo={x:l.toPort.point.x,y:l.toPort.point.y,location:l.toPort.location}:l.drawingTo={x:o.x,y:o.y,location:"right"===l.fromPort.location?"left":"top"},r?.validate(),l.validate()},onDragEnd:async n=>{let i=s.getPosFromMouseEvent(n),c=Array.from(this._onDragLineEndCallbacks.values());s.updateCursor(a),await Promise.all(c.map(s=>s({fromPort:e,toPort:h,mousePos:i,line:l,originLine:r,event:n}))),l?.dispose(),this._onDragLineEventEmitter.fire({type:"onDragEnd"}),r&&(r.highlightColor="");let d=()=>{r?.validate(),o.resolve({dragSuccess:p})};if(p){if(r&&r.toPort===h||h&&"input"!==h.portType)return d();let n=h?{from:e.node.id,fromPort:e.portID,to:h.node.id,toPort:h.portID,data:r?.lineData}:void 0;if(r&&h&&!this.linesManager.canReset(r.fromPort,r.toPort,h)||r&&(!this.linesManager.canRemove(r,n,!1)||u))return d();if(r?.dispose(),!h||!this.linesManager.canAddLine(e,h,!1))return d();let i=this.linesManager.createLine(n);i||d(),o.resolve({dragSuccess:p,newLine:i})}else d()}}),{clientX:g,clientY:m}=O.D9.getEventCoord(n);return await f.start(g,m,s),o.promise}async resetLine(e,n){let{fromPort:r}=e,{dragSuccess:i}=await this.startDrawingLine(r,n,e);i||this.selectService.select(e)}onDragLineEnd(e){let n=(0,C.Ak)();return this._onDragLineEndCallbacks.set(n,e),{dispose:()=>{this._onDragLineEndCallbacks.delete(n)}}}canBuildContainerLine(e,n){if(!this.isContainer(e))return!0;let{padding:r,bounds:i}=e.transform;return new k.M_(i.x,i.y,2*r.left/3,i.height).contains(n.x,n.y)}getNearestPort(e,n){return e.getData(tt).inputPorts.sort((e,r)=>Math.abs(n.y-e.point.y)-Math.abs(n.y-r.point.y))[0]}};y([(0,_.WQ)(O.d0)],tv.prototype,"playgroundConfig",2),y([(0,_.WQ)(th)],tv.prototype,"hoverService",2),y([(0,_.WQ)(ty)],tv.prototype,"document",2),y([(0,_.WQ)(td)],tv.prototype,"linesManager",2),y([(0,_.WQ)(O.NM)],tv.prototype,"commandService",2),y([(0,_.WQ)(tl)],tv.prototype,"selectService",2),y([(0,_.WQ)(S.Kz)],tv.prototype,"operationService",2),y([(0,_.WQ)(tc)],tv.prototype,"options",2),y([(0,_.kr)()],tv.prototype,"init",1),tv=y([(0,_._G)()],tv);var tb=async(e,n)=>{let r={};return e.forEach(e=>{let n=e.getData(O.hZ),i=e.getData(S.LY);r[e.id]={x:n.position.x,y:n.position.y+i.bounds.height/2}}),new Promise(i=>{(0,O.Yc)({from:{d:0},to:{d:100},duration:300,onUpdate:r=>{e.forEach(e=>{let i=e.getData(O.hZ),s=(n[e.id].x-i.position.x)*r.d/100,o=(n[e.id].y-i.bounds.height/2-i.position.y)*r.d/100;i.update({position:{x:i.position.x+s,y:i.position.y+o}}),e.document.layout.updateAffectedTransform(e)})},onComplete:()=>{i(r)}})})},tx=class{constructor(){this._resetLayoutEmitter=new k.vl,this.onResetLayout=this._resetLayoutEmitter.event,this._toDispose=new k.Vd}init(){this._toDispose.push(this._resetLayoutEmitter)}fireResetLayout(e,n,r){this._resetLayoutEmitter.fire({nodeIds:e,positionMap:n,oldPositionMap:r})}async layoutToPositions(e,n){let r=e.map(e=>this._entityManager.getEntityById(e)).filter(Boolean),i=await tb(r,n);return e3(this._document,this._config,!0),i}dispose(){this._toDispose.dispose()}};y([(0,_.WQ)(O.d0)],tx.prototype,"_config",2),y([(0,_.WQ)(ty)],tx.prototype,"_document",2),y([(0,_.WQ)(O.Zy)],tx.prototype,"_entityManager",2),y([(0,_.kr)()],tx.prototype,"init",1),tx=y([(0,_._G)()],tx);var tw=class extends S.Uz{constructor(){super(...arguments),this.onNodePostionUpdateEmitter=new k.vl,this.onNodePostionUpdate=this.onNodePostionUpdateEmitter.event}updateNodePosition(e,n){let r=this.toNodeEntity(e);if(!r)return;let i=r.getData(O.hZ),s={x:i.position.x,y:i.position.y};i.update({position:n}),this.onNodePostionUpdateEmitter.fire({node:r,oldPosition:s,newPosition:n})}};function tS(e){let n=(0,O.rJ)(),r=(0,O.b6)();return(0,b.useEffect)(()=>{let i;return e&&(i=n.config.onReadonlyOrDisabledChange(()=>r())),()=>i?.dispose()},[e]),n.config.readonly}function t_(e){return e&&"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName&&!e.closest(".flow-canvas-not-draggable")}y([(0,_.WQ)(ty)],tw.prototype,"document",2);var tk=navigator?.userAgent?.includes?.("Firefox");function tC(e){let n=e||(0,b.useContext)(O.id),r=n.getData(S.he),i=n.getData(tt),s=tS(),o=(0,O.h1)(tv),a=(0,O.h1)(tl),l=(0,b.useRef)(!1),[h,c]=(0,b.useState)(0),u=(0,b.useRef)(!1);u.current=!1;let d=(0,b.useRef)(null),[p,f]=(0,b.useState)("");(0,b.useEffect)(()=>{let e=o.onDragLineEventChange(({type:e,onDragNodeId:n})=>{"onDrag"===e?f(n||""):f("")});return()=>{e.dispose()}},[]);let g=(0,b.useCallback)(e=>{O.D9.preventDefault(e),a.isSelected(n.id)||m(e),(O.D9.isTouchEvent(e)||t_(e.target)&&t_(document.activeElement))&&(l.current=!0,o.startDragSelectedNodes(e)?.finally(()=>setTimeout(()=>{l.current=!1})))},[o,n]),m=(0,b.useCallback)(e=>{!l.current&&(e.shiftKey?a.toggleSelect(n):a.selectNode(n),e.target&&e.target.focus())},[n]),y=(0,b.useCallback)(()=>n.dispose(),[n]);(0,O.SB)(i.onDataChange);let _=(0,b.useCallback)(()=>{tk&&d.current?.setAttribute("draggable","false")},[]),k=(0,b.useCallback)(()=>{tk&&d.current?.setAttribute("draggable","true")},[]),C=(0,b.useCallback)(()=>n.getExtInfo(),[n]),E=(0,b.useCallback)(e=>{n.updateExtInfo(e)},[n]),T=(0,b.useMemo)(()=>(0,w.BA)(n),[n]),P=(0,x.eo)(T?.state),A=(0,b.useCallback)(()=>{r.toggleExpand()},[r]),M=a.isSelected(n.id),N=a.isActivated(n.id),D=r.expanded;return(0,b.useEffect)(()=>{let e=T?.onFormValuesChange(()=>{u.current&&c(e=>e+1)});return()=>e?.dispose()},[T]),(0,b.useMemo)(()=>({id:n.id,type:n.flowNodeType,get data(){if(T)return u.current=!0,T.values;return C()},updateData(e){T?T.updateFormValues(e):E(e)},node:n,selected:M,activated:N,expanded:D,startDrag:g,get ports(){return i.allPorts},deleteNode:y,selectNode:m,readonly:s,linkingNodeId:p,nodeRef:d,onFocus:_,onBlur:k,getExtInfo:C,updateExtInfo:E,toggleExpand:A,get form(){if(!T)return;return{...T,get values(){return u.current=!0,T.values},get state(){return P}}}}),[n,M,N,D,g,y,m,s,p,d,_,k,C,E,A,h])}function tE(){return(0,O.Oj)()}var tT=((h=tT||{}).GRAB="GRAB",h.SELECT="SELECT",h),tP=((c=tP||{}).MOUSE="MOUSE",c.PAD="PAD",c),tA=class{registerDocument(e){e.registerNodeDatas(S.LY,S.he,tt,tr),e.registerLayout(this.freeLayout)}};y([(0,_.WQ)(tf)],tA.prototype,"freeLayout",2),tA=y([(0,_._G)()],tA);var tM=new _.i0((e,n,r,i)=>{e(ty).toSelf().inSingletonScope(),e(td).toSelf().inSingletonScope(),e(tf).toSelf().inSingletonScope(),e(tv).toSelf().inSingletonScope(),e(tl).toSelf().inSingletonScope(),e(th).toSelf().inSingletonScope(),e(tx).toSelf().inSingletonScope(),e(f).to(tw).inSingletonScope(),e(u).toDynamicValue(()=>location.search.replace(/^\?/,"").split("&").reduce((e,n)=>{let[r,i]=n.split("=");return e[r]=i,e},{})).inSingletonScope(),(0,k.Nu)(e,tA,[S.Gx]),e(tc).toConstantValue({...tu}),i(S.mi).toService(ty),e(tm).toDynamicValue(e=>()=>e.container.get(ty)).inSingletonScope()})},40622:function(e,n,r){"use strict";r.d(n,{vi:()=>o.vi,BAU:()=>o.BAU,QF1:()=>o.QF1,tBW:()=>a.tB,vli:()=>o.vli,TbI:()=>th,SiQ:()=>o.SiQ,hZp:()=>o.hZp,FfK:()=>a.Ff,Ju9:()=>o.Ju9,N0$:()=>o.N0$,hDi:()=>e0.hD,AkI:()=>a.Ak,D9h:()=>o.D9h,NMT:()=>o.NMT,ED_:()=>o.ED_,LY3:()=>o.LY3,Z4G:()=>a.Z4,WQX:()=>o.WQX,cbG:()=>o.cbG,d0U:()=>o.d0U,Be1:()=>a.Be,Ojz:()=>o.Ojz,MVE:()=>a.MV,lSR:()=>tu,rmK:()=>a.rm,idb:()=>o.idb,XY6:()=>o.XY6,UGO:()=>o.UGO,rJT:()=>o.rJT,_GM:()=>o._GM,A7z:()=>o.A7z,b6f:()=>o.b6f,fvO:()=>a.fv,F24:()=>o.F24,_6U:()=>tm,Ydp:()=>a.Yd,Zy1:()=>o.Zy1,Wdr:()=>o.Wdr,M_G:()=>o.M_G,tKf:()=>a.tK,FHZ:()=>o.FHZ,WDY:()=>tg,Vo_:()=>a.Vo,QSU:()=>a.QS,kIp:()=>h.kI,GHE:()=>a.GH,$un:()=>o.$un,D0$:()=>o.D0$,ot3:()=>h.ot,LO:()=>o.LO,yaD:()=>o.yaD,lVW:()=>o.lVW,h1n:()=>o.h1n}),r(94266);var i,s,o=r(58639),a=r(91280),l=r(96540),h=r(23011),c=r(11812),u=r(84808),d=r(96743),p=r(81376),f=r(32893),g=Object.defineProperty,m=Object.getOwnPropertyDescriptor,y=(e,n,r,i)=>{for(var s,o=i>1?void 0:i?m(n,r):n,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i?s(n,r,o):s(o))||o);return i&&o&&g(n,r,o),o},O=class{constructor(){let e={};e._next=e._prev=e,this._sentinel=e}dequeue(){let e=this._sentinel,n=e._prev;if(n!==e)return b(n),n}enqueue(e){let n=this._sentinel;e._prev&&e._next&&b(e),e._next=n._next,n._next._prev=e,n._next=e,e._prev=n}toString(){let e=[],n=this._sentinel,r=n._prev;for(;r!==n;)e.push(JSON.stringify(r,x)),r=r._prev;return"["+e.join(", ")+"]"}};function b(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function x(e,n){if("_next"!==e&&"_prev"!==e)return n}var w=()=>1;function S(e,n,r,i,s){let o=s?[]:void 0;return e.inEdges(i.v).forEach(i=>{let a=e.edge(i),l=e.node(i.v);s&&o.push({v:i.v,w:i.w}),l.out-=a,_(n,r,l)}),e.outEdges(i.v).forEach(i=>{let s=e.edge(i),o=i.w,a=e.node(o);a.in-=s,_(n,r,a)}),e.removeNode(i.v),o}function _(e,n,r){r.out?r.in?e[r.out-r.in+n].enqueue(r):e[e.length-1].enqueue(r):e[0].enqueue(r)}var k={addBorderNode:function(e,n,r,i){let s={width:0,height:0};return arguments.length>=4&&(s.rank=r,s.order=i),C(e,"border",s,n)},addDummyNode:C,applyWithChunking:A,asNonCompoundGraph:function(e){let n=new d.Graph({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(r=>{e.children(r).length||n.setNode(r,e.node(r))}),e.edges().forEach(r=>{n.setEdge(r,e.edge(r))}),n},buildLayerMatrix:function(e){let n=I(M(e)+1).map(()=>[]);return e.nodes().forEach(r=>{let i=e.node(r),s=i.rank;void 0!==s&&(n[s][i.order]=r)}),n},intersectRect:function(e,n){let r,i,s=e.x,o=e.y,a=n.x-s,l=n.y-o,h=e.width/2,c=e.height/2;if(!a&&!l)throw Error("Not possible to find intersection inside of the rectangle");return Math.abs(l)*h>Math.abs(a)*c?(l<0&&(c=-c),r=c*a/l,i=c):(a<0&&(h=-h),r=h,i=h*l/a),{x:s+r,y:o+i}},mapValues:function(e,n){let r=n;return"string"==typeof n&&(r=e=>e[n]),Object.entries(e).reduce((e,[n,i])=>(e[n]=r(i,n),e),{})},maxRank:M,normalizeRanks:T,notime:function(e,n){return n()},partition:function(e,n){let r={lhs:[],rhs:[]};return e.forEach(e=>{n(e)?r.lhs.push(e):r.rhs.push(e)}),r},pick:function(e,n){let r={};for(let i of n)void 0!==e[i]&&(r[i]=e[i]);return r},predecessorWeights:function(e){let n=e.nodes().map(n=>{let r={};return e.inEdges(n).forEach(n=>{r[n.v]=(r[n.v]||0)+e.edge(n).weight}),r});return $(e.nodes(),n)},range:I,removeEmptyRanks:P,simplify:E,successorWeights:function(e){let n=e.nodes().map(n=>{let r={};return e.outEdges(n).forEach(n=>{r[n.w]=(r[n.w]||0)+e.edge(n).weight}),r});return $(e.nodes(),n)},time:function(e,n){let r=Date.now();try{return n()}finally{console.log(e+" time: "+(Date.now()-r)+"ms")}},uniqueId:D,zipObject:$};function C(e,n,r,i){let s;do s=D(i);while(e.hasNode(s));return r.dummy=n,e.setNode(s,r),s}function E(e){let n=new d.Graph().setGraph(e.graph());return e.nodes().forEach(r=>n.setNode(r,e.node(r))),e.edges().forEach(r=>{let i=n.edge(r.v,r.w)||{weight:0,minlen:1},s=e.edge(r);n.setEdge(r.v,r.w,{weight:i.weight+s.weight,minlen:Math.max(i.minlen,s.minlen)})}),n}function T(e){let n=A(Math.min,e.nodes().map(n=>{let r=e.node(n).rank;return void 0===r?Number.MAX_VALUE:r}));e.nodes().forEach(r=>{let i=e.node(r);Object.hasOwn(i,"rank")&&(i.rank-=n)})}function P(e){let n=A(Math.min,e.nodes().map(n=>e.node(n).rank)),r=[];e.nodes().forEach(i=>{let s=e.node(i).rank-n;r[s]||(r[s]=[]),r[s].push(i)});let i=0,s=e.graph().nodeRankFactor;Array.from(r).forEach((n,r)=>{void 0===n&&r%s!=0?--i:void 0!==n&&i&&n.forEach(n=>e.node(n).rank+=i)})}function A(e,n){if(!(n.length>65535))return e.apply(null,n);{let r=function(e,n=65535){let r=[];for(let i=0;i<e.length;i+=n){let s=e.slice(i,i+n);r.push(s)}return r}(n);return e.apply(null,r.map(n=>e.apply(null,n)))}}function M(e){return A(Math.max,e.nodes().map(n=>{let r=e.node(n).rank;return void 0===r?5e-324:r}))}var N=0;function D(e){var n=++N;return toString(e)+n}function I(e,n,r=1){null==n&&(n=e,e=0);let i=e=>e<n;r<0&&(i=e=>n<e);let s=[];for(let n=e;i(n);n+=r)s.push(n);return s}function $(e,n){return e.reduce((e,r,i)=>(e[r]=n[i],e),{})}function R(e){var n={};e.sources().forEach(function r(i){var s=e.node(i);if(Object.hasOwn(n,i))return s.rank;n[i]=!0;var o=A(Math.min,e.outEdges(i).map(n=>null==n?1/0:r(n.w)-e.edge(n).minlen));return o===1/0&&(o=0),s.rank=o})}function L(e,n){return e.node(n.w).rank-e.node(n.v).rank-e.edge(n).minlen}function Q(e){var n,r,i,s,o=new d.Graph({directed:!1}),a=e.nodes()[0],l=e.nodeCount();for(o.setNode(a,{});n=o,r=e,n.nodes().forEach(function e(i){r.nodeEdges(i).forEach(s=>{var o=s.v,a=i===o?s.w:o;n.hasNode(a)||L(r,s)||(n.setNode(a,{}),n.setEdge(i,a,{}),e(a))})}),n.nodeCount()<l;)i=function(e,n){return n.edges().reduce((r,i)=>{let s=1/0;return(e.hasNode(i.v)!==e.hasNode(i.w)&&(s=L(n,i)),s<r[0])?[s,i]:r},[1/0,null])[1]}(o,e),s=o.hasNode(i.v)?L(e,i):-L(e,i),function(e,n,r){e.nodes().forEach(e=>n.node(e).rank+=r)}(o,e,s);return o}var{preorder:j,postorder:V}=d.alg;function z(e){R(e=E(e));var n,r,i=Q(e);for(Z(i),B(i,e);n=q(i);)r=W(i,e,n),X(i,e,n,r)}function B(e,n){var r=V(e,e.nodes());(r=r.slice(0,r.length-1)).forEach(r=>{var i,s,o,a;return i=e,s=n,o=r,a=i.node(o).parent,void(i.edge(o,a).cutvalue=F(i,s,o))})}function F(e,n,r){var i=e.node(r).parent,s=!0,o=n.edge(r,i),a=0;return o||(s=!1,o=n.edge(i,r)),a=o.weight,n.nodeEdges(r).forEach(o=>{var l=o.v===r,h=l?o.w:o.v;if(h!==i){var c,u,d,p=l===s,f=n.edge(o).weight;if(a+=p?f:-f,c=e,u=r,d=h,c.hasEdge(u,d)){var g=e.edge(r,h).cutvalue;a+=p?-g:g}}}),a}function Z(e,n){arguments.length<2&&(n=e.nodes()[0]),function e(n,r,i,s,o){var a=i,l=n.node(s);return r[s]=!0,n.neighbors(s).forEach(o=>{Object.hasOwn(r,o)||(i=e(n,r,i,o,s))}),l.low=a,l.lim=i++,o?l.parent=o:delete l.parent,i}(e,{},1,n)}function q(e){return e.edges().find(n=>e.edge(n).cutvalue<0)}function W(e,n,r){var i=r.v,s=r.w;n.hasEdge(i,s)||(i=r.w,s=r.v);var o=e.node(i),a=e.node(s),l=o,h=!1;return o.lim>a.lim&&(l=a,h=!0),n.edges().filter(n=>h===U(e,e.node(n.v),l)&&h!==U(e,e.node(n.w),l)).reduce((e,r)=>L(n,r)<L(n,e)?r:e)}function X(e,n,r,i){var s,o,a,l,h=r.v,c=r.w;e.removeEdge(h,c),e.setEdge(i.v,i.w,{}),Z(e),B(e,n),s=e,o=n,a=s.nodes().find(e=>!o.node(e).parent),(l=(l=j(s,a)).slice(1)).forEach(e=>{var n=s.node(e).parent,r=o.edge(e,n),i=!1;r||(r=o.edge(n,e),i=!0),o.node(e).rank=o.node(n).rank+(i?r.minlen:-r.minlen)})}function U(e,n,r){return r.low<=n.lim&&n.lim<=r.lim}z.initLowLimValues=Z,z.initCutValues=B,z.calcCutValue=F,z.leaveEdge=q,z.enterEdge=W,z.exchangeEdges=X;var Y=R;function G(e,n,r,i,s,o){let a=s[n][o-1],l=k.addDummyNode(e,"border",{width:0,height:0,rank:o,borderType:n},r);s[n][o]=l,e.setParent(l,i),a&&e.setEdge(a,l,{weight:1})}function H(e){e.nodes().forEach(n=>K(e.node(n))),e.edges().forEach(n=>K(e.edge(n)))}function K(e){let n=e.width;e.width=e.height,e.height=n}function J(e){e.y=-e.y}function ee(e){let n=e.x;e.x=e.y,e.y=n}var et=function(e,n){let r=0;for(let i=1;i<n.length;++i)r+=function(e,n,r){let i=$(r,r.map((e,n)=>n)),s=n.flatMap(n=>e.outEdges(n).map(n=>({pos:i[n.w],weight:e.edge(n).weight})).sort((e,n)=>e.pos-n.pos)),o=1;for(;o<r.length;)o<<=1;let a=2*o-1;o-=1;let l=Array(a).fill(0),h=0;return s.forEach(e=>{let n=e.pos+o;l[n]+=e.weight;let r=0;for(;n>0;)n%2&&(r+=l[n+1]),n=n-1>>1,l[n]+=e.weight;h+=e.weight*r}),h}(e,n[i-1],n[i]);return r};function en(e,n,r){let i;for(;n.length&&(i=n[n.length-1]).i<=r;)n.pop(),e.push(i.vs),r++;return r}function er(e,n,r){return n.map(function(n){var i,s,o;let a,l;return i=e,s=n,o=r,a=function(e){for(var n;e.hasNode(n=k.uniqueId("_root")););return n}(i),l=new d.Graph({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(e=>i.node(e)),i.nodes().forEach(e=>{let n=i.node(e),r=i.parent(e);(n.rank===s||n.minRank<=s&&s<=n.maxRank)&&(l.setNode(e),l.setParent(e,r||a),i[o](e).forEach(n=>{let r=n.v===e?n.w:n.v,s=l.edge(r,e),o=void 0!==s?s.weight:0;l.setEdge(r,e,{weight:i.edge(n).weight+o})}),Object.hasOwn(n,"minRank")&&l.setNode(e,{borderLeft:n.borderLeft[s],borderRight:n.borderRight[s]}))}),l})}function ei(e,n){Object.values(n).forEach(n=>n.forEach((n,r)=>e.node(n).order=r))}function es(e,n,r){if(n>r){let e=n;n=r,r=e}let i=e[n];i||(e[n]=i={}),i[r]=!0}var eo=["nodesep","edgesep","ranksep","marginx","marginy"],ea={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},el=["acyclicer","ranker","rankdir","align"],eh=["width","height"],ec={width:0,height:0},eu=["minlen","weight","width","height","labeloffset"],ed={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},ep=["labelpos"];function ef(e,n){return k.mapValues(k.pick(e,n),Number)}function eg(e){var n={};return e&&Object.entries(e).forEach(([e,r])=>{"string"==typeof e&&(e=e.toLowerCase()),n[e]=r}),n}var em=function(e){let n=new d.Graph({multigraph:!0,compound:!0}),r=eg(e.graph());return n.setGraph(Object.assign({},ea,ef(r,eo),k.pick(r,el))),e.nodes().forEach(r=>{let i=ef(eg(e.node(r)),eh);Object.keys(ec).forEach(e=>{void 0===i[e]&&(i[e]=ec[e])}),n.setNode(r,i),n.setParent(r,e.parent(r))}),e.edges().forEach(r=>{let i=eg(e.edge(r));n.setEdge(r,Object.assign({},ed,ef(i,eu),k.pick(i,ep)))}),n},ey=function(e,n){e.nodes().forEach(r=>{let i=e.node(r),s=n.node(r);i&&(i.x=s.x,i.y=s.y,i.rank=s.rank,n.children(r).length&&(i.width=s.width,i.height=s.height))}),e.edges().forEach(r=>{let i=e.edge(r),s=n.edge(r);i.points=s.points,Object.hasOwn(s,"x")&&(i.x=s.x,i.y=s.y)}),e.graph().width=n.graph().width,e.graph().height=n.graph().height},eO=function(e){let n=e.graph();n.ranksep/=2,e.edges().forEach(r=>{let i=e.edge(r);i.minlen*=2,"c"!==i.labelpos.toLowerCase()&&("TB"===n.rankdir||"BT"===n.rankdir?i.width+=i.labeloffset:i.height+=i.labeloffset)})},ev=function(e){e.edges().forEach(n=>{if(n.v===n.w){var r=e.node(n.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e:n,label:e.edge(n)}),e.removeEdge(n)}})},eb=function(e){var n,r;let i,s,o;("greedy"===e.graph().acyclicer?function(e,n){var r,i;let s,o,a,l,h;if(1>=e.nodeCount())return[];let c=(r=e,i=n||w,s=new d.Graph,o=0,a=0,r.nodes().forEach(e=>{s.setNode(e,{v:e,in:0,out:0})}),r.edges().forEach(e=>{let n=s.edge(e.v,e.w)||0,r=i(e);s.setEdge(e.v,e.w,n+r),a=Math.max(a,s.node(e.v).out+=r),o=Math.max(o,s.node(e.w).in+=r)}),l=(function(e){let n=[];for(let r=0;r<e;r++)n.push(r);return n})(a+o+3).map(()=>new O),h=o+1,s.nodes().forEach(e=>{_(l,h,s.node(e))}),{graph:s,buckets:l,zeroIdx:h});return(function(e,n,r){let i,s=[],o=n[n.length-1],a=n[0];for(;e.nodeCount();){for(;i=a.dequeue();)S(e,n,r,i);for(;i=o.dequeue();)S(e,n,r,i);if(e.nodeCount()){for(let o=n.length-2;o>0;--o)if(i=n[o].dequeue()){s=s.concat(S(e,n,r,i,!0));break}}}return s})(c.graph,c.buckets,c.zeroIdx).flatMap(n=>e.outEdges(n.v,n.w))}(e,(n=e,e=>n.edge(e).weight)):(i=[],s={},o={},(r=e).nodes().forEach(function e(n){Object.hasOwn(o,n)||(o[n]=!0,s[n]=!0,r.outEdges(n).forEach(n=>{Object.hasOwn(s,n.w)?i.push(n):e(n.w)}),delete s[n])}),i)).forEach(n=>{let r=e.edge(n);e.removeEdge(n),r.forwardName=n.name,r.reversed=!0,e.setEdge(n.w,n.v,r,D("rev"))})},ex=function(e){e.edges().forEach(n=>{let r=e.edge(n);if(r.reversed){e.removeEdge(n);let i=r.forwardName;delete r.reversed,delete r.forwardName,e.setEdge(n.w,n.v,r,i)}})},ew=function(e){var n,r,i;let s=k.addDummyNode(e,"root",{},"_root"),o=(r={},(n=e).children().forEach(e=>(function e(i,s){var o=n.children(i);o&&o.length&&o.forEach(n=>e(n,s+1)),r[i]=s})(e,1)),r),a=Object.values(o),l=k.applyWithChunking(Math.max,a)-1,h=2*l+1;e.graph().nestingRoot=s,e.edges().forEach(n=>e.edge(n).minlen*=h);let c=(i=e).edges().reduce((e,n)=>e+i.edge(n).weight,0)+1;e.children().forEach(n=>(function e(n,r,i,s,o,a,l){let h=n.children(l);if(!h.length){l!==r&&n.setEdge(r,l,{weight:0,minlen:i});return}let c=k.addBorderNode(n,"_bt"),u=k.addBorderNode(n,"_bb"),d=n.node(l);n.setParent(c,l),d.borderTop=c,n.setParent(u,l),d.borderBottom=u,h.forEach(h=>{e(n,r,i,s,o,a,h);let d=n.node(h),p=d.borderTop?d.borderTop:h,f=d.borderBottom?d.borderBottom:h,g=d.borderTop?s:2*s,m=p!==f?1:o-a[l]+1;n.setEdge(c,p,{weight:g,minlen:m,nestingEdge:!0}),n.setEdge(f,u,{weight:g,minlen:m,nestingEdge:!0})}),n.parent(l)||n.setEdge(r,c,{weight:0,minlen:o+a[l]})})(e,s,h,c,l,o,n)),e.graph().nodeRankFactor=h},eS=function(e){var n=e.graph();e.removeNode(n.nestingRoot),delete n.nestingRoot,e.edges().forEach(n=>{e.edge(n).nestingEdge&&e.removeEdge(n)})},e_=function(e){switch(e.graph().ranker){case"network-simplex":default:z(e);break;case"tight-tree":var n;R(n=e),Q(n);break;case"longest-path":Y(e)}},ek=function(e){e.edges().forEach(n=>{let r=e.edge(n);if(r.width&&r.height){let r=e.node(n.v),i={rank:(e.node(n.w).rank-r.rank)/2+r.rank,e:n};k.addDummyNode(e,"edge-proxy",i,"_ep")}})},eC=function(e){let n=0;e.nodes().forEach(r=>{let i=e.node(r);i.borderTop&&(i.minRank=e.node(i.borderTop).rank,i.maxRank=e.node(i.borderBottom).rank,n=Math.max(n,i.maxRank))}),e.graph().maxRank=n},eE=function(e){e.nodes().forEach(n=>{let r=e.node(n);"edge-proxy"===r.dummy&&(e.edge(r.e).labelRank=r.rank,e.removeNode(n))})},eT=function(e){e.graph().dummyChains=[],e.edges().forEach(n=>(function(e,n){let r,i,s,o=n.v,a=e.node(o).rank,l=n.w,h=e.node(l).rank,c=n.name,u=e.edge(n),d=u.labelRank;if(h!==a+1){for(e.removeEdge(n),s=0,++a;a<h;++s,++a)u.points=[],i={width:0,height:0,edgeLabel:u,edgeObj:n,rank:a},r=k.addDummyNode(e,"edge",i,"_d"),a===d&&(i.width=u.width,i.height=u.height,i.dummy="edge-label",i.labelpos=u.labelpos),e.setEdge(o,r,{weight:u.weight},c),0===s&&e.graph().dummyChains.push(r),o=r;e.setEdge(o,l,{weight:u.weight},c)}})(e,n))},eP=function(e){e.graph().dummyChains.forEach(n=>{let r,i=e.node(n),s=i.edgeLabel;for(e.setEdge(i.edgeObj,s);i.dummy;)r=e.successors(n)[0],e.removeNode(n),s.points.push({x:i.x,y:i.y}),"edge-label"===i.dummy&&(s.x=i.x,s.y=i.y,s.width=i.width,s.height=i.height),n=r,i=e.node(n)})},eA=function(e){var n;let r,i,s=(r={},i=0,(n=e).children().forEach(function e(s){let o=i;n.children(s).forEach(e),r[s]={low:o,lim:i++}}),r);e.graph().dummyChains.forEach(n=>{let r=e.node(n),i=r.edgeObj,o=function(e,n,r,i){let s,o,a=[],l=[],h=Math.min(n[r].low,n[i].low),c=Math.max(n[r].lim,n[i].lim);s=r;do a.push(s=e.parent(s));while(s&&(n[s].low>h||c>n[s].lim));for(o=s,s=i;(s=e.parent(s))!==o;)l.push(s);return{path:a.concat(l.reverse()),lca:o}}(e,s,i.v,i.w),a=o.path,l=o.lca,h=0,c=a[0],u=!0;for(;n!==i.w;){if(r=e.node(n),u){for(;(c=a[h])!==l&&e.node(c).maxRank<r.rank;)h++;c===l&&(u=!1)}if(!u){for(;h<a.length-1&&e.node(c=a[h+1]).minRank<=r.rank;)h++;c=a[h]}e.setParent(n,c),n=e.successors(n)[0]}})},eM=function(e){e.children().forEach(function n(r){let i=e.children(r),s=e.node(r);if(i.length&&i.forEach(n),Object.hasOwn(s,"minRank")){s.borderLeft=[],s.borderRight=[];for(let n=s.minRank,i=s.maxRank+1;n<i;++n)G(e,"borderLeft","_bl",r,s,n),G(e,"borderRight","_br",r,s,n)}})},eN=function e(n,r){var i;let s,o,a,l,h;if(r&&"function"==typeof r.customOrder)return void r.customOrder(n,e);let c=k.maxRank(n),u=er(n,k.range(1,c+1),"inEdges"),p=er(n,k.range(c-1,-1,-1),"outEdges"),f=(s={},a=(o=(i=n).nodes().filter(e=>!i.children(e).length)).map(e=>i.node(e).rank),l=k.applyWithChunking(Math.max,a),h=k.range(l+1).map(()=>[]),o.sort((e,n)=>i.node(e).rank-i.node(n).rank).forEach(function e(n){s[n]||(s[n]=!0,h[i.node(n).rank].push(n),i.successors(n).forEach(e))}),h);if(ei(n,f),r&&r.disableOptimalOrderHeuristic)return;let g=1/0,m;for(let e=0,r=0;r<4;++e,++r){(function(e,n){let r=new d.Graph;e.forEach(function(e){let i=e.graph().root,s=function e(n,r,i,s){let o=n.children(r),a=n.node(r),l=a?a.borderLeft:void 0,h=a?a.borderRight:void 0,c={};l&&(o=o.filter(e=>e!==l&&e!==h));let u=function(e,n=[]){return n.map(n=>{let r=e.inEdges(n);if(!r.length)return{v:n};{let i=r.reduce((n,r)=>{let i=e.edge(r),s=e.node(r.v);return{sum:n.sum+i.weight*s.order,weight:n.weight+i.weight}},{sum:0,weight:0});return{v:n,barycenter:i.sum/i.weight,weight:i.weight}}})}(n,o);u.forEach(r=>{if(n.children(r.v).length){var o,a;let l=e(n,r.v,i,s);c[r.v]=l,Object.hasOwn(l,"barycenter")&&(o=r,a=l,void 0!==o.barycenter?(o.barycenter=(o.barycenter*o.weight+a.barycenter*a.weight)/(o.weight+a.weight),o.weight+=a.weight):(o.barycenter=a.barycenter,o.weight=a.weight))}});let d=function(e,n){let r={};return e.forEach((e,n)=>{let i=r[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:n};void 0!==e.barycenter&&(i.barycenter=e.barycenter,i.weight=e.weight)}),n.edges().forEach(e=>{let n=r[e.v],i=r[e.w];void 0!==n&&void 0!==i&&(i.indegree++,n.out.push(r[e.w]))}),function(e){let n=[];for(;e.length;){let r=e.pop();n.push(r),r.in.reverse().forEach(function(e){return n=>{!n.merged&&(void 0===n.barycenter||void 0===e.barycenter||n.barycenter>=e.barycenter)&&function(e,n){let r=0,i=0;e.weight&&(r+=e.barycenter*e.weight,i+=e.weight),n.weight&&(r+=n.barycenter*n.weight,i+=n.weight),e.vs=n.vs.concat(e.vs),e.barycenter=r/i,e.weight=i,e.i=Math.min(n.i,e.i),n.merged=!0}(e,n)}}(r)),r.out.forEach(function(n){return r=>{r.in.push(n),0==--r.indegree&&e.push(r)}}(r))}return n.filter(e=>!e.merged).map(e=>k.pick(e,["vs","i","barycenter","weight"]))}(Object.values(r).filter(e=>!e.indegree))}(u,i);!function(e,n){e.forEach(e=>{e.vs=e.vs.flatMap(e=>n[e]?n[e].vs:e)})}(d,c);let p=function(e,n){let r=k.partition(e,e=>Object.hasOwn(e,"barycenter")),i=r.lhs,s=r.rhs.sort((e,n)=>n.i-e.i),o=[],a=0,l=0,h=0;i.sort(function(e){return(n,r)=>n.barycenter<r.barycenter?-1:n.barycenter>r.barycenter?1:e?r.i-n.i:n.i-r.i}(!!n)),h=en(o,s,h),i.forEach(e=>{h+=e.vs.length,o.push(e.vs),a+=e.barycenter*e.weight,l+=e.weight,h=en(o,s,h)});let c={vs:o.flat(!0)};return l&&(c.barycenter=a/l,c.weight=l),c}(d,s);if(l&&(p.vs=[l,p.vs,h].flat(!0),n.predecessors(l).length)){let e=n.node(n.predecessors(l)[0]),r=n.node(n.predecessors(h)[0]);Object.hasOwn(p,"barycenter")||(p.barycenter=0,p.weight=0),p.barycenter=(p.barycenter*p.weight+e.order+r.order)/(p.weight+2),p.weight+=2}return p}(e,i,r,n);s.vs.forEach((n,r)=>e.node(n).order=r),function(e,n,r){let i={},s;r.forEach(r=>{let o=e.parent(r),a,l;for(;o;){if((a=e.parent(o))?(l=i[a],i[a]=o):(l=s,s=o),l&&l!==o)return void n.setEdge(l,o);o=a}})}(e,r,s.vs)})})(e%2?u:p,e%4>=2),f=k.buildLayerMatrix(n);let i=et(n,f);i<g&&(r=0,m=Object.assign({},f),g=i)}ei(n,m)},eD=function(e){k.buildLayerMatrix(e).forEach(n=>{var r=0;n.forEach((n,i)=>{var s=e.node(n);s.order=i+r,(s.selfEdges||[]).forEach(n=>{k.addDummyNode(e,"selfedge",{width:n.label.width,height:n.label.height,rank:s.rank,order:i+ ++r,e:n.e,label:n.label},"_se")}),delete s.selfEdges})})},eI=function(e){let n=e.graph().rankdir.toLowerCase();("lr"===n||"rl"===n)&&H(e)},e$=function(e){var n,r;let i=e.graph().rankdir.toLowerCase();("bt"===i||"rl"===i)&&((n=e).nodes().forEach(e=>J(n.node(e))),n.edges().forEach(e=>{let r=n.edge(e);r.points.forEach(J),Object.hasOwn(r,"y")&&J(r)})),("lr"===i||"rl"===i)&&((r=e).nodes().forEach(e=>ee(r.node(e))),r.edges().forEach(e=>{let n=r.edge(e);n.points.forEach(ee),Object.hasOwn(n,"x")&&ee(n)}),H(e))},eR=function(e){var n,r,i;let s,o,a,l,h,c,u,p,f,g,m,y;i=e=k.asNonCompoundGraph(e),g=k.buildLayerMatrix(i),m=i.graph().ranksep,y=0,g.forEach(e=>{let n=e.reduce((e,n)=>{let r=i.node(n).height;return e>r?e:r},0);e.forEach(e=>i.node(e).y=y+n/2),y+=n+m}),Object.entries((n=e,o=k.buildLayerMatrix(n),l=Object.assign((a={},o.length&&o.reduce(function(e,r){let i=0,s=0,o=e.length,l=r[r.length-1];return r.forEach((e,h)=>{let c=function(e,n){if(e.node(n).dummy)return e.predecessors(n).find(n=>e.node(n).dummy)}(n,e),u=c?n.node(c).order:o;(c||e===l)&&(r.slice(s,h+1).forEach(e=>{n.predecessors(e).forEach(r=>{let s=n.node(r),o=s.order;(o<i||u<o)&&!(s.dummy&&n.node(e).dummy)&&es(a,r,e)})}),s=h+1,i=u)}),r}),a),function(e,n){let r={};function i(n,i,s,o,a){let l;k.range(i,s).forEach(i=>{l=n[i],e.node(l).dummy&&e.predecessors(l).forEach(n=>{let i=e.node(n);i.dummy&&(i.order<o||i.order>a)&&es(r,n,l)})})}return n.length&&n.reduce(function(n,r){let s=-1,o,a=0;return r.forEach((l,h)=>{if("border"===e.node(l).dummy){let n=e.predecessors(l);n.length&&(o=e.node(n[0]).order,i(r,a,h,s,o),a=h,s=o)}i(r,a,r.length,o,n.length)}),r}),r}(n,o)),h={},["u","d"].forEach(e=>{s="u"===e?o:Object.values(o).reverse(),["l","r"].forEach(r=>{var i;let o,a,c;"r"===r&&(s=s.map(e=>Object.values(e).reverse()));let u=("u"===e?n.predecessors:n.successors).bind(n),p=(o={},a={},c={},(i=s).forEach(e=>{e.forEach((e,n)=>{o[e]=e,a[e]=e,c[e]=n})}),i.forEach(e=>{let n=-1;e.forEach(e=>{let r=u(e);if(r.length){let i=((r=r.sort((e,n)=>c[e]-c[n])).length-1)/2;for(let s=Math.floor(i),h=Math.ceil(i);s<=h;++s){let i=r[s];a[e]===e&&n<c[i]&&!function(e,n,r){if(n>r){let e=n;n=r,r=e}return!!e[n]&&Object.hasOwn(e[n],r)}(l,e,i)&&(a[i]=e,a[e]=o[e]=o[i],n=c[i])}}})}),{root:o,align:a}),f=function(e,n,r,i,s){var o,a,l,h,c,u,p;let f,g,m,y={},O=(o=e,a=n,l=r,h=s,f=new d.Graph,m=(c=(g=o.graph()).nodesep,u=g.edgesep,p=h,(e,n,r)=>{let i,s,o=e.node(n),a=e.node(r);if(i=0+o.width/2,Object.hasOwn(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":s=-o.width/2;break;case"r":s=o.width/2}if(s&&(i+=p?s:-s),s=0,i+=(o.dummy?u:c)/2,i+=(a.dummy?u:c)/2,i+=a.width/2,Object.hasOwn(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":s=a.width/2;break;case"r":s=-a.width/2}return s&&(i+=p?s:-s),s=0,i}),a.forEach(e=>{let n;e.forEach(e=>{let r=l[e];if(f.setNode(r),n){var i=l[n],s=f.edge(i,r);f.setEdge(i,r,Math.max(m(o,e,n),s||0))}n=e})}),f),b=s?"borderLeft":"borderRight";function x(e,n){let r=O.nodes(),i=r.pop(),s={};for(;i;)s[i]?e(i):(s[i]=!0,r.push(i),r=r.concat(n(i))),i=r.pop()}return x(function(e){y[e]=O.inEdges(e).reduce((e,n)=>Math.max(e,y[n.v]+O.edge(n)),0)},O.predecessors.bind(O)),x(function(n){let r=O.outEdges(n).reduce((e,n)=>Math.min(e,y[n.w]-O.edge(n)),1/0),i=e.node(n);r!==1/0&&i.borderType!==b&&(y[n]=Math.max(y[n],r))},O.successors.bind(O)),Object.keys(i).forEach(e=>y[e]=y[r[e]]),y}(n,s,p.root,p.align,"r"===r);"r"===r&&(f=k.mapValues(f,e=>-e)),h[e+r]=f})}),c=Object.values(h).reduce((e,r)=>{let i=-1/0,s=1/0;Object.entries(r).forEach(([e,r])=>{var o,a;let l=(o=n,a=e,o.node(a).width/2);i=Math.max(r+l,i),s=Math.min(r-l,s)});let o=i-s;return o<e[0]&&(e=[o,r]),e},[1/0,null])[1],u=Object.values(c),p=k.applyWithChunking(Math.min,u),f=k.applyWithChunking(Math.max,u),["u","d"].forEach(e=>{["l","r"].forEach(n=>{let r=e+n,i=h[r];if(i===c)return;let s=Object.values(i),o=p-k.applyWithChunking(Math.min,s);"l"!==n&&(o=f-k.applyWithChunking(Math.max,s)),o&&(h[r]=k.mapValues(i,e=>e+o))})}),r=n.graph().align,k.mapValues(h.ul,(e,n)=>{if(r)return h[r.toLowerCase()][n];{let e=Object.values(h).map(e=>e[n]).sort((e,n)=>e-n);return(e[1]+e[2])/2}}))).forEach(([n,r])=>e.node(n).x=r)},eL=function(e){e.nodes().forEach(n=>{var r=e.node(n);if("selfedge"===r.dummy){var i=e.node(r.e.v),s=i.x+i.width/2,o=i.y,a=r.x-s,l=i.height/2;e.setEdge(r.e,r.label),e.removeNode(n),r.label.points=[{x:s+2*a/3,y:o-l},{x:s+5*a/6,y:o-l},{x:s+a,y:o},{x:s+5*a/6,y:o+l},{x:s+2*a/3,y:o+l}],r.label.x=r.x,r.label.y=r.y}})},eQ=function(e){e.nodes().forEach(n=>{if(e.children(n).length){let r=e.node(n),i=e.node(r.borderTop),s=e.node(r.borderBottom),o=e.node(r.borderLeft[r.borderLeft.length-1]),a=e.node(r.borderRight[r.borderRight.length-1]);r.width=Math.abs(a.x-o.x),r.height=Math.abs(s.y-i.y),r.x=o.x+r.width/2,r.y=i.y+r.height/2}}),e.nodes().forEach(n=>{"border"===e.node(n).dummy&&e.removeNode(n)})},ej=function(e){e.edges().forEach(n=>{let r=e.edge(n);if(Object.hasOwn(r,"x"))switch(("l"===r.labelpos||"r"===r.labelpos)&&(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset}})},eV=function(e){let n=1/0,r=0,i=1/0,s=0,o=e.graph(),a=o.marginx||0,l=o.marginy||0;function h(e){let o=e.x,a=e.y,l=e.width,h=e.height;n=Math.min(n,o-l/2),r=Math.max(r,o+l/2),i=Math.min(i,a-h/2),s=Math.max(s,a+h/2)}e.nodes().forEach(n=>h(e.node(n))),e.edges().forEach(n=>{let r=e.edge(n);Object.hasOwn(r,"x")&&h(r)}),n-=a,i-=l,e.nodes().forEach(r=>{let s=e.node(r);s.x-=n,s.y-=i}),e.edges().forEach(r=>{let s=e.edge(r);s.points.forEach(e=>{e.x-=n,e.y-=i}),Object.hasOwn(s,"x")&&(s.x-=n),Object.hasOwn(s,"y")&&(s.y-=i)}),o.width=r-n+a,o.height=s-i+l},ez=function(e){e.edges().forEach(n=>{let r,i,s=e.edge(n),o=e.node(n.v),a=e.node(n.w);s.points?(r=s.points[0],i=s.points[s.points.length-1]):(s.points=[],r=a,i=o),s.points.unshift(k.intersectRect(o,r)),s.points.push(k.intersectRect(a,i))})},eB=function(e){e.edges().forEach(n=>{let r=e.edge(n);r.reversed&&r.points.reverse()})},eF={rankdir:"LR",align:void 0,nodesep:100,edgesep:10,ranksep:100,marginx:0,marginy:0,acyclicer:void 0,ranker:"network-simplex"},eZ={getFollowNode:void 0,enableAnimation:!1},eq=class{constructor(e){this.config=e,this.init=!1}get initialized(){return this.init}getNode(e){if(e)return this.store.nodes.get(e)}getNodeByIndex(e){let n=this.indexMap.get(e);return n?this.getNode(n):void 0}getEdge(e){return this.store.edges.get(e)}get nodes(){return Array.from(this.store.nodes.values())}get edges(){return Array.from(this.store.edges.values())}create(e,n){this.store=this.createStore(e),this.indexMap=this.createIndexMap(),this.setOptions(n),this.init=!0}createStore(e){let{nodes:n,edges:r,container:i}=e;this.container=i;let s=this.createLayoutNodes(n),o=this.createEdgesStore(r),a=this.createVirtualEdges(e),l={nodes:new Map,edges:new Map};return s.forEach(e=>l.nodes.set(e.id,e)),o.concat(a).forEach(e=>l.edges.set(e.id,e)),l}createLayoutNodes(e){return e.map((e,n)=>{let{bounds:r}=e.getData(f.LY);return{id:e.id,entity:e,index:"",rank:-1,order:-1,position:{x:r.center.x,y:r.center.y},offset:{x:0,y:0},size:{width:r.width,height:r.height},hasChildren:e.collapsedChildren?.length>0}})}createEdgesStore(e){return e.map(e=>{let{from:n,to:r}=e.info;if(n&&r&&!e.vertical)return{id:e.id,entity:e,from:n,to:r,fromIndex:"",toIndex:"",name:e.id}}).filter(Boolean)}createVirtualEdges(e){let{nodes:n,edges:r}=e;return n.filter(e=>e.flowNodeType===f.y.GROUP).map(e=>{let{id:n,blocks:i=[]}=e,s=new Set(i.map(e=>e.id));return[...r.filter(e=>s.has(e.to?.id??"")).map(e=>{let{from:r,to:i}=e.info;if(!r||!i||e.vertical)return;let s=`virtual_${n}_${i}`;return{id:s,entity:e,from:r,to:n,fromIndex:"",toIndex:"",name:s}}).filter(Boolean),...r.filter(e=>s.has(e.from.id??"")).map(e=>{let{from:r,to:i}=e.info;if(!r||!i||e.vertical)return;let s=`virtual_${n}_${r}`;return{id:s,entity:e,from:n,to:i,fromIndex:"",toIndex:"",name:s}}).filter(Boolean)]}).flat()}createIndexMap(){let e=this.sortNodes(),n=new Map;e.forEach((e,r)=>{let i=this.getNode(e);if(!i)return;let s=String(1e5+r);n.set(i.id,s),i.index=s}),this.edges.forEach(e=>{let r=n.get(e.from),i=n.get(e.to);if(!r||!i)return void this.store.edges.delete(e.id);e.fromIndex=r,e.toIndex=i});let r=new Map;return n.forEach((e,n)=>{r.set(e,n)}),r}sortNodes(){let e=[];this.nodes.forEach(n=>{e.push(n.id)}),this.edges.forEach(n=>{e.push(n.to)});let n=new Set,r=i=>{if(n.has(i.id))return;n.add(i.id),e.push(i.id),i.blocks.forEach(e=>{r(e)});let{outputLines:s}=i.getData(a.tB);s.sort((e,n)=>{let r=this.getNode(e.to?.id),i=this.getNode(n.to?.id),s=e.fromPort,o=n.fromPort;return s===o&&r&&i?r.position.y-i.position.y:s&&o?s.point.y-o.point.y:0}).forEach(e=>{let{to:n}=e;n&&r(n)})};return r(this.container),e.reduceRight((e,n)=>(e.includes(n)||e.unshift(n),e),[])}setOptions(e){this.options=e,this.setFollowNode(e.getFollowNode)}setFollowNode(e){if(!e)return;let n={store:this};this.nodes.forEach(r=>{let i=e(r,n)?.followTo;if(!i)return;let s=this.getNode(i);s&&(s.followedBy||(s.followedBy=[]),s.followedBy.push(r.id),r.followTo=i)})}},eW=class{constructor(e){this.store=e}async position(){return this.store.options.enableAnimation?this.positionWithAnimation():this.positionDirectly()}positionDirectly(){this.store.nodes.forEach(e=>{this.updateNodePosition({layoutNode:e,step:100})})}async positionWithAnimation(){return new Promise(e=>{(0,p.Yc)({from:{d:0},to:{d:100},duration:300,onUpdate:e=>{this.store.nodes.forEach(n=>{this.updateNodePosition({layoutNode:n,step:e.d})})},onComplete:()=>{e()}})})}updateNodePosition(e){let{layoutNode:n,step:r}=e,i=n.entity.getData(p.hZ),s={x:n.position.x+n.offset.x,y:n.position.y+n.offset.y},o=(s.x-i.position.x)*r/100,a=(s.y-i.bounds.height/2-i.position.y)*r/100;i.update({position:{x:i.position.x+o,y:i.position.y+a}}),n.entity.document.layout.updateAffectedTransform(n.entity)}},eX=class{constructor(e){this.store=e,this.graph=this.createGraph()}layout(){this.graphSetData(),this.dagreLayout(),this.layoutSetPosition()}dagreLayout(){let e=em(this.graph);this.runLayout(e),ey(this.graph,e)}runLayout(e){eO(e),ev(e),eb(e),ew(e),e_(k.asNonCompoundGraph(e)),ek(e),P(e),eS(e),T(e),eC(e),eE(e),eT(e),eA(e),eM(e),eN(e),this.setOrderAndRank(e),eD(e),eI(e),eR(e),eL(e),eQ(e),eP(e),ej(e),e$(e),eV(e),ez(e),eB(e),ex(e)}createGraph(){let e=new d.Graph({multigraph:!0});return e.setDefaultEdgeLabel(()=>({})),e.setGraph(this.store.config),e}graphSetData(){let e=Array.from(this.store.nodes.values()),n=Array.from(this.store.edges.values()).sort((e,n)=>e.fromIndex===n.fromIndex?e.toIndex<n.toIndex?-1:1:e.fromIndex<n.fromIndex?-1:1);e.forEach(e=>{this.graph.setNode(e.index,{originID:e.id,width:e.size.width,height:e.size.height})}),n.forEach(e=>{this.graph.setEdge({v:e.fromIndex,w:e.toIndex,name:e.name})})}layoutSetPosition(){this.store.nodes.forEach(e=>{let n=this.getOffsetX(e),r=this.graph.node(e.index);if(!r){e.rank=-1,e.position={x:e.position.x+n,y:e.position.y};return}e.rank=r.rank??-1,e.position={x:this.normalizeNumber(r.x)+n,y:this.normalizeNumber(r.y)}})}normalizeNumber(e){return Number.isNaN(e)?0:e}getOffsetX(e){if(!e.hasChildren)return 0;let{bounds:n,padding:r}=e.entity.getData(f.LY);return-n.width/2+r.left}setOrderAndRank(e){return this.followAdjust(e),this.normalizeOrder(e),e}followAdjust(e){let n=this.rankGroup(e);e.nodes().forEach(r=>{let i=e.node(r),s=this.store.getNodeByIndex(r);if(!i||!s?.followedBy)return;let{followedBy:o}=s,{rank:a,order:l}=i,h=o.map(e=>this.store.getNode(e)?.index).filter(Boolean),c=new Set(h),u=n.get(a);u&&(Array.from(u).filter(n=>!c.has(n)&&e.node(n).order>l).forEach(n=>{let r=e.node(n);r.order=r.order+o.length}),h.forEach((r,i)=>{let s=e.node(r);s.order=l+i+1;let o=s.rank;s.rank=a,n.get(o)?.delete(r),n.get(a)?.add(r)}))})}normalizeOrder(e){this.rankGroup(e).forEach((n,r)=>{let i=Array.from(n).map(n=>e.node(n));i.sort((e,n)=>e.order-n.order),i.forEach((e,n)=>{e.order=n})})}rankGroup(e){let n=new Map;return e.nodes().forEach(r=>{let i=e.node(r).rank;n.has(i)||n.set(i,new Set),n.get(i)?.add(r)}),n}},eU=class{constructor(e){this._store=new eq(e),this._layout=new eX(this._store),this._position=new eW(this._store)}init(e,n){this._store.create(e,n)}layout(){this._store.initialized&&this._layout.layout()}async position(){if(this._store.initialized)return await this._position.position()}},eY=class{constructor(){this.layoutConfig=eF}init(e){this.layoutConfig={...this.layoutConfig,...e.layoutConfig}}async layout(e={}){await this.layoutNode(this.document.root,{...eZ,...e})}async layoutNode(e,n){let r=e.blocks;if(!r||!Array.isArray(r)||!r.length)return;let i=this.getNodesAllLines(r);await Promise.all(r.map(async e=>this.layoutNode(e,n)));let s=new eU(this.layoutConfig);s.init({nodes:r,edges:i,container:e},n),s.layout(),await s.position()}getNodesAllLines(e){return e.map(e=>{let n=e.getData(a.tB);return[...n.outputLines.filter(Boolean),...n.inputLines.filter(Boolean)]}).flat()}};y([(0,c.WQ)(a.Vo)],eY.prototype,"document",2),eY=y([(0,c._G)()],eY);var eG=(0,p.XY)({onBind:({bind:e})=>{e(eY).toSelf().inSingletonScope()},onInit:(e,n)=>{e.get(eY).init(n)},singleton:!0}),eH=r(21727),eK=(0,p.XY)({onInit(e,n){!1!==n.enable&&(e.playground.registerLayer(eH.ub,n),e.playground.registerLayer(eH.ev,{canSelect:n.canSelect}))}}),eJ=r(63427),e0=r(7935),e1=r(67055),e2=Object.defineProperty,e5=Object.getOwnPropertyDescriptor,e4=(e,n,r,i)=>{for(var s,o=i>1?void 0:i?e5(n,r):n,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i?s(n,r,o):s(o))||o);return i&&o&&e2(n,r,o),o};(i||(i={})).DEFAULT={canHovered:()=>!0};var e3=class extends p.Wd{constructor(){super(...arguments),this.nodeTransformsWithSort=[]}autorun(){let{activatedNode:e}=this.selectionService;this.nodeTransformsWithSort=this.nodeTransforms.filter(e=>"root"!==e.entity.id&&e.entity.flowNodeType!==f.y.GROUP).reverse().sort(n=>n.entity===e?-1:0)}get isDrawing(){return this.linesManager.isDrawing}onReady(){this.options={...i.DEFAULT,...this.options},this.toDispose.pushAll([this.hoverService.onUpdateHoverPosition(e=>{let{position:n,target:r}=e,i=this.config.getPosFromMouseEvent({clientX:n.x,clientY:n.y});this.updateHoveredState(i,r)}),this.listenPlaygroundEvent("mousemove",e=>{if(this.hoverService.hoveredPos=this.config.getPosFromMouseEvent(e),!this.isEnabled()||!this.options.canHovered(e,this.hoverService))return;let n=this.config.getPosFromMouseEvent(e);this.updateHoveredState(n,e?.target)}),this.selectionService.onSelectionChanged(()=>this.autorun()),this.listenPlaygroundEvent("touchstart",e=>{if(this.isEnabled()&&!this.isDrawing)return this.handleDragLine(e)}),this.listenPlaygroundEvent("mousedown",e=>{if(!this.isEnabled()||this.isDrawing)return;let{hoveredNode:n}=this.hoverService;if(this.handleDragLine(e))return!0;let r=this.config.getPosFromMouseEvent(e),i=function(e,n=!0){let r=e.filter(e=>e instanceof a.Ff);return r.length>+!!n?e1.M_.enlarge(r.map(e=>e.getData(f.LY).bounds)).pad(2):e1.M_.EMPTY}(this.selectionService.selection,!0);if(i.width>0&&i.contains(r.x,r.y))return this.dragService.startDragSelectedNodes(e)?.then(r=>{r||(n&&n instanceof a.Ff?e.shiftKey?this.selectionService.toggleSelect(n):this.selectionService.selectNode(n):this.selectionService.clear())}),!0;n||this.selectionService.clear()})])}updateHoveredState(e,n){let{hoverService:r}=this,i=this.nodeTransformsWithSort,s=this.linesManager.getPortFromMousePos(e),o=[...this.playgroundNode.querySelectorAll(".gedit-flow-activity-line")].some(e=>e.contains(n));if(s){if("output"===s.portType)r.updateHoveredKey(s.id);else if(o||n?.className?.includes?.("workflow-port-bg")){let n=this.linesManager.getCloseInLineFromMousePos(e);n&&this.updateHoveredKey(n.id)}return}if(this.isDrawing)return;let a=i.find(n=>n.bounds.contains(e.x,e.y))?.entity,l=[...this.playgroundNode.querySelectorAll(".gedit-flow-activity-node")].some(e=>e.contains(n));(a||l)&&a?.id&&this.updateHoveredKey(a.id);let h=o?this.linesManager.getCloseInLineFromMousePos(e):void 0;return a&&h?a.renderData.stackIndex>h.stackIndex?this.updateHoveredKey(a.id):this.updateHoveredKey(h.id):a?this.updateHoveredKey(a.id):h?this.updateHoveredKey(h.id):void(r.clearHovered(),this.editorStateConfig.getCurrentState()===p.$t.STATE_MOUSE_FRIENDLY_SELECT&&!this.editorStateConfig.isPressingShift&&this.configEntity.updateCursor("grab"))}updateHoveredKey(e){this.configEntity.updateCursor("default"),this.hoverService.updateHoveredKey(e)}isEnabled(){let e=this.editorStateConfig.getCurrentState();return(e===p.$t.STATE_SELECT||e===p.$t.STATE_MOUSE_FRIENDLY_SELECT)&&!this.selectorBoxConfigEntity.isStart&&!this.dragService.isDragging}handleDragLine(e){let{hoveredNode:n}=this.hoverService;return n&&n instanceof a.fv?(this.dragService.resetLine(n,e),!0):n&&n instanceof a.IR&&"input"!==n.portType&&!n.disabled&&1!==e.button?(e.stopPropagation(),e.preventDefault(),this.dragService.startDrawingLine(n,e),!0):void 0}};e3.type="HoverLayer",e4([(0,c.WQ)(a.Vo)],e3.prototype,"document",2),e4([(0,c.WQ)(a.rm)],e3.prototype,"selectionService",2),e4([(0,c.WQ)(a.Z4)],e3.prototype,"dragService",2),e4([(0,c.WQ)(a.Be)],e3.prototype,"hoverService",2),e4([(0,c.WQ)(a.GH)],e3.prototype,"linesManager",2),e4([(0,p.Lb)(p.An)],e3.prototype,"editorStateConfig",2),e4([(0,p.Lb)(eH.QX)],e3.prototype,"selectorBoxConfigEntity",2),e4([(0,c.WQ)(p.d0)],e3.prototype,"configEntity",2),e4([(0,p.fz)(a.Ff,f.LY)],e3.prototype,"nodeTransforms",2),e4([(0,p.Ub)(a.fv)],e3.prototype,"lines",2),e3=e4([(0,c._G)()],e3);var e6=(0,p.XY)({onInit(e){e.playground.registerLayer(e3)}}),e9=r(20053),e7=Object.defineProperty,e8=Object.getOwnPropertyDescriptor,te=Object.getOwnPropertyNames,tt=Object.prototype.hasOwnProperty,tn=(e,n)=>{for(var r in n)e7(e,r,{get:n[r],enumerable:!0})},tr=(e,n,r,i)=>{if(n&&"object"==typeof n||"function"==typeof n)for(let s of te(n))tt.call(e,s)||s===r||e7(e,s,{get:()=>n[s],enumerable:!(i=e8(n,s))||i.enumerable});return e},ti=(e,n,r)=>(tr(e,n,"default"),r&&tr(r,n,"default")),ts=(e,n,r,i)=>{for(var s,o=i>1?void 0:i?e8(n,r):n,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i?s(n,r,o):s(o))||o);return i&&o&&e7(n,r,o),o},to={};tn(to,{FreeLayoutEditor:()=>tp,FreeLayoutEditorProvider:()=>tu,FreeLayoutPluginContext:()=>th,FreeLayoutProps:()=>s,WorkflowAutoLayoutTool:()=>tl,WorkflowNodeRenderer:()=>td,WorkflowPortRender:()=>e0.hD,createFreeLayoutPreset:()=>tc,useAutoLayout:()=>tf,useClientContext:()=>tg,usePlaygroundTools:()=>tm});var ta={};tn(ta,{FreeLayoutEditor:()=>tp,FreeLayoutEditorProvider:()=>tu,WorkflowNodeRenderer:()=>td,WorkflowPortRender:()=>e0.hD});var tl=class{async handle(e={}){let{disableFitView:n=!1,...r}=e;if(this.playground.config.readonly)return()=>{};this.fitView(n);let i=await this.autoLayout(r);return this.fitView(n),i}async autoLayout(e){let n=this.document.getAllNodes(),r=n.map(this.getNodePosition);await this.autoLayoutService.layout(e);let i=n.map(this.getNodePosition);return this.updateHistory({nodes:n,startPositions:r,endPositions:i}),this.createResetFn({nodes:n,startPositions:r})}fitView(e=!1){e||(0,a.Pr)(this.document,this.playground.config)}getNodePosition(e){let n=e.getData(o.hZp);return{x:n.position.x,y:n.position.y}}createResetFn(e){let{nodes:n,startPositions:r}=e;return()=>{n.forEach((e,n)=>{let i=e.getData(o.hZp),s=r[n];i.update({position:s})})}}updateHistory(e){let{nodes:n,startPositions:r,endPositions:i}=e,s=n.map(e=>e.id);this.historyService?.pushOperation({type:h.ot.dragNodes,value:{ids:s,value:i,oldValue:r}},{noApply:!0})}};ts([(0,c.WQ)(a.Vo)],tl.prototype,"document",2),ts([(0,c.WQ)(o.QF1)],tl.prototype,"playground",2),ts([(0,c.WQ)(eY)],tl.prototype,"autoLayoutService",2),ts([(0,c.WQ)(u.kI),(0,c.lq)()],tl.prototype,"historyService",2),tl=ts([(0,c._G)()],tl);var th=o.bfd;(s||(s={})).DEFAULT={...o.eHM.DEFAULT};function tc(e){return n=>{e={...s.DEFAULT,...e,playground:{...e.playground,get hoverService(){return n.get(a.Be)}}};let r=[];return r.push((0,o.BPw)({registerShortcuts(r){let i=n.get(o.A7z);if(r.addHandlers({commandId:a.A0.DELETE_NODES,shortcuts:["backspace","delete"],isEnabled:()=>i.selection.length>0&&!n.playground.config.readonlyOrDisabled,execute:()=>{i.selection.forEach(e=>{if(e instanceof a.Ff){if(!n.document.canRemove(e))return;let r=e.getNodeMeta(),i=r.subCanvas?.(e);if(i?.isCanvas)return void i.parentNode.dispose();e.dispose()}else if(e instanceof a.fv){if(!n.document.linesManager.canRemove(e))return;e.dispose()}}),i.selection=i.selection.filter(e=>!e.disposed)}}),e?.history?.enable){let i=n.get(h.kI);e.history.disableShortcuts||(r.addHandlers({commandId:o.uBz.Default.UNDO,shortcuts:["meta z","ctrl z"],isEnabled:()=>!0,execute:()=>{i.undo()}}),r.addHandlers({commandId:o.uBz.Default.REDO,shortcuts:["meta shift z","ctrl shift z"],isEnabled:()=>!0,execute:()=>{i.redo()}}))}}})),r=(0,o.zX6)(e,r)(n),e.variableEngine?.enable&&r.push((0,o.uJe)({...e.variableEngine,layout:"free"})),e.history?.enable&&r.push((0,h.CV)(e.history)),r.push((0,o.FX4)({onBind:r=>{r.bind(tl).toSelf().inSingletonScope(),r.rebind(a.Df).toConstantValue({canAddLine:e.canAddLine?.bind(null,n),canDeleteLine:e.canDeleteLine?.bind(null,n),isErrorLine:e.isErrorLine?.bind(null,n),isErrorPort:e.isErrorPort?.bind(null,n),isDisabledPort:e.isDisabledPort?.bind(null,n),isReverseLine:e.isReverseLine?.bind(null,n),isHideArrowLine:e.isHideArrowLine?.bind(null,n),isFlowingLine:e.isFlowingLine?.bind(null,n),isDisabledLine:e.isDisabledLine?.bind(null,n),onDragLineEnd:e.onDragLineEnd?.bind(null,n),setLineRenderType:e.setLineRenderType?.bind(null,n),setLineClassName:e.setLineClassName?.bind(null,n),canDeleteNode:e.canDeleteNode?.bind(null,n),canResetLine:e.canResetLine?.bind(null,n),canDropToNode:e.canDropToNode?.bind(null,n),cursors:e.cursors??a.Wn.cursors,lineColor:e.lineColor??a.Wn.lineColor,allNodesDefaultExpanded:e.allNodesDefaultExpanded,toNodeJSON:n=>(function(e,n){let r,i=n.getData(o.LO),s=n.transform.position;if(r=i?a.Wn.toNodeJSON(n):{id:n.id,type:n.flowNodeType,meta:{position:{x:s.x,y:s.y}},data:n.getExtInfo()},n.flowNodeType===o.yaD.GROUP){let e=n.parent?.id??o.yaD.ROOT,i=n.blocks.map(e=>e.id)??[];r.data={...r.data,parentID:e,blockIDs:i}}return e.toNodeJSON?e.toNodeJSON(n,r):r})(e,n),fromNodeJSON:(n,r,i)=>(function(e,n,r,i){if(r=e.fromNodeJSON?e.fromNodeJSON(n,r,i):r,!n.getData(o.LO)){r.data&&n.updateExtInfo(r.data),i&&n.onExtInfoChange(()=>{n.document.fireContentChange({type:a.BI.NODE_DATA_CHANGE,toJSON:()=>n.getExtInfo(),entity:n})});return}return a.Wn.fromNodeJSON(n,r,i)})(e,n,r,i)})},onInit:n=>{n.playground.registerLayer(o.qgf),n.playground.registerLayer(o.LK9,{renderElement:()=>(e=>{let n=e.get(eJ.StackingContextManager);if(n.node)return n.node})(n)}),e.scroll?.enableScrollLimit&&n.playground.registerLayer(o.mEU),e.scroll?.disableScrollBar||n.playground.registerLayer(o.etV),e.scroll?.disableScroll&&(n.playground.config.scrollDisable=!0),e.onContentChange&&n.document.onContentChange(r=>e.onContentChange(n,r))},containerModules:[a.c7]}),(0,eJ.createFreeStackPlugin)({}),(0,e0.ho)({}),e6({}),eG({}),eK({canSelect:e=>{if(0!==e.button)return!1;let r=e.target;if(r){if(r.classList.contains("gedit-flow-background-layer")||r.closest('[data-flow-editor-selectable="true"]'))return!0;if(r.closest('[data-flow-editor-selectable="false"]'))return!1}return!n.get(a.Be).isSomeHovered()},ignoreOneSelect:!0,ignoreChildrenLength:!0,...e.selectBox||{}})),(0,o.MLh)(e,r)(n)}}var tu=(0,l.forwardRef)(function(e,n){let{children:r,...i}=e,s=(0,l.useMemo)(()=>tc(i),[]),c=(0,l.useCallback)(e=>({...(0,o._1v)(e),get document(){return e.get(a.Vo)},get clipboard(){return e.get(o.WWE)},get selection(){return e.get(o.A7z)},get history(){return e.get(h.kI)},get tools(){let n=e.get(tl);return{autoLayout:n.handle.bind(n),fitView:n=>(0,a.Pr)(e.get(a.Vo),e.get(o.QF1).config,n)}}}),[]);return l.createElement(o.cwh,{ref:n,plugins:s,customPluginContext:c},r)}),td=e=>{let{selected:n,activated:r,startDrag:i,ports:s,selectNode:o,nodeRef:h,onFocus:c,onBlur:u}=(0,a.MV)(),d=(0,e9.A)(e.className||"",{activated:r,selected:n});return l.createElement(l.Fragment,null,l.createElement("div",{className:d,style:e.style,ref:h,draggable:!0,onDragStart:i,onClick:o,onFocus:c,onBlur:u,"data-node-selected":String(n)},e.children),s.map(n=>l.createElement(e0.hD,{key:n.id,entity:n,onClick:e.onPortClick?r=>e.onPortClick(n,r):void 0,className:e.portClassName,style:e.portStyle,primaryColor:e.portPrimaryColor,secondaryColor:e.portSecondaryColor,errorColor:e.portErrorColor,backgroundColor:e.portBackgroundColor})))},tp=(0,l.forwardRef)(function(e,n){let{children:r,...i}=e;return l.createElement(tu,{ref:n,...i},l.createElement(o.$un,null,r))});ti(ta,eJ),ti(to,ta);var tf=()=>{let e=(0,a.h1)(tl);return e.handle.bind(e)};function tg(){return(0,o.h1n)(o.bfd)}function tm(e){let{maxZoom:n,minZoom:r}=e||{},i=(0,a.rJ)(),s=(0,a.h1)(a.Vo),[h,c]=(0,l.useState)(1),[u,d]=(0,l.useState)(s.linesManager.lineType),[p,f]=(0,l.useState)(a.Lu.SELECT),[g,m]=(0,l.useState)(a.Py.PAD),y=(0,l.useCallback)(e=>{i?.config.zoomout(e)},[h,i]),O=(0,l.useCallback)(e=>{i?.config.zoomin(e)},[h,i]),b=(0,l.useCallback)(e=>{let n=s.linesManager.switchLineType(e);return d(n),n},[s]),x=(0,l.useCallback)(e=>{(0,a.Pr)(s,i.config,e)},[s,i]),w=tf();return(0,l.useEffect)(()=>{let e=null;return i&&(e=i.onZoom(e=>c(e))),()=>{e&&e.dispose()}},[i]),(0,l.useEffect)(()=>{let e=i.editorState.onStateChange(e=>{f(e.state===o.$t2.STATE_GRAB||e.state===o.$t2.STATE_MOUSE_FRIENDLY_SELECT?a.Lu.GRAB:a.Lu.SELECT),m(e.state===o.$t2.STATE_MOUSE_FRIENDLY_SELECT?a.Py.MOUSE:a.Py.PAD)});return()=>{e.dispose()}},[i]),(0,l.useEffect)(()=>{let e=i.config.config;i.config.updateConfig({maxZoom:void 0!==n?n:e.maxZoom,minZoom:void 0!==r?r:e.minZoom})},[i,n,r]),{zoomin:O,zoomout:y,fitView:x,autoLayout:w,switchLineType:b,zoom:h,lineType:u,cursorState:p,setCursorState:function(e){let n;void 0!==(n="function"==typeof e?e({isPressingSpaceBar:i.editorState.isPressingSpaceBar,cursorState:p}):e)&&(n===a.Lu.GRAB?(i.editorState.changeState(o.$t2.STATE_GRAB.id),f(n)):(n=a.Lu.SELECT)&&(i.editorState.changeState(o.$t2.STATE_SELECT.id),f(n)))},interactiveType:g,setInteractiveType:function(e){e===a.Py.MOUSE?(i.editorState.changeState(o.$t2.STATE_MOUSE_FRIENDLY_SELECT.id),f(a.Lu.GRAB)):e===a.Py.PAD&&(i.editorState.changeState(o.$t2.STATE_SELECT.id),f(a.Lu.SELECT)),m(e)},setMouseScrollDelta:function(e){i.config.updateConfig({mouseScrollDelta:e})}}}},7935:function(e,n,r){"use strict";r.d(n,{hD:()=>W,ho:()=>es});var i,s=r(40961),o=r(96540),a=r(20053),l=r(91280),h=r(81376),c=r(34033),u=r(11812),d=r(67055),p=r(21727),f=r(63427);let{abs:g,cos:m,sin:y,acos:O,atan2:b,sqrt:x,pow:w}=Math;function S(e){return e<0?-w(-e,1/3):w(e,1/3)}let _=Math.PI,k=2*_,C=_/2,E=Number.MAX_SAFE_INTEGER||0x1fffffffffffff,T=Number.MIN_SAFE_INTEGER||-0x1fffffffffffff,P={x:0,y:0,z:0},A={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(e,n){let r=n(e),i=r.x*r.x+r.y*r.y;return void 0!==r.z&&(i+=r.z*r.z),x(i)},compute:function(e,n,r){if(0===e)return n[0].t=0,n[0];let i=n.length-1;if(1===e)return n[i].t=1,n[i];let s=1-e,o=n;if(0===i)return n[0].t=e,n[0];if(1===i){let n={x:s*o[0].x+e*o[1].x,y:s*o[0].y+e*o[1].y,t:e};return r&&(n.z=s*o[0].z+e*o[1].z),n}if(i<4){let n=s*s,a=e*e,l,h,c,u=0;2===i?(o=[o[0],o[1],o[2],P],l=n,h=s*e*2,c=a):3===i&&(l=n*s,h=n*e*3,c=s*a*3,u=e*a);let d={x:l*o[0].x+h*o[1].x+c*o[2].x+u*o[3].x,y:l*o[0].y+h*o[1].y+c*o[2].y+u*o[3].y,t:e};return r&&(d.z=l*o[0].z+h*o[1].z+c*o[2].z+u*o[3].z),d}let a=JSON.parse(JSON.stringify(n));for(;a.length>1;){for(let n=0;n<a.length-1;n++)a[n]={x:a[n].x+(a[n+1].x-a[n].x)*e,y:a[n].y+(a[n+1].y-a[n].y)*e},void 0!==a[n].z&&(a[n].z=a[n].z+(a[n+1].z-a[n].z)*e);a.splice(a.length-1,1)}return a[0].t=e,a[0]},computeWithRatios:function(e,n,r,i){let s=1-e,o=r[0],a=r[1],l=r[2],h=r[3],c;return(o*=s,a*=e,2===n.length)?(c=o+a,{x:(o*n[0].x+a*n[1].x)/c,y:(o*n[0].y+a*n[1].y)/c,z:!!i&&(o*n[0].z+a*n[1].z)/c,t:e}):(o*=s,a*=2*s,l*=e*e,3===n.length)?(c=o+a+l,{x:(o*n[0].x+a*n[1].x+l*n[2].x)/c,y:(o*n[0].y+a*n[1].y+l*n[2].y)/c,z:!!i&&(o*n[0].z+a*n[1].z+l*n[2].z)/c,t:e}):(o*=s,a*=1.5*s,l*=3*s,h*=e*e*e,4===n.length)?(c=o+a+l+h,{x:(o*n[0].x+a*n[1].x+l*n[2].x+h*n[3].x)/c,y:(o*n[0].y+a*n[1].y+l*n[2].y+h*n[3].y)/c,z:!!i&&(o*n[0].z+a*n[1].z+l*n[2].z+h*n[3].z)/c,t:e}):void 0},derive:function(e,n){let r=[];for(let i=e,s=i.length,o=s-1;s>1;s--,o--){let e=[];for(let r=0,s;r<o;r++)s={x:o*(i[r+1].x-i[r].x),y:o*(i[r+1].y-i[r].y)},n&&(s.z=o*(i[r+1].z-i[r].z)),e.push(s);r.push(e),i=e}return r},between:function(e,n,r){return n<=e&&e<=r||A.approximately(e,n)||A.approximately(e,r)},approximately:function(e,n,r){return g(e-n)<=(r||1e-6)},length:function(e){let n=A.Tvalues.length,r=0;for(let i=0,s;i<n;i++)s=.5*A.Tvalues[i]+.5,r+=A.Cvalues[i]*A.arcfn(s,e);return .5*r},map:function(e,n,r,i,s){return i+(e-n)/(r-n)*(s-i)},lerp:function(e,n,r){let i={x:n.x+e*(r.x-n.x),y:n.y+e*(r.y-n.y)};return void 0!==n.z&&void 0!==r.z&&(i.z=n.z+e*(r.z-n.z)),i},pointToString:function(e){let n=e.x+"/"+e.y;return void 0!==e.z&&(n+="/"+e.z),n},pointsToString:function(e){return"["+e.map(A.pointToString).join(", ")+"]"},copy:function(e){return JSON.parse(JSON.stringify(e))},angle:function(e,n,r){let i=n.x-e.x,s=n.y-e.y,o=r.x-e.x,a=r.y-e.y;return b(i*a-s*o,i*o+s*a)},round:function(e,n){let r=""+e,i=r.indexOf(".");return parseFloat(r.substring(0,i+1+n))},dist:function(e,n){let r=e.x-n.x,i=e.y-n.y;return x(r*r+i*i)},closest:function(e,n){let r=w(2,63),i,s;return e.forEach(function(e,o){(s=A.dist(n,e))<r&&(r=s,i=o)}),{mdist:r,mpos:i}},abcratio:function(e,n){if(2!==n&&3!==n)return!1;if(void 0===e)e=.5;else if(0===e||1===e)return e;let r=w(e,n)+w(1-e,n);return g((r-1)/r)},projectionratio:function(e,n){if(2!==n&&3!==n)return!1;if(void 0===e)e=.5;else if(0===e||1===e)return e;let r=w(1-e,n),i=w(e,n)+r;return r/i},lli8:function(e,n,r,i,s,o,a,l){let h=(e-r)*(o-l)-(n-i)*(s-a);return 0!=h&&{x:((e*i-n*r)*(s-a)-(e-r)*(s*l-o*a))/h,y:((e*i-n*r)*(o-l)-(n-i)*(s*l-o*a))/h}},lli4:function(e,n,r,i){let s=e.x,o=e.y,a=n.x,l=n.y,h=r.x,c=r.y,u=i.x,d=i.y;return A.lli8(s,o,a,l,h,c,u,d)},lli:function(e,n){return A.lli4(e,e.c,n,n.c)},makeline:function(e,n){return new V(e.x,e.y,(e.x+n.x)/2,(e.y+n.y)/2,n.x,n.y)},findbbox:function(e){let n=E,r=E,i=T,s=T;return e.forEach(function(e){let o=e.bbox();n>o.x.min&&(n=o.x.min),r>o.y.min&&(r=o.y.min),i<o.x.max&&(i=o.x.max),s<o.y.max&&(s=o.y.max)}),{x:{min:n,mid:(n+i)/2,max:i,size:i-n},y:{min:r,mid:(r+s)/2,max:s,size:s-r}}},shapeintersections:function(e,n,r,i,s){if(!A.bboxoverlap(n,i))return[];let o=[],a=[e.startcap,e.forward,e.back,e.endcap],l=[r.startcap,r.forward,r.back,r.endcap];return a.forEach(function(n){n.virtual||l.forEach(function(i){if(i.virtual)return;let a=n.intersects(i,s);a.length>0&&(a.c1=n,a.c2=i,a.s1=e,a.s2=r,o.push(a))})}),o},makeshape:function(e,n,r){let i=n.points.length,s=e.points.length,o=A.makeline(n.points[i-1],e.points[0]),a=A.makeline(e.points[s-1],n.points[0]),l={startcap:o,forward:e,back:n,endcap:a,bbox:A.findbbox([o,e,n,a])};return l.intersections=function(e){return A.shapeintersections(l,l.bbox,e,e.bbox,r)},l},getminmax:function(e,n,r){if(!r)return{min:0,max:0};let i=E,s=T,o,a;-1===r.indexOf(0)&&(r=[0].concat(r)),-1===r.indexOf(1)&&r.push(1);for(let l=0,h=r.length;l<h;l++)o=r[l],(a=e.get(o))[n]<i&&(i=a[n]),a[n]>s&&(s=a[n]);return{min:i,mid:(i+s)/2,max:s,size:s-i}},align:function(e,n){let r=n.p1.x,i=n.p1.y,s=-b(n.p2.y-i,n.p2.x-r);return e.map(function(e){return{x:(e.x-r)*m(s)-(e.y-i)*y(s),y:(e.x-r)*y(s)+(e.y-i)*m(s)}})},roots:function(e,n){let r,i,s;n=n||{p1:{x:0,y:0},p2:{x:1,y:0}};let o=e.length-1,a=A.align(e,n),l=function(e){return 0<=e&&e<=1};if(2===o){let e=a[0].y,n=a[1].y,r=a[2].y,i=e-2*n+r;if(0!==i){let s=-x(n*n-e*r),o=-e+n;return[-(s+o)/i,-(-s+o)/i].filter(l)}return n!==r&&0===i?[(2*n-r)/(2*n-2*r)].filter(l):[]}let h=a[0].y,c=a[1].y,u=a[2].y,d=-h+3*c-3*u+a[3].y,p=3*h-6*c+3*u,f=-3*h+3*c,g=h;if(A.approximately(d,0)){if(A.approximately(p,0))return A.approximately(f,0)?[]:[-g/f].filter(l);let e=x(f*f-4*p*g),n=2*p;return[(e-f)/n,(-f-e)/n].filter(l)}p/=d;let y=(3*(f/=d)-p*p)/3,b=y/3,w=(2*p*p*p-9*p*f+27*(g/=d))/27,_=w/2,C=_*_+b*b*b;if(C<0){let e=-y/3,n=x(e*e*e),r=-w/(2*n),o=O(r<-1?-1:r>1?1:r),a=2*S(n);return i=a*m(o/3)-p/3,[i,s=a*m((o+k)/3)-p/3,a*m((o+2*k)/3)-p/3].filter(l)}if(0===C)return[i=2*(r=_<0?S(-_):-S(_))-p/3,s=-r-p/3].filter(l);{let e=x(C);return[(r=S(-_+e))-S(_+e)-p/3].filter(l)}},droots:function(e){if(3===e.length){let n=e[0],r=e[1],i=e[2],s=n-2*r+i;if(0!==s){let e=-x(r*r-n*i),o=-n+r;return[-(e+o)/s,-(-e+o)/s]}return r!==i&&0===s?[(2*r-i)/(2*(r-i))]:[]}if(2===e.length){let n=e[0],r=e[1];if(n!==r)return[n/(n-r)]}return[]},curvature:function(e,n,r,i,s){let o,a,l,h,c=0,u=0,d=A.compute(e,n),p=A.compute(e,r),f=d.x*d.x+d.y*d.y;if(i?(o=x(w(d.y*p.z-p.y*d.z,2)+w(d.z*p.x-p.z*d.x,2)+w(d.x*p.y-p.x*d.y,2)),a=w(f+d.z*d.z,1.5)):(o=d.x*p.y-d.y*p.x,a=w(f,1.5)),0===o||0===a)return{k:0,r:0};if(c=o/a,u=a/o,!s){let s=A.curvature(e-.001,n,r,i,!0).k,o=A.curvature(e+.001,n,r,i,!0).k;h=(o-c+(c-s))/2,l=(g(o-c)+g(c-s))/2}return{k:c,r:u,dk:h,adk:l}},inflections:function(e){if(e.length<4)return[];let n=A.align(e,{p1:e[0],p2:e.slice(-1)[0]}),r=n[2].x*n[1].y,i=n[3].x*n[1].y,s=n[1].x*n[2].y,o=18*(-3*r+2*i+3*s-n[3].x*n[2].y),a=18*(3*r-i-3*s),l=18*(s-r);if(A.approximately(o,0)){if(!A.approximately(a,0)){let e=-l/a;if(0<=e&&e<=1)return[e]}return[]}let h=2*o;if(A.approximately(h,0))return[];let c=a*a-4*o*l;if(c<0)return[];let u=Math.sqrt(c);return[(u-a)/h,-(a+u)/h].filter(function(e){return 0<=e&&e<=1})},bboxoverlap:function(e,n){let r=["x","y"],i=r.length;for(let s=0,o,a,l,h;s<i;s++)if(a=e[o=r[s]].mid,l=n[o].mid,h=(e[o].size+n[o].size)/2,g(a-l)>=h)return!1;return!0},expandbox:function(e,n){n.x.min<e.x.min&&(e.x.min=n.x.min),n.y.min<e.y.min&&(e.y.min=n.y.min),n.z&&n.z.min<e.z.min&&(e.z.min=n.z.min),n.x.max>e.x.max&&(e.x.max=n.x.max),n.y.max>e.y.max&&(e.y.max=n.y.max),n.z&&n.z.max>e.z.max&&(e.z.max=n.z.max),e.x.mid=(e.x.min+e.x.max)/2,e.y.mid=(e.y.min+e.y.max)/2,e.z&&(e.z.mid=(e.z.min+e.z.max)/2),e.x.size=e.x.max-e.x.min,e.y.size=e.y.max-e.y.min,e.z&&(e.z.size=e.z.max-e.z.min)},pairiteration:function(e,n,r){let i=e.bbox(),s=n.bbox(),o=r||.5;if(i.x.size+i.y.size<o&&s.x.size+s.y.size<o)return[(1e5*(e._t1+e._t2)/2|0)/1e5+"/"+(1e5*(n._t1+n._t2)/2|0)/1e5];let a=e.split(.5),l=n.split(.5),h=[{left:a.left,right:l.left},{left:a.left,right:l.right},{left:a.right,right:l.right},{left:a.right,right:l.left}];h=h.filter(function(e){return A.bboxoverlap(e.left.bbox(),e.right.bbox())});let c=[];return 0===h.length?c:(h.forEach(function(e){c=c.concat(A.pairiteration(e.left,e.right,o))}),c=c.filter(function(e,n){return c.indexOf(e)===n}))},getccenter:function(e,n,r){let i=n.x-e.x,s=n.y-e.y,o=r.x-n.x,a=r.y-n.y,l=i*m(C)-s*y(C),h=i*y(C)+s*m(C),c=o*m(C)-a*y(C),u=o*y(C)+a*m(C),d=(e.x+n.x)/2,p=(e.y+n.y)/2,f=(n.x+r.x)/2,g=(n.y+r.y)/2,O=A.lli8(d,p,d+l,p+h,f,g,f+c,g+u),x=A.dist(O,e),w=b(e.y-O.y,e.x-O.x),S=b(n.y-O.y,n.x-O.x),_=b(r.y-O.y,r.x-O.x),E;return w<_?((w>S||S>_)&&(w+=k),w>_&&(E=_,_=w,w=E)):_<S&&S<w?(E=_,_=w,w=E):_+=k,O.s=w,O.e=_,O.r=x,O},numberSort:function(e,n){return e-n}};class M{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(e){return A.pointsToString(e.points)}).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map(function(e){return e.length()}).reduce(function(e,n){return e+n})}curve(e){return this.curves[e]}bbox(){let e=this.curves;for(var n=e[0].bbox(),r=1;r<e.length;r++)A.expandbox(n,e[r].bbox());return n}offset(e){let n=[];return this.curves.forEach(function(r){n.push(...r.offset(e))}),new M(n)}}let{abs:N,min:D,max:I,cos:$,sin:R,acos:L,sqrt:Q}=Math,j=Math.PI;class V{constructor(e){let n=e&&e.forEach?e:Array.from(arguments).slice(),r=!1;if("object"==typeof n[0]){r=n.length;let e=[];n.forEach(function(n){["x","y","z"].forEach(function(r){void 0!==n[r]&&e.push(n[r])})}),n=e}let i=!1,s=n.length;if(r){if(r>4){if(1!=arguments.length)throw Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");i=!0}}else if(6!==s&&8!==s&&9!==s&&12!==s&&1!=arguments.length)throw Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");let o=this._3d=!i&&(9===s||12===s)||e&&e[0]&&void 0!==e[0].z,a=this.points=[];for(let e=0,r=o?3:2;e<s;e+=r){var l={x:n[e],y:n[e+1]};o&&(l.z=n[e+2]),a.push(l)}let h=this.order=a.length-1,c=this.dims=["x","y"];o&&c.push("z"),this.dimlen=c.length;let u=A.align(a,{p1:a[0],p2:a[h]}),d=A.dist(a[0],a[h]);this._linear=u.reduce((e,n)=>e+N(n.y),0)<d/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,n,r,i){if(void 0===i&&(i=.5),0===i)return new V(n,n,r);if(1===i)return new V(e,n,n);let s=V.getABC(2,e,n,r,i);return new V(e,s.A,r)}static cubicFromPoints(e,n,r,i,s){void 0===i&&(i=.5);let o=V.getABC(3,e,n,r,i);void 0===s&&(s=A.dist(n,o.C));let a=s*(1-i)/i,l=A.dist(e,r),h=(r.x-e.x)/l,c=(r.y-e.y)/l,u=s*h,d=s*c,p={x:n.x-u,y:n.y-d},f={x:n.x+a*h,y:n.y+a*c},g=o.A,m={x:g.x+(p.x-g.x)/(1-i),y:g.y+(p.y-g.y)/(1-i)},y={x:g.x+(f.x-g.x)/i,y:g.y+(f.y-g.y)/i},O={x:e.x+(m.x-e.x)/i,y:e.y+(m.y-e.y)/i};return new V(e,O,{x:r.x+(y.x-r.x)/(1-i),y:r.y+(y.y-r.y)/(1-i)},r)}static getUtils(){return A}getUtils(){return V.getUtils()}static get PolyBezier(){return M}valueOf(){return this.toString()}toString(){return A.pointsToString(this.points)}toSVG(){if(this._3d)return!1;let e=this.points,n=["M",e[0].x,e[0].y,2===this.order?"Q":"C"];for(let r=1,i=e.length;r<i;r++)n.push(e[r].x),n.push(e[r].y);return n.join(" ")}setRatios(e){if(e.length!==this.points.length)throw Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){let e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map(function(e,n){return""+n+e.x+e.y+(e.z?e.z:0)}).join("")}update(){this._lut=[],this.dpoints=A.derive(this.points,this._3d),this.computedirection()}computedirection(){let e=this.points,n=A.angle(e[0],e[this.order],e[1]);this.clockwise=n>0}length(){return A.length(this.derivative.bind(this))}static getABC(e=2,n,r,i,s=.5){let o=A.projectionratio(s,e),a=1-o,l={x:o*n.x+a*i.x,y:o*n.y+a*i.y},h=A.abcratio(s,e);return{A:{x:r.x+(r.x-l.x)/h,y:r.y+(r.y-l.y)/h},B:r,C:l,S:n,E:i}}getABC(e,n){n=n||this.get(e);let r=this.points[0],i=this.points[this.order];return V.getABC(this.order,r,n,i,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e+1)return this._lut;this._lut=[],e++,this._lut=[];for(let n=0,r,i;n<e;n++)i=n/(e-1),(r=this.compute(i)).t=i,this._lut.push(r);return this._lut}on(e,n){n=n||5;let r=this.getLUT(),i=[];for(let s=0,o;s<r.length;s++)o=r[s],A.dist(o,e)<n&&(i.push(o),r.length);return!!i.length&&(t/=i.length)}project(e){let n=this.getLUT(),r=n.length-1,i=A.closest(n,e),s=i.mpos,o=(s-1)/r,a=(s+1)/r,l=.1/r,h=i.mdist,c=o,u=c,d;h+=1;for(let n;c<a+l;c+=l)d=this.compute(c),(n=A.dist(e,d))<h&&(h=n,u=c);return u=u<0?0:u>1?1:u,(d=this.compute(u)).t=u,d.d=h,d}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?A.computeWithRatios(e,this.points,this.ratios,this._3d):A.compute(e,this.points,this._3d,this.ratios)}raise(){let e=this.points,n=[e[0]],r=e.length;for(let i=1,s,o;i<r;i++)s=e[i],o=e[i-1],n[i]={x:(r-i)/r*s.x+i/r*o.x,y:(r-i)/r*s.y+i/r*o.y};return n[r]=e[r-1],new V(n)}derivative(e){return A.compute(e,this.dpoints[0],this._3d)}dderivative(e){return A.compute(e,this.dpoints[1],this._3d)}align(){let e=this.points;return new V(A.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return A.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return A.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){let n=this.derivative(e),r=Q(n.x*n.x+n.y*n.y);return{t:e,x:-n.y/r,y:n.x/r}}__normal3(e){let n=this.derivative(e),r=this.derivative(e+.01),i=Q(n.x*n.x+n.y*n.y+n.z*n.z),s=Q(r.x*r.x+r.y*r.y+r.z*r.z);n.x/=i,n.y/=i,n.z/=i,r.x/=s,r.y/=s,r.z/=s;let o={x:r.y*n.z-r.z*n.y,y:r.z*n.x-r.x*n.z,z:r.x*n.y-r.y*n.x},a=Q(o.x*o.x+o.y*o.y+o.z*o.z);o.x/=a,o.y/=a,o.z/=a;let l=[o.x*o.x,o.x*o.y-o.z,o.x*o.z+o.y,o.x*o.y+o.z,o.y*o.y,o.y*o.z-o.x,o.x*o.z-o.y,o.y*o.z+o.x,o.z*o.z];return{t:e,x:l[0]*n.x+l[1]*n.y+l[2]*n.z,y:l[3]*n.x+l[4]*n.y+l[5]*n.z,z:l[6]*n.x+l[7]*n.y+l[8]*n.z}}hull(e){let n=this.points,r=[],i=[],s=0;for(i[s++]=n[0],i[s++]=n[1],i[s++]=n[2],3===this.order&&(i[s++]=n[3]);n.length>1;){r=[];for(let o=0,a,l=n.length-1;o<l;o++)a=A.lerp(e,n[o],n[o+1]),i[s++]=a,r.push(a);n=r}return i}split(e,n){if(0===e&&n)return this.split(n).left;if(1===n)return this.split(e).right;let r=this.hull(e),i={left:new V(2===this.order?[r[0],r[3],r[5]]:[r[0],r[4],r[7],r[9]]),right:new V(2===this.order?[r[5],r[4],r[2]]:[r[9],r[8],r[6],r[3]]),span:r};return(i.left._t1=A.map(0,0,1,this._t1,this._t2),i.left._t2=A.map(e,0,1,this._t1,this._t2),i.right._t1=A.map(e,0,1,this._t1,this._t2),i.right._t2=A.map(1,0,1,this._t1,this._t2),n)?(n=A.map(n,e,1,0,1),i.right.split(n).left):i}extrema(){let e={},n=[];return this.dims.forEach((function(r){let i=function(e){return e[r]},s=this.dpoints[0].map(i);e[r]=A.droots(s),3===this.order&&(s=this.dpoints[1].map(i),e[r]=e[r].concat(A.droots(s))),e[r]=e[r].filter(function(e){return e>=0&&e<=1}),n=n.concat(e[r].sort(A.numberSort))}).bind(this)),e.values=n.sort(A.numberSort).filter(function(e,r){return n.indexOf(e)===r}),e}bbox(){let e=this.extrema(),n={};return this.dims.forEach((function(r){n[r]=A.getminmax(this,r,e[r])}).bind(this)),n}overlaps(e){let n=this.bbox(),r=e.bbox();return A.bboxoverlap(n,r)}offset(e,n){if(void 0!==n){let r=this.get(e),i=this.normal(e),s={c:r,n:i,x:r.x+i.x*n,y:r.y+i.y*n};return this._3d&&(s.z=r.z+i.z*n),s}if(this._linear){let n=this.normal(0);return[new V(this.points.map(function(r){let i={x:r.x+e*n.x,y:r.y+e*n.y};return r.z&&n.z&&(i.z=r.z+e*n.z),i}))]}return this.reduce().map(function(n){return n._linear?n.offset(e)[0]:n.scale(e)})}simple(){if(3===this.order){let e=A.angle(this.points[0],this.points[3],this.points[1]),n=A.angle(this.points[0],this.points[3],this.points[2]);if(e>0&&n<0||e<0&&n>0)return!1}let e=this.normal(0),n=this.normal(1),r=e.x*n.x+e.y*n.y;return this._3d&&(r+=e.z*n.z),N(L(r))<j/3}reduce(){let e,n=0,r=0,i,s=[],o=[],a=this.extrema().values;for(-1===a.indexOf(0)&&(a=[0].concat(a)),-1===a.indexOf(1)&&a.push(1),n=a[0],e=1;e<a.length;e++)r=a[e],(i=this.split(n,r))._t1=n,i._t2=r,s.push(i),n=r;return s.forEach(function(e){for(n=0,r=0;r<=1;)for(r=n+.01;r<=1.01;r+=.01)if(!(i=e.split(n,r)).simple()){if(r-=.01,.01>N(n-r))return[];(i=e.split(n,r))._t1=A.map(n,0,1,e._t1,e._t2),i._t2=A.map(r,0,1,e._t1,e._t2),o.push(i),n=r;break}n<1&&((i=e.split(n,1))._t1=A.map(n,0,1,e._t1,e._t2),i._t2=e._t2,o.push(i))}),o}translate(e,n,r){r="number"==typeof r?r:n;let i=this.order,s=this.points.map((e,s)=>(1-s/i)*n+s/i*r);return new V(this.points.map((n,r)=>({x:n.x+e.x*s[r],y:n.y+e.y*s[r]})))}scale(e){let n=this.order,r=!1;if("function"==typeof e&&(r=e),r&&2===n)return this.raise().scale(r);let i=this.clockwise,s=this.points;if(this._linear)return this.translate(this.normal(0),r?r(0):e,r?r(1):e);let o=r?r(0):e,a=r?r(1):e,l=[this.offset(0,10),this.offset(1,10)],h=[],c=A.lli4(l[0],l[0].c,l[1],l[1].c);if(!c)throw Error("cannot scale this curve. Try reducing it first.");return([0,1].forEach(function(e){let r=h[e*n]=A.copy(s[e*n]);r.x+=(e?a:o)*l[e].n.x,r.y+=(e?a:o)*l[e].n.y}),r)?[0,1].forEach(function(o){if(2!==n||!o){var a=s[o+1],l={x:a.x-c.x,y:a.y-c.y},u=r?r((o+1)/n):e;r&&!i&&(u=-u);var d=Q(l.x*l.x+l.y*l.y);l.x/=d,l.y/=d,h[o+1]={x:a.x+u*l.x,y:a.y+u*l.y}}}):[0,1].forEach(e=>{if(2===n&&e)return;let r=h[e*n],i=this.derivative(e),o={x:r.x+i.x,y:r.y+i.y};h[e+1]=A.lli4(r,o,c,s[e+1])}),new V(h)}outline(e,n,r,i){if(n=void 0===n?e:n,this._linear){let s,o,a,l=this.normal(0),h=this.points[0],c=this.points[this.points.length-1];void 0===r&&(r=e,i=n),s={x:h.x+l.x*e,y:h.y+l.y*e},a={x:c.x+l.x*r,y:c.y+l.y*r},o={x:(s.x+a.x)/2,y:(s.y+a.y)/2};let u=[s,o,a];s={x:h.x-l.x*n,y:h.y-l.y*n},a={x:c.x-l.x*i,y:c.y-l.y*i},o={x:(s.x+a.x)/2,y:(s.y+a.y)/2};let d=[a,o,s],p=A.makeline(d[2],u[0]),f=A.makeline(u[2],d[0]);return new M([p,new V(u),f,new V(d)])}let s=this.reduce(),o=s.length,a=[],l=[],h,c=0,u=this.length(),d=void 0!==r&&void 0!==i;function p(e,n,r,i,s){return function(o){let a=n-e;return A.map(o,0,1,e+i/r*a,e+(i+s)/r*a)}}s.forEach(function(s){let o=s.length();d?(a.push(s.scale(p(e,r,u,c,o))),l.push(s.scale(p(-n,-i,u,c,o)))):(a.push(s.scale(e)),l.push(s.scale(-n))),c+=o}),l=l.map(function(e){return(h=e.points)[3]?e.points=[h[3],h[2],h[1],h[0]]:e.points=[h[2],h[1],h[0]],e}).reverse();let f=a[0].points[0],g=a[o-1].points[a[o-1].points.length-1],m=l[o-1].points[l[o-1].points.length-1],y=l[0].points[0],O=A.makeline(m,f),b=A.makeline(g,y);return new M([O].concat(a).concat([b]).concat(l))}outlineshapes(e,n,r){n=n||e;let i=this.outline(e,n).curves,s=[];for(let e=1,n=i.length;e<n/2;e++){let o=A.makeshape(i[e],i[n-e],r);o.startcap.virtual=e>1,o.endcap.virtual=e<n/2-1,s.push(o)}return s}intersects(e,n){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof V&&(e=e.reduce()),this.curveintersects(this.reduce(),e,n)):this.selfintersects(n)}lineIntersects(e){let n=D(e.p1.x,e.p2.x),r=D(e.p1.y,e.p2.y),i=I(e.p1.x,e.p2.x),s=I(e.p1.y,e.p2.y);return A.roots(this.points,e).filter(e=>{var o=this.get(e);return A.between(o.x,n,i)&&A.between(o.y,r,s)})}selfintersects(e){let n=this.reduce(),r=n.length-2,i=[];for(let s=0,o,a;s<r;s++)o=n.slice(s,s+1),a=n.slice(s+2),i.push(...this.curveintersects(o,a,e));return i}curveintersects(e,n,r){let i=[];e.forEach(function(e){n.forEach(function(n){e.overlaps(n)&&i.push({left:e,right:n})})});let s=[];return i.forEach(function(e){let n=A.pairiteration(e.left,e.right,r);n.length>0&&(s=s.concat(n))}),s}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,n,r,i){let s=(i-r)/4,o=this.get(r+s),a=this.get(i-s),l=A.dist(e,n),h=A.dist(e,o),c=A.dist(e,a);return N(h-l)+N(c-l)}_iterate(e,n){let r=0,i=1,s;do{s=0,i=1;let o=this.get(r),a,l,h,c,u=!1,d=!1,p,f=i,g=1;do if(d=u,c=h,f=(r+i)/2,a=this.get(f),l=this.get(i),(h=A.getccenter(o,a,l)).interval={start:r,end:i},u=this._error(h,o,r,i)<=e,(p=d&&!u)||(g=i),u){if(i>=1){if(h.interval.end=g=1,c=h,i>1){let e={x:h.x+h.r*$(h.e),y:h.y+h.r*R(h.e)};h.e+=A.angle({x:h.x,y:h.y},e,this.get(1))}break}i+=(i-r)/2}else i=f;while(!p&&s++<100);if(s>=100)break;c=c||h,n.push(c),r=g}while(i<1);return n}}var z=Object.defineProperty,B=Object.getOwnPropertyDescriptor,F=(e,n,r,i)=>{for(var s,o=i>1?void 0:i?B(n,r):n,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i?s(n,r,o):s(o))||o);return i&&o&&z(n,r,o),o},Z=c.Ay.div`
  width: 20px;
  height: 20px;
  border-radius: 50%;
  margin-top: -10px;
  margin-left: -10px;
  left: 50%;
  top: 50%;
  position: absolute;
  // 非 hover 状态下的样式
  border: none;

  & > .symbol {
    opacity: 0;
  }

  .bg-circle {
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    background-color: var(--g-workflow-port-color-background, #fff);
    transform: scale(0.5);
    transition: all 0.2s linear 0s;
  }

  .bg {
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background: var(--g-workflow-port-color-secondary, #9197f1);
    transform: scale(0.4, 0.4);
    transition: all 0.2s linear 0s;

    &.hasError {
      background: var(--g-workflow-port-color-error, red);
    }

    .symbol {
      position: absolute;
      width: 14px;
      height: 14px;
      opacity: 0;
      pointer-events: none;
      color: var(--g-workflow-port-color-background, #fff);
      transition: opacity 0.2s linear 0s;

      & > svg {
        width: 14px;
        height: 14px;
      }
    }

    .focus-circle {
      position: absolute;
      display: flex;
      justify-content: center;
      align-items: center;
      width: 8px;
      height: 8px;
      opacity: 0;
      background: var(--g-workflow-port-color-secondary, #9197f1);
      border-radius: 50%;
      transition: opacity 0.2s linear 0s;
    }
  }

  &.linked .bg:not(.hasError) {
    background: var(--g-workflow-port-color-primary, #4d53e8);
  }

  &.hovered .bg:not(.hasError) {
    border: none;
    cursor: crosshair;
    transform: scale(1, 1);
    background: var(--g-workflow-port-color-primary, #4d53e8);

    & > .symbol {
      opacity: 1;
    }
  }

  .cross-hair {
    position: relative;
    left: 2px;
    top: 2px;

    &::after,
    &::before {
      content: '';
      background: var(--g-workflow-port-color-background, #fff);
      border-radius: 2px;
      position: absolute;
    }

    &::after {
      left: 4px;
      width: 2px;
      height: 6px;
      box-shadow: 0 4px var(--g-workflow-port-color-background, #fff);
    }

    &::before {
      top: 4px;
      width: 6px;
      height: 2px;
      box-shadow: 4px 0 var(--g-workflow-port-color-background, #fff);
    }
`;function q(){return o.createElement("div",{className:"symbol"},o.createElement("div",{className:"cross-hair"}))}var W=o.memo(e=>{let n=(0,h.h1)(l.Be),r=(0,h.h1)(l.GH),{entity:i,onClick:c}=e,{portType:u,relativePosition:d,disabled:p}=i,[f,g]=(0,o.useState)(i.targetElement),[m,y]=(0,o.useState)(d.x),[O,b]=(0,o.useState)(d.y),[x,w]=(0,o.useState)(!1),[S,_]=(0,o.useState)(!!i?.lines?.length),[k,C]=(0,o.useState)(e.entity.hasError),E=(0,l.LJ)();(0,o.useEffect)(()=>{i.validate(),C(i.hasError);let e=i.onEntityChange(()=>{if(i.targetElement){i.targetElement!==f&&g(i.targetElement);return}let e=i.relativePosition;y(Math.round(e.x)),b(Math.round(e.y))}),s=n.onHoveredChange(e=>{w(n.isHovered(i.id))}),o=i.onErrorChanged(()=>{C(i.hasError)}),a=r.onAvailableLinesChange(()=>{setTimeout(()=>{r.disposed||i.disposed||_(!!i.lines.length)},0)});return()=>{e.dispose(),s.dispose(),o.dispose(),a.dispose()}},[n,i,f]);let T=(0,a.A)("workflow-port-render",e.className||"",{hovered:!E&&x&&!p&&"input"!==u,linked:S}),P={};e.primaryColor&&(P["--g-workflow-port-color-primary"]=e.primaryColor),e.secondaryColor&&(P["--g-workflow-port-color-secondary"]=e.secondaryColor),e.errorColor&&(P["--g-workflow-port-color-error"]=e.errorColor),e.backgroundColor&&(P["--g-workflow-port-color-background"]=e.backgroundColor);let A=f?{...e.style,...P}:{...e.style,...P,left:m,top:O},M=o.createElement(Z,{className:T,style:A,onClick:e=>c?.(e,i),onTouchStart:e=>{c&&h.D9.onTouched(e,e=>{c(e,i)})},"data-port-entity-id":i.id,"data-port-entity-type":i.portType,"data-testid":"sdk.workflow.canvas.node.port"},o.createElement("div",{className:(0,a.A)("bg-circle","workflow-bg-circle")}),o.createElement("div",{className:(0,a.A)({bg:!0,"workflow-port-bg":!0,"workflow-point-bg":!0,hasError:k})},o.createElement(q,null)),o.createElement("div",{className:"focus-circle"}));return f?s.createPortal(M,f):M}),X=c.Ay.div`
  position: absolute;

  @keyframes flowingDash {
    to {
      stroke-dashoffset: -13;
    }
  }

  .dashed-line {
    stroke-dasharray: 8, 5;
  }

  .flowing-line {
    animation: flowingDash 0.5s linear infinite;
  }
`;function U({id:e,pos:n,reverseArrow:r,strokeWidth:i,vertical:s,hide:a}){if(a)return null;let l=s?r?`M ${n.x-6},${n.y} L ${n.x},${n.y-6} L ${n.x+6},${n.y}`:`M ${n.x-6},${n.y-6} L ${n.x},${n.y} L ${n.x+6},${n.y-6}`:r?`M ${n.x},${n.y+6} L ${n.x-6},${n.y} L ${n.x},${n.y-6}`:`M ${n.x-6},${n.y-6} L ${n.x},${n.y} L ${n.x-6},${n.y+6}`;return o.createElement("path",{d:l,strokeLinecap:"round",stroke:`url(#${e})`,fill:"none",strokeWidth:i})}var Y=(0,o.memo)(e=>{let{line:n,color:r,selected:i,children:s,strokePrefix:h,rendererRegistry:c}=e,{position:u,reverse:d,hideArrow:p,vertical:f}=n,{bounds:g,path:m}=n.getData(l.CX),y=e=>({x:e.x-g.x+12,y:e.y-g.y+12}),O=y(u.from),b=y(u.to),x="top"===u.to.location?{x:b.x,y:b.y-l.iW}:{x:b.x-l.iW,y:b.y},w="bottom"===u.from.location?{x:O.x,y:O.y+l.iW+6}:{x:O.x+l.iW+6,y:O.y},S=i?n.uiState.strokeWidthSelected??3:n.uiState.strokeWidth??2,_=h?`${h}-${n.id}`:n.id,k=c?.tryToGetRendererComponent("arrow-renderer")?.renderer,C=o.createElement("path",{d:m,fill:"none",stroke:`url(#${_})`,strokeWidth:S,className:n.processing||n.flowing?"dashed-line flowing-line":""});return o.createElement(X,{className:(0,a.A)("gedit-flow-activity-edge",n.className),style:{...n.uiState.style,left:g.x-12,top:g.y-12,position:"absolute"}},s,o.createElement("svg",{width:g.width+24,height:g.height+24},o.createElement("defs",null,o.createElement("linearGradient",{x1:f?"100%":"0%",y1:f?"0%":"100%",x2:"100%",y2:"100%",id:_,gradientUnits:"userSpaceOnUse"},o.createElement("stop",{stopColor:r,offset:"0%"}),o.createElement("stop",{stopColor:r,offset:"100%"}))),o.createElement("g",null,C,o.createElement(k||U,{id:_,reverseArrow:d,pos:d?w:x,strokeWidth:S,vertical:f,hide:p,line:n}))))},(e,n)=>e.version===n.version),G=class extends h.Wd{constructor(){super(...arguments),this.layerID=(0,l.Ak)(),this.mountedLines=new Map,this._version=0,this.node=d.Si.createDivWithClass("gedit-playground-layer gedit-flow-lines-layer")}onZoom(e){this.node.style.transform=`scale(${e})`}onReady(){this.pipelineNode.appendChild(this.node),this.toDispose.pushAll([this.selectService.onSelectionChanged(()=>this.render()),this.hoverService.onHoveredChange(()=>this.render()),this.workflowDocument.linesManager.onForceUpdate(()=>{this.mountedLines.clear(),this.bumpVersion(),this.render()})])}dispose(){this.mountedLines.clear()}render(){let[,e]=(0,o.useState)({});(0,o.useLayoutEffect)(()=>{let n=requestAnimationFrame(()=>{let n=!1;this.lines.forEach(e=>{let r=e.getData(l.CX),i=r.renderVersion;r.update(),r.renderVersion!==i&&(n=!0)}),n&&e({})});return()=>cancelAnimationFrame(n)},[this.lines]);let n=this.lines.map(e=>this.renderLine(e));return o.createElement(o.Fragment,null,n)}bumpVersion(){this._version=this._version+1,this._version===Number.MAX_SAFE_INTEGER&&(this._version=0)}lineProps(e){let{lineType:n}=this.workflowDocument.linesManager,r=this.selectService.isSelected(e.id),i=this.hoverService.isHovered(e.id),s=this.lineVersion(e);return{key:e.id,color:e.color,selected:r,hovered:i,line:e,lineType:n,version:s,strokePrefix:this.layerID,rendererRegistry:this.rendererRegistry}}lineVersion(e){let{renderVersion:n}=e.getData(l.CX),r=this.selectService.isSelected(e.id),i=this.hoverService.isHovered(e.id),{version:s,color:o}=e;return`v:${this._version},lv:${s},rv:${n},c:${o},s:${r?"T":"F"},h:${i?"T":"F"}`}lineComponent(e){let n=this.options.renderInsideLine??(()=>o.createElement(o.Fragment,null));return o.createElement(Y,{...e},o.createElement(n,{...e}))}renderLine(e){let n=this.lineProps(e),r=this.mountedLines.get(e.id),i=void 0!==r,{portal:o,version:a}=r??{};if(i&&a===n.version)return o;i||(this.renderElement.appendChild(e.node),e.onDispose(()=>{this.mountedLines.delete(e.id),e.node.remove()}));let l=s.createPortal(this.lineComponent(n),e.node);return this.mountedLines.set(e.id,{line:e,portal:l,version:n.version}),l}get renderElement(){return this.stackContext.node}};function H(e,n){return{x:e.x-n.x+12,y:e.y-n.y+12}}function K(e,n){return e>=0?.5*e:25*n*Math.sqrt(-e)}function J({location:e,x1:n,y1:r,x2:i,y2:s,curvature:o}){switch(e){case"left":return{x:n-K(n-i,o),y:r};case"right":return{x:n+K(i-n,o),y:r};case"top":return{x:n,y:r-K(r-s,o)};case"bottom":return{x:n,y:r+K(s-r,o)}}}G.type="WorkflowLinesLayer",F([(0,u.WQ)(l.Be)],G.prototype,"hoverService",2),F([(0,u.WQ)(l.rm)],G.prototype,"selectService",2),F([(0,u.WQ)(f.StackingContextManager)],G.prototype,"stackContext",2),F([(0,u.WQ)(p.BY)],G.prototype,"rendererRegistry",2),F([(0,h.Ub)(l.fv)],G.prototype,"lines",2),F([(0,h.Ub)(l.IR)],G.prototype,"ports",2),F([(0,h.fz)(l.Ff,h.hZ)],G.prototype,"trans",2),F([(0,u.WQ)(l.Vo)],G.prototype,"workflowDocument",2),G=F([(0,u._G)()],G);var ee=class{constructor(e){this.entity=e}get path(){return this.data?.path??""}calcDistance(e){return this.data?d.bR.getDistance(e,this.data.bezier.project(e)):Number.MAX_SAFE_INTEGER}get bounds(){return this.data?this.data.bbox:d.M_.EMPTY}get center(){return this.data?.center}update(e){this.data=this.calcBezier(e.fromPos,e.toPos)}calcBezier(e,n){let{controls:r,center:i}=function(e,n,r=.25){var i,s,o,a;let l=J({location:e.location,x1:e.x,y1:e.y,x2:n.x,y2:n.y,curvature:r}),h=J({location:n.location,x1:n.x,y1:n.y,x2:e.x,y2:e.y,curvature:r}),c=(i=e,s=n,o=l,a=h,{x:.125*i.x+.375*o.x+.375*a.x+.125*s.x,y:.125*i.y+.375*o.y+.375*a.y+.125*s.y});return{controls:[l,h],center:c}}(e,n,this.entity.uiState.curvature),s=new V([e,...r,n]),o=s.bbox(),a=new d.M_(o.x.min,o.y.min,o.x.max-o.x.min,o.y.max-o.y.min),l=H(i,a),h=this.getPath({bbox:a,fromPos:e,toPos:n,controls:r});return this.data={fromPos:e,toPos:n,bezier:s,bbox:a,controls:r,path:h,center:{...i,labelX:l.x,labelY:l.y}},this.data}getPath(e){let{bbox:n}=e,r=H(e.fromPos,n),i=H(e.toPos,n),s=e.controls.map(e=>H(e,n)),o=this.entity.uiState.shrink,a="bottom"===e.fromPos.location?{x:r.x,y:r.y+o}:{x:r.x+o,y:r.y},l="top"===e.toPos.location?{x:i.x,y:i.y-o}:{x:i.x-o,y:i.y},h=s.map(e=>`${e.x} ${e.y}`).join(",");return`M${a.x} ${a.y} C ${h}, ${l.x} ${l.y}`}};ee.type=l.Vv.BEZIER;var et=i||(i={});let en={left:{x:-1,y:0},right:{x:1,y:0},top:{x:0,y:-1},bottom:{x:0,y:1}};et.getPoints=function({source:e,target:n}){let r,i,s=en[e.location],o=en[n.location],a={x:e.x+20*s.x,y:e.y+20*s.y,location:e.location},l={x:n.x+20*o.x,y:n.y+20*o.y,location:n.location},h=(({source:e,target:n})=>"left"===e.location||"right"===e.location?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1})({source:a,target:l}),c=0!==h.x?"x":"y",u=h[c],d=[],[p,f]=function({source:e,target:n}){let r=Math.abs(n.x-e.x)/2,i=n.x<e.x?n.x+r:n.x-r,s=Math.abs(n.y-e.y)/2;return[i,n.y<e.y?n.y+s:n.y-s]}({source:e,target:n});if(s[c]*o[c]==-1){r=p,i=f;let e=[{x:r,y:a.y},{x:r,y:l.y}],n=[{x:a.x,y:i},{x:l.x,y:i}];d=s[c]===u?"x"===c?e:n:"x"===c?n:e}else{let e=[{x:a.x,y:l.y}],n=[{x:l.x,y:a.y}];d="x"===c?s.x===u?n:e:s.y===u?e:n;let h="x"===c?"y":"x",p=s[c]===o[h],f=a[h]>l[h],g=a[h]<l[h];(1===s[c]&&(!p&&f||p&&g)||1!==s[c]&&(!p&&g||p&&f))&&(d="x"===c?e:n);let m={x:a.x,y:a.y},y={x:l.x,y:l.y};Math.max(Math.abs(m.x-d[0].x),Math.abs(y.x-d[0].x))>=Math.max(Math.abs(m.y-d[0].y),Math.abs(y.y-d[0].y))?(r=(m.x+y.x)/2,i=d[0].y):(r=d[0].x,i=(m.y+y.y)/2)}return{points:[e,{x:a.x,y:a.y},...d,{x:l.x,y:l.y},n],center:{x:r,y:i}}},et.getSmoothStepPath=function(e){return e.reduce((n,r,i)=>n+(i>0&&i<e.length-1?function(e,n,r){let i=Math.min(d.bR.getDistance(e,n)/2,d.bR.getDistance(n,r)/2,5),{x:s,y:o}=n;if(e.x===s&&s===r.x||e.y===o&&o===r.y)return`L${s} ${o}`;if(e.y===o){let n=e.x<r.x?-1:1,a=e.y<r.y?1:-1;return`L ${s+i*n},${o}Q ${s},${o} ${s},${o+i*a}`}let a=e.x<r.x?1:-1,l=e.y<r.y?-1:1;return`L ${s},${o+i*l}Q ${s},${o} ${s+i*a},${o}`}(e[i-1],r,e[i+1]):`${0===i?"M":"L"}${r.x} ${r.y}`),"")},et.getBounds=function(e){let n=e.map(e=>e.x),r=e.map(e=>e.y),i=Math.min(...n),s=Math.max(...n),o=Math.min(...r),a=Math.max(...r);return d.M_.createRectangleWithTwoPoints({x:i,y:o},{x:s,y:a})},et.getFoldLineToPointDistance=(e,n)=>{if(0===e.length)return 1/0;if(1===e.length)return d.bR.getDistance(e[0],n);let r=[];for(let n=0;n<e.length-1;n++)r.push([e[n],e[n+1]]);return Math.min(...r.map(e=>{let[r,i]=e;return((e,n,r)=>{let i,s,{x:o,y:a}=e,{x:l,y:h}=n,{x:c,y:u}=r,d=c-l,p=u-h,f=d*d+p*p,g=0===f?-1:((o-l)*d+(a-h)*p)/f;g<0?(i=l,s=h):g>1?(i=c,s=u):(i=l+g*d,s=h+g*p);let m=o-i,y=a-s;return Math.sqrt(m*m+y*y)})(n,r,i)}))};var er=class{constructor(e){this.entity=e}get path(){return this.data?.path??""}calcDistance(e){return this.data?i.getFoldLineToPointDistance(this.data.points,e):Number.MAX_SAFE_INTEGER}get bounds(){return this.data?this.data.bbox:new d.M_}get center(){return this.data?.center}update(e){let{fromPos:n,toPos:r}=e,s=this.entity.uiState.shrink,o={x:"bottom"===n.location?0:s,y:"bottom"===n.location?s:0},a={x:"top"===r.location?0:-s,y:"top"===r.location?-s:0},{points:l,center:h}=i.getPoints({source:{x:n.x+o.x,y:n.y+o.y,location:n.location},target:{x:r.x+a.x,y:r.y+a.y,location:r.location}}),c=i.getBounds(l),u=l.map(e=>H(e,c)),d=i.getSmoothStepPath(u),p=H(h,c);this.data={points:l,path:d,bbox:c,center:{x:h.x,y:h.y,labelX:p.x,labelY:p.y}}}};er.type=l.Vv.LINE_CHART;var ei=class{constructor(e){this.entity=e}get path(){return this.data?.path??""}calcDistance(e){if(!this.data)return Number.MAX_SAFE_INTEGER;let[n,r]=this.data.points;return d.bR.getDistance(e,function(e,n,r){let i=r.x-n.x,s=r.y-n.y;if(0===i)return{x:n.x,y:e.y};if(0===s)return{x:e.x,y:n.y};let o=Math.max(0,Math.min(1,((e.x-n.x)*i+(e.y-n.y)*s)/(i*i+s*s)));return{x:n.x+o*i,y:n.y+o*s}}(e,n,r))}get bounds(){return this.data?this.data.bbox:new d.M_}get center(){return this.data?.center}update(e){let{fromPos:n,toPos:r}=e,i=this.entity.uiState.shrink,s={x:"bottom"===n.location?0:i,y:"bottom"===n.location?i:0},o={x:"top"===r.location?0:-i,y:"top"===r.location?-i:0},a=[{x:n.x+s.x,y:n.y+s.y},{x:r.x+o.x,y:r.y+o.y}],h=d.M_.createRectangleWithTwoPoints(a[0],a[1]),c=a.map(e=>({x:e.x-h.x+12,y:e.y-h.y+12})),u=`M ${c[0].x} ${c[0].y} L ${c[1].x} ${c[1].y}`;this.data={points:a,path:u,bbox:h,center:(0,l._m)(n,r,h,12)}}};ei.type=l.Vv.STRAIGHT;var es=(0,h.XY)({singleton:!0,onInit:(e,n)=>{e.playground.registerLayer(G,{...n})},onReady:(e,n)=>{let r=e.container.get(l.GH);r.registerContribution(ee).registerContribution(er).registerContribution(ei),n.contributions&&n.contributions.forEach(e=>{r.registerContribution(e)}),n.defaultLineType&&r.switchLineType(n.defaultLineType)}})},82360:function(e,n,r){"use strict";r.d(n,{iS:()=>C,ld:()=>S,rV:()=>_});var i=r(81376),s=r(11812),o=r(67055),a=r(91280),l=r(23011),h=r(32893),c=r(96540),u=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=(e,n,r,i)=>{for(var s,o=i>1?void 0:i?d(n,r):n,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i?s(n,r,o):s(o))||o);return i&&o&&u(n,r,o),o},f=e=>e?.getNodeMeta().isContainer??!1,g=(e,n={x:0,y:0})=>{let r=e.node;if(f(r)){let{point:r}=e;return"input"===e.portType?new o.M_(r.x+n.x,r.y-50+n.y,300,100):new o.M_(r.x-300,r.y-50,300,100)}return r.getData(h.LY).bounds},m=e=>{let{node:n,subsequentNodes:r,fromPort:s,toPort:o,containerNode:a,offset:h,historyService:c,dragService:u}=e;if(!h||!o)return;let d=r.map(e=>{let n=e.getData(i.hZ);return{x:n.position.x,y:n.position.y}});c.pushOperation({type:l.ot.dragNodes,value:{ids:r.map(e=>e.id),value:d.map(e=>({x:e.x+h.x,y:e.y+h.y})),oldValue:d}});let p=g(s),f=g(o,h),m=n.getData(i.hZ),y={x:(p.center.x+f.center.x)/2,y:(p.y+f.y)/2};a&&(y=u.adjustSubNodePosition(n.flowNodeType,a,y)),c.pushOperation({type:l.ot.dragNodes,value:{ids:[n.id],value:[y],oldValue:[{x:m.position.x,y:m.position.y}]}})},y=(e,n)=>{let r=Math.abs(Math.min(e.right,n.right)-Math.max(e.left,n.left)),i=Math.abs(Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top));return o.M_.intersects(e,n)?{x:-r,y:-i}:{x:r,y:i}},O=(e,n)=>void 0!==e&&void 0!==n&&e-n>1e-5,b=(e,n)=>void 0!==e&&void 0!==n&&n-e>1e-5,x=e=>{let{node:n,fromPort:r,toPort:i,padding:s}=e,a=g(r),l=g(i),c=n.getData(h.LY),u=n.getNodeMeta()?.size??{width:c.bounds.width,height:c.bounds.height},d={x:u.width+s.x,y:u.height+s.y},p=y(a,l),f={x:O(p.x,d.x)?0:d.x-p.x,y:O(p.y,d.y)?0:d.y-p.y};if(0===f.x||0===f.y)return;let m={vertical:o.M_.intersects(a,l,"horizontal"),horizontal:o.M_.intersects(a,l,"vertical")},x=0,w=0;return!m.horizontal&&(O(l.center.y,a.center.y)?w=f.y:b(l.center.y,a.center.y)&&(w=-f.y)),!m.vertical&&(O(l.center.x,a.center.x)?x=f.x:b(l.center.x,a.center.x)&&(x=-f.x)),{x:x,y:w}},w=e=>{let{node:n,linesManager:r}=e;if(f(n))return[];let i=n.parent?.blocks??[],s=new Set,o=new Map;r.getAllLines().forEach(e=>{o.has(e.from.id)||o.set(e.from.id,[]),!e.to?.id||f(e.to)||o.get(e.from.id)?.push(e.to.id)});let a=e=>{s.has(e)||(s.add(e),(o.get(e)??[]).forEach(a))};return a(n.id),i.filter(e=>s.has(e.id))},S={adjustNodePosition:e=>{let{nodeType:n,position:r,fromPort:i,toPort:s,containerNode:o,document:a,dragService:l}=e,h=a.getNodeRegistry(n),c=h?.meta?.size,u=r;return u=c?i&&s?{x:r.x,y:r.y-c.height/2}:i&&!s?"bottom"===i.location?{x:r.x,y:r.y}:{x:r.x+c.width/2,y:r.y-c.height/2}:!i&&s?{x:r.x-c.width/2,y:r.y-c.height/2}:r:r,l.adjustSubNodePosition(n,o,u)},buildLine:e=>{let{fromPort:n,node:r,toPort:i,linesManager:s}=e,o=r.getData(a.Yd);if(!o)return;let l=o.inputPorts?.length>0;if(n&&l){let e="bottom"===n.location,i=o.inputPorts.find(n=>!e||"top"===n.location)||o.inputPorts[0];s.createLine({from:n.node.id,fromPort:n.portID,to:r.id,toPort:i.portID})}let h=o.outputPorts?.length>0;if(i&&h){let e=o.outputPorts[0];s.createLine({from:r.id,fromPort:e.portID,to:i.node.id,toPort:i.portID})}},getPortBox:g,getSubsequentNodes:w,getContainerNode:e=>{let{fromPort:n,containerNode:r}=e;if(r)return r;let i=n?.node,s=i?.parent;return f(i)?i:s},rectDistance:y,subNodesAutoOffset:e=>{let{node:n,fromPort:r,toPort:i,linesManager:s,historyService:o,dragService:a,containerNode:l,padding:h={x:100,y:100}}=e,c=x({node:n,fromPort:r,toPort:i,padding:h});m({node:n,subsequentNodes:w({node:i.node,linesManager:s}),fromPort:r,toPort:i,containerNode:l,offset:c,historyService:o,dragService:a})},subPositionOffset:x,updateSubSequentNodesPosition:m,waitNodeRender:async()=>{await (0,a.cb)(20)}},_=class{constructor(){this.toDispose=new o.Vd,this.callNodePanel=async()=>void 0}dispose(){this.toDispose.dispose()}setCallNodePanel(e){this.callNodePanel=e}async call(e){let{panelPosition:n,fromPort:r,enableMultiAdd:i=!1,panelProps:s={},containerNode:o,afterAddNode:a}=e;if(!n||this.playgroundConfig.readonly)return;let l=[];return new Promise(h=>{this.callNodePanel({position:n,enableMultiAdd:i,panelProps:s,containerNode:S.getContainerNode({fromPort:r,containerNode:o}),onSelect:async n=>{let r=await this.addNode(e,n);a?.(r),i?r&&l.push(r):h(r)},onClose:()=>{h(i?l:void 0)}})})}async singleSelectNodePanel(e){return new Promise(n=>{this.callNodePanel({...e,enableMultiAdd:!1,onSelect:async e=>{n(e)},onClose:()=>{n(void 0)}})})}async addNode(e,n){let{panelPosition:r,fromPort:i,toPort:s,canAddNode:o,autoOffsetPadding:a={x:100,y:100},enableBuildLine:l=!1,enableSelectPosition:h=!1,enableAutoOffset:c=!1,enableDragNode:u=!1}=e;if(!r||!n)return;let{nodeType:d,selectEvent:p,nodeJSON:f}=n,g=S.getContainerNode({fromPort:i,containerNode:e.containerNode});if(o&&!o({nodeType:d,containerNode:g}))return;let m=this.playgroundConfig.getPosFromMouseEvent(p),y=e.customPosition?e.customPosition({nodeType:d,selectPosition:m}):S.adjustNodePosition({nodeType:d,position:h?m:r,fromPort:i,toPort:s,containerNode:g,document:this.document,dragService:this.dragService}),O=this.document.createWorkflowNodeByType(d,y,f??{},g?.id);if(O)return c&&i&&s&&S.subNodesAutoOffset({node:O,fromPort:i,toPort:s,padding:a,containerNode:g,historyService:this.historyService,dragService:this.dragService,linesManager:this.linesManager}),(l||u)&&(await S.waitNodeRender(),l&&S.buildLine({fromPort:i,node:O,toPort:s,linesManager:this.linesManager}),u&&(this.selectService.selectNode(O),this.dragService.startDragSelectedNodes(p))),O}};p([(0,s.WQ)(a.Vo)],_.prototype,"document",2),p([(0,s.WQ)(a.Z4)],_.prototype,"dragService",2),p([(0,s.WQ)(a.rm)],_.prototype,"selectService",2),p([(0,s.WQ)(a.GH)],_.prototype,"linesManager",2),p([(0,s.WQ)(i.d0)],_.prototype,"playgroundConfig",2),p([(0,s.WQ)(l.kI)],_.prototype,"historyService",2),_=p([(0,s._G)()],_);var k=class extends i.Wd{constructor(){super(),this.node=o.Si.createDivWithClass("gedit-playground-layer gedit-node-panel-layer"),this.node.style.zIndex="9999",this.renderList=new Map}onReady(){this.service.setCallNodePanel(this.call.bind(this))}onZoom(e){this.node.style.transform=`scale(${e})`}render(){let e=this.options.renderer;return c.createElement(c.Fragment,null,Array.from(this.renderList.keys()).map(n=>{let r=this.renderList.get(n);return c.createElement(e,{key:n,...r})}))}async call(e){let n=(0,a.Ak)(),{onSelect:r,onClose:i,enableMultiAdd:s=!1,panelProps:o={}}=e;return new Promise(a=>{let l=()=>{this.renderList.delete(n),this.render(),a()},h={...e,panelProps:o,onSelect:e=>{r(e),s||l()},onClose:()=>{l(),i()}};this.renderList.set(n,h),this.render()})}};k.type="WorkflowNodePanelLayer",p([(0,s.WQ)(_)],k.prototype,"service",2);var C=(0,i.XY)({onBind({bind:e}){e(_).toSelf().inSingletonScope()},onInit:(e,n)=>{e.playground.registerLayer(k,{renderer:n.renderer})},onDispose:e=>{e.get(_).dispose()}})},62951:function(e,n,r){"use strict";r.d(n,{M:()=>w});var i=r(81376),s=r(11812),o=r(67055),a=r(91280),l=r(32893),h=r(96540),c=Object.defineProperty,u=Object.getOwnPropertyDescriptor,d=(e,n,r,i)=>{for(var s,o=i>1?void 0:i?u(n,r):n,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i?s(n,r,o):s(o))||o);return i&&o&&c(n,r,o),o},p={enableEdgeSnapping:!0,edgeThreshold:7,enableGridSnapping:!1,gridSize:20,enableMultiSnapping:!1,enableOnlyViewportSnapping:!0,edgeColor:"#4E40E5",alignColor:"#4E40E5",edgeLineWidth:2,alignLineWidth:2,alignCrossWidth:16},f=(e,n)=>void 0!==e&&void 0!==n&&1e-5>Math.abs(e-n),g=(e,n)=>void 0!==e&&void 0!==n&&n-e>1e-5,m=(e,n)=>void 0!==e&&void 0!==n&&e-n>1e-5,y=(e,n)=>f(e,n)||g(e,n),O=e=>"number"==typeof e&&!isNaN(e),b=class{constructor(){this.disposers=[],this.snapEmitter=new o.vl,this.onSnap=this.snapEmitter.event,this._disabled=!1}init(e={}){this.options={...p,...e},this.mountListener()}dispose(){this.disposers.forEach(e=>e.dispose())}get disabled(){return this._disabled}disable(){this._disabled||(this._disabled=!0,this.clear())}enable(){this._disabled&&(this._disabled=!1,this.clear())}mountListener(){let e=this.dragService.registerPosAdjuster(e=>{let{selectedNodes:n,position:r}=e,i=!this.options.enableMultiSnapping&&1!==n.length;return this._disabled||!this.options.enableEdgeSnapping||i?{x:0,y:0}:this.snapping({targetNodes:n,position:r})}),n=this.dragService.onNodesDrag(e=>{"onDragEnd"===e.type&&!this._disabled&&(this.options.enableGridSnapping&&this.gridSnapping({targetNodes:e.nodes,gridSize:this.options.gridSize}),this.options.enableEdgeSnapping&&this.clear())});this.disposers.push(e,n)}snapping(e){let{targetNodes:n,position:r}=e,i=this.getBounds(n),s=new o.M_(r.x,r.y,i.width,i.height),a=this.getSnapNodeRects({targetNodes:n,targetRect:s}),{alignOffset:l,alignRects:h,alignSpacing:c}=this.calcAlignOffset({targetRect:s,alignThreshold:this.options.edgeThreshold,snapNodeRects:a}),{snapOffset:u,snapEdgeLines:d}=this.calcSnapOffset({targetRect:s,edgeThreshold:this.options.edgeThreshold,snapNodeRects:a}),p={x:u.x||l.x,y:u.y||l.y},f=new o.M_(r.x+p.x,r.y+p.y,s.width,s.height);return this.snapEmitter.fire({snapRect:f,snapEdgeLines:d,alignRects:h,alignSpacing:c}),p}calcSnapOffset(e){let{snapNodeRects:n,edgeThreshold:r,targetRect:i}=e,s=this.getSnapLines({snapNodeRects:n}),o=s.horizontal.find(e=>y(Math.abs(e.y-i.top),r)),a=s.horizontal.find(e=>y(Math.abs(e.y-i.bottom),r)),l=s.vertical.find(e=>y(Math.abs(e.x-i.left),r)),h=s.vertical.find(e=>y(Math.abs(e.x-i.right),r)),c=s.midHorizontal.find(e=>y(Math.abs(e.y-i.center.y),r)),u=s.midVertical.find(e=>y(Math.abs(e.x-i.center.x),r)),d=o?.y,p=O(a?.y)?a.y-i.height:void 0,g=l?.x,m=O(h?.x)?h.x-i.width:void 0,b=O(c?.y)?c.y-i.height/2:void 0,x=O(u?.x)?u.x-i.width/2:void 0,w={x:x??g??m??i.x,y:b??d??p??i.y};return{snapOffset:{x:w.x-i.x,y:w.y-i.y},snapEdgeLines:{top:f(d,w.y)?o:void 0,bottom:f(p,w.y)?a:void 0,left:f(g,w.x)?l:void 0,right:f(m,w.x)?h:void 0,midVertical:f(x,w.x)?u:void 0,midHorizontal:f(b,w.y)?c:void 0}}}gridSnapping(e){let{gridSize:n,targetNodes:r}=e,i=this.getBounds(r),s=e=>Math.round(e/n)*n,o={x:s(i.x),y:s(i.y)},a={x:o.x-i.x,y:o.y-i.y};r.forEach(e=>this.updateNodePositionWithOffset({node:e,offset:a}))}clear(){this.snapEmitter.fire({snapEdgeLines:{},snapRect:o.M_.EMPTY,alignRects:{top:[],bottom:[],left:[],right:[]},alignSpacing:{}})}getSnapLines(e){let{snapNodeRects:n}=e,r=[],i=[],s=[],o=[];return n.forEach(e=>{let n=e.rect,a=n.center,l={y:n.top,sourceNodeId:e.id},h={y:n.bottom,sourceNodeId:e.id},c={x:n.left,sourceNodeId:e.id},u={x:n.right,sourceNodeId:e.id},d={y:a.y,sourceNodeId:e.id},p={x:a.x,sourceNodeId:e.id};r.push(l,h),i.push(c,u),s.push(d),o.push(p)}),{horizontal:r,vertical:i,midHorizontal:s,midVertical:o}}getAvailableNodes(e){let{targetNodes:n,targetRect:r}=e,i=r.center,s=n[0].parent?.id??this.document.root.id,o=n.map(e=>e.id);return o.push(l.y.ROOT),this.nodes.filter(e=>e.parent?.id===s).filter(e=>!o.includes(e.id)).sort((e,n)=>{let r=e.getData(l.LY).bounds.center,s=n.getData(l.LY).bounds.center;return Math.abs(r.x-i.x)+Math.abs(r.y-i.y)-(Math.abs(s.x-i.x)+Math.abs(s.y-i.y))})}viewRect(){let{width:e,height:n,scrollX:r,scrollY:i,zoom:s}=this.playgroundConfig.config;return new o.M_(r/s,i/s,e/s,n/s)}getSnapNodeRects(e){let n=this.getAvailableNodes(e),r=this.viewRect();return n.map(e=>{let n={id:e.id,rect:e.getData(l.LY).bounds,entity:e};if(!this.options.enableOnlyViewportSnapping||e.parent?.flowNodeType!==l.y.ROOT||o.M_.intersects(r,n.rect))return n}).filter(Boolean)}get nodes(){return this.entityManager.getEntities(a.Ff)}getBounds(e){return 0===e.length?o.M_.EMPTY:o.M_.enlarge(e.map(e=>e.getData(l.LY).bounds))}updateNodePositionWithOffset(e){let{node:n,offset:r}=e,s=n.getData(i.hZ),o={x:s.position.x+r.x,y:s.position.y+r.y};s.update({position:o}),this.document.layout.updateAffectedTransform(n)}calcAlignOffset(e){let n,r,i,s,o,a,{snapNodeRects:l,targetRect:h,alignThreshold:c}=e,u=this.getAlignRects({targetRect:h,snapNodeRects:l}),d=this.calcAlignSpacing({targetRect:h,alignRects:u});if(d.top){let e=u.top[0].rect.bottom+d.top;y(Math.abs(h.top-e),c)?n=e:d.top=void 0}if(d.bottom){let e=u.bottom[0].rect.top-d.bottom;g(Math.abs(h.bottom-e),c)?r=e-h.height:d.bottom=void 0}if(d.left){let e=u.left[0].rect.right+d.left;y(Math.abs(h.left-e),c)?i=e:d.left=void 0}if(d.right){let e=u.right[0].rect.left-d.right;y(Math.abs(h.right-e),c)?s=e-h.width:d.right=void 0}if(d.midHorizontal){let e=u.left[0].rect.right+d.midHorizontal;y(Math.abs(h.left-e),c)?a=e:d.midHorizontal=void 0}if(d.midVertical){let e=u.top[0].rect.bottom+d.midVertical;y(Math.abs(h.top-e),c)?o=e:d.midVertical=void 0}let p={x:a??i??s??h.x,y:o??n??r??h.y};return{alignOffset:{x:p.x-h.x,y:p.y-h.y},alignRects:u,alignSpacing:d}}calcAlignSpacing(e){let{targetRect:n,alignRects:r}=e,i=this.getDirectionAlignSpacing({rects:r.top,isHorizontal:!1}),s=this.getDirectionAlignSpacing({rects:r.bottom,isHorizontal:!1}),o=this.getDirectionAlignSpacing({rects:r.left,isHorizontal:!0}),a=this.getDirectionAlignSpacing({rects:r.right,isHorizontal:!0});return{top:i,bottom:s,left:o,right:a,midHorizontal:this.getMidAlignSpacing({rectA:r.left[0]?.rect,rectB:r.right[0]?.rect,targetRect:n,isHorizontal:!0}),midVertical:this.getMidAlignSpacing({rectA:r.top[0]?.rect,rectB:r.bottom[0]?.rect,targetRect:n,isHorizontal:!1})}}getAlignRects(e){let{targetRect:n,snapNodeRects:r}=e,i=[],s=[],o=[],a=[];return r.forEach(e=>{let r=e.rect,{isVerticalIntersection:l,isHorizontalIntersection:h,isIntersection:c}=this.intersection(r,n);!c&&(l?m(r.center.y,n.center.y)?s.push({rect:r,sourceNodeId:e.id}):i.push({rect:r,sourceNodeId:e.id}):h&&(m(r.center.x,n.center.x)?a.push({rect:r,sourceNodeId:e.id}):o.push({rect:r,sourceNodeId:e.id})))}),{top:i,bottom:s,left:o,right:a}}getMidAlignSpacing(e){let{rectA:n,rectB:r,targetRect:i,isHorizontal:s}=e;if(!n||!r)return;let{isVerticalIntersection:o,isHorizontalIntersection:a,isIntersection:l}=this.intersection(n,r);if(!l){if(s&&a&&!o)return(Math.min(Math.abs(n.left-r.right),Math.abs(n.right-r.left))-i.width)/2;else if(!s&&o&&!a)return(Math.min(Math.abs(n.top-r.bottom),Math.abs(n.bottom-r.top))-i.height)/2}}getDirectionAlignSpacing(e){let{rects:n,isHorizontal:r}=e;if(n.length<2)return;let i=n[0].rect,s=n[1].rect,{isVerticalIntersection:o,isHorizontalIntersection:a,isIntersection:l}=this.intersection(i,s);if(!l){if(r&&a&&!o)return Math.min(Math.abs(i.left-s.right),Math.abs(i.right-s.left));else if(!r&&o&&!a)return Math.min(Math.abs(i.top-s.bottom),Math.abs(i.bottom-s.top))}}intersection(e,n){let r=g(e.left,n.right)&&m(e.right,n.left),i=g(e.top,n.bottom)&&m(e.bottom,n.top);return{isHorizontalIntersection:i,isVerticalIntersection:r,isIntersection:i&&r}}};d([(0,s.WQ)(a.Vo)],b.prototype,"document",2),d([(0,s.WQ)(i.Zy)],b.prototype,"entityManager",2),d([(0,s.WQ)(a.Z4)],b.prototype,"dragService",2),d([(0,s.WQ)(i.d0)],b.prototype,"playgroundConfig",2),b=d([(0,s._G)()],b);var x=class extends i.Wd{constructor(){super(...arguments),this.node=o.Si.createDivWithClass("gedit-playground-layer gedit-flow-snap-layer"),this.edgeLines=[],this.alignLines=[]}onReady(){this.node.style.zIndex="9999",this.toDispose.pushAll([this.service.onSnap(e=>{this.edgeLines=this.calcEdgeLines(e),this.alignLines=this.calcAlignLines(e),this.render()})])}render(){return h.createElement(h.Fragment,null,this.alignLines.length>0&&h.createElement("div",{className:"workflow-snap-align-lines"},this.renderAlignLines()),this.edgeLines.length>0&&h.createElement("div",{className:"workflow-snap-edge-lines"},this.renderEdgeLines()))}onZoom(e){this.node.style.transform=`scale(${e})`}renderEdgeLines(){return this.edgeLines.map(e=>{let{className:n,sourceNode:r,top:i,left:s,width:o,height:a,dashed:l}=e,c=`${n}-${r}-${i}-${s}-${o}-${a}`,u=o<a,d=`${this.options.edgeLineWidth}px ${l?"dashed":"solid"} ${this.options.edgeColor}`;return h.createElement("div",{className:`workflow-snap-edge-line ${n}`,"data-testid":"sdk.workflow.canvas.snap.edgeLine","data-snap-line-id":c,"data-snap-line-source-node":r,key:c,style:{top:i,left:s,width:o,height:a,position:"absolute",borderLeft:u?d:"none",borderTop:u?"none":d}})})}renderAlignLines(){return this.alignLines.map(e=>{let n=`${e.className}-${e.sourceNode}-${e.top}-${e.left}-${e.width}-${e.height}`,r=m(e.width,e.height),i=this.options.alignLineWidth,s=this.options.alignCrossWidth,o=r?e.top-i/2:e.top,a=r?e.left:e.left-i/2;return h.createElement("div",{className:`workflow-snap-align-line ${e.className}`,"data-testid":"sdk.workflow.canvas.snap.alignLine","data-snap-line-id":n,"data-snap-line-source-node":e.sourceNode,key:n,style:{position:"absolute"}},h.createElement("div",{style:{position:"absolute",top:o,left:a,width:r?e.width:i,height:r?i:e.height,backgroundColor:this.options.alignColor}}),h.createElement("div",{style:{position:"absolute",top:r?o-(s-i)/2:o,left:r?a:a-(s-i)/2,width:r?i:s,height:r?s:i,backgroundColor:this.options.alignColor}}),h.createElement("div",{style:{position:"absolute",top:r?o-(s-i)/2:o+e.height-i,left:r?a+e.width-i:a-(s-i)/2,width:r?i:s,height:r?s:i,backgroundColor:this.options.alignColor}}))})}calcEdgeLines(e){let{alignRects:n,snapRect:r,snapEdgeLines:i}=e,s=[],o=this.directionFullAlign({alignRects:n.top,targetRect:r,isVertical:!0}),a=this.directionFullAlign({alignRects:n.bottom,targetRect:r,isVertical:!0}),h=this.directionFullAlign({alignRects:n.left,targetRect:r,isVertical:!1}),c=this.directionFullAlign({alignRects:n.right,targetRect:r,isVertical:!1});if(o){let e=o.rect.top,n=a?r.bottom-r.height/2-e:r.bottom-e,i={top:e,width:this.options.edgeLineWidth,height:n};s.push({className:"edge-full-top-left",sourceNode:o.sourceNodeId,left:r.left,...i}),s.push({className:"edge-full-top-right",sourceNode:o.sourceNodeId,left:r.right,...i}),s.push({className:"edge-full-top-mid",sourceNode:o.sourceNodeId,left:r.left+r.width/2,dashed:!0,...i})}if(a){let e=o?r.top+r.height/2:r.top,n=a.rect.bottom-e,i={top:e,width:this.options.edgeLineWidth,height:n};s.push({className:"edge-full-bottom-left",sourceNode:a.sourceNodeId,left:r.left,...i}),s.push({className:"edge-full-bottom-right",sourceNode:a.sourceNodeId,left:r.right,...i}),s.push({className:"edge-full-bottom-mid",sourceNode:a.sourceNodeId,left:r.left+r.width/2,dashed:!0,...i})}if(h){let e=h.rect.left,n=c?r.right-r.width/2-e:r.right-e,i={left:e,width:n,height:this.options.edgeLineWidth};s.push({className:"edge-full-left-top",sourceNode:h.sourceNodeId,top:r.top,...i}),s.push({className:"edge-full-left-bottom",sourceNode:h.sourceNodeId,top:r.bottom,...i}),s.push({className:"edge-full-left-mid",sourceNode:h.sourceNodeId,top:r.top+r.height/2,dashed:!0,...i})}if(c){let e=h?r.left+r.width/2:r.left,n=c.rect.right-e,i={left:e,width:n,height:this.options.edgeLineWidth};s.push({className:"edge-full-right-top",sourceNode:c.sourceNodeId,top:r.top,...i}),s.push({className:"edge-full-right-bottom",sourceNode:c.sourceNodeId,top:r.bottom,...i}),s.push({className:"edge-full-right-mid",sourceNode:c.sourceNodeId,top:r.top+r.height/2,dashed:!0,...i})}let u=Object.entries(i).map(([e,n])=>{if(!n)return;let i=this.document.getNode(n.sourceNodeId);if(!i)return;let s=i.getData(l.LY).bounds;if(O(n.x)){let i=Math.min(s.top,r.top),l=Math.max(s.bottom,r.bottom),h=n.x,c=this.options.edgeLineWidth,u={className:`edge-snapped-${e}`,sourceNode:n.sourceNodeId,top:i,left:h,width:c,height:l-i,dashed:"midVertical"===e},d=i===s.top;if(d&&o||!d&&a)return;return u}if(O(n.y)){let i=Math.min(s.left,r.left),o=Math.max(s.right,r.right),a=n.y,l=this.options.edgeLineWidth,u={className:`edge-snapped-${e}`,sourceNode:n.sourceNodeId,top:a,left:i,width:o-i,height:l,dashed:"midHorizontal"===e},d=i===s.left;if(d&&h||!d&&c)return;return u}}).filter(Boolean);return s.push(...u),s}directionFullAlign(e){let{alignRects:n,targetRect:r,isVertical:i}=e,s=-1;for(let e=0;e<n.length;e++){let o=n[e],a=n[e-1]?.rect??r;if(!this.rectFullAlign(o.rect,a,i))break;s=e}return n[s]}rectFullAlign(e,n,r){return r?f(e.left,n.left)&&f(e.right,n.right):f(e.top,n.top)&&f(e.bottom,n.bottom)}calcAlignLines(e){let{alignRects:n,alignSpacing:r,snapRect:i}=e,s=this.calcDirectionAlignLines({alignRects:n.top,targetRect:i,isVertical:!0,spacing:r.midVertical??r.top}),o=this.calcDirectionAlignLines({alignRects:n.bottom,targetRect:i,isVertical:!0,spacing:r.midVertical??r.bottom});return[...s,...o,...this.calcDirectionAlignLines({alignRects:n.left,targetRect:i,isVertical:!1,spacing:r.midHorizontal??r.left}),...this.calcDirectionAlignLines({alignRects:n.right,targetRect:i,isVertical:!1,spacing:r.midHorizontal??r.right})]}calcDirectionAlignLines(e){let{alignRects:n,targetRect:r,isVertical:i,spacing:s}=e,o=[];if(!s)return o;for(let e=0;e<n.length;e++){let a=n[e],l=a.rect,h=n[e-1]?.rect??r;if(!f(i?Math.min(Math.abs(h.top-l.bottom),Math.abs(h.bottom-l.top)):Math.min(Math.abs(h.left-l.right),Math.abs(h.right-l.left)),s))break;if(i){let e=this.calcHorizontalIntersectionCenter(l,r);o.push({className:"align-vertical",sourceNode:a.sourceNodeId,top:Math.min(l.bottom,h.bottom),left:e,width:1,height:s})}else{let e=this.calcVerticalIntersectionCenter(l,r);o.push({className:"align-horizontal",sourceNode:a.sourceNodeId,top:e,left:Math.min(l.right,h.right),width:s,height:1})}}return o}calcVerticalIntersectionCenter(e,n){return(Math.max(e.top,n.top)+Math.min(e.bottom,n.bottom))/2}calcHorizontalIntersectionCenter(e,n){return(Math.max(e.left,n.left)+Math.min(e.right,n.right))/2}};x.type="WorkflowSnapLayer",d([(0,s.WQ)(a.Vo)],x.prototype,"document",2),d([(0,s.WQ)(b)],x.prototype,"service",2),x=d([(0,s._G)()],x);var w=(0,i.XY)({onBind({bind:e}){e(b).toSelf().inSingletonScope()},onInit(e,n){let r={...p,...n};e.playground.registerLayer(x,r),e.get(b).init(r)},onDispose(e){e.get(b).dispose()}})},63427:function(e,n,r){"use strict";r.r(n),r.d(n,{StackingBaseIndex:()=>x,StackingComputing:()=>y,StackingConfig:()=>S,StackingContextManager:()=>_,StackingItem:()=>O,StackingType:()=>b,createFreeStackPlugin:()=>k,layersComputing:()=>A});var i,s,o,a,l=r(81376),h=r(2543),c=r(11812),u=r(67055),d=r(91280),p=r(32893),f=Object.defineProperty,g=Object.getOwnPropertyDescriptor,m=(e,n,r,i)=>{for(var s,o=i>1?void 0:i?g(n,r):n,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i?s(n,r,o):s(o))||o);return i&&o&&f(n,r,o),o},y=class{compute(e){this.clearCache();let{root:n,nodes:r,context:i}=e;return this.context=i,this.nodeIndexes=this.computeNodeIndexesMap(r),this.topLevel=this.computeTopLevel(r),this.maxLevel=2*this.topLevel,this.layerHandler(n.blocks),{nodeLevel:this.nodeLevel,lineLevel:this.lineLevel,topLevel:this.topLevel,maxLevel:this.maxLevel}}clearCache(){this.currentLevel=0,this.topLevel=0,this.maxLevel=0,this.nodeIndexes=new Map,this.nodeLevel=new Map,this.lineLevel=new Map}computeNodeIndexesMap(e){let n=new Map;return e.forEach((e,r)=>{n.set(e.id,r)}),n}computeTopLevel(e){let n=e.filter(e=>e.id!==p.y.ROOT),r=n.reduce((e,n)=>n.blocks.length>0?e+1:e,0);return n.length+r+1}layerHandler(e,n=!1){let r=this.sortNodes(e);this.getNodesAllLines(r).forEach(e=>{e.isDrawing||this.context.hoveredEntityID===e.id||this.context.selectedIDs.includes(e.id)?this.lineLevel.set(e.id,this.maxLevel):this.lineLevel.set(e.id,this.getLevel(n))}),this.levelIncrease(),r.forEach(e=>{let r=this.context.selectedIDs.includes(e.id);r?this.nodeLevel.set(e.id,this.topLevel):this.nodeLevel.set(e.id,this.getLevel(n)),this.levelIncrease(),e.blocks.length>0&&this.layerHandler(e.blocks,n||r)})}sortNodes(e){return e.sort((e,n)=>{let r=this.nodeIndexes.get(e.id),i=this.nodeIndexes.get(n.id);return void 0===r||void 0===i?0:r-i})}getNodesAllLines(e){return e.map(e=>{let n=e.getData(d.tB);return[...n.outputLines.filter(Boolean),...n.inputLines.filter(Boolean)]}).flat().filter(e=>void 0===this.lineLevel.get(e.id)||this.isHigherFirstLine(e))}isHigherFirstLine(e){return e.to?.parent===e.from||e.from?.parent===e.to}getLevel(e){return e?this.topLevel+this.currentLevel:this.currentLevel}levelIncrease(){this.currentLevel+=1}},O=((i=O||{}).Line="line",i.Node="node",i),b=((s=b||{}).Line="line",s.Node="node",s),x={line:0,node:1},w=Object.keys(b).length,S={startIndex:8,allowLevel:2,levelIndexStep:w,maxLevel:4,maxIndex:8+4*w},_=class{constructor(){this.node=u.Si.createDivWithClass("gedit-playground-layer gedit-flow-render-layer"),this.disposers=[],this.compute=(0,h.debounce)(this._compute,10)}init(){this.pipelineRenderer.node.appendChild(this.node),this.mountListener()}ready(){this.compute()}dispose(){this.disposers.forEach(e=>e.dispose())}_compute(){let e=this.context,{nodeLevel:n,lineLevel:r}=new y().compute({root:this.document.root,nodes:this.nodes,context:e});this.nodes.forEach(e=>{let r=n.get(e.id),i=e.getData(p.he),s=i.node;if(s.style.position="absolute",void 0===r){i.stackIndex=0,s.style.zIndex="auto";return}i.stackIndex=r;let o=S.startIndex+r;s.style.zIndex=String(o)}),this.lines.forEach(e=>{let n=r.get(e.id),i=e.node;if(i.style.position="absolute",void 0===n){e.stackIndex=0,i.style.zIndex="auto";return}e.stackIndex=n;let s=S.startIndex+n;i.style.zIndex=String(s)})}get nodes(){return this.entityManager.getEntities(d.Ff)}get lines(){return this.entityManager.getEntities(d.fv)}get context(){return{hoveredEntity:this.hoverService.hoveredNode,hoveredEntityID:this.hoverService.hoveredNode?.id,selectedEntities:this.selectService.selection,selectedIDs:this.selectService.selection.map(e=>e.id)}}mountListener(){let e=this.onEntityChange(),n=this.onZoom(),r=this.onHover(),i=this.onSelect();this.disposers=[e,n,r,i]}onZoom(){return this.pipelineRegistry.onZoom(e=>{this.node.style.transform=`scale(${e})`})}onHover(){return this.hoverService.onHoveredChange(()=>{this.compute()})}onEntityChange(){return this.entityManager.onEntityChange(()=>{this.compute()})}onSelect(){return this.selectService.onSelectionChanged(()=>{this.compute()})}};m([(0,c.WQ)(d.Vo)],_.prototype,"document",2),m([(0,c.WQ)(l.Zy)],_.prototype,"entityManager",2),m([(0,c.WQ)(l.q_)],_.prototype,"pipelineRenderer",2),m([(0,c.WQ)(l.iE)],_.prototype,"pipelineRegistry",2),m([(0,c.WQ)(d.Be)],_.prototype,"hoverService",2),m([(0,c.WQ)(d.rm)],_.prototype,"selectService",2),_=m([(0,c._G)()],_);var k=(0,l.XY)({onBind({bind:e}){e(_).toSelf().inSingletonScope()},onInit(e){e.get(_).init()},onReady(e){e.get(_).ready()},onDispose(e){e.get(_).dispose()}}),C=o||(o={});C.compute=(e,n)=>{let r=E(e,n),i=T(e);i.style.position="absolute",i.style.zIndex=(0,C.zIndexStringify)(r)},C.stackingIndex=(e,n)=>{if(n<1)return;let r=x[e];return S.startIndex+S.levelIndexStep*(n-1)+r},C.nodeStackingLevel=(e,n,r=!1)=>{let i=[],s=e;for(;s;)i.push(s),s=s.parent;let o=i.reverse(),a=o.length-1,l=o.findIndex(e=>!!n.selectedIDs.includes(e.id)),h=S.allowLevel+(o.length-l);return r||-1===l?a:h},C.zIndexStringify=e=>void 0===e?"auto":e.toString();let E=(e,n)=>{let r=(0,C.nodeStackingLevel)(e,n);return(0,C.stackingIndex)("node",r)},T=e=>e.getData(p.he).node;(a||(a={})).compute=(e,n)=>{let r=P(e,n),i=e.node;i.style.position="absolute",i.style.zIndex=o.zIndexStringify(r)};let P=(e,n)=>{let r=((e,n)=>{if(e.isDrawing||n.hoveredEntityID===e.id||n.selectedIDs.includes(e.id))return S.maxLevel+1;let r=o.nodeStackingLevel(e.from,n,!0);return e.to?Math.min(r,o.nodeStackingLevel(e.to,n,!0)):r})(e,n);return o.stackingIndex("line",r)};var A=e=>{let{nodes:n,lines:r,context:i}=e;n.forEach(e=>{o.compute(e,i)}),r.forEach(e=>{a.compute(e,i)})}},84808:function(e,n,r){"use strict";r.d(n,{Id:()=>d,Kn:()=>S,kI:()=>w});var i=r(11812),s=r(67055),o=r(36833),a=r(2543),l=r(81376),h=Object.defineProperty,c=Object.getOwnPropertyDescriptor,u=(e,n,r,i)=>{for(var s,o=i>1?void 0:i?c(n,r):n,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i?s(n,r,o):s(o))||o);return i&&o&&h(n,r,o),o},d=Symbol("OperationContribution"),p=class{constructor(){this._operationMetas=new Map,this.contributions=[]}init(){for(let e of this.contributions)e.registerOperationMeta?.(this)}registerOperationMeta(e){return this._operationMetas.has(e.type)?(console.warn(`A operation meta ${e.type} is already registered.`),s.jG.NULL):new s.Vd(this._doRegisterOperationMetaMeta(e))}getOperationMeta(e){return this._operationMetas.get(e)}_doRegisterOperationMetaMeta(e){return this._operationMetas.set(e.type,e),{dispose:()=>{this._operationMetas.delete(e.type)}}}};u([(0,i.tt)(d),(0,i.lq)()],p.prototype,"contributions",2),u([(0,i.kr)()],p.prototype,"init",1),p=u([(0,i._G)()],p);var f=class{};f=u([(0,i._G)()],f);var g=class{constructor(){this.generateId=()=>(0,o.Ak)(),this.getSnapshot=()=>""}};g=u([(0,i._G)()],g);var m=class{constructor(){this.applyEmitter=new s.vl,this.onApply=this.applyEmitter.event,this._toDispose=new s.Vd}init(){this._toDispose.push(this.applyEmitter)}applyOperation(e,n){let r,i=this.operationRegistry.getOperationMeta(e.type);if(!i)throw Error(`Operation meta ${e.type} has not registered.`);return n?.noApply||(r=i.apply(e,this.context.source)),this.applyEmitter.fire(e),r}getOperationLabel(e){let n=this.operationRegistry.getOperationMeta(e.type);if(n&&n.getLabel)return n.getLabel(e,this.context.source)}getOperationDescription(e){let n=this.operationRegistry.getOperationMeta(e.type);if(n&&n.getDescription)return n.getDescription(e,this.context.source)}inverseOperations(e){return e.map(e=>this.inverseOperation(e)).reverse()}inverseOperation(e){let n=this.operationRegistry.getOperationMeta(e.type);if(!n)throw Error(`Operation meta ${e.type} has not registered.`);return n.inverse(e)}dispose(){this._toDispose.dispose()}};u([(0,i.WQ)(p)],m.prototype,"operationRegistry",2),u([(0,i.WQ)(f)],m.prototype,"context",2),u([(0,i.WQ)(g)],m.prototype,"config",2),u([(0,i.kr)()],m.prototype,"init",1),m=u([(0,i._G)()],m);var y=class{constructor(){this._undoing=!1,this._redoing=!1,this._limit=100,this.onChangeEmitter=new s.vl,this.onChange=this.onChangeEmitter.event,this._toDispose=new s.Vd,this._undoStack=[],this._redoStack=[],this._toDispose.push(this.onChangeEmitter)}setLimit(e){this._limit=e}pushElement(e){this._redoStack=[],this._stackPush(this._undoStack,e),this._toDispose.push(e),this._emitChange("push",e)}getUndoStack(){return this._undoStack}getRedoStack(){return this._redoStack}getLastElement(){return this._undoStack[this._undoStack.length-1]}async undo(){if(!this.canUndo()||this._undoing)return;this._undoing=!0;let e=this._undoStack.pop();try{await e.undo()}finally{this._stackPush(this._redoStack,e),this._emitChange("undo",e),this._undoing=!1}}async redo(){if(!this.canRedo()||this._redoing)return;this._redoing=!0;let e=this._redoStack.pop();try{await e.redo()}finally{this._stackPush(this._undoStack,e),this._emitChange("redo",e),this._redoing=!1}}canUndo(){return this._undoStack.length>0}canRedo(){return this._redoStack.length>0}canPush(){return!this._redoing&&!this._undoing}clear(){this.clearRedoStack(),this.clearUndoStack(),this._emitChange("clear")}clearRedoStack(){this._redoStack.forEach(e=>{e.dispose()}),this._redoStack=[]}clearUndoStack(){this._undoStack.forEach(e=>{e.dispose()}),this._undoStack=[]}dispose(){this.clear(),this._toDispose.dispose()}_stackPush(e,n){e.push(n),e.length>this._limit&&e.shift()}_emitChange(e,n){n?this.onChangeEmitter.fire({type:e,element:n}):this.onChangeEmitter.fire({type:e})}};y=u([(0,i._G)()],y);var O=class{constructor(e,n=[]){this._toDispose=new s.Vd,this._timestamp=Date.now(),this._operationService=e,this._operations=n.map(e=>this._operation(e)),this._id=e.config.generateId()}get id(){return this._id}getTimestamp(){return this._timestamp}pushOperation(e){let n=this._operation(e);return this._operations.push(n),n}getOperations(){return this._operations}getChangeOperations(e){return"undo"===e?this._operationService.inverseOperations(this._operations):this._operations}getFirstOperation(){return this._operations[0]}getLastOperation(){return this._operations[this._operations.length-1]}async undo(){for(let e of this._operationService.inverseOperations(this._operations))await this._apply(e)}async redo(){for(let e of this._operations)await this._apply(e)}revert(e){let n=this._operations;for(let r of("undo"!==e&&(n=this._operations.map(e=>this._inverse(e)).reverse()),n))this._apply(r)}_inverse(e){return this._operationService.inverseOperation(e)}async _apply(e){await this._operationService.applyOperation(e)}_operation(e){return{...e,value:(0,a.cloneDeep)(e.value),id:this._operationService.config.generateId()}}dispose(){this._toDispose.dispose()}},b=class{constructor(){this._items=[],this.onChangeEmitter=new s.vl,this.onChange=this.onChangeEmitter.event,this._toDispose=new s.Vd,this.limit=100,this._toDispose.push(this.onChangeEmitter)}get items(){return this._items}add(e,n){let r=this._getHistoryItem(e,n);return this._items.unshift(r),this._items.length>this.limit&&this._items.pop(),this.onChangeEmitter.fire({type:"add",value:r,service:e}),r}findById(e){return this._items.find(n=>n.id===e)}changeByIndex(e,n,r){let i=this._getHistoryItem(n,r);this._items[e]=i,this.onChangeEmitter.fire({type:"update",value:i,service:n})}addOperation(e,n,r){let i=this._items.find(e=>e.id===n);if(!i)return void console.warn("no history item found");let s=this._getHistoryOperation(e,r);i.operations.push(s),this.onChangeEmitter.fire({type:"add_operation",value:{historyItem:i,operation:s},service:e})}updateOperation(e,n,r){let i=this._items.find(e=>e.id===n);if(!i)return void console.warn("no history item found");let s=i.operations.findIndex(e=>e.id==e.id);if(s<0)return void console.warn("no operation found");let o=this._getHistoryOperation(e,r);i.operations.splice(s,1,o),this.onChangeEmitter.fire({type:"update_operation",value:{historyItem:i,operation:o},service:e})}clear(){this._items=[]}dispose(){this._items=[],this._toDispose.dispose()}_getHistoryItem(e,n){return{...n,uri:e.context.uri,time:b.dateFormat(n.timestamp),operations:n.operations.map(r=>this._getHistoryOperation(e,r,"push"!==n.type))}}_getHistoryOperation(e,n,r=!1){let i;if(r)i=this.historyConfig.generateId();else{let e=n.id;if(!e)throw Error("no operation id found");i=e}return{...(0,a.cloneDeep)(n),id:i,label:e.operationService.getOperationLabel(n),description:e.operationService.getOperationDescription(n),timestamp:Date.now()}}static dateFormat(e){return new Date(e).toLocaleString()}};u([(0,i.WQ)(g)],b.prototype,"historyConfig",2),b=u([(0,i._G)()],b);var x=class{constructor(){this._historyServices=new Map,this._toDispose=new s.Vd}registerHistoryService(e){let n=new s.Vd;n.pushAll([e.undoRedoService.onChange(n=>{if("clear"===n.type)return;let{type:r,element:i}=n,s=i.getChangeOperations(r),o={id:"push"===r?i.id:this.historyConfig.generateId(),type:r,uri:e.context.uri,operations:s,timestamp:Date.now()};this.historyStack.add(e,o)}),e.onMerge(n=>{this._handleMerge(e,n)})]),this._historyServices.set(e,n),this._toDispose.push(e.onWillDispose(()=>{this.unregisterHistoryService(e)}))}unregisterHistoryService(e){let n=this._historyServices.get(e);n&&(n.dispose(),this._historyServices.delete(e))}getHistoryServiceByURI(e){for(let n of this._historyServices.keys())if(n.context.uri===e)return n}getFirstHistoryService(){for(let e of this._historyServices.keys())return e}dispose(){this._toDispose.dispose(),this.historyStack.dispose(),this._historyServices.forEach(e=>e.dispose()),this._historyServices.clear()}_handleMerge(e,n){let{element:r,operation:i}=n.value;if(this.historyStack.findById(r.id)){if(!i.id)return void console.warn("no operation id found");"UPDATE"===n.type&&this.historyStack.updateOperation(e,r.id,i),"ADD"===n.type&&this.historyStack.addOperation(e,r.id,i)}}};u([(0,i.WQ)(b)],x.prototype,"historyStack",2),u([(0,i.WQ)(g)],x.prototype,"historyConfig",2),x=u([(0,i._G)()],x);var w=class{constructor(){this._toDispose=new s.Vd,this._transacting=!1,this._transactOperation=null,this._locked=!1,this._willDisposeEmitter=new s.vl,this._mergeEmitter=new s.vl,this.onWillDispose=this._willDisposeEmitter.event,this.onMerge=this._mergeEmitter.event}get onApply(){return this.operationService.onApply}init(){this._toDispose.push(this._willDisposeEmitter),this._toDispose.push(this._mergeEmitter)}start(){this._locked=!1}stop(){this._locked=!0}limit(e){this.undoRedoService.setLimit(e)}startTransaction(){if(this._transacting)return;this._transacting=!0;let e=new O(this.operationService,[]);this._transactOperation=e}endTransaction(){let e=this._transactOperation;e&&(0!==e.getOperations().length&&this._pushStackOperation(e),this._transactOperation=null,this._transacting=!1)}transact(e){this._transacting||(this.startTransaction(),e(),this.endTransaction())}pushOperation(e,n){if(!this._canPush())return;let r=this._transactOperation||this.undoRedoService.getLastElement(),i=this.operationRegistry.getOperationMeta(e.type);if(!i)throw Error(`Operation meta ${e.type} has not registered.`);if(i.shouldSave&&!i.shouldSave(e))return i.apply(e,this.context.source);let s=this.operationService.applyOperation(e,{noApply:n?.noApply});i.getURI&&!e.uri&&(e.uri=i.getURI(e,this.context.source));let o=this._shouldMerge(e,r,i);if(o)if("object"==typeof o){let e=r.getLastOperation();e.value=o.value,this._mergeEmitter.fire({type:"UPDATE",value:{element:r,operation:e,value:o.value}})}else{let n=r.pushOperation(e);this._mergeEmitter.fire({type:"ADD",value:{element:r,operation:n}})}else{let n=new O(this.operationService,[e]);this._pushStackOperation(n)}return s}getHistoryOperations(){return this.historyManager.historyStack.items.reverse().map(e=>e.operations.map(e=>({...(0,a.pick)(e,["type","value"]),label:e.label||e.type}))).flat()}async undo(){await this.undoRedoService.undo()}async redo(){await this.undoRedoService.redo()}canUndo(){return this.undoRedoService.canUndo()}canRedo(){return this.undoRedoService.canRedo()}getSnapshot(){return this.config.getSnapshot()}getRecords(){throw Error("Method not implemented.")}restore(e){throw Error("Method not implemented.")}clear(){this.undoRedoService.clear()}dispose(){this._willDisposeEmitter.fire(this),this._toDispose.dispose()}_canPush(){return!this._locked&&this.undoRedoService.canPush()}_pushStackOperation(e){this.undoRedoService.pushElement(e),this.undoRedoService.clearRedoStack()}_shouldMerge(e,n,r){return!!n&&(!!this._transacting||r.shouldMerge&&r.shouldMerge(e,n.getLastOperation(),n))}};u([(0,i.WQ)(y)],w.prototype,"undoRedoService",2),u([(0,i.WQ)(p)],w.prototype,"operationRegistry",2),u([(0,i.WQ)(m)],w.prototype,"operationService",2),u([(0,i.WQ)(f)],w.prototype,"context",2),u([(0,i.WQ)(g)],w.prototype,"config",2),u([(0,i.WQ)(x)],w.prototype,"historyManager",2),u([(0,i.kr)()],w.prototype,"init",1),w=u([(0,i._G)()],w);var S=new i.i0((e,n,r,i,s,o,a)=>{e(p).toSelf().inSingletonScope(),e(m).toSelf().inSingletonScope(),e(y).toSelf().inSingletonScope(),e(w).toSelf().inSingletonScope(),e(f).toSelf().inSingletonScope(),e(x).toSelf().inSingletonScope(),e(b).toSelf().inSingletonScope(),e(g).toSelf().inSingletonScope(),o(w,(e,n)=>{let r;return(r=e.container?.parent?.isBound(x)?e.container?.parent?.get(x):e.container.get(x))&&(n.historyManager=r,r.registerHistoryService(n)),n})});(0,l.XY)({onInit:(e,n)=>{n.onApply&&e.get(m).onApply(n.onApply.bind(null,e))},containerModules:[S]})},24174:function(e,n,r){"use strict";r.d(n,{F:()=>ed});var i,s,o=r(58156),a=r.n(o),l=r(61448),h=r.n(l),c=r(55364),u=r.n(c),d=r(63375),p=r.n(d);let f=(e,n)=>{let r=[],i=[];return r.push(n),n||r.push(e.locale),e.enableFallback&&r.push(e.defaultLocale),r.filter(Boolean).map(e=>e.toString()).forEach(function(n){if(i.includes(n)||i.push(n),!e.enableFallback)return;let r=n.split("-");3===r.length&&i.push(`${r[0]}-${r[1]}`),i.push(r[0])}),p()(i)};class g{constructor(e){this.i18n=e,this.registry={},this.register("default",f)}register(e,n){if("function"!=typeof n){let e=n;n=()=>e}this.registry[e]=n}get(e){let n=this.registry[e]||this.registry[this.i18n.locale]||this.registry.default;return"function"==typeof n&&(n=n(this.i18n,e)),n instanceof Array||(n=[n]),n}}let m=function({pluralizer:e,includeZero:n=!0,ordinal:r=!1}){return function(i,s){return[n&&0===s?"zero":"",e(s,r)].filter(Boolean)}}({pluralizer:(e,n)=>{let r=String(e).split("."),i=!r[1],s=Number(r[0])==e,o=s&&r[0].slice(-1),a=s&&r[0].slice(-2);return n?1==o&&11!=a?"one":2==o&&12!=a?"two":3==o&&13!=a?"few":"other":1==e&&i?"one":"other"},includeZero:!0});class y{constructor(e){this.i18n=e,this.registry={},this.register("default",m)}register(e,n){this.registry[e]=n}get(e){return this.registry[e]||this.registry[this.i18n.locale]||this.registry.default}}var O=r(84058),b=r.n(O);function x(e){return e?Object.keys(e).reduce((n,r)=>(n[b()(r)]=e[r],n),{}):{}}function w(e){return null!=e}var S=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,_=Math.ceil,k=Math.floor,C="[BigNumber Error] ",E=C+"Number primitive has more than 15 significant digits: ",T=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13];function P(e){var n=0|e;return e>0||e===n?n:n-1}function A(e){for(var n,r,i=1,s=e.length,o=e[0]+"";i<s;){for(r=14-(n=e[i++]+"").length;r--;n="0"+n);o+=n}for(s=o.length;48===o.charCodeAt(--s););return o.slice(0,s+1||1)}function M(e,n){var r,i,s=e.c,o=n.c,a=e.s,l=n.s,h=e.e,c=n.e;if(!a||!l)return null;if(r=s&&!s[0],i=o&&!o[0],r||i)return r?i?0:-l:a;if(a!=l)return a;if(r=a<0,i=h==c,!s||!o)return i?0:!s^r?1:-1;if(!i)return h>c^r?1:-1;for(a=0,l=(h=s.length)<(c=o.length)?h:c;a<l;a++)if(s[a]!=o[a])return s[a]>o[a]^r?1:-1;return h==c?0:h>c^r?1:-1}function N(e,n,r,i){if(e<n||e>r||e!==k(e))throw Error(C+(i||"Argument")+("number"==typeof e?e<n||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function D(e){var n=e.c.length-1;return P(e.e/14)==n&&e.c[n]%2!=0}function I(e,n){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(n<0?"e":"e+")+n}function $(e,n,r){var i,s;if(n<0){for(s=r+".";++n;s+=r);e=s+e}else if(i=e.length,++n>i){for(s=r,n-=i;--n;s+=r);e+=s}else n<i&&(e=e.slice(0,n)+"."+e.slice(n));return e}var R=function e(n){var r,i,s,o,a,l,h,c,u,d=V.prototype={constructor:V,toString:null,valueOf:null},p=new V(1),f=20,g=4,m=-7,y=21,O=-1e7,b=1e7,x=!1,w=1,R=0,L={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xa0",suffix:""},Q="0123456789abcdefghijklmnopqrstuvwxyz",j=!0;function V(e,n){var r,i,s,o,a,l,h,d,p=this;if(!(p instanceof V))return new V(e,n);if(null==n){if(e&&!0===e._isBigNumber){p.s=e.s,!e.c||e.e>b?p.c=p.e=null:e.e<O?p.c=[p.e=0]:(p.e=e.e,p.c=e.c.slice());return}if((l="number"==typeof e)&&0*e==0){if(p.s=1/e<0?(e=-e,-1):1,e===~~e){for(o=0,a=e;a>=10;a/=10,o++);o>b?p.c=p.e=null:(p.e=o,p.c=[e]);return}d=String(e)}else{if(!S.test(d=String(e)))return u(p,d,l);p.s=45==d.charCodeAt(0)?(d=d.slice(1),-1):1}(o=d.indexOf("."))>-1&&(d=d.replace(".","")),(a=d.search(/e/i))>0?(o<0&&(o=a),o+=+d.slice(a+1),d=d.substring(0,a)):o<0&&(o=d.length)}else{if(N(n,2,Q.length,"Base"),10==n&&j)return Z(p=new V(e),f+p.e+1,g);if(d=String(e),l="number"==typeof e){if(0*e!=0)return u(p,d,l,n);if(p.s=1/e<0?(d=d.slice(1),-1):1,V.DEBUG&&d.replace(/^0\.0*|\./,"").length>15)throw Error(E+e)}else p.s=45===d.charCodeAt(0)?(d=d.slice(1),-1):1;for(r=Q.slice(0,n),o=a=0,h=d.length;a<h;a++)if(0>r.indexOf(i=d.charAt(a))){if("."==i){if(a>o){o=h;continue}}else if(!s&&(d==d.toUpperCase()&&(d=d.toLowerCase())||d==d.toLowerCase()&&(d=d.toUpperCase()))){s=!0,a=-1,o=0;continue}return u(p,String(e),l,n)}l=!1,(o=(d=c(d,n,10,p.s)).indexOf("."))>-1?d=d.replace(".",""):o=d.length}for(a=0;48===d.charCodeAt(a);a++);for(h=d.length;48===d.charCodeAt(--h););if(d=d.slice(a,++h)){if(h-=a,l&&V.DEBUG&&h>15&&(e>0x1fffffffffffff||e!==k(e)))throw Error(E+p.s*e);if((o=o-a-1)>b)p.c=p.e=null;else if(o<O)p.c=[p.e=0];else{if(p.e=o,p.c=[],a=(o+1)%14,o<0&&(a+=14),a<h){for(a&&p.c.push(+d.slice(0,a)),h-=14;a<h;)p.c.push(+d.slice(a,a+=14));a=14-(d=d.slice(a)).length}else a-=h;for(;a--;d+="0");p.c.push(+d)}}else p.c=[p.e=0]}function z(e,n,r,i){var s,o,a,l,h;if(null==r?r=g:N(r,0,8),!e.c)return e.toString();if(s=e.c[0],a=e.e,null==n)h=A(e.c),h=1==i||2==i&&(a<=m||a>=y)?I(h,a):$(h,a,"0");else if(o=(e=Z(new V(e),n,r)).e,l=(h=A(e.c)).length,1==i||2==i&&(n<=o||o<=m)){for(;l<n;h+="0",l++);h=I(h,o)}else if(n-=a+(2===i&&o>a),h=$(h,o,"0"),o+1>l){if(--n>0)for(h+=".";n--;h+="0");}else if((n+=o-l)>0)for(o+1==l&&(h+=".");n--;h+="0");return e.s<0&&s?"-"+h:h}function B(e,n){for(var r,i,s=1,o=new V(e[0]);s<e.length;s++)(i=new V(e[s])).s&&(r=M(o,i))!==n&&(0!==r||o.s!==n)||(o=i);return o}function F(e,n,r){for(var i=1,s=n.length;!n[--s];n.pop());for(s=n[0];s>=10;s/=10,i++);return(r=i+14*r-1)>b?e.c=e.e=null:r<O?e.c=[e.e=0]:(e.e=r,e.c=n),e}function Z(e,n,r,i){var s,o,a,l,h,c,u,d=e.c;if(d){a:{for(s=1,l=d[0];l>=10;l/=10,s++);if((o=n-s)<0)o+=14,a=n,u=k((h=d[c=0])/T[s-a-1]%10);else if((c=_((o+1)/14))>=d.length)if(i){for(;d.length<=c;d.push(0));h=u=0,s=1,o%=14,a=o-14+1}else break a;else{for(s=1,h=l=d[c];l>=10;l/=10,s++);o%=14,u=(a=o-14+s)<0?0:k(h/T[s-a-1]%10)}if(i=i||n<0||null!=d[c+1]||(a<0?h:h%T[s-a-1]),i=r<4?(u||i)&&(0==r||r==(e.s<0?3:2)):u>5||5==u&&(4==r||i||6==r&&(o>0?a>0?h/T[s-a]:0:d[c-1])%10&1||r==(e.s<0?8:7)),n<1||!d[0])return d.length=0,i?(n-=e.e+1,d[0]=T[(14-n%14)%14],e.e=-n||0):d[0]=e.e=0,e;if(0==o?(d.length=c,l=1,c--):(d.length=c+1,l=T[14-o],d[c]=a>0?k(h/T[s-a]%T[a])*l:0),i)for(;;)if(0==c){for(o=1,a=d[0];a>=10;a/=10,o++);for(a=d[0]+=l,l=1;a>=10;a/=10,l++);o!=l&&(e.e++,1e14==d[0]&&(d[0]=1));break}else{if(d[c]+=l,1e14!=d[c])break;d[c--]=0,l=1}for(o=d.length;0===d[--o];d.pop());}e.e>b?e.c=e.e=null:e.e<O&&(e.c=[e.e=0])}return e}function q(e){var n,r=e.e;return null===r?e.toString():(n=A(e.c),n=r<=m||r>=y?I(n,r):$(n,r,"0"),e.s<0?"-"+n:n)}return V.clone=e,V.ROUND_UP=0,V.ROUND_DOWN=1,V.ROUND_CEIL=2,V.ROUND_FLOOR=3,V.ROUND_HALF_UP=4,V.ROUND_HALF_DOWN=5,V.ROUND_HALF_EVEN=6,V.ROUND_HALF_CEIL=7,V.ROUND_HALF_FLOOR=8,V.EUCLID=9,V.config=V.set=function(e){var n,r;if(null!=e)if("object"==typeof e){if(e.hasOwnProperty(n="DECIMAL_PLACES")&&(N(r=e[n],0,1e9,n),f=r),e.hasOwnProperty(n="ROUNDING_MODE")&&(N(r=e[n],0,8,n),g=r),e.hasOwnProperty(n="EXPONENTIAL_AT")&&((r=e[n])&&r.pop?(N(r[0],-1e9,0,n),N(r[1],0,1e9,n),m=r[0],y=r[1]):(N(r,-1e9,1e9,n),m=-(y=r<0?-r:r))),e.hasOwnProperty(n="RANGE"))if((r=e[n])&&r.pop)N(r[0],-1e9,-1,n),N(r[1],1,1e9,n),O=r[0],b=r[1];else if(N(r,-1e9,1e9,n),r)O=-(b=r<0?-r:r);else throw Error(C+n+" cannot be zero: "+r);if(e.hasOwnProperty(n="CRYPTO"))if(!!(r=e[n])===r)if(r)if("undefined"!=typeof crypto&&crypto&&(crypto.getRandomValues||crypto.randomBytes))x=r;else throw x=!r,Error(C+"crypto unavailable");else x=r;else throw Error(C+n+" not true or false: "+r);if(e.hasOwnProperty(n="MODULO_MODE")&&(N(r=e[n],0,9,n),w=r),e.hasOwnProperty(n="POW_PRECISION")&&(N(r=e[n],0,1e9,n),R=r),e.hasOwnProperty(n="FORMAT"))if("object"==typeof(r=e[n]))L=r;else throw Error(C+n+" not an object: "+r);if(e.hasOwnProperty(n="ALPHABET")){if("string"!=typeof(r=e[n])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(C+n+" invalid: "+r);j="0123456789"==r.slice(0,10),Q=r}}else throw Error(C+"Object expected: "+e);return{DECIMAL_PLACES:f,ROUNDING_MODE:g,EXPONENTIAL_AT:[m,y],RANGE:[O,b],CRYPTO:x,MODULO_MODE:w,POW_PRECISION:R,FORMAT:L,ALPHABET:Q}},V.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!V.DEBUG)return!0;var n,r,i=e.c,s=e.e,o=e.s;a:if("[object Array]"==({}).toString.call(i)){if((1===o||-1===o)&&s>=-1e9&&s<=1e9&&s===k(s)){if(0===i[0]){if(0===s&&1===i.length)return!0;break a}if((n=(s+1)%14)<1&&(n+=14),String(i[0]).length==n){for(n=0;n<i.length;n++)if((r=i[n])<0||r>=1e14||r!==k(r))break a;if(0!==r)return!0}}}else if(null===i&&null===s&&(null===o||1===o||-1===o))return!0;throw Error(C+"Invalid BigNumber: "+e)},V.maximum=V.max=function(){return B(arguments,-1)},V.minimum=V.min=function(){return B(arguments,1)},r=0x20000000000000*Math.random()&2097151?function(){return k(0x20000000000000*Math.random())}:function(){return(0x40000000*Math.random()|0)*8388608+(8388608*Math.random()|0)},V.random=function(e){var n,i,s,o,a,l=0,h=[],c=new V(p);if(null==e?e=f:N(e,0,1e9),o=_(e/14),x)if(crypto.getRandomValues){for(n=crypto.getRandomValues(new Uint32Array(o*=2));l<o;)(a=131072*n[l]+(n[l+1]>>>11))>=9e15?(i=crypto.getRandomValues(new Uint32Array(2)),n[l]=i[0],n[l+1]=i[1]):(h.push(a%1e14),l+=2);l=o/2}else if(crypto.randomBytes){for(n=crypto.randomBytes(o*=7);l<o;)(a=(31&n[l])*0x1000000000000+0x10000000000*n[l+1]+0x100000000*n[l+2]+0x1000000*n[l+3]+(n[l+4]<<16)+(n[l+5]<<8)+n[l+6])>=9e15?crypto.randomBytes(7).copy(n,l):(h.push(a%1e14),l+=7);l=o/7}else throw x=!1,Error(C+"crypto unavailable");if(!x)for(;l<o;)(a=r())<9e15&&(h[l++]=a%1e14);for(o=h[--l],e%=14,o&&e&&(a=T[14-e],h[l]=k(o/a)*a);0===h[l];h.pop(),l--);if(l<0)h=[s=0];else{for(s=-1;0===h[0];h.splice(0,1),s-=14);for(l=1,a=h[0];a>=10;a/=10,l++);l<14&&(s-=14-l)}return c.e=s,c.c=h,c},V.sum=function(){for(var e=1,n=arguments,r=new V(n[0]);e<n.length;)r=r.plus(n[e++]);return r},c=function(){var e="0123456789";function n(e,n,r,i){for(var s,o,a=[0],l=0,h=e.length;l<h;){for(o=a.length;o--;a[o]*=n);for(a[0]+=i.indexOf(e.charAt(l++)),s=0;s<a.length;s++)a[s]>r-1&&(null==a[s+1]&&(a[s+1]=0),a[s+1]+=a[s]/r|0,a[s]%=r)}return a.reverse()}return function(r,i,s,o,a){var l,c,u,d,p,m,y,O,b=r.indexOf("."),x=f,w=g;for(b>=0&&(d=R,R=0,r=r.replace(".",""),m=(O=new V(i)).pow(r.length-b),R=d,O.c=n($(A(m.c),m.e,"0"),10,s,e),O.e=O.c.length),u=d=(y=n(r,i,s,a?(l=Q,e):(l=e,Q))).length;0==y[--d];y.pop());if(!y[0])return l.charAt(0);if(b<0?--u:(m.c=y,m.e=u,m.s=o,y=(m=h(m,O,x,w,s)).c,p=m.r,u=m.e),b=y[c=u+x+1],d=s/2,p=p||c<0||null!=y[c+1],p=w<4?(null!=b||p)&&(0==w||w==(m.s<0?3:2)):b>d||b==d&&(4==w||p||6==w&&1&y[c-1]||w==(m.s<0?8:7)),c<1||!y[0])r=p?$(l.charAt(1),-x,l.charAt(0)):l.charAt(0);else{if(y.length=c,p)for(--s;++y[--c]>s;)y[c]=0,c||(++u,y=[1].concat(y));for(d=y.length;!y[--d];);for(b=0,r="";b<=d;r+=l.charAt(y[b++]));r=$(r,u,l.charAt(0))}return r}}(),h=function(){function e(e,n,r){var i,s,o,a,l=0,h=e.length,c=n%1e7,u=n/1e7|0;for(e=e.slice();h--;)i=u*(o=e[h]%1e7)+(a=e[h]/1e7|0)*c,l=((s=c*o+i%1e7*1e7+l)/r|0)+(i/1e7|0)+u*a,e[h]=s%r;return l&&(e=[l].concat(e)),e}function n(e,n,r,i){var s,o;if(r!=i)o=r>i?1:-1;else for(s=o=0;s<r;s++)if(e[s]!=n[s]){o=e[s]>n[s]?1:-1;break}return o}function r(e,n,r,i){for(var s=0;r--;)e[r]-=s,s=+(e[r]<n[r]),e[r]=s*i+e[r]-n[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(i,s,o,a,l){var h,c,u,d,p,f,g,m,y,O,b,x,w,S,_,C,E,T=i.s==s.s?1:-1,A=i.c,M=s.c;if(!A||!A[0]||!M||!M[0])return new V(!i.s||!s.s||(A?M&&A[0]==M[0]:!M)?NaN:A&&0==A[0]||!M?0*T:T/0);for(y=(m=new V(T)).c=[],T=o+(c=i.e-s.e)+1,l||(l=1e14,c=P(i.e/14)-P(s.e/14),T=T/14|0),u=0;M[u]==(A[u]||0);u++);if(M[u]>(A[u]||0)&&c--,T<0)y.push(1),d=!0;else{for(S=A.length,C=M.length,u=0,T+=2,(p=k(l/(M[0]+1)))>1&&(M=e(M,p,l),A=e(A,p,l),C=M.length,S=A.length),w=C,b=(O=A.slice(0,C)).length;b<C;O[b++]=0);E=[0].concat(E=M.slice()),_=M[0],M[1]>=l/2&&_++;do{if(p=0,(h=n(M,O,C,b))<0){if(x=O[0],C!=b&&(x=x*l+(O[1]||0)),(p=k(x/_))>1)for(p>=l&&(p=l-1),g=(f=e(M,p,l)).length,b=O.length;1==n(f,O,g,b);)p--,r(f,C<g?E:M,g,l),g=f.length,h=1;else 0==p&&(h=p=1),g=(f=M.slice()).length;if(g<b&&(f=[0].concat(f)),r(O,f,b,l),b=O.length,-1==h)for(;1>n(M,O,C,b);)p++,r(O,C<b?E:M,b,l),b=O.length}else 0===h&&(p++,O=[0]);y[u++]=p,O[0]?O[b++]=A[w]||0:(O=[A[w]],b=1)}while((w++<S||null!=O[0])&&T--);d=null!=O[0],y[0]||y.splice(0,1)}if(1e14==l){for(u=1,T=y[0];T>=10;T/=10,u++);Z(m,o+(m.e=u+14*c-1)+1,a,d)}else m.e=c,m.r=+d;return m}}(),i=/^(-?)0([xbo])(?=\w[\w.]*$)/i,s=/^([^.]+)\.$/,o=/^\.([^.]+)$/,a=/^-?(Infinity|NaN)$/,l=/^\s*\+(?=[\w.])|^\s+|\s+$/g,u=function(e,n,r,h){var c,u=r?n:n.replace(l,"");if(a.test(u))e.s=isNaN(u)?null:u<0?-1:1;else{if(!r&&(u=u.replace(i,function(e,n,r){return c="x"==(r=r.toLowerCase())?16:"b"==r?2:8,h&&h!=c?e:n}),h&&(c=h,u=u.replace(s,"$1").replace(o,"0.$1")),n!=u))return new V(u,c);if(V.DEBUG)throw Error(C+"Not a"+(h?" base "+h:"")+" number: "+n);e.s=null}e.c=e.e=null},d.absoluteValue=d.abs=function(){var e=new V(this);return e.s<0&&(e.s=1),e},d.comparedTo=function(e,n){return M(this,new V(e,n))},d.decimalPlaces=d.dp=function(e,n){var r,i,s;if(null!=e)return N(e,0,1e9),null==n?n=g:N(n,0,8),Z(new V(this),e+this.e+1,n);if(!(r=this.c))return null;if(i=((s=r.length-1)-P(this.e/14))*14,s=r[s])for(;s%10==0;s/=10,i--);return i<0&&(i=0),i},d.dividedBy=d.div=function(e,n){return h(this,new V(e,n),f,g)},d.dividedToIntegerBy=d.idiv=function(e,n){return h(this,new V(e,n),0,1)},d.exponentiatedBy=d.pow=function(e,n){var r,i,s,o,a,l,h,c,u,d=this;if((e=new V(e)).c&&!e.isInteger())throw Error(C+"Exponent not an integer: "+q(e));if(null!=n&&(n=new V(n)),l=e.e>14,!d.c||!d.c[0]||1==d.c[0]&&!d.e&&1==d.c.length||!e.c||!e.c[0])return u=new V(Math.pow(+q(d),l?e.s*(2-D(e)):+q(e))),n?u.mod(n):u;if(h=e.s<0,n){if(n.c?!n.c[0]:!n.s)return new V(NaN);(i=!h&&d.isInteger()&&n.isInteger())&&(d=d.mod(n))}else{if(e.e>9&&(d.e>0||d.e<-1||(0==d.e?d.c[0]>1||l&&d.c[1]>=24e7:d.c[0]<8e13||l&&d.c[0]<=9999975e7)))return o=d.s<0&&D(e)?-0:0,d.e>-1&&(o=1/o),new V(h?1/o:o);R&&(o=_(R/14+2))}for(l?(r=new V(.5),h&&(e.s=1),c=D(e)):c=(s=Math.abs(+q(e)))%2,u=new V(p);;){if(c){if(!(u=u.times(d)).c)break;o?u.c.length>o&&(u.c.length=o):i&&(u=u.mod(n))}if(s){if(0===(s=k(s/2)))break;c=s%2}else if(Z(e=e.times(r),e.e+1,1),e.e>14)c=D(e);else{if(0==(s=+q(e)))break;c=s%2}d=d.times(d),o?d.c&&d.c.length>o&&(d.c.length=o):i&&(d=d.mod(n))}return i?u:(h&&(u=p.div(u)),n?u.mod(n):o?Z(u,R,g,a):u)},d.integerValue=function(e){var n=new V(this);return null==e?e=g:N(e,0,8),Z(n,n.e+1,e)},d.isEqualTo=d.eq=function(e,n){return 0===M(this,new V(e,n))},d.isFinite=function(){return!!this.c},d.isGreaterThan=d.gt=function(e,n){return M(this,new V(e,n))>0},d.isGreaterThanOrEqualTo=d.gte=function(e,n){return 1===(n=M(this,new V(e,n)))||0===n},d.isInteger=function(){return!!this.c&&P(this.e/14)>this.c.length-2},d.isLessThan=d.lt=function(e,n){return 0>M(this,new V(e,n))},d.isLessThanOrEqualTo=d.lte=function(e,n){return -1===(n=M(this,new V(e,n)))||0===n},d.isNaN=function(){return!this.s},d.isNegative=function(){return this.s<0},d.isPositive=function(){return this.s>0},d.isZero=function(){return!!this.c&&0==this.c[0]},d.minus=function(e,n){var r,i,s,o,a=this.s;if(n=(e=new V(e,n)).s,!a||!n)return new V(NaN);if(a!=n)return e.s=-n,this.plus(e);var l=this.e/14,h=e.e/14,c=this.c,u=e.c;if(!l||!h){if(!c||!u)return c?(e.s=-n,e):new V(u?this:NaN);if(!c[0]||!u[0])return u[0]?(e.s=-n,e):new V(c[0]?this:3==g?-0:0)}if(l=P(l),h=P(h),c=c.slice(),a=l-h){for((o=a<0)?(a=-a,s=c):(h=l,s=u),s.reverse(),n=a;n--;s.push(0));s.reverse()}else for(i=(o=(a=c.length)<(n=u.length))?a:n,a=n=0;n<i;n++)if(c[n]!=u[n]){o=c[n]<u[n];break}if(o&&(s=c,c=u,u=s,e.s=-e.s),(n=(i=u.length)-(r=c.length))>0)for(;n--;c[r++]=0);for(n=1e14-1;i>a;){if(c[--i]<u[i]){for(r=i;r&&!c[--r];c[r]=n);--c[r],c[i]+=1e14}c[i]-=u[i]}for(;0==c[0];c.splice(0,1),--h);return c[0]?F(e,c,h):(e.s=3==g?-1:1,e.c=[e.e=0],e)},d.modulo=d.mod=function(e,n){var r,i;return(e=new V(e,n),this.c&&e.s&&(!e.c||e.c[0]))?e.c&&(!this.c||this.c[0])?(9==w?(i=e.s,e.s=1,r=h(this,e,0,3),e.s=i,r.s*=i):r=h(this,e,0,w),(e=this.minus(r.times(e))).c[0]||1!=w||(e.s=this.s),e):new V(this):new V(NaN)},d.multipliedBy=d.times=function(e,n){var r,i,s,o,a,l,h,c,u,d,p,f,g,m=this.c,y=(e=new V(e,n)).c;if(!m||!y||!m[0]||!y[0])return this.s&&e.s&&(!m||m[0]||y)&&(!y||y[0]||m)?(e.s*=this.s,m&&y?(e.c=[0],e.e=0):e.c=e.e=null):e.c=e.e=e.s=null,e;for(i=P(this.e/14)+P(e.e/14),e.s*=this.s,(h=m.length)<(d=y.length)&&(g=m,m=y,y=g,s=h,h=d,d=s),s=h+d,g=[];s--;g.push(0));for(s=d;--s>=0;){for(r=0,p=y[s]%1e7,f=y[s]/1e7|0,o=s+(a=h);o>s;)l=f*(c=m[--a]%1e7)+(u=m[a]/1e7|0)*p,r=((c=p*c+l%1e7*1e7+g[o]+r)/1e14|0)+(l/1e7|0)+f*u,g[o--]=c%1e14;g[o]=r}return r?++i:g.splice(0,1),F(e,g,i)},d.negated=function(){var e=new V(this);return e.s=-e.s||null,e},d.plus=function(e,n){var r,i=this.s;if(n=(e=new V(e,n)).s,!i||!n)return new V(NaN);if(i!=n)return e.s=-n,this.minus(e);var s=this.e/14,o=e.e/14,a=this.c,l=e.c;if(!s||!o){if(!a||!l)return new V(i/0);if(!a[0]||!l[0])return l[0]?e:new V(a[0]?this:0*i)}if(s=P(s),o=P(o),a=a.slice(),i=s-o){for(i>0?(o=s,r=l):(i=-i,r=a),r.reverse();i--;r.push(0));r.reverse()}for((i=a.length)-(n=l.length)<0&&(r=l,l=a,a=r,n=i),i=0;n;)i=(a[--n]=a[n]+l[n]+i)/1e14|0,a[n]=1e14===a[n]?0:a[n]%1e14;return i&&(a=[i].concat(a),++o),F(e,a,o)},d.precision=d.sd=function(e,n){var r,i,s;if(null!=e&&!!e!==e)return N(e,1,1e9),null==n?n=g:N(n,0,8),Z(new V(this),e,n);if(!(r=this.c))return null;if(i=14*(s=r.length-1)+1,s=r[s]){for(;s%10==0;s/=10,i--);for(s=r[0];s>=10;s/=10,i++);}return e&&this.e+1>i&&(i=this.e+1),i},d.shiftedBy=function(e){return N(e,-0x1fffffffffffff,0x1fffffffffffff),this.times("1e"+e)},d.squareRoot=d.sqrt=function(){var e,n,r,i,s,o=this.c,a=this.s,l=this.e,c=f+4,u=new V("0.5");if(1!==a||!o||!o[0])return new V(!a||a<0&&(!o||o[0])?NaN:o?this:1/0);if(0==(a=Math.sqrt(+q(this)))||a==1/0?(((n=A(o)).length+l)%2==0&&(n+="0"),a=Math.sqrt(+n),l=P((l+1)/2)-(l<0||l%2),r=new V(n=a==1/0?"5e"+l:(n=a.toExponential()).slice(0,n.indexOf("e")+1)+l)):r=new V(a+""),r.c[0]){for((a=(l=r.e)+c)<3&&(a=0);;)if(s=r,r=u.times(s.plus(h(this,s,c,1))),A(s.c).slice(0,a)===(n=A(r.c)).slice(0,a)){if(r.e<l&&--a,"9999"!=(n=n.slice(a-3,a+1))&&(i||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(Z(r,r.e+f+2,1),e=!r.times(r).eq(this));break}if(!i&&(Z(s,s.e+f+2,0),s.times(s).eq(this))){r=s;break}c+=4,a+=4,i=1}}return Z(r,r.e+f+1,g,e)},d.toExponential=function(e,n){return null!=e&&(N(e,0,1e9),e++),z(this,e,n,1)},d.toFixed=function(e,n){return null!=e&&(N(e,0,1e9),e=e+this.e+1),z(this,e,n)},d.toFormat=function(e,n,r){var i;if(null==r)null!=e&&n&&"object"==typeof n?(r=n,n=null):e&&"object"==typeof e?(r=e,e=n=null):r=L;else if("object"!=typeof r)throw Error(C+"Argument not an object: "+r);if(i=this.toFixed(e,n),this.c){var s,o=i.split("."),a=+r.groupSize,l=+r.secondaryGroupSize,h=r.groupSeparator||"",c=o[0],u=o[1],d=this.s<0,p=d?c.slice(1):c,f=p.length;if(l&&(s=a,a=l,l=s,f-=s),a>0&&f>0){for(s=f%a||a,c=p.substr(0,s);s<f;s+=a)c+=h+p.substr(s,a);l>0&&(c+=h+p.slice(s)),d&&(c="-"+c)}i=u?c+(r.decimalSeparator||"")+((l=+r.fractionGroupSize)?u.replace(RegExp("\\d{"+l+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):u):c}return(r.prefix||"")+i+(r.suffix||"")},d.toFraction=function(e){var n,r,i,s,o,a,l,c,u,d,f,m,y=this.c;if(null!=e&&(!(l=new V(e)).isInteger()&&(l.c||1!==l.s)||l.lt(p)))throw Error(C+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+q(l));if(!y)return new V(this);for(n=new V(p),u=r=new V(p),i=c=new V(p),m=A(y),o=n.e=m.length-this.e-1,n.c[0]=T[(a=o%14)<0?14+a:a],e=!e||l.comparedTo(n)>0?o>0?n:u:l,a=b,b=1/0,l=new V(m),c.c[0]=0;d=h(l,n,0,1),1!=(s=r.plus(d.times(i))).comparedTo(e);)r=i,i=s,u=c.plus(d.times(s=u)),c=s,n=l.minus(d.times(s=n)),l=s;return s=h(e.minus(r),i,0,1),c=c.plus(s.times(u)),r=r.plus(s.times(i)),c.s=u.s=this.s,o*=2,f=1>h(u,i,o,g).minus(this).abs().comparedTo(h(c,r,o,g).minus(this).abs())?[u,i]:[c,r],b=a,f},d.toNumber=function(){return+q(this)},d.toPrecision=function(e,n){return null!=e&&N(e,1,1e9),z(this,e,n,2)},d.toString=function(e){var n,r=this,i=r.s,s=r.e;return null===s?i?(n="Infinity",i<0&&(n="-"+n)):n="NaN":(null==e?n=s<=m||s>=y?I(A(r.c),s):$(A(r.c),s,"0"):10===e&&j?n=$(A((r=Z(new V(r),f+s+1,g)).c),r.e,"0"):(N(e,2,Q.length,"Base"),n=c($(A(r.c),s,"0"),10,e,i,!0)),i<0&&r.c[0]&&(n="-"+n)),n},d.valueOf=d.toJSON=function(){return q(this)},d._isBigNumber=!0,d[Symbol.toStringTag]="BigNumber",d[Symbol.for("nodejs.util.inspect.custom")]=d.valueOf,null!=n&&V.set(n),V}();function L(e){var n;return null!=(n=s[e])?n:s.default}(i=s||(s={}))[i.up=R.ROUND_UP]="up",i[i.down=R.ROUND_DOWN]="down",i[i.truncate=R.ROUND_DOWN]="truncate",i[i.halfUp=R.ROUND_HALF_UP]="halfUp",i[i.default=R.ROUND_HALF_UP]="default",i[i.halfDown=R.ROUND_HALF_DOWN]="halfDown",i[i.halfEven=R.ROUND_HALF_EVEN]="halfEven",i[i.banker=R.ROUND_HALF_EVEN]="banker",i[i.ceiling=R.ROUND_CEIL]="ceiling",i[i.ceil=R.ROUND_CEIL]="ceil",i[i.floor=R.ROUND_FLOOR]="floor";var Q=r(12493),j=r.n(Q);function V(e,n){let r=function(e,{precision:n,significant:r}){if(r&&null!==n&&n>0)return n-(e.isZero()?1:Math.floor(Math.log10(e.abs().toNumber())+1));return n}(e,n);if(null===r)return e.toString();let i=L(n.roundMode);if(r>=0)return e.toFixed(r,i);let s=Math.pow(10,Math.abs(r));return(e=new R(e.div(s).toFixed(0,i)).times(s)).toString()}function z(e,n){var r,i,s;let o,a=new R(e);if(n.raise&&!a.isFinite())throw Error(`"${e}" is not a valid numeric value`);let l=V(a,n),h=new R(l),c=h.lt(0),u=h.isZero(),[d,p]=l.split("."),f=[],g=null!=(r=n.format)?r:"%n",m=null!=(i=n.negativeFormat)?i:`-${g}`;for(d=d.replace("-","");d.length>0;)f.unshift(d.substr(Math.max(0,d.length-3),3)),d=d.substr(0,d.length-3);return d=f.join(""),o=f.join(n.delimiter),p=n.significant?function({significand:e,whole:n,precision:r}){if("0"===n||null===r)return e;let i=Math.max(0,r-n.length);return(null!=e?e:"").substr(0,i)}({whole:d,significand:p,precision:n.precision}):null!=p?p:j()("0",null!=(s=n.precision)?s:0),n.stripInsignificantZeros&&p&&(p=p.replace(/0+$/,"")),a.isNaN()&&(o=e.toString()),p&&a.isFinite()&&(o+=(n.separator||".")+p),function(e,{formattedNumber:n,unit:r}){return e.replace("%n",n).replace("%u",r)}(c&&!u?m:g,{formattedNumber:o,unit:n.unit})}function B(e,n,r){let i="";return(n instanceof String||"string"==typeof n)&&(i=n),n instanceof Array&&(i=n.join(e.defaultSeparator)),r.scope&&(i=[r.scope,i].join(e.defaultSeparator)),i}function F(e){var n,r;if(null===e)return"null";let i=typeof e;return"object"!==i?i:(null==(r=null==(n=null==e?void 0:e.constructor)?void 0:n.name)?void 0:r.toLowerCase())||"object"}function Z(e,n,r){r=Object.keys(r).reduce((n,i)=>(n[e.transformKey(i)]=r[i],n),{});let i=n.match(e.placeholder);if(!i)return n;for(;i.length;){let s,o=i.shift(),a=o.replace(e.placeholder,"$1");s=w(r[a])?r[a].toString().replace(/\$/gm,"_#$#_"):a in r?e.nullPlaceholder(e,o,n,r):e.missingPlaceholder(e,o,n,r);let l=RegExp(o.replace(/\{/gm,"\\{").replace(/\}/gm,"\\}"),"g");n=n.replace(l,s)}return n.replace(/_#\$#_/g,"$")}function q(e,n,r={}){let i="locale"in(r=Object.assign({},r))?r.locale:e.locale,s=F(i),o=e.locales.get("string"===s?i:typeof i).slice(),a=B(e,n,r).split(e.defaultSeparator).map(n=>e.transformKey(n)),l=o.map(n=>a.reduce((e,n)=>e&&e[n],e.translations[n]));return l.push(r.defaultValue),l.find(e=>w(e))}var W=r(33031),X=r.n(W),U=r(47248),Y=r.n(U);let G={0:"unit",1:"ten",2:"hundred",3:"thousand",6:"million",9:"billion",12:"trillion",15:"quadrillion","-1":"deci","-2":"centi","-3":"mili","-6":"micro","-9":"nano","-12":"pico","-15":"femto"},H=Y()(Object.values(G),Object.keys(G).map(e=>parseInt(e,10))),K=["byte","kb","mb","gb","tb","pb","eb"];function J(e){if(e instanceof Date)return e;if("number"==typeof e){let n=new Date;return n.setTime(e),n}let n=new String(e).match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2})(?:[.,](\d{1,3}))?)?(Z|\+00:?00)?/);if(n){let e=n.slice(1,8).map(e=>parseInt(e,10)||0);e[1]-=1;let[r,i,s,o,a,l,h]=e;return n[8]?new Date(Date.UTC(r,i,s,o,a,l,h)):new Date(r,i,s,o,a,l,h)}e.match(/([A-Z][a-z]{2}) ([A-Z][a-z]{2}) (\d+) (\d+:\d+:\d+) ([+-]\d+) (\d+)/)&&new Date().setTime(Date.parse([RegExp.$1,RegExp.$2,RegExp.$3,RegExp.$6,RegExp.$4,RegExp.$5].join(" ")));let r=new Date;return r.setTime(Date.parse(e)),r}function ee({i18n:e,count:n,scope:r,options:i,baseScope:s}){let o,a;if(i=Object.assign({},i),!(o="object"==typeof r&&r?r:q(e,r,i)))return e.missingTranslation.get(r,i);let l=e.pluralization.get(i.locale)(e,n),h=[];for(;l.length;){let e=l.shift();if(w(o[e])){a=o[e];break}h.push(e)}return w(a)?(i.count=n,e.interpolate(e,a,i)):e.missingTranslation.get(s.split(e.defaultSeparator).concat([h[0]]),i)}let et={meridian:{am:"AM",pm:"PM"},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbrDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:[null,"January","February","March","April","May","June","July","August","September","October","November","December"],abbrMonthNames:[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};var en=r(23181),er=r.n(en);let ei=(e,n,r)=>r>=e&&r<=n,es=function(e,n){n instanceof Array&&(n=n.join(e.defaultSeparator));let r=n.split(e.defaultSeparator).slice(-1)[0];return e.missingTranslationPrefix+r.replace("_"," ").replace(/([a-z])([A-Z])/g,(e,n,r)=>`${n} ${r.toLowerCase()}`)},eo=(e,n,r)=>{let i=B(e,n,r),s="locale"in r?r.locale:e.locale,o=F(s),a=["string"==o?s:o,i].join(e.defaultSeparator);return`[missing "${a}" translation]`},ea=(e,n,r)=>{let i=B(e,n,r),s=[e.locale,i].join(e.defaultSeparator);throw Error(`Missing translation: ${s}`)};class el{constructor(e){this.i18n=e,this.registry={},this.register("guess",es),this.register("message",eo),this.register("error",ea)}register(e,n){this.registry[e]=n}get(e,n){var r;return this.registry[null!=(r=n.missingBehavior)?r:this.i18n.missingBehavior](this.i18n,e,n)}}let eh={defaultLocale:"en",locale:"en",defaultSeparator:".",placeholder:/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm,enableFallback:!1,missingBehavior:"message",missingTranslationPrefix:"",missingPlaceholder:(e,n)=>`[missing "${n}" value]`,nullPlaceholder:(e,n,r,i)=>e.missingPlaceholder(e,n,r,i),transformKey:e=>e};class ec{constructor(e={},n={}){this._locale=eh.locale,this._defaultLocale=eh.defaultLocale,this._version=0,this.onChangeHandlers=[],this.translations={},this.t=this.translate,this.p=this.pluralize,this.l=this.localize,this.distanceOfTimeInWords=this.timeAgoInWords;let{locale:r,enableFallback:i,missingBehavior:s,missingTranslationPrefix:o,missingPlaceholder:a,nullPlaceholder:l,defaultLocale:h,defaultSeparator:c,placeholder:u,transformKey:d}=Object.assign(Object.assign({},eh),n);this.locale=r,this.defaultLocale=h,this.defaultSeparator=c,this.enableFallback=i,this.locale=r,this.missingBehavior=s,this.missingTranslationPrefix=o,this.missingPlaceholder=a,this.nullPlaceholder=l,this.placeholder=u,this.pluralization=new y(this),this.locales=new g(this),this.missingTranslation=new el(this),this.transformKey=d,this.interpolate=Z,this.store(e)}store(e){u()(this.translations,e),this.hasChanged()}get locale(){return this._locale||this.defaultLocale||"en"}set locale(e){if("string"!=typeof e)throw Error(`Expected newLocale to be a string; got ${F(e)}`);let n=this._locale!==e;this._locale=e,n&&this.hasChanged()}get defaultLocale(){return this._defaultLocale||"en"}set defaultLocale(e){if("string"!=typeof e)throw Error(`Expected newLocale to be a string; got ${F(e)}`);let n=this._defaultLocale!==e;this._defaultLocale=e,n&&this.hasChanged()}translate(e,n){let r;return(function(e,n,r){let i=[{scope:n}];if(w(r.defaults)&&(i=i.concat(r.defaults)),w(r.defaultValue)){let s="function"==typeof r.defaultValue?r.defaultValue(e,n,r):r.defaultValue;i.push({message:s}),delete r.defaultValue}return i})(this,e,n=Object.assign({},n)).some(e=>(w(e.scope)?r=q(this,e.scope,n):w(e.message)&&(r=e.message),null!=r))?("string"==typeof r?r=this.interpolate(this,r,n):"object"==typeof r&&r&&w(n.count)&&(r=ee({i18n:this,count:n.count||0,scope:r,options:n,baseScope:B(this,e,n)})),n&&r instanceof Array&&(r=r.map(e=>"string"==typeof e?Z(this,e,n):e)),r):this.missingTranslation.get(e,n)}pluralize(e,n,r){return ee({i18n:this,count:e,scope:n,options:Object.assign({},r),baseScope:B(this,n,null!=r?r:{})})}localize(e,n,r){if(r=Object.assign({},r),null==n)return"";switch(e){case"currency":return this.numberToCurrency(n);case"number":return z(n,Object.assign({delimiter:",",precision:3,separator:".",significant:!1,stripInsignificantZeros:!1},q(this,"number.format")));case"percentage":return this.numberToPercentage(n);default:return Z(this,e.match(/^(date|time)/)?this.toTime(e,n):n.toString(),r)}}toTime(e,n){let r=J(n),i=q(this,e);return r.toString().match(/invalid/i)||!i?r.toString():this.strftime(r,i)}numberToCurrency(e,n={}){return z(e,Object.assign(Object.assign(Object.assign({delimiter:",",format:"%u%n",precision:2,separator:".",significant:!1,stripInsignificantZeros:!1,unit:"$"},x(this.get("number.format"))),x(this.get("number.currency.format"))),n))}numberToPercentage(e,n={}){return z(e,Object.assign(Object.assign(Object.assign({delimiter:"",format:"%n%",precision:3,stripInsignificantZeros:!1,separator:".",significant:!1},x(this.get("number.format"))),x(this.get("number.percentage.format"))),n))}numberToHumanSize(e,n={}){return function(e,n,r){var i;let s,o=L(r.roundMode),a=new R(n).abs(),l=a.lt(1024),h=(i=a,Math.min(K.length-1,new R(Math.log(i.toNumber())).div(Math.log(1024)).integerValue(R.ROUND_DOWN).toNumber()));s=l?a.integerValue():new R(V(a.div(Math.pow(1024,h)),{significant:r.significant,precision:r.precision,roundMode:r.roundMode}));let c=e.translate("number.human.storage_units.format",{defaultValue:"%n %u"}),u=e.translate((e=>{let n=l?"byte":e[h];return`number.human.storage_units.units.${n}`})(K),{count:a.integerValue().toNumber()}),d=s.toFixed(r.precision,o);return r.stripInsignificantZeros&&(d=d.replace(/(\..*?)0+$/,"$1").replace(/\.$/,"")),c.replace("%n",d).replace("%u",u)}(this,e,Object.assign(Object.assign(Object.assign({delimiter:"",precision:3,significant:!0,stripInsignificantZeros:!0,units:{billion:"Billion",million:"Million",quadrillion:"Quadrillion",thousand:"Thousand",trillion:"Trillion",unit:""}},x(this.get("number.human.format"))),x(this.get("number.human.storage_units"))),n))}numberToHuman(e,n={}){return function(e,n,r){let i,s={roundMode:r.roundMode,precision:r.precision,significant:r.significant};if("string"===F(r.units)){let n=r.units;if(!(i=q(e,n)))throw Error(`The scope "${e.locale}${e.defaultSeparator}${B(e,n,{})}" couldn't be found`)}else i=r.units;let o=V(new R(n),s),a=((e,n)=>{let r=e.isZero()?0:Math.floor(Math.log10(e.abs().toNumber()));return X()(Object.keys(n).map(e=>H[e]),e=>-1*e).find(e=>r>=e)||0})(new R(o),i),l=i[G[a.toString()]]||"";if(o=V(new R(o).div(Math.pow(10,a)),s),r.stripInsignificantZeros){let[e,n]=o.split(".");n=(n||"").replace(/0+$/,""),o=e,n&&(o+=`${r.separator}${n}`)}return r.format.replace("%n",o||"0").replace("%u",l).trim()}(this,e,Object.assign(Object.assign(Object.assign({delimiter:"",separator:".",precision:3,significant:!0,stripInsignificantZeros:!0,format:"%n %u",roundMode:"default",units:{billion:"Billion",million:"Million",quadrillion:"Quadrillion",thousand:"Thousand",trillion:"Trillion",unit:""}},x(this.get("number.human.format"))),x(this.get("number.human.decimal_units"))),n))}numberToRounded(e,n){return z(e,Object.assign({unit:"",precision:3,significant:!1,separator:".",delimiter:"",stripInsignificantZeros:!1},n))}numberToDelimited(e,n={}){return function(e,n){let r=new R(e);if(!r.isFinite())return e.toString();if(!n.delimiterPattern.global)throw Error(`options.delimiterPattern must be a global regular expression; received ${n.delimiterPattern}`);let[i,s]=r.toString().split(".");return[i=i.replace(n.delimiterPattern,e=>`${e}${n.delimiter}`),s].filter(Boolean).join(n.separator)}(e,Object.assign({delimiterPattern:/(\d)(?=(\d\d\d)+(?!\d))/g,delimiter:",",separator:"."},n))}withLocale(e,n){var r,i,s,o;return r=this,i=void 0,s=void 0,o=function*(){let r=this.locale;try{this.locale=e,yield n()}finally{this.locale=r}},new(s||(s=Promise))(function(e,n){function a(e){try{h(o.next(e))}catch(e){n(e)}}function l(e){try{h(o.throw(e))}catch(e){n(e)}}function h(n){var r;n.done?e(n.value):((r=n.value)instanceof s?r:new s(function(e){e(r)})).then(a,l)}h((o=o.apply(r,i||[])).next())})}strftime(e,n,r={}){return function(e,n,r={}){let{abbrDayNames:i,dayNames:s,abbrMonthNames:o,monthNames:a,meridian:l,utc:h}=Object.assign(Object.assign({},et),r);if(isNaN(e.getTime()))throw Error("strftime() requires a valid date object, but received an invalid date.");let c=h?e.getUTCDay():e.getDay(),u=h?e.getUTCDate():e.getDate(),d=h?e.getUTCFullYear():e.getFullYear(),p=(h?e.getUTCMonth():e.getMonth())+1,f=h?e.getUTCHours():e.getHours(),g=f,m=f>11?"pm":"am",y=h?e.getUTCSeconds():e.getSeconds(),O=h?e.getUTCMinutes():e.getMinutes(),b=h?0:e.getTimezoneOffset(),x=Math.floor(Math.abs(b/60)),w=Math.abs(b)-60*x,S=(b>0?"-":"+")+(x.toString().length<2?"0"+x:x)+(w.toString().length<2?"0"+w:w);return g>12?g-=12:0===g&&(g=12),n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=n.replace("%a",i[c])).replace("%A",s[c])).replace("%b",o[p])).replace("%B",a[p])).replace("%d",u.toString().padStart(2,"0"))).replace("%e",u.toString())).replace("%-d",u.toString())).replace("%H",f.toString().padStart(2,"0"))).replace("%-H",f.toString())).replace("%k",f.toString())).replace("%I",g.toString().padStart(2,"0"))).replace("%-I",g.toString())).replace("%l",g.toString())).replace("%m",p.toString().padStart(2,"0"))).replace("%-m",p.toString())).replace("%M",O.toString().padStart(2,"0"))).replace("%-M",O.toString())).replace("%p",l[m])).replace("%P",l[m].toLowerCase())).replace("%S",y.toString().padStart(2,"0"))).replace("%-S",y.toString())).replace("%w",c.toString())).replace("%y",d.toString().padStart(2,"0").substr(-2))).replace("%-y",d.toString().padStart(2,"0").substr(-2).replace(/^0+/,""))).replace("%Y",d.toString())).replace(/%z/i,S)}(e,n,Object.assign(Object.assign(Object.assign({},x(q(this,"date"))),{meridian:{am:q(this,"time.am")||"AM",pm:q(this,"time.pm")||"PM"}}),r))}update(e,n,r={strict:!1}){let i;if(r.strict&&!h()(this.translations,e))throw Error(`The path "${e}" is not currently defined`);let s=a()(this.translations,e),o=F(s),l=F(n);if(r.strict&&o!==l)throw Error(`The current type for "${e}" is "${o}", but you're trying to override it with "${l}"`);i="object"===l?Object.assign(Object.assign({},s),n):n;let c=e.split(this.defaultSeparator),u=c.pop(),d=this.translations;for(let e of c)d[e]||(d[e]={}),d=d[e];d[u]=i,this.hasChanged()}toSentence(e,n={}){let{wordsConnector:r,twoWordsConnector:i,lastWordConnector:s}=Object.assign(Object.assign({wordsConnector:", ",twoWordsConnector:" and ",lastWordConnector:", and "},x(q(this,"support.array"))),n),o=e.length;switch(o){case 0:return"";case 1:return`${e[0]}`;case 2:return e.join(i);default:return[e.slice(0,o-1).join(r),s,e[o-1]].join("")}}timeAgoInWords(e,n,r={}){return function(e,n,r,i={}){let s=i.scope||"datetime.distance_in_words",o=(n,r=0)=>e.t(n,{count:r,scope:s});n=J(n),r=J(r);let a=n.getTime()/1e3,l=r.getTime()/1e3;a>l&&([n,r,a,l]=[r,n,l,a]);let h=Math.round(l-a),c=Math.round((l-a)/60),u=c/60,d=Math.round(c/60),p=Math.round(u/24),f=Math.round(p/30);if(ei(0,1,c))return i.includeSeconds?ei(0,4,h)?o("less_than_x_seconds",5):ei(5,9,h)?o("less_than_x_seconds",10):ei(10,19,h)?o("less_than_x_seconds",20):ei(20,39,h)?o("half_a_minute"):o(ei(40,59,h)?"less_than_x_minutes":"x_minutes",1):0===c?o("less_than_x_minutes",1):o("x_minutes",c);if(ei(2,44,c))return o("x_minutes",c);if(ei(45,89,c))return o("about_x_hours",1);if(ei(90,1439,c))return o("about_x_hours",d);if(ei(1440,2519,c))return o("x_days",1);if(ei(2520,43199,c))return o("x_days",p);if(ei(43200,86399,c))return o("about_x_months",Math.round(c/43200));if(ei(86400,525599,c))return o("x_months",f);let g=n.getFullYear();n.getMonth()+1>=3&&(g+=1);let m=r.getFullYear();r.getMonth()+1<3&&(m-=1);let y=c-1440*(g>m?0:er()(g,m).filter(e=>1==new Date(e,1,29).getMonth()).length),O=Math.trunc(y/525600),b=parseFloat((y/525600-O).toPrecision(3));return b<.25?o("about_x_years",O):b<.75?o("over_x_years",O):o("almost_x_years",O+1)}(this,e,n,r)}onChange(e){return this.onChangeHandlers.push(e),()=>{this.onChangeHandlers.splice(this.onChangeHandlers.indexOf(e),1)}}get version(){return this._version}formatNumber(e,n={}){return z(e,n=Object.assign(Object.assign({delimiter:",",precision:3,separator:".",unit:"",format:"%u%n",significant:!1,stripInsignificantZeros:!1},x(this.get("number.format"))),n))}get(e){return q(this,e)}runCallbacks(){this.onChangeHandlers.forEach(e=>e(this))}hasChanged(){this._version+=1,this.runCallbacks()}}var eu=r(67055),ed=new class{constructor(e){this.i18n=new ec,this._onLanguageChangeEmitter=new eu.vl,this.onLanguageChange=this._onLanguageChangeEmitter.event,this.missingStrictMode=!1,this.addLanguages(e),this.locale=function(){if("object"!=typeof navigator)return"en-US";let e=navigator.language;return"en"===e||"en-US"===e?"en-US":"zh"===e||"zh-CN"===e?"zh-CN":e}(),this.i18n.onChange(()=>{this._onLanguageChangeEmitter.fire(this.i18n.locale)})}t(e,n){return this.i18n.t(e,{defaultValue:this.missingStrictMode?void 0:e,...n})}get locale(){return this.i18n.locale}set locale(e){this.i18n.locale=e}addLanguages(e){this.i18n.store(e.reduce((e,n)=>Object.assign(e,{[n.languageId]:{languageName:n.languageName,localizedLanguageName:n.localizedLanguageName,...n.contents}}),{}))}addLanguage(e){this.addLanguages([e])}}([{languageId:"en-US",languageName:"English",localizedLanguageName:"English",contents:{Yes:"Yes",No:"No"}},{languageId:"zh-CN",languageName:"Chinese",localizedLanguageName:"中文(中国)",contents:{Yes:"是",No:"否"}}])},2265:function(e,n,r){"use strict";r.d(n,{RV:()=>x,XA:()=>S,cN:()=>y});var i,s=r(96540),o=r(81376),a=r(2543),l=r(11812),h=r(67055),c=r(32893),u=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=(e,n,r,i)=>{for(var s,o=i>1?void 0:i?d(n,r):n,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i?s(n,r,o):s(o))||o);return i&&o&&u(n,r,o),o},f={canvasWidth:250,canvasHeight:250,canvasPadding:50,canvasBackground:"rgba(242, 243, 245, 1)",canvasBorderRadius:10,viewportBackground:"rgba(255, 255, 255, 1)",viewportBorderRadius:4,viewportBorderColor:"rgba(6, 7, 9, 0.10)",viewportBorderWidth:1,viewportBorderDashLength:void 0,nodeColor:"rgba(0, 0, 0, 0.10)",nodeBorderRadius:2,nodeBorderWidth:.145,nodeBorderColor:"rgba(6, 7, 9, 0.10)",overlayColor:"rgba(255, 255, 255, 0.55)"},g={scale:.7,opacity:1,translateX:15,translateY:15},m={canvasStyle:f,canvasClassName:"gedit-minimap-canvas",enableActiveDebounce:!1,enableInactiveDebounce:!0,enableDisplayAllNodes:!1,activeDebounceTime:0,inactiveDebounceTime:5},y=e=>{let{service:n,panelStyles:r={},containerStyles:i={},inactiveStyle:o={}}=e,a={...g,...o},l=(0,s.useRef)(null),[h,c]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=l.current;e&&n.canvas&&e.appendChild(n.canvas);let r=n.onActive(e=>{c(e)});return()=>{r.dispose()}},[]);let u=h?1:a.scale,d=h?1:a.opacity,p=h?0:a.translateX,f=h?0:a.translateY;return s.createElement("div",{className:"minimap-container",style:{position:"fixed",right:30,bottom:70,transition:"all 0.3s ease",transform:`scale(${u}) translate(${p}px, ${f}px)`,opacity:d,transformOrigin:"bottom right",...i}},s.createElement("div",{className:"minimap-panel",style:{display:"flex",width:"100%",height:"100%",borderRadius:"10px",backgroundColor:"rgba(255, 255, 255, 1)",border:"0.572px solid rgba(6, 7, 9, 0.10)",overflow:"hidden",boxShadow:"0px 2.289px 6.867px 0px rgba(0, 0, 0, 0.08), 0px 4.578px 13.733px 0px rgba(0, 0, 0, 0.04)",boxSizing:"border-box",padding:8,...r},"data-flow-editor-selectable":"false",ref:l,onMouseEnter:()=>{n.setActivate(!0)},onMouseLeave:()=>{n.setActivate(!1)},onTouchStartCapture:()=>{n.setActivate(!0)},onTouchEndCapture:()=>{n.setActivate(!1)}}))},O=i||(i={});let b=e=>e.width>0&&e.height>0;O.clear=e=>{let{canvas:n,context:r}=e;r.clearRect(0,0,n.width,n.height)},O.backgroundColor=e=>{let{canvas:n,context:r,color:i}=e;r.fillStyle=i,r.fillRect(0,0,n.width,n.height)},O.rectangle=e=>{let{context:n,rect:r,color:i}=e;b(r)&&(n.fillStyle=i,n.fillRect(r.x,r.y,r.width,r.height))},O.roundRectangle=e=>{let{context:n,rect:r,color:i,radius:s,borderColor:o,borderDashLength:a,borderWidth:l=0}=e,{x:h,y:c,width:u,height:d}=r;b(r)&&(n.beginPath(),n.moveTo(h+s,c),n.lineTo(h+u-s,c),n.quadraticCurveTo(h+u,c,h+u,c+s),n.lineTo(h+u,c+d-s),n.quadraticCurveTo(h+u,c+d,h+u-s,c+d),n.lineTo(h+s,c+d),n.quadraticCurveTo(h,c+d,h,c+d-s),n.lineTo(h,c+s),n.quadraticCurveTo(h,c,h+s,c),n.closePath(),n.fillStyle=i,n.fill(),o&&l>0&&(n.strokeStyle=o,n.lineWidth=l,a?n.setLineDash([a,a]):n.setLineDash([]),n.stroke(),n.setLineDash([])))},O.overlay=e=>{let{canvas:n,context:r,offset:i,scale:s,rect:o,color:a}=e;b(o)&&(r.fillStyle=a,r.fillRect(0,0,n.width,(o.y+i.y)*s),r.fillRect(0,(o.y+o.height+i.y)*s,n.width,n.height-(o.y+o.height+i.y)*s),r.fillRect(0,(o.y+i.y)*s,(o.x+i.x)*s,o.height*s),r.fillRect((o.x+o.width+i.x)*s,(o.y+i.y)*s,n.width-(o.x+o.width+i.x)*s,o.height*s))};var x=class{constructor(){this.onActive=e=>(this.onActiveCallbacks.add(e),{dispose:()=>{this.onActiveCallbacks.delete(e)}}),this.render=this._render,this.handleWheel=e=>{},this.handleStartDrag=e=>{o.D9.preventDefault(e),e.stopPropagation();let{viewRect:n,scale:r,offset:i}=this.createRenderContext(),s=this.canvas.getBoundingClientRect(),{clientX:a,clientY:l}=o.D9.getEventCoord(e),h={x:a-s.left,y:l-s.top},c=this.rectOnCanvas({rect:n,scale:r,offset:i});this.isPointInRect({point:h,rect:c})&&(this.isDragging=!0,this.dragStart=h,document.addEventListener("mousemove",this.handleDragging),document.addEventListener("mouseup",this.handleEndDrag),document.addEventListener("touchmove",this.handleDragging,{passive:!1}),document.addEventListener("touchend",this.handleEndDrag),document.addEventListener("touchcancel",this.handleEndDrag))},this.handleDragging=e=>{if(!this.isDragging||!this.dragStart)return;o.D9.preventDefault(e),e.stopPropagation();let{scale:n}=this.createRenderContext(),r=this.canvas.getBoundingClientRect(),{clientX:i,clientY:s}=o.D9.getEventCoord(e),a=i-r.left,l=s-r.top,h=(a-this.dragStart.x)/n,c=(l-this.dragStart.y)/n;this.updateScrollPosition(h,c),this.dragStart={x:a,y:l},this.render()},this.handleEndDrag=e=>{o.D9.preventDefault(e),e.stopPropagation(),document.removeEventListener("mousemove",this.handleDragging),document.removeEventListener("mouseup",this.handleEndDrag),document.removeEventListener("touchmove",this.handleDragging),document.removeEventListener("touchend",this.handleEndDrag),document.removeEventListener("touchcancel",this.handleEndDrag),this.isDragging=!1,this.dragStart=void 0,this.setActivate(this.isMouseInCanvas(e))},this.handleCursor=e=>{if(!this.activated)return;let{viewRect:n,scale:r,offset:i}=this.createRenderContext(),s=this.canvas.getBoundingClientRect(),o={x:e.clientX-s.left,y:e.clientY-s.top},a=this.rectOnCanvas({rect:n,scale:r,offset:i});this.isPointInRect({point:o,rect:a})?this.canvas.style.cursor="grab":this.canvas.style.cursor="default"},this.canvas=document.createElement("canvas"),this.context2D=this.canvas.getContext("2d"),this.initialized=!!this.context2D,this.onActiveCallbacks=new Set,this.toDispose=new h.Vd,this.render=this._render,this.activated=!1,this.isDragging=!1}init(e){this.options=m,Object.assign(this.options,e),this.setDebounce({enableDebounce:this.options.enableInactiveDebounce,debounceTime:this.options.inactiveDebounceTime}),this.initStyle(),this.mountListener()}dispose(){this.toDispose.dispose(),this.initialized=!1,this.activated=!1,this.removeEventListeners()}setActivate(e){e!==this.activated&&(e||!this.isDragging)&&(this.activated=e,e?(this.setDebounce({enableDebounce:this.options.enableActiveDebounce,debounceTime:this.options.activeDebounceTime}),this.addEventListeners()):(this.setDebounce({enableDebounce:this.options.enableInactiveDebounce,debounceTime:this.options.inactiveDebounceTime}),this.removeEventListeners()),this.render(),this.onActiveCallbacks.forEach(n=>n(e)))}initStyle(){if(!this.initialized)return;let{canvasClassName:e,canvasStyle:n}=this.options;this.canvas.className=e,this.style={...f,...n},this.canvas.width=this.style.canvasWidth,this.canvas.height=this.style.canvasHeight,this.canvas.style.borderRadius=this.style.canvasBorderRadius?`${this.style.canvasBorderRadius}px`:"unset"}setDebounce(e){let{enableDebounce:n,debounceTime:r}=e;n?this.render=(0,a.debounce)(this._render,r):this.render=this._render}_render(){if(!this.initialized)return;let e=this.createRenderContext();this.renderCanvas(e)}createRenderContext(){let{canvas:e,context2D:n,nodes:r}=this,i=this.nodeTransforms(r).map(e=>e.bounds),s=this.viewRect(),o=this.renderRect(i).withPadding({top:this.style.canvasPadding,bottom:this.style.canvasPadding,left:this.style.canvasPadding,right:this.style.canvasPadding}),a=h.M_.enlarge([s,o]),{scale:l,offset:c}=this.calculateScaleAndOffset({canvasRect:a});return{canvas:e,context2D:n,nodeRects:i,canvasRect:a,viewRect:s,renderRect:o,scale:l,offset:c}}renderCanvas(e){let{canvas:n,context2D:r,nodeRects:s,viewRect:o,scale:a,offset:l}=e;i.clear({canvas:n,context:r}),i.backgroundColor({canvas:n,context:r,color:this.style.canvasBackground}),i.roundRectangle({context:r,rect:this.rectOnCanvas({rect:o,scale:a,offset:l}),color:this.style.viewportBackground,radius:this.style.viewportBorderRadius}),s.forEach(e=>{i.roundRectangle({context:r,rect:this.rectOnCanvas({rect:e,scale:a,offset:l}),color:this.style.nodeColor,radius:this.style.nodeBorderRadius,borderWidth:this.style.nodeBorderWidth,borderColor:this.style.nodeBorderColor})}),i.roundRectangle({context:r,rect:this.rectOnCanvas({rect:o,scale:a,offset:l}),color:"rgba(255, 255, 255, 0)",radius:this.style.viewportBorderRadius,borderColor:this.style.viewportBorderColor,borderWidth:this.style.viewportBorderWidth,borderDashLength:this.style.viewportBorderDashLength}),i.overlay({canvas:n,context:r,offset:l,scale:a,rect:o,color:this.style.overlayColor})}calculateScaleAndOffset(e){let{canvasRect:n}=e,{width:r,height:i}=this.canvas,s=Math.min(r/n.width,i/n.height),o=n.width*s,a=n.height*s,l={x:(r-o)/2/s-n.x,y:(i-a)/2/s-n.y};return{scale:s,offset:l}}get nodes(){return this.document.getAllNodes().filter(e=>!e.hidden&&(e.flowNodeType===c.y.ROOT?void 0:!!this.options.enableDisplayAllNodes||!e.parent||e.parent.flowNodeType===c.y.ROOT||void 0))}nodeTransforms(e){return e.map(e=>e.getData(c.LY)).filter(Boolean)}renderRect(e){return h.M_.enlarge(e)}viewRect(){let{width:e,height:n,scrollX:r,scrollY:i,zoom:s}=this.playgroundConfig.config;return new h.M_(r/s,i/s,e/s,n/s)}mountListener(){let e=this.entityManager.onEntityChange(()=>this.render());this.toDispose.push(e)}rectOnCanvas(e){let{rect:n,scale:r,offset:i}=e;return new h.M_((n.x+i.x)*r,(n.y+i.y)*r,n.width*r,n.height*r)}isPointInRect(e){let{point:n,rect:r}=e;return n.x>=r.x&&n.x<=r.x+r.width&&n.y>=r.y&&n.y<=r.y+r.height}addEventListeners(){this.canvas.addEventListener("wheel",this.handleWheel),this.canvas.addEventListener("mousedown",this.handleStartDrag),this.canvas.addEventListener("touchstart",this.handleStartDrag,{passive:!1}),this.canvas.addEventListener("mousemove",this.handleCursor)}removeEventListeners(){this.canvas.removeEventListener("wheel",this.handleWheel),this.canvas.removeEventListener("mousedown",this.handleStartDrag),this.canvas.removeEventListener("touchstart",this.handleStartDrag),this.canvas.removeEventListener("mousemove",this.handleCursor)}isMouseInCanvas(e){let n=this.canvas.getBoundingClientRect(),{clientX:r,clientY:i}=o.D9.getEventCoord(e);return r>=n.left&&r<=n.right&&i>=n.top&&i<=n.bottom}updateScrollPosition(e,n){let{scrollX:r,scrollY:i,zoom:s}=this.playgroundConfig.config;this.playgroundConfig.updateConfig({scrollX:r+e*s,scrollY:i+n*s})}};p([(0,l.WQ)(c.mi)],x.prototype,"document",2),p([(0,l.WQ)(o.Zy)],x.prototype,"entityManager",2),p([(0,l.WQ)(o.d0)],x.prototype,"playgroundConfig",2),x=p([(0,l._G)()],x);var w=class extends o.Wd{constructor(){super(),this.className="gedit-minimap-layer gedit-playground-layer",this.node=h.Si.createDivWithClass(this.className),this.node.style.zIndex="9999"}render(){return this.options.disableLayer?s.createElement(s.Fragment,null):s.createElement(y,{service:this.service,panelStyles:this.options.panelStyles,containerStyles:this.options.containerStyles,inactiveStyle:this.options.inactiveStyle})}};w.type="FlowMinimapLayer",p([(0,l.WQ)(x)],w.prototype,"service",2),w=p([(0,l._G)()],w);var S=(0,o.XY)({onBind:({bind:e})=>{e(x).toSelf().inSingletonScope()},onInit:(e,n)=>{e.playground.registerLayer(w,n),e.get(x).init(n)},onDispose:e=>{e.get(x).dispose()}})},72342:function(e,n,r){"use strict";r.d(n,{$7:()=>_,BA:()=>k,Po:()=>d,Q3:()=>p,yQ:()=>w});var i,s=r(2543),o=r(67055),a=r(28602),l=r(26768),h=r(81376),c=r(96540),u=r(36833),d=((i=d||{}).onValueChange="onValueChange",i.onValueInit="onValueInit",i.onValueInitOrChange="onValueInitOrChange",i.onArrayAppend="onArrayAppend",i.onArrayDelete="onArrayDelete",i);function p(e){return"onFormValuesChange"in e}function f(e){return e.startsWith("/")?a.hd.normalize(e).slice(1).split("/").join("."):e}function g(e,n){return()=>{e?.(),n?.()}}function m(e,n,r){r.forEach(r=>{let i=e.get(r);i?.[n]&&(i[n](),delete i[n])})}var y=({formModel:e})=>e?.formControl?c.createElement(c.Fragment,null,c.createElement(l.lV,{control:e?.formControl,keepModelOnUnMount:!0},e.formMeta.render)):null,O=()=>({}),b=()=>new Map([["onValueInitOrChange",{}],["onValueChange",{}],["onValueInit",{}],["onArrayAppend",{}],["onArrayDelete",{}]]),x=()=>[],w=class extends a.mO{constructor(e){super(),this.effectMap=O(),this.effectReturnMap=b(),this.plugins=[],this.formFeedbacks=x(),this.onInitializedEmitter=new o.vl,this.onValidateEmitter=new o.vl,this.onValidate=this.onValidateEmitter.event,this.onInitialized=this.onInitializedEmitter.event,this.onDisposeEmitter=new o.vl,this.onDispose=this.onDisposeEmitter.event,this.toDispose=new o.Vd,this.onFormValuesChangeEmitter=new o.vl,this.onFormValuesChange=this.onFormValuesChangeEmitter.event,this.onValidChangeEmitter=new o.vl,this.onValidChange=this.onValidChangeEmitter.event,this.onFeedbacksChangeEmitter=new o.vl,this.onFeedbacksChange=this.onFeedbacksChangeEmitter.event,this._valid=null,this._feedbacks=[],this._initialized=!1,this.node=e,this.toDispose.pushAll([this.onInitializedEmitter,this.onValidateEmitter,this.onValidChangeEmitter,this.onFeedbacksChangeEmitter,this.onFormValuesChangeEmitter])}get valid(){return this._valid}set valid(e){this._valid=e,this.onValidChangeEmitter.fire(e)}get flowNodeEntity(){return this.node}get formManager(){return this.node.getService(a.A)}get formControl(){return this._formControl}get formMeta(){return this._formMeta||this.node.getNodeRegistry().formMeta}get values(){return this.nativeFormModel?.values}get feedbacks(){return this._feedbacks}updateFormValues(e){if(this.nativeFormModel){let n=this.formMeta.formatOnInit?this.formMeta.formatOnInit(e,this.nodeContext):e;this.nativeFormModel.values=n}}set feedbacks(e){this._feedbacks=e,this.onFeedbacksChangeEmitter.fire(e)}get formItemPathMap(){return new Map}get initialized(){return this._initialized}get nodeContext(){return{node:this.node,playgroundContext:this.node.getService(h.JF),clientContext:this.node.getService(h.bf)}}get nativeFormModel(){return this._formControl?._formModel}render(){return c.createElement(y,{formModel:this})}initPlugins(e){e.length&&(this.plugins=e,e.forEach(e=>{e.init(this)}))}init(e,n){let r=this.node.getData(a.LO);this.onFormValuesChange(()=>{this._valid=null,r.fireChange()}),(e.plugins||[])?.forEach(n=>{n.setupFormMeta&&(e=n.setupFormMeta(e,this.nodeContext))}),this._formMeta=e;let{validateTrigger:i,validate:o,effect:h}=e;h&&(this.effectMap=h);let c="function"==typeof e.defaultValues?e.defaultValues(this.nodeContext):e.defaultValues,u=e.formatOnInit?e.formatOnInit(n,this.nodeContext):n,{control:d}=(0,l.DG)({initialValues:u||c,validateTrigger:i,context:this.nodeContext,validate:o,disableAutoInit:!0});this._formControl=d;let p=d._formModel;this.toDispose.push(p),p.onFormValuesChange(e=>{this.onFormValuesChangeEmitter.fire(e)}),e.plugins&&this.initPlugins(e.plugins),p.onFormValuesChange(({values:e,prevValues:n,name:r,options:i})=>{Object.keys(this.effectMap).forEach(o=>{let a=(0,s.uniq)([...l.fo.findMatchPaths(e,o),...l.fo.findMatchPaths(n,o)]).filter(r=>(0,s.get)(e,r)!==(0,s.get)(n,r));if(l.fo.isMatchOrParent(o,r)){let e=l.fo.getParentPathByPattern(o,r);a.includes(e)||a.push(e)}let h=this.effectMap[o];a.forEach(o=>{let a=["onValueChange","onValueInitOrChange"];(0,s.isNil)((0,s.get)(n,o))&&(a=i?.action==="array-append"&&l.fo.isMatch(`${r}.*`,o)?[]:["onValueInit","onValueInitOrChange"]),m(this.effectReturnMap,o,a),h.forEach(({effect:r,event:i})=>{if(a.includes(i)){let a=r({name:o,value:(0,s.get)(e,o),prevValue:(0,s.get)(n,o),formValues:e,form:(0,l.ks)(this.nativeFormModel),context:this.nodeContext});if(a&&"function"==typeof a&&this.effectReturnMap.has(i)){let e=this.effectReturnMap.get(i);e[o]=g(e[o],a)}}})})})}),p.onFormValuesInit(({values:e,name:n,prevValues:r})=>{Object.keys(this.effectMap).forEach(i=>{let o=l.fo.findMatchPaths(e,i),a=this.effectMap[i];o.forEach(i=>{(l.fo.isMatchOrParent(n,i)||n===i)&&(m(this.effectReturnMap,i,["onValueInit","onValueInitOrChange"]),a.forEach(({event:n,effect:o})=>{if("onValueInit"===n||"onValueInitOrChange"===n){let a=o({name:i,value:(0,s.get)(e,i),formValues:e,prevValue:(0,s.get)(r,i),form:(0,l.ks)(this.nativeFormModel),context:this.nodeContext});if(a&&"function"==typeof a&&this.effectReturnMap.has(n)){let e=this.effectReturnMap.get(n);e[i]=g(e[i],a)}}}))})})}),p.onFieldModelCreate(e=>{let n=function(e,n){if(!n)return;if(n[e.name])return n[e.name];let r=(0,s.find)(Object.keys(n),n=>!!n.startsWith("regex:")&&RegExp(n.split(":")[1]).test(e.name));if(r)return n[r]}(e,this.effectMap);if(n?.length){let r=(0,s.groupBy)(n,"event");(0,s.mapKeys)(r,(n,r)=>{let i=e=>{n.forEach(({effect:n})=>n({...e,formValues:p.values,form:(0,l.ks)(this.nativeFormModel),context:this.nodeContext}))};switch(r){case"onArrayAppend":e instanceof l.RC&&e.onAppend(i);break;case"onArrayDelete":e instanceof l.RC&&e.onDelete(i)}})}}),this._formControl.init(),this._initialized=!0,this.onInitializedEmitter.fire(this),this.onDispose(()=>{this._initialized=!1,this.effectMap={},p.dispose()})}toJSON(){return this.formMeta.formatOnSubmit?this.formMeta.formatOnSubmit(this.nativeFormModel?.values,this.nodeContext):this.nativeFormModel?.values}clearValid(){}async validate(){return this.formFeedbacks=await this.nativeFormModel?.validate(),this.valid=(0,s.isEmpty)(this.formFeedbacks?.filter(e=>"error"===e.level)),this.onValidateEmitter.fire(this),this.valid}getValues(){return this._formControl?._formModel.values}getField(e){let n=e.includes("/")?f(e):e;return this.formControl?.getField(n)}getValueIn(e){let n=e.includes("/")?f(e):e;return this.nativeFormModel?.getValueIn(n)}setValueIn(e,n){let r=e.includes("/")?f(e):e;this.nativeFormModel?.setValueIn(r,n)}onFormValueChangeIn(e,n){if(!this._initialized)throw Error("[NodeEngine] FormModel Error: onFormValueChangeIn can not be called before initialized");return this.formControl._formModel.onFormValuesChange(({name:r,values:i,prevValues:o})=>{r===e&&n({value:(0,s.get)(i,e),prevValue:(0,s.get)(o,e),formValues:i,prevFormValues:o})})}getFormItemValueByPath(e){if(!e)return;if("/"===e)return this._formControl?._formModel.values;let n=f(e);return this.getValueIn(n)}async validateWithFeedbacks(){return await this.validate(),this.formFeedbacks.map(e=>({feedbackStatus:e.level,feedbackText:e.message,path:e.name}))}getFormItemByPath(e){if(!this.nativeFormModel)return;let n=this;if("/"===e)return{get value(){return n.nativeFormModel.values},set value(v){n.nativeFormModel.values=v}};let r=f(e),i=n.getValueIn(r);return{get value(){return i},set value(v){n.setValueIn(r,v)}}}dispose(){this.onDisposeEmitter.fire(),this.effectReturnMap.forEach(e=>{Object.values(e).forEach(e=>{e()})}),this.effectMap=O(),this.effectReturnMap=b(),this.plugins.forEach(e=>{e.dispose()}),this.plugins=[],this.formFeedbacks=x(),this._valid=null,this._formControl=void 0,this._initialized=!1,this.toDispose.dispose()}},S=class{constructor(e,n){this.name=e?.name||"",this.pluginId=`${this.name}__${(0,u.Ak)()}`,this.config=e,this.opts=n}get formModel(){return this._formModel}get ctx(){return{formModel:this.formModel,...this.formModel.nodeContext}}setupFormMeta(e,n){let r={...e};return this.config.onSetupFormMeta?.({mergeEffect:e=>{var n;n=r.effect||{},r.effect=(0,s.mergeWith)(n,e,function(e,n){return(e||[]).concat(n)})},mergeValidate:e=>{r.validate={...r.validate||{},...e}},addFormatOnInit:e=>{if(!r.formatOnInit){r.formatOnInit=e;return}let n=r.formatOnInit;r.formatOnInit=(r,i)=>e?.(n(r,i),i)},addFormatOnSubmit:e=>{if(!r.formatOnSubmit){r.formatOnSubmit=e;return}let n=r.formatOnSubmit;r.formatOnSubmit=(r,i)=>e?.(n(r,i),i)},...n},this.opts),r}init(e){this._formModel=e,this.config?.onInit?.(this.ctx,this.opts)}dispose(){this.config?.onDispose&&this.config?.onDispose(this.ctx,this.opts)}};function _(e){return function(n){return new S(e,n)}}function k(e){let n=e.getData(a.LO)?.getFormModel(),r=n?.nativeFormModel;if(!n||!r)return;let i={initialValues:r.initialValues,get values(){return r.values},state:r.state,getValueIn:e=>r.getValueIn(e),setValueIn:(e,n)=>r.setValueIn(e,n),updateFormValues:e=>{n.updateFormValues(e)},render:()=>c.createElement(a.x0,{node:e}),onFormValuesChange:n.onFormValuesChange.bind(n),onFormValueChangeIn:n.onFormValueChangeIn.bind(n),onValidate:n.nativeFormModel.onValidate,validate:n.validate.bind(n)};return Object.defineProperty(i,"_formModel",{enumerable:!1,get:()=>n}),i}},89723:function(e,n,r){"use strict";r.d(n,{KN:()=>d,eo:()=>u,vK:()=>c});var i,s=r(96540),o=r(67055);(e=>{let n,r=[],i=[],s=!1,o=!1,a=!1,l=!1;function h(e,n){if(l)throw n;console.error(`[Tracker error] ${e}`,n)}function c(e){if(o)throw Error("Can't call Tracker.flush while flushing");if(a)throw Error("Can't flush inside Tracker.autorun");o=!0,s=!0,l=!!(e=e||{}).throwFirstError;var n=0,d=!1;try{for(;r.length||i.length;){for(;r.length;){var p=r.shift();if(p._recompute(),p._needsRecompute()&&r.unshift(p),!e.finishSynchronously&&++n>100){d=!0;return}}if(i.length){var f=i.shift();try{f()}catch(e){h("afterFlush",e)}}}d=!0}finally{if(d||(o=!1,c({finishSynchronously:e.finishSynchronously,throwFirstError:!1})),s=!1,o=!1,r.length||i.length){if(e.finishSynchronously)throw Error("still have more to do?");setTimeout(u,10)}}}function u(){s||(setTimeout(c,0),s=!0)}function d(e){let r=n;n=void 0;try{return e(void 0)}finally{n=r}}function p(){return!!n}e.withComputation=function(e,r){let i=n;n=e;try{return r.call(null,e)}finally{n=i}},e.withoutComputation=d,e.isActive=p,e.getCurrentComputation=function(){return n},e.autorun=function(r,i){var s=new f(r,n,i?.onError);return p()&&e.onInvalidate(function(){s.stop()}),s};e.onInvalidate=function(e){if(!n)throw Error("Tracker.onInvalidate requires a currentComputation");n.onInvalidate(e)},e.inFlush=function(){return o},e.flush=function(e){c({finishSynchronously:!0,throwFirstError:e&&e.throwFirstError})},e.afterFlush=function(e){i.push(e),u()};class f{constructor(e,n,r){this._fn=e,this.parent=n,this._onError=r,this._onInvalidateCallbacks=[],this._onStopCallbacks=[],this._recomputing=!1,this.stopped=!1,this.invalidated=!1,this.firstRun=!0;let i=!0;try{this._compute(),i=!1}finally{this.firstRun=!1,i&&this.stop()}}onInvalidate(e){this.invalidated?d(e.bind(null,this)):this._onInvalidateCallbacks.push(e)}invalidate(){if(!this.invalidated){this._recomputing||this.stopped||(u(),r.push(this)),this.invalidated=!0;for(var e,n=0;e=this._onInvalidateCallbacks[n];n++)d(e.bind(null,this));this._onInvalidateCallbacks=[]}}stop(){if(!this.stopped){this.stopped=!0,this.invalidate();for(let e=0,n;n=this._onStopCallbacks[e];e++)d(n.bind(null,this));this._onStopCallbacks=[]}}onStop(e){this.stopped?d(e.bind(null,this)):this._onStopCallbacks.push(e)}_compute(){this.invalidated=!1;var n=a;a=!0;try{this._result=e.withComputation(this,this._fn)}finally{a=n}}_needsRecompute(){return this.invalidated&&!this.stopped}_recompute(){this._recomputing=!0;try{if(this._needsRecompute())try{this._compute()}catch(e){this._onError?this._onError(e):h("recompute",e)}}finally{this._recomputing=!1}}flush(){this._recomputing||this._recompute()}run(){this.invalidate(),this.flush()}get result(){return this._result}}e.Computation=f,e.Dependency=class{constructor(){this._dependents=new Set}depend(e){if(!e){if(!p())return!1;e=n}return!this._dependents.has(e)&&(this._dependents.add(e),e.onInvalidate(()=>{this._dependents.delete(e)}),!0)}changed(){for(let e of this._dependents)e.invalidate()}hasDependents(){return 0!==this._dependents.size}}})(i||(i={}));var a=class{constructor(e,n){this._dep=new i.Dependency,this._isEqual=(e,n)=>e==n,this._value=e,n?.isEqual&&(this._isEqual=n.isEqual)}_addDepend(e){i.isActive()&&e.depend()}hasDependents(){return this._dep.hasDependents()}get value(){return this._addDepend(this._dep),this._value}set value(e){this._isEqual(this._value,e)||(this._value=e,this._dep.changed())}};function l(e,n){if("Proxy"in window)return new Proxy(e,n);let r={};for(let i in e)Object.defineProperty(r,i,{enumerable:!0,get:n.get?()=>n.get(e,i):void 0,set:n.set?r=>n.set(e,i,r):void 0});return r}var h=i.Dependency,c=class extends a{constructor(){super(...arguments),this._keyDeps=new Map}set(e,n){this._ensureKey(e);let r=this._value[e];return!this._isEqual(r,n)&&(this._value[e]=n,this._keyDeps.get(e).changed(),!0)}get(e){return this._ensureKey(e),this._addDepend(this._keyDeps.get(e)),this._value[e]}_ensureKey(e){this._keyDeps.has(e)||this._keyDeps.set(e,new h)}hasDependents(){if(this._dep.hasDependents())return!0;for(let e of this._keyDeps.values())if(e.hasDependents())return!0;return!1}keys(){return Object.keys(this._value)}set value(e){this._isEqual(this._value,e)||(this._value=e,this._keyDeps.clear(),this._dep.changed())}get value(){return this._addDepend(this._dep),this._proxyValue||(this._proxyValue=l(this._value,{get:(e,n)=>this.get(n),set:(e,n,r)=>(this.set(n,r),!0)})),this._proxyValue}get readonlyValue(){return this._addDepend(this._dep),this._proxyReadonlyValue||(this._proxyReadonlyValue=l(this._value,{get:(e,n)=>this.get(n),set:(e,n)=>{throw Error(`[ReactiveState] Cannnot set readonly field "${n}"`)}})),this._proxyReadonlyValue}};function u(e){let n=(0,o.b6)(),r=(0,s.useMemo)(()=>new Map,[]),a=(0,s.useCallback)(()=>{r.forEach(e=>e.stop()),r.clear()},[]);return(0,s.useEffect)(()=>a,[]),a(),(0,s.useMemo)(()=>void 0===e?{}:l(e,{get(s,o){let a=r.get(o);return a||(a=new i.Computation(r=>r.firstRun?e[o]:void n()),r.set(o,a)),e[o]}}),[e])}function d(e){return u(e.readonlyValue)}var{Dependency:p,Computation:f}=i},21727:function(e,n,r){"use strict";r.d(n,{$p:()=>A,BY:()=>M,HT:()=>P,LK:()=>E,QX:()=>k,et:()=>J,ev:()=>et,mE:()=>ei,qg:()=>N,tk:()=>es,ub:()=>en});var i,s,o=r(32893),a=r(81376),l=r(67055),h=r(2543),c=r(11812),u=r(40961),d=r(96540),p=r(24174),f=Object.defineProperty,g=Object.getOwnPropertyDescriptor,m=(e,n,r,i)=>{for(var s,o=i>1?void 0:i?g(n,r):n,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i?s(n,r,o):s(o))||o);return i&&o&&f(n,r,o),o},y="#BBBFC4";function O(){let e=(0,a.h1)(o.sc);return{baseColor:e.constants?.[o.$B.BASE_COLOR]||y,baseActivatedColor:e.constants?.[o.$B.BASE_ACTIVATED_COLOR]||"#82A7FC"}}var b={stroke:y,fill:"transparent",strokeLinecap:"round",strokeLinejoin:"round"};function x(e){let{isVertical:n}=e.entity;if(n){let n=e.entity.next?.firstChild&&!e.entity.next.isInlineBlocks?e.entity.next.firstChild.getData(o.LY).size.width:e.entity.next?.getData(o.LY).size.width;return Math.max(e.entity.getData(o.LY)?.size.width??o.QD[o.Uy.HOVER_AREA_WIDTH],n||0)}return e.transform.next?e.transform.next.inputPoint.x-e.transform.outputPoint.x:32}function w(e){let{isVertical:n}=e.entity;if(n)return e.transform.next?e.transform.next.inputPoint.y-e.transform.outputPoint.y:32;let r=e.entity.next?.firstChild&&!e.entity.next.isInlineBlocks?e.entity.next.firstChild.getData(o.LY).size.height:e.entity.next?.getData(o.LY).size.height;return Math.max(e.entity.getData(o.LY)?.size.height||280,r||0)}var S=class extends a.ot{constructor(e){super(e),this.containerX=0,this.containerY=0,this.playgroundConfigEntity=this.entityManager.getEntity(a.d0,!0)}get hasScroll(){return!!(this._scrollXInterval||this._scrollYInterval)}isCollision(e,n,r){let i=this.playgroundConfigEntity.finalScale||0;return r?this.isBranchCollision(e,n,i):this.isNodeCollision(e,n,i)}isNodeCollision(e,n,r){let{labels:i}=e,{isVertical:s}=e.entity;return{hasCollision:i.some(i=>{if(!i||![o.$x.ADDER_LABEL,o.$x.COLLAPSE_ADDER_LABEL].includes(i.type))return!1;let a=s?e.transform.bounds.width:32,h=s?32:e.transform.bounds.height,c=new l.M_((i.offset.x-a/2)*r,(i.offset.y-h/2)*r,a*r,h*r);return l.M_.intersects(c,n)}),labelOffsetType:void 0}}isBranchCollision(e,n,r){let{labels:i}=e,{isVertical:s}=e.entity,a=o.Kr.NORMAL_BRANCH;return{hasCollision:i.some(e=>{if(!e||e.type!==o.$x.BRANCH_DRAGGING_LABEL)return!1;let i=s?64:e.width||0,h=s?e.width||0:64,c=new l.M_((e.offset.x-h/2)*r,(e.offset.y-i/2)*r,h*r,i*r),u=l.M_.intersects(c,n);return u&&(a=e.props.side),u}),labelOffsetType:a}}_startScrollX(e,n){if(this._scrollXInterval)return;let r=window.setInterval(()=>{let e=this._scrollXInterval;if(!e)return;let r=e.origin=n?e.origin+4:e.origin-4;this.playgroundConfigEntity.updateConfig({scrollX:r});let i=this.playgroundConfigEntity.config;i?.scrollX===r&&(n?this.containerX+=4:this.containerX-=4,this.setDomStyle())},20);this._scrollXInterval={interval:r,origin:e}}_stopScrollX(){this._scrollXInterval&&(clearInterval(this._scrollXInterval.interval),this._scrollXInterval=void 0)}_startScrollY(e,n){if(this._scrollYInterval)return;let r=window.setInterval(()=>{let e=this._scrollYInterval;if(!e)return;let r=e.origin=n?e.origin+4:e.origin-4;this.playgroundConfigEntity.updateConfig({scrollY:r});let i=this.playgroundConfigEntity.config;i?.scrollY===r&&(n?this.containerY+=4:this.containerY-=4,this.setDomStyle())},20);this._scrollYInterval={interval:r,origin:e}}_stopScrollY(){this._scrollYInterval&&(clearInterval(this._scrollYInterval.interval),this._scrollYInterval=void 0)}stopAllScroll(){this._stopScrollX(),this._stopScrollY()}setDomStyle(){this.containerDom.style.left=`${this.containerX}px`,this.containerDom.style.top=`${this.containerY}px`}scrollDirection(e,n,r,i){let s=this.playgroundConfigEntity.config,o=s.scrollX,a=s.scrollY;return(this.containerDom=n,this.containerX=r,this.containerY=i,s.height+s.clientY-e.clientY<20)?(this._startScrollY(a,!0),1):e.clientY-s.clientY<20?(this._startScrollY(a,!1),0):(this._stopScrollY(),s.width+s.clientX-e.clientX<20)?(this._startScrollX(o,!0),3):e.clientX-s.clientX<80?(this._startScrollX(o,!1),2):void this._stopScrollX()}dispose(){this.toDispose.dispose()}};S.type="FlowDragEntity";var _=class extends a.ot{constructor(){super(...arguments),this.boundsPadding=10}getDefaultConfig(){return{selectedNodes:[]}}get selectedNodes(){return this.config.selectedNodes}set selectedNodes(e){((e=function(e){if(0===e.length)return[];let n=e.map(e=>(function(e){let n=[e];for(e=e.parent;e;)n.push(e),e=e.parent;return n.reverse()})(e)),r=Math.min(...n.map(e=>e.length)),i=0,s=[];for(;i<r&&!((s=(0,h.uniq)(n.map(e=>e[i]))).length>1);)i+=1;return(0,h.uniq)(s.map(e=>(function(e){for(;e.originParent;)e=e.originParent;return e})(e)))}(e)).length!==this.config.selectedNodes.length||e.some(e=>!this.config.selectedNodes.includes(e)))&&(this.config.selectedNodes.forEach(n=>{e.includes(n)||(n.getData(o.he).activated=!1)}),e.forEach(e=>{e.getData(o.he).activated=!0}),l.Gs.isArrayShallowChanged(this.config.selectedNodes,e)&&this.updateConfig({selectedNodes:e}))}clearSelectedNodes(){0!==this.config.selectedNodes.length&&(this.config.selectedNodes.forEach(e=>{e.getData(o.he).activated=!1}),this.updateConfig({selectedNodes:[]}))}selectFromBounds(e,n){let r=[];n.forEach(n=>{l.M_.intersects(e,n.bounds)&&(n.entity.originParent?r.push(n.entity.originParent):r.push(n.entity))}),this.selectedNodes=r}getSelectedBounds(){let e=this.selectedNodes;return 0===e.length?l.M_.EMPTY:l.M_.enlarge(e.map(e=>e.getData(o.LY).bounds)).pad(this.boundsPadding)}};_.type="FlowSelectConfigEntity";var k=class extends a.ot{get dragInfo(){return this.config}setDragInfo(e){this.updateConfig(e)}get disabled(){return this.config&&!!this.config.disabled}set disabled(e){this.updateConfig({disabled:e})}get isStart(){return this.dragInfo.isStart}get isMoving(){return this.dragInfo.isMoving}get position(){let{dragInfo:e}=this;return{x:e.startPos.x<e.endPos.x?e.startPos.x:e.endPos.x,y:e.startPos.y<e.endPos.y?e.startPos.y:e.endPos.y}}get size(){let{dragInfo:e}=this;return{width:Math.abs(e.startPos.x-e.endPos.x),height:Math.abs(e.startPos.y-e.endPos.y)}}get collapsed(){let{size:e}=this;return 0===e.width&&0===e.height}collapse(){this.setDragInfo({...this.dragInfo,isMoving:!1,isStart:!1})}toRectangle(e){let{position:n,size:r}=this;return new l.M_(n.x/e,n.y/e,r.width/e,r.height/e)}};k.type="SelectorBoxConfigEntity";var C=class{observe(e,n){let r=new ResizeObserver(e=>{window.requestAnimationFrame(()=>{if(!Array.isArray(e)||!e.length)return;let{contentRect:r,target:i}=e[0],s=!!r&&(0!==r.bottom||0!==r.height||0!==r.left||0!==r.right||0!==r.top||0!==r.width||0!==r.x||0!==r.y)&&!0,o=!i.parentNode,a=(e=>{if(!e||(0,h.isNil)(e?.offsetParent))return!0;let n=window.getComputedStyle(e);return n?.display==="none"})(i.parentNode);!s||o||a||(n.size={width:Math.round(10*r.width)/10,height:Math.round(10*r.height)/10})})});return r.observe(e),l.jG.create(()=>{r.unobserve(e)})}};C=m([(0,c._G)()],C);var E=class extends a.Wd{constructor(){super(...arguments),this.node=l.Si.createDivWithClass("gedit-flow-nodes-layer"),this.renderCache=l.l2.create(e=>{let n,{renderState:r}=e,{node:i}=r,{entity:s}=e;i.id=s.id;let o=()=>{n&&(i.parentElement&&this.renderElement.removeChild(i),n.dispose(),n=void 0)};return!n&&(this.renderElement.appendChild(i),s.getNodeMeta().autoResizeDisable||(n=this.resizeObserver.observe(i,e))),{dispose:o,updateBounds:()=>{let{bounds:n}=e,r=parseFloat(i.style.left),s=parseFloat(i.style.top);this.isCoordEqual(r,n.x)&&this.isCoordEqual(s,n.y)||(i.style.left=`${n.x}px`,i.style.top=`${n.y}px`)}}})}get transformVisibles(){return this.document.getRenderDatas(o.LY,!1)}onZoom(e){this.node.style.transform=`scale(${e})`}dispose(){this.renderCache.dispose(),super.dispose()}isCoordEqual(e,n){return .05>Math.abs(e-n)}onReady(){this.node.style.zIndex="10"}get visibeBounds(){return this.transformVisibles.map(e=>e.bounds)}updateNodesBounds(){this.renderCache.getMoreByItems(this.transformVisibles).forEach(e=>e.updateBounds())}autorun(){this.documentTransformer.loading||(this.documentTransformer.refresh(),this.updateNodesBounds())}get renderElement(){if("function"==typeof this.options.renderElement){let e=this.options.renderElement();if(e)return e}else if(void 0!==this.options.renderElement)return this.options.renderElement;return this.node}};m([(0,c.WQ)(o.mi)],E.prototype,"document",2),m([(0,c.WQ)(C)],E.prototype,"resizeObserver",2),m([(0,a.Lb)(o.oJ)],E.prototype,"documentTransformer",2),m([(0,a.fz)(o.mp,o.LY)],E.prototype,"_transforms",2),E=m([(0,c._G)()],E);var T=Symbol("FlowRendererContribution"),P=((i=P||{})[i.REACT=0]="REACT",i[i.DOM=1]="DOM",i[i.TEXT=2]="TEXT",i),A=((s=A||{}).NODE_RENDER="node-render",s.ADDER="adder",s.COLLAPSE="collapse",s.BRANCH_ADDER="branch-adder",s.TRY_CATCH_COLLAPSE="try-catch-collapse",s.DRAG_NODE="drag-node",s.DRAGGABLE_ADDER="draggable-adder",s.DRAG_HIGHLIGHT_ADDER="drag-highlight-adder",s.DRAG_BRANCH_HIGHLIGHT_ADDER="drag-branch-highlight-adder",s.SELECTOR_BOX_POPOVER="selector-box-popover",s.CONTEXT_MENU_POPOVER="context-menu-popover",s.SUB_CANVAS="sub-canvas",s.SLOT_ADDER="slot-adder",s.SLOT_LABEL="slot-label",s.SLOT_COLLAPSE="slot-collapse",s.ARROW_RENDERER="arrow-renderer",s.MARKER_ARROW="marker-arrow",s.MARKER_ACTIVATE_ARROW="marker-active-arrow",s),M=class{constructor(){this.componentsMap=new Map,this.textMap=new Map,this.contribs=[]}init(){this.contribs.forEach(e=>e.registerRenderer?.(this))}registerRendererComponents(e,n){this.componentsMap.set(e,n)}registerReactComponent(e,n){this.componentsMap.set(e,{type:0,renderer:n})}registerText(e){Object.entries(e).forEach(([e,n])=>{this.textMap.set(e,n)})}getText(e){return p.F.t(e,{defaultValue:""})||this.textMap.get(e)}getRendererComponent(e){let n=this.componentsMap.get(e);if(!n)throw Error(`Unknown render key ${e}`);return n}tryToGetRendererComponent(e){return this.componentsMap.get(e)}registerLayers(...e){e.forEach(e=>this.pipeline.registerLayer(e))}registerLayer(e,n){this.pipeline.registerLayer(e,n)}};m([(0,c.tt)(T),(0,c.lq)()],M.prototype,"contribs",2),m([(0,c.WQ)(a.iE)],M.prototype,"pipeline",2),M=m([(0,c._G)()],M);var N=class extends a.Wd{constructor(){super(...arguments),this.renderMemoCache=new WeakMap,this.node=l.Si.createDivWithClass("gedit-flow-nodes-layer"),this.reactPortals=l.l2.create(e=>{let{node:n,entity:r}=e,{config:i}=this,s=this.getPortalRenderer(e);return{id:n.id||r.id,dispose:()=>{},Portal:function(){return d.useEffect(()=>{if(!r.getNodeMeta().autoResizeDisable&&n.clientWidth&&n.clientHeight){let e=r.getData(o.LY);e&&(e.size={width:n.clientWidth,height:n.clientHeight})}},[r,n]),u.createPortal(d.createElement(a.id.Provider,{value:r},d.createElement(s,{node:r,version:e?.version,activated:e?.activated,readonly:i.readonly,disabled:i.disabled})),n)}}})}get renderStatesVisible(){return this.document.getRenderDatas(o.he,!1)}getPortalRenderer(e){let n=e.entity.getNodeMeta(),r=this.rendererRegistry.getRendererComponent(n.renderKey||"node-render").renderer,i=this.renderMemoCache.get(r);return i||(i=d.memo(r),this.renderMemoCache.set(r,i)),i}onZoom(e){this.node.style.transform=`scale(${e})`}dispose(){this.reactPortals.dispose(),super.dispose()}onReady(){this.node.style.zIndex="10"}onReadonlyOrDisabledChange(){this.render()}getPortals(){return this.reactPortals.getMoreByItems(this.renderStatesVisible)}render(){return this.documentTransformer.loading?d.createElement(d.Fragment,null):(this.documentTransformer.refresh(),d.createElement(d.Fragment,null,this.getPortals().map(e=>d.createElement(e.Portal,{key:e.id}))))}};m([(0,c.WQ)(o.mi)],N.prototype,"document",2),m([(0,c.WQ)(M)],N.prototype,"rendererRegistry",2),m([(0,a.Lb)(o.oJ)],N.prototype,"documentTransformer",2),m([(0,a.fz)(o.mp,o.he)],N.prototype,"_renderStates",2),N=m([(0,c._G)()],N);var D=function(e){let{from:n,to:r,activated:i,style:s}=e,{baseColor:o,baseActivatedColor:a}=O();return d.createElement("path",{"data-line-id":e.lineId,d:`M ${n.x} ${n.y} L ${r.x} ${r.y}`,...b,stroke:i?a:o,style:s})},I="$marker_arrow$",$=function(e){let{baseColor:n}=O();return d.createElement("marker",{"data-line-id":e.id,id:e.id||I,markerWidth:"11",markerHeight:"14",refX:"10",refY:"7",orient:"auto"},d.createElement("path",{d:"M9.6 5.2C10.8 6.1 10.8 7.9 9.6 8.8L3.6 13.3C2.11672 14.4125 0 13.3541 0 11.5L0 2.5C0 0.645898 2.11672 -0.412461 3.6 0.7L9.6 5.2Z",fill:n}))},R="$marker_arrow_activated$",L=function(e){let{baseActivatedColor:n}=O();return d.createElement("marker",{"data-line-id":e.id,id:e.id||R,markerWidth:"11",markerHeight:"14",refX:"10",refY:"7",orient:"auto"},d.createElement("path",{d:"M9.6 5.2C10.8 6.1 10.8 7.9 9.6 8.8L3.6 13.3C2.11672 14.4125 0 13.3541 0 11.5L0 2.5C0 0.645898 2.11672 -0.412461 3.6 0.7L9.6 5.2Z",fill:n}))};function Q(e){let n=(0,a.h1)(M),r=n?.tryToGetRendererComponent(e.activated?"marker-active-arrow":"marker-arrow");return r?d.createElement(r.renderer,{...e}):e.activated?d.createElement("defs",null,d.createElement(L,{id:e.id})):d.createElement("defs",null,d.createElement($,{id:e.id}))}var j=function(e){let{vertices:n,radius:r=16,hide:i,xRadius:s,yRadius:a,...c}=e,{from:u,to:p,arrow:f,activated:g,style:m}=c||{},{baseActivatedColor:y,baseColor:x}=O(),w=n||(e.isHorizontal?function(e,n=16,r=20){let{from:i,to:s,type:a}=e||{},l=Math.abs(s.y-i.y),h=Math.abs(s.x-i.x),c=h/n,u=l/r,d=[];if(c<1)return[];switch(a){case o.lY.DIVERGE_LINE:case o.lY.DRAGGING_LINE:if(c<=1)return[{x:s.x,y:i.y,radiusX:h}];if(d=[{x:i.x+r,y:i.y},{x:i.x+r,y:s.y}],c<2){let e=h-r;d=[{x:i.x+e,y:i.y,radiusX:e},{x:i.x+e,y:s.y}]}return u<2&&(d[0].moveY=l/2,d[1].moveY=l/2),d;case o.lY.MERGE_LINE:if(c<2)return[{x:s.x,y:i.y}];return d=[{x:s.x-r,y:i.y},{x:s.x-r,y:s.y}],u<2&&(d[0].moveY=l/2,d[1].moveY=l/2),d}return[]}(c,s,a):function(e,n=16,r=20){let{from:i,to:s,type:a}=e||{},l=Math.abs(s.y-i.y),h=Math.abs(s.x-i.x),c=l/r,u=h/n,d=[];if(c<1)return[];switch(a){case o.lY.DIVERGE_LINE:case o.lY.DRAGGING_LINE:if(c<=1)return[{x:s.x,y:i.y,radiusY:l}];if(d=[{x:i.x,y:i.y+r},{x:s.x,y:i.y+r}],c<2){let e=l-r;d=[{x:i.x,y:i.y+e,radiusY:e},{x:s.x,y:i.y+e}]}return u<2&&(d[0].moveX=h/2,d[1].moveX=h/2),d;case o.lY.MERGE_LINE:if(c<2)return[{x:i.x,y:s.y}];return d=[{x:i.x,y:s.y-r},{x:s.x,y:s.y-r}],u<2&&(d[0].moveX=h/2,d[1].moveX=h/2),d}return[]}(c,s,a)),S=(0,d.useMemo)(()=>w.map((e,n)=>{let i=w[n-1]||u,s=w[n+1]||p,o={x:Math.abs(i.x-e.x),y:Math.abs(i.y-e.y)},a={x:Math.abs(s.x-e.x),y:Math.abs(s.y-e.y)},c=0===o.x&&0===a.y,d=0===o.y&&0===a.x;c||d||console.error(`vertex ${e.x},${e.y} is not right angle`);let f=new l.bR().copyFrom(e),g=new l.bR().copyFrom(e),m=(0,h.isNil)(e.radiusX)?r:e.radiusX,y=(0,h.isNil)(e.radiusY)?r:e.radiusY,O=m,b=y;if(c){b=Math.min(o.y,y);let n=(0,h.isNil)(e.moveY)?b:e.moveY;f.y+=u.y<e.y?-n:+n,O=Math.min(a.x,m);let r=(0,h.isNil)(e.moveX)?O:e.moveX;g.x+=p.x<e.x?-r:+r}if(d){O=Math.min(o.x,m);let n=(0,h.isNil)(e.moveX)?O:e.moveX;f.x+=u.x<e.x?-n:+n,b=Math.min(a.y,y);let r=(0,h.isNil)(e.moveY)?b:e.moveY;g.y+=p.y<e.y?-r:+r}"truncate"===e.radiusOverflow&&(O=m,b=y);let x=(e.x-f.x)*(g.y-f.y)-(e.y-f.y)*(g.x-f.x);return`L ${f.x} ${f.y} A ${O} ${b} 0 0 ${+(x>0)} ${g.x} ${g.y}`}).join(" "),[w]);if(i)return null;let _=`M ${u.x} ${u.y} ${S} L ${p.x} ${p.y}`,k=g?`${R}${e.lineId}`:`${I}${e.lineId}`;return d.createElement(d.Fragment,null,f?d.createElement(Q,{id:k,activated:g}):null,d.createElement("path",{"data-line-id":e.lineId,d:_,...b,stroke:g?y:x,...f?{markerEnd:`url(#${k})`}:{},style:m}))},V=function(e){let{renderKey:n,rendererRegistry:r,...i}=e;if(!n)return d.createElement(d.Fragment,null);let s=r.getRendererComponent(n);if(!s)return d.createElement(d.Fragment,null);let o=s.renderer;return d.createElement(o,{lineId:e.lineId,...i})},z=class extends a.Wd{constructor(){super(...arguments),this.node=l.Si.createDivWithClass("gedit-flow-lines-layer"),this.onViewportChange=(0,h.throttle)(()=>{this.render()},100)}get transitions(){return this.document.getRenderDatas(o.Me)}onZoom(){let e=this.node.querySelector("svg.flow-lines-container");e?.setAttribute?.("viewBox",this.viewBox)}onReady(){this.node.style.zIndex="1"}get viewBox(){let e=1e3/this.config.finalScale;return`0 0 ${e} ${e}`}render(){let e=[],n=this.config.isViewportVisible.bind(this.config);if(this.documentTransformer.loading)return d.createElement(d.Fragment,null);this.documentTransformer.refresh(),this.transitions.forEach(r=>{!function(e){let{data:n,rendererRegistry:r,linesSave:i,dragService:s}=e,{lines:a,entity:h}=n||{},c=(0,o.fn)(h,o.Uy.ROUNDED_LINE_X_RADIUS),u=(0,o.fn)(h,o.Uy.ROUNDED_LINE_Y_RADIUS);a.forEach((a,h)=>{let p=l.M_.createRectangleWithTwoPoints(a.from,a.to).pad(10);if(e.isViewportVisible(p)){let e=((e,i)=>{let{renderData:a}=n,{isVertical:l}=n.entity,{lineActivated:h}=a||{},p=(e.type===o.lY.DRAGGING_LINE||e.isDraggingLine)&&!s.isDroppableBranch(n.entity,e.side),f=(e.type===o.lY.DRAGGING_LINE||e.isDraggingLine)&&n.entity?.id===s.dropNodeId&&e.side===s.labelSide;switch(e.type){case o.lY.STRAIGHT_LINE:return d.createElement(D,{key:`${n.entity.id}_${i}`,lineId:n.entity.id,activated:h,...e});case o.lY.DIVERGE_LINE:case o.lY.DRAGGING_LINE:case o.lY.MERGE_LINE:case o.lY.ROUNDED_LINE:return d.createElement(j,{key:`${n.entity.id}_${i}`,lineId:n.entity.id,isHorizontal:!l,activated:h||f,...e,xRadius:c,yRadius:u,hide:p});case o.lY.CUSTOM_LINE:return d.createElement(V,{key:`${n.entity.id}_${i}`,lineId:n.entity.id,...e,rendererRegistry:r})}})(a,h);e&&i.push(e)}})}({data:r,rendererRegistry:this.rendererRegistry,isViewportVisible:n,linesSave:e,dragService:this.dragService})});let{activateLines:r=[],normalLines:i=[]}=(0,h.groupBy)(e,e=>e.props.activated?"activateLines":"normalLines"),s=[...i,...r];return d.createElement("svg",{className:"flow-lines-container",width:"1000",height:"1000",overflow:"visible",viewBox:this.viewBox,xmlns:"http://www.w3.org/2000/svg"},s)}};function B(e){let{data:n,rendererRegistry:r,forceVisible:i,hoverHeight:s=w(n),hoverWidth:a=x(n),wrapperStyle:l,...h}=e,{activateNode:c}=h,[u,p]=(0,d.useState)(!1),f=c?.getData(o.he),g=(0,d.useCallback)(()=>{p(!0),f?.toggleMouseEnter()},[]),m=(0,d.useCallback)(()=>{p(!1),f?.toggleMouseLeave()},[]),y=r.getRendererComponent("collapse"),O=n.entity,b=d.createElement(y.renderer,{node:O,collapseNode:O,...h,hoverActivated:u}),S=n.collapsed||f?.hovered||u||i;return d.createElement("div",{className:"flow-canvas-collapse",onMouseEnter:g,onMouseLeave:m,style:{width:a,height:s,display:"flex",justifyContent:"center",alignItems:"center",...l}},S?b:null)}function F(e){let{data:n,rendererRegistry:r,hoverHeight:i=w(n),hoverWidth:s=x(n),...l}=e,[h,c]=(0,d.useState)(!1),u=(0,d.useCallback)(()=>c(!0),[]),p=(0,d.useCallback)(()=>c(!1),[]),f=n.entity,g=((e,{dragService:n})=>n&&n.dragging&&n.isDroppableNode(e)?n.dropNodeId===e.id?"drag-highlight-adder":"draggable-adder":"adder")(f,{dragService:(0,a.h1)(o.gs)}),m=r.getRendererComponent(g),y=n.entity.document.renderTree.getOriginInfo(f).next,O=f.next,b=d.createElement(m.renderer,{node:f,from:f,to:y,renderTo:O,hoverActivated:h,setHoverActivated:c,hoverWidth:s,hoverHeight:i,...l});return d.createElement("div",{className:"flow-canvas-adder","data-testid":"sdk.flowcanvas.line.adder","data-from":f.id,"data-to":y?.id??"",onMouseEnter:u,onMouseLeave:p,style:{width:s,height:i,display:"flex",justifyContent:"center",alignItems:"center"}},b)}function Z(e){let{data:n,rendererRegistry:r,...i}=e,{activateNode:s}=i,[a,l]=(0,d.useState)(!1),h=s?.getData(o.he),c=(0,d.useCallback)(()=>{l(!0)},[]),u=(0,d.useCallback)(()=>{l(!1)},[]),p=s?.isVertical,f=h?.hovered||a;return p?d.createElement("div",{className:"flow-canvas-collapse-adder",onMouseEnter:c,onMouseLeave:u},(f||n.collapsed)&&d.createElement(B,{forceVisible:!0,...e,wrapperStyle:{alignItems:"flex-end"},hoverHeight:20}),!n.collapsed&&d.createElement(F,{...e,hoverHeight:f?20:40,hoverActivated:f})):d.createElement("div",{className:"flow-canvas-collapse-adder",onMouseEnter:c,onMouseLeave:u,style:{display:n.collapsed?"block":"flex"}},(f||n.collapsed)&&d.createElement(B,{forceVisible:!0,...e,wrapperStyle:{justifyContent:"flex-end"},hoverWidth:20}),!n.collapsed&&d.createElement(F,{...e,hoverWidth:f?20:40,hoverActivated:f}))}function q(e){let{data:n,rendererRegistry:r,side:i,...s}=e,l=n.entity,h=((e,{dragService:n,side:r})=>n.isDragBranch&&r&&n.labelSide===r&&n.isDroppableBranch(e,r)?n.dropNodeId===e.id?"drag-branch-highlight-adder":"draggable-adder":"")(l,{side:i,dragService:(0,a.h1)(o.gs)});if(!h)return null;let c=r.getRendererComponent(h),u=n.entity.document.renderTree.getOriginInfo(l).next,p=l.next,f=d.createElement(c.renderer,{node:l,from:l,to:u,renderTo:p,...s});return d.createElement("div",{className:"flow-canvas-branch-draggable-adder"},f)}m([(0,c.WQ)(o.mi)],z.prototype,"document",2),m([(0,c.WQ)(o.gs)],z.prototype,"dragService",2),m([(0,c.WQ)(M)],z.prototype,"rendererRegistry",2),m([(0,a.Lb)(o.oJ)],z.prototype,"documentTransformer",2),m([(0,a.Lb)(o.Ax)],z.prototype,"flowRenderState",2),m([(0,a.fz)(o.mp,o.Me)],z.prototype,"_transitions",2),z=m([(0,c._G)()],z);var W={fontSize:12,color:"#8F959E",textAlign:"center",whiteSpace:"nowrap",backgroundColor:"var(--g-editor-background)",lineHeight:"20px"},X=class extends a.Wd{constructor(){super(...arguments),this.node=l.Si.createDivWithClass("gedit-flow-labels-layer"),this.onViewportChange=(0,h.throttle)(()=>{this.render()},100)}get transitions(){return this.document.getRenderDatas(o.Me)}onZoom(e){this.node.style.transform=`scale(${e})`}onReady(){this.node.style.zIndex="9"}onReadonlyOrDisabledChange(){this.render()}render(){let e=[];if(this.documentTransformer?.loading)return d.createElement(d.Fragment,null);this.documentTransformer?.refresh?.();let{baseActivatedColor:n,baseColor:r}=O(),i=this.config.isViewportVisible.bind(this.config);return this.transitions.forEach(s=>{!function(e){let{data:n,rendererRegistry:r,labelsSave:i,getLabelColor:s}=e,{labels:a,renderData:h}=n||{},{activated:c}=h||{};a.forEach((a,h)=>{var u;e.isViewportVisible((u=a.offset,new l.M_(u.x-75,u.y-30,150,60)))&&i.push(((i,a)=>{let{offset:l,renderKey:h,props:u,rotate:p,origin:f,type:g}=i||{},m=l.x,y=l.y,O=null;switch(g){case o.$x.BRANCH_DRAGGING_LABEL:O=d.createElement(q,{labelId:i.labelId||e.data.entity.id,rendererRegistry:r,data:n,...u});break;case o.$x.ADDER_LABEL:O=d.createElement(F,{labelId:i.labelId||e.data.entity.id,rendererRegistry:r,data:n,...u});break;case o.$x.COLLAPSE_LABEL:O=d.createElement(B,{labelId:i.labelId||e.data.entity.id,rendererRegistry:r,data:n,...u});break;case o.$x.COLLAPSE_ADDER_LABEL:O=d.createElement(Z,{labelId:i.labelId||e.data.entity.id,rendererRegistry:r,data:n,...u});break;case o.$x.TEXT_LABEL:if(!h)return null;let b=r.getText(h)||h;O=d.createElement("div",{"data-label-id":i.labelId||e.data.entity.id,style:{...W,...u?.style,color:s(c),transform:p?`rotate(${p})`:void 0}},b);break;case o.$x.CUSTOM_LABEL:if(!h)return null;try{let s=r.getRendererComponent(h);O=d.createElement(s.renderer,{node:n.entity,labelId:i.labelId||e.data.entity.id,...u})}catch(e){console.error(e),O=h}}let x="number"==typeof f?.[0]?f?.[0]:.5,w="number"==typeof f?.[1]?f?.[1]:.5;return d.createElement("div",{key:`${n.entity.id}${a}`,"data-label-id":i.labelId||e.data.entity.id,style:{position:"absolute",left:m,top:y,transform:`translate(-${100*x}%, -${100*w}%)`}},O)})(a,h))})}({data:s,rendererRegistry:this.rendererRegistry,isViewportVisible:i,labelsSave:e,getLabelColor:e=>e?n:r})}),d.createElement(d.Fragment,null,e)}};function U(e,n){let r=n.finalScale;return new l.M_(e.scrollX/r,e.scrollY/r,n.config.width/r,n.config.height/r).pad(-120/r,-120/r)}m([(0,c.WQ)(o.mi)],X.prototype,"document",2),m([(0,c.WQ)(M)],X.prototype,"rendererRegistry",2),m([(0,a.Lb)(o.oJ)],X.prototype,"documentTransformer",2),m([(0,a.Lb)(o.Ax)],X.prototype,"flowRenderState",2),m([(0,a.fz)(o.mp,o.Me)],X.prototype,"_transitions",2),X=m([(0,c._G)()],X);var Y=Symbol("ScrollBarEvents"),G=0;function H(e){let n=Math.min(e/10*255,255),r=(G+=1)%3,i=()=>Math.floor(Math.random()*n);return`rgb(${0===r?i():0}, ${1===r?i():0}, ${2===r?i():0})`}var K=class extends a.Wd{constructor(){super(...arguments),this.node=document.createElement("div"),this.viewport=l.Si.createDivWithClass("gedit-flow-debug-bounds"),this.boundsNodes=l.Si.createDivWithClass("gedit-flow-debug-bounds"),this.pointsNodes=l.Si.createDivWithClass("gedit-flow-debug-points"),this.versionNodes=l.Si.createDivWithClass("gedit-flow-debug-versions gedit-hidden"),this.filterKey=window.location.search.match(/debug=([^&]+)/)?.[1]||"",this.originLine=document.createElement("div"),this.domCache=new WeakMap}get transforms(){return this.document.getRenderDatas(o.LY)}onReady(){this.node.style.zIndex="20",l.Si.setStyle(this.originLine,{position:"absolute",width:1,height:"100%",left:this.pipelineNode.style.left,top:0,borderLeft:"1px dashed rgba(255, 0, 0, 0.5)"}),this.pipelineNode.parentElement.appendChild(this.originLine),this.node.appendChild(this.viewport),this.node.appendChild(this.versionNodes),this.node.appendChild(this.boundsNodes),this.node.appendChild(this.pointsNodes),this.renderScrollViewportBounds()}onScroll(){this.originLine.style.left=this.pipelineNode.style.left,this.renderScrollViewportBounds()}onResize(){this.renderScrollViewportBounds()}onZoom(e){this.node.style.transform=`scale(${e})`,this.renderScrollViewportBounds()}createBounds(e,n,r){if(this.filterKey&&-1===e.key.indexOf(this.filterKey))return;let i=this.domCache.get(e),{bounds:s,inputPoint:o,outputPoint:a}=e;if(!i){let r=l.Si.createDivWithClass(""),s=l.Si.createDivWithClass(""),o=l.Si.createDivWithClass(""),a=l.Si.createDivWithClass("");r.title=e.key,s.title=e.key+"(input)",o.title=e.key+"(output)",a.title=e.key,this.boundsNodes.appendChild(r),this.pointsNodes.appendChild(s),this.pointsNodes.appendChild(o),this.versionNodes.appendChild(a),e.onDispose(()=>{r.remove(),s.remove(),o.remove()}),i={bbox:r,input:s,output:o,version:a,color:n},this.domCache.set(e,i)}l.Si.setStyle(i.version,{position:"absolute",marginLeft:"-9px",marginTop:"-10px",borderRadius:12,background:"#f54a45",padding:4,color:"navajowhite",display:e.renderState.hidden?"none":"block",zIndex:r+1e3,left:s.center.x,top:s.center.y}),i.version.innerHTML=e.version.toString(),l.Si.setStyle(i.input,{position:"absolute",width:10,height:10,marginLeft:-5,marginTop:-5,borderRadius:5,left:o.x,top:o.y,opacity:.4,zIndex:r,backgroundColor:i.color,whiteSpace:"nowrap",overflow:"visible"}),i.input.innerHTML=`${o.x},${o.y}`,l.Si.setStyle(i.output,{position:"absolute",width:10,height:10,marginLeft:-5,marginTop:-5,borderRadius:5,left:a.x,top:a.y,opacity:.4,zIndex:r,backgroundColor:i.color,whiteSpace:"nowrap",overflow:"visible"}),i.output.innerHTML=`${a.x},${a.y}`,l.Si.setStyle(i.bbox,{position:"absolute",width:s.width,height:s.height,left:s.left,top:s.top,opacity:`${r/30}`,backgroundColor:i.color})}renderScrollViewportBounds(){let e=U({scrollX:this.config.config.scrollX,scrollY:this.config.config.scrollY},this.config);l.Si.setStyle(this.viewport,{position:"absolute",width:e.width-2,height:e.height-2,left:e.left+1,top:e.top+1,border:"1px solid rgba(200, 200, 255, 0.5)"})}autorun(){if(this.documentTransformer.loading)return;this.documentTransformer.refresh();let e=H(0);this.document.traverse((n,r)=>{let i=n.getData(o.LY);e=H(r),this.createBounds(i,e,r)}),this.renderScrollViewportBounds()}};m([(0,c.WQ)(o.mi)],K.prototype,"document",2),m([(0,a.Lb)(o.oJ)],K.prototype,"documentTransformer",2),m([(0,a.fz)(o.mp,o.LY)],K.prototype,"_transforms",2),K=m([(0,c._G)()],K);var J=class extends a.Wd{constructor(){super(...arguments),this.rightScrollBar=l.Si.createDivWithClass("gedit-playground-scroll-right"),this.rightScrollBarBlock=l.Si.createDivWithClass("gedit-playground-scroll-right-block"),this.bottomScrollBar=l.Si.createDivWithClass("gedit-playground-scroll-bottom"),this.bottomScrollBarBlock=l.Si.createDivWithClass("gedit-playground-scroll-bottom-block"),this.sum=0,this.initialScrollX=0,this.initialScrollY=0,this.bottomGrabDragger=new a.EI({onDragStart:e=>{this.config.updateCursor("grabbing"),this.sum=0,this.initialScrollX=this.config.getViewport().x,this.onBoardingToast()},onDrag:e=>{this.sum+=e.movingDelta.x,this.playgroundConfigEntity.scroll({scrollX:(this.initialScrollX+this.sum*this.viewportFullWidth/(this.clientViewportWidth-this.scrollBottomWidth))*this.scale},!1)},onDragEnd:e=>{this.config.updateCursor("default")}}),this.rightGrabDragger=new a.EI({onDragStart:e=>{this.config.updateCursor("grabbing"),this.sum=0,this.initialScrollY=this.config.getViewport().y,this.onBoardingToast()},onDrag:e=>{this.sum+=e.movingDelta.y,this.playgroundConfigEntity.scroll({scrollY:(this.initialScrollY+this.sum*this.viewportFullHeight/(this.clientViewportHeight-this.scrollRightHeight))*this.scale},!1)},onDragEnd:e=>{this.config.updateCursor("default")}})}get clientViewportWidth(){return this.viewportWidth*this.scale-11}get clientViewportHeight(){return this.viewportHeight*this.scale-11}get viewportFullWidth(){return this.mostLeft-this.mostRight}get viewportFullHeight(){return this.mostTop-this.mostBottom}get viewportMoveWidth(){return this.mostLeft-this.mostRight+this.width}get viewportMoveHeight(){return this.mostTop-this.mostBottom+this.height}getToLeft(e){return(e-this.mostRight)/this.viewportMoveWidth*this.clientViewportWidth}getToTop(e){return(e-this.mostBottom)/this.viewportMoveHeight*this.clientViewportHeight}clickRightScrollBar(e){e.preventDefault(),e.stopPropagation();let n=1-(e?.y||0)/this.clientViewportHeight,r=(this.mostTop-this.viewportFullHeight*n)*this.scale;this.playgroundConfigEntity.scroll({scrollY:r},!1)}clickBottomScrollBar(e){e.preventDefault(),e.stopPropagation();let n=1-(e?.x||0)/this.clientViewportWidth,r=(this.mostLeft-this.viewportFullWidth*n)*this.scale;this.playgroundConfigEntity.scroll({scrollX:r},!1)}onBoardingToast(){this.events?.dragStart()}changeScrollBarVisibility(e,n){l.Si.addClass(e,"show"===n?"gedit-playground-scroll-show":"gedit-playground-scroll-hidden"),l.Si.delClass(e,"show"===n?"gedit-playground-scroll-hidden":"gedit-playground-scroll-show")}onReady(){this.options.getBounds||(this.options={getBounds:()=>{let e=this.flowDocument;return e?(e.transformer.refresh(),e.root.getData(o.LY).bounds):l.M_.EMPTY},showScrollBars:"whenScrolling"}),this.pipelineNode.parentNode.appendChild(this.rightScrollBar),this.pipelineNode.parentNode.appendChild(this.rightScrollBarBlock),this.pipelineNode.parentNode.appendChild(this.bottomScrollBar),this.pipelineNode.parentNode.appendChild(this.bottomScrollBarBlock),this.rightScrollBar.onclick=this.clickRightScrollBar.bind(this),this.bottomScrollBar.onclick=this.clickBottomScrollBar.bind(this),"whenScrolling"===this.options.showScrollBars&&(this.rightScrollBar.addEventListener("mouseenter",e=>{this.changeScrollBarVisibility(this.rightScrollBarBlock,"show")}),this.rightScrollBar.addEventListener("mouseleave",e=>{this.changeScrollBarVisibility(this.rightScrollBarBlock,"hidden")}),this.bottomScrollBar.addEventListener("mouseenter",e=>{this.changeScrollBarVisibility(this.bottomScrollBarBlock,"show")}),this.bottomScrollBar.addEventListener("mouseleave",e=>{this.changeScrollBarVisibility(this.bottomScrollBarBlock,"hidden")})),this.bottomScrollBarBlock.addEventListener("mousedown",e=>{this.bottomGrabDragger.start(e.clientX,e.clientY),e.stopPropagation()}),this.rightScrollBarBlock.addEventListener("mousedown",e=>{this.rightGrabDragger.start(e.clientX,e.clientY),e.stopPropagation()})}autorun(){this.hideTimeout&&clearTimeout(this.hideTimeout);let e=U({scrollX:this.config.config.scrollX,scrollY:this.config.config.scrollY},this.config),n=this.config.getViewport();this.viewportWidth=n.width,this.viewportHeight=n.height;let r=this.options.getBounds();this.width=r?.width||0,this.height=r?.height||0;let i=(this.viewportWidth-e.width)/2-2,s=(this.viewportHeight-e.height)/2-2,o=this.width+e.width,a=this.height+e.height,h=r.x,c=r.y;this.mostLeft=this.width+h-i,this.mostRight=this.mostLeft-o,this.mostTop=this.height+c-s,this.mostBottom=this.mostTop-a,this.scale=this.config.finalScale;let u=this.clientViewportWidth,d=this.clientViewportHeight;this.scrollBottomWidth=u-u*(this.mostLeft-this.mostRight)/this.viewportMoveWidth,this.scrollRightHeight=d-d*(this.mostTop-this.mostBottom)/this.viewportMoveHeight;let p=this.getToLeft(n.x),f=this.getToTop(n.y);l.Si.setStyle(this.rightScrollBarBlock,{right:2,top:f,background:"#1F2329",zIndex:10,height:this.scrollRightHeight,width:"7px"}),l.Si.setStyle(this.bottomScrollBarBlock,{left:p,bottom:2,background:"#1F2329",zIndex:10,height:"7px",width:this.scrollBottomWidth}),this.changeScrollBarVisibility(this.rightScrollBarBlock,"show"),this.changeScrollBarVisibility(this.bottomScrollBarBlock,"show"),"whenScrolling"===this.options.showScrollBars&&(this.hideTimeout=window.setTimeout(()=>{this.changeScrollBarVisibility(this.rightScrollBarBlock,"hidden"),this.changeScrollBarVisibility(this.bottomScrollBarBlock,"hidden"),this.hideTimeout=void 0},1e3))}};m([(0,c.lq)(),(0,c.WQ)(Y)],J.prototype,"events",2),m([(0,c.WQ)(o.mi),(0,c.lq)()],J.prototype,"flowDocument",2),m([(0,a.Lb)(a.d0)],J.prototype,"playgroundConfigEntity",2),J=m([(0,c._G)()],J);var ee=class extends a.Wd{constructor(){super(...arguments),this.dragOffset={x:8,y:8},this.containerRef=d.createRef(),this.draggingNodeMask=document.createElement("div"),this._dragger=new a.EI({onDrag:e=>{this.handleMouseMove(e)},onDragEnd:()=>{this.handleMouseUp()},stopGlobalEventNames:["contextmenu"]})}get transitions(){let e=[];return this.document.traverse(n=>{e.push(n.getData(o.Me))}),e}get dragStartEntity(){return this.flowRenderStateEntity.getDragStartEntity()}set dragStartEntity(e){this.flowRenderStateEntity.setDragStartEntity(e)}get dragEntities(){return this.flowRenderStateEntity.getDragEntities()}set dragEntities(e){this.flowRenderStateEntity.setDragEntities(e)}isGrab(){return this.editorStateConfig.getCurrentState()===a.$t.STATE_GRAB}setDraggingStatus(e){this.service.nodeDragIdsWithChildren.length&&this.service.nodeDragIdsWithChildren.forEach(n=>{let r=this.entityManager.getEntityById(n);(r?.getData(o.he)).dragging=e})}dragEnable(e){return Math.abs(e.clientX-this.initialPosition.x)>10||Math.abs(e.clientY-this.initialPosition.y)>10}handleMouseMove(e){if(this.dragStartEntity&&this.dragEnable(e)){this.setDraggingStatus(!0);let n=this.playgroundConfigEntity.finalScale;if(this.containerRef.current){let r,i=this.containerRef.current.children?.[0],s=e.clientX-(this.pipelineNode.offsetLeft||0)-this.playgroundConfigEntity.config.clientX-(i.clientWidth-this.dragOffset.x)*n,o=e.clientY-(this.pipelineNode.offsetTop||0)-this.playgroundConfigEntity.config.clientY-(i.clientHeight-this.dragOffset.y)*n,a=this.service.isDragBranch,h=new l.M_(s,o,i.clientWidth*n,i.clientHeight*n),c=this.transitions.find(e=>{if(e?.entity?.parent?.collapsed)return!1;let{hasCollision:n,labelOffsetType:i}=this.flowDragConfigEntity.isCollision(e,h,a);return r=i,n});c&&(a?this.service.isDroppableBranch(c.entity,r):this.service.isDroppableNode(c.entity))&&(!this.options.canDrop||this.options.canDrop({dragNodes:this.dragEntities,dropNode:c.entity,isBranch:a}))?this.flowRenderStateEntity.setNodeDroppingId(c.entity.id):this.flowRenderStateEntity.setNodeDroppingId(""),this.flowRenderStateEntity.setDragLabelSide(r),this.containerRef.current.style.visibility="visible",this.pipelineNode.parentElement.appendChild(this.draggingNodeMask),this.containerRef.current.style.left=`${s}px`,this.containerRef.current.style.top=`${o}px`,this.containerRef.current.style.transformOrigin="top left",this.containerRef.current.style.transform=`scale(${n})`,this.flowDragConfigEntity.scrollDirection(e,this.containerRef.current,s,o)}}}handleMouseUp(){this.setDraggingStatus(!1),this.dragStartEntity&&(this.service.dropNodeId&&(this.service.isDragBranch?this.service.dropBranch():(this.service.dropNode(),this.selectConfigEntity.clearSelectedNodes())),this.flowRenderStateEntity.setNodeDroppingId(""),this.flowRenderStateEntity.setDragLabelSide(),this.dragStartEntity=void 0,this.dragEntities=[],this.flowDragConfigEntity.stopAllScroll()),this.containerRef.current&&(this.containerRef.current.style.visibility="hidden",this.pipelineNode.parentElement.contains(this.draggingNodeMask)&&this.pipelineNode.parentElement.removeChild(this.draggingNodeMask))}async startDrag(e,{dragStartEntity:n,dragEntities:r},i){if(this.isGrab()||this.config.disabled||this.config.readonly)return;this.dragOffset.x=i?.dragOffsetX||8,this.dragOffset.y=i?.dragOffsetY||8;let s=n.flowNodeType===o.y.BLOCK_ICON,a=n.flowNodeType===o.y.BLOCK_ORDER_ICON,l=s||a?n.parent:n;if(l.getData(o.he).draggable)return this.initialPosition={x:e.clientX,y:e.clientY},this.dragStartEntity=l,this.dragEntities=r||[this.dragStartEntity],this._dragger.start(e.clientX,e.clientY)}onReady(){this.draggingNodeMask.style.width="100%",this.draggingNodeMask.style.height="100%",this.draggingNodeMask.style.position="absolute",this.draggingNodeMask.classList.add("dragging-node"),this.draggingNodeMask.style.zIndex="99",this.draggingNodeMask.style.cursor="pointer",this.dragNodeComp=this.rendererRegistry.getRendererComponent("drag-node"),this.options.onDrop&&this.toDispose.push(this.service.onDrop(this.options.onDrop))}render(){let e=this.dragNodeComp.renderer;return d.createElement("div",{ref:this.containerRef,style:{position:"absolute",zIndex:99999,visibility:"hidden"},onMouseEnter:e=>e.stopPropagation()},d.createElement(e,{dragStart:this.dragStartEntity,dragNodes:this.dragEntities}))}};m([(0,c.WQ)(o.mi)],ee.prototype,"document",2),m([(0,c.WQ)(o.gs)],ee.prototype,"service",2),m([(0,a.fz)(o.mp,o.LY)],ee.prototype,"transforms",2),m([(0,a.Lb)(a.An)],ee.prototype,"editorStateConfig",2),m([(0,a.Lb)(a.d0)],ee.prototype,"playgroundConfigEntity",2),m([(0,a.Lb)(S)],ee.prototype,"flowDragConfigEntity",2),m([(0,a.Lb)(o.Ax)],ee.prototype,"flowRenderStateEntity",2),m([(0,a.Lb)(_)],ee.prototype,"selectConfigEntity",2),m([(0,c.WQ)(M)],ee.prototype,"rendererRegistry",2),ee=m([(0,c._G)()],ee);var et=class extends a.Wd{constructor(){super(...arguments),this.node=l.Si.createDivWithClass("gedit-selector-box-layer"),this.selectorBox=this.createDOMCache("gedit-selector-box"),this.selectorBoxBlock=this.createDOMCache("gedit-selector-box-block"),this.selectboxDragger=new a.EI({onDragStart:e=>{this.selectConfigEntity.clearSelectedNodes();let n=this.playgroundConfigEntity.getPosFromMouseEvent(e);this.transformVisibles=this.flowDocument.getRenderDatas(o.LY,!1).filter(e=>{let{entity:r}=e;return r.originParent?this.nodeSelectable(r,n)&&this.nodeSelectable(r.originParent,n):this.nodeSelectable(r,n)}),this.selectorBoxConfigEntity.setDragInfo(e),this.updateSelectorBox(this.selectorBoxConfigEntity)},onDrag:e=>{this.selectorBoxConfigEntity.setDragInfo(e),this.selectConfigEntity.selectFromBounds(this.selectorBoxConfigEntity.toRectangle(this.playgroundConfigEntity.finalScale),this.transformVisibles),this.updateSelectorBox(this.selectorBoxConfigEntity)},onDragEnd:e=>{this.selectorBoxConfigEntity.setDragInfo(e),this.transformVisibles.length=0,this.updateSelectorBox(this.selectorBoxConfigEntity)}})}onReady(){this.options.canSelect||(this.options.canSelect=e=>{let n=e.target;return n===this.pipelineNode||n===this.playgroundNode}),this.toDispose.pushAll([this.selectConfigEntity.onConfigChanged(()=>{this.selectionService.selection=this.selectConfigEntity.selectedNodes}),this.selectionService.onSelectionChanged(()=>{let e=this.selectionService.selection.filter(e=>e instanceof o.mp);this.selectConfigEntity.selectedNodes=e})]),this.listenPlaygroundEvent("mousedown",e=>{if(this.isEnabled()&&(!this.options.canSelect||this.options.canSelect(e,this.selectorBoxConfigEntity)))return this.editorStateConfig.getCurrentState()===a.$t.STATE_MOUSE_FRIENDLY_SELECT&&this.selectConfigEntity.clearSelectedNodes(),this.selectboxDragger.start(e.clientX,e.clientY,this.config),!0},a.gj.BASE_LAYER)}isEnabled(){let e=this.editorStateConfig.getCurrentState(),n=e===a.$t.STATE_MOUSE_FRIENDLY_SELECT;return!this.config.disabled&&!this.config.readonly&&(n&&this.editorStateConfig.isPressingShift||e===a.$t.STATE_SELECT)&&!this.selectorBoxConfigEntity.disabled}dispose(){this.selectorBox.dispose(),this.selectorBoxBlock.dispose(),super.dispose()}updateSelectorBox(e){let n=this.selectorBox.get(),r=this.selectorBoxBlock.get();!this.isEnabled()&&e.isMoving&&this.selectorBoxConfigEntity.collapse(),this.isEnabled()&&e.isMoving?(n.setStyle({display:"block",left:e.position.x,top:e.position.y,width:e.size.width,height:e.size.height}),r.setStyle({display:"block",left:e.position.x-10,top:e.position.y-10,width:e.size.width+20,height:e.size.height+20})):(n.setStyle({display:"none"}),r.setStyle({display:"none"}))}nodeSelectable(e,n){let r=e.getNodeMeta().selectable;return"function"==typeof r?r(e,n):r}};m([(0,c.WQ)(o.mi)],et.prototype,"flowDocument",2),m([(0,c.WQ)(a.Kf)],et.prototype,"contextMenuService",2),m([(0,a.Lb)(a.d0)],et.prototype,"playgroundConfigEntity",2),m([(0,c.WQ)(a.A7)],et.prototype,"selectionService",2),m([(0,a.Lb)(k)],et.prototype,"selectorBoxConfigEntity",2),m([(0,a.Lb)(_)],et.prototype,"selectConfigEntity",2),m([(0,a.Lb)(a.An)],et.prototype,"editorStateConfig",2),et=m([(0,c._G)()],et);var en=class extends a.Wd{constructor(){super(...arguments),this.node=l.Si.createDivWithClass("gedit-selector-bounds-layer"),this.selectBoundsBackground=l.Si.createDivWithClass("gedit-selector-bounds-background")}onReady(){this.node.style.zIndex="20";let{firstChild:e}=this.pipelineNode;void 0!==this.options.boundsPadding&&(this.flowSelectConfigEntity.boundsPadding=this.options.boundsPadding),this.options.backgroundClassName&&this.selectBoundsBackground.classList.add(this.options.backgroundClassName);let n=l.Si.createDivWithClass("gedit-playground-layer");n.appendChild(this.selectBoundsBackground),this.pipelineNode.insertBefore(n,e)}onZoom(e){this.node.style.transform=`scale(${e})`,this.selectBoundsBackground.parentElement.style.transform=`scale(${e})`}onViewportChange(){this.render()}isEnabled(){return this.editorStateConfig.getCurrentState()===a.$t.STATE_SELECT}render(){let{ignoreOneSelect:e,ignoreChildrenLength:n,SelectorBoxPopover:r,disableBackground:i,CustomBoundsRenderer:s}=this.options,o=this.flowSelectConfigEntity.getSelectedBounds(),a=this.flowSelectConfigEntity.selectedNodes,h=this.selectBoundsBackground,c=!this.selectorBoxConfigEntity.isStart;if(0===o.width||0===o.height||e&&1===a.length&&(n||a[0].childrenLength<=1))return l.Si.setStyle(h,{display:"none"}),d.createElement(d.Fragment,null);if(s)return d.createElement(s,{bounds:o,config:this.config,flowSelectConfig:this.flowSelectConfigEntity,commandRegistry:this.commandRegistry});let u={display:"block",left:o.left,top:o.top,width:o.width,height:o.height};i||l.Si.setStyle(h,u);let p="gedit-selector-bounds-foreground";this.options.foregroundClassName&&(p+=" "+this.options.foregroundClassName);let f=r||this.rendererRegistry.tryToGetRendererComponent("selector-box-popover")?.renderer;return c&&f?d.createElement(f,{bounds:o,config:this.config,flowSelectConfig:this.flowSelectConfigEntity,commandRegistry:this.commandRegistry},d.createElement("div",{className:p,style:u})):d.createElement("div",{className:p,style:u})}};m([(0,c.WQ)(M)],en.prototype,"rendererRegistry",2),m([(0,c.WQ)(a.Ju)],en.prototype,"commandRegistry",2),m([(0,a.Lb)(_)],en.prototype,"flowSelectConfigEntity",2),m([(0,a.Lb)(a.An)],en.prototype,"editorStateConfig",2),m([(0,a.Lb)(k)],en.prototype,"selectorBoxConfigEntity",2),m([(0,a.fz)(o.mp,o.he)],en.prototype,"renderStates",2),m([(0,a.fz)(o.mp,o.LY)],en.prototype,"_transforms",2),en=m([(0,c._G)()],en);var er=class extends a.Wd{constructor(){super(...arguments),this.node=l.Si.createDivWithClass("gedit-context-menu-layer"),this.nodeRef=d.createRef()}isEnabled(){let e=this.editorStateConfig.getCurrentState();return!this.config.disabled&&!this.config.readonly&&e===a.$t.STATE_SELECT&&!this.selectorBoxConfigEntity.disabled}onReady(){this.node.style.zIndex="30",this.node.style.display="block",this.toDispose.pushAll([this.listenPlaygroundEvent("contextmenu",e=>{if(!this.isEnabled())return;this.contextMenuService.rightPanelVisible=!0;let n=this.flowSelectConfigEntity.getSelectedBounds();if(0===n.width||0===n.height)return;e.stopPropagation(),e.preventDefault(),this.nodeRef.current?.setVisible(!0);let r=e.clientX-(this.pipelineNode.offsetLeft||0)-this.playgroundConfigEntity.config.clientX,i=e.clientY-(this.pipelineNode.offsetTop||0)-this.playgroundConfigEntity.config.clientY;this.node.style.left=`${r}px`,this.node.style.top=`${i}px`},a.gj.BASE_LAYER),this.listenPlaygroundEvent("mousedown",()=>{this.nodeRef.current?.setVisible(!1),this.contextMenuService.rightPanelVisible=!1})])}onScroll(){this.nodeRef.current?.setVisible(!1)}onZoom(){this.nodeRef.current?.setVisible(!1)}dispose(){super.dispose()}renderCommandMenus(){return this.commandRegistry.commands.filter(e=>"SELECTOR_BOX"===e.category).map(e=>{let n=this.rendererRegistry.getRendererComponent(e.icon||e.id)?.renderer;return d.createElement(n,{key:e.id,command:e,isContextMenu:!0,disabled:!this.commandRegistry.isEnabled(e.id),onClick:n=>this.commandRegistry.executeCommand(e.id,n)})}).filter(e=>e)}render(){let e=this.rendererRegistry.getRendererComponent("context-menu-popover").renderer;return d.createElement(e,{ref:this.nodeRef,content:this.renderCommandMenus()})}};m([(0,c.WQ)(a.Ju)],er.prototype,"commandRegistry",2),m([(0,c.WQ)(M)],er.prototype,"rendererRegistry",2),m([(0,c.WQ)(a.Kf)],er.prototype,"contextMenuService",2),m([(0,a.Lb)(_)],er.prototype,"flowSelectConfigEntity",2),m([(0,c.WQ)(a.A7)],er.prototype,"selectionService",2),m([(0,a.Lb)(a.d0)],er.prototype,"playgroundConfigEntity",2),m([(0,a.Lb)(a.An)],er.prototype,"editorStateConfig",2),m([(0,a.Lb)(k)],er.prototype,"selectorBoxConfigEntity",2),er=m([(0,c._G)()],er);var ei=class extends a.Wd{getInitScroll(){return this.document.layout.getInitScroll(this.pipelineNode.getBoundingClientRect())}onReady(){let e=()=>this.getInitScroll();this.config.updateConfig(e()),this.config.addScrollLimit(n=>(function(e,n,r,i){e={...e};let s=r.config,o={scrollX:s.scrollX,scrollY:s.scrollY};if(0===n.length||0===s.width||0===s.height)return e;let a=U(e,r);if(!n.find(e=>l.M_.isViewportVisible(e,a))){let e=U(o,r);return n.find(n=>l.M_.isViewportVisible(n,e))?o:i()}return e})(n,[this.document.root.getData(o.LY).bounds],this.config,e))}};m([(0,c.WQ)(o.mi)],ei.prototype,"document",2),ei=m([(0,c._G)()],ei);var es=new c.i0(e=>{e(M).toSelf().inSingletonScope(),e(C).toSelf().inSingletonScope()})},51829:function(e,n,r){"use strict";r.d(n,{BP:()=>f,v:()=>c});var i=r(81376),s=r(11812),o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l=(e,n,r,i)=>{for(var s,l=i>1?void 0:i?a(n,r):n,h=e.length-1;h>=0;h--)(s=e[h])&&(l=(i?s(n,r,l):s(l))||l);return i&&l&&o(n,r,l),l},h=Symbol("ShortcutsContribution"),c=class{constructor(){this.shortcutsHandlers=[]}addHandlers(...e){e.forEach(e=>{this.commandRegistry.getCommand(e.commandId)?this.commandRegistry.registerHandler(e.commandId,{execute:e.execute,isEnabled:e.isEnabled}):this.commandRegistry.registerCommand({id:e.commandId,...e.commandDetail||{}},{execute:e.execute,isEnabled:e.isEnabled})}),this.shortcutsHandlers.unshift(...e)}addHandlersIfNotFound(...e){e.forEach(e=>{this.has(e.commandId)||this.addHandlers(e)})}has(e){return this.shortcutsHandlers.some(n=>n.commandId===e)}init(){this.contribs?.forEach(e=>e.registerShortcuts(this))}};l([(0,s.WQ)(i.GF),(0,s.KT)(h),(0,s.lq)()],c.prototype,"contribs",2),l([(0,s.WQ)(i.Ju)],c.prototype,"commandRegistry",2),l([(0,s.kr)()],c.prototype,"init",1),c=l([(0,s._G)()],c);var u={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pausebreak:19,capslock:20,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,leftwindowkey:91,rightwindowkey:92,meta:/(mac|iphone|ipod|ipad)/i.test("undefined"!=typeof navigator?navigator?.platform:"")?[91,93]:[91,92],selectkey:93,numpad0:96,numpad1:97,numpad2:98,numpad3:99,numpad4:100,numpad5:101,numpad6:102,numpad7:103,numpad8:104,numpad9:105,multiply:106,add:107,subtract:109,decimalpoint:110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,semicolon:186,equalsign:187,"=":187,comma:188,dash:189,"-":189,period:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222},d={ctrl:e=>e.ctrlKey,shift:e=>e.shiftKey,alt:e=>e.altKey,meta:e=>"keyup"===e.type?u.meta.includes(e.keyCode):e.metaKey},p=class extends i.Wd{onReady(){this.shortcuts.addHandlersIfNotFound({commandId:i.uB.Default.ZOOM_IN,shortcuts:["meta =","ctrl ="],execute:()=>{this.config.zoomin()}},{commandId:i.uB.Default.ZOOM_OUT,shortcuts:["meta -","ctrl -"],execute:()=>{this.config.zoomout()}}),this.toDispose.pushAll([this.listenPlaygroundEvent("keydown",e=>{this.isFocused&&e.target===this.playgroundNode&&this.shortcuts.shortcutsHandlers.some(n=>{if(n.shortcuts.some(n=>(function(e,n,r=!0){if(!e.key||!n)return!1;let i=n.split(/\s+/),s=0;for(let n of i){let r=d[n],i=u[n.toLowerCase()];(r&&r(e)||i&&i===e.keyCode)&&s++}return r?s===i.length&&function(e){let n=Object.keys(d).reduce((n,r)=>d[r](e)?n+1:n,0);return[16,17,18,91,92].includes(e.keyCode)?n:n+1}(e)===i.length:s===i.length})(e,n))&&(!n.isEnabled||n.isEnabled(e)))return n.execute(e),e.preventDefault(),!0})})])}};p.type="ShortcutsLayer",l([(0,s.WQ)(c)],p.prototype,"shortcuts",2),l([(0,s.WQ)(i.A7)],p.prototype,"selection",2),p=l([(0,s._G)()],p);var f=(0,i.XY)({onBind:({bind:e})=>{e(c).toSelf().inSingletonScope(),(0,i.Tj)(e,h)},onInit:e=>{e.playground.registerLayer(p)},contributionKeys:[h]})},67055:function(e,n,r){"use strict";r.d(n,{GF:()=>em,Gs:()=>f,Hw:()=>b,Im:()=>er,M_:()=>D,Nu:()=>eg,QV:()=>O,Si:()=>S,Sj:()=>y,Sl:()=>el,TO:()=>E,Tj:()=>eO,Vd:()=>Y,Yx:()=>eo,Zp:()=>eh,aU:()=>ef,b6:()=>ev,bO:()=>T,bR:()=>A,cb:()=>J,d4:()=>x,eL:()=>ea,f1:()=>en,gE:()=>es,hR:()=>ei,hc:()=>K,jG:()=>u,jl:()=>L,l2:()=>g,nB:()=>U,tE:()=>F,uM:()=>c,uq:()=>Q,vl:()=>X});var i,s,o,a,l,h,c,u,d,p,f,g,m,y,O,b,x,w,S,_=r(20053),k=r(96540),{PI:C}=Math,E=2*C,T=180/C,P=class e{constructor(e=0,n=0){this.x=e,this.y=n}sub(n){return new e(this.x-n.x,this.y-n.y)}dot(e){return this.x*e.x+this.y*e.y}},A=class e{constructor(e=0,n=0){this.x=e,this.y=n}clone(){return new e(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.x=this.x,e.y=this.y,e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,n=e){return this.x=e,this.y=n,this}},M=A||(A={});function N(e,n,r){return{x:e.x+r*(n.x-e.x),y:e.y+r*(n.y-e.y)}}M.EMPTY={x:0,y:0},M.getDistance=function(e,n){return Math.sqrt((e.x-n.x)**2+(e.y-n.y)**2)},M.getMiddlePoint=function(e,n){return N(e,n,.5)},M.getRatioPoint=N,M.fixZero=function(e){return 0===e.x&&(e.x=0),0===e.y&&(e.y=0),e},M.move=function(e,n){return{x:e.x+(n.x||0),y:e.y+(n.y||0)}},M.moveDistanceToDirection=function(e,n,r){let i=n.x-e.x,s=n.y-e.y,o=0===i?0:Math.sqrt(r**2/(1+s**2/i**2)),a=0===i?r:Math.abs(o*s/i);return{x:e.x+(i>0?o:-o),y:e.y+(s>0?a:-a)}};var D=class e{constructor(e=0,n=0,r=0,i=0){this.x=e,this.y=n,this.width=r,this.height=i,this.type=1}static get EMPTY(){return new e(0,0,0,0)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}clone(){return new e(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,n){return!(this.width<=0)&&!(this.height<=0)&&!!(e>=this.x)&&!!(e<=this.right)&&!!(n>=this.y)&&!!(n<=this.bottom)}isEqual(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height}containsRectangle(e){return e.left>=this.left&&e.right<=this.right&&e.top>=this.top&&e.bottom<=this.bottom}pad(e=0,n=e){return this.x-=e,this.y-=n,this.width+=2*e,this.height+=2*n,this}fit(e){let n=Math.max(this.x,e.x),r=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=n,this.width=Math.max(r-n,0),this.y=i,this.height=Math.max(s-i,0),this}ceil(e=1,n=.001){let r=Math.ceil((this.x+this.width-n)*e)/e,i=Math.ceil((this.y+this.height-n)*e)/e;return this.x=Math.floor((this.x+n)*e)/e,this.y=Math.floor((this.y+n)*e)/e,this.width=r-this.x,this.height=i-this.y,this}enlarge(e){let n=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=n,this.width=r-n,this.y=i,this.height=s-i,this}get center(){return{x:this.x+this.width/2,y:this.y+this.height/2}}get rightBottom(){return{x:this.right,y:this.bottom}}get leftBottom(){return{x:this.left,y:this.bottom}}get rightTop(){return{x:this.right,y:this.top}}get leftTop(){return{x:this.left,y:this.top}}get bottomCenter(){return{x:this.x+this.width/2,y:this.bottom}}get topCenter(){return{x:this.x+this.width/2,y:this.top}}get rightCenter(){return{x:this.right,y:this.y+this.height/2}}get leftCenter(){return{x:this.left,y:this.y+this.height/2}}update(e){return e(this)}get crossDistance(){return A.getDistance(this.leftTop,this.rightBottom)}toStyleStr(){return`left: ${this.x}px; top: ${this.y}px; width: ${this.width}px; height: ${this.height}px;`}withPadding(e){return this.x-=e.left,this.y-=e.top,this.width+=e.left+e.right,this.height+=e.top+e.bottom,this}withoutPadding(e){return this.x+=e.left,this.y+=e.top,this.width=this.width-e.left-e.right,this.height=this.height-e.top-e.bottom,this}withHeight(e){return this.height=e,this}clearSpace(){return this.width=0,this.height=0,this}},I=D||(D={});function $(e){let n=I.EMPTY.clone();if(!e.length)return n;let r=[],i=[],s=[],o=[];e.forEach(e=>{r.push(e.left),s.push(e.right),o.push(e.bottom),i.push(e.top)});let a=Math.min.apply(Math,r),l=Math.max.apply(Math,s),h=Math.min.apply(Math,i),c=Math.max.apply(Math,o);return n.x=a,n.width=l-a,n.y=h,n.height=c-h,n}I.align=function(e,n){if(e.length<=1)return e;switch(n){case"align-bottom":let r=Math.max(...e.map(e=>e.bottom));e.forEach(e=>{e.y=r-e.height});break;case"align-center":let i=$(e).center.x;e.forEach(e=>{e.x=i-e.width/2});break;case"align-left":let s=Math.min(...e.map(e=>e.left));e.forEach(e=>{e.x=s});break;case"align-middle":let o=$(e).center.y;e.forEach(e=>{e.y=o-e.height/2});break;case"align-right":let a=Math.max(...e.map(e=>e.right));e.forEach(e=>{e.x=a-e.width});break;case"align-top":let l=Math.min(...e.map(e=>e.top));e.forEach(e=>{e.y=l});break;case"distribute-horizontal":if(e.length<=2)break;let h=e.slice().sort((e,n)=>e.left-n.left),c=$(e),u=e.reduce((e,n)=>e-n.width,c.width)/(e.length-1);h.reduce((e,n)=>(n.x=e,e+n.width+u),c.x);break;case"distribute-vertical":if(e.length<=2)break;let d=e.slice().sort((e,n)=>e.top-n.top),p=$(e),f=e.reduce((e,n)=>e-n.height,p.height)/(e.length-1);d.reduce((e,n)=>(n.y=e,e+n.height+f),p.y)}return e},I.enlarge=$,I.intersects=function(e,n,r){let i=e.left,s=e.top,o=e.right,a=e.bottom,l=n.left,h=n.top,c=n.right,u=n.bottom;return"horizontal"===r?o>l&&i<c:"vertical"===r?a>h&&s<u:!!(o>l)&&!!(i<c)&&!!(a>h)&&!!(s<u)},I.intersectsWithRotation=function(e,n,r,i){let s=new R(e.center,e.width,e.height,n),o=new R(r.center,r.width,r.height,i),a=s.centerPoint.sub(o.centerPoint),l=s.axesX;if(s.getProjectionRadius(l)+o.getProjectionRadius(l)<=Math.abs(a.dot(l)))return!1;let h=s.axesY;if(s.getProjectionRadius(h)+o.getProjectionRadius(h)<=Math.abs(a.dot(h)))return!1;let c=o.axesX;if(s.getProjectionRadius(c)+o.getProjectionRadius(c)<=Math.abs(a.dot(c)))return!1;let u=o.axesY;return!(s.getProjectionRadius(u)+o.getProjectionRadius(u)<=Math.abs(a.dot(u)))},I.isViewportVisible=function(e,n,r=0,i=!1){return i?n.containsRectangle(e):0===r?I.intersects(e,n):I.intersectsWithRotation(e,r,n,0)},I.setViewportVisible=function(e,n,r=0){let{left:i,right:s,top:o,bottom:a,width:l,height:h}=e,{left:c,right:u,top:d,bottom:p}=n;return i<=c?e.x=c+r:s>=u&&(e.x=u-r-l),o<=d?e.y=d+r:a>=p&&(e.y=p-r-h),e},I.createRectangleWithTwoPoints=function(e,n){let r=e.x<n.x?e.x:n.x,i=e.y<n.y?e.y:n.y;return new I(r,i,Math.abs(e.x-n.x),Math.abs(e.y-n.y))};var R=class{constructor(e,n,r,i){this.width=n,this.height=r,this.centerPoint=new P(e.x,e.y),this.axesX=new P(Math.cos(i),Math.sin(i)),this.axesY=new P(-1*this.axesX.y,this.axesX.x)}getProjectionRadius(e){return this.width/2*Math.abs(e.dot(this.axesX))+this.height/2*Math.abs(e.dot(this.axesY))}},L=class e{constructor(e=0,n=0,r=0){this.x=e,this.y=n,this.radius=r,this.type=2}clone(){return new e(this.x,this.y,this.radius)}contains(e,n){if(this.radius<=0)return!1;let r=this.radius*this.radius,i=this.x-e,s=this.y-n;return i*=i,s*=s,i+s<=r}getBounds(){return new D(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}},Q=class e{constructor(e=1,n=0,r=0,i=1,s=0,o=0){this.a=e,this.b=n,this.c=r,this.d=i,this.tx=s,this.ty=o,this.array=null}static get IDENTITY(){return new e}static get TEMP_MATRIX(){return new e}fromArray(e){return e.length<6||(this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]),this}set(e,n,r,i,s,o){return this.a=e,this.b=n,this.c=r,this.d=i,this.tx=s,this.ty=o,this}toArray(e,n){this.array||(this.array=new Float32Array(9));let r=n||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0),r[8]=1,r}apply(e,n){let{x:r,y:i}=e;return(n=n||{x:0,y:0}).x=this.a*r+this.c*i+this.tx,n.y=this.b*r+this.d*i+this.ty,n}applyInverse(e,n){n=n||{x:0,y:0};let r=1/(this.a*this.d+-(this.c*this.b)),{x:i}=e,{y:s}=e;return n.x=this.d*r*i+-this.c*r*s+(this.ty*this.c-this.tx*this.d)*r,n.y=this.a*r*s+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,n}translate(e,n){return this.tx+=e,this.ty+=n,this}scale(e,n){return this.a*=e,this.d*=n,this.c*=e,this.b*=n,this.tx*=e,this.ty*=n,this}rotate(e){let n=Math.cos(e),r=Math.sin(e),i=this.a,s=this.c,o=this.tx;return this.a=i*n-this.b*r,this.b=i*r+this.b*n,this.c=s*n-this.d*r,this.d=s*r+this.d*n,this.tx=o*n-this.ty*r,this.ty=o*r+this.ty*n,this}append(e){let n=this.a,r=this.b,i=this.c,s=this.d;return this.a=e.a*n+e.b*i,this.b=e.a*r+e.b*s,this.c=e.c*n+e.d*i,this.d=e.c*r+e.d*s,this.tx=e.tx*n+e.ty*i+this.tx,this.ty=e.tx*r+e.ty*s+this.ty,this}setTransform(e,n,r,i,s,o,a,l,h){return this.a=Math.cos(a+h)*s,this.b=Math.sin(a+h)*s,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=e-(r*this.a+i*this.c),this.ty=n-(r*this.b+i*this.d),this}prepend(e){let n=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){let n=this.a,r=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=n*e.a+this.ty*e.c+e.tx,this.ty=n*e.b+this.ty*e.d+e.ty,this}decompose(e){let{a:n}=this,{b:r}=this,{c:i}=this,{d:s}=this,o=-Math.atan2(-i,s),a=Math.atan2(r,n),l=Math.abs(o+a);return l<1e-5||1e-5>Math.abs(E-l)?(e.rotation=a,e.skew.x=0,e.skew.y=0):(e.rotation=0,e.skew.x=o,e.skew.y=a),e.scale.x=Math.sqrt(n*n+r*r),e.scale.y=Math.sqrt(i*i+s*s),e.position.x=this.tx,e.position.y=this.ty,e}invert(){let e=this.a,n=this.b,r=this.c,i=this.d,s=this.tx,o=e*i-n*r;return this.a=i/o,this.b=-n/o,this.c=-r/o,this.d=e/o,this.tx=(r*this.ty-i*s)/o,this.ty=-(e*this.ty-n*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}isSimple(){return 1===this.a&&0===this.b&&0===this.c&&1===this.d}clone(){let n=new e;return n.a=this.a,n.b=this.b,n.c=this.c,n.d=this.d,n.tx=this.tx,n.ty=this.ty,n}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}},j=class e{constructor(e,n,r=0,i=0){this._x=r,this._y=i,this.cb=e,this.scope=n}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}clone(n=this.cb,r=this.scope){return new e(n,r,this._x,this._y)}set(e=0,n=e){return(this._x!==e||this._y!==n)&&(this._x=e,this._y=n,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.x=this._x,e.y=this._y,e}equals(e){return e.x===this._x&&e.y===this._y}},V=class{constructor(){this.worldTransform=new Q,this.localTransform=new Q,this.position=new j(this.onChange,this,0,0),this.scale=new j(this.onChange,this,1,1),this.pivot=new j(this.onChange,this,0,0),this.skew=new j(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){let e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(e){let n=this.localTransform;if(this._localID!==this._currentLocalID&&(n.a=this._cx*this.scale.x,n.b=this._sx*this.scale.x,n.c=this._cy*this.scale.y,n.d=this._sy*this.scale.y,n.tx=this.position.x-(this.pivot.x*n.a+this.pivot.y*n.c),n.ty=this.position.y-(this.pivot.x*n.b+this.pivot.y*n.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){let r=e.worldTransform,i=this.worldTransform;i.a=n.a*r.a+n.b*r.c,i.b=n.a*r.b+n.b*r.d,i.c=n.c*r.a+n.d*r.c,i.d=n.c*r.b+n.d*r.d,i.tx=n.tx*r.a+n.ty*r.c+r.tx,i.ty=n.tx*r.b+n.ty*r.d+r.ty,this._parentID=e._worldID,this._worldID++}}setFromMatrix(e){e.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())}};function z(e,n,r){let i=r-n;return n+((e-n)%i+i)%i}V.IDENTITY=new V,(i=c||(c={})).wrap=function(e){return z(e,-Math.PI,Math.PI)},i.wrapDegrees=function(e){return z(e,-180,180)},i.betweenPoints=function(e,n,r={x:0,y:0}){let i={x:e.x-r.x,y:e.y-r.y},s={x:n.x-r.x,y:n.y-r.y};return Math.atan2(i.x*s.y-i.y*s.x,i.x*s.x+i.y*s.y)};var{keys:B}=Object;Object.prototype.hasOwnProperty;var F=()=>{};Object.prototype.toString;var Z=u||(u={});function q(e){return{dispose:e}}Z.is=function(e){return"object"==typeof e&&null!==e&&"function"==typeof e.dispose},Z.create=q,Z.NULL=Object.freeze(q(()=>{})),(d||(d={})).None=()=>u.NULL;var W=class e{constructor(){this._disposed=!1}get event(){return this._event||(this._event=(n,r)=>{if(this._disposed)return u.NULL;this._listeners||(this._listeners=[]);let i=r?n.bind(r):n;this._listeners.length>=e.LEAK_WARNING_THRESHHOLD&&console.warn(`[Emitter] Listeners length >= ${e.LEAK_WARNING_THRESHHOLD}`),this._listeners.push(i);let s={dispose:()=>{if(s.dispose=F,!this._disposed){let e=this._listeners.indexOf(i);-1!==e&&this._listeners.splice(e,1)}}};return s}),this._event}fire(e){this._listeners&&this._listeners.forEach(n=>n(e))}get disposed(){return this._disposed}dispose(){this._listeners&&(this._listeners=void 0),this._disposed=!0}};W.LEAK_WARNING_THRESHHOLD=175;var X=W,U=class{constructor(){this.toDispose=new Y}dispose(){this.toDispose.dispose()}get disposed(){return this.toDispose.disposed}get onDispose(){return this.toDispose.onDispose}},Y=class{constructor(...e){this.disposables=[],this.onDisposeEmitter=new X,this._disposed=!1,e.forEach(e=>this.push(e))}get length(){return this.disposables.length}get onDispose(){return this.onDisposeEmitter.event}get disposed(){return this._disposed}dispose(){this.disposed||(this._disposed=!0,this.disposables.slice().reverse().forEach(e=>{try{e.dispose()}catch(e){console.error(e)}}),this.onDisposeEmitter.fire(void 0),this.onDisposeEmitter.dispose())}push(e){if(this.disposed||e===u.NULL)return u.NULL;let{disposables:n}=this;if(n.find(n=>n===e))return u.NULL;let r=e.dispose,i=u.create(()=>{let i=n.indexOf(e);-1!==i&&n.splice(i,1),e.dispose=r});return e.dispose=()=>{i.dispose(),e.dispose()},n.push(e),i}pushAll(e){return e.map(e=>this.push(e))}},G=Object.freeze(function(e,n){let r=setTimeout(e.bind(n),0);return{dispose(){clearTimeout(r)}}});(s=p||(p={})).isCancellationToken=function(e){return e===s.None||e===s.Cancelled||e instanceof H||!!e&&"object"==typeof e&&"boolean"==typeof e.isCancellationRequested&&"function"==typeof e.onCancellationRequested},s.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:d.None}),s.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:G});var H=class{constructor(){this._isCancelled=!1}cancel(){!this._isCancelled&&(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?G:(this._emitter||(this._emitter=new X),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},K=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};function J(e,n=p.None){let r=new K,i=setTimeout(()=>r.resolve(),e);return n.onCancellationRequested(()=>{clearTimeout(i),r.reject(Error("Cancelled"))}),r.promise}var ee=f||(f={});function et(e,n,r=1,i=!0){if(e===n)return!1;if(0===r||"object"!=typeof e||"object"!=typeof n)return e!==n;let s=Object.keys(n);if(!i){let n=Object.keys(e);if(s.length!==n.length)return!0}for(let o=0,a=s.length;o<a;o++){let a=s[o];if(et(e[a],n[a],r-1,i))return!0}return!1}ee.isChanged=et,ee.isDeepChanged=function(e,n,r){return et(e,n,1/0,r)},ee.isArrayShallowChanged=function(e,n){if(e.length!==n.length)return!0;for(let r=0,i=e.length;r<i;r++)if(e[r]!==n[r])return!0;return!1},(o=g||(g={})).create=function(e,n={}){let r=[];return{getFromCache:()=>r,getMore(i,s=!0){if(i===r.length);else if(i>r.length){let n=i-r.length;for(;n>0;)r.push(e()),n--}else if(s){let e=n.deleteLimit??0;r.length-i>e&&r.splice(i).forEach(e=>e.dispose&&e.dispose())}return r.slice(0,i)},getMoreByItemKeys(n){let i=[],s=new Map;return r.forEach(e=>{n.find(n=>n.key===e.key)?s.set(e.key,e):e.dispose?.()}),n.forEach(n=>{if(!n.key)throw Error("getMoreByItemKeys need a key");let r=s.get(n.key);r?i.push(r):i.push(e(n))}),r=i},getMoreByItems(n){let i=[],s=new Map;return r.forEach(e=>{n.find(n=>n===e.key)?s.set(e.key,e):e.dispose?.()}),n.forEach(n=>{let r=s.get(n);r?i.push(r):i.push({...e(n),key:n})}),r=i},get:()=>(r.length>0||r.push(e()),r[0]),getFromCacheByKey:e=>r.find(n=>n.key===e),dispose(){r.forEach(e=>e.dispose&&e.dispose()),r.length=0},clear(){this.dispose()}}},o.assign=function(e,n){return Object.assign(e,n)},o.createShortCache=function(e=1e3){let n,r;function i(){r&&clearTimeout(r),r=setTimeout(()=>{r=void 0,n=void 0},e)}return{get:e=>(n||(n=e()),i(),n)}},o.createWeakCache=function(){let e=new WeakMap;return{get:n=>e.get(n),save:(n,r)=>e.set(n,r),isChanged:(n,r)=>f.isChanged(e.get(n),r)}},(m||(m={})).create=function(e,n,r){return{type:"object",properties:{...n?.properties,...e},mixinDefaults:{...n?.mixinDefaults,...r}}},(a=y||(y={})).createDefault=function e(n,r,i){r={...n.mixinDefaults,...r};let s=i?`${i}.`:"";if(n.properties){let i,o;return i=n.properties,o=(n,i)=>{let o=s+i;return r&&void 0!==r[o]?r[o]:e(n,r,o)},((e,n,r={})=>B(e).reduce((r,i)=>n(r,e[i],i),r))(i,(e,n,r)=>Object.assign(e,{[r]:o(n,r)}))}return"function"==typeof n.default?n.default():n.default},a.isBaseType=function(e){return"string"===e.type||"float"===e.type||"integer"===e.type||"boolean"===e.type||"enum"===e.type||"color"===e.type||"range"===e.type};var en={label:"大小",properties:{width:{label:"宽",default:0,type:"float"},height:{label:"高",default:0,type:"float"},locked:{label:"等比锁",default:!1,type:"boolean"}},type:"object"},er={label:"原点",description:"用于设置旋转的中心位置",properties:{x:{label:"x",default:.5,type:"float"},y:{label:"y",default:.5,type:"float"}},type:"object"},ei={label:"位置",properties:{x:{label:"x",default:0,type:"float"},y:{label:"y",default:0,type:"float"}},type:"object"},es={label:"旋转",type:"float",default:0},eo={label:"缩放",properties:{x:{label:"x",default:1,type:"float"},y:{label:"y",default:1,type:"float"}},type:"object"},ea={label:"倾斜",properties:{x:{label:"x",default:0,type:"float"},y:{label:"y",default:0,type:"float"}},type:"object"},el={properties:{position:ei,size:en,origin:er,scale:eo,skew:ea,rotation:es},type:"object"};(l=O||(O={})).createDefault=function(){return y.createDefault(el)},l.toJSON=function(e){return{position:{x:e.position.x,y:e.position.y},size:{width:e.size.width,height:e.size.height,locked:e.size.locked},origin:{x:e.origin.x,y:e.origin.y},scale:{x:e.scale.x,y:e.scale.y},skew:{x:e.skew.x,y:e.skew.y},rotation:e.rotation}},l.getDelta=function(e,n){return{position:{x:n.position.x-e.position.x,y:n.position.y-e.position.y},size:{width:n.size.width-e.size.width,height:n.size.height-e.size.height},origin:{x:n.origin.x-e.origin.x,y:n.origin.y-e.origin.y},scale:{x:n.scale.x-e.scale.x,y:n.scale.y-e.scale.y},skew:{x:n.skew.x-e.skew.x,y:n.skew.y-e.skew.y},rotation:n.rotation-e.rotation}},l.mergeDelta=function(e,n,r){let i=void 0!==r?e=>Math.round(100*e)/100:e=>e;return{position:{x:i(n.position.x+e.position.x),y:i(n.position.y+e.position.y)},size:{width:i(n.size.width+e.size.width),height:i(n.size.height+e.size.height),locked:e.size.locked},origin:{x:i(n.origin.x+e.origin.x),y:i(n.origin.y+e.origin.y)},scale:{x:i(n.scale.x+e.scale.x),y:i(n.scale.y+e.scale.y)},skew:{x:i(n.skew.x+e.skew.x),y:i(n.skew.y+e.skew.y)},rotation:n.rotation+e.rotation}},l.is=function(e){return e&&e.position&&e.size&&"number"==typeof e.position.x&&"number"==typeof e.size.width},(h=b||(b={})).fixSize=function(e,n){if(e.width<=n.width&&e.height<=n.height)return 1;let r=e.width/n.width,i=e.height/n.height;return 1/(r>i?r:i)},h.coverSize=function(e,n){let r=e.width/n.width,i=e.height/n.height;return 1/(r<i?r:i)},h.empty=function(){return{width:0,height:0}},(x||(x={})).empty=()=>({left:0,right:0,top:0,bottom:0}),(w||(w={})).isEmpty=function(e){return!e||void 0===e.topLeft&&void 0===e.topRight&&void 0===e.bottomLeft&&void 0===e.bottomRight};var eh={label:"透明度",type:"float",min:0,max:1,default:1},ec=S||(S={});function eu(e){return`${e}px`}function ed(e,...n){let r=document.createElement(e);return n.length>0&&(r.className=(0,_.A)(n)),r}ec.toPixel=eu,ec.fromPercent=function(e){return parseFloat(e.substring(0,e.length-1))},ec.toPercent=function(e){return`${e}%`},ec.enableEvent=function(e){e.style.pointerEvents="all"},ec.disableEvent=function(e){e.style.pointerEvents="none"},ec.createElement=ed,ec.createDivWithClass=function(...e){return ed("div",...e)},ec.addClass=function(e,...n){e.className=(0,_.A)(n.concat(e.className.split(" ")))},ec.delClass=function(e,...n){n.forEach(n=>{e.classList.remove(n)}),e.className=e.classList.toString()},ec.coverClass=function(e,...n){e.className=(0,_.A)(n)},ec.clearChildren=function(e){e.innerHTML=""},ec.translatePercent=function(e,n,r){e.style.transform=`translate(${n}%, ${r}%)`},ec.translateXPercent=function(e,n){e.style.transform=`translateX(${n}%)`},ec.translateYPercent=function(e,n){e.style.transform=`translateY(${n}%)`},ec.setStyle=function(e,n){let r=[];B(n).forEach(e=>((e,n)=>{void 0!==e&&("number"==typeof e&&"opacity"!==n&&"zIndex"!==n&&"scale"!==n&&(e=eu(e)),r.push(`${n.replace(/([A-Z])/,e=>`-${e.toLowerCase()}`)}:${e}`))})(n[e],e));let i=e.getAttribute("style"),s=r.join(";");i!==s&&e.setAttribute("style",s)},ec.classNameWithPrefix=function(e){return(n,r)=>(0,_.A)(n.split(/\s+/).map(n=>`${e}-${n}`).join(" "),r)},ec.addStandardDisposableListener=function(e,n,r,i){return e.addEventListener(n,r,i),u.create(()=>{e.removeEventListener(n,r)})},ec.createDOMCache=function(e,n,r){return g.create(()=>{let i="string"==typeof n?ec.createDivWithClass(n):n();return r&&(i.innerHTML=r),e.appendChild(i),Object.assign(i,{dispose:()=>{let{parentNode:e}=i;e&&e.removeChild(i)},setStyle:e=>{ec.setStyle(i,e)}})})};var ep=0;function ef(){return ep===Number.MAX_SAFE_INTEGER&&(ep=0),ep++}function eg(e,n,r){e(n).toSelf().inSingletonScope(),r.forEach(r=>e(r).toService(n))}var em=Symbol("ContributionProvider"),ey=class{constructor(e,n){this.container=e,this.identifier=n}forEach(e){this.getContributions().forEach(e)}getContributions(){if(!this.services){let e=[],{container:n}=this;if(n.isBound(this.identifier))try{e.push(...n.getAll(this.identifier))}catch(e){console.error(e)}this.services=e}return this.services}};function eO(e,n){e(em).toDynamicValue(e=>new ey(e.container,n)).inSingletonScope().whenTargetNamed(n)}function ev(e){let[,n]=(0,k.useState)(e);return(0,k.useCallback)(e=>n(void 0!==e?e:{}),[])}new class{isDevEnv(){return!1}info(...e){if(this.isDevEnv())return console.info(e)}log(...e){if(this.isDevEnv())return console.log(...e)}error(...e){return console.error(...e)}warn(...e){return console.warn(...e)}}},42225:function(e,n,r){"use strict";r.d(n,{vi:()=>l,It:()=>a,zx:()=>e2,Ui:()=>tC,G8:()=>tP,tF:()=>tE,Vb:()=>ty,xh:()=>tw,Dg:()=>tS,HG:()=>tx,Y1:()=>t_,kb:()=>e1,dL:()=>tT});var i,s,o,a,l,h=r(11812),c=r(5243);function u(e){return"function"==typeof e}function d(e){var n=e(function(e){Error.call(e),e.stack=Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var p=d(function(e){return function(n){e(this),this.message=n?n.length+" errors occurred during unsubscription:\n"+n.map(function(e,n){return n+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=n}});function f(e,n){if(e){var r=e.indexOf(n);0<=r&&e.splice(r,1)}}var g=function(){var e;function n(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return n.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e,n,r,i,s,o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=(0,c.Ju)(o),l=a.next();!l.done;l=a.next())l.value.remove(this)}catch(n){e={error:n}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}else o.remove(this);var h=this.initialTeardown;if(u(h))try{h()}catch(e){s=e instanceof p?e.errors:[e]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var f=(0,c.Ju)(d),g=f.next();!g.done;g=f.next()){var m=g.value;try{O(m)}catch(e){s=null!=s?s:[],e instanceof p?s=(0,c.fX)((0,c.fX)([],(0,c.zs)(s)),(0,c.zs)(e.errors)):s.push(e)}}}catch(e){r={error:e}}finally{try{g&&!g.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}}if(s)throw new p(s)}},n.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)O(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!=(r=this._finalizers)?r:[]).push(e)}},n.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},n.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},n.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&f(n,e)},n.prototype.remove=function(e){var r=this._finalizers;r&&f(r,e),e instanceof n&&e._removeParent(this)},(e=new n).closed=!0,n.EMPTY=e,n}(),m=g.EMPTY;function y(e){return e instanceof g||e&&"closed"in e&&u(e.remove)&&u(e.add)&&u(e.unsubscribe)}function O(e){u(e)?e():e.unsubscribe()}var b=void 0,x={setTimeout:function(e,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var s=x.delegate;return(null==s?void 0:s.setTimeout)?s.setTimeout.apply(s,(0,c.fX)([e,n],(0,c.zs)(r))):setTimeout.apply(void 0,(0,c.fX)([e,n],(0,c.zs)(r)))},clearTimeout:function(e){var n=x.delegate;return((null==n?void 0:n.clearTimeout)||clearTimeout)(e)},delegate:void 0};function w(e){x.setTimeout(function(){!1;throw e})}function S(){}var _=k("C",void 0,void 0);function k(e,n,r){return{kind:e,value:n,error:r}}var C=null;function E(e){var n,r,i,s;1;e()}var T=function(e){function n(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,y(n)&&n.add(r)):r.destination=$,r}return(0,c.C6)(n,e),n.create=function(e,n,r){return new N(e,n,r)},n.prototype.next=function(e){this.isStopped?I(k("N",e,void 0),this):this._next(e)},n.prototype.error=function(e){this.isStopped?I(k("E",void 0,e),this):(this.isStopped=!0,this._error(e))},n.prototype.complete=function(){this.isStopped?I(_,this):(this.isStopped=!0,this._complete())},n.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},n.prototype._next=function(e){this.destination.next(e)},n.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},n.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},n}(g),P=Function.prototype.bind;function A(e,n){return P.call(e,n)}var M=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(e){D(e)}},e.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(e){D(e)}else D(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){D(e)}},e}(),N=function(e){function n(n,r,i){var s,o,a=e.call(this)||this;return u(n)||!n?s={next:null!=n?n:void 0,error:null!=r?r:void 0,complete:null!=i?i:void 0}:s=n,a.destination=new M(s),a}return(0,c.C6)(n,e),n}(T);function D(e){1;w(e)}function I(e,n){}var $={closed:!0,next:S,error:function(e){throw e},complete:S},R="function"==typeof Symbol&&Symbol.observable||"@@observable";function L(e){return e}var Q=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(n){var r=new e;return r.source=this,r.operator=n,r},e.prototype.subscribe=function(e,n,r){var i=this,s=!function(e){return e&&e instanceof T||e&&u(e.next)&&u(e.error)&&u(e.complete)&&y(e)}(e)?new N(e,n,r):e;return E(function(){var e=i.operator,n=i.source;s.add(e?e.call(s,n):n?i._subscribe(s):i._trySubscribe(s))}),s},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},e.prototype.forEach=function(e,n){var r=this;return new(n=j(n))(function(n,i){var s=new N({next:function(n){try{e(n)}catch(e){i(e),s.unsubscribe()}},error:i,complete:n});r.subscribe(s)})},e.prototype._subscribe=function(e){var n;return null==(n=this.source)?void 0:n.subscribe(e)},e.prototype[R]=function(){return this},e.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(0===e.length?L:1===e.length?e[0]:function(n){return e.reduce(function(e,n){return n(e)},n)})(this)},e.prototype.toPromise=function(e){var n=this;return new(e=j(e))(function(e,r){var i;n.subscribe(function(e){return i=e},function(e){return r(e)},function(){return e(i)})})},e.create=function(n){return new e(n)},e}();function j(e){var n;return null!=(n=null!=e?e:b)?n:Promise}var V=d(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),z=function(e){function n(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return(0,c.C6)(n,e),n.prototype.lift=function(e){var n=new B(this,this);return n.operator=e,n},n.prototype._throwIfClosed=function(){if(this.closed)throw new V},n.prototype.next=function(e){var n=this;E(function(){var r,i;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var s=(0,c.Ju)(n.currentObservers),o=s.next();!o.done;o=s.next())o.value.next(e)}catch(e){r={error:e}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}})},n.prototype.error=function(e){var n=this;E(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=e;for(var r=n.observers;r.length;)r.shift().error(e)}})},n.prototype.complete=function(){var e=this;E(function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var n=e.observers;n.length;)n.shift().complete()}})},n.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(n.prototype,"observed",{get:function(){var e;return(null==(e=this.observers)?void 0:e.length)>0},enumerable:!1,configurable:!0}),n.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},n.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},n.prototype._innerSubscribe=function(e){var n=this,r=this.hasError,i=this.isStopped,s=this.observers;return r||i?m:(this.currentObservers=null,s.push(e),new g(function(){n.currentObservers=null,f(s,e)}))},n.prototype._checkFinalizedStatuses=function(e){var n=this.hasError,r=this.thrownError,i=this.isStopped;n?e.error(r):i&&e.complete()},n.prototype.asObservable=function(){var e=new Q;return e.source=this,e},n.create=function(e,n){return new B(e,n)},n}(Q),B=function(e){function n(n,r){var i=e.call(this)||this;return i.destination=n,i.source=r,i}return(0,c.C6)(n,e),n.prototype.next=function(e){var n,r;null==(r=null==(n=this.destination)?void 0:n.next)||r.call(n,e)},n.prototype.error=function(e){var n,r;null==(r=null==(n=this.destination)?void 0:n.error)||r.call(n,e)},n.prototype.complete=function(){var e,n;null==(n=null==(e=this.destination)?void 0:e.complete)||n.call(e)},n.prototype._subscribe=function(e){var n,r;return null!=(r=null==(n=this.source)?void 0:n.subscribe(e))?r:m},n}(z),F=r(67055),Z=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function q(e){return u(null==e?void 0:e.then)}function W(e){return Symbol.asyncIterator&&u(null==e?void 0:e[Symbol.asyncIterator])}function X(e){return TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var U="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function Y(e){return u(null==e?void 0:e[U])}function G(e){return(0,c.AQ)(this,arguments,function(){var n,r,i;return(0,c.YH)(this,function(s){switch(s.label){case 0:n=e.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,(0,c.N3)(n.read())];case 3:if(i=(r=s.sent()).value,!r.done)return[3,5];return[4,(0,c.N3)(void 0)];case 4:return[2,s.sent()];case 5:return[4,(0,c.N3)(i)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function H(e){return u(null==e?void 0:e.getReader)}function K(e){if(e instanceof Q)return e;if(null!=e){var n,r,i,s;if(u(e[R])){return n=e,new Q(function(e){var r=n[R]();if(u(r.subscribe))return r.subscribe(e);throw TypeError("Provided object does not correctly implement Symbol.observable")})}if(Z(e)){return r=e,new Q(function(e){for(var n=0;n<r.length&&!e.closed;n++)e.next(r[n]);e.complete()})}if(q(e)){return i=e,new Q(function(e){i.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,w)})}if(W(e))return J(e);if(Y(e)){return s=e,new Q(function(e){var n,r;try{for(var i=(0,c.Ju)(s),o=i.next();!o.done;o=i.next()){var a=o.value;if(e.next(a),e.closed)return}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()})}if(H(e))return J(G(e))}throw X(e)}function J(e){return new Q(function(n){(function(e,n){var r,i,s,o;return(0,c.sH)(this,void 0,void 0,function(){var a;return(0,c.YH)(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),r=(0,c.xN)(e),l.label=1;case 1:return[4,r.next()];case 2:if((i=l.sent()).done)return[3,4];if(a=i.value,n.next(a),n.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s={error:l.sent()},[3,11];case 6:if(l.trys.push([6,,9,10]),!(i&&!i.done&&(o=r.return)))return[3,8];return[4,o.call(r)];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(s)throw s.error;return[7];case 10:return[7];case 11:return n.complete(),[2]}})})})(e,n).catch(function(e){return n.error(e)})})}function ee(e){return function(n){if(u(null==n?void 0:n.lift))return n.lift(function(n){try{return e(n,this)}catch(e){this.error(e)}});throw TypeError("Unable to lift unknown Observable type")}}function et(e,n,r,i,s){return new en(e,n,r,i,s)}var en=function(e){function n(n,r,i,s,o,a){var l=e.call(this,n)||this;return l.onFinalize=o,l.shouldUnsubscribe=a,l._next=r?function(e){try{r(e)}catch(e){n.error(e)}}:e.prototype._next,l._error=s?function(e){try{s(e)}catch(e){n.error(e)}finally{this.unsubscribe()}}:e.prototype._error,l._complete=i?function(){try{i()}catch(e){n.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,l}return(0,c.C6)(n,e),n.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),r||null==(n=this.onFinalize)||n.call(this)}},n}(T);function er(e,n){return ee(function(r,i){var s=null,o=0,a=!1,l=function(){return a&&!s&&i.complete()};r.subscribe(et(i,function(r){null==s||s.unsubscribe();var a=0,h=o++;K(e(r,h)).subscribe(s=et(i,function(e){return i.next(n?n(r,e,h,a++):e)},function(){s=null,l()}))},function(){a=!0,l()}))})}function ei(e,n){return ee(function(r,i){var s=0;r.subscribe(et(i,function(r){i.next(e.call(n,r,s++))}))})}function es(e,n,r,i,s){void 0===i&&(i=0),void 0===s&&(s=!1);var o=n.schedule(function(){r(),s?e.add(this.schedule(null,i)):this.unsubscribe()},i);if(e.add(o),!s)return o}function eo(e){return void 0===e&&(e=1/0),function e(n,r,i){return(void 0===i&&(i=1/0),u(r))?e(function(e,i){return ei(function(n,s){return r(e,n,i,s)})(K(n(e,i)))},i):("number"==typeof r&&(i=r),ee(function(e,r){var s,o,a,l,h,c,u,d,p;return s=i,a=[],l=0,h=0,c=!1,u=function(){!c||a.length||l||r.complete()},d=function(e){return l<s?p(e):a.push(e)},p=function(e){l++;var i=!1;K(n(e,h++)).subscribe(et(r,function(e){o?d(e):r.next(e)},function(){i=!0},void 0,function(){if(i)try{for(l--;a.length&&l<s;)!function(){var e=a.shift();p(e)}();u()}catch(e){r.error(e)}}))},e.subscribe(et(r,d,function(){c=!0,u()})),function(){}}))}(L,e)}var ea=new Q(function(e){return e.complete()});function el(e){return e[e.length-1]}function eh(e){var n;return(n=el(e))&&u(n.schedule)?e.pop():void 0}function ec(e,n){return void 0===n&&(n=0),ee(function(r,i){r.subscribe(et(i,function(r){return es(i,e,function(){return i.next(r)},n)},function(){return es(i,e,function(){return i.complete()},n)},function(r){return es(i,e,function(){return i.error(r)},n)}))})}function eu(e,n){return void 0===n&&(n=0),ee(function(r,i){i.add(e.schedule(function(){return r.subscribe(i)},n))})}function ed(e,n){if(!e)throw Error("Iterable cannot be null");return new Q(function(r){es(r,n,function(){var i=e[Symbol.asyncIterator]();es(r,n,function(){i.next().then(function(e){e.done?r.complete():r.next(e.value)})},0,!0)})})}function ep(e,n){return n?function(e,n){if(null!=e){if(u(e[R]))return K(e).pipe(eu(n),ec(n));if(Z(e))return new Q(function(r){var i=0;return n.schedule(function(){i===e.length?r.complete():(r.next(e[i++]),r.closed||this.schedule())})});if(q(e))return K(e).pipe(eu(n),ec(n));if(W(e))return ed(e,n);if(Y(e))return new Q(function(r){var i;return es(r,n,function(){i=e[U](),es(r,n,function(){var e,n,s;try{n=(e=i.next()).value,s=e.done}catch(e){r.error(e);return}s?r.complete():r.next(n)},0,!0)}),function(){return u(null==i?void 0:i.return)&&i.return()}});if(H(e))return ed(G(e),n)}throw X(e)}(e,n):K(e)}function ef(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=eh(n),s=(e=1/0,"number"==typeof el(n)?n.pop():e);return n.length?1===n.length?K(n[0]):eo(s)(ep(n,i)):ea}function eg(e,n){return ee(function(r,i){var s=0;r.subscribe(et(i,function(r){return e.call(n,r,s++)&&i.next(r)}))})}function em(e){return eg(function(n,r){return e<=r})}function ey(e){void 0===e&&(e={});var n=e.connector,r=void 0===n?function(){return new z}:n,i=e.resetOnError,s=void 0===i||i,o=e.resetOnComplete,a=void 0===o||o,l=e.resetOnRefCountZero,h=void 0===l||l;return function(e){var n,i,o,l=0,c=!1,u=!1,d=function(){null==i||i.unsubscribe(),i=void 0},p=function(){d(),n=o=void 0,c=u=!1},f=function(){var e=n;p(),null==e||e.unsubscribe()};return ee(function(e,g){l++,u||c||d();var m=o=null!=o?o:r();g.add(function(){0!=--l||u||c||(i=eO(f,h))}),m.subscribe(g),!n&&l>0&&(n=new N({next:function(e){return m.next(e)},error:function(e){u=!0,d(),i=eO(p,s,e),m.error(e)},complete:function(){c=!0,d(),i=eO(p,a),m.complete()}}),K(e).subscribe(n))})(e)}}function eO(e,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(!0===n)return void e();if(!1!==n){var s=new N({next:function(){s.unsubscribe(),e()}});return K(n.apply(void 0,(0,c.fX)([],(0,c.zs)(r)))).subscribe(s)}}var ev=r(2543),eb=function(e){function n(n){var r=e.call(this)||this;return r._value=n,r}return(0,c.C6)(n,e),Object.defineProperty(n.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),n.prototype._subscribe=function(n){var r=e.prototype._subscribe.call(this,n);return r.closed||n.next(this._value),r},n.prototype.getValue=function(){var e=this.hasError,n=this.thrownError,r=this._value;if(e)throw n;return this._throwIfClosed(),r},n.prototype.next=function(n){e.prototype.next.call(this,this._value=n)},n}(z);function ex(e,n){return void 0===n&&(n=L),e=null!=e?e:ew,ee(function(r,i){var s,o=!0;r.subscribe(et(i,function(r){var a=n(r);(o||!e(s,a))&&(o=!1,s=a,i.next(r))}))})}function ew(e,n){return e===n}function eS(e,n,r){var i=u(e)||n||r?{next:e,error:n,complete:r}:e;return i?ee(function(e,n){null==(r=i.subscribe)||r.call(i);var r,s=!0;e.subscribe(et(n,function(e){var r;null==(r=i.next)||r.call(i,e),n.next(e)},function(){var e;s=!1,null==(e=i.complete)||e.call(i),n.complete()},function(e){var r;s=!1,null==(r=i.error)||r.call(i,e),n.error(e)},function(){var e,n;s&&(null==(e=i.unsubscribe)||e.call(i)),null==(n=i.finalize)||n.call(i)}))}):L}var e_=function(e){function n(n,r){return e.call(this)||this}return(0,c.C6)(n,e),n.prototype.schedule=function(e,n){return void 0===n&&(n=0),this},n}(g),ek={setInterval:function(e,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var s=ek.delegate;return(null==s?void 0:s.setInterval)?s.setInterval.apply(s,(0,c.fX)([e,n],(0,c.zs)(r))):setInterval.apply(void 0,(0,c.fX)([e,n],(0,c.zs)(r)))},clearInterval:function(e){var n=ek.delegate;return((null==n?void 0:n.clearInterval)||clearInterval)(e)},delegate:void 0},eC=function(e){function n(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return(0,c.C6)(n,e),n.prototype.schedule=function(e,n){if(void 0===n&&(n=0),this.closed)return this;this.state=e;var r,i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=null!=(r=this.id)?r:this.requestAsyncId(s,this.id,n),this},n.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),ek.setInterval(e.flush.bind(e,this),r)},n.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&ek.clearInterval(n)},n.prototype.execute=function(e,n){if(this.closed)return Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},n.prototype._execute=function(e,n){var r,i=!1;try{this.work(e)}catch(e){i=!0,r=e||Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r},n.prototype.unsubscribe=function(){if(!this.closed){var n=this.id,r=this.scheduler,i=r.actions;this.work=this.state=this.scheduler=null,this.pending=!1,f(i,this),null!=n&&(this.id=this.recycleAsyncId(r,n,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},n}(e_),eE={now:function(){return(eE.delegate||Date).now()},delegate:void 0},eT=function(){function e(n,r){void 0===r&&(r=e.now),this.schedulerActionCtor=n,this.now=r}return e.prototype.schedule=function(e,n,r){return void 0===n&&(n=0),new this.schedulerActionCtor(this,e).schedule(r,n)},e.now=eE.now,e}(),eP=function(e){function n(n,r){void 0===r&&(r=eT.now);var i=e.call(this,n,r)||this;return i.actions=[],i._active=!1,i}return(0,c.C6)(n,e),n.prototype.flush=function(e){var n,r=this.actions;if(this._active)return void r.push(e);this._active=!0;do if(n=e.execute(e.state,e.delay))break;while(e=r.shift());if(this._active=!1,n){for(;e=r.shift();)e.unsubscribe();throw n}},n}(eT),eA=new eP(eC);function eM(e,n){return void 0===n&&(n=eA),ee(function(r,i){var s=null,o=null,a=null,l=function(){if(s){s.unsubscribe(),s=null;var e=o;o=null,i.next(e)}};function h(){var r=a+e,o=n.now();if(o<r){s=this.schedule(void 0,r-o),i.add(s);return}l()}r.subscribe(et(i,function(r){o=r,a=n.now(),s||(s=n.schedule(h,e),i.add(s))},function(){l(),i.complete()},void 0,function(){o=s=null}))})}var eN={schedule:function(e){var n=requestAnimationFrame,r=cancelAnimationFrame,i=eN.delegate;i&&(n=i.requestAnimationFrame,r=i.cancelAnimationFrame);var s=n(function(n){r=void 0,e(n)});return new g(function(){return null==r?void 0:r(s)})},requestAnimationFrame:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=eN.delegate;return((null==r?void 0:r.requestAnimationFrame)||requestAnimationFrame).apply(void 0,(0,c.fX)([],(0,c.zs)(e)))},cancelAnimationFrame:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=eN.delegate;return((null==r?void 0:r.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,(0,c.fX)([],(0,c.zs)(e)))},delegate:void 0},eD=function(e){function n(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i}return(0,c.C6)(n,e),n.prototype.requestAsyncId=function(n,r,i){return(void 0===i&&(i=0),null!==i&&i>0)?e.prototype.requestAsyncId.call(this,n,r,i):(n.actions.push(this),n._scheduled||(n._scheduled=eN.requestAnimationFrame(function(){return n.flush(void 0)})))},n.prototype.recycleAsyncId=function(n,r,i){if(void 0===i&&(i=0),null!=i?i>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,n,r,i);var s,o=n.actions;null!=r&&r===n._scheduled&&(null==(s=o[o.length-1])?void 0:s.id)!==r&&(eN.cancelAnimationFrame(r),n._scheduled=void 0)},n}(eC),eI=new(function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return(0,c.C6)(n,e),n.prototype.flush=function(e){this._active=!0,e?n=e.id:(n=this._scheduled,this._scheduled=void 0);var n,r,i=this.actions;e=e||i.shift();do if(r=e.execute(e.state,e.delay))break;while((e=i[0])&&e.id===n&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===n&&i.shift();)e.unsubscribe();throw r}},n}(eP))(eD),e$=r(36833),eR=r(51548);function eL(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=eh(e);return ep(e,r)}var eQ=Array.isArray,ej=Object.getPrototypeOf,eV=Object.prototype,ez=Object.keys,eB=Array.isArray;function eF(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return eo(1)(ep(e,eh(e)))}var eZ=r(96540),eq=r(81376),eW=Object.defineProperty,eX=Object.getOwnPropertyDescriptor,eU=(e,n,r,i)=>{for(var s,o=i>1?void 0:i?eX(n,r):n,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i?s(n,r,o):s(o))||o);return i&&o&&eW(n,r,o),o},eY=(e,n)=>(r,i)=>n(r,i,e);function eG(e){return F.jG.create(()=>e.unsubscribe())}var eH=()=>{let e=new Map,n=(n,r)=>{if(e.has(n))return e.get(n);let i=r();return e.set(n,i),i};return n.clear=n=>{n?e.delete(n):e.clear()},n},eK=class{constructor(e){this.parentTable=e,this.table=new Map,this.toDispose=new F.Vd,this.onDataChangeEmitter=new F.vl,this.variables$=new z,this.anyVariableChange$=this.variables$.pipe(er(e=>ef(...e.map(e=>e.value$.pipe(em(1))))),ey()),this.onDataChange=this.onDataChangeEmitter.event,this._version=0,this.toDispose.pushAll([this.onDataChangeEmitter,this.onAnyVariableChange(()=>{this.bumpVersion()})])}onAnyVariableChange(e){return eG(this.anyVariableChange$.subscribe(e))}onVariableListChange(e){return eG(this.variables$.subscribe(e))}onListOrAnyVarChange(e){let n=new F.Vd;return n.pushAll([this.onVariableListChange(e),this.onAnyVariableChange(e)]),n}fireChange(){this.bumpVersion(),this.onDataChangeEmitter.fire(),this.variables$.next(this.variables),this.parentTable?.fireChange()}get version(){return this._version}bumpVersion(){this._version=this._version+1,this._version===Number.MAX_SAFE_INTEGER&&(this._version=0)}get variables(){return Array.from(this.table.values())}get variableKeys(){return Array.from(this.table.keys())}getByKeyPath(e){let[n,...r]=e||[];if(!n)return;let i=this.getVariableByKey(n);return r.length?i?.getByKeyPath(r):i}getVariableByKey(e){return this.table.get(e)}addVariableToTable(e){this.table.set(e.key,e),this.parentTable&&this.parentTable.addVariableToTable(e)}removeVariableFromTable(e){this.table.delete(e),this.parentTable&&this.parentTable.removeVariableFromTable(e)}dispose(){this.variableKeys.forEach(e=>this.parentTable?.removeVariableFromTable(e)),this.parentTable?.fireChange(),this.variables$.complete(),this.variables$.unsubscribe(),this.toDispose.dispose()}},eJ=Symbol("DynamicVariableEngine"),e0=Symbol("ContainerProvider"),e1=class{constructor(){this.toDispose=new F.Vd}get variableEngine(){return this.variableEngineProvider()}refreshAllChange(){this.variableEngine.getAllScopes().forEach(e=>{e.refreshCovers(),e.refreshDeps()})}dispose(){this.toDispose.dispose()}get disposed(){return this.toDispose.disposed}get onDispose(){return this.toDispose.onDispose}};eU([(0,h.WQ)(eJ)],e1.prototype,"variableEngineProvider",2),e1=eU([(0,h._G)()],e1);var e2=((i=e2||{}).String="String",i.Number="Number",i.Integer="Integer",i.Boolean="Boolean",i.Object="Object",i.Array="Array",i.Map="Map",i.Union="Union",i.Any="Any",i.CustomType="CustomType",i.Property="Property",i.VariableDeclaration="VariableDeclaration",i.VariableDeclarationList="VariableDeclarationList",i.KeyPathExpression="KeyPathExpression",i.EnumerateExpression="EnumerateExpression",i.WrapArrayExpression="WrapArrayExpression",i.ListNode="ListNode",i.DataNode="DataNode",i.MapNode="MapNode",i),e5=Symbol("post_construct_ast");function e4({getChildNode:e,updateChildNode:n,removeChildNode:r,nextJSON:i}){let s=e(),o=s?.kind!==i?.kind,a=i?.key&&i?.key!==s?.key;if(o||a){if(s&&(s.dispose(),r()),i){let e=this.createChildNode(i);return n(e),this.fireChange(),e}this.fireChange()}else i&&s?.fromJSON(i);return s}function e3(e){return"string"==typeof e?{kind:e}:e}(s=a||(a={})).isString=e=>e?.kind==="String",s.isNumber=e=>e?.kind==="Number",s.isBoolean=e=>e?.kind==="Boolean",s.isInteger=e=>e?.kind==="Integer",s.isObject=e=>e?.kind==="Object",s.isArray=e=>e?.kind==="Array",s.isMap=e=>e?.kind==="Map",s.isCustomType=e=>e?.kind==="CustomType",s.isVariableDeclaration=e=>e?.kind==="VariableDeclaration",s.isProperty=e=>e?.kind==="Property",s.isVariableDeclarationList=e=>e?.kind==="VariableDeclarationList",s.isEnumerateExpression=e=>e?.kind==="EnumerateExpression",s.isKeyPathExpression=e=>e?.kind==="KeyPathExpression",s.is=function(e,n){return e?.kind===n?.kind};var e6=class e{constructor({key:e,parent:n,scope:r},i){this.flags=0,this._version=0,this.changeLocked=!1,this._batch={batching:!1,hasChangesInBatch:!1},this.value$=new eb(this),this._children=new Set,this.toDispose=new F.Vd(F.jG.create(()=>{this.parent?.fireChange(),this.children.forEach(e=>e.dispose())})),this.onDispose=this.toDispose.onDispose,this.scope=r,this.parent=n,this.opts=i,this.key=e||(0,e$.Ak)(),this.fromJSON=this.withBatchUpdate(this.fromJSON.bind(this))}get kind(){if(!this.constructor.kind)throw Error(`ASTNode Registry need a kind: ${this.constructor.name}`);return this.constructor.kind}get children(){return Array.from(this._children)}toJSON(){return console.warn("[VariableEngine] Please Implement toJSON method for "+this.kind),{kind:this.kind}}createChildNode(e){let n=this.scope.variableEngine.astRegisters.createAST(e,{parent:this,scope:this.scope});return this._children.add(n),n.toDispose.push(F.jG.create(()=>{this._children.delete(n)})),n}updateChildNodeByKey(e,n){this.withBatchUpdate(e4).call(this,{getChildNode:()=>this[e],updateChildNode:n=>this[e]=n,removeChildNode:()=>this[e]=void 0,nextJSON:n})}withBatchUpdate(e){return(...n)=>{if(this._batch.batching)return e.call(this,...n);this._batch.hasChangesInBatch=!1,this._batch.batching=!0;let r=e.call(this,...n);return this._batch.batching=!1,this._batch.hasChangesInBatch&&this.fireChange(),this._batch.hasChangesInBatch=!1,r}}fireChange(){if(!this.changeLocked&&!this.disposed){if(this._batch.batching){this._batch.hasChangesInBatch=!0;return}this._version++,this.value$.next(this),this.dispatchGlobalEvent({type:"UpdateAST"}),this.parent?.fireChange()}}get version(){return this._version}get hash(){return`${this._version}${this.kind}${this.key}`}subscribe(n,{selector:r,debounceAnimation:i,triggerOnInit:s}={}){return eG(this.value$.pipe(ei(()=>r?r(this):this),ex((e,n)=>(0,eR.shallowEqual)(e,n),n=>n instanceof e?n.hash:n),s?eS(()=>null):em(1),i?eM(0,eI):eS(()=>null)).subscribe(n))}dispatchGlobalEvent(e){this.scope.event.dispatch({...e,ast:this})}dispose(){this.toDispose.disposed||(this.toDispose.dispose(),this.dispatchGlobalEvent({type:"DisposeAST"}),this.value$.complete(),this.value$.unsubscribe())}get disposed(){return this.toDispose.disposed}},e9=class extends e6{constructor(){super(...arguments),this.flags=8}isTypeEqual(e){let n=e3(e);return n?.kind==="Union"?(n?.types||[])?.some(e=>this.isTypeEqual(e)):this.kind===n?.kind}getByKeyPath(e=[]){throw Error(`Get By Key Path is not implemented for Type: ${this.kind}`)}toJSON(){return{kind:this.kind}}},e7=class extends e9{constructor(){super(...arguments),this.flags=48}fromJSON({items:e}){this.updateChildNodeByKey("items",e3(e))}get canDrilldownItems(){return!!(this.items?.flags&16)}getByKeyPath(e){let[n,...r]=e||[];if("0"===n&&this.canDrilldownItems)return this.items.getByKeyPath(r)}isTypeEqual(e){let n=e3(e),r=super.isTypeEqual(e);return n?.weak||n?.kind==="Union"?r:n&&r&&(n?.weak||this.customStrongEqual(n))}customStrongEqual(e){return this.items?this.items?.isTypeEqual(e.items):!e?.items}toJSON(){return{kind:"Array",items:this.items?.toJSON()}}};e7.kind="Array";var e8=class extends e9{constructor(){super(...arguments),this.flags=8}fromJSON(){}};e8.kind="String";var te=class extends e9{constructor(){super(...arguments),this.flags=8}fromJSON(){}};te.kind="Integer";var tt=class extends e9{fromJSON(){}};tt.kind="Boolean";var tn=class extends e9{fromJSON(){}};tn.kind="Number";var tr=class extends e9{fromJSON({keyType:e="String",valueType:n}){this.updateChildNodeByKey("keyType",e3(e)),this.updateChildNodeByKey("valueType",e3(n))}isTypeEqual(e){let n=e3(e),r=super.isTypeEqual(e);return n?.weak||n?.kind==="Union"?r:n&&r&&(n?.weak||this.customStrongEqual(n))}customStrongEqual(e){let{keyType:n="String",valueType:r}=e;return(!r&&!this.valueType||this.valueType?.isTypeEqual(r))&&this.keyType?.isTypeEqual(n)}toJSON(){return{kind:"Map",keyType:this.keyType?.toJSON(),valueType:this.valueType?.toJSON()}}};tr.kind="Map";var ti=class extends e9{constructor(){super(...arguments),this.flags=16,this.propertyTable=new Map}fromJSON({properties:e}){let n=new Set(this.propertyTable.keys()),r=[...this.properties||[]];this.properties=(e||[]).map(e=>{let r=this.propertyTable.get(e.key);if(n.delete(e.key),r)return r.fromJSON(e),r;{let n=this.createChildNode({...e,kind:"Property"});return this.fireChange(),this.propertyTable.set(e.key,n),n}}),n.forEach(e=>{let n=this.propertyTable.get(e);n?.dispose(),this.propertyTable.delete(e),this.fireChange()}),this.dispatchGlobalEvent({type:"ObjectPropertiesChange",payload:{prev:r,next:[...this.properties]}})}toJSON(){return{kind:"Object",properties:this.properties.map(e=>e.toJSON())}}getByKeyPath(e){let[n,...r]=e,i=this.propertyTable.get(n);return r.length?i?.type&&i?.type?.flags&16?i.type.getByKeyPath(r):void 0:i}isTypeEqual(e){let n=e3(e),r=super.isTypeEqual(e);return n?.weak||n?.kind==="Union"?r:n&&r&&(n?.weak||this.customStrongEqual(n))}customStrongEqual(e){let n=e.properties||[],r=Array.from(this.propertyTable.keys()),i=n.map(e=>e.key);return!(0,ev.xor)(r,i).length&&n.every(e=>{let n=this.propertyTable.get(e.key);return n&&n.key===e.key&&n.type?.isTypeEqual(e?.type)})}};ti.kind="Object";var ts=class extends e9{get typeName(){return this._typeName}fromJSON(e){this._typeName!==e.typeName&&(this._typeName=e.typeName,this.fireChange())}isTypeEqual(e){let n=e3(e);return n?.kind==="Union"?(n?.types||[])?.some(e=>this.isTypeEqual(e)):n?.kind===this.kind&&n?.typeName===this.typeName}};function to(e){let n=e.parent,r=[];for(;n;)1&n.flags&&r.push(n),n=n.parent;return r}ts.kind="CustomType";var ta=class extends e6{constructor(e,n){super(e,n),this.flags=4,this._refs=[],this.refreshRefs$=new z,this.refs$=this.refreshRefs$.pipe(ei(()=>this.getRefFields()),ex(eR.shallowEqual),er(e=>e?.length?function(){for(var e,n,r,i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var o=eh(i),a=u(el(i))?i.pop():void 0,l=function(e){if(1===e.length){var n,r=e[0];if(eQ(r))return{args:r,keys:null};if((n=r)&&"object"==typeof n&&ej(n)===eV){var i=ez(r);return{args:i.map(function(e){return r[e]}),keys:i}}}return{args:e,keys:null}}(i),h=l.args,d=l.keys;if(0===h.length)return ep([],o);var p=new Q((e=h,n=o,void 0===(r=d?function(e){return d.reduce(function(n,r,i){return n[r]=e[i],n},{})}:L)&&(r=L),function(i){var s,o,a;s=n,o=function(){for(var s=e.length,o=Array(s),a=s,l=s,h=function(s){var h,c,u;h=n,c=function(){var h=ep(e[s],n),c=!1;h.subscribe(et(i,function(e){o[s]=e,!c&&(c=!0,l--),l||i.next(r(o.slice()))},function(){--a||i.complete()}))},u=i,h?es(u,h,c):c()},c=0;c<s;c++)h(c)},a=i,s?es(a,s,o):o()}));return a?p.pipe(ei(function(e){return eB(e)?a.apply(void 0,(0,c.fX)([],(0,c.zs)(e))):a(e)})):p}(e.map(e=>e?e.value$:eL(void 0))):eL([])),ey()),this.toDispose.push(eG(this.refs$.subscribe(e=>{this._refs=e,this.fireChange()})))}get globalVariableTable(){return this.scope.variableEngine.globalVariableTable}get parentFields(){return to(this)}get refs(){return this._refs}refreshRefs(){this.refreshRefs$.next()}};var tl=class extends ta{get enumerateFor(){return this._enumerateFor}get returnType(){let e=this.enumerateFor?.returnType;if(e?.kind==="Array")return e.items}getRefFields(){return[]}fromJSON({enumerateFor:e}){this.updateChildNodeByKey("_enumerateFor",e)}toJSON(){return{kind:"EnumerateExpression",enumerateFor:this.enumerateFor?.toJSON()}}};tl.kind="EnumerateExpression";var th=class extends ta{constructor(e,n){super(e,n),this._keyPath=[],this.toDispose.pushAll([this.scope.available.onVariableListChange(()=>{this.refreshRefs()}),this.scope.available.onAnyVariableChange(e=>{e.key===this._keyPath[0]&&this.refreshRefs()}),eG(this.refs$.subscribe(e=>{let[n]=this._refs;this.prevRefTypeHash!==n?.type?.hash&&(this.prevRefTypeHash=n?.type?.hash,this.updateChildNodeByKey("_returnType",this.getReturnTypeJSONByRef(n)))}))])}get keyPath(){return this._keyPath}getRefFields(){let e=this.scope.available.getByKeyPath(this._keyPath);return!function(e,n){if(0===(0,ev.intersection)(e.scope.coverScopes,n.map(e=>e?.scope).filter(Boolean)).length)return!1;let r=new Set,i=[...n];for(;i.length;){let e=i.shift();for(let n of(r.add(e),(function e(n){return[...n.children,...n.children.map(n=>e(n)).flat()]})(e).filter(e=>4&e.flags).map(e=>e.refs).flat().filter(Boolean).filter(e=>!r.has(e))))i.push(n)}return(0,ev.intersection)(Array.from(r),to(e)).length>0}(this,[e])?e?[e]:[]:(console.warn("[CustomKeyPathExpression] checkRefCycle: Reference Cycle Existed",this.parentFields.map(e=>e.key).reverse()),[])}get returnType(){return this._returnType}parseToKeyPath(e){return e.keyPath}fromJSON(e){let n=this.parseToKeyPath(e);(0,eR.shallowEqual)(n,this._keyPath)||(this._keyPath=n,this.refreshRefs())}getReturnTypeJSONByRef(e){return e?.type?.toJSON()}toJSON(){return{kind:"KeyPathExpression",keyPath:this._keyPath}}};th.kind="KeyPathExpression";var tc=class extends ta{get wrapFor(){return this._wrapFor}get returnType(){return this._returnType}refreshReturnType(){let e=this.wrapFor?.returnType?.toJSON();this.updateChildNodeByKey("_returnType",{kind:"Array",items:e})}getRefFields(){return[]}fromJSON({wrapFor:e}){this.updateChildNodeByKey("_wrapFor",e)}toJSON(){return{kind:"WrapArrayExpression",wrapFor:this.wrapFor?.toJSON()}}init(){this.refreshReturnType=this.refreshReturnType.bind(this),this.toDispose.push(this.subscribe(this.refreshReturnType,{selector:e=>e.wrapFor?.returnType,triggerOnInit:!0}))}};tc.kind="WrapArrayExpression",eU([(e,n)=>{if(Reflect.hasMetadata(e5,e))throw Error("Duplication Post Construct AST");Reflect.defineMetadata(e5,n,e)}],tc.prototype,"init",1);var tu=class extends e6{constructor(){super(...arguments),this.flags=1,this._meta={}}get parentFields(){return to(this)}get keyPath(){return[...this.parentFields.reverse().map(e=>e.key),this.key]}get meta(){return this._meta}get type(){return this._initializer?.returnType||this._type}get initializer(){return this._initializer}get hash(){return`[${this._version}]${this.keyPath.join(".")}`}fromJSON({type:e,initializer:n,meta:r}){this.updateType(e),this.updateInitializer(n),this.updateMeta(r)}updateType(e){this.updateChildNodeByKey("_type","string"==typeof e?{kind:e}:e)}updateInitializer(e){this.updateChildNodeByKey("_initializer",e)}updateMeta(e){(0,eR.shallowEqual)(e,this._meta)||(this._meta=e,this.fireChange())}getByKeyPath(e){if(this.type?.flags&16)return this.type.getByKeyPath(e)}onTypeChange(e){return this.subscribe(e,{selector:e=>e.type})}toJSON(){return{kind:this.kind,key:this.key,type:this.type?.toJSON(),initializer:this.initializer?.toJSON(),meta:this._meta}}},td=class extends tu{constructor(e){super(e),this._order=0}get order(){return this._order}fromJSON({order:e,...n}){this.updateOrder(e),super.fromJSON(n)}updateOrder(e=0){e!==this._order&&(this._order=e,this.dispatchGlobalEvent({type:"ReSortVariableDeclarations"}),this.fireChange())}onTypeChange(e){return this.subscribe(e,{selector:e=>e.type})}};td.kind="VariableDeclaration";var tp=class extends e6{constructor(){super(...arguments),this.declarationTable=new Map}fromJSON({declarations:e,startOrder:n}){let r=new Set(this.declarationTable.keys()),i=[...this.declarations||[]];this.declarations=(e||[]).map((e,i)=>{let s=(n||0)+i,o=e.key||this.declarations?.[i]?.key,a=this.declarationTable.get(o);if(o&&r.delete(o),a)return a.fromJSON({order:s,...e}),a;{let n=this.createChildNode({order:s,...e,kind:"VariableDeclaration"});return this.fireChange(),this.declarationTable.set(n.key,n),n}}),r.forEach(e=>{let n=this.declarationTable.get(e);n?.dispose(),this.declarationTable.delete(e)}),this.dispatchGlobalEvent({type:"VariableListChange",payload:{prev:i,next:[...this.declarations]}})}toJSON(){return{kind:"VariableDeclarationList",properties:this.declarations.map(e=>e.toJSON())}}};tp.kind="VariableDeclarationList";var tf=class extends tu{};tf.kind="Property";var tg=class extends e6{get data(){return this._data}fromJSON(e){let{kind:n,...r}=e;(0,eR.shallowEqual)(r,this._data)||(this._data=r,this.fireChange())}toJSON(){return{kind:"DataNode",...this._data}}partialUpdate(e){(0,eR.shallowEqual)(e,this._data)||(this._data={...this._data,...e},this.fireChange())}};tg.kind="DataNode";var tm=class extends e6{constructor(){super(...arguments),this.map=new Map}fromJSON({map:e}){let n=new Set(this.map.keys());for(let[r,i]of e||[])n.delete(r),this.set(r,i);for(let e of Array.from(n))this.remove(e)}toJSON(){return{kind:"MapNode",map:Array.from(this.map.entries())}}set(e,n){return this.withBatchUpdate(e4).call(this,{getChildNode:()=>this.get(e),removeChildNode:()=>this.map.delete(e),updateChildNode:n=>this.map.set(e,n),nextJSON:n})}remove(e){this.get(e)?.dispose(),this.map.delete(e),this.fireChange()}get(e){return this.map.get(e)}};tm.kind="MapNode";var ty=class{constructor(){this.injectors=new Map,this.astMap=new Map,this.registerAST(e8),this.registerAST(tn),this.registerAST(tt),this.registerAST(te),this.registerAST(ti),this.registerAST(e7),this.registerAST(tr),this.registerAST(ts),this.registerAST(tf),this.registerAST(td),this.registerAST(tp),this.registerAST(th),this.registerAST(tl),this.registerAST(tc),this.registerAST(tm),this.registerAST(tg)}createAST(e,{parent:n,scope:r}){let i=this.astMap.get(e.kind);if(!i)throw Error(`ASTKind: ${String(e.kind)} can not find its ASTNode Registry`);let s=this.injectors.get(e.kind),o=new i({key:e.key,scope:r,parent:n},s?.()||{});if(o.changeLocked=!0,o.fromJSON((0,ev.omit)(e,["key","kind"])),o.changeLocked=!1,o.dispatchGlobalEvent({type:"NewAST"}),Reflect.hasMetadata(e5,o)){let e=Reflect.getMetadata(e5,o);o[e]?.()}return o}getASTRegistryByKind(e){return this.astMap.get(e)}registerAST(e,n){this.astMap.set(e.kind,e),n&&this.injectors.set(e.kind,n)}};ty=eU([(0,h._G)()],ty),(o=l||(l={})).createString=()=>({kind:"String"}),o.createNumber=()=>({kind:"Number"}),o.createBoolean=()=>({kind:"Boolean"}),o.createInteger=()=>({kind:"Integer"}),o.createObject=e=>({kind:"Object",...e}),o.createArray=e=>({kind:"Array",...e}),o.createMap=e=>({kind:"Map",...e}),o.createUnion=e=>({kind:"Union",...e}),o.createCustomType=e=>({kind:"CustomType",...e}),o.createVariableDeclaration=e=>({kind:"VariableDeclaration",...e}),o.createProperty=e=>({kind:"Property",...e}),o.createVariableDeclarationList=e=>({kind:"VariableDeclarationList",...e}),o.createEnumerateExpression=e=>({kind:"EnumerateExpression",...e}),o.createKeyPathExpression=e=>({kind:"KeyPathExpression",...e}),o.createWrapArrayExpression=e=>({kind:"WrapArrayExpression",...e}),o.create=(e,n)=>({kind:e.kind,...n});var tO=class{constructor(e){this.scope=e,this.memo=eH(),this._hasChanges=!1,this.variableTable=new eK(e.variableEngine.globalVariableTable),this.scope.toDispose.pushAll([this.scope.ast.subscribe(()=>{this._hasChanges&&(this.memo.clear(),this.notifyCoversChange(),this.variableTable.fireChange(),this._hasChanges=!1)}),this.scope.event.on("DisposeAST",e=>{e.ast?.kind==="VariableDeclaration"&&this.removeVariableFromTable(e.ast.key)}),this.scope.event.on("NewAST",e=>{e.ast?.kind==="VariableDeclaration"&&this.addVariableToTable(e.ast)}),this.scope.event.on("ReSortVariableDeclarations",()=>{this._hasChanges=!0}),this.variableTable])}get variableEngine(){return this.scope.variableEngine}get globalVariableTable(){return this.scope.variableEngine.globalVariableTable}get version(){return this.variableTable.version}get onDataChange(){return this.variableTable.onDataChange.bind(this.variableTable)}get onVariableListChange(){return this.variableTable.onVariableListChange.bind(this.variableTable)}get onAnyVariableChange(){return this.variableTable.onAnyVariableChange.bind(this.variableTable)}get onListOrAnyVarChange(){return this.variableTable.onListOrAnyVarChange.bind(this.variableTable)}get variables(){return this.memo("variables",()=>this.variableTable.variables.sort((e,n)=>e.order-n.order))}get variableKeys(){return this.memo("variableKeys",()=>this.variableTable.variableKeys)}addVariableToTable(e){if(e.scope!==this.scope)throw Error("VariableDeclaration must be a ast node in scope");this.variableTable.addVariableToTable(e),this._hasChanges=!0}removeVariableFromTable(e){this.variableTable.removeVariableFromTable(e),this._hasChanges=!0}getVariableByKey(e){return this.variableTable.getVariableByKey(e)}notifyCoversChange(){this.scope.coverScopes.forEach(e=>e.available.refresh())}},tv=class{constructor(e){this.scope=e,this.memo=eH(),this._version=0,this.refresh$=new z,this._variables=[],this.variables$=this.refresh$.pipe(ei(()=>(0,ev.flatten)(this.depScopes.map(e=>e.output.variables||[]))),ex(eR.shallowEqual),ey()),this.anyVariableChange$=this.variables$.pipe(er(e=>ef(...e.map(e=>e.value$.pipe(em(1))))),ey()),this.onDataChangeEmitter=new F.vl,this.onListOrAnyVarChangeEmitter=new F.vl,this.onDataChange=this.onDataChangeEmitter.event,this.onListOrAnyVarChange=this.onListOrAnyVarChangeEmitter.event,this.scope.toDispose.pushAll([this.onVariableListChange(e=>{this._variables=e,this.memo.clear(),this.onDataChangeEmitter.fire(this._variables),this.bumpVersion(),this.onListOrAnyVarChangeEmitter.fire(this._variables)}),this.onAnyVariableChange(()=>{this.onDataChangeEmitter.fire(this._variables),this.bumpVersion(),this.onListOrAnyVarChangeEmitter.fire(this._variables)}),F.jG.create(()=>{this.refresh$.complete(),this.refresh$.unsubscribe()})])}get globalVariableTable(){return this.scope.variableEngine.globalVariableTable}get version(){return this._version}bumpVersion(){this._version=this._version+1,this._version===Number.MAX_SAFE_INTEGER&&(this._version=0)}refresh(){this.scope.disposed||this.refresh$.next()}onAnyVariableChange(e){return eG(this.anyVariableChange$.subscribe(e))}onVariableListChange(e){return eG(this.variables$.subscribe(e))}get variables(){return this._variables}get variableKeys(){return this.memo("availableKeys",()=>this._variables.map(e=>e.key))}get depScopes(){return this.scope.depScopes}getByKeyPath(e=[]){if(this.variableKeys.includes(e[0]))return this.globalVariableTable.getByKeyPath(e)}trackByKeyPath(e=[],n,r){let{triggerOnInit:i=!0,debounceAnimation:s,selector:o}=r||{};return eG(ef(this.anyVariableChange$,this.variables$).pipe(i?function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=eh(e);return ee(function(n,i){(r?eF(e,n,r):eF(e,n)).subscribe(i)})}():eS(()=>null),ei(()=>{let n=this.getByKeyPath(e);return o?o(n):n}),ex((e,n)=>(0,eR.shallowEqual)(e,n),e=>e instanceof e6?e.hash:e),s?eM(0,eI):eS(()=>null)).subscribe(n))}},tb=class{constructor(e){this.scope=e,this.event$=new z,e.toDispose.pushAll([this.subscribe(n=>{e.variableEngine.fireGlobalEvent(n)})])}dispatch(e){this.scope.disposed||this.event$.next(e)}subscribe(e){return eG(this.event$.subscribe(e))}on(e,n){return eG(this.event$.pipe(eg(n=>n.type===e)).subscribe(n))}},tx=class{constructor(e){this.memo=eH(),this.toDispose=new F.Vd,this.onDispose=this.toDispose.onDispose,this.id=e.id,this.meta=e.meta||{},this.variableEngine=e.variableEngine,this.event=new tb(this),this.ast=this.variableEngine.astRegisters.createAST({kind:"MapNode",key:String(this.id)},{scope:this}),this.output=new tO(this),this.available=new tv(this)}refreshCovers(){this.memo.clear("covers")}refreshDeps(){this.memo.clear("deps"),this.available.refresh()}get depScopes(){return this.memo("deps",()=>this.variableEngine.chain.getDeps(this).filter(e=>!!e&&!e?.disposed))}get coverScopes(){return this.memo("covers",()=>this.variableEngine.chain.getCovers(this).filter(e=>!!e&&!e?.disposed))}dispose(){this.ast.dispose(),this.toDispose.dispose(),this.coverScopes.forEach(e=>e.refreshDeps()),this.depScopes.forEach(e=>e.refreshCovers())}get disposed(){return this.toDispose.disposed}setVar(e,n){if("string"==typeof e&&void 0!==n)return this.ast.set(e,n);if("object"==typeof e&&void 0===n)return this.ast.set("outputs",e);throw Error("Invalid arguments")}getVar(e="outputs"){return this.ast.get(e)}clearVar(e="outputs"){return this.ast.remove(e)}},tw=class{constructor(e,n){this.chain=e,this.astRegisters=n,this.toDispose=new F.Vd,this.memo=eH(),this.scopeMap=new Map,this.globalEvent$=new z,this.onScopeChangeEmitter=new F.vl,this.globalVariableTable=new eK,this.onScopeChange=this.onScopeChangeEmitter.event,this.toDispose.pushAll([e,F.jG.create(()=>{this.getAllScopes().forEach(e=>e.dispose()),this.globalVariableTable.dispose()})])}get container(){return this.containerProvider()}dispose(){this.toDispose.dispose()}getScopeById(e){return this.scopeMap.get(e)}removeScopeById(e){this.getScopeById(e)?.dispose()}createScope(e,n,r={}){let{ScopeConstructor:i=tx}=r,s=this.getScopeById(e);return s||(s=new i({variableEngine:this,meta:n,id:e}),this.scopeMap.set(e,s),this.onScopeChangeEmitter.fire({type:"add",scope:s}),s.toDispose.pushAll([s.ast.subscribe(()=>{this.onScopeChangeEmitter.fire({type:"update",scope:s})}),s.available.onDataChange(()=>{this.onScopeChangeEmitter.fire({type:"available",scope:s})})]),s.onDispose(()=>{this.scopeMap.delete(e),this.onScopeChangeEmitter.fire({type:"delete",scope:s})})),s}getAllScopes({sort:e}={}){let n=Array.from(this.scopeMap.values());if(e){let e=this.chain.sortAll(),r=new Set(n);return e.forEach(e=>r.delete(e)),[...e,...Array.from(r)]}return[...n]}fireGlobalEvent(e){this.globalEvent$.next(e)}onGlobalEvent(e,n){return eG(this.globalEvent$.subscribe(r=>{r.type===e&&n(r)}))}};eU([(0,h.WQ)(e0)],tw.prototype,"containerProvider",2),eU([(0,h.E3)()],tw.prototype,"dispose",1),tw=eU([(0,h._G)(),eY(0,(0,h.WQ)(e1)),eY(1,(0,h.WQ)(ty))],tw);var tS=class{constructor(){this.toDispose=new F.Vd,this.renameEmitter=new F.vl,this.disposeInListEmitter=new F.vl,this.onRename=this.renameEmitter.event,this.onDisposeInList=this.disposeInListEmitter.event}handleFieldListChange(e,n,r){if(!e||!n?.length||!r?.length||n.length!==r.length)return void this.notifyFieldsDispose(n,r);let i=null,s=!1;for(let[e,o]of n.entries()){let a=r[e];if(o.key!==a.key){if(s)return void this.notifyFieldsDispose(n,r);s=!0,o.type?.kind===a.type?.kind&&(i={before:o,after:a})}}if(!i)return void this.notifyFieldsDispose(n,r);this.renameEmitter.fire(i)}notifyFieldsDispose(e,n){(0,ev.difference)(e||[],n||[]).forEach(e=>this.disposeInListEmitter.fire(e))}init(){this.toDispose.pushAll([this.variableEngine.onGlobalEvent("VariableListChange",e=>{this.handleFieldListChange(e.ast,e.payload?.prev,e.payload?.next)}),this.variableEngine.onGlobalEvent("ObjectPropertiesChange",e=>{this.handleFieldListChange(e.ast,e.payload?.prev,e.payload?.next)})])}dispose(){this.toDispose.dispose()}};eU([(0,h.WQ)(tw)],tS.prototype,"variableEngine",2),eU([(0,h.kr)()],tS.prototype,"init",1),eU([(0,h.E3)()],tS.prototype,"dispose",1),tS=eU([(0,h._G)()],tS);var t_=new h.i0(e=>{e(tw).toSelf().inSingletonScope(),e(ty).toSelf().inSingletonScope(),e(tS).toSelf().inSingletonScope(),e(eJ).toDynamicValue(e=>()=>e.container.get(tw)),e(e0).toDynamicValue(e=>()=>e.container)}),tk=(0,eZ.createContext)(null),tC=tk.Provider,tE=()=>(0,eZ.useContext)(tk)?.scope;function tT(){let e=tE(),n=(0,eq.b6)();return(0,eZ.useEffect)(()=>{let r=e.available.onDataChange(()=>{n()});return()=>r.dispose()},[]),e.available}function tP(){let e=tE(),n=(0,eq.h1)(tw),r=(0,eq.b6)();return(0,eZ.useEffect)(()=>{if(!e){let e=n.globalVariableTable.onListOrAnyVarChange(()=>{r()});return()=>e.dispose()}let i=e.available.onDataChange(()=>{r()});return()=>i.dispose()},[]),e?e.available.variables:n.globalVariableTable.variables}},90694:function(e,n,r){"use strict";n.createFuzzySearchImpl=function(e,n){var r=n.strategy,i=void 0===r?"aggressive":r,l=n.getText,h=e.map(function(e){if(l)r=l(e);else{var r;r=[n.key?e[n.key]:e]}return[e,r.map(function(e){var n=e||"",r=(0,s.default)(n),i=new Set(r.split(" "));return[n,r,i]})]});return function(e){var n=[],r=(0,s.default)(e),l=r.split(" ");return r.length?(h.forEach(function(s){for(var a=s[0],h=s[1],u=o,d=[],p=0,f=h.length;p<f;p+=1){var g=h[p],m=c(g[0],g[1],g[2],e,r,l,i);m?(u=Math.min(u,m[0]),d.push(m[1])):d.push(null)}u<o&&n.push({item:a,score:u,matches:d})}),n.sort(a),n):[]}},n.fuzzyMatchImpl=function(e,n){var r=(0,s.default)(n),i=r.split(" "),o=(0,s.default)(e),a=new Set(o.split(" ")),l=c(e,o,a,n,r,i,"smart");return l?{item:e,score:l[0],matches:[l[1]]}:null};var i,s=(i=r(71078))&&i.__esModule?i:{default:i},o=Number.MAX_SAFE_INTEGER,a=function(e,n){return e.score-n.score},l=function(e,n){return e[0]-n[0]},h=new Set(" \xa0[]()-–—'\"“”".split(""));function c(e,n,r,i,s,o,a){if(e===i)return[0,[[0,e.length-1]]];var c,d,p=i.length,f=n.length,g=s.length;if(n===s)return[.1,[[0,f-1]]];if(n.startsWith(s))return[.5,[[0,g-1]]];var m=e.indexOf(i);if(m>-1&&(c=e[m-1],h.has(c)))return[.9,[[m,m+p-1]]];var y=n.indexOf(s);if(y>-1&&(d=n[y-1],h.has(d)))return[1,[[y,y+p-1]]];var O=o.length;return O>1&&o.every(function(e){return r.has(e)})?[1.5+.2*O,o.map(function(e){var r=n.indexOf(e);return[r,r+e.length-1]}).sort(l)]:y>-1?[2,[[y,y+p-1]]]:"aggressive"===a?function(e,n){for(var r=e.length,i=n.length,s=0,o=n[0],a=[],l=-1,h=-2,c=0;c<r;c+=1)if(e[c]===o){if(c!==h+1&&(l>=0&&a.push([l,h]),l=c),h=c,(s+=1)===i)return a.push([l,h]),u(a,e);o=n[s]}return null}(n,s):"smart"===a?function(e,n){for(var r=e.length,i=[],s=0,o=n[0],a=-1,l=-2;;){var c,d=e.indexOf(o,l+1);if(-1===d)break;if(0===d||(c=e[d-1],h.has(c)))a=d;else{var p=Math.min(3,n.length-s,e.length-d),f=n.slice(s,s+p);if(e.slice(d,d+p)===f)a=d;else{l+=1;continue}}for(l=a;l<r&&e[l]===o;l+=1)s+=1,o=n[s];if(l-=1,i.push([a,l]),s===n.length)return u(i,e)}return null}(n,s):null}function u(e,n){var r=2;return e.forEach(function(e){var i=e[0],s=e[1],o=0===i||" "===n[i]||" "===n[i-1],a=s===n.length-1||" "===n[s]||" "===n[s+1];o&&a?r+=.2:o?r+=.4:s-i+1>=3?r+=.8:r+=1.6}),[r,e]}},79154:function(e,n,r){"use strict";var i;n.default=function(e,n){return void 0===n&&(n={}),r(90694).createFuzzySearchImpl(e,n)},((i=r(71078))&&i.__esModule?i:{default:i}).default},71078:function(e,n){"use strict";n.__esModule=!0,n.default=function(e){return e.toLowerCase().normalize("NFD").replace(r,"").replace(i,"l").replace(s,"n").trim()};var r=/[\u0300-\u036f]/g,i=/ł/g,s=/ñ/g},98943:function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(e){function n(e,n,r,i){void 0===r&&(r=0),void 0===i&&(i=-1);var s,o=e.length;if(0===o)return -1;r=r<0?Math.max(0,r+o):Math.min(r,o-1),s=(i=i<0?Math.max(0,i+o):Math.min(i,o-1))<r?i+1+(o-r):i-r+1;for(var a=0;a<s;++a){var l=(r+a)%o;if(e[l]===n)return l}return -1}function r(e,n,r,i){void 0===r&&(r=-1),void 0===i&&(i=0);var s,o=e.length;if(0===o)return -1;s=(r=r<0?Math.max(0,r+o):Math.min(r,o-1))<(i=i<0?Math.max(0,i+o):Math.min(i,o-1))?r+1+(o-i):r-i+1;for(var a=0;a<s;++a){var l=(r-a+o)%o;if(e[l]===n)return l}return -1}function i(e,n,r,i){void 0===r&&(r=0),void 0===i&&(i=-1);var s,o=e.length;if(0===o)return -1;r=r<0?Math.max(0,r+o):Math.min(r,o-1),s=(i=i<0?Math.max(0,i+o):Math.min(i,o-1))<r?i+1+(o-r):i-r+1;for(var a=0;a<s;++a){var l=(r+a)%o;if(n(e[l],l))return l}return -1}function s(e,n,r,i){void 0===r&&(r=-1),void 0===i&&(i=0);var s,o=e.length;if(0===o)return -1;s=(r=r<0?Math.max(0,r+o):Math.min(r,o-1))<(i=i<0?Math.max(0,i+o):Math.min(i,o-1))?r+1+(o-i):r-i+1;for(var a=0;a<s;++a){var l=(r-a+o)%o;if(n(e[l],l))return l}return -1}function o(e,n,r){void 0===n&&(n=0),void 0===r&&(r=-1);var i=e.length;if(!(i<=1))for(n=n<0?Math.max(0,n+i):Math.min(n,i-1),r=r<0?Math.max(0,r+i):Math.min(r,i-1);n<r;){var s=e[n],o=e[r];e[n++]=o,e[r--]=s}}function a(e,n){var r=e.length;if(n<0&&(n+=r),!(n<0)&&!(n>=r)){for(var i=e[n],s=n+1;s<r;++s)e[s-1]=e[s];return e.length=r-1,i}}e.firstIndexOf=n,e.lastIndexOf=r,e.findFirstIndex=i,e.findLastIndex=s,e.findFirstValue=function(e,n,r,s){void 0===r&&(r=0),void 0===s&&(s=-1);var o=i(e,n,r,s);return -1!==o?e[o]:void 0},e.findLastValue=function(e,n,r,i){void 0===r&&(r=-1),void 0===i&&(i=0);var o=s(e,n,r,i);return -1!==o?e[o]:void 0},e.lowerBound=function(e,n,r,i,s){void 0===i&&(i=0),void 0===s&&(s=-1);var o=e.length;if(0===o)return 0;for(var a=i=i<0?Math.max(0,i+o):Math.min(i,o-1),l=(s=s<0?Math.max(0,s+o):Math.min(s,o-1))-i+1;l>0;){var h=l>>1,c=a+h;0>r(e[c],n)?(a=c+1,l-=h+1):l=h}return a},e.upperBound=function(e,n,r,i,s){void 0===i&&(i=0),void 0===s&&(s=-1);var o=e.length;if(0===o)return 0;for(var a=i=i<0?Math.max(0,i+o):Math.min(i,o-1),l=(s=s<0?Math.max(0,s+o):Math.min(s,o-1))-i+1;l>0;){var h=l>>1,c=a+h;r(e[c],n)>0?l=h:(a=c+1,l-=h+1)}return a},e.shallowEqual=function(e,n,r){if(e===n)return!0;if(e.length!==n.length)return!1;for(var i=0,s=e.length;i<s;++i)if(r?!r(e[i],n[i]):e[i]!==n[i])return!1;return!0},e.slice=function(e,n){void 0===n&&(n={});var r,i=n.start,s=n.stop,o=n.step;if(void 0===o&&(o=1),0===o)throw Error("Slice `step` cannot be zero.");var a=e.length;void 0===i?i=o<0?a-1:0:i<0?i=Math.max(i+a,o<0?-1:0):i>=a&&(i=o<0?a-1:a),void 0===s?s=o<0?-1:a:s<0?s=Math.max(s+a,o<0?-1:0):s>=a&&(s=o<0?a-1:a),r=o<0&&s>=i||o>0&&i>=s?0:o<0?Math.floor((s-i+1)/o+1):Math.floor((s-i-1)/o+1);for(var l=[],h=0;h<r;++h)l[h]=e[i+h*o];return l},e.move=function(e,n,r){var i=e.length;if(!(i<=1)&&(n=n<0?Math.max(0,n+i):Math.min(n,i-1))!==(r=r<0?Math.max(0,r+i):Math.min(r,i-1))){for(var s=e[n],o=n<r?1:-1,a=n;a!==r;a+=o)e[a]=e[a+o];e[r]=s}},e.reverse=o,e.rotate=function(e,n,r,i){void 0===r&&(r=0),void 0===i&&(i=-1);var s=e.length;if(!(s<=1||(r=r<0?Math.max(0,r+s):Math.min(r,s-1))>=(i=i<0?Math.max(0,i+s):Math.min(i,s-1)))){var a=i-r+1;if(n>0?n%=a:n<0&&(n=(n%a+a)%a),0!==n){var l=r+n;o(e,r,l-1),o(e,l,i),o(e,r,i)}}},e.fill=function(e,n,r,i){void 0===r&&(r=0),void 0===i&&(i=-1);var s,o=e.length;if(0!==o){r=r<0?Math.max(0,r+o):Math.min(r,o-1),s=(i=i<0?Math.max(0,i+o):Math.min(i,o-1))<r?i+1+(o-r):i-r+1;for(var a=0;a<s;++a)e[(r+a)%o]=n}},e.insert=function(e,n,r){var i=e.length;n=n<0?Math.max(0,n+i):Math.min(n,i);for(var s=i;s>n;--s)e[s]=e[s-1];e[n]=r},e.removeAt=a,e.removeFirstOf=function(e,r,i,s){void 0===i&&(i=0),void 0===s&&(s=-1);var o=n(e,r,i,s);return -1!==o&&a(e,o),o},e.removeLastOf=function(e,n,i,s){void 0===i&&(i=-1),void 0===s&&(s=0);var o=r(e,n,i,s);return -1!==o&&a(e,o),o},e.removeAllOf=function(e,n,r,i){void 0===r&&(r=0),void 0===i&&(i=-1);var s=e.length;if(0===s)return 0;r=r<0?Math.max(0,r+s):Math.min(r,s-1),i=i<0?Math.max(0,i+s):Math.min(i,s-1);for(var o=0,a=0;a<s;++a)r<=i&&a>=r&&a<=i&&e[a]===n||i<r&&(a<=i||a>=r)&&e[a]===n?o++:o>0&&(e[a-o]=e[a]);return o>0&&(e.length=s-o),o},e.removeFirstWhere=function(e,n,r,s){void 0===r&&(r=0),void 0===s&&(s=-1);var o,l=i(e,n,r,s);return -1!==l&&(o=a(e,l)),{index:l,value:o}},e.removeLastWhere=function(e,n,r,i){void 0===r&&(r=-1),void 0===i&&(i=0);var o,l=s(e,n,r,i);return -1!==l&&(o=a(e,l)),{index:l,value:o}},e.removeAllWhere=function(e,n,r,i){void 0===r&&(r=0),void 0===i&&(i=-1);var s=e.length;if(0===s)return 0;r=r<0?Math.max(0,r+s):Math.min(r,s-1),i=i<0?Math.max(0,i+s):Math.min(i,s-1);for(var o=0,a=0;a<s;++a)r<=i&&a>=r&&a<=i&&n(e[a],a)||i<r&&(a<=i||a>=r)&&n(e[a],a)?o++:o>0&&(e[a-o]=e[a]);return o>0&&(e.length=s-o),o}}(n.ArrayExt||(n.ArrayExt={}))},58711:function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=r(14290);n.chain=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new s(i.iter(e.map(i.iter)))};var s=function(){function e(e){this._cloned=!1,this._source=e,this._active=void 0}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var n=new e(this._source.clone());return n._active=this._active&&this._active.clone(),n._cloned=!0,this._cloned=!0,n},e.prototype.next=function(){if(void 0===this._active){var e=this._source.next();if(void 0===e)return;this._active=this._cloned?e.clone():e}var n=this._active.next();return void 0!==n?n:(this._active=void 0,this.next())},e}();n.ChainIterator=s},89919:function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.empty=function(){return new r};var r=function(){function e(){}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e},e.prototype.next=function(){},e}();n.EmptyIterator=r},30364:function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=r(14290);n.enumerate=function(e,n){return void 0===n&&(n=0),new s(i.iter(e),n)};var s=function(){function e(e,n){this._source=e,this._index=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._index)},e.prototype.next=function(){var e=this._source.next();if(void 0!==e)return[this._index++,e]},e}();n.EnumerateIterator=s},19406:function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=r(14290);n.filter=function(e,n){return new s(i.iter(e),n)};var s=function(){function e(e,n){this._index=0,this._source=e,this._fn=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var n=new e(this._source.clone(),this._fn);return n._index=this._index,n},e.prototype.next=function(){for(var e,n=this._fn,r=this._source;void 0!==(e=r.next());)if(n(e,this._index++))return e},e}();n.FilterIterator=s},38247:function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=r(14290);n.find=function(e,n){for(var r,s=0,o=i.iter(e);void 0!==(r=o.next());)if(n(r,s++))return r},n.findIndex=function(e,n){for(var r,s=0,o=i.iter(e);void 0!==(r=o.next());)if(n(r,s++))return s-1;return -1},n.min=function(e,n){var r=i.iter(e),s=r.next();if(void 0!==s){for(var o=s;void 0!==(s=r.next());)0>n(s,o)&&(o=s);return o}},n.max=function(e,n){var r=i.iter(e),s=r.next();if(void 0!==s){for(var o=s;void 0!==(s=r.next());)n(s,o)>0&&(o=s);return o}},n.minmax=function(e,n){var r=i.iter(e),s=r.next();if(void 0!==s){for(var o=s,a=s;void 0!==(s=r.next());)0>n(s,o)?o=s:n(s,a)>0&&(a=s);return[o,a]}}},54466:function(e,n,r){"use strict";function i(e){for(var r in e)n.hasOwnProperty(r)||(n[r]=e[r])}Object.defineProperty(n,"__esModule",{value:!0}),i(r(98943)),i(r(58711)),i(r(89919)),i(r(30364)),i(r(19406)),i(r(38247)),i(r(14290)),i(r(59192)),i(r(31799)),i(r(25542)),i(r(5955)),i(r(72734)),i(r(94992)),i(r(41017)),i(r(53641)),i(r(94447)),i(r(59069))},14290:function(e,n){"use strict";function r(e){return"function"==typeof e.iter?e.iter():new i(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.iter=r,n.iterKeys=function(e){return new s(e)},n.iterValues=function(e){return new o(e)},n.iterItems=function(e){return new a(e)},n.iterFn=function(e){return new l(e)},n.each=function(e,n){for(var i,s=0,o=r(e);void 0!==(i=o.next());)if(!1===n(i,s++))return},n.every=function(e,n){for(var i,s=0,o=r(e);void 0!==(i=o.next());)if(!n(i,s++))return!1;return!0},n.some=function(e,n){for(var i,s=0,o=r(e);void 0!==(i=o.next());)if(n(i,s++))return!0;return!1},n.toArray=function(e){for(var n,i=0,s=[],o=r(e);void 0!==(n=o.next());)s[i++]=n;return s},n.toObject=function(e){for(var n,i=r(e),s={};void 0!==(n=i.next());)s[n[0]]=n[1];return s};var i=function(){function e(e){this._index=0,this._source=e}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var n=new e(this._source);return n._index=this._index,n},e.prototype.next=function(){if(!(this._index>=this._source.length))return this._source[this._index++]},e}();n.ArrayIterator=i;var s=function(){function e(e,n){void 0===n&&(n=Object.keys(e)),this._index=0,this._source=e,this._keys=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var n=new e(this._source,this._keys);return n._index=this._index,n},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?e:this.next()}},e}();n.KeyIterator=s;var o=function(){function e(e,n){void 0===n&&(n=Object.keys(e)),this._index=0,this._source=e,this._keys=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var n=new e(this._source,this._keys);return n._index=this._index,n},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?this._source[e]:this.next()}},e}();n.ValueIterator=o;var a=function(){function e(e,n){void 0===n&&(n=Object.keys(e)),this._index=0,this._source=e,this._keys=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var n=new e(this._source,this._keys);return n._index=this._index,n},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?[e,this._source[e]]:this.next()}},e}();n.ItemIterator=a;var l=function(){function e(e){this._fn=e}return e.prototype.iter=function(){return this},e.prototype.clone=function(){throw Error("An `FnIterator` cannot be cloned.")},e.prototype.next=function(){return this._fn.call(void 0)},e}();n.FnIterator=l},59192:function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=r(14290);n.map=function(e,n){return new s(i.iter(e),n)};var s=function(){function e(e,n){this._index=0,this._source=e,this._fn=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var n=new e(this._source.clone(),this._fn);return n._index=this._index,n},e.prototype.next=function(){var e=this._source.next();if(void 0!==e)return this._fn.call(void 0,e,this._index++)},e}();n.MapIterator=s},31799:function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.range=function(e,n,r){return void 0===n?new i(0,e,1):void 0===r?new i(e,n,1):new i(e,n,r)};var r,i=function(){function e(e,n,i){this._index=0,this._start=e,this._stop=n,this._step=i,this._length=r.rangeLength(e,n,i)}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var n=new e(this._start,this._stop,this._step);return n._index=this._index,n},e.prototype.next=function(){if(!(this._index>=this._length))return this._start+this._step*this._index++},e}();n.RangeIterator=i,(r||(r={})).rangeLength=function(e,n,r){return 0===r?1/0:e>n&&r>0||e<n&&r<0?0:Math.ceil((n-e)/r)}},25542:function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=r(14290);n.reduce=function(e,n,r){var s,o,a=0,l=i.iter(e),h=l.next();if(void 0===h&&void 0===r)throw TypeError("Reduce of empty iterable with no initial value.");if(void 0===h)return r;var c=l.next();if(void 0===c&&void 0===r)return h;if(void 0===c)return n(r,h,a++);for(s=n(void 0===r?h:n(r,h,a++),c,a++);void 0!==(o=l.next());)s=n(s,o,a++);return s}},5955:function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.repeat=function(e,n){return new r(e,n)},n.once=function(e){return new r(e,1)};var r=function(){function e(e,n){this._value=e,this._count=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._value,this._count)},e.prototype.next=function(){if(!(this._count<=0))return this._count--,this._value},e}();n.RepeatIterator=r},72734:function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.retro=function(e){return"function"==typeof e.retro?e.retro():new r(e)};var r=function(){function e(e){this._source=e,this._index=e.length-1}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var n=new e(this._source);return n._index=this._index,n},e.prototype.next=function(){if(!(this._index<0)&&!(this._index>=this._source.length))return this._source[this._index--]},e}();n.RetroArrayIterator=r},94992:function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=r(14290);n.topologicSort=function(e){var n=[],r=new Set,s=new Map;return i.each(e,function(e){var n=e[0],r=e[1],i=s.get(r);i?i.push(n):s.set(r,[n])}),s.forEach(function(e,i){!function e(i){if(!r.has(i)){r.add(i);var o=s.get(i);o&&o.forEach(e),n.push(i)}}(i)}),n}},41017:function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=r(14290);n.stride=function(e,n){return new s(i.iter(e),n)};var s=function(){function e(e,n){this._source=e,this._step=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._step)},e.prototype.next=function(){for(var e=this._source.next(),n=this._step-1;n>0;--n)this._source.next();return e},e}();n.StrideIterator=s},53641:function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=n.StringExt||(n.StringExt={});function i(e,n,r){void 0===r&&(r=0);for(var i=Array(n.length),s=0,o=r,a=n.length;s<a;++s,++o){if(-1===(o=e.indexOf(n[s],o)))return null;i[s]=o}return i}r.findIndices=i,r.matchSumOfSquares=function(e,n,r){void 0===r&&(r=0);var s=i(e,n,r);if(!s)return null;for(var o=0,a=0,l=s.length;a<l;++a){var h=s[a]-r;o+=h*h}return{score:o,indices:s}},r.matchSumOfDeltas=function(e,n,r){void 0===r&&(r=0);var s=i(e,n,r);if(!s)return null;for(var o=0,a=r-1,l=0,h=s.length;l<h;++l){var c=s[l];o+=c-a-1,a=c}return{score:o,indices:s}},r.highlight=function(e,n,r){for(var i=[],s=0,o=0,a=n.length;s<a;){for(var l=n[s],h=n[s];++s<a&&n[s]===h+1;)h++;o<l&&i.push(e.slice(o,l)),l<h+1&&i.push(r(e.slice(l,h+1))),o=h+1}return o<e.length&&i.push(e.slice(o)),i},r.cmp=function(e,n){return e<n?-1:+(e>n)}},94447:function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=r(14290);n.take=function(e,n){return new s(i.iter(e),n)};var s=function(){function e(e,n){this._source=e,this._count=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._count)},e.prototype.next=function(){if(!(this._count<=0)){var e=this._source.next();if(void 0!==e)return this._count--,e}},e}();n.TakeIterator=s},59069:function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=r(14290);n.zip=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new s(e.map(i.iter))};var s=function(){function e(e){this._source=e}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.map(function(e){return e.clone()}))},e.prototype.next=function(){for(var e=Array(this._source.length),n=0,r=this._source.length;n<r;++n){var i=this._source[n].next();if(void 0===i)return;e[n]=i}return e},e}();n.ZipIterator=s},29732:function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,s,o=r(54466),a=function(){function e(e){this._root=new s.LeafNode,this.cmp=e}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this._root.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._root.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"first",{get:function(){var e=s.firstLeaf(this._root);return e.size>0?e.items[0]:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){var e=s.lastLeaf(this._root);return e.size>0?e.items[e.size-1]:void 0},enumerable:!0,configurable:!0}),e.prototype.iter=function(){return s.iterItems(this._root)},e.prototype.retro=function(){return s.retroItems(this._root)},e.prototype.slice=function(e,n){return s.sliceItems(this._root,e,n)},e.prototype.retroSlice=function(e,n){return s.retroSliceItems(this._root,e,n)},e.prototype.at=function(e){return s.itemAt(this._root,e)},e.prototype.has=function(e,n){return s.hasItem(this._root,e,n)},e.prototype.indexOf=function(e,n){return s.indexOf(this._root,e,n)},e.prototype.get=function(e,n){return s.getItem(this._root,e,n)},e.prototype.assign=function(e){this.clear(),this.update(e)},e.prototype.insert=function(e){var n=s.insertItem(this._root,e,this.cmp);return this._root=s.maybeSplitRoot(this._root),n},e.prototype.update=function(e){var n=this;o.each(e,function(e){n.insert(e)})},e.prototype.delete=function(e,n){var r=s.deleteItem(this._root,e,n);return this._root=s.maybeExtractRoot(this._root),r},e.prototype.remove=function(e){var n=s.removeItem(this._root,e);return this._root=s.maybeExtractRoot(this._root),n},e.prototype.clear=function(){s.clear(this._root),this._root=new s.LeafNode},e}();n.BPlusTree=a,(i=a=n.BPlusTree||(n.BPlusTree={})).from=function(e,n){var r=new i(n);return r.assign(e),r},n.BPlusTree=a,function(e){var n=function(){function e(){this.items=[],this.sizes=[],this.children=[]}return Object.defineProperty(e.prototype,"type",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.sizes[this.sizes.length-1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.children.length},enumerable:!0,configurable:!0}),e}();e.BranchNode=n;var r=function(){function e(){this.next=null,this.prev=null,this.items=[]}return Object.defineProperty(e.prototype,"type",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),e}();function i(e){for(;0===e.type;)e=e.children[0];return e}function s(e){for(;0===e.type;)e=e.children[e.children.length-1];return e}function a(e){0===e.type?(o.each(e.children,a),e.children.length=0,e.sizes.length=0,e.items.length=0):(e.items.length=0,e.next=null,e.prev=null)}e.LeafNode=r,e.firstLeaf=i,e.lastLeaf=s,e.iterItems=function(e){return new c(i(e),0,-1)},e.retroItems=function(e){var n=s(e);return new u(n,n.size-1,-1)},e.sliceItems=function(e,n,r){n=void 0===n?0:n<0?Math.max(0,n+e.size):Math.min(n,e.size);var i=Math.max(0,(r=void 0===r?e.size:r<0?Math.max(0,r+e.size):Math.min(r,e.size))-n);if(0===i)return o.empty();for(;0===e.type;){var s=d(e.sizes,n);s>0&&(n-=e.sizes[s-1]),e=e.children[s]}return new c(e,n,i)},e.retroSliceItems=function(e,n,r){var i=Math.max(0,(n=void 0===n?e.size-1:n<0?Math.max(-1,n+e.size):Math.min(n,e.size-1))-(r=void 0===r?-1:r<0?Math.max(-1,r+e.size):Math.min(r,e.size-1)));if(0===i)return o.empty();for(;0===e.type;){var s=d(e.sizes,n);s>0&&(n-=e.sizes[s-1]),e=e.children[s]}return new u(e,n,i)},e.itemAt=function(e,n){if(n<0&&(n+=e.size),!(n<0)&&!(n>=e.size)){for(;0===e.type;){var r=d(e.sizes,n);r>0&&(n-=e.sizes[r-1]),e=e.children[r]}return e.items[n]}},e.hasItem=function(e,n,r){for(;0===e.type;){var i=p(e.items,n,r);e=e.children[i]}return f(e.items,n,r)>=0},e.indexOf=function(e,n,r){for(var i=0;0===e.type;){var s=p(e.items,n,r);s>0&&(i+=e.sizes[s-1]),e=e.children[s]}var o=f(e.items,n,r);return o>=0?i+o:-i+o},e.getItem=function(e,n,r){for(;0===e.type;){var i=p(e.items,n,r);e=e.children[i]}var s=f(e.items,n,r);return s>=0?e.items[s]:void 0},e.insertItem=function e(n,r,i){if(1===n.type){var s,a=f(n.items,r,i);return a>=0?(s=n.items[a],n.items[a]=r):(s=void 0,o.ArrayExt.insert(n.items,-a-1,r)),s}var h=p(n.items,r,i),c=n.children[h],u=c.size,d=e(c,r,i),y=c.size;if(n.items[h]=c.items[0],u===y)return d;if(c.width>l){var O=m(c);o.ArrayExt.insert(n.children,h+1,O),o.ArrayExt.insert(n.items,h+1,O.items[0])}return g(n,h),d},e.deleteItem=function e(n,r,i){if(1===n.type){var s=f(n.items,r,i);if(s<0)return;return o.ArrayExt.removeAt(n.items,s)}var a=p(n.items,r,i),l=n.children[a],c=l.size,u=e(l,r,i);return c===l.size||(n.items[a]=l.items[0],l.width<h&&(a=y(n,a)),g(n,a)),u},e.removeItem=function e(n,r){if(r<0&&(r+=n.size),!(r<0)&&!(r>=n.size)){if(1===n.type)return o.ArrayExt.removeAt(n.items,r);var i=d(n.sizes,r);i>0&&(r-=n.sizes[i]);var s=n.children[i],a=e(s,r);return n.items[i]=s.items[0],s.width<h&&(i=y(n,i)),g(n,i),a}},e.clear=a,e.maybeSplitRoot=function(e){if(e.width<=l)return e;var r=new n,i=m(e);return r.sizes[0]=e.size,r.sizes[1]=e.size+i.size,r.children[0]=e,r.children[1]=i,r.items[0]=e.items[0],r.items[1]=i.items[0],r},e.maybeExtractRoot=function(e){if(1===e.type||e.children.length>1)return e;var n=e.children.pop();return a(e),n};var l=32,h=16,c=function(){function e(e,n,r){this._node=e,this._index=n,this._count=r}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._node,this._index,this._count)},e.prototype.next=function(){if(null!==this._node&&0!==this._count)return this._index>=this._node.size?(this._node=this._node.next,this._index=0,this.next()):(this._count>0&&this._count--,this._node.items[this._index++])},e}(),u=function(){function e(e,n,r){this._node=e,this._index=n,this._count=r}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._node,this._index,this._count)},e.prototype.next=function(){if(null!==this._node&&0!==this._count)return(this._index>=this._node.size&&(this._index=this._node.size-1),this._index<0)?(this._node=this._node.prev,this._index=this._node?this._node.size-1:-1,this.next()):(this._count>0&&this._count--,this._node.items[this._index--])},e}();function d(e,n){for(var r=e.length,i=0;i<r;++i)if(e[i]>n)return i;return r-1}function p(e,n,r){for(var i=e.length,s=1;s<i;++s)if(r(e[s],n)>0)return s-1;return i-1}function f(e,n,r){for(var i=e.length,s=0;s<i;++s){var o=r(e[s],n);if(0===o)return s;if(o>0)return-s-1}return-i-1}function g(e,n){for(var r=e.sizes,i=e.children,s=n>0?r[n-1]:0,o=i.length;n<o;++n)s=r[n]=s+i[n].size;r.length=i.length}function m(e){if(1===e.type){for(var i=new r,s=e.items,o=i.items,a=h,l=s.length;a<l;++a)o.push(s[a]);return s.length=h,e.next&&(e.next.prev=i),i.next=e.next,i.prev=e,e.next=i,i}for(var c=new n,u=e.children,d=c.children,a=h,l=u.length;a<l;++a)d.push(u[a]);u.length=h;for(var p=e.items,f=c.items,a=h,l=p.length;a<l;++a)f.push(p[a]);return p.length=h,g(e,h),g(c,0),c}function y(e,n){var r,i,s,l,c,u,d=e.children[n],p=0===n?e.children[n+1]:e.children[n-1],f=0===n,m=1===d.type,y=p.width>h;if(m&&y&&f){var O=d,b=p;return O.items.push(b.items.shift()),e.items[n+1]=b.items[0],n}if(m&&y&&!f){var O=d,b=p;return O.items.unshift(b.items.pop()),e.items[n]=O.items[0],n-1}if(m&&!y&&f){var O=d,b=p;return(r=b.items).unshift.apply(r,O.items),o.ArrayExt.removeAt(e.children,n),o.ArrayExt.removeAt(e.items,n+1),O.prev&&(O.prev.next=b),b.prev=O.prev,a(O),n}if(m&&!y&&!f){var O=d,b=p;return(i=b.items).push.apply(i,O.items),o.ArrayExt.removeAt(e.children,n),o.ArrayExt.removeAt(e.items,n),O.next&&(O.next.prev=b),b.next=O.next,a(O),n-1}if(!m&&y&&f){var O=d,b=p;return O.children.push(b.children.shift()),O.items.push(b.items.shift()),e.items[n+1]=b.items[0],g(O,O.width-1),g(b,0),n}if(!m&&y&&!f){var O=d,b=p;return O.children.unshift(b.children.pop()),O.items.unshift(b.items.pop()),e.items[n]=O.items[0],g(O,0),g(b,b.width-1),n-1}if(!m&&!y&&f){var O=d,b=p;return(s=b.children).unshift.apply(s,O.children),(l=b.items).unshift.apply(l,O.items),o.ArrayExt.removeAt(e.children,n),o.ArrayExt.removeAt(e.items,n+1),g(b,0),O.children.length=0,a(O),n}if(!m&&!y&&!f){var O=d,b=p;return(c=b.children).push.apply(c,O.children),(u=b.items).push.apply(u,O.items),o.ArrayExt.removeAt(e.children,n),o.ArrayExt.removeAt(e.items,n),g(b,0),O.children.length=0,a(O),n-1}throw"unreachable"}}(s||(s={}))},30902:function(e,n,r){"use strict";function i(e){for(var r in e)n.hasOwnProperty(r)||(n[r]=e[r])}Object.defineProperty(n,"__esModule",{value:!0}),i(r(29732)),i(r(78425))},78425:function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,s,o=r(54466),a=function(){function e(){this._first=null,this._last=null,this._size=0}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"first",{get:function(){return this._first?this._first.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){return this._last?this._last.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstNode",{get:function(){return this._first},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastNode",{get:function(){return this._last},enumerable:!0,configurable:!0}),e.prototype.iter=function(){return new e.ForwardValueIterator(this._first)},e.prototype.retro=function(){return new e.RetroValueIterator(this._last)},e.prototype.nodes=function(){return new e.ForwardNodeIterator(this._first)},e.prototype.retroNodes=function(){return new e.RetroNodeIterator(this._last)},e.prototype.assign=function(e){var n=this;this.clear(),o.each(e,function(e){n.addLast(e)})},e.prototype.push=function(e){this.addLast(e)},e.prototype.pop=function(){return this.removeLast()},e.prototype.shift=function(e){this.addFirst(e)},e.prototype.unshift=function(){return this.removeFirst()},e.prototype.addFirst=function(e){var n=new s.LinkedListNode(this,e);return this._first?(n.next=this._first,this._first.prev=n,this._first=n):(this._first=n,this._last=n),this._size++,n},e.prototype.addLast=function(e){var n=new s.LinkedListNode(this,e);return this._last?(n.prev=this._last,this._last.next=n):this._first=n,this._last=n,this._size++,n},e.prototype.insertBefore=function(e,n){if(!n||n===this._first)return this.addFirst(e);if(!(n instanceof s.LinkedListNode)||n.list!==this)throw Error("Reference node is not owned by the list.");var r=new s.LinkedListNode(this,e),i=n.prev;return r.next=n,r.prev=i,n.prev=r,i.next=r,this._size++,r},e.prototype.insertAfter=function(e,n){if(!n||n===this._last)return this.addLast(e);if(!(n instanceof s.LinkedListNode)||n.list!==this)throw Error("Reference node is not owned by the list.");var r=new s.LinkedListNode(this,e),i=n.next;return r.next=i,r.prev=n,n.next=r,i.prev=r,this._size++,r},e.prototype.removeFirst=function(){var e=this._first;if(e)return e===this._last?(this._first=null,this._last=null):(this._first=e.next,this._first.prev=null),e.list=null,e.next=null,e.prev=null,this._size--,e.value},e.prototype.removeLast=function(){var e=this._last;if(e)return e===this._first?(this._first=null,this._last=null):(this._last=e.prev,this._last.next=null),e.list=null,e.next=null,e.prev=null,this._size--,e.value},e.prototype.removeNode=function(e){if(!(e instanceof s.LinkedListNode)||e.list!==this)throw Error("Node is not owned by the list.");e===this._first&&e===this._last?(this._first=null,this._last=null):e===this._first?(this._first=e.next,this._first.prev=null):e===this._last?(this._last=e.prev,this._last.next=null):(e.next.prev=e.prev,e.prev.next=e.next),e.list=null,e.next=null,e.prev=null,this._size--},e.prototype.clear=function(){for(var e=this._first;e;){var n=e.next;e.list=null,e.prev=null,e.next=null,e=n}this._first=null,this._last=null,this._size=0},e}();n.LinkedList=a,(i=a=n.LinkedList||(n.LinkedList={})).from=function(e){var n=new i;return n.assign(e),n},i.ForwardValueIterator=function(){function e(e){this._node=e}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._node)},e.prototype.next=function(){if(this._node){var e=this._node;return this._node=e.next,e.value}},e}(),i.RetroValueIterator=function(){function e(e){this._node=e}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._node)},e.prototype.next=function(){if(this._node){var e=this._node;return this._node=e.prev,e.value}},e}(),i.ForwardNodeIterator=function(){function e(e){this._node=e}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._node)},e.prototype.next=function(){if(this._node){var e=this._node;return this._node=e.next,e}},e}(),i.RetroNodeIterator=function(){function e(e){this._node=e}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._node)},e.prototype.next=function(){if(this._node){var e=this._node;return this._node=e.prev,e}},e}(),n.LinkedList=a,(s||(s={})).LinkedListNode=function(e,n){this.list=null,this.next=null,this.prev=null,this.list=e,this.value=n}},87875:function(e,n,r){"use strict";var i,s=this&&this.__extends||(i=function(e,n){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])})(e,n)},function(e,n){function r(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)});Object.defineProperty(n,"__esModule",{value:!0});var o=r(54466),a=r(30902),l=function(){function e(e){this.type=e}return Object.defineProperty(e.prototype,"isConflatable",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype.conflate=function(e){return!1},e}();n.Message=l,n.ConflatableMessage=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return s(n,e),Object.defineProperty(n.prototype,"isConflatable",{get:function(){return!0},enumerable:!0,configurable:!0}),n.prototype.conflate=function(e){return!0},n}(l),function(e){function n(e,n){var r=i.get(e);if(!r||0===r.length)return void p(e,n);o.every(o.retro(r),function(r){return!r||function(e,n,r){var i=!0;try{i="function"==typeof e?e(n,r):e.messageHook(n,r)}catch(e){l(e)}return i}(r,e,n)})&&p(e,n)}e.sendMessage=n,e.postMessage=function(e,n){if(!n.isConflatable)return void f(e,n);o.some(r,function(r){return r.handler===e&&!!r.msg&&r.msg.type===n.type&&!!r.msg.isConflatable&&r.msg.conflate(n)})||f(e,n)},e.installMessageHook=function(e,n){var r=i.get(e);r&&-1!==r.indexOf(n)||(r?r.push(n):i.set(e,[n]))},e.removeMessageHook=function(e,n){var r=i.get(e);if(r){var s=r.indexOf(n);-1!==s&&(r[s]=null,m(r))}},e.clearData=function(e){var n=i.get(e);n&&n.length>0&&(o.ArrayExt.fill(n,null),m(n)),o.each(r,function(n){n.handler===e&&(n.handler=null,n.msg=null)})},e.flush=function(){c||0===h||(d(h),c=!0,g(),c=!1)},e.getExceptionHandler=function(){return l},e.setExceptionHandler=function(e){var n=l;return l=e,n};var r=new a.LinkedList,i=new WeakMap,s=new Set,l=function(e){console.error(e)},h=0,c=!1,u="function"==typeof requestAnimationFrame?requestAnimationFrame:setImmediate,d="function"==typeof cancelAnimationFrame?cancelAnimationFrame:clearImmediate;function p(e,n){try{e.processMessage(n)}catch(e){l(e)}}function f(e,n){r.addLast({handler:e,msg:n}),0===h&&(h=u(g))}function g(){if(h=0,!r.isEmpty){var e={handler:null,msg:null};for(r.addLast(e);;){var i=r.removeFirst();if(i===e)return;i.handler&&i.msg&&n(i.handler,i.msg)}}}function m(e){0===s.size&&u(y),s.add(e)}function y(){s.forEach(O),s.clear()}function O(e){o.ArrayExt.removeAllWhere(e,b)}function b(e){return null===e}}(n.MessageLoop||(n.MessageLoop={}))},68430:function(){},20053:function(e,n,r){"use strict";r.d(n,{A:()=>i});let i=function(){for(var e,n,r=0,i="";r<arguments.length;)(e=arguments[r++])&&(n=function e(n){var r,i,s="";if("string"==typeof n||"number"==typeof n)s+=n;else if("object"==typeof n)if(Array.isArray(n))for(r=0;r<n.length;r++)n[r]&&(i=e(n[r]))&&(s&&(s+=" "),s+=i);else for(r in n)n[r]&&(s&&(s+=" "),s+=r);return s}(e))&&(i&&(i+=" "),i+=n);return i}},98621:function(e){"use strict";let n=(e,{target:n=document.body}={})=>{let r=document.createElement("textarea"),i=document.activeElement;r.value=e,r.setAttribute("readonly",""),r.style.contain="strict",r.style.position="absolute",r.style.left="-9999px",r.style.fontSize="12pt";let s=document.getSelection(),o=!1;s.rangeCount>0&&(o=s.getRangeAt(0)),n.append(r),r.select(),r.selectionStart=0,r.selectionEnd=e.length;let a=!1;try{a=document.execCommand("copy")}catch(e){}return r.remove(),o&&(s.removeAllRanges(),s.addRange(o)),i&&i.focus(),a};e.exports=n,e.exports.default=n},51548:function(e,n){(function(e){"use strict";var n=Object.keys;function r(e,n){return e===n||e!=e&&n!=n}function i(e){return e.constructor===Object||null==e.constructor}function s(e){return!!e&&"function"==typeof e.then}function o(e){return!!(e&&e.$$typeof)}var a="function"==typeof WeakSet?function(){return new WeakSet}:function(){var e=[];return{add:function(n){e.push(n)},has:function(n){return -1!==e.indexOf(n)}}};function l(e){return function(n){var r=e||n;return function(e,n,i){void 0===i&&(i=a());var s=!!e&&"object"==typeof e,o=!!n&&"object"==typeof n;if(s||o){var l=s&&i.has(e),h=o&&i.has(n);if(l||h)return l&&h;s&&i.add(e),o&&i.add(n)}return r(e,n,i)}}}var h=Function.prototype.bind.call(Function.prototype.call,Object.prototype.hasOwnProperty);function c(e,r,i,s){var a=n(e),l=a.length;if(n(r).length!==l)return!1;if(l)for(var c=void 0;l-- >0;){if("_owner"===(c=a[l])){var u=o(e),d=o(r);if((u||d)&&u!==d)return!1}if(!h(r,c)||!i(e[c],r[c],s))return!1}return!0}var u="function"==typeof Map,d="function"==typeof Set;function p(e){var n="function"==typeof e?e(o):o;function o(e,o,a){if(e===o)return!0;if(e&&o&&"object"==typeof e&&"object"==typeof o){if(i(e)&&i(o))return c(e,o,n,a);var l=Array.isArray(e),h=Array.isArray(o);return l||h?l===h&&function(e,n,r,i){var s=e.length;if(n.length!==s)return!1;for(;s-- >0;)if(!r(e[s],n[s],i))return!1;return!0}(e,o,n,a):(l=e instanceof Date,h=o instanceof Date,l||h)?l===h&&r(e.getTime(),o.getTime()):(l=e instanceof RegExp,h=o instanceof RegExp,l||h)?l===h&&e.source===o.source&&e.global===o.global&&e.ignoreCase===o.ignoreCase&&e.multiline===o.multiline&&e.unicode===o.unicode&&e.sticky===o.sticky&&e.lastIndex===o.lastIndex:s(e)||s(o)?e===o:u&&(l=e instanceof Map,h=o instanceof Map,l||h)?l===h&&function(e,n,r,i){var s=e.size===n.size;if(s&&e.size){var o={};e.forEach(function(e,a){if(s){var l=!1,h=0;n.forEach(function(n,s){!l&&!o[h]&&(l=r(a,s,i)&&r(e,n,i))&&(o[h]=!0),h++}),s=l}})}return s}(e,o,n,a):d&&(l=e instanceof Set,h=o instanceof Set,l||h)?l===h&&function(e,n,r,i){var s=e.size===n.size;if(s&&e.size){var o={};e.forEach(function(e){if(s){var a=!1,l=0;n.forEach(function(n){!a&&!o[l]&&(a=r(e,n,i))&&(o[l]=!0),l++}),s=a}})}return s}(e,o,n,a):c(e,o,n,a)}return e!=e&&o!=o}return o}var f=p(),g=p(function(){return r}),m=p(l()),y=p(l(r));e.circularDeepEqual=m,e.circularShallowEqual=y,e.createCustomEqual=p,e.deepEqual=f,e.sameValueZeroEqual=r,e.shallowEqual=g,Object.defineProperty(e,"__esModule",{value:!0})})(n)},13813:function(e){"use strict";function n(e,n){var r,i;if(0===n.length)return e;for(r=0,i=n.length;r<i;r++)e=(e<<5)-e+n.charCodeAt(r)|0;return e<0?-2*e:e}e.exports=function(e){for(var r=(function e(r,i,s,o){var a,l=n(n(n(r,s),(a=i,Object.prototype.toString.call(a))),typeof i);if(null===i)return n(l,"null");if(void 0===i)return n(l,"undefined");if("object"==typeof i||"function"==typeof i){if(-1!==o.indexOf(i))return n(l,"[Circular]"+s);o.push(i);var h=Object.keys(i).sort().reduce(function(n,r){return e(n,i[r],r,o)},l);if(!("valueOf"in i)||"function"!=typeof i.valueOf)return h;try{return n(h,String(i.valueOf()))}catch(e){return n(h,"[valueOf exception]"+(e.stack||e.message))}}return n(l,i.toString())})(0,e,"",[]).toString(16);r.length<8;)r="0"+r;return r}},4146:function(e,n,r){"use strict";var i=r(73404),s={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},l={};function h(e){return i.isMemo(e)?a:l[e.$$typeof]||s}l[i.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},l[i.Memo]=a;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,g=Object.prototype;e.exports=function e(n,r,i){if("string"!=typeof r){if(g){var s=f(r);s&&s!==g&&e(n,s,i)}var a=u(r);d&&(a=a.concat(d(r)));for(var l=h(n),m=h(r),y=0;y<a.length;++y){var O=a[y];if(!o[O]&&!(i&&i[O])&&!(m&&m[O])&&!(l&&l[O])){var b=p(r,O);try{c(n,O,b)}catch(e){}}}}return n}},3072:function(e,n){"use strict";var r="function"==typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,s=r?Symbol.for("react.portal"):60106,o=r?Symbol.for("react.fragment"):60107,a=r?Symbol.for("react.strict_mode"):60108,l=r?Symbol.for("react.profiler"):60114,h=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,u=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,f=r?Symbol.for("react.suspense"):60113,g=r?Symbol.for("react.suspense_list"):60120,m=r?Symbol.for("react.memo"):60115,y=r?Symbol.for("react.lazy"):60116,O=r?Symbol.for("react.block"):60121,b=r?Symbol.for("react.fundamental"):60117,x=r?Symbol.for("react.responder"):60118,w=r?Symbol.for("react.scope"):60119;function S(e){if("object"==typeof e&&null!==e){var n=e.$$typeof;switch(n){case i:switch(e=e.type){case u:case d:case o:case l:case a:case f:return e;default:switch(e=e&&e.$$typeof){case c:case p:case y:case m:case h:return e;default:return n}}case s:return n}}}function _(e){return S(e)===d}n.AsyncMode=u,n.ConcurrentMode=d,n.ContextConsumer=c,n.ContextProvider=h,n.Element=i,n.ForwardRef=p,n.Fragment=o,n.Lazy=y,n.Memo=m,n.Portal=s,n.Profiler=l,n.StrictMode=a,n.Suspense=f,n.isAsyncMode=function(e){return _(e)||S(e)===u},n.isConcurrentMode=_,n.isContextConsumer=function(e){return S(e)===c},n.isContextProvider=function(e){return S(e)===h},n.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i},n.isForwardRef=function(e){return S(e)===p},n.isFragment=function(e){return S(e)===o},n.isLazy=function(e){return S(e)===y},n.isMemo=function(e){return S(e)===m},n.isPortal=function(e){return S(e)===s},n.isProfiler=function(e){return S(e)===l},n.isStrictMode=function(e){return S(e)===a},n.isSuspense=function(e){return S(e)===f},n.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===d||e===l||e===a||e===f||e===g||"object"==typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===m||e.$$typeof===h||e.$$typeof===c||e.$$typeof===p||e.$$typeof===b||e.$$typeof===x||e.$$typeof===w||e.$$typeof===O)},n.typeOf=S},73404:function(e,n,r){"use strict";e.exports=r(3072)},55580:function(e,n,r){e.exports=r(56110)(r(9325),"DataView")},21549:function(e,n,r){var i=r(22032),s=r(63862),o=r(66721),a=r(12749),l=r(35749);function h(e){var n=-1,r=null==e?0:e.length;for(this.clear();++n<r;){var i=e[n];this.set(i[0],i[1])}}h.prototype.clear=i,h.prototype.delete=s,h.prototype.get=o,h.prototype.has=a,h.prototype.set=l,e.exports=h},80079:function(e,n,r){var i=r(63702),s=r(70080),o=r(24739),a=r(48655),l=r(31175);function h(e){var n=-1,r=null==e?0:e.length;for(this.clear();++n<r;){var i=e[n];this.set(i[0],i[1])}}h.prototype.clear=i,h.prototype.delete=s,h.prototype.get=o,h.prototype.has=a,h.prototype.set=l,e.exports=h},68223:function(e,n,r){e.exports=r(56110)(r(9325),"Map")},53661:function(e,n,r){var i=r(63040),s=r(17670),o=r(90289),a=r(4509),l=r(72949);function h(e){var n=-1,r=null==e?0:e.length;for(this.clear();++n<r;){var i=e[n];this.set(i[0],i[1])}}h.prototype.clear=i,h.prototype.delete=s,h.prototype.get=o,h.prototype.has=a,h.prototype.set=l,e.exports=h},32804:function(e,n,r){e.exports=r(56110)(r(9325),"Promise")},76545:function(e,n,r){e.exports=r(56110)(r(9325),"Set")},38859:function(e,n,r){var i=r(53661),s=r(31380),o=r(51459);function a(e){var n=-1,r=null==e?0:e.length;for(this.__data__=new i;++n<r;)this.add(e[n])}a.prototype.add=a.prototype.push=s,a.prototype.has=o,e.exports=a},37217:function(e,n,r){var i=r(80079),s=r(51420),o=r(90938),a=r(63605),l=r(29817),h=r(80945);function c(e){var n=this.__data__=new i(e);this.size=n.size}c.prototype.clear=s,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=l,c.prototype.set=h,e.exports=c},51873:function(e,n,r){e.exports=r(9325).Symbol},37828:function(e,n,r){e.exports=r(9325).Uint8Array},28303:function(e,n,r){e.exports=r(56110)(r(9325),"WeakMap")},91033:function(e){e.exports=function(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}},83729:function(e){e.exports=function(e,n){for(var r=-1,i=null==e?0:e.length;++r<i&&!1!==n(e[r],r,e););return e}},79770:function(e){e.exports=function(e,n){for(var r=-1,i=null==e?0:e.length,s=0,o=[];++r<i;){var a=e[r];n(a,r,e)&&(o[s++]=a)}return o}},15325:function(e,n,r){var i=r(96131);e.exports=function(e,n){return!!(null==e?0:e.length)&&i(e,n,0)>-1}},29905:function(e){e.exports=function(e,n,r){for(var i=-1,s=null==e?0:e.length;++i<s;)if(r(n,e[i]))return!0;return!1}},70695:function(e,n,r){var i=r(78096),s=r(72428),o=r(56449),a=r(3656),l=r(30361),h=r(37167),c=Object.prototype.hasOwnProperty;e.exports=function(e,n){var r=o(e),u=!r&&s(e),d=!r&&!u&&a(e),p=!r&&!u&&!d&&h(e),f=r||u||d||p,g=f?i(e.length,String):[],m=g.length;for(var y in e)(n||c.call(e,y))&&!(f&&("length"==y||d&&("offset"==y||"parent"==y)||p&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||l(y,m)))&&g.push(y);return g}},34932:function(e){e.exports=function(e,n){for(var r=-1,i=null==e?0:e.length,s=Array(i);++r<i;)s[r]=n(e[r],r,e);return s}},14528:function(e){e.exports=function(e,n){for(var r=-1,i=n.length,s=e.length;++r<i;)e[s+r]=n[r];return e}},40882:function(e){e.exports=function(e,n,r,i){var s=-1,o=null==e?0:e.length;for(i&&o&&(r=e[++s]);++s<o;)r=n(r,e[s],s,e);return r}},14248:function(e){e.exports=function(e,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(e[r],r,e))return!0;return!1}},61074:function(e){e.exports=function(e){return e.split("")}},1733:function(e){var n=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function(e){return e.match(n)||[]}},87805:function(e,n,r){var i=r(43360),s=r(75288);e.exports=function(e,n,r){(void 0===r||s(e[n],r))&&(void 0!==r||n in e)||i(e,n,r)}},16547:function(e,n,r){var i=r(43360),s=r(75288),o=Object.prototype.hasOwnProperty;e.exports=function(e,n,r){var a=e[n];o.call(e,n)&&s(a,r)&&(void 0!==r||n in e)||i(e,n,r)}},26025:function(e,n,r){var i=r(75288);e.exports=function(e,n){for(var r=e.length;r--;)if(i(e[r][0],n))return r;return -1}},74733:function(e,n,r){var i=r(21791),s=r(95950);e.exports=function(e,n){return e&&i(n,s(n),e)}},43838:function(e,n,r){var i=r(21791),s=r(37241);e.exports=function(e,n){return e&&i(n,s(n),e)}},43360:function(e,n,r){var i=r(93243);e.exports=function(e,n,r){"__proto__"==n&&i?i(e,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[n]=r}},9999:function(e,n,r){var i=r(37217),s=r(83729),o=r(16547),a=r(74733),l=r(43838),h=r(93290),c=r(23007),u=r(92271),d=r(48948),p=r(50002),f=r(83349),g=r(5861),m=r(76189),y=r(77199),O=r(35529),b=r(56449),x=r(3656),w=r(87730),S=r(23805),_=r(38440),k=r(95950),C=r(37241),E="[object Arguments]",T="[object Function]",P="[object Object]",A={};A[E]=A["[object Array]"]=A["[object ArrayBuffer]"]=A["[object DataView]"]=A["[object Boolean]"]=A["[object Date]"]=A["[object Float32Array]"]=A["[object Float64Array]"]=A["[object Int8Array]"]=A["[object Int16Array]"]=A["[object Int32Array]"]=A["[object Map]"]=A["[object Number]"]=A[P]=A["[object RegExp]"]=A["[object Set]"]=A["[object String]"]=A["[object Symbol]"]=A["[object Uint8Array]"]=A["[object Uint8ClampedArray]"]=A["[object Uint16Array]"]=A["[object Uint32Array]"]=!0,A["[object Error]"]=A[T]=A["[object WeakMap]"]=!1,e.exports=function e(n,r,M,N,D,I){var $,R=1&r,L=2&r,Q=4&r;if(M&&($=D?M(n,N,D,I):M(n)),void 0!==$)return $;if(!S(n))return n;var j=b(n);if(j){if($=m(n),!R)return c(n,$)}else{var V=g(n),z=V==T||"[object GeneratorFunction]"==V;if(x(n))return h(n,R);if(V==P||V==E||z&&!D){if($=L||z?{}:O(n),!R)return L?d(n,l($,n)):u(n,a($,n))}else{if(!A[V])return D?n:{};$=y(n,V,R)}}I||(I=new i);var B=I.get(n);if(B)return B;I.set(n,$),_(n)?n.forEach(function(i){$.add(e(i,r,M,i,n,I))}):w(n)&&n.forEach(function(i,s){$.set(s,e(i,r,M,s,n,I))});var F=Q?L?f:p:L?C:k,Z=j?void 0:F(n);return s(Z||n,function(i,s){Z&&(i=n[s=i]),o($,s,e(i,r,M,s,n,I))}),$}},39344:function(e,n,r){var i=r(23805),s=Object.create;e.exports=function(){function e(){}return function(n){if(!i(n))return{};if(s)return s(n);e.prototype=n;var r=new e;return e.prototype=void 0,r}}()},83915:function(e,n,r){var i=r(38859),s=r(15325),o=r(29905),a=r(34932),l=r(27301),h=r(19219);e.exports=function(e,n,r,c){var u=-1,d=s,p=!0,f=e.length,g=[],m=n.length;if(!f)return g;r&&(n=a(n,l(r))),c?(d=o,p=!1):n.length>=200&&(d=h,p=!1,n=new i(n));r:for(;++u<f;){var y=e[u],O=null==r?y:r(y);if(y=c||0!==y?y:0,p&&O==O){for(var b=m;b--;)if(n[b]===O)continue r;g.push(y)}else d(n,O,c)||g.push(y)}return g}},80909:function(e,n,r){var i=r(30641);e.exports=r(38329)(i)},93599:function(e,n,r){var i=r(44394);e.exports=function(e,n,r){for(var s=-1,o=e.length;++s<o;){var a=e[s],l=n(a);if(null!=l&&(void 0===h?l==l&&!i(l):r(l,h)))var h=l,c=a}return c}},2523:function(e){e.exports=function(e,n,r,i){for(var s=e.length,o=r+(i?1:-1);i?o--:++o<s;)if(n(e[o],o,e))return o;return -1}},83120:function(e,n,r){var i=r(14528),s=r(45891);e.exports=function e(n,r,o,a,l){var h=-1,c=n.length;for(o||(o=s),l||(l=[]);++h<c;){var u=n[h];r>0&&o(u)?r>1?e(u,r-1,o,a,l):i(l,u):a||(l[l.length]=u)}return l}},86649:function(e,n,r){e.exports=r(83221)()},30641:function(e,n,r){var i=r(86649),s=r(95950);e.exports=function(e,n){return e&&i(e,n,s)}},47422:function(e,n,r){var i=r(31769),s=r(77797);e.exports=function(e,n){n=i(n,e);for(var r=0,o=n.length;null!=e&&r<o;)e=e[s(n[r++])];return r&&r==o?e:void 0}},82199:function(e,n,r){var i=r(14528),s=r(56449);e.exports=function(e,n,r){var o=n(e);return s(e)?o:i(o,r(e))}},72552:function(e,n,r){var i=r(51873),s=r(659),o=r(59350),a=i?i.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?s(e):o(e)}},3335:function(e){e.exports=function(e,n){return e>n}},20426:function(e){var n=Object.prototype.hasOwnProperty;e.exports=function(e,r){return null!=e&&n.call(e,r)}},28077:function(e){e.exports=function(e,n){return null!=e&&n in Object(e)}},96131:function(e,n,r){var i=r(2523),s=r(85463),o=r(76959);e.exports=function(e,n,r){return n==n?o(e,n,r):i(e,s,r)}},27534:function(e,n,r){var i=r(72552),s=r(40346);e.exports=function(e){return s(e)&&"[object Arguments]"==i(e)}},60270:function(e,n,r){var i=r(87068),s=r(40346);e.exports=function e(n,r,o,a,l){return n===r||(null!=n&&null!=r&&(s(n)||s(r))?i(n,r,o,a,e,l):n!=n&&r!=r)}},87068:function(e,n,r){var i=r(37217),s=r(25911),o=r(21986),a=r(50689),l=r(5861),h=r(56449),c=r(3656),u=r(37167),d="[object Arguments]",p="[object Array]",f="[object Object]",g=Object.prototype.hasOwnProperty;e.exports=function(e,n,r,m,y,O){var b=h(e),x=h(n),w=b?p:l(e),S=x?p:l(n);w=w==d?f:w,S=S==d?f:S;var _=w==f,k=S==f,C=w==S;if(C&&c(e)){if(!c(n))return!1;b=!0,_=!1}if(C&&!_)return O||(O=new i),b||u(e)?s(e,n,r,m,y,O):o(e,n,w,r,m,y,O);if(!(1&r)){var E=_&&g.call(e,"__wrapped__"),T=k&&g.call(n,"__wrapped__");if(E||T){var P=E?e.value():e,A=T?n.value():n;return O||(O=new i),y(P,A,r,m,O)}}return!!C&&(O||(O=new i),a(e,n,r,m,y,O))}},29172:function(e,n,r){var i=r(5861),s=r(40346);e.exports=function(e){return s(e)&&"[object Map]"==i(e)}},41799:function(e,n,r){var i=r(37217),s=r(60270);e.exports=function(e,n,r,o){var a=r.length,l=a,h=!o;if(null==e)return!l;for(e=Object(e);a--;){var c=r[a];if(h&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++a<l;){var u=(c=r[a])[0],d=e[u],p=c[1];if(h&&c[2]){if(void 0===d&&!(u in e))return!1}else{var f=new i;if(o)var g=o(d,p,u,e,n,f);if(!(void 0===g?s(p,d,3,o,f):g))return!1}}return!0}},85463:function(e){e.exports=function(e){return e!=e}},45083:function(e,n,r){var i=r(1882),s=r(87296),o=r(23805),a=r(47473),l=/^\[object .+?Constructor\]$/,h=Object.prototype,c=Function.prototype.toString,u=h.hasOwnProperty,d=RegExp("^"+c.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||s(e))&&(i(e)?d:l).test(a(e))}},16038:function(e,n,r){var i=r(5861),s=r(40346);e.exports=function(e){return s(e)&&"[object Set]"==i(e)}},4901:function(e,n,r){var i=r(72552),s=r(30294),o=r(40346),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&s(e.length)&&!!a[i(e)]}},15389:function(e,n,r){var i=r(93663),s=r(87978),o=r(83488),a=r(56449),l=r(50583);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?a(e)?s(e[0],e[1]):i(e):l(e)}},88984:function(e,n,r){var i=r(55527),s=r(3650),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!i(e))return s(e);var n=[];for(var r in Object(e))o.call(e,r)&&"constructor"!=r&&n.push(r);return n}},72903:function(e,n,r){var i=r(23805),s=r(55527),o=r(90181),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!i(e))return o(e);var n=s(e),r=[];for(var l in e)"constructor"==l&&(n||!a.call(e,l))||r.push(l);return r}},5128:function(e,n,r){var i=r(80909),s=r(64894);e.exports=function(e,n){var r=-1,o=s(e)?Array(e.length):[];return i(e,function(e,i,s){o[++r]=n(e,i,s)}),o}},93663:function(e,n,r){var i=r(41799),s=r(10776),o=r(67197);e.exports=function(e){var n=s(e);return 1==n.length&&n[0][2]?o(n[0][0],n[0][1]):function(r){return r===e||i(r,e,n)}}},87978:function(e,n,r){var i=r(60270),s=r(58156),o=r(80631),a=r(28586),l=r(30756),h=r(67197),c=r(77797);e.exports=function(e,n){return a(e)&&l(n)?h(c(e),n):function(r){var a=s(r,e);return void 0===a&&a===n?o(r,e):i(n,a,3)}}},85250:function(e,n,r){var i=r(37217),s=r(87805),o=r(86649),a=r(42824),l=r(23805),h=r(37241),c=r(14974);e.exports=function e(n,r,u,d,p){n!==r&&o(r,function(o,h){if(p||(p=new i),l(o))a(n,r,h,u,e,d,p);else{var f=d?d(c(n,h),o,h+"",n,r,p):void 0;void 0===f&&(f=o),s(n,h,f)}},h)}},42824:function(e,n,r){var i=r(87805),s=r(93290),o=r(71961),a=r(23007),l=r(35529),h=r(72428),c=r(56449),u=r(83693),d=r(3656),p=r(1882),f=r(23805),g=r(11331),m=r(37167),y=r(14974),O=r(69884);e.exports=function(e,n,r,b,x,w,S){var _=y(e,r),k=y(n,r),C=S.get(k);if(C)return void i(e,r,C);var E=w?w(_,k,r+"",e,n,S):void 0,T=void 0===E;if(T){var P=c(k),A=!P&&d(k),M=!P&&!A&&m(k);E=k,P||A||M?c(_)?E=_:u(_)?E=a(_):A?(T=!1,E=s(k,!0)):M?(T=!1,E=o(k,!0)):E=[]:g(k)||h(k)?(E=_,h(_)?E=O(_):(!f(_)||p(_))&&(E=l(k))):T=!1}T&&(S.set(k,E),x(E,k,b,w,S),S.delete(k)),i(e,r,E)}},46155:function(e,n,r){var i=r(34932),s=r(47422),o=r(15389),a=r(5128),l=r(73937),h=r(27301),c=r(43714),u=r(83488),d=r(56449);e.exports=function(e,n,r){n=n.length?i(n,function(e){return d(e)?function(n){return s(n,1===e.length?e[0]:e)}:e}):[u];var p=-1;return n=i(n,h(o)),l(a(e,function(e,r,s){return{criteria:i(n,function(n){return n(e)}),index:++p,value:e}}),function(e,n){return c(e,n,r)})}},76001:function(e,n,r){var i=r(97420),s=r(80631);e.exports=function(e,n){return i(e,n,function(n,r){return s(e,r)})}},97420:function(e,n,r){var i=r(47422),s=r(73170),o=r(31769);e.exports=function(e,n,r){for(var a=-1,l=n.length,h={};++a<l;){var c=n[a],u=i(e,c);r(u,c)&&s(h,o(c,e),u)}return h}},47237:function(e){e.exports=function(e){return function(n){return null==n?void 0:n[e]}}},17255:function(e,n,r){var i=r(47422);e.exports=function(e){return function(n){return i(n,e)}}},54552:function(e){e.exports=function(e){return function(n){return null==e?void 0:e[n]}}},86151:function(e){var n=Math.ceil,r=Math.max;e.exports=function(e,i,s,o){for(var a=-1,l=r(n((i-e)/(s||1)),0),h=Array(l);l--;)h[o?l:++a]=e,e+=s;return h}},84051:function(e){var n=Math.floor;e.exports=function(e,r){var i="";if(!e||r<1||r>0x1fffffffffffff)return i;do r%2&&(i+=e),(r=n(r/2))&&(e+=e);while(r);return i}},69302:function(e,n,r){var i=r(83488),s=r(56757),o=r(32865);e.exports=function(e,n){return o(s(e,n,i),e+"")}},73170:function(e,n,r){var i=r(16547),s=r(31769),o=r(30361),a=r(23805),l=r(77797);e.exports=function(e,n,r,h){if(!a(e))return e;n=s(n,e);for(var c=-1,u=n.length,d=u-1,p=e;null!=p&&++c<u;){var f=l(n[c]),g=r;if("__proto__"===f||"constructor"===f||"prototype"===f)break;if(c!=d){var m=p[f];void 0===(g=h?h(m,f,p):void 0)&&(g=a(m)?m:o(n[c+1])?[]:{})}i(p,f,g),p=p[f]}return e}},19570:function(e,n,r){var i=r(37334),s=r(93243),o=r(83488);e.exports=s?function(e,n){return s(e,"toString",{configurable:!0,enumerable:!1,value:i(n),writable:!0})}:o},25160:function(e){e.exports=function(e,n,r){var i=-1,s=e.length;n<0&&(n=-n>s?0:s+n),(r=r>s?s:r)<0&&(r+=s),s=n>r?0:r-n>>>0,n>>>=0;for(var o=Array(s);++i<s;)o[i]=e[i+n];return o}},73937:function(e){e.exports=function(e,n){var r=e.length;for(e.sort(n);r--;)e[r]=e[r].value;return e}},78096:function(e){e.exports=function(e,n){for(var r=-1,i=Array(e);++r<e;)i[r]=n(r);return i}},77556:function(e,n,r){var i=r(51873),s=r(34932),o=r(56449),a=r(44394),l=1/0,h=i?i.prototype:void 0,c=h?h.toString:void 0;e.exports=function e(n){if("string"==typeof n)return n;if(o(n))return s(n,e)+"";if(a(n))return c?c.call(n):"";var r=n+"";return"0"==r&&1/n==-l?"-0":r}},54128:function(e,n,r){var i=r(31800),s=/^\s+/;e.exports=function(e){return e?e.slice(0,i(e)+1).replace(s,""):e}},27301:function(e){e.exports=function(e){return function(n){return e(n)}}},55765:function(e,n,r){var i=r(38859),s=r(15325),o=r(29905),a=r(19219),l=r(44517),h=r(84247);e.exports=function(e,n,r){var c=-1,u=s,d=e.length,p=!0,f=[],g=f;if(r)p=!1,u=o;else if(d>=200){var m=n?null:l(e);if(m)return h(m);p=!1,u=a,g=new i}else g=n?[]:f;r:for(;++c<d;){var y=e[c],O=n?n(y):y;if(y=r||0!==y?y:0,p&&O==O){for(var b=g.length;b--;)if(g[b]===O)continue r;n&&g.push(O),f.push(y)}else u(g,O,r)||(g!==f&&g.push(O),f.push(y))}return f}},19931:function(e,n,r){var i=r(31769),s=r(68090),o=r(68969),a=r(77797);e.exports=function(e,n){return n=i(n,e),null==(e=o(e,n))||delete e[a(s(n))]}},30514:function(e,n,r){var i=r(34932);e.exports=function(e,n){return i(n,function(n){return e[n]})}},51234:function(e){e.exports=function(e,n,r){for(var i=-1,s=e.length,o=n.length,a={};++i<s;){var l=i<o?n[i]:void 0;r(a,e[i],l)}return a}},19219:function(e){e.exports=function(e,n){return e.has(n)}},24066:function(e,n,r){var i=r(83488);e.exports=function(e){return"function"==typeof e?e:i}},31769:function(e,n,r){var i=r(56449),s=r(28586),o=r(61802),a=r(13222);e.exports=function(e,n){return i(e)?e:s(e,n)?[e]:o(a(e))}},28754:function(e,n,r){var i=r(25160);e.exports=function(e,n,r){var s=e.length;return r=void 0===r?s:r,!n&&r>=s?e:i(e,n,r)}},49653:function(e,n,r){var i=r(37828);e.exports=function(e){var n=new e.constructor(e.byteLength);return new i(n).set(new i(e)),n}},93290:function(e,n,r){e=r.nmd(e);var i=r(9325),s=n&&!n.nodeType&&n,o=s&&e&&!e.nodeType&&e,a=o&&o.exports===s?i.Buffer:void 0,l=a?a.allocUnsafe:void 0;e.exports=function(e,n){if(n)return e.slice();var r=e.length,i=l?l(r):new e.constructor(r);return e.copy(i),i}},76169:function(e,n,r){var i=r(49653);e.exports=function(e,n){var r=n?i(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}},73201:function(e){var n=/\w*$/;e.exports=function(e){var r=new e.constructor(e.source,n.exec(e));return r.lastIndex=e.lastIndex,r}},93736:function(e,n,r){var i=r(51873),s=i?i.prototype:void 0,o=s?s.valueOf:void 0;e.exports=function(e){return o?Object(o.call(e)):{}}},71961:function(e,n,r){var i=r(49653);e.exports=function(e,n){var r=n?i(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}},53730:function(e,n,r){var i=r(44394);e.exports=function(e,n){if(e!==n){var r=void 0!==e,s=null===e,o=e==e,a=i(e),l=void 0!==n,h=null===n,c=n==n,u=i(n);if(!h&&!u&&!a&&e>n||a&&l&&c&&!h&&!u||s&&l&&c||!r&&c||!o)return 1;if(!s&&!a&&!u&&e<n||u&&r&&o&&!s&&!a||h&&r&&o||!l&&o||!c)return -1}return 0}},43714:function(e,n,r){var i=r(53730);e.exports=function(e,n,r){for(var s=-1,o=e.criteria,a=n.criteria,l=o.length,h=r.length;++s<l;){var c=i(o[s],a[s]);if(c){if(s>=h)return c;return c*("desc"==r[s]?-1:1)}}return e.index-n.index}},23007:function(e){e.exports=function(e,n){var r=-1,i=e.length;for(n||(n=Array(i));++r<i;)n[r]=e[r];return n}},21791:function(e,n,r){var i=r(16547),s=r(43360);e.exports=function(e,n,r,o){var a=!r;r||(r={});for(var l=-1,h=n.length;++l<h;){var c=n[l],u=o?o(r[c],e[c],c,r,e):void 0;void 0===u&&(u=e[c]),a?s(r,c,u):i(r,c,u)}return r}},92271:function(e,n,r){var i=r(21791),s=r(4664);e.exports=function(e,n){return i(e,s(e),n)}},48948:function(e,n,r){var i=r(21791),s=r(86375);e.exports=function(e,n){return i(e,s(e),n)}},55481:function(e,n,r){e.exports=r(9325)["__core-js_shared__"]},20999:function(e,n,r){var i=r(69302),s=r(36800);e.exports=function(e){return i(function(n,r){var i=-1,o=r.length,a=o>1?r[o-1]:void 0,l=o>2?r[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,l&&s(r[0],r[1],l)&&(a=o<3?void 0:a,o=1),n=Object(n);++i<o;){var h=r[i];h&&e(n,h,i,a)}return n})}},38329:function(e,n,r){var i=r(64894);e.exports=function(e,n){return function(r,s){if(null==r)return r;if(!i(r))return e(r,s);for(var o=r.length,a=n?o:-1,l=Object(r);(n?a--:++a<o)&&!1!==s(l[a],a,l););return r}}},83221:function(e){e.exports=function(e){return function(n,r,i){for(var s=-1,o=Object(n),a=i(n),l=a.length;l--;){var h=a[e?l:++s];if(!1===r(o[h],h,o))break}return n}}},12507:function(e,n,r){var i=r(28754),s=r(49698),o=r(63912),a=r(13222);e.exports=function(e){return function(n){var r=s(n=a(n))?o(n):void 0,l=r?r[0]:n.charAt(0),h=r?i(r,1).join(""):n.slice(1);return l[e]()+h}}},45539:function(e,n,r){var i=r(40882),s=r(50828),o=r(66645),a=RegExp("['’]","g");e.exports=function(e){return function(n){return i(o(s(n).replace(a,"")),e,"")}}},85508:function(e,n,r){var i=r(86151),s=r(36800),o=r(17400);e.exports=function(e){return function(n,r,a){return a&&"number"!=typeof a&&s(n,r,a)&&(r=a=void 0),n=o(n),void 0===r?(r=n,n=0):r=o(r),a=void 0===a?n<r?1:-1:o(a),i(n,r,a,e)}}},44517:function(e,n,r){var i=r(76545),s=r(63950),o=r(84247);e.exports=i&&1/o(new i([,-0]))[1]==1/0?function(e){return new i(e)}:s},53138:function(e,n,r){var i=r(11331);e.exports=function(e){return i(e)?void 0:e}},24647:function(e,n,r){e.exports=r(54552)({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"})},93243:function(e,n,r){var i=r(56110);e.exports=function(){try{var e=i(Object,"defineProperty");return e({},"",{}),e}catch(e){}}()},25911:function(e,n,r){var i=r(38859),s=r(14248),o=r(19219);e.exports=function(e,n,r,a,l,h){var c=1&r,u=e.length,d=n.length;if(u!=d&&!(c&&d>u))return!1;var p=h.get(e),f=h.get(n);if(p&&f)return p==n&&f==e;var g=-1,m=!0,y=2&r?new i:void 0;for(h.set(e,n),h.set(n,e);++g<u;){var O=e[g],b=n[g];if(a)var x=c?a(b,O,g,n,e,h):a(O,b,g,e,n,h);if(void 0!==x){if(x)continue;m=!1;break}if(y){if(!s(n,function(e,n){if(!o(y,n)&&(O===e||l(O,e,r,a,h)))return y.push(n)})){m=!1;break}}else if(!(O===b||l(O,b,r,a,h))){m=!1;break}}return h.delete(e),h.delete(n),m}},21986:function(e,n,r){var i=r(51873),s=r(37828),o=r(75288),a=r(25911),l=r(20317),h=r(84247),c=i?i.prototype:void 0,u=c?c.valueOf:void 0;e.exports=function(e,n,r,i,c,d,p){switch(r){case"[object DataView]":if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)break;e=e.buffer,n=n.buffer;case"[object ArrayBuffer]":if(e.byteLength!=n.byteLength||!d(new s(e),new s(n)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+n);case"[object Error]":return e.name==n.name&&e.message==n.message;case"[object RegExp]":case"[object String]":return e==n+"";case"[object Map]":var f=l;case"[object Set]":var g=1&i;if(f||(f=h),e.size!=n.size&&!g)break;var m=p.get(e);if(m)return m==n;i|=2,p.set(e,n);var y=a(f(e),f(n),i,c,d,p);return p.delete(e),y;case"[object Symbol]":if(u)return u.call(e)==u.call(n)}return!1}},50689:function(e,n,r){var i=r(50002),s=Object.prototype.hasOwnProperty;e.exports=function(e,n,r,o,a,l){var h=1&r,c=i(e),u=c.length;if(u!=i(n).length&&!h)return!1;for(var d=u;d--;){var p=c[d];if(!(h?p in n:s.call(n,p)))return!1}var f=l.get(e),g=l.get(n);if(f&&g)return f==n&&g==e;var m=!0;l.set(e,n),l.set(n,e);for(var y=h;++d<u;){var O=e[p=c[d]],b=n[p];if(o)var x=h?o(b,O,p,n,e,l):o(O,b,p,e,n,l);if(!(void 0===x?O===b||a(O,b,r,o,l):x)){m=!1;break}y||(y="constructor"==p)}if(m&&!y){var w=e.constructor,S=n.constructor;w!=S&&"constructor"in e&&"constructor"in n&&!("function"==typeof w&&w instanceof w&&"function"==typeof S&&S instanceof S)&&(m=!1)}return l.delete(e),l.delete(n),m}},38816:function(e,n,r){var i=r(35970),s=r(56757),o=r(32865);e.exports=function(e){return o(s(e,void 0,i),e+"")}},34840:function(e,n,r){e.exports="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g},50002:function(e,n,r){var i=r(82199),s=r(4664),o=r(95950);e.exports=function(e){return i(e,o,s)}},83349:function(e,n,r){var i=r(82199),s=r(86375),o=r(37241);e.exports=function(e){return i(e,o,s)}},12651:function(e,n,r){var i=r(74218);e.exports=function(e,n){var r=e.__data__;return i(n)?r["string"==typeof n?"string":"hash"]:r.map}},10776:function(e,n,r){var i=r(30756),s=r(95950);e.exports=function(e){for(var n=s(e),r=n.length;r--;){var o=n[r],a=e[o];n[r]=[o,a,i(a)]}return n}},56110:function(e,n,r){var i=r(45083),s=r(10392);e.exports=function(e,n){var r=s(e,n);return i(r)?r:void 0}},28879:function(e,n,r){e.exports=r(74335)(Object.getPrototypeOf,Object)},659:function(e,n,r){var i=r(51873),s=Object.prototype,o=s.hasOwnProperty,a=s.toString,l=i?i.toStringTag:void 0;e.exports=function(e){var n=o.call(e,l),r=e[l];try{e[l]=void 0;var i=!0}catch(e){}var s=a.call(e);return i&&(n?e[l]=r:delete e[l]),s}},4664:function(e,n,r){var i=r(79770),s=r(63345),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols;e.exports=a?function(e){return null==e?[]:i(a(e=Object(e)),function(n){return o.call(e,n)})}:s},86375:function(e,n,r){var i=r(14528),s=r(28879),o=r(4664),a=r(63345);e.exports=Object.getOwnPropertySymbols?function(e){for(var n=[];e;)i(n,o(e)),e=s(e);return n}:a},5861:function(e,n,r){var i=r(55580),s=r(68223),o=r(32804),a=r(76545),l=r(28303),h=r(72552),c=r(47473),u="[object Map]",d="[object Promise]",p="[object Set]",f="[object WeakMap]",g="[object DataView]",m=c(i),y=c(s),O=c(o),b=c(a),x=c(l),w=h;(i&&w(new i(new ArrayBuffer(1)))!=g||s&&w(new s)!=u||o&&w(o.resolve())!=d||a&&w(new a)!=p||l&&w(new l)!=f)&&(w=function(e){var n=h(e),r="[object Object]"==n?e.constructor:void 0,i=r?c(r):"";if(i)switch(i){case m:return g;case y:return u;case O:return d;case b:return p;case x:return f}return n}),e.exports=w},10392:function(e){e.exports=function(e,n){return null==e?void 0:e[n]}},49326:function(e,n,r){var i=r(31769),s=r(72428),o=r(56449),a=r(30361),l=r(30294),h=r(77797);e.exports=function(e,n,r){n=i(n,e);for(var c=-1,u=n.length,d=!1;++c<u;){var p=h(n[c]);if(!(d=null!=e&&r(e,p)))break;e=e[p]}return d||++c!=u?d:!!(u=null==e?0:e.length)&&l(u)&&a(p,u)&&(o(e)||s(e))}},49698:function(e){var n=RegExp("[\\u200d\ud800-\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return n.test(e)}},45434:function(e){var n=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function(e){return n.test(e)}},22032:function(e,n,r){var i=r(81042);e.exports=function(){this.__data__=i?i(null):{},this.size=0}},63862:function(e){e.exports=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=!!n,n}},66721:function(e,n,r){var i=r(81042),s=Object.prototype.hasOwnProperty;e.exports=function(e){var n=this.__data__;if(i){var r=n[e];return"__lodash_hash_undefined__"===r?void 0:r}return s.call(n,e)?n[e]:void 0}},12749:function(e,n,r){var i=r(81042),s=Object.prototype.hasOwnProperty;e.exports=function(e){var n=this.__data__;return i?void 0!==n[e]:s.call(n,e)}},35749:function(e,n,r){var i=r(81042);e.exports=function(e,n){var r=this.__data__;return this.size+=+!this.has(e),r[e]=i&&void 0===n?"__lodash_hash_undefined__":n,this}},76189:function(e){var n=Object.prototype.hasOwnProperty;e.exports=function(e){var r=e.length,i=new e.constructor(r);return r&&"string"==typeof e[0]&&n.call(e,"index")&&(i.index=e.index,i.input=e.input),i}},77199:function(e,n,r){var i=r(49653),s=r(76169),o=r(73201),a=r(93736),l=r(71961);e.exports=function(e,n,r){var h=e.constructor;switch(n){case"[object ArrayBuffer]":return i(e);case"[object Boolean]":case"[object Date]":return new h(+e);case"[object DataView]":return s(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return l(e,r);case"[object Map]":case"[object Set]":return new h;case"[object Number]":case"[object String]":return new h(e);case"[object RegExp]":return o(e);case"[object Symbol]":return a(e)}}},35529:function(e,n,r){var i=r(39344),s=r(28879),o=r(55527);e.exports=function(e){return"function"!=typeof e.constructor||o(e)?{}:i(s(e))}},45891:function(e,n,r){var i=r(51873),s=r(72428),o=r(56449),a=i?i.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||s(e)||!!(a&&e&&e[a])}},30361:function(e){var n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,r){var i=typeof e;return!!(r=null==r?0x1fffffffffffff:r)&&("number"==i||"symbol"!=i&&n.test(e))&&e>-1&&e%1==0&&e<r}},36800:function(e,n,r){var i=r(75288),s=r(64894),o=r(30361),a=r(23805);e.exports=function(e,n,r){if(!a(r))return!1;var l=typeof n;return("number"==l?!!(s(r)&&o(n,r.length)):"string"==l&&n in r)&&i(r[n],e)}},28586:function(e,n,r){var i=r(56449),s=r(44394),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,n){if(i(e))return!1;var r=typeof e;return!!("number"==r||"symbol"==r||"boolean"==r||null==e||s(e))||a.test(e)||!o.test(e)||null!=n&&e in Object(n)}},74218:function(e){e.exports=function(e){var n=typeof e;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e}},87296:function(e,n,r){var i,s=r(55481),o=(i=/[^.]+$/.exec(s&&s.keys&&s.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"";e.exports=function(e){return!!o&&o in e}},55527:function(e){var n=Object.prototype;e.exports=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||n)}},30756:function(e,n,r){var i=r(23805);e.exports=function(e){return e==e&&!i(e)}},63702:function(e){e.exports=function(){this.__data__=[],this.size=0}},70080:function(e,n,r){var i=r(26025),s=Array.prototype.splice;e.exports=function(e){var n=this.__data__,r=i(n,e);return!(r<0)&&(r==n.length-1?n.pop():s.call(n,r,1),--this.size,!0)}},24739:function(e,n,r){var i=r(26025);e.exports=function(e){var n=this.__data__,r=i(n,e);return r<0?void 0:n[r][1]}},48655:function(e,n,r){var i=r(26025);e.exports=function(e){return i(this.__data__,e)>-1}},31175:function(e,n,r){var i=r(26025);e.exports=function(e,n){var r=this.__data__,s=i(r,e);return s<0?(++this.size,r.push([e,n])):r[s][1]=n,this}},63040:function(e,n,r){var i=r(21549),s=r(80079),o=r(68223);e.exports=function(){this.size=0,this.__data__={hash:new i,map:new(o||s),string:new i}}},17670:function(e,n,r){var i=r(12651);e.exports=function(e){var n=i(this,e).delete(e);return this.size-=!!n,n}},90289:function(e,n,r){var i=r(12651);e.exports=function(e){return i(this,e).get(e)}},4509:function(e,n,r){var i=r(12651);e.exports=function(e){return i(this,e).has(e)}},72949:function(e,n,r){var i=r(12651);e.exports=function(e,n){var r=i(this,e),s=r.size;return r.set(e,n),this.size+=+(r.size!=s),this}},20317:function(e){e.exports=function(e){var n=-1,r=Array(e.size);return e.forEach(function(e,i){r[++n]=[i,e]}),r}},67197:function(e){e.exports=function(e,n){return function(r){return null!=r&&r[e]===n&&(void 0!==n||e in Object(r))}}},62224:function(e,n,r){var i=r(50104);e.exports=function(e){var n=i(e,function(e){return 500===r.size&&r.clear(),e}),r=n.cache;return n}},81042:function(e,n,r){e.exports=r(56110)(Object,"create")},3650:function(e,n,r){e.exports=r(74335)(Object.keys,Object)},90181:function(e){e.exports=function(e){var n=[];if(null!=e)for(var r in Object(e))n.push(r);return n}},86009:function(e,n,r){e=r.nmd(e);var i=r(34840),s=n&&!n.nodeType&&n,o=s&&e&&!e.nodeType&&e,a=o&&o.exports===s&&i.process,l=function(){try{var e=o&&o.require&&o.require("util").types;if(e)return e;return a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=l},59350:function(e){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},74335:function(e){e.exports=function(e,n){return function(r){return e(n(r))}}},56757:function(e,n,r){var i=r(91033),s=Math.max;e.exports=function(e,n,r){return n=s(void 0===n?e.length-1:n,0),function(){for(var o=arguments,a=-1,l=s(o.length-n,0),h=Array(l);++a<l;)h[a]=o[n+a];a=-1;for(var c=Array(n+1);++a<n;)c[a]=o[a];return c[n]=r(h),i(e,this,c)}}},68969:function(e,n,r){var i=r(47422),s=r(25160);e.exports=function(e,n){return n.length<2?e:i(e,s(n,0,-1))}},9325:function(e,n,r){var i=r(34840),s="object"==typeof self&&self&&self.Object===Object&&self;e.exports=i||s||Function("return this")()},14974:function(e){e.exports=function(e,n){if(("constructor"!==n||"function"!=typeof e[n])&&"__proto__"!=n)return e[n]}},31380:function(e){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},51459:function(e){e.exports=function(e){return this.__data__.has(e)}},84247:function(e){e.exports=function(e){var n=-1,r=Array(e.size);return e.forEach(function(e){r[++n]=e}),r}},32865:function(e,n,r){var i=r(19570);e.exports=r(51811)(i)},51811:function(e){var n=Date.now;e.exports=function(e){var r=0,i=0;return function(){var s=n(),o=16-(s-i);if(i=s,o>0){if(++r>=800)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}},51420:function(e,n,r){var i=r(80079);e.exports=function(){this.__data__=new i,this.size=0}},90938:function(e){e.exports=function(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}},63605:function(e){e.exports=function(e){return this.__data__.get(e)}},29817:function(e){e.exports=function(e){return this.__data__.has(e)}},80945:function(e,n,r){var i=r(80079),s=r(68223),o=r(53661);e.exports=function(e,n){var r=this.__data__;if(r instanceof i){var a=r.__data__;if(!s||a.length<199)return a.push([e,n]),this.size=++r.size,this;r=this.__data__=new o(a)}return r.set(e,n),this.size=r.size,this}},76959:function(e){e.exports=function(e,n,r){for(var i=r-1,s=e.length;++i<s;)if(e[i]===n)return i;return -1}},63912:function(e,n,r){var i=r(61074),s=r(49698),o=r(42054);e.exports=function(e){return s(e)?o(e):i(e)}},61802:function(e,n,r){var i=r(62224),s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g;e.exports=i(function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(s,function(e,r,i,s){n.push(i?s.replace(o,"$1"):r||e)}),n})},77797:function(e,n,r){var i=r(44394),s=1/0;e.exports=function(e){if("string"==typeof e||i(e))return e;var n=e+"";return"0"==n&&1/e==-s?"-0":n}},47473:function(e){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},31800:function(e){var n=/\s/;e.exports=function(e){for(var r=e.length;r--&&n.test(e.charAt(r)););return r}},42054:function(e){var n="\ud800-\udfff",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\ud83c[\udffb-\udfff]",s="[^"+n+"]",o="(?:\ud83c[\udde6-\uddff]){2}",a="[\ud800-\udbff][\udc00-\udfff]",l="(?:"+r+"|"+i+")?",h="[\\ufe0e\\ufe0f]?",c="(?:\\u200d(?:"+[s,o,a].join("|")+")"+h+l+")*",u=RegExp(i+"(?="+i+")|"+("(?:"+[s+r+"?",r,o,a,"["+n+"]"].join("|"))+")"+(h+l+c),"g");e.exports=function(e){return e.match(u)||[]}},22225:function(e){var n="\ud800-\udfff",r="\\u2700-\\u27bf",i="a-z\\xdf-\\xf6\\xf8-\\xff",s="A-Z\\xc0-\\xd6\\xd8-\\xde",o="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",a="['’]",l="["+o+"]",h="["+i+"]",c="[^"+n+o+"\\d+"+r+i+s+"]",u="(?:\ud83c[\udde6-\uddff]){2}",d="[\ud800-\udbff][\udc00-\udfff]",p="["+s+"]",f="(?:"+h+"|"+c+")",g="(?:"+p+"|"+c+")",m="(?:"+a+"(?:d|ll|m|re|s|t|ve))?",y="(?:"+a+"(?:D|LL|M|RE|S|T|VE))?",O="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\ud83c[\udffb-\udfff])?",b="[\\ufe0e\\ufe0f]?",x="(?:\\u200d(?:"+["[^"+n+"]",u,d].join("|")+")"+b+O+")*",w="(?:"+["["+r+"]",u,d].join("|")+")"+(b+O+x),S=RegExp([p+"?"+h+"+"+m+"(?="+[l,p,"$"].join("|")+")",g+"+"+y+"(?="+[l,p+f,"$"].join("|")+")",p+"?"+f+"+"+m,p+"+"+y,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])|\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])|\\d+",w].join("|"),"g");e.exports=function(e){return e.match(S)||[]}},86139:function(e,n,r){var i=r(16547),s=r(21791),o=r(20999),a=r(64894),l=r(55527),h=r(95950),c=Object.prototype.hasOwnProperty;e.exports=o(function(e,n){if(l(n)||a(n))return void s(n,h(n),e);for(var r in n)c.call(n,r)&&i(e,r,n[r])})},84058:function(e,n,r){var i=r(14792);e.exports=r(45539)(function(e,n,r){return n=n.toLowerCase(),e+(r?i(n):n)})},14792:function(e,n,r){var i=r(13222),s=r(55808);e.exports=function(e){return s(i(e).toLowerCase())}},89647:function(e,n,r){var i=r(9999);e.exports=function(e,n){return i(e,5,n="function"==typeof n?n:void 0)}},37334:function(e){e.exports=function(e){return function(){return e}}},38221:function(e,n,r){var i=r(23805),s=r(10124),o=r(99374),a=Math.max,l=Math.min;e.exports=function(e,n,r){var h,c,u,d,p,f,g=0,m=!1,y=!1,O=!0;if("function"!=typeof e)throw TypeError("Expected a function");function b(n){var r=h,i=c;return h=c=void 0,g=n,d=e.apply(i,r)}function x(e){var r=e-f,i=e-g;return void 0===f||r>=n||r<0||y&&i>=u}function w(){var e,r,i,o=s();if(x(o))return S(o);p=setTimeout(w,(e=o-f,r=o-g,i=n-e,y?l(i,u-r):i))}function S(e){return(p=void 0,O&&h)?b(e):(h=c=void 0,d)}function _(){var e,r=s(),i=x(r);if(h=arguments,c=this,f=r,i){if(void 0===p)return g=e=f,p=setTimeout(w,n),m?b(e):d;if(y)return clearTimeout(p),p=setTimeout(w,n),b(f)}return void 0===p&&(p=setTimeout(w,n)),d}return n=o(n)||0,i(r)&&(m=!!r.leading,u=(y="maxWait"in r)?a(o(r.maxWait)||0,n):u,O="trailing"in r?!!r.trailing:O),_.cancel=function(){void 0!==p&&clearTimeout(p),g=0,h=f=c=p=void 0},_.flush=function(){return void 0===p?d:S(s())},_}},50828:function(e,n,r){var i=r(24647),s=r(13222),o=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,a=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");e.exports=function(e){return(e=s(e))&&e.replace(o,i).replace(a,"")}},66245:function(e,n,r){var i=r(83915),s=r(83120),o=r(69302),a=r(83693);e.exports=o(function(e,n){return a(e)?i(e,s(n,1,a,!0)):[]})},76135:function(e,n,r){e.exports=r(39754)},75288:function(e){e.exports=function(e,n){return e===n||e!=e&&n!=n}},35970:function(e,n,r){var i=r(83120);e.exports=function(e){return(null==e?0:e.length)?i(e,1):[]}},39754:function(e,n,r){var i=r(83729),s=r(80909),o=r(24066),a=r(56449);e.exports=function(e,n){return(a(e)?i:s)(e,o(n))}},58156:function(e,n,r){var i=r(47422);e.exports=function(e,n,r){var s=null==e?void 0:i(e,n);return void 0===s?r:s}},61448:function(e,n,r){var i=r(20426),s=r(49326);e.exports=function(e,n){return null!=e&&s(e,n,i)}},80631:function(e,n,r){var i=r(28077),s=r(49326);e.exports=function(e,n){return null!=e&&s(e,n,i)}},83488:function(e){e.exports=function(e){return e}},79859:function(e,n,r){var i=r(96131),s=r(64894),o=r(85015),a=r(61489),l=r(35880),h=Math.max;e.exports=function(e,n,r,c){e=s(e)?e:l(e),r=r&&!c?a(r):0;var u=e.length;return r<0&&(r=h(u+r,0)),o(e)?r<=u&&e.indexOf(n,r)>-1:!!u&&i(e,n,r)>-1}},72428:function(e,n,r){var i=r(27534),s=r(40346),o=Object.prototype,a=o.hasOwnProperty,l=o.propertyIsEnumerable;e.exports=i(function(){return arguments}())?i:function(e){return s(e)&&a.call(e,"callee")&&!l.call(e,"callee")}},56449:function(e){e.exports=Array.isArray},64894:function(e,n,r){var i=r(1882),s=r(30294);e.exports=function(e){return null!=e&&s(e.length)&&!i(e)}},83693:function(e,n,r){var i=r(64894),s=r(40346);e.exports=function(e){return s(e)&&i(e)}},53812:function(e,n,r){var i=r(72552),s=r(40346);e.exports=function(e){return!0===e||!1===e||s(e)&&"[object Boolean]"==i(e)}},3656:function(e,n,r){e=r.nmd(e);var i=r(9325),s=r(89935),o=n&&!n.nodeType&&n,a=o&&e&&!e.nodeType&&e,l=a&&a.exports===o?i.Buffer:void 0,h=l?l.isBuffer:void 0;e.exports=h||s},62193:function(e,n,r){var i=r(88984),s=r(5861),o=r(72428),a=r(56449),l=r(64894),h=r(3656),c=r(55527),u=r(37167),d=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(l(e)&&(a(e)||"string"==typeof e||"function"==typeof e.splice||h(e)||u(e)||o(e)))return!e.length;var n=s(e);if("[object Map]"==n||"[object Set]"==n)return!e.size;if(c(e))return!i(e).length;for(var r in e)if(d.call(e,r))return!1;return!0}},2404:function(e,n,r){var i=r(60270);e.exports=function(e,n){return i(e,n)}},1882:function(e,n,r){var i=r(72552),s=r(23805);e.exports=function(e){if(!s(e))return!1;var n=i(e);return"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n}},30294:function(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=0x1fffffffffffff}},87730:function(e,n,r){var i=r(29172),s=r(27301),o=r(86009),a=o&&o.isMap;e.exports=a?s(a):i},11741:function(e,n,r){var i=r(98023);e.exports=function(e){return i(e)&&e!=+e}},5187:function(e){e.exports=function(e){return null===e}},98023:function(e,n,r){var i=r(72552),s=r(40346);e.exports=function(e){return"number"==typeof e||s(e)&&"[object Number]"==i(e)}},23805:function(e){e.exports=function(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}},40346:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},11331:function(e,n,r){var i=r(72552),s=r(28879),o=r(40346),a=Object.prototype,l=Function.prototype.toString,h=a.hasOwnProperty,c=l.call(Object);e.exports=function(e){if(!o(e)||"[object Object]"!=i(e))return!1;var n=s(e);if(null===n)return!0;var r=h.call(n,"constructor")&&n.constructor;return"function"==typeof r&&r instanceof r&&l.call(r)==c}},38440:function(e,n,r){var i=r(16038),s=r(27301),o=r(86009),a=o&&o.isSet;e.exports=a?s(a):i},85015:function(e,n,r){var i=r(72552),s=r(56449),o=r(40346);e.exports=function(e){return"string"==typeof e||!s(e)&&o(e)&&"[object String]"==i(e)}},44394:function(e,n,r){var i=r(72552),s=r(40346);e.exports=function(e){return"symbol"==typeof e||s(e)&&"[object Symbol]"==i(e)}},37167:function(e,n,r){var i=r(4901),s=r(27301),o=r(86009),a=o&&o.isTypedArray;e.exports=a?s(a):i},62216:function(e){e.exports=function(e){return void 0===e}},95950:function(e,n,r){var i=r(70695),s=r(88984),o=r(64894);e.exports=function(e){return o(e)?i(e):s(e)}},37241:function(e,n,r){var i=r(70695),s=r(72903),o=r(64894);e.exports=function(e){return o(e)?i(e,!0):s(e)}},68090:function(e){e.exports=function(e){var n=null==e?0:e.length;return n?e[n-1]:void 0}},2543:function(e,n,r){e=r.nmd(e),(function(){var i,s="Expected a function",o="__lodash_hash_undefined__",a="__lodash_placeholder__",l=1/0,h=0/0,c=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],u="[object Arguments]",d="[object Array]",p="[object Boolean]",f="[object Date]",g="[object Error]",m="[object Function]",y="[object GeneratorFunction]",O="[object Map]",b="[object Number]",x="[object Object]",w="[object Promise]",S="[object RegExp]",_="[object Set]",k="[object String]",C="[object Symbol]",E="[object WeakMap]",T="[object ArrayBuffer]",P="[object DataView]",A="[object Float32Array]",M="[object Float64Array]",N="[object Int8Array]",D="[object Int16Array]",I="[object Int32Array]",$="[object Uint8Array]",R="[object Uint8ClampedArray]",L="[object Uint16Array]",Q="[object Uint32Array]",j=/\b__p \+= '';/g,V=/\b(__p \+=) '' \+/g,z=/(__e\(.*?\)|\b__t\)) \+\n'';/g,B=/&(?:amp|lt|gt|quot|#39);/g,F=/[&<>"']/g,Z=RegExp(B.source),q=RegExp(F.source),W=/<%-([\s\S]+?)%>/g,X=/<%([\s\S]+?)%>/g,U=/<%=([\s\S]+?)%>/g,Y=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,G=/^\w*$/,H=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,K=/[\\^$.*+?()[\]{}|]/g,J=RegExp(K.source),ee=/^\s+/,et=/\s/,en=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,er=/\{\n\/\* \[wrapped with (.+)\] \*/,ei=/,? & /,es=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,eo=/[()=,{}\[\]\/\s]/,ea=/\\(\\)?/g,el=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,eh=/\w*$/,ec=/^[-+]0x[0-9a-f]+$/i,eu=/^0b[01]+$/i,ed=/^\[object .+?Constructor\]$/,ep=/^0o[0-7]+$/i,ef=/^(?:0|[1-9]\d*)$/,eg=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,em=/($^)/,ey=/['\n\r\u2028\u2029\\]/g,eO="\ud800-\udfff",ev="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",eb="\\u2700-\\u27bf",ex="a-z\\xdf-\\xf6\\xf8-\\xff",ew="A-Z\\xc0-\\xd6\\xd8-\\xde",eS="\\ufe0e\\ufe0f",e_="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ek="['’]",eC="["+e_+"]",eE="["+ev+"]",eT="["+ex+"]",eP="[^"+eO+e_+"\\d+"+eb+ex+ew+"]",eA="\ud83c[\udffb-\udfff]",eM="[^"+eO+"]",eN="(?:\ud83c[\udde6-\uddff]){2}",eD="[\ud800-\udbff][\udc00-\udfff]",eI="["+ew+"]",e$="\\u200d",eR="(?:"+eT+"|"+eP+")",eL="(?:"+eI+"|"+eP+")",eQ="(?:"+ek+"(?:d|ll|m|re|s|t|ve))?",ej="(?:"+ek+"(?:D|LL|M|RE|S|T|VE))?",eV="(?:"+eE+"|"+eA+")?",ez="["+eS+"]?",eB="(?:"+e$+"(?:"+[eM,eN,eD].join("|")+")"+ez+eV+")*",eF=ez+eV+eB,eZ="(?:"+["["+eb+"]",eN,eD].join("|")+")"+eF,eq="(?:"+[eM+eE+"?",eE,eN,eD,"["+eO+"]"].join("|")+")",eW=RegExp(ek,"g"),eX=RegExp(eE,"g"),eU=RegExp(eA+"(?="+eA+")|"+eq+eF,"g"),eY=RegExp([eI+"?"+eT+"+"+eQ+"(?="+[eC,eI,"$"].join("|")+")",eL+"+"+ej+"(?="+[eC,eI+eR,"$"].join("|")+")",eI+"?"+eR+"+"+eQ,eI+"+"+ej,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])|\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])|\\d+",eZ].join("|"),"g"),eG=RegExp("["+e$+eO+ev+eS+"]"),eH=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,eK=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],eJ=-1,e0={};e0[A]=e0[M]=e0[N]=e0[D]=e0[I]=e0[$]=e0[R]=e0[L]=e0[Q]=!0,e0[u]=e0[d]=e0[T]=e0[p]=e0[P]=e0[f]=e0[g]=e0[m]=e0[O]=e0[b]=e0[x]=e0[S]=e0[_]=e0[k]=e0[E]=!1;var e1={};e1[u]=e1[d]=e1[T]=e1[P]=e1[p]=e1[f]=e1[A]=e1[M]=e1[N]=e1[D]=e1[I]=e1[O]=e1[b]=e1[x]=e1[S]=e1[_]=e1[k]=e1[C]=e1[$]=e1[R]=e1[L]=e1[Q]=!0,e1[g]=e1[m]=e1[E]=!1;var e2={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},e5=parseFloat,e4=parseInt,e3="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,e6="object"==typeof self&&self&&self.Object===Object&&self,e9=e3||e6||Function("return this")(),e7=n&&!n.nodeType&&n,e8=e7&&e&&!e.nodeType&&e,te=e8&&e8.exports===e7,tt=te&&e3.process,tn=function(){try{var e=e8&&e8.require&&e8.require("util").types;if(e)return e;return tt&&tt.binding&&tt.binding("util")}catch(e){}}(),tr=tn&&tn.isArrayBuffer,ti=tn&&tn.isDate,ts=tn&&tn.isMap,to=tn&&tn.isRegExp,ta=tn&&tn.isSet,tl=tn&&tn.isTypedArray;function th(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}function tc(e,n,r,i){for(var s=-1,o=null==e?0:e.length;++s<o;){var a=e[s];n(i,a,r(a),e)}return i}function tu(e,n){for(var r=-1,i=null==e?0:e.length;++r<i&&!1!==n(e[r],r,e););return e}function td(e,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(!n(e[r],r,e))return!1;return!0}function tp(e,n){for(var r=-1,i=null==e?0:e.length,s=0,o=[];++r<i;){var a=e[r];n(a,r,e)&&(o[s++]=a)}return o}function tf(e,n){return!!(null==e?0:e.length)&&t_(e,n,0)>-1}function tg(e,n,r){for(var i=-1,s=null==e?0:e.length;++i<s;)if(r(n,e[i]))return!0;return!1}function tm(e,n){for(var r=-1,i=null==e?0:e.length,s=Array(i);++r<i;)s[r]=n(e[r],r,e);return s}function ty(e,n){for(var r=-1,i=n.length,s=e.length;++r<i;)e[s+r]=n[r];return e}function tO(e,n,r,i){var s=-1,o=null==e?0:e.length;for(i&&o&&(r=e[++s]);++s<o;)r=n(r,e[s],s,e);return r}function tv(e,n,r,i){var s=null==e?0:e.length;for(i&&s&&(r=e[--s]);s--;)r=n(r,e[s],s,e);return r}function tb(e,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(e[r],r,e))return!0;return!1}var tx=tT("length");function tw(e,n,r){var i;return r(e,function(e,r,s){if(n(e,r,s))return i=r,!1}),i}function tS(e,n,r,i){for(var s=e.length,o=r+(i?1:-1);i?o--:++o<s;)if(n(e[o],o,e))return o;return -1}function t_(e,n,r){return n==n?function(e,n,r){for(var i=r-1,s=e.length;++i<s;)if(e[i]===n)return i;return -1}(e,n,r):tS(e,tC,r)}function tk(e,n,r,i){for(var s=r-1,o=e.length;++s<o;)if(i(e[s],n))return s;return -1}function tC(e){return e!=e}function tE(e,n){var r=null==e?0:e.length;return r?tM(e,n)/r:h}function tT(e){return function(n){return null==n?i:n[e]}}function tP(e){return function(n){return null==e?i:e[n]}}function tA(e,n,r,i,s){return s(e,function(e,s,o){r=i?(i=!1,e):n(r,e,s,o)}),r}function tM(e,n){for(var r,s=-1,o=e.length;++s<o;){var a=n(e[s]);i!==a&&(r=i===r?a:r+a)}return r}function tN(e,n){for(var r=-1,i=Array(e);++r<e;)i[r]=n(r);return i}function tD(e){return e?e.slice(0,tY(e)+1).replace(ee,""):e}function tI(e){return function(n){return e(n)}}function t$(e,n){return tm(n,function(n){return e[n]})}function tR(e,n){return e.has(n)}function tL(e,n){for(var r=-1,i=e.length;++r<i&&t_(n,e[r],0)>-1;);return r}function tQ(e,n){for(var r=e.length;r--&&t_(n,e[r],0)>-1;);return r}var tj=tP({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),tV=tP({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function tz(e){return"\\"+e2[e]}function tB(e){return eG.test(e)}function tF(e){var n=-1,r=Array(e.size);return e.forEach(function(e,i){r[++n]=[i,e]}),r}function tZ(e,n){return function(r){return e(n(r))}}function tq(e,n){for(var r=-1,i=e.length,s=0,o=[];++r<i;){var l=e[r];(l===n||l===a)&&(e[r]=a,o[s++]=r)}return o}function tW(e){var n=-1,r=Array(e.size);return e.forEach(function(e){r[++n]=e}),r}function tX(e){return tB(e)?function(e){for(var n=eU.lastIndex=0;eU.test(e);)++n;return n}(e):tx(e)}function tU(e){return tB(e)?e.match(eU)||[]:e.split("")}function tY(e){for(var n=e.length;n--&&et.test(e.charAt(n)););return n}var tG=tP({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),tH=function e(n){var r,et,eO,ev,eb=(n=null==n?e9:tH.defaults(e9.Object(),n,tH.pick(e9,eK))).Array,ex=n.Date,ew=n.Error,eS=n.Function,e_=n.Math,ek=n.Object,eC=n.RegExp,eE=n.String,eT=n.TypeError,eP=eb.prototype,eA=eS.prototype,eM=ek.prototype,eN=n["__core-js_shared__"],eD=eA.toString,eI=eM.hasOwnProperty,e$=0,eR=(r=/[^.]+$/.exec(eN&&eN.keys&&eN.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",eL=eM.toString,eQ=eD.call(ek),ej=e9._,eV=eC("^"+eD.call(eI).replace(K,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ez=te?n.Buffer:i,eB=n.Symbol,eF=n.Uint8Array,eZ=ez?ez.allocUnsafe:i,eq=tZ(ek.getPrototypeOf,ek),eU=ek.create,eG=eM.propertyIsEnumerable,e2=eP.splice,e3=eB?eB.isConcatSpreadable:i,e6=eB?eB.iterator:i,e7=eB?eB.toStringTag:i,e8=function(){try{var e=im(ek,"defineProperty");return e({},"",{}),e}catch(e){}}(),tt=n.clearTimeout!==e9.clearTimeout&&n.clearTimeout,tn=ex&&ex.now!==e9.Date.now&&ex.now,tx=n.setTimeout!==e9.setTimeout&&n.setTimeout,tP=e_.ceil,tK=e_.floor,tJ=ek.getOwnPropertySymbols,t0=ez?ez.isBuffer:i,t1=n.isFinite,t2=eP.join,t5=tZ(ek.keys,ek),t4=e_.max,t3=e_.min,t6=ex.now,t9=n.parseInt,t7=e_.random,t8=eP.reverse,ne=im(n,"DataView"),nt=im(n,"Map"),nn=im(n,"Promise"),nr=im(n,"Set"),ni=im(n,"WeakMap"),ns=im(ek,"create"),no=ni&&new ni,na={},nl=iz(ne),nh=iz(nt),nc=iz(nn),nu=iz(nr),nd=iz(ni),np=eB?eB.prototype:i,nf=np?np.valueOf:i,ng=np?np.toString:i;function nm(e){if(sG(e)&&!sj(e)&&!(e instanceof nb)){if(e instanceof nv)return e;if(eI.call(e,"__wrapped__"))return iB(e)}return new nv(e)}var ny=function(){function e(){}return function(n){if(!sY(n))return{};if(eU)return eU(n);e.prototype=n;var r=new e;return e.prototype=i,r}}();function nO(){}function nv(e,n){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=i}function nb(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=0xffffffff,this.__views__=[]}function nx(e){var n=-1,r=null==e?0:e.length;for(this.clear();++n<r;){var i=e[n];this.set(i[0],i[1])}}function nw(e){var n=-1,r=null==e?0:e.length;for(this.clear();++n<r;){var i=e[n];this.set(i[0],i[1])}}function nS(e){var n=-1,r=null==e?0:e.length;for(this.clear();++n<r;){var i=e[n];this.set(i[0],i[1])}}function n_(e){var n=-1,r=null==e?0:e.length;for(this.__data__=new nS;++n<r;)this.add(e[n])}function nk(e){var n=this.__data__=new nw(e);this.size=n.size}function nC(e,n){var r=sj(e),i=!r&&sQ(e),s=!r&&!i&&sF(e),o=!r&&!i&&!s&&s4(e),a=r||i||s||o,l=a?tN(e.length,eE):[],h=l.length;for(var c in e)(n||eI.call(e,c))&&!(a&&("length"==c||s&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||iS(c,h)))&&l.push(c);return l}function nE(e){var n=e.length;return n?e[ru(0,n-1)]:i}nm.templateSettings={escape:W,evaluate:X,interpolate:U,variable:"",imports:{_:nm}},nm.prototype=nO.prototype,nm.prototype.constructor=nm,nv.prototype=ny(nO.prototype),nv.prototype.constructor=nv,nb.prototype=ny(nO.prototype),nb.prototype.constructor=nb,nx.prototype.clear=function(){this.__data__=ns?ns(null):{},this.size=0},nx.prototype.delete=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=!!n,n},nx.prototype.get=function(e){var n=this.__data__;if(ns){var r=n[e];return r===o?i:r}return eI.call(n,e)?n[e]:i},nx.prototype.has=function(e){var n=this.__data__;return ns?n[e]!==i:eI.call(n,e)},nx.prototype.set=function(e,n){var r=this.__data__;return this.size+=+!this.has(e),r[e]=ns&&i===n?o:n,this},nw.prototype.clear=function(){this.__data__=[],this.size=0},nw.prototype.delete=function(e){var n=this.__data__,r=nA(n,e);return!(r<0)&&(r==n.length-1?n.pop():e2.call(n,r,1),--this.size,!0)},nw.prototype.get=function(e){var n=this.__data__,r=nA(n,e);return r<0?i:n[r][1]},nw.prototype.has=function(e){return nA(this.__data__,e)>-1},nw.prototype.set=function(e,n){var r=this.__data__,i=nA(r,e);return i<0?(++this.size,r.push([e,n])):r[i][1]=n,this},nS.prototype.clear=function(){this.size=0,this.__data__={hash:new nx,map:new(nt||nw),string:new nx}},nS.prototype.delete=function(e){var n=ip(this,e).delete(e);return this.size-=!!n,n},nS.prototype.get=function(e){return ip(this,e).get(e)},nS.prototype.has=function(e){return ip(this,e).has(e)},nS.prototype.set=function(e,n){var r=ip(this,e),i=r.size;return r.set(e,n),this.size+=+(r.size!=i),this},n_.prototype.add=n_.prototype.push=function(e){return this.__data__.set(e,o),this},n_.prototype.has=function(e){return this.__data__.has(e)};function nT(e,n,r){(i===r||s$(e[n],r))&&(i!==r||n in e)||nD(e,n,r)}function nP(e,n,r){var s=e[n];eI.call(e,n)&&s$(s,r)&&(i!==r||n in e)||nD(e,n,r)}function nA(e,n){for(var r=e.length;r--;)if(s$(e[r][0],n))return r;return -1}function nM(e,n,r,i){return nV(e,function(e,s,o){n(i,e,r(e),o)}),i}function nN(e,n){return e&&rF(n,om(n),e)}function nD(e,n,r){"__proto__"==n&&e8?e8(e,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[n]=r}function nI(e,n){for(var r=-1,s=n.length,o=eb(s),a=null==e;++r<s;)o[r]=a?i:ou(e,n[r]);return o}function n$(e,n,r){return e==e&&(i!==r&&(e=e<=r?e:r),i!==n&&(e=e>=n?e:n)),e}function nR(e,n,r,s,o,a){var l,h=1&n,c=2&n,d=4&n;if(r&&(l=o?r(e,s,o,a):r(e)),i!==l)return l;if(!sY(e))return e;var g=sj(e);if(g){if(E=(w=e).length,j=new w.constructor(E),E&&"string"==typeof w[0]&&eI.call(w,"index")&&(j.index=w.index,j.input=w.input),l=j,!h)return rB(e,l)}else{var w,E,j,V,z,B,F,Z,q=iv(e),W=q==m||q==y;if(sF(e))return rR(e,h);if(q==x||q==u||W&&!o){if(l=c||W?{}:ix(e),!h){return c?(V=e,z=(Z=l)&&rF(e,oy(e),Z),rF(V,iO(V),z)):(B=e,F=nN(l,e),rF(B,iy(B),F))}}else{if(!e1[q])return o?e:{};l=function(e,n,r){var i,s,o=e.constructor;switch(n){case T:return rL(e);case p:case f:return new o(+e);case P:return i=r?rL(e.buffer):e.buffer,new e.constructor(i,e.byteOffset,e.byteLength);case A:case M:case N:case D:case I:case $:case R:case L:case Q:return rQ(e,r);case O:return new o;case b:case k:return new o(e);case S:return(s=new e.constructor(e.source,eh.exec(e))).lastIndex=e.lastIndex,s;case _:return new o;case C:return nf?ek(nf.call(e)):{}}}(e,q,h)}}a||(a=new nk);var X=a.get(e);if(X)return X;a.set(e,l),s1(e)?e.forEach(function(i){l.add(nR(i,n,r,i,e,a))}):sH(e)&&e.forEach(function(i,s){l.set(s,nR(i,n,r,s,e,a))});var U=d?c?il:ia:c?oy:om,Y=g?i:U(e);return tu(Y||e,function(i,s){Y&&(i=e[s=i]),nP(l,s,nR(i,n,r,s,e,a))}),l}function nL(e,n,r){var s=r.length;if(null==e)return!s;for(e=ek(e);s--;){var o=r[s],a=n[o],l=e[o];if(i===l&&!(o in e)||!a(l))return!1}return!0}function nQ(e,n,r){if("function"!=typeof e)throw new eT(s);return iI(function(){e.apply(i,r)},n)}function nj(e,n,r,i){var s=-1,o=tf,a=!0,l=e.length,h=[],c=n.length;if(!l)return h;r&&(n=tm(n,tI(r))),i?(o=tg,a=!1):n.length>=200&&(o=tR,a=!1,n=new n_(n));r:for(;++s<l;){var u=e[s],d=null==r?u:r(u);if(u=i||0!==u?u:0,a&&d==d){for(var p=c;p--;)if(n[p]===d)continue r;h.push(u)}else o(n,d,i)||h.push(u)}return h}nk.prototype.clear=function(){this.__data__=new nw,this.size=0},nk.prototype.delete=function(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r},nk.prototype.get=function(e){return this.__data__.get(e)},nk.prototype.has=function(e){return this.__data__.has(e)},nk.prototype.set=function(e,n){var r=this.__data__;if(r instanceof nw){var i=r.__data__;if(!nt||i.length<199)return i.push([e,n]),this.size=++r.size,this;r=this.__data__=new nS(i)}return r.set(e,n),this.size=r.size,this};var nV=rW(nU),nz=rW(nY,!0);function nB(e,n){var r=!0;return nV(e,function(e,i,s){return r=!!n(e,i,s)}),r}function nF(e,n,r){for(var s=-1,o=e.length;++s<o;){var a=e[s],l=n(a);if(null!=l&&(i===h?l==l&&!s5(l):r(l,h)))var h=l,c=a}return c}function nZ(e,n){var r=[];return nV(e,function(e,i,s){n(e,i,s)&&r.push(e)}),r}function nq(e,n,r,i,s){var o=-1,a=e.length;for(r||(r=iw),s||(s=[]);++o<a;){var l=e[o];n>0&&r(l)?n>1?nq(l,n-1,r,i,s):ty(s,l):i||(s[s.length]=l)}return s}var nW=rX(),nX=rX(!0);function nU(e,n){return e&&nW(e,n,om)}function nY(e,n){return e&&nX(e,n,om)}function nG(e,n){return tp(n,function(n){return sW(e[n])})}function nH(e,n){n=rD(n,e);for(var r=0,s=n.length;null!=e&&r<s;)e=e[iV(n[r++])];return r&&r==s?e:i}function nK(e,n,r){var i=n(e);return sj(e)?i:ty(i,r(e))}function nJ(e){var n;return null==e?i===e?"[object Undefined]":"[object Null]":e7&&e7 in ek(e)?function(e){var n=eI.call(e,e7),r=e[e7];try{e[e7]=i;var s=!0}catch(e){}var o=eL.call(e);return s&&(n?e[e7]=r:delete e[e7]),o}(e):(n=e,eL.call(n))}function n0(e,n){return e>n}function n1(e,n){return null!=e&&eI.call(e,n)}function n2(e,n){return null!=e&&n in ek(e)}function n5(e,n,r){for(var s=r?tg:tf,o=e[0].length,a=e.length,l=a,h=eb(a),c=1/0,u=[];l--;){var d=e[l];l&&n&&(d=tm(d,tI(n))),c=t3(d.length,c),h[l]=!r&&(n||o>=120&&d.length>=120)?new n_(l&&d):i}d=e[0];var p=-1,f=h[0];r:for(;++p<o&&u.length<c;){var g=d[p],m=n?n(g):g;if(g=r||0!==g?g:0,!(f?tR(f,m):s(u,m,r))){for(l=a;--l;){var y=h[l];if(!(y?tR(y,m):s(e[l],m,r)))continue r}f&&f.push(m),u.push(g)}}return u}function n4(e,n,r){n=rD(n,e);var s=null==(e=iM(e,n))?e:e[iV(iJ(n))];return null==s?i:th(s,e,r)}function n3(e){return sG(e)&&nJ(e)==u}function n6(e,n,r,s,o){return e===n||(null!=e&&null!=n&&(sG(e)||sG(n))?function(e,n,r,s,o,a){var l=sj(e),h=sj(n),c=l?d:iv(e),m=h?d:iv(n);c=c==u?x:c,m=m==u?x:m;var y=c==x,w=m==x,E=c==m;if(E&&sF(e)){if(!sF(n))return!1;l=!0,y=!1}if(E&&!y)return a||(a=new nk),l||s4(e)?is(e,n,r,s,o,a):function(e,n,r,i,s,o,a){switch(r){case P:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)break;e=e.buffer,n=n.buffer;case T:if(e.byteLength!=n.byteLength||!o(new eF(e),new eF(n)))break;return!0;case p:case f:case b:return s$(+e,+n);case g:return e.name==n.name&&e.message==n.message;case S:case k:return e==n+"";case O:var l=tF;case _:var h=1&i;if(l||(l=tW),e.size!=n.size&&!h)break;var c=a.get(e);if(c)return c==n;i|=2,a.set(e,n);var u=is(l(e),l(n),i,s,o,a);return a.delete(e),u;case C:if(nf)return nf.call(e)==nf.call(n)}return!1}(e,n,c,r,s,o,a);if(!(1&r)){var A=y&&eI.call(e,"__wrapped__"),M=w&&eI.call(n,"__wrapped__");if(A||M){var N=A?e.value():e,D=M?n.value():n;return a||(a=new nk),o(N,D,r,s,a)}}return!!E&&(a||(a=new nk),function(e,n,r,s,o,a){var l=1&r,h=ia(e),c=h.length;if(c!=ia(n).length&&!l)return!1;for(var u=c;u--;){var d=h[u];if(!(l?d in n:eI.call(n,d)))return!1}var p=a.get(e),f=a.get(n);if(p&&f)return p==n&&f==e;var g=!0;a.set(e,n),a.set(n,e);for(var m=l;++u<c;){var y=e[d=h[u]],O=n[d];if(s)var b=l?s(O,y,d,n,e,a):s(y,O,d,e,n,a);if(!(i===b?y===O||o(y,O,r,s,a):b)){g=!1;break}m||(m="constructor"==d)}if(g&&!m){var x=e.constructor,w=n.constructor;x!=w&&"constructor"in e&&"constructor"in n&&!("function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w)&&(g=!1)}return a.delete(e),a.delete(n),g}(e,n,r,s,o,a))}(e,n,r,s,n6,o):e!=e&&n!=n)}function n9(e,n,r,s){var o=r.length,a=o,l=!s;if(null==e)return!a;for(e=ek(e);o--;){var h=r[o];if(l&&h[2]?h[1]!==e[h[0]]:!(h[0]in e))return!1}for(;++o<a;){var c=(h=r[o])[0],u=e[c],d=h[1];if(l&&h[2]){if(i===u&&!(c in e))return!1}else{var p=new nk;if(s)var f=s(u,d,c,e,n,p);if(!(i===f?n6(d,u,3,s,p):f))return!1}}return!0}function n7(e){var n;return!(!sY(e)||(n=e,eR&&eR in n))&&(sW(e)?eV:ed).test(iz(e))}function n8(e){return"function"==typeof e?e:null==e?oB:"object"==typeof e?sj(e)?ri(e[0],e[1]):rr(e):oH(e)}function re(e){if(!iT(e))return t5(e);var n=[];for(var r in ek(e))eI.call(e,r)&&"constructor"!=r&&n.push(r);return n}function rt(e,n){return e<n}function rn(e,n){var r=-1,i=sz(e)?eb(e.length):[];return nV(e,function(e,s,o){i[++r]=n(e,s,o)}),i}function rr(e){var n=ig(e);return 1==n.length&&n[0][2]?iP(n[0][0],n[0][1]):function(r){return r===e||n9(r,e,n)}}function ri(e,n){var r;return ik(e)&&(r=n)==r&&!sY(r)?iP(iV(e),n):function(r){var s=ou(r,e);return i===s&&s===n?od(r,e):n6(n,s,3)}}function rs(e,n,r,s,o){e!==n&&nW(n,function(a,l){if(o||(o=new nk),sY(a))!function(e,n,r,s,o,a,l){var h=iN(e,r),c=iN(n,r),u=l.get(c);if(u)return nT(e,r,u);var d=a?a(h,c,r+"",e,n,l):i,p=i===d;if(p){var f=sj(c),g=!f&&sF(c),m=!f&&!g&&s4(c);d=c,f||g||m?sj(h)?d=h:sB(h)?d=rB(h):g?(p=!1,d=rR(c,!0)):m?(p=!1,d=rQ(c,!0)):d=[]:sJ(c)||sQ(c)?(d=h,sQ(h)?d=on(h):(!sY(h)||sW(h))&&(d=ix(c))):p=!1}p&&(l.set(c,d),o(d,c,s,a,l),l.delete(c)),nT(e,r,d)}(e,n,l,r,rs,s,o);else{var h=s?s(iN(e,l),a,l+"",e,n,o):i;i===h&&(h=a),nT(e,l,h)}},oy)}function ro(e,n){var r=e.length;if(r)return iS(n+=n<0?r:0,r)?e[n]:i}function ra(e,n,r){n=n.length?tm(n,function(e){return sj(e)?function(n){return nH(n,1===e.length?e[0]:e)}:e}):[oB];var i=-1;n=tm(n,tI(id()));var s=rn(e,function(e,r,s){return{criteria:tm(n,function(n){return n(e)}),index:++i,value:e}}),o=s.length;for(s.sort(function(e,n){return function(e,n,r){for(var i=-1,s=e.criteria,o=n.criteria,a=s.length,l=r.length;++i<a;){var h=rj(s[i],o[i]);if(h){if(i>=l)return h;return h*("desc"==r[i]?-1:1)}}return e.index-n.index}(e,n,r)});o--;)s[o]=s[o].value;return s}function rl(e,n,r){for(var i=-1,s=n.length,o={};++i<s;){var a=n[i],l=nH(e,a);r(l,a)&&rf(o,rD(a,e),l)}return o}function rh(e,n,r,i){var s=i?tk:t_,o=-1,a=n.length,l=e;for(e===n&&(n=rB(n)),r&&(l=tm(e,tI(r)));++o<a;)for(var h=0,c=n[o],u=r?r(c):c;(h=s(l,u,h,i))>-1;)l!==e&&e2.call(l,h,1),e2.call(e,h,1);return e}function rc(e,n){for(var r=e?n.length:0,i=r-1;r--;){var s=n[r];if(r==i||s!==o){var o=s;iS(s)?e2.call(e,s,1):rk(e,s)}}return e}function ru(e,n){return e+tK(t7()*(n-e+1))}function rd(e,n){var r="";if(!e||n<1||n>0x1fffffffffffff)return r;do n%2&&(r+=e),(n=tK(n/2))&&(e+=e);while(n);return r}function rp(e,n){return i$(iA(e,n,oB),e+"")}function rf(e,n,r,s){if(!sY(e))return e;n=rD(n,e);for(var o=-1,a=n.length,l=a-1,h=e;null!=h&&++o<a;){var c=iV(n[o]),u=r;if("__proto__"===c||"constructor"===c||"prototype"===c)break;if(o!=l){var d=h[c];u=s?s(d,c,h):i,i===u&&(u=sY(d)?d:iS(n[o+1])?[]:{})}nP(h,c,u),h=h[c]}return e}var rg=no?function(e,n){return no.set(e,n),e}:oB,rm=e8?function(e,n){return e8(e,"toString",{configurable:!0,enumerable:!1,value:oj(n),writable:!0})}:oB;function ry(e,n,r){var i=-1,s=e.length;n<0&&(n=-n>s?0:s+n),(r=r>s?s:r)<0&&(r+=s),s=n>r?0:r-n>>>0,n>>>=0;for(var o=eb(s);++i<s;)o[i]=e[i+n];return o}function rO(e,n){var r;return nV(e,function(e,i,s){return!(r=n(e,i,s))}),!!r}function rv(e,n,r){var i=0,s=null==e?i:e.length;if("number"==typeof n&&n==n&&s<=0x7fffffff){for(;i<s;){var o=i+s>>>1,a=e[o];null!==a&&!s5(a)&&(r?a<=n:a<n)?i=o+1:s=o}return s}return rb(e,n,oB,r)}function rb(e,n,r,s){var o=0,a=null==e?0:e.length;if(0===a)return 0;for(var l=(n=r(n))!=n,h=null===n,c=s5(n),u=i===n;o<a;){var d=tK((o+a)/2),p=r(e[d]),f=i!==p,g=null===p,m=p==p,y=s5(p);if(l)var O=s||m;else O=u?m&&(s||f):h?m&&f&&(s||!g):c?m&&f&&!g&&(s||!y):!g&&!y&&(s?p<=n:p<n);O?o=d+1:a=d}return t3(a,0xfffffffe)}function rx(e,n){for(var r=-1,i=e.length,s=0,o=[];++r<i;){var a=e[r],l=n?n(a):a;if(!r||!s$(l,h)){var h=l;o[s++]=0===a?0:a}}return o}function rw(e){return"number"==typeof e?e:s5(e)?h:+e}function rS(e){if("string"==typeof e)return e;if(sj(e))return tm(e,rS)+"";if(s5(e))return ng?ng.call(e):"";var n=e+"";return"0"==n&&1/e==-l?"-0":n}function r_(e,n,r){var i=-1,s=tf,o=e.length,a=!0,l=[],h=l;if(r)a=!1,s=tg;else if(o>=200){var c=n?null:r7(e);if(c)return tW(c);a=!1,s=tR,h=new n_}else h=n?[]:l;r:for(;++i<o;){var u=e[i],d=n?n(u):u;if(u=r||0!==u?u:0,a&&d==d){for(var p=h.length;p--;)if(h[p]===d)continue r;n&&h.push(d),l.push(u)}else s(h,d,r)||(h!==l&&h.push(d),l.push(u))}return l}function rk(e,n){return n=rD(n,e),null==(e=iM(e,n))||delete e[iV(iJ(n))]}function rC(e,n,r,i){return rf(e,n,r(nH(e,n)),i)}function rE(e,n,r,i){for(var s=e.length,o=i?s:-1;(i?o--:++o<s)&&n(e[o],o,e););return r?ry(e,i?0:o,i?o+1:s):ry(e,i?o+1:0,i?s:o)}function rT(e,n){var r=e;return r instanceof nb&&(r=r.value()),tO(n,function(e,n){return n.func.apply(n.thisArg,ty([e],n.args))},r)}function rP(e,n,r){var i=e.length;if(i<2)return i?r_(e[0]):[];for(var s=-1,o=eb(i);++s<i;)for(var a=e[s],l=-1;++l<i;)l!=s&&(o[s]=nj(o[s]||a,e[l],n,r));return r_(nq(o,1),n,r)}function rA(e,n,r){for(var s=-1,o=e.length,a=n.length,l={};++s<o;){var h=s<a?n[s]:i;r(l,e[s],h)}return l}function rM(e){return sB(e)?e:[]}function rN(e){return"function"==typeof e?e:oB}function rD(e,n){return sj(e)?e:ik(e,n)?[e]:ij(or(e))}function rI(e,n,r){var s=e.length;return r=i===r?s:r,!n&&r>=s?e:ry(e,n,r)}var r$=tt||function(e){return e9.clearTimeout(e)};function rR(e,n){if(n)return e.slice();var r=e.length,i=eZ?eZ(r):new e.constructor(r);return e.copy(i),i}function rL(e){var n=new e.constructor(e.byteLength);return new eF(n).set(new eF(e)),n}function rQ(e,n){var r=n?rL(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function rj(e,n){if(e!==n){var r=i!==e,s=null===e,o=e==e,a=s5(e),l=i!==n,h=null===n,c=n==n,u=s5(n);if(!h&&!u&&!a&&e>n||a&&l&&c&&!h&&!u||s&&l&&c||!r&&c||!o)return 1;if(!s&&!a&&!u&&e<n||u&&r&&o&&!s&&!a||h&&r&&o||!l&&o||!c)return -1}return 0}function rV(e,n,r,i){for(var s=-1,o=e.length,a=r.length,l=-1,h=n.length,c=t4(o-a,0),u=eb(h+c),d=!i;++l<h;)u[l]=n[l];for(;++s<a;)(d||s<o)&&(u[r[s]]=e[s]);for(;c--;)u[l++]=e[s++];return u}function rz(e,n,r,i){for(var s=-1,o=e.length,a=-1,l=r.length,h=-1,c=n.length,u=t4(o-l,0),d=eb(u+c),p=!i;++s<u;)d[s]=e[s];for(var f=s;++h<c;)d[f+h]=n[h];for(;++a<l;)(p||s<o)&&(d[f+r[a]]=e[s++]);return d}function rB(e,n){var r=-1,i=e.length;for(n||(n=eb(i));++r<i;)n[r]=e[r];return n}function rF(e,n,r,s){var o=!r;r||(r={});for(var a=-1,l=n.length;++a<l;){var h=n[a],c=s?s(r[h],e[h],h,r,e):i;i===c&&(c=e[h]),o?nD(r,h,c):nP(r,h,c)}return r}function rZ(e,n){return function(r,i){var s=sj(r)?tc:nM,o=n?n():{};return s(r,e,id(i,2),o)}}function rq(e){return rp(function(n,r){var s=-1,o=r.length,a=o>1?r[o-1]:i,l=o>2?r[2]:i;for(a=e.length>3&&"function"==typeof a?(o--,a):i,l&&i_(r[0],r[1],l)&&(a=o<3?i:a,o=1),n=ek(n);++s<o;){var h=r[s];h&&e(n,h,s,a)}return n})}function rW(e,n){return function(r,i){if(null==r)return r;if(!sz(r))return e(r,i);for(var s=r.length,o=n?s:-1,a=ek(r);(n?o--:++o<s)&&!1!==i(a[o],o,a););return r}}function rX(e){return function(n,r,i){for(var s=-1,o=ek(n),a=i(n),l=a.length;l--;){var h=a[e?l:++s];if(!1===r(o[h],h,o))break}return n}}function rU(e){return function(n){var r=tB(n=or(n))?tU(n):i,s=r?r[0]:n.charAt(0),o=r?rI(r,1).join(""):n.slice(1);return s[e]()+o}}function rY(e){return function(n){return tO(oR(oT(n).replace(eW,"")),e,"")}}function rG(e){return function(){var n=arguments;switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3]);case 5:return new e(n[0],n[1],n[2],n[3],n[4]);case 6:return new e(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new e(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var r=ny(e.prototype),i=e.apply(r,n);return sY(i)?i:r}}function rH(e){return function(n,r,s){var o=ek(n);if(!sz(n)){var a=id(r,3);n=om(n),r=function(e){return a(o[e],e,o)}}var l=e(n,r,s);return l>-1?o[a?n[l]:l]:i}}function rK(e){return io(function(n){var r=n.length,o=r,a=nv.prototype.thru;for(e&&n.reverse();o--;){var l=n[o];if("function"!=typeof l)throw new eT(s);if(a&&!h&&"wrapper"==ic(l))var h=new nv([],!0)}for(o=h?o:r;++o<r;){var c=ic(l=n[o]),u="wrapper"==c?ih(l):i;h=u&&iC(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?h[ic(u[0])].apply(h,u[3]):1==l.length&&iC(l)?h[c]():h.thru(l)}return function(){var e=arguments,i=e[0];if(h&&1==e.length&&sj(i))return h.plant(i).value();for(var s=0,o=r?n[s].apply(this,e):i;++s<r;)o=n[s].call(this,o);return o}})}function rJ(e,n,r,s,o,a,l,h,c,u){var d=128&n,p=1&n,f=2&n,g=24&n,m=512&n,y=f?i:rG(e);function O(){for(var b=arguments.length,x=eb(b),w=b;w--;)x[w]=arguments[w];if(g)var S=iu(O),_=function(e,n){for(var r=e.length,i=0;r--;)e[r]===n&&++i;return i}(x,S);if(s&&(x=rV(x,s,o,g)),a&&(x=rz(x,a,l,g)),b-=_,g&&b<u){var k=tq(x,S);return r6(e,n,rJ,O.placeholder,r,x,k,h,c,u-b)}var C=p?r:this,E=f?C[e]:e;return b=x.length,h?x=function(e,n){for(var r=e.length,s=t3(n.length,r),o=rB(e);s--;){var a=n[s];e[s]=iS(a,r)?o[a]:i}return e}(x,h):m&&b>1&&x.reverse(),d&&c<b&&(x.length=c),this&&this!==e9&&this instanceof O&&(E=y||rG(E)),E.apply(C,x)}return O}function r0(e,n){return function(r,i){var s,o;return s=n(i),o={},nU(r,function(n,r,i){e(o,s(n),r,i)}),o}}function r1(e,n){return function(r,s){var o;if(i===r&&i===s)return n;if(i!==r&&(o=r),i!==s){if(i===o)return s;"string"==typeof r||"string"==typeof s?(r=rS(r),s=rS(s)):(r=rw(r),s=rw(s)),o=e(r,s)}return o}}function r2(e){return io(function(n){return n=tm(n,tI(id())),rp(function(r){var i=this;return e(n,function(e){return th(e,i,r)})})})}function r5(e,n){var r=(n=i===n?" ":rS(n)).length;if(r<2)return r?rd(n,e):n;var s=rd(n,tP(e/tX(n)));return tB(n)?rI(tU(s),0,e).join(""):s.slice(0,e)}function r4(e){return function(n,r,s){s&&"number"!=typeof s&&i_(n,r,s)&&(r=s=i),n=s7(n),i===r?(r=n,n=0):r=s7(r),s=i===s?n<r?1:-1:s7(s);for(var o=n,a=r,l=s,h=-1,c=t4(tP((a-o)/(l||1)),0),u=eb(c);c--;)u[e?c:++h]=o,o+=l;return u}}function r3(e){return function(n,r){return("string"!=typeof n||"string"!=typeof r)&&(n=ot(n),r=ot(r)),e(n,r)}}function r6(e,n,r,s,o,a,l,h,c,u){var d=8&n,p=d?l:i,f=d?i:l,g=d?a:i,m=d?i:a;n|=d?32:64,4&(n&=~(d?64:32))||(n&=-4);var y=[e,n,o,g,p,m,f,h,c,u],O=r.apply(i,y);return iC(e)&&iD(O,y),O.placeholder=s,iR(O,e,n)}function r9(e){var n=e_[e];return function(e,r){if(e=ot(e),(r=null==r?0:t3(s8(r),292))&&t1(e)){var i=(or(e)+"e").split("e");return+((i=(or(n(i[0]+"e"+(+i[1]+r)))+"e").split("e"))[0]+"e"+(i[1]-r))}return n(e)}}var r7=nr&&1/tW(new nr([,-0]))[1]==l?function(e){return new nr(e)}:oX;function r8(e){return function(n){var r,i,s=iv(n);return s==O?tF(n):s==_?(r=-1,i=Array(n.size),n.forEach(function(e){i[++r]=[e,e]}),i):tm(e(n),function(e){return[e,n[e]]})}}function ie(e,n,r,o,l,h,c,u){var d=2&n;if(!d&&"function"!=typeof e)throw new eT(s);var p=o?o.length:0;if(p||(n&=-97,o=l=i),c=i===c?c:t4(s8(c),0),u=i===u?u:s8(u),p-=l?l.length:0,64&n){var f=o,g=l;o=l=i}var m=d?i:ih(e),y=[e,n,r,o,l,f,g,h,c,u];if(m&&function(e,n){var r=e[1],i=n[1],s=r|i,o=s<131,l=128==i&&8==r||128==i&&256==r&&e[7].length<=n[8]||384==i&&n[7].length<=n[8]&&8==r;if(o||l){1&i&&(e[2]=n[2],s|=1&r?0:4);var h=n[3];if(h){var c=e[3];e[3]=c?rV(c,h,n[4]):h,e[4]=c?tq(e[3],a):n[4]}(h=n[5])&&(c=e[5],e[5]=c?rz(c,h,n[6]):h,e[6]=c?tq(e[5],a):n[6]),(h=n[7])&&(e[7]=h),128&i&&(e[8]=null==e[8]?n[8]:t3(e[8],n[8])),null==e[9]&&(e[9]=n[9]),e[0]=n[0],e[1]=s}}(y,m),e=y[0],n=y[1],r=y[2],o=y[3],l=y[4],(u=y[9]=y[9]===i?d?0:e.length:t4(y[9]-p,0))||!(24&n)||(n&=-25),n&&1!=n)8==n||16==n?A=function(e,n,r){var s=rG(e);function o(){for(var a=arguments.length,l=eb(a),h=a,c=iu(o);h--;)l[h]=arguments[h];var u=a<3&&l[0]!==c&&l[a-1]!==c?[]:tq(l,c);return(a-=u.length)<r?r6(e,n,rJ,o.placeholder,i,l,u,i,i,r-a):th(this&&this!==e9&&this instanceof o?s:e,this,l)}return o}(e,n,u):32!=n&&33!=n||l.length?A=rJ.apply(i,y):(O=e,b=n,x=r,w=o,S=1&b,_=rG(O),A=function e(){for(var n=-1,r=arguments.length,i=-1,s=w.length,o=eb(s+r),a=this&&this!==e9&&this instanceof e?_:O;++i<s;)o[i]=w[i];for(;r--;)o[i++]=arguments[++n];return th(a,S?x:this,o)});else var O,b,x,w,S,_,k,C,E,T,P,A=(k=e,C=n,E=r,T=1&C,P=rG(k),function e(){return(this&&this!==e9&&this instanceof e?P:k).apply(T?E:this,arguments)});return iR((m?rg:iD)(A,y),e,n)}function it(e,n,r,s){return i===e||s$(e,eM[r])&&!eI.call(s,r)?n:e}function ir(e,n,r,s,o,a){return sY(e)&&sY(n)&&(a.set(n,e),rs(e,n,i,ir,a),a.delete(n)),e}function ii(e){return sJ(e)?i:e}function is(e,n,r,s,o,a){var l=1&r,h=e.length,c=n.length;if(h!=c&&!(l&&c>h))return!1;var u=a.get(e),d=a.get(n);if(u&&d)return u==n&&d==e;var p=-1,f=!0,g=2&r?new n_:i;for(a.set(e,n),a.set(n,e);++p<h;){var m=e[p],y=n[p];if(s)var O=l?s(y,m,p,n,e,a):s(m,y,p,e,n,a);if(i!==O){if(O)continue;f=!1;break}if(g){if(!tb(n,function(e,n){if(!tR(g,n)&&(m===e||o(m,e,r,s,a)))return g.push(n)})){f=!1;break}}else if(!(m===y||o(m,y,r,s,a))){f=!1;break}}return a.delete(e),a.delete(n),f}function io(e){return i$(iA(e,i,iU),e+"")}function ia(e){return nK(e,om,iy)}function il(e){return nK(e,oy,iO)}var ih=no?function(e){return no.get(e)}:oX;function ic(e){for(var n=e.name+"",r=na[n],i=eI.call(na,n)?r.length:0;i--;){var s=r[i],o=s.func;if(null==o||o==e)return s.name}return n}function iu(e){return(eI.call(nm,"placeholder")?nm:e).placeholder}function id(){var e=nm.iteratee||oF;return e=e===oF?n8:e,arguments.length?e(arguments[0],arguments[1]):e}function ip(e,n){var r,i,s=e.__data__;return("string"==(i=typeof(r=n))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==r:null===r)?s["string"==typeof n?"string":"hash"]:s.map}function ig(e){for(var n=om(e),r=n.length;r--;){var i,s=n[r],o=e[s];n[r]=[s,o,(i=o)==i&&!sY(i)]}return n}function im(e,n){var r=null==e?i:e[n];return n7(r)?r:i}var iy=tJ?function(e){return null==e?[]:tp(tJ(e=ek(e)),function(n){return eG.call(e,n)})}:o0,iO=tJ?function(e){for(var n=[];e;)ty(n,iy(e)),e=eq(e);return n}:o0,iv=nJ;function ib(e,n,r){n=rD(n,e);for(var i=-1,s=n.length,o=!1;++i<s;){var a=iV(n[i]);if(!(o=null!=e&&r(e,a)))break;e=e[a]}return o||++i!=s?o:!!(s=null==e?0:e.length)&&sU(s)&&iS(a,s)&&(sj(e)||sQ(e))}function ix(e){return"function"!=typeof e.constructor||iT(e)?{}:ny(eq(e))}function iw(e){return sj(e)||sQ(e)||!!(e3&&e&&e[e3])}function iS(e,n){var r=typeof e;return!!(n=null==n?0x1fffffffffffff:n)&&("number"==r||"symbol"!=r&&ef.test(e))&&e>-1&&e%1==0&&e<n}function i_(e,n,r){if(!sY(r))return!1;var i=typeof n;return("number"==i?!!(sz(r)&&iS(n,r.length)):"string"==i&&n in r)&&s$(r[n],e)}function ik(e,n){if(sj(e))return!1;var r=typeof e;return!!("number"==r||"symbol"==r||"boolean"==r||null==e||s5(e))||G.test(e)||!Y.test(e)||null!=n&&e in ek(n)}function iC(e){var n=ic(e),r=nm[n];if("function"!=typeof r||!(n in nb.prototype))return!1;if(e===r)return!0;var i=ih(r);return!!i&&e===i[0]}(ne&&iv(new ne(new ArrayBuffer(1)))!=P||nt&&iv(new nt)!=O||nn&&iv(nn.resolve())!=w||nr&&iv(new nr)!=_||ni&&iv(new ni)!=E)&&(iv=function(e){var n=nJ(e),r=n==x?e.constructor:i,s=r?iz(r):"";if(s)switch(s){case nl:return P;case nh:return O;case nc:return w;case nu:return _;case nd:return E}return n});var iE=eN?sW:o1;function iT(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||eM)}function iP(e,n){return function(r){return null!=r&&r[e]===n&&(i!==n||e in ek(r))}}function iA(e,n,r){return n=t4(i===n?e.length-1:n,0),function(){for(var i=arguments,s=-1,o=t4(i.length-n,0),a=eb(o);++s<o;)a[s]=i[n+s];s=-1;for(var l=eb(n+1);++s<n;)l[s]=i[s];return l[n]=r(a),th(e,this,l)}}function iM(e,n){return n.length<2?e:nH(e,ry(n,0,-1))}function iN(e,n){if(("constructor"!==n||"function"!=typeof e[n])&&"__proto__"!=n)return e[n]}var iD=iL(rg),iI=tx||function(e,n){return e9.setTimeout(e,n)},i$=iL(rm);function iR(e,n,r){var i,s,o,a=n+"";return i$(e,function(e,n){var r=n.length;if(!r)return e;var i=r-1;return n[i]=(r>1?"& ":"")+n[i],n=n.join(r>2?", ":" "),e.replace(en,"{\n/* [wrapped with "+n+"] */\n")}(a,(i=(o=a.match(er))?o[1].split(ei):[],s=r,tu(c,function(e){var n="_."+e[0];s&e[1]&&!tf(i,n)&&i.push(n)}),i.sort())))}function iL(e){var n=0,r=0;return function(){var s=t6(),o=16-(s-r);if(r=s,o>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(i,arguments)}}function iQ(e,n){var r=-1,s=e.length,o=s-1;for(n=i===n?s:n;++r<n;){var a=ru(r,o),l=e[a];e[a]=e[r],e[r]=l}return e.length=n,e}var ij=(eO=(et=sP(function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(H,function(e,r,i,s){n.push(i?s.replace(ea,"$1"):r||e)}),n},function(e){return 500===eO.size&&eO.clear(),e})).cache,et);function iV(e){if("string"==typeof e||s5(e))return e;var n=e+"";return"0"==n&&1/e==-l?"-0":n}function iz(e){if(null!=e){try{return eD.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function iB(e){if(e instanceof nb)return e.clone();var n=new nv(e.__wrapped__,e.__chain__);return n.__actions__=rB(e.__actions__),n.__index__=e.__index__,n.__values__=e.__values__,n}var iF=rp(function(e,n){return sB(e)?nj(e,nq(n,1,sB,!0)):[]}),iZ=rp(function(e,n){var r=iJ(n);return sB(r)&&(r=i),sB(e)?nj(e,nq(n,1,sB,!0),id(r,2)):[]}),iq=rp(function(e,n){var r=iJ(n);return sB(r)&&(r=i),sB(e)?nj(e,nq(n,1,sB,!0),i,r):[]});function iW(e,n,r){var i=null==e?0:e.length;if(!i)return -1;var s=null==r?0:s8(r);return s<0&&(s=t4(i+s,0)),tS(e,id(n,3),s)}function iX(e,n,r){var s=null==e?0:e.length;if(!s)return -1;var o=s-1;return i!==r&&(o=s8(r),o=r<0?t4(s+o,0):t3(o,s-1)),tS(e,id(n,3),o,!0)}function iU(e){return(null==e?0:e.length)?nq(e,1):[]}function iY(e){return e&&e.length?e[0]:i}var iG=rp(function(e){var n=tm(e,rM);return n.length&&n[0]===e[0]?n5(n):[]}),iH=rp(function(e){var n=iJ(e),r=tm(e,rM);return n===iJ(r)?n=i:r.pop(),r.length&&r[0]===e[0]?n5(r,id(n,2)):[]}),iK=rp(function(e){var n=iJ(e),r=tm(e,rM);return(n="function"==typeof n?n:i)&&r.pop(),r.length&&r[0]===e[0]?n5(r,i,n):[]});function iJ(e){var n=null==e?0:e.length;return n?e[n-1]:i}var i0=rp(i1);function i1(e,n){return e&&e.length&&n&&n.length?rh(e,n):e}var i2=io(function(e,n){var r=null==e?0:e.length,i=nI(e,n);return rc(e,tm(n,function(e){return iS(e,r)?+e:e}).sort(rj)),i});function i5(e){return null==e?e:t8.call(e)}var i4=rp(function(e){return r_(nq(e,1,sB,!0))}),i3=rp(function(e){var n=iJ(e);return sB(n)&&(n=i),r_(nq(e,1,sB,!0),id(n,2))}),i6=rp(function(e){var n=iJ(e);return n="function"==typeof n?n:i,r_(nq(e,1,sB,!0),i,n)});function i9(e){if(!(e&&e.length))return[];var n=0;return e=tp(e,function(e){if(sB(e))return n=t4(e.length,n),!0}),tN(n,function(n){return tm(e,tT(n))})}function i7(e,n){if(!(e&&e.length))return[];var r=i9(e);return null==n?r:tm(r,function(e){return th(n,i,e)})}var i8=rp(function(e,n){return sB(e)?nj(e,n):[]}),se=rp(function(e){return rP(tp(e,sB))}),st=rp(function(e){var n=iJ(e);return sB(n)&&(n=i),rP(tp(e,sB),id(n,2))}),sn=rp(function(e){var n=iJ(e);return n="function"==typeof n?n:i,rP(tp(e,sB),i,n)}),sr=rp(i9),si=rp(function(e){var n=e.length,r=n>1?e[n-1]:i;return r="function"==typeof r?(e.pop(),r):i,i7(e,r)});function ss(e){var n=nm(e);return n.__chain__=!0,n}function so(e,n){return n(e)}var sa=io(function(e){var n=e.length,r=n?e[0]:0,s=this.__wrapped__,o=function(n){return nI(n,e)};return!(n>1)&&!this.__actions__.length&&s instanceof nb&&iS(r)?((s=s.slice(r,+r+ +!!n)).__actions__.push({func:so,args:[o],thisArg:i}),new nv(s,this.__chain__).thru(function(e){return n&&!e.length&&e.push(i),e})):this.thru(o)}),sl=rZ(function(e,n,r){eI.call(e,r)?++e[r]:nD(e,r,1)}),sh=rH(iW),sc=rH(iX);function su(e,n){return(sj(e)?tu:nV)(e,id(n,3))}function sd(e,n){return(sj(e)?function(e,n){for(var r=null==e?0:e.length;r--&&!1!==n(e[r],r,e););return e}:nz)(e,id(n,3))}var sp=rZ(function(e,n,r){eI.call(e,r)?e[r].push(n):nD(e,r,[n])}),sf=rp(function(e,n,r){var i=-1,s="function"==typeof n,o=sz(e)?eb(e.length):[];return nV(e,function(e){o[++i]=s?th(n,e,r):n4(e,n,r)}),o}),sg=rZ(function(e,n,r){nD(e,r,n)});function sm(e,n){return(sj(e)?tm:rn)(e,id(n,3))}var sy=rZ(function(e,n,r){e[+!r].push(n)},function(){return[[],[]]}),sO=rp(function(e,n){if(null==e)return[];var r=n.length;return r>1&&i_(e,n[0],n[1])?n=[]:r>2&&i_(n[0],n[1],n[2])&&(n=[n[0]]),ra(e,nq(n,1),[])}),sv=tn||function(){return e9.Date.now()};function sb(e,n,r){return n=r?i:n,n=e&&null==n?e.length:n,ie(e,128,i,i,i,i,n)}function sx(e,n){var r;if("function"!=typeof n)throw new eT(s);return e=s8(e),function(){return--e>0&&(r=n.apply(this,arguments)),e<=1&&(n=i),r}}var sw=rp(function(e,n,r){var i=1;if(r.length){var s=tq(r,iu(sw));i|=32}return ie(e,i,n,r,s)}),sS=rp(function(e,n,r){var i=3;if(r.length){var s=tq(r,iu(sS));i|=32}return ie(n,i,e,r,s)});function s_(e,n,r){n=r?i:n;var s=ie(e,8,i,i,i,i,i,n);return s.placeholder=s_.placeholder,s}function sk(e,n,r){n=r?i:n;var s=ie(e,16,i,i,i,i,i,n);return s.placeholder=sk.placeholder,s}function sC(e,n,r){var o,a,l,h,c,u,d=0,p=!1,f=!1,g=!0;if("function"!=typeof e)throw new eT(s);function m(n){var r=o,s=a;return o=a=i,d=n,h=e.apply(s,r)}function y(e){var r=e-u,s=e-d;return i===u||r>=n||r<0||f&&s>=l}function O(){var e,r,i,s=sv();if(y(s))return b(s);c=iI(O,(e=s-u,r=s-d,i=n-e,f?t3(i,l-r):i))}function b(e){return(c=i,g&&o)?m(e):(o=a=i,h)}function x(){var e,r=sv(),s=y(r);if(o=arguments,a=this,u=r,s){if(i===c)return d=e=u,c=iI(O,n),p?m(e):h;if(f)return r$(c),c=iI(O,n),m(u)}return i===c&&(c=iI(O,n)),h}return n=ot(n)||0,sY(r)&&(p=!!r.leading,l=(f="maxWait"in r)?t4(ot(r.maxWait)||0,n):l,g="trailing"in r?!!r.trailing:g),x.cancel=function(){i!==c&&r$(c),d=0,o=u=a=c=i},x.flush=function(){return i===c?h:b(sv())},x}var sE=rp(function(e,n){return nQ(e,1,n)}),sT=rp(function(e,n,r){return nQ(e,ot(n)||0,r)});function sP(e,n){if("function"!=typeof e||null!=n&&"function"!=typeof n)throw new eT(s);var r=function(){var i=arguments,s=n?n.apply(this,i):i[0],o=r.cache;if(o.has(s))return o.get(s);var a=e.apply(this,i);return r.cache=o.set(s,a)||o,a};return r.cache=new(sP.Cache||nS),r}function sA(e){if("function"!=typeof e)throw new eT(s);return function(){var n=arguments;switch(n.length){case 0:return!e.call(this);case 1:return!e.call(this,n[0]);case 2:return!e.call(this,n[0],n[1]);case 3:return!e.call(this,n[0],n[1],n[2])}return!e.apply(this,n)}}sP.Cache=nS;var sM=rp(function(e,n){var r=(n=1==n.length&&sj(n[0])?tm(n[0],tI(id())):tm(nq(n,1),tI(id()))).length;return rp(function(i){for(var s=-1,o=t3(i.length,r);++s<o;)i[s]=n[s].call(this,i[s]);return th(e,this,i)})}),sN=rp(function(e,n){var r=tq(n,iu(sN));return ie(e,32,i,n,r)}),sD=rp(function(e,n){var r=tq(n,iu(sD));return ie(e,64,i,n,r)}),sI=io(function(e,n){return ie(e,256,i,i,i,n)});function s$(e,n){return e===n||e!=e&&n!=n}var sR=r3(n0),sL=r3(function(e,n){return e>=n}),sQ=n3(function(){return arguments}())?n3:function(e){return sG(e)&&eI.call(e,"callee")&&!eG.call(e,"callee")},sj=eb.isArray,sV=tr?tI(tr):function(e){return sG(e)&&nJ(e)==T};function sz(e){return null!=e&&sU(e.length)&&!sW(e)}function sB(e){return sG(e)&&sz(e)}var sF=t0||o1,sZ=ti?tI(ti):function(e){return sG(e)&&nJ(e)==f};function sq(e){if(!sG(e))return!1;var n=nJ(e);return n==g||"[object DOMException]"==n||"string"==typeof e.message&&"string"==typeof e.name&&!sJ(e)}function sW(e){if(!sY(e))return!1;var n=nJ(e);return n==m||n==y||"[object AsyncFunction]"==n||"[object Proxy]"==n}function sX(e){return"number"==typeof e&&e==s8(e)}function sU(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=0x1fffffffffffff}function sY(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}function sG(e){return null!=e&&"object"==typeof e}var sH=ts?tI(ts):function(e){return sG(e)&&iv(e)==O};function sK(e){return"number"==typeof e||sG(e)&&nJ(e)==b}function sJ(e){if(!sG(e)||nJ(e)!=x)return!1;var n=eq(e);if(null===n)return!0;var r=eI.call(n,"constructor")&&n.constructor;return"function"==typeof r&&r instanceof r&&eD.call(r)==eQ}var s0=to?tI(to):function(e){return sG(e)&&nJ(e)==S},s1=ta?tI(ta):function(e){return sG(e)&&iv(e)==_};function s2(e){return"string"==typeof e||!sj(e)&&sG(e)&&nJ(e)==k}function s5(e){return"symbol"==typeof e||sG(e)&&nJ(e)==C}var s4=tl?tI(tl):function(e){return sG(e)&&sU(e.length)&&!!e0[nJ(e)]},s3=r3(rt),s6=r3(function(e,n){return e<=n});function s9(e){if(!e)return[];if(sz(e))return s2(e)?tU(e):rB(e);if(e6&&e[e6]){for(var n,r=e[e6](),i=[];!(n=r.next()).done;)i.push(n.value);return i}var s=iv(e);return(s==O?tF:s==_?tW:ok)(e)}function s7(e){return e?(e=ot(e))===l||e===-l?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}function s8(e){var n=s7(e),r=n%1;return n==n?r?n-r:n:0}function oe(e){return e?n$(s8(e),0,0xffffffff):0}function ot(e){if("number"==typeof e)return e;if(s5(e))return h;if(sY(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=sY(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=tD(e);var r=eu.test(e);return r||ep.test(e)?e4(e.slice(2),r?2:8):ec.test(e)?h:+e}function on(e){return rF(e,oy(e))}function or(e){return null==e?"":rS(e)}var oi=rq(function(e,n){if(iT(n)||sz(n))return void rF(n,om(n),e);for(var r in n)eI.call(n,r)&&nP(e,r,n[r])}),os=rq(function(e,n){rF(n,oy(n),e)}),oo=rq(function(e,n,r,i){rF(n,oy(n),e,i)}),oa=rq(function(e,n,r,i){rF(n,om(n),e,i)}),ol=io(nI),oh=rp(function(e,n){e=ek(e);var r=-1,s=n.length,o=s>2?n[2]:i;for(o&&i_(n[0],n[1],o)&&(s=1);++r<s;)for(var a=n[r],l=oy(a),h=-1,c=l.length;++h<c;){var u=l[h],d=e[u];(i===d||s$(d,eM[u])&&!eI.call(e,u))&&(e[u]=a[u])}return e}),oc=rp(function(e){return e.push(i,ir),th(ov,i,e)});function ou(e,n,r){var s=null==e?i:nH(e,n);return i===s?r:s}function od(e,n){return null!=e&&ib(e,n,n2)}var op=r0(function(e,n,r){null!=n&&"function"!=typeof n.toString&&(n=eL.call(n)),e[n]=r},oj(oB)),of=r0(function(e,n,r){null!=n&&"function"!=typeof n.toString&&(n=eL.call(n)),eI.call(e,n)?e[n].push(r):e[n]=[r]},id),og=rp(n4);function om(e){return sz(e)?nC(e):re(e)}function oy(e){return sz(e)?nC(e,!0):function(e){if(!sY(e)){var n=e,r=[];if(null!=n)for(var i in ek(n))r.push(i);return r}var s=iT(e),o=[];for(var a in e)"constructor"==a&&(s||!eI.call(e,a))||o.push(a);return o}(e)}var oO=rq(function(e,n,r){rs(e,n,r)}),ov=rq(function(e,n,r,i){rs(e,n,r,i)}),ob=io(function(e,n){var r={};if(null==e)return r;var i=!1;n=tm(n,function(n){return n=rD(n,e),i||(i=n.length>1),n}),rF(e,il(e),r),i&&(r=nR(r,7,ii));for(var s=n.length;s--;)rk(r,n[s]);return r}),ox=io(function(e,n){return null==e?{}:rl(e,n,function(n,r){return od(e,r)})});function ow(e,n){if(null==e)return{};var r=tm(il(e),function(e){return[e]});return n=id(n),rl(e,r,function(e,r){return n(e,r[0])})}var oS=r8(om),o_=r8(oy);function ok(e){return null==e?[]:t$(e,om(e))}var oC=rY(function(e,n,r){return n=n.toLowerCase(),e+(r?oE(n):n)});function oE(e){return o$(or(e).toLowerCase())}function oT(e){return(e=or(e))&&e.replace(eg,tj).replace(eX,"")}var oP=rY(function(e,n,r){return e+(r?"-":"")+n.toLowerCase()}),oA=rY(function(e,n,r){return e+(r?" ":"")+n.toLowerCase()}),oM=rU("toLowerCase"),oN=rY(function(e,n,r){return e+(r?"_":"")+n.toLowerCase()}),oD=rY(function(e,n,r){return e+(r?" ":"")+o$(n)}),oI=rY(function(e,n,r){return e+(r?" ":"")+n.toUpperCase()}),o$=rU("toUpperCase");function oR(e,n,r){if(e=or(e),n=r?i:n,i===n){var s;return(s=e,eH.test(s))?e.match(eY)||[]:e.match(es)||[]}return e.match(n)||[]}var oL=rp(function(e,n){try{return th(e,i,n)}catch(e){return sq(e)?e:new ew(e)}}),oQ=io(function(e,n){return tu(n,function(n){nD(e,n=iV(n),sw(e[n],e))}),e});function oj(e){return function(){return e}}var oV=rK(),oz=rK(!0);function oB(e){return e}function oF(e){return n8("function"==typeof e?e:nR(e,1))}var oZ=rp(function(e,n){return function(r){return n4(r,e,n)}}),oq=rp(function(e,n){return function(r){return n4(e,r,n)}});function oW(e,n,r){var i=om(n),s=nG(n,i);null!=r||sY(n)&&(s.length||!i.length)||(r=n,n=e,e=this,s=nG(n,om(n)));var o=!(sY(r)&&"chain"in r)||!!r.chain,a=sW(e);return tu(s,function(r){var i=n[r];e[r]=i,a&&(e.prototype[r]=function(){var n=this.__chain__;if(o||n){var r=e(this.__wrapped__);return(r.__actions__=rB(this.__actions__)).push({func:i,args:arguments,thisArg:e}),r.__chain__=n,r}return i.apply(e,ty([this.value()],arguments))})}),e}function oX(){}var oU=r2(tm),oY=r2(td),oG=r2(tb);function oH(e){return ik(e)?tT(iV(e)):function(n){return nH(n,e)}}var oK=r4(),oJ=r4(!0);function o0(){return[]}function o1(){return!1}var o2=r1(function(e,n){return e+n},0),o5=r9("ceil"),o4=r1(function(e,n){return e/n},1),o3=r9("floor"),o6=r1(function(e,n){return e*n},1),o9=r9("round"),o7=r1(function(e,n){return e-n},0);return nm.after=function(e,n){if("function"!=typeof n)throw new eT(s);return e=s8(e),function(){if(--e<1)return n.apply(this,arguments)}},nm.ary=sb,nm.assign=oi,nm.assignIn=os,nm.assignInWith=oo,nm.assignWith=oa,nm.at=ol,nm.before=sx,nm.bind=sw,nm.bindAll=oQ,nm.bindKey=sS,nm.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return sj(e)?e:[e]},nm.chain=ss,nm.chunk=function(e,n,r){n=(r?i_(e,n,r):i===n)?1:t4(s8(n),0);var s=null==e?0:e.length;if(!s||n<1)return[];for(var o=0,a=0,l=eb(tP(s/n));o<s;)l[a++]=ry(e,o,o+=n);return l},nm.compact=function(e){for(var n=-1,r=null==e?0:e.length,i=0,s=[];++n<r;){var o=e[n];o&&(s[i++]=o)}return s},nm.concat=function(){var e=arguments.length;if(!e)return[];for(var n=eb(e-1),r=arguments[0],i=e;i--;)n[i-1]=arguments[i];return ty(sj(r)?rB(r):[r],nq(n,1))},nm.cond=function(e){var n=null==e?0:e.length,r=id();return e=n?tm(e,function(e){if("function"!=typeof e[1])throw new eT(s);return[r(e[0]),e[1]]}):[],rp(function(r){for(var i=-1;++i<n;){var s=e[i];if(th(s[0],this,r))return th(s[1],this,r)}})},nm.conforms=function(e){var n,r;return r=om(n=nR(e,1)),function(e){return nL(e,n,r)}},nm.constant=oj,nm.countBy=sl,nm.create=function(e,n){var r=ny(e);return null==n?r:nN(r,n)},nm.curry=s_,nm.curryRight=sk,nm.debounce=sC,nm.defaults=oh,nm.defaultsDeep=oc,nm.defer=sE,nm.delay=sT,nm.difference=iF,nm.differenceBy=iZ,nm.differenceWith=iq,nm.drop=function(e,n,r){var s=null==e?0:e.length;return s?ry(e,(n=r||i===n?1:s8(n))<0?0:n,s):[]},nm.dropRight=function(e,n,r){var s=null==e?0:e.length;return s?ry(e,0,(n=s-(n=r||i===n?1:s8(n)))<0?0:n):[]},nm.dropRightWhile=function(e,n){return e&&e.length?rE(e,id(n,3),!0,!0):[]},nm.dropWhile=function(e,n){return e&&e.length?rE(e,id(n,3),!0):[]},nm.fill=function(e,n,r,s){var o=null==e?0:e.length;if(!o)return[];r&&"number"!=typeof r&&i_(e,n,r)&&(r=0,s=o);var a=r,l=s,h=e.length;for((a=s8(a))<0&&(a=-a>h?0:h+a),(l=i===l||l>h?h:s8(l))<0&&(l+=h),l=a>l?0:oe(l);a<l;)e[a++]=n;return e},nm.filter=function(e,n){return(sj(e)?tp:nZ)(e,id(n,3))},nm.flatMap=function(e,n){return nq(sm(e,n),1)},nm.flatMapDeep=function(e,n){return nq(sm(e,n),l)},nm.flatMapDepth=function(e,n,r){return r=i===r?1:s8(r),nq(sm(e,n),r)},nm.flatten=iU,nm.flattenDeep=function(e){return(null==e?0:e.length)?nq(e,l):[]},nm.flattenDepth=function(e,n){return(null==e?0:e.length)?nq(e,n=i===n?1:s8(n)):[]},nm.flip=function(e){return ie(e,512)},nm.flow=oV,nm.flowRight=oz,nm.fromPairs=function(e){for(var n=-1,r=null==e?0:e.length,i={};++n<r;){var s=e[n];i[s[0]]=s[1]}return i},nm.functions=function(e){return null==e?[]:nG(e,om(e))},nm.functionsIn=function(e){return null==e?[]:nG(e,oy(e))},nm.groupBy=sp,nm.initial=function(e){return(null==e?0:e.length)?ry(e,0,-1):[]},nm.intersection=iG,nm.intersectionBy=iH,nm.intersectionWith=iK,nm.invert=op,nm.invertBy=of,nm.invokeMap=sf,nm.iteratee=oF,nm.keyBy=sg,nm.keys=om,nm.keysIn=oy,nm.map=sm,nm.mapKeys=function(e,n){var r={};return n=id(n,3),nU(e,function(e,i,s){nD(r,n(e,i,s),e)}),r},nm.mapValues=function(e,n){var r={};return n=id(n,3),nU(e,function(e,i,s){nD(r,i,n(e,i,s))}),r},nm.matches=function(e){return rr(nR(e,1))},nm.matchesProperty=function(e,n){return ri(e,nR(n,1))},nm.memoize=sP,nm.merge=oO,nm.mergeWith=ov,nm.method=oZ,nm.methodOf=oq,nm.mixin=oW,nm.negate=sA,nm.nthArg=function(e){return e=s8(e),rp(function(n){return ro(n,e)})},nm.omit=ob,nm.omitBy=function(e,n){return ow(e,sA(id(n)))},nm.once=function(e){return sx(2,e)},nm.orderBy=function(e,n,r,s){return null==e?[]:(sj(n)||(n=null==n?[]:[n]),sj(r=s?i:r)||(r=null==r?[]:[r]),ra(e,n,r))},nm.over=oU,nm.overArgs=sM,nm.overEvery=oY,nm.overSome=oG,nm.partial=sN,nm.partialRight=sD,nm.partition=sy,nm.pick=ox,nm.pickBy=ow,nm.property=oH,nm.propertyOf=function(e){return function(n){return null==e?i:nH(e,n)}},nm.pull=i0,nm.pullAll=i1,nm.pullAllBy=function(e,n,r){return e&&e.length&&n&&n.length?rh(e,n,id(r,2)):e},nm.pullAllWith=function(e,n,r){return e&&e.length&&n&&n.length?rh(e,n,i,r):e},nm.pullAt=i2,nm.range=oK,nm.rangeRight=oJ,nm.rearg=sI,nm.reject=function(e,n){return(sj(e)?tp:nZ)(e,sA(id(n,3)))},nm.remove=function(e,n){var r=[];if(!(e&&e.length))return r;var i=-1,s=[],o=e.length;for(n=id(n,3);++i<o;){var a=e[i];n(a,i,e)&&(r.push(a),s.push(i))}return rc(e,s),r},nm.rest=function(e,n){if("function"!=typeof e)throw new eT(s);return rp(e,n=i===n?n:s8(n))},nm.reverse=i5,nm.sampleSize=function(e,n,r){return n=(r?i_(e,n,r):i===n)?1:s8(n),(sj(e)?function(e,n){return iQ(rB(e),n$(n,0,e.length))}:function(e,n){var r=ok(e);return iQ(r,n$(n,0,r.length))})(e,n)},nm.set=function(e,n,r){return null==e?e:rf(e,n,r)},nm.setWith=function(e,n,r,s){return s="function"==typeof s?s:i,null==e?e:rf(e,n,r,s)},nm.shuffle=function(e){return(sj(e)?function(e){return iQ(rB(e))}:function(e){return iQ(ok(e))})(e)},nm.slice=function(e,n,r){var s=null==e?0:e.length;return s?(r&&"number"!=typeof r&&i_(e,n,r)?(n=0,r=s):(n=null==n?0:s8(n),r=i===r?s:s8(r)),ry(e,n,r)):[]},nm.sortBy=sO,nm.sortedUniq=function(e){return e&&e.length?rx(e):[]},nm.sortedUniqBy=function(e,n){return e&&e.length?rx(e,id(n,2)):[]},nm.split=function(e,n,r){return(r&&"number"!=typeof r&&i_(e,n,r)&&(n=r=i),r=i===r?0xffffffff:r>>>0)?(e=or(e))&&("string"==typeof n||null!=n&&!s0(n))&&!(n=rS(n))&&tB(e)?rI(tU(e),0,r):e.split(n,r):[]},nm.spread=function(e,n){if("function"!=typeof e)throw new eT(s);return n=null==n?0:t4(s8(n),0),rp(function(r){var i=r[n],s=rI(r,0,n);return i&&ty(s,i),th(e,this,s)})},nm.tail=function(e){var n=null==e?0:e.length;return n?ry(e,1,n):[]},nm.take=function(e,n,r){return e&&e.length?ry(e,0,(n=r||i===n?1:s8(n))<0?0:n):[]},nm.takeRight=function(e,n,r){var s=null==e?0:e.length;return s?ry(e,(n=s-(n=r||i===n?1:s8(n)))<0?0:n,s):[]},nm.takeRightWhile=function(e,n){return e&&e.length?rE(e,id(n,3),!1,!0):[]},nm.takeWhile=function(e,n){return e&&e.length?rE(e,id(n,3)):[]},nm.tap=function(e,n){return n(e),e},nm.throttle=function(e,n,r){var i=!0,o=!0;if("function"!=typeof e)throw new eT(s);return sY(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),sC(e,n,{leading:i,maxWait:n,trailing:o})},nm.thru=so,nm.toArray=s9,nm.toPairs=oS,nm.toPairsIn=o_,nm.toPath=function(e){return sj(e)?tm(e,iV):s5(e)?[e]:rB(ij(or(e)))},nm.toPlainObject=on,nm.transform=function(e,n,r){var i=sj(e),s=i||sF(e)||s4(e);if(n=id(n,4),null==r){var o=e&&e.constructor;r=s?i?new o:[]:sY(e)&&sW(o)?ny(eq(e)):{}}return(s?tu:nU)(e,function(e,i,s){return n(r,e,i,s)}),r},nm.unary=function(e){return sb(e,1)},nm.union=i4,nm.unionBy=i3,nm.unionWith=i6,nm.uniq=function(e){return e&&e.length?r_(e):[]},nm.uniqBy=function(e,n){return e&&e.length?r_(e,id(n,2)):[]},nm.uniqWith=function(e,n){return n="function"==typeof n?n:i,e&&e.length?r_(e,i,n):[]},nm.unset=function(e,n){return null==e||rk(e,n)},nm.unzip=i9,nm.unzipWith=i7,nm.update=function(e,n,r){return null==e?e:rC(e,n,rN(r))},nm.updateWith=function(e,n,r,s){return s="function"==typeof s?s:i,null==e?e:rC(e,n,rN(r),s)},nm.values=ok,nm.valuesIn=function(e){return null==e?[]:t$(e,oy(e))},nm.without=i8,nm.words=oR,nm.wrap=function(e,n){return sN(rN(n),e)},nm.xor=se,nm.xorBy=st,nm.xorWith=sn,nm.zip=sr,nm.zipObject=function(e,n){return rA(e||[],n||[],nP)},nm.zipObjectDeep=function(e,n){return rA(e||[],n||[],rf)},nm.zipWith=si,nm.entries=oS,nm.entriesIn=o_,nm.extend=os,nm.extendWith=oo,oW(nm,nm),nm.add=o2,nm.attempt=oL,nm.camelCase=oC,nm.capitalize=oE,nm.ceil=o5,nm.clamp=function(e,n,r){return i===r&&(r=n,n=i),i!==r&&(r=(r=ot(r))==r?r:0),i!==n&&(n=(n=ot(n))==n?n:0),n$(ot(e),n,r)},nm.clone=function(e){return nR(e,4)},nm.cloneDeep=function(e){return nR(e,5)},nm.cloneDeepWith=function(e,n){return nR(e,5,n="function"==typeof n?n:i)},nm.cloneWith=function(e,n){return nR(e,4,n="function"==typeof n?n:i)},nm.conformsTo=function(e,n){return null==n||nL(e,n,om(n))},nm.deburr=oT,nm.defaultTo=function(e,n){return null==e||e!=e?n:e},nm.divide=o4,nm.endsWith=function(e,n,r){e=or(e),n=rS(n);var s=e.length,o=r=i===r?s:n$(s8(r),0,s);return(r-=n.length)>=0&&e.slice(r,o)==n},nm.eq=s$,nm.escape=function(e){return(e=or(e))&&q.test(e)?e.replace(F,tV):e},nm.escapeRegExp=function(e){return(e=or(e))&&J.test(e)?e.replace(K,"\\$&"):e},nm.every=function(e,n,r){var s=sj(e)?td:nB;return r&&i_(e,n,r)&&(n=i),s(e,id(n,3))},nm.find=sh,nm.findIndex=iW,nm.findKey=function(e,n){return tw(e,id(n,3),nU)},nm.findLast=sc,nm.findLastIndex=iX,nm.findLastKey=function(e,n){return tw(e,id(n,3),nY)},nm.floor=o3,nm.forEach=su,nm.forEachRight=sd,nm.forIn=function(e,n){return null==e?e:nW(e,id(n,3),oy)},nm.forInRight=function(e,n){return null==e?e:nX(e,id(n,3),oy)},nm.forOwn=function(e,n){return e&&nU(e,id(n,3))},nm.forOwnRight=function(e,n){return e&&nY(e,id(n,3))},nm.get=ou,nm.gt=sR,nm.gte=sL,nm.has=function(e,n){return null!=e&&ib(e,n,n1)},nm.hasIn=od,nm.head=iY,nm.identity=oB,nm.includes=function(e,n,r,i){e=sz(e)?e:ok(e),r=r&&!i?s8(r):0;var s=e.length;return r<0&&(r=t4(s+r,0)),s2(e)?r<=s&&e.indexOf(n,r)>-1:!!s&&t_(e,n,r)>-1},nm.indexOf=function(e,n,r){var i=null==e?0:e.length;if(!i)return -1;var s=null==r?0:s8(r);return s<0&&(s=t4(i+s,0)),t_(e,n,s)},nm.inRange=function(e,n,r){var s,o,a;return n=s7(n),i===r?(r=n,n=0):r=s7(r),(s=e=ot(e))>=t3(o=n,a=r)&&s<t4(o,a)},nm.invoke=og,nm.isArguments=sQ,nm.isArray=sj,nm.isArrayBuffer=sV,nm.isArrayLike=sz,nm.isArrayLikeObject=sB,nm.isBoolean=function(e){return!0===e||!1===e||sG(e)&&nJ(e)==p},nm.isBuffer=sF,nm.isDate=sZ,nm.isElement=function(e){return sG(e)&&1===e.nodeType&&!sJ(e)},nm.isEmpty=function(e){if(null==e)return!0;if(sz(e)&&(sj(e)||"string"==typeof e||"function"==typeof e.splice||sF(e)||s4(e)||sQ(e)))return!e.length;var n=iv(e);if(n==O||n==_)return!e.size;if(iT(e))return!re(e).length;for(var r in e)if(eI.call(e,r))return!1;return!0},nm.isEqual=function(e,n){return n6(e,n)},nm.isEqualWith=function(e,n,r){var s=(r="function"==typeof r?r:i)?r(e,n):i;return i===s?n6(e,n,i,r):!!s},nm.isError=sq,nm.isFinite=function(e){return"number"==typeof e&&t1(e)},nm.isFunction=sW,nm.isInteger=sX,nm.isLength=sU,nm.isMap=sH,nm.isMatch=function(e,n){return e===n||n9(e,n,ig(n))},nm.isMatchWith=function(e,n,r){return r="function"==typeof r?r:i,n9(e,n,ig(n),r)},nm.isNaN=function(e){return sK(e)&&e!=+e},nm.isNative=function(e){if(iE(e))throw new ew("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return n7(e)},nm.isNil=function(e){return null==e},nm.isNull=function(e){return null===e},nm.isNumber=sK,nm.isObject=sY,nm.isObjectLike=sG,nm.isPlainObject=sJ,nm.isRegExp=s0,nm.isSafeInteger=function(e){return sX(e)&&e>=-0x1fffffffffffff&&e<=0x1fffffffffffff},nm.isSet=s1,nm.isString=s2,nm.isSymbol=s5,nm.isTypedArray=s4,nm.isUndefined=function(e){return i===e},nm.isWeakMap=function(e){return sG(e)&&iv(e)==E},nm.isWeakSet=function(e){return sG(e)&&"[object WeakSet]"==nJ(e)},nm.join=function(e,n){return null==e?"":t2.call(e,n)},nm.kebabCase=oP,nm.last=iJ,nm.lastIndexOf=function(e,n,r){var s=null==e?0:e.length;if(!s)return -1;var o=s;return i!==r&&(o=(o=s8(r))<0?t4(s+o,0):t3(o,s-1)),n==n?function(e,n,r){for(var i=r+1;i--&&e[i]!==n;);return i}(e,n,o):tS(e,tC,o,!0)},nm.lowerCase=oA,nm.lowerFirst=oM,nm.lt=s3,nm.lte=s6,nm.max=function(e){return e&&e.length?nF(e,oB,n0):i},nm.maxBy=function(e,n){return e&&e.length?nF(e,id(n,2),n0):i},nm.mean=function(e){return tE(e,oB)},nm.meanBy=function(e,n){return tE(e,id(n,2))},nm.min=function(e){return e&&e.length?nF(e,oB,rt):i},nm.minBy=function(e,n){return e&&e.length?nF(e,id(n,2),rt):i},nm.stubArray=o0,nm.stubFalse=o1,nm.stubObject=function(){return{}},nm.stubString=function(){return""},nm.stubTrue=function(){return!0},nm.multiply=o6,nm.nth=function(e,n){return e&&e.length?ro(e,s8(n)):i},nm.noConflict=function(){return e9._===this&&(e9._=ej),this},nm.noop=oX,nm.now=sv,nm.pad=function(e,n,r){e=or(e);var i=(n=s8(n))?tX(e):0;if(!n||i>=n)return e;var s=(n-i)/2;return r5(tK(s),r)+e+r5(tP(s),r)},nm.padEnd=function(e,n,r){e=or(e);var i=(n=s8(n))?tX(e):0;return n&&i<n?e+r5(n-i,r):e},nm.padStart=function(e,n,r){e=or(e);var i=(n=s8(n))?tX(e):0;return n&&i<n?r5(n-i,r)+e:e},nm.parseInt=function(e,n,r){return r||null==n?n=0:n&&(n*=1),t9(or(e).replace(ee,""),n||0)},nm.random=function(e,n,r){if(r&&"boolean"!=typeof r&&i_(e,n,r)&&(n=r=i),i===r&&("boolean"==typeof n?(r=n,n=i):"boolean"==typeof e&&(r=e,e=i)),i===e&&i===n?(e=0,n=1):(e=s7(e),i===n?(n=e,e=0):n=s7(n)),e>n){var s=e;e=n,n=s}if(r||e%1||n%1){var o=t7();return t3(e+o*(n-e+e5("1e-"+((o+"").length-1))),n)}return ru(e,n)},nm.reduce=function(e,n,r){var i=sj(e)?tO:tA,s=arguments.length<3;return i(e,id(n,4),r,s,nV)},nm.reduceRight=function(e,n,r){var i=sj(e)?tv:tA,s=arguments.length<3;return i(e,id(n,4),r,s,nz)},nm.repeat=function(e,n,r){return n=(r?i_(e,n,r):i===n)?1:s8(n),rd(or(e),n)},nm.replace=function(){var e=arguments,n=or(e[0]);return e.length<3?n:n.replace(e[1],e[2])},nm.result=function(e,n,r){n=rD(n,e);var s=-1,o=n.length;for(o||(o=1,e=i);++s<o;){var a=null==e?i:e[iV(n[s])];i===a&&(s=o,a=r),e=sW(a)?a.call(e):a}return e},nm.round=o9,nm.runInContext=e,nm.sample=function(e){return(sj(e)?nE:function(e){return nE(ok(e))})(e)},nm.size=function(e){if(null==e)return 0;if(sz(e))return s2(e)?tX(e):e.length;var n=iv(e);return n==O||n==_?e.size:re(e).length},nm.snakeCase=oN,nm.some=function(e,n,r){var s=sj(e)?tb:rO;return r&&i_(e,n,r)&&(n=i),s(e,id(n,3))},nm.sortedIndex=function(e,n){return rv(e,n)},nm.sortedIndexBy=function(e,n,r){return rb(e,n,id(r,2))},nm.sortedIndexOf=function(e,n){var r=null==e?0:e.length;if(r){var i=rv(e,n);if(i<r&&s$(e[i],n))return i}return -1},nm.sortedLastIndex=function(e,n){return rv(e,n,!0)},nm.sortedLastIndexBy=function(e,n,r){return rb(e,n,id(r,2),!0)},nm.sortedLastIndexOf=function(e,n){if(null==e?0:e.length){var r=rv(e,n,!0)-1;if(s$(e[r],n))return r}return -1},nm.startCase=oD,nm.startsWith=function(e,n,r){return e=or(e),r=null==r?0:n$(s8(r),0,e.length),n=rS(n),e.slice(r,r+n.length)==n},nm.subtract=o7,nm.sum=function(e){return e&&e.length?tM(e,oB):0},nm.sumBy=function(e,n){return e&&e.length?tM(e,id(n,2)):0},nm.template=function(e,n,r){var s=nm.templateSettings;r&&i_(e,n,r)&&(n=i),e=or(e),n=oo({},n,s,it);var o,a,l=oo({},n.imports,s.imports,it),h=om(l),c=t$(l,h),u=0,d=n.interpolate||em,p="__p += '",f=eC((n.escape||em).source+"|"+d.source+"|"+(d===U?el:em).source+"|"+(n.evaluate||em).source+"|$","g"),g="//# sourceURL="+(eI.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++eJ+"]")+"\n";e.replace(f,function(n,r,i,s,l,h){return i||(i=s),p+=e.slice(u,h).replace(ey,tz),r&&(o=!0,p+="' +\n__e("+r+") +\n'"),l&&(a=!0,p+="';\n"+l+";\n__p += '"),i&&(p+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),u=h+n.length,n}),p+="';\n";var m=eI.call(n,"variable")&&n.variable;if(m){if(eo.test(m))throw new ew("Invalid `variable` option passed into `_.template`")}else p="with (obj) {\n"+p+"\n}\n";p=(a?p.replace(j,""):p).replace(V,"$1").replace(z,"$1;"),p="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var y=oL(function(){return eS(h,g+"return "+p).apply(i,c)});if(y.source=p,sq(y))throw y;return y},nm.times=function(e,n){if((e=s8(e))<1||e>0x1fffffffffffff)return[];var r=0xffffffff,i=t3(e,0xffffffff);n=id(n),e-=0xffffffff;for(var s=tN(i,n);++r<e;)n(r);return s},nm.toFinite=s7,nm.toInteger=s8,nm.toLength=oe,nm.toLower=function(e){return or(e).toLowerCase()},nm.toNumber=ot,nm.toSafeInteger=function(e){return e?n$(s8(e),-0x1fffffffffffff,0x1fffffffffffff):0===e?e:0},nm.toString=or,nm.toUpper=function(e){return or(e).toUpperCase()},nm.trim=function(e,n,r){if((e=or(e))&&(r||i===n))return tD(e);if(!e||!(n=rS(n)))return e;var s=tU(e),o=tU(n),a=tL(s,o),l=tQ(s,o)+1;return rI(s,a,l).join("")},nm.trimEnd=function(e,n,r){if((e=or(e))&&(r||i===n))return e.slice(0,tY(e)+1);if(!e||!(n=rS(n)))return e;var s=tU(e),o=tQ(s,tU(n))+1;return rI(s,0,o).join("")},nm.trimStart=function(e,n,r){if((e=or(e))&&(r||i===n))return e.replace(ee,"");if(!e||!(n=rS(n)))return e;var s=tU(e),o=tL(s,tU(n));return rI(s,o).join("")},nm.truncate=function(e,n){var r=30,s="...";if(sY(n)){var o="separator"in n?n.separator:o;r="length"in n?s8(n.length):r,s="omission"in n?rS(n.omission):s}var a=(e=or(e)).length;if(tB(e)){var l=tU(e);a=l.length}if(r>=a)return e;var h=r-tX(s);if(h<1)return s;var c=l?rI(l,0,h).join(""):e.slice(0,h);if(i===o)return c+s;if(l&&(h+=c.length-h),s0(o)){if(e.slice(h).search(o)){var u,d=c;for(o.global||(o=eC(o.source,or(eh.exec(o))+"g")),o.lastIndex=0;u=o.exec(d);)var p=u.index;c=c.slice(0,i===p?h:p)}}else if(e.indexOf(rS(o),h)!=h){var f=c.lastIndexOf(o);f>-1&&(c=c.slice(0,f))}return c+s},nm.unescape=function(e){return(e=or(e))&&Z.test(e)?e.replace(B,tG):e},nm.uniqueId=function(e){var n=++e$;return or(e)+n},nm.upperCase=oI,nm.upperFirst=o$,nm.each=su,nm.eachRight=sd,nm.first=iY,oW(nm,(ev={},nU(nm,function(e,n){eI.call(nm.prototype,n)||(ev[n]=e)}),ev),{chain:!1}),nm.VERSION="4.17.21",tu(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){nm[e].placeholder=nm}),tu(["drop","take"],function(e,n){nb.prototype[e]=function(r){r=i===r?1:t4(s8(r),0);var s=this.__filtered__&&!n?new nb(this):this.clone();return s.__filtered__?s.__takeCount__=t3(r,s.__takeCount__):s.__views__.push({size:t3(r,0xffffffff),type:e+(s.__dir__<0?"Right":"")}),s},nb.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}}),tu(["filter","map","takeWhile"],function(e,n){var r=n+1,i=1==r||3==r;nb.prototype[e]=function(e){var n=this.clone();return n.__iteratees__.push({iteratee:id(e,3),type:r}),n.__filtered__=n.__filtered__||i,n}}),tu(["head","last"],function(e,n){var r="take"+(n?"Right":"");nb.prototype[e]=function(){return this[r](1).value()[0]}}),tu(["initial","tail"],function(e,n){var r="drop"+(n?"":"Right");nb.prototype[e]=function(){return this.__filtered__?new nb(this):this[r](1)}}),nb.prototype.compact=function(){return this.filter(oB)},nb.prototype.find=function(e){return this.filter(e).head()},nb.prototype.findLast=function(e){return this.reverse().find(e)},nb.prototype.invokeMap=rp(function(e,n){return"function"==typeof e?new nb(this):this.map(function(r){return n4(r,e,n)})}),nb.prototype.reject=function(e){return this.filter(sA(id(e)))},nb.prototype.slice=function(e,n){e=s8(e);var r=this;return r.__filtered__&&(e>0||n<0)?new nb(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),i!==n&&(r=(n=s8(n))<0?r.dropRight(-n):r.take(n-e)),r)},nb.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},nb.prototype.toArray=function(){return this.take(0xffffffff)},nU(nb.prototype,function(e,n){var r=/^(?:filter|find|map|reject)|While$/.test(n),s=/^(?:head|last)$/.test(n),o=nm[s?"take"+("last"==n?"Right":""):n],a=s||/^find/.test(n);o&&(nm.prototype[n]=function(){var n=this.__wrapped__,l=s?[1]:arguments,h=n instanceof nb,c=l[0],u=h||sj(n),d=function(e){var n=o.apply(nm,ty([e],l));return s&&p?n[0]:n};u&&r&&"function"==typeof c&&1!=c.length&&(h=u=!1);var p=this.__chain__,f=!!this.__actions__.length,g=a&&!p,m=h&&!f;if(!a&&u){n=m?n:new nb(this);var y=e.apply(n,l);return y.__actions__.push({func:so,args:[d],thisArg:i}),new nv(y,p)}return g&&m?e.apply(this,l):(y=this.thru(d),g?s?y.value()[0]:y.value():y)})}),tu(["pop","push","shift","sort","splice","unshift"],function(e){var n=eP[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);nm.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var s=this.value();return n.apply(sj(s)?s:[],e)}return this[r](function(r){return n.apply(sj(r)?r:[],e)})}}),nU(nb.prototype,function(e,n){var r=nm[n];if(r){var i=r.name+"";eI.call(na,i)||(na[i]=[]),na[i].push({name:n,func:r})}}),na[rJ(i,2).name]=[{name:"wrapper",func:i}],nb.prototype.clone=function(){var e=new nb(this.__wrapped__);return e.__actions__=rB(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=rB(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=rB(this.__views__),e},nb.prototype.reverse=function(){if(this.__filtered__){var e=new nb(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e},nb.prototype.value=function(){var e=this.__wrapped__.value(),n=this.__dir__,r=sj(e),i=n<0,s=r?e.length:0,o=function(e,n,r){for(var i=-1,s=r.length;++i<s;){var o=r[i],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":n-=a;break;case"take":n=t3(n,e+a);break;case"takeRight":e=t4(e,n-a)}}return{start:e,end:n}}(0,s,this.__views__),a=o.start,l=o.end,h=l-a,c=i?l:a-1,u=this.__iteratees__,d=u.length,p=0,f=t3(h,this.__takeCount__);if(!r||!i&&s==h&&f==h)return rT(e,this.__actions__);var g=[];r:for(;h--&&p<f;){for(var m=-1,y=e[c+=n];++m<d;){var O=u[m],b=O.iteratee,x=O.type,w=b(y);if(2==x)y=w;else if(!w)if(1==x)continue r;else break r}g[p++]=y}return g},nm.prototype.at=sa,nm.prototype.chain=function(){return ss(this)},nm.prototype.commit=function(){return new nv(this.value(),this.__chain__)},nm.prototype.next=function(){this.__values__===i&&(this.__values__=s9(this.value()));var e=this.__index__>=this.__values__.length,n=e?i:this.__values__[this.__index__++];return{done:e,value:n}},nm.prototype.plant=function(e){for(var n,r=this;r instanceof nO;){var s=iB(r);s.__index__=0,s.__values__=i,n?o.__wrapped__=s:n=s;var o=s;r=r.__wrapped__}return o.__wrapped__=e,n},nm.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof nb){var n=e;return this.__actions__.length&&(n=new nb(this)),(n=n.reverse()).__actions__.push({func:so,args:[i5],thisArg:i}),new nv(n,this.__chain__)}return this.thru(i5)},nm.prototype.toJSON=nm.prototype.valueOf=nm.prototype.value=function(){return rT(this.__wrapped__,this.__actions__)},nm.prototype.first=nm.prototype.head,e6&&(nm.prototype[e6]=function(){return this}),nm}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(e9._=tH,define(function(){return tH})):e8?((e8.exports=tH)._=tH,e7._=tH):e9._=tH}).call(this)},94506:function(e,n,r){var i=r(93599),s=r(3335),o=r(83488);e.exports=function(e){return e&&e.length?i(e,o,s):void 0}},50104:function(e,n,r){var i=r(53661);function s(e,n){if("function"!=typeof e||null!=n&&"function"!=typeof n)throw TypeError("Expected a function");var r=function(){var i=arguments,s=n?n.apply(this,i):i[0],o=r.cache;if(o.has(s))return o.get(s);var a=e.apply(this,i);return r.cache=o.set(s,a)||o,a};return r.cache=new(s.Cache||i),r}s.Cache=i,e.exports=s},55364:function(e,n,r){var i=r(85250);e.exports=r(20999)(function(e,n,r){i(e,n,r)})},63950:function(e){e.exports=function(){}},10124:function(e,n,r){var i=r(9325);e.exports=function(){return i.Date.now()}},90179:function(e,n,r){var i=r(34932),s=r(9999),o=r(19931),a=r(31769),l=r(21791),h=r(53138),c=r(38816),u=r(83349);e.exports=c(function(e,n){var r={};if(null==e)return r;var c=!1;n=i(n,function(n){return n=a(n,e),c||(c=n.length>1),n}),l(e,u(e),r),c&&(r=s(r,7,h));for(var d=n.length;d--;)o(r,n[d]);return r})},44383:function(e,n,r){var i=r(76001);e.exports=r(38816)(function(e,n){return null==e?{}:i(e,n)})},50583:function(e,n,r){var i=r(47237),s=r(17255),o=r(28586),a=r(77797);e.exports=function(e){return o(e)?i(a(e)):s(e)}},23181:function(e,n,r){e.exports=r(85508)()},12493:function(e,n,r){var i=r(84051),s=r(36800),o=r(61489),a=r(13222);e.exports=function(e,n,r){return n=(r?s(e,n,r):void 0===n)?1:o(n),i(a(e),n)}},63560:function(e,n,r){var i=r(73170);e.exports=function(e,n,r){return null==e?e:i(e,n,r)}},33031:function(e,n,r){var i=r(83120),s=r(46155),o=r(69302),a=r(36800);e.exports=o(function(e,n){if(null==e)return[];var r=n.length;return r>1&&a(e,n[0],n[1])?n=[]:r>2&&a(n[0],n[1],n[2])&&(n=[n[0]]),s(e,i(n,1),[])})},63345:function(e){e.exports=function(){return[]}},89935:function(e){e.exports=function(){return!1}},7350:function(e,n,r){var i=r(38221),s=r(23805);e.exports=function(e,n,r){var o=!0,a=!0;if("function"!=typeof e)throw TypeError("Expected a function");return s(r)&&(o="leading"in r?!!r.leading:o,a="trailing"in r?!!r.trailing:a),i(e,n,{leading:o,maxWait:n,trailing:a})}},17400:function(e,n,r){var i=r(99374),s=1/0;e.exports=function(e){return e?(e=i(e))===s||e===-s?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}},61489:function(e,n,r){var i=r(17400);e.exports=function(e){var n=i(e),r=n%1;return n==n?r?n-r:n:0}},99374:function(e,n,r){var i=r(54128),s=r(23805),o=r(44394),a=0/0,l=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return a;if(s(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=s(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=i(e);var r=h.test(e);return r||c.test(e)?u(e.slice(2),r?2:8):l.test(e)?a:+e}},42072:function(e,n,r){var i=r(34932),s=r(23007),o=r(56449),a=r(44394),l=r(61802),h=r(77797),c=r(13222);e.exports=function(e){return o(e)?i(e,h):a(e)?[e]:s(l(c(e)))}},69884:function(e,n,r){var i=r(21791),s=r(37241);e.exports=function(e){return i(e,s(e))}},13222:function(e,n,r){var i=r(77556);e.exports=function(e){return null==e?"":i(e)}},63375:function(e,n,r){var i=r(55765);e.exports=function(e){return e&&e.length?i(e):[]}},73357:function(e,n,r){var i=r(19931);e.exports=function(e,n){return null==e||i(e,n)}},55808:function(e,n,r){e.exports=r(12507)("toUpperCase")},35880:function(e,n,r){var i=r(30514),s=r(95950);e.exports=function(e){return null==e?[]:i(e,s(e))}},66645:function(e,n,r){var i=r(1733),s=r(45434),o=r(13222),a=r(22225);e.exports=function(e,n,r){return(e=o(e),void 0===(n=r?void 0:n))?s(e)?a(e):i(e):e.match(n)||[]}},47248:function(e,n,r){var i=r(16547),s=r(51234);e.exports=function(e,n){return s(e||[],n||[],i)}},2694:function(e,n,r){"use strict";var i=r(6925);function s(){}function o(){}o.resetWarningCache=s,e.exports=function(){function e(e,n,r,s,o,a){if(a!==i){var l=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function n(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,elementType:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:o,resetWarningCache:s};return r.PropTypes=r,r}},5556:function(e,n,r){e.exports=r(2694)()},6925:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},54405:function(e,n){"use strict";var r=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler");Symbol.for("react.provider");var l=Symbol.for("react.consumer"),h=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),g=Symbol.for("react.view_transition"),m=Symbol.for("react.client.reference");n.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===a||e===o||e===u||e===d||"object"==typeof e&&null!==e&&(e.$$typeof===f||e.$$typeof===p||e.$$typeof===h||e.$$typeof===l||e.$$typeof===c||e.$$typeof===m||void 0!==e.getModuleId)||!1},n.typeOf=function(e){if("object"==typeof e&&null!==e){var n=e.$$typeof;switch(n){case r:switch(e=e.type){case s:case a:case o:case u:case d:case g:return e;default:switch(e=e&&e.$$typeof){case h:case c:case f:case p:case l:return e;default:return n}}case i:return n}}}},2833:function(e){e.exports=function(e,n,r,i){var s=r?r.call(i,e,n):void 0;if(void 0!==s)return!!s;if(e===n)return!0;if("object"!=typeof e||!e||"object"!=typeof n||!n)return!1;var o=Object.keys(e),a=Object.keys(n);if(o.length!==a.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(n),h=0;h<o.length;h++){var c=o[h];if(!l(c))return!1;var u=e[c],d=n[c];if(!1===(s=r?r.call(i,u,d,c):void 0)||void 0===s&&u!==d)return!1}return!0}},34033:function(e,n,r){"use strict";r.d(n,{AH:()=>ex,Ay:()=>eA});var i,s,o,a,l=r(54405),h=r(96540),c=r(2833),u=r.n(c);let d=function(e){function n(e,n,i){var s=n.trim().split(g);n=s;var o=s.length,a=e.length;switch(a){case 0:case 1:var l=0;for(e=0===a?"":e[0]+" ";l<o;++l)n[l]=r(e,n[l],i).trim();break;default:var h=l=0;for(n=[];l<o;++l)for(var c=0;c<a;++c)n[h++]=r(e[c]+" ",s[l],i).trim()}return n}function r(e,n,r){var i=n.charCodeAt(0);switch(33>i&&(i=(n=n.trim()).charCodeAt(0)),i){case 38:return n.replace(m,"$1"+e.trim());case 58:return e.trim()+n.replace(m,"$1"+e.trim());default:if(0<+r&&0<n.indexOf("\f"))return n.replace(m,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+n}function i(e,n,r,o){var a=e+";",l=2*n+3*r+4*o;if(944===l){e=a.indexOf(":",9)+1;var h=a.substring(e,a.length-1).trim();return h=a.substring(0,e).trim()+h+";",1===M||2===M&&s(h,1)?"-webkit-"+h+h:h}if(0===M||2===M&&!s(a,1))return a;switch(l){case 1015:return 97===a.charCodeAt(10)?"-webkit-"+a+a:a;case 951:return 116===a.charCodeAt(3)?"-webkit-"+a+a:a;case 963:return 110===a.charCodeAt(5)?"-webkit-"+a+a:a;case 1009:if(100!==a.charCodeAt(4))break;case 969:case 942:return"-webkit-"+a+a;case 978:return"-webkit-"+a+"-moz-"+a+a;case 1019:case 983:return"-webkit-"+a+"-moz-"+a+"-ms-"+a+a;case 883:if(45===a.charCodeAt(8))return"-webkit-"+a+a;if(0<a.indexOf("image-set(",11))return a.replace(E,"$1-webkit-$2")+a;break;case 932:if(45===a.charCodeAt(4))switch(a.charCodeAt(5)){case 103:return"-webkit-box-"+a.replace("-grow","")+"-webkit-"+a+"-ms-"+a.replace("grow","positive")+a;case 115:return"-webkit-"+a+"-ms-"+a.replace("shrink","negative")+a;case 98:return"-webkit-"+a+"-ms-"+a.replace("basis","preferred-size")+a}return"-webkit-"+a+"-ms-"+a+a;case 964:return"-webkit-"+a+"-ms-flex-"+a+a;case 1023:if(99!==a.charCodeAt(8))break;return"-webkit-box-pack"+(h=a.substring(a.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+a+"-ms-flex-pack"+h+a;case 1005:return p.test(a)?a.replace(d,":-webkit-")+a.replace(d,":-moz-")+a:a;case 1e3:switch(n=(h=a.substring(13).trim()).indexOf("-")+1,h.charCodeAt(0)+h.charCodeAt(n)){case 226:h=a.replace(x,"tb");break;case 232:h=a.replace(x,"tb-rl");break;case 220:h=a.replace(x,"lr");break;default:return a}return"-webkit-"+a+"-ms-"+h+a;case 1017:if(-1===a.indexOf("sticky",9))break;case 975:switch(n=(a=e).length-10,l=(h=(33===a.charCodeAt(n)?a.substring(0,n):a).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|h.charCodeAt(7))){case 203:if(111>h.charCodeAt(8))break;case 115:a=a.replace(h,"-webkit-"+h)+";"+a;break;case 207:case 102:a=a.replace(h,"-webkit-"+(102<l?"inline-":"")+"box")+";"+a.replace(h,"-webkit-"+h)+";"+a.replace(h,"-ms-"+h+"box")+";"+a}return a+";";case 938:if(45===a.charCodeAt(5))switch(a.charCodeAt(6)){case 105:return h=a.replace("-items",""),"-webkit-"+a+"-webkit-box-"+h+"-ms-flex-"+h+a;case 115:return"-webkit-"+a+"-ms-flex-item-"+a.replace(_,"")+a;default:return"-webkit-"+a+"-ms-flex-line-pack"+a.replace("align-content","").replace(_,"")+a}break;case 973:case 989:if(45!==a.charCodeAt(3)||122===a.charCodeAt(4))break;case 931:case 953:if(!0===C.test(e))return 115===(h=e.substring(e.indexOf(":")+1)).charCodeAt(0)?i(e.replace("stretch","fill-available"),n,r,o).replace(":fill-available",":stretch"):a.replace(h,"-webkit-"+h)+a.replace(h,"-moz-"+h.replace("fill-",""))+a;break;case 962:if(a="-webkit-"+a+(102===a.charCodeAt(5)?"-ms-"+a:"")+a,211===r+o&&105===a.charCodeAt(13)&&0<a.indexOf("transform",10))return a.substring(0,a.indexOf(";",27)+1).replace(f,"$1-webkit-$2")+a}return a}function s(e,n){var r=e.indexOf(1===n?":":"{"),i=e.substring(0,3!==n?r:10);return r=e.substring(r+1,e.length-1),$(2!==n?i:i.replace(k,"$1"),r,n)}function o(e,n){var r=i(n,n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2));return r!==n+";"?r.replace(S," or ($1)").substring(4):"("+n+")"}function a(e,n,r,i,s,o,a,l,c,u){for(var d,p=0,f=n;p<I;++p)switch(d=D[p].call(h,e,f,r,i,s,o,a,l,c,u)){case void 0:case!1:case!0:case null:break;default:f=d}if(f!==n)return f}function l(e){return void 0!==(e=e.prefix)&&($=null,e?"function"!=typeof e?M=1:(M=2,$=e):M=0),l}function h(e,r){var l=e;if(33>l.charCodeAt(0)&&(l=l.trim()),l=[l],0<I){var h=a(-1,r,l,l,P,T,0,0,0,0);void 0!==h&&"string"==typeof h&&(r=h)}var d=function e(r,l,h,d,p){for(var f,g,m,x,S,_=0,k=0,C=0,E=0,D=0,$=0,L=m=f=0,Q=0,j=0,V=0,z=0,B=h.length,F=B-1,Z="",q="",W="",X="";Q<B;){if(g=h.charCodeAt(Q),Q===F&&0!==k+E+C+_&&(0!==k&&(g=47===k?10:47),E=C=_=0,B++,F++),0===k+E+C+_){if(Q===F&&(0<j&&(Z=Z.replace(u,"")),0<Z.trim().length)){switch(g){case 32:case 9:case 59:case 13:case 10:break;default:Z+=h.charAt(Q)}g=59}switch(g){case 123:for(f=(Z=Z.trim()).charCodeAt(0),m=1,z=++Q;Q<B;){switch(g=h.charCodeAt(Q)){case 123:m++;break;case 125:m--;break;case 47:switch(g=h.charCodeAt(Q+1)){case 42:case 47:l:{for(L=Q+1;L<F;++L)switch(h.charCodeAt(L)){case 47:if(42===g&&42===h.charCodeAt(L-1)&&Q+2!==L){Q=L+1;break l}break;case 10:if(47===g){Q=L+1;break l}}Q=L}}break;case 91:g++;case 40:g++;case 34:case 39:for(;Q++<F&&h.charCodeAt(Q)!==g;);}if(0===m)break;Q++}if(m=h.substring(z,Q),0===f&&(f=(Z=Z.replace(c,"").trim()).charCodeAt(0)),64===f){switch(0<j&&(Z=Z.replace(u,"")),g=Z.charCodeAt(1)){case 100:case 109:case 115:case 45:j=l;break;default:j=N}if(z=(m=e(l,j,m,g,p+1)).length,0<I&&(S=a(3,m,j=n(N,Z,V),l,P,T,z,g,p,d),Z=j.join(""),void 0!==S&&0===(z=(m=S.trim()).length)&&(g=0,m="")),0<z)switch(g){case 115:Z=Z.replace(w,o);case 100:case 109:case 45:m=Z+"{"+m+"}";break;case 107:m=(Z=Z.replace(y,"$1 $2"))+"{"+m+"}",m=1===M||2===M&&s("@"+m,3)?"@-webkit-"+m+"@"+m:"@"+m;break;default:m=Z+m,112===d&&(q+=m,m="")}else m=""}else m=e(l,n(l,Z,V),m,d,p+1);W+=m,m=V=j=L=f=0,Z="",g=h.charCodeAt(++Q);break;case 125:case 59:if(1<(z=(Z=(0<j?Z.replace(u,""):Z).trim()).length))switch(0===L&&(45===(f=Z.charCodeAt(0))||96<f&&123>f)&&(z=(Z=Z.replace(" ",":")).length),0<I&&void 0!==(S=a(1,Z,l,r,P,T,q.length,d,p,d))&&0===(z=(Z=S.trim()).length)&&(Z="\0\0"),f=Z.charCodeAt(0),g=Z.charCodeAt(1),f){case 0:break;case 64:if(105===g||99===g){X+=Z+h.charAt(Q);break}default:58!==Z.charCodeAt(z-1)&&(q+=i(Z,f,g,Z.charCodeAt(2)))}V=j=L=f=0,Z="",g=h.charCodeAt(++Q)}}switch(g){case 13:case 10:47===k?k=0:0===1+f&&107!==d&&0<Z.length&&(j=1,Z+="\0"),0<I*R&&a(0,Z,l,r,P,T,q.length,d,p,d),T=1,P++;break;case 59:case 125:if(0===k+E+C+_){T++;break}default:switch(T++,x=h.charAt(Q),g){case 9:case 32:if(0===E+_+k)switch(D){case 44:case 58:case 9:case 32:x="";break;default:32!==g&&(x=" ")}break;case 0:x="\\0";break;case 12:x="\\f";break;case 11:x="\\v";break;case 38:0===E+k+_&&(j=V=1,x="\f"+x);break;case 108:if(0===E+k+_+A&&0<L)switch(Q-L){case 2:112===D&&58===h.charCodeAt(Q-3)&&(A=D);case 8:111===$&&(A=$)}break;case 58:0===E+k+_&&(L=Q);break;case 44:0===k+C+E+_&&(j=1,x+="\r");break;case 34:case 39:0===k&&(E=E===g?0:0===E?g:E);break;case 91:0===E+k+C&&_++;break;case 93:0===E+k+C&&_--;break;case 41:0===E+k+_&&C--;break;case 40:0===E+k+_&&(0===f&&(2*D+3*$==533||(f=1)),C++);break;case 64:0===k+C+E+_+L+m&&(m=1);break;case 42:case 47:if(!(0<E+_+C))switch(k){case 0:switch(2*g+3*h.charCodeAt(Q+1)){case 235:k=47;break;case 220:z=Q,k=42}break;case 42:47===g&&42===D&&z+2!==Q&&(33===h.charCodeAt(z+2)&&(q+=h.substring(z,Q+1)),x="",k=0)}}0===k&&(Z+=x)}$=D,D=g,Q++}if(0<(z=q.length)){if(j=l,0<I&&void 0!==(S=a(2,q,j,r,P,T,z,d,p,d))&&0===(q=S).length)return X+q+W;if(q=j.join(",")+"{"+q+"}",0!=M*A){switch(2!==M||s(q,2)||(A=0),A){case 111:q=q.replace(b,":-moz-$1")+q;break;case 112:q=q.replace(O,"::-webkit-input-$1")+q.replace(O,"::-moz-$1")+q.replace(O,":-ms-input-$1")+q}A=0}}return X+q+W}(N,l,r,0,0);return 0<I&&void 0!==(h=a(-2,d,l,l,P,T,d.length,0,0,0))&&(d=h),A=0,T=P=1,d}var c=/^\0+/g,u=/[\0\r\f]/g,d=/: */g,p=/zoo|gra/,f=/([,: ])(transform)/g,g=/,\r+?/g,m=/([\t\r\n ])*\f?&/g,y=/@(k\w+)\s*(\S*)\s*/,O=/::(place)/g,b=/:(read-only)/g,x=/[svh]\w+-[tblr]{2}/,w=/\(\s*(.*)\s*\)/g,S=/([\s\S]*?);/g,_=/-self|flex-/g,k=/[^]*?(:[rp][el]a[\w-]+)[^]*/,C=/stretch|:\s*\w+\-(?:conte|avail)/,E=/([^-])(image-set\()/,T=1,P=1,A=0,M=1,N=[],D=[],I=0,$=null,R=0;return h.use=function e(n){switch(n){case void 0:case null:I=D.length=0;break;default:if("function"==typeof n)D[I++]=n;else if("object"==typeof n)for(var r=0,i=n.length;r<i;++r)e(n[r]);else R=0|!!n}return e},h.set=l,void 0!==e&&l(e),h},p={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var f=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,g=(i=function(e){return f.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&91>e.charCodeAt(2)},s=Object.create(null),function(e){return void 0===s[e]&&(s[e]=i(e)),s[e]}),m=r(4146),y=r.n(m);function O(){return(O=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}var b=function(e,n){for(var r=[e[0]],i=0,s=n.length;i<s;i+=1)r.push(n[i],e[i+1]);return r},x=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,l.typeOf)(e)},w=Object.freeze([]),S=Object.freeze({});function _(e){return"function"==typeof e}function k(e){return e.displayName||e.name||"Component"}function C(e){return e&&"string"==typeof e.styledComponentId}var E="undefined"!=typeof process&&void 0!==process.env&&(process.env.REACT_APP_SC_ATTR||process.env.SC_ATTR)||"data-styled",T="undefined"!=typeof window&&"HTMLElement"in window,P=!!("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!==process.env&&(void 0!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&""!==process.env.REACT_APP_SC_DISABLE_SPEEDY?"false"!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&process.env.REACT_APP_SC_DISABLE_SPEEDY:void 0!==process.env.SC_DISABLE_SPEEDY&&""!==process.env.SC_DISABLE_SPEEDY&&"false"!==process.env.SC_DISABLE_SPEEDY&&process.env.SC_DISABLE_SPEEDY));function A(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];throw Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(r.length>0?" Args: "+r.join(", "):""))}var M=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var n=e.prototype;return n.indexOfGroup=function(e){for(var n=0,r=0;r<e;r++)n+=this.groupSizes[r];return n},n.insertRules=function(e,n){if(e>=this.groupSizes.length){for(var r=this.groupSizes,i=r.length,s=i;e>=s;)(s<<=1)<0&&A(16,""+e);this.groupSizes=new Uint32Array(s),this.groupSizes.set(r),this.length=s;for(var o=i;o<s;o++)this.groupSizes[o]=0}for(var a=this.indexOfGroup(e+1),l=0,h=n.length;l<h;l++)this.tag.insertRule(a,n[l])&&(this.groupSizes[e]++,a++)},n.clearGroup=function(e){if(e<this.length){var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n;this.groupSizes[e]=0;for(var s=r;s<i;s++)this.tag.deleteRule(r)}},n.getGroup=function(e){var n="";if(e>=this.length||0===this.groupSizes[e])return n;for(var r=this.groupSizes[e],i=this.indexOfGroup(e),s=i+r,o=i;o<s;o++)n+=this.tag.getRule(o)+"/*!sc*/\n";return n},e}(),N=new Map,D=new Map,I=1,$=function(e){if(N.has(e))return N.get(e);for(;D.has(I);)I++;var n=I++;return N.set(e,n),D.set(n,e),n},R=function(e,n){n>=I&&(I=n+1),N.set(e,n),D.set(n,e)},L="style["+E+'][data-styled-version="5.3.11"]',Q=RegExp("^"+E+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),j=function(e,n,r){for(var i,s=r.split(","),o=0,a=s.length;o<a;o++)(i=s[o])&&e.registerName(n,i)},V=function(e,n){for(var r=(n.textContent||"").split("/*!sc*/\n"),i=[],s=0,o=r.length;s<o;s++){var a=r[s].trim();if(a){var l=a.match(Q);if(l){var h=0|parseInt(l[1],10),c=l[2];0!==h&&(R(c,h),j(e,c,l[3]),e.getTag().insertRules(h,i)),i.length=0}else i.push(a)}}},z=function(){return r.nc},B=function(e){var n=document.head,r=e||n,i=document.createElement("style"),s=function(e){for(var n=e.childNodes,r=n.length;r>=0;r--){var i=n[r];if(i&&1===i.nodeType&&i.hasAttribute(E))return i}}(r),o=void 0!==s?s.nextSibling:null;i.setAttribute(E,"active"),i.setAttribute("data-styled-version","5.3.11");var a=z();return a&&i.setAttribute("nonce",a),r.insertBefore(i,o),i},F=function(){function e(e){var n=this.element=B(e);n.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var n=document.styleSheets,r=0,i=n.length;r<i;r++){var s=n[r];if(s.ownerNode===e)return s}A(17)}(n),this.length=0}var n=e.prototype;return n.insertRule=function(e,n){try{return this.sheet.insertRule(n,e),this.length++,!0}catch(e){return!1}},n.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},n.getRule=function(e){var n=this.sheet.cssRules[e];return void 0!==n&&"string"==typeof n.cssText?n.cssText:""},e}(),Z=function(){function e(e){var n=this.element=B(e);this.nodes=n.childNodes,this.length=0}var n=e.prototype;return n.insertRule=function(e,n){if(e<=this.length&&e>=0){var r=document.createTextNode(n),i=this.nodes[e];return this.element.insertBefore(r,i||null),this.length++,!0}return!1},n.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},n.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),q=function(){function e(e){this.rules=[],this.length=0}var n=e.prototype;return n.insertRule=function(e,n){return e<=this.length&&(this.rules.splice(e,0,n),this.length++,!0)},n.deleteRule=function(e){this.rules.splice(e,1),this.length--},n.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),W=T,X={isServer:!T,useCSSOMInjection:!P},U=function(){function e(e,n,r){void 0===e&&(e=S),void 0===n&&(n={}),this.options=O({},X,{},e),this.gs=n,this.names=new Map(r),this.server=!!e.isServer,!this.server&&T&&W&&(W=!1,function(e){for(var n=document.querySelectorAll(L),r=0,i=n.length;r<i;r++){var s=n[r];s&&"active"!==s.getAttribute(E)&&(V(e,s),s.parentNode&&s.parentNode.removeChild(s))}}(this))}e.registerId=function(e){return $(e)};var n=e.prototype;return n.reconstructWithOptions=function(n,r){return void 0===r&&(r=!0),new e(O({},this.options,{},n),this.gs,r&&this.names||void 0)},n.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},n.getTag=function(){var e,n,r,i;return this.tag||(this.tag=(n=(e=this.options).isServer,r=e.useCSSOMInjection,i=e.target,new M(n?new q(i):r?new F(i):new Z(i))))},n.hasNameForId=function(e,n){return this.names.has(e)&&this.names.get(e).has(n)},n.registerName=function(e,n){if($(e),this.names.has(e))this.names.get(e).add(n);else{var r=new Set;r.add(n),this.names.set(e,r)}},n.insertRules=function(e,n,r){this.registerName(e,n),this.getTag().insertRules($(e),r)},n.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},n.clearRules=function(e){this.getTag().clearGroup($(e)),this.clearNames(e)},n.clearTag=function(){this.tag=void 0},n.toString=function(){return function(e){for(var n=e.getTag(),r=n.length,i="",s=0;s<r;s++){var o,a=(o=s,D.get(o));if(void 0!==a){var l=e.names.get(a),h=n.getGroup(s);if(l&&h&&l.size){var c=E+".g"+s+'[id="'+a+'"]',u="";void 0!==l&&l.forEach(function(e){e.length>0&&(u+=e+",")}),i+=""+h+c+'{content:"'+u+'"}/*!sc*/\n'}}}return i}(this)},e}(),Y=/(a)(d)/gi,G=function(e){return String.fromCharCode(e+(e>25?39:97))};function H(e){var n,r="";for(n=Math.abs(e);n>52;n=n/52|0)r=G(n%52)+r;return(G(n%52)+r).replace(Y,"$1-$2")}var K=function(e,n){for(var r=n.length;r;)e=33*e^n.charCodeAt(--r);return e},J=function(e){return K(5381,e)};function ee(e){for(var n=0;n<e.length;n+=1){var r=e[n];if(_(r)&&!C(r))return!1}return!0}var et=J("5.3.11"),en=function(){function e(e,n,r){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===r||r.isStatic)&&ee(e),this.componentId=n,this.baseHash=K(et,n),this.baseStyle=r,U.registerId(n)}return e.prototype.generateAndInjectStyles=function(e,n,r){var i=this.componentId,s=[];if(this.baseStyle&&s.push(this.baseStyle.generateAndInjectStyles(e,n,r)),this.isStatic&&!r.hash)if(this.staticRulesId&&n.hasNameForId(i,this.staticRulesId))s.push(this.staticRulesId);else{var o=ev(this.rules,e,n,r).join(""),a=H(K(this.baseHash,o)>>>0);if(!n.hasNameForId(i,a)){var l=r(o,"."+a,void 0,i);n.insertRules(i,a,l)}s.push(a),this.staticRulesId=a}else{for(var h=this.rules.length,c=K(this.baseHash,r.hash),u="",d=0;d<h;d++){var p=this.rules[d];if("string"==typeof p)u+=p;else if(p){var f=ev(p,e,n,r),g=Array.isArray(f)?f.join(""):f;c=K(c,g+d),u+=g}}if(u){var m=H(c>>>0);if(!n.hasNameForId(i,m)){var y=r(u,"."+m,void 0,i);n.insertRules(i,m,y)}s.push(m)}}return s.join(" ")},e}(),er=/^\s*\/\/.*$/gm,ei=[":","[",".","#"];function es(e){var n,r,i,s,o=void 0===e?S:e,a=o.options,l=void 0===a?S:a,h=o.plugins,c=void 0===h?w:h,u=new d(l),p=[],f=function(e){function n(n){if(n)try{e(n+"}")}catch(e){}}return function(r,i,s,o,a,l,h,c,u,d){switch(r){case 1:if(0===u&&64===i.charCodeAt(0))return e(i+";"),"";break;case 2:if(0===c)return i+"/*|*/";break;case 3:switch(c){case 102:case 112:return e(s[0]+i),"";default:return i+(0===d?"/*|*/":"")}case -2:i.split("/*|*/}").forEach(n)}}}(function(e){p.push(e)}),g=function(e,i,o){return 0===i&&-1!==ei.indexOf(o[r.length])||o.match(s)?e:"."+n};function m(e,o,a,l){void 0===l&&(l="&");var h=e.replace(er,""),c=o&&a?a+" "+o+" { "+h+" }":h;return n=l,i=RegExp("\\"+(r=o)+"\\b","g"),s=RegExp("(\\"+r+"\\b){2,}"),u(a||!o?"":o,c)}return u.use([].concat(c,[function(e,n,s){2===e&&s.length&&s[0].lastIndexOf(r)>0&&(s[0]=s[0].replace(i,g))},f,function(e){if(-2===e){var n=p;return p=[],n}}])),m.hash=c.length?c.reduce(function(e,n){return n.name||A(15),K(e,n.name)},5381).toString():"",m}var eo=h.createContext(),ea=(eo.Consumer,h.createContext()),el=(ea.Consumer,new U),eh=es();function ec(){return(0,h.useContext)(eo)||el}function eu(e){var n=(0,h.useState)(e.stylisPlugins),r=n[0],i=n[1],s=ec(),o=(0,h.useMemo)(function(){var n=s;return e.sheet?n=e.sheet:e.target&&(n=n.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(n=n.reconstructWithOptions({useCSSOMInjection:!1})),n},[e.disableCSSOMInjection,e.sheet,e.target]),a=(0,h.useMemo)(function(){return es({options:{prefix:!e.disableVendorPrefixes},plugins:r})},[e.disableVendorPrefixes,r]);return(0,h.useEffect)(function(){u()(r,e.stylisPlugins)||i(e.stylisPlugins)},[e.stylisPlugins]),h.createElement(eo.Provider,{value:o},h.createElement(ea.Provider,{value:a},e.children))}var ed=function(){function e(e,n){var r=this;this.inject=function(e,n){void 0===n&&(n=eh);var i=r.name+n.hash;e.hasNameForId(r.id,i)||e.insertRules(r.id,i,n(r.rules,i,"@keyframes"))},this.toString=function(){return A(12,String(r.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=n}return e.prototype.getName=function(e){return void 0===e&&(e=eh),this.name+e.hash},e}(),ep=/([A-Z])/,ef=/([A-Z])/g,eg=/^ms-/,em=function(e){return"-"+e.toLowerCase()};function ey(e){return ep.test(e)?e.replace(ef,em).replace(eg,"-ms-"):e}var eO=function(e){return null==e||!1===e||""===e};function ev(e,n,r,i){if(Array.isArray(e)){for(var s,o=[],a=0,l=e.length;a<l;a+=1)""!==(s=ev(e[a],n,r,i))&&(Array.isArray(s)?o.push.apply(o,s):o.push(s));return o}return eO(e)?"":C(e)?"."+e.styledComponentId:_(e)?"function"!=typeof e||e.prototype&&e.prototype.isReactComponent||!n?e:ev(e(n),n,r,i):e instanceof ed?r?(e.inject(r,i),e.getName(i)):e:x(e)?function e(n,r){var i,s=[];for(var o in n)n.hasOwnProperty(o)&&!eO(n[o])&&(Array.isArray(n[o])&&n[o].isCss||_(n[o])?s.push(ey(o)+":",n[o],";"):x(n[o])?s.push.apply(s,e(n[o],o)):s.push(ey(o)+": "+(null==(i=n[o])||"boolean"==typeof i||""===i?"":"number"!=typeof i||0===i||o in p||o.startsWith("--")?String(i).trim():i+"px")+";"));return r?[r+" {"].concat(s,["}"]):s}(e):e.toString()}var eb=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function ex(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return _(e)||x(e)?eb(ev(b(w,[e].concat(r)))):0===r.length&&1===e.length&&"string"==typeof e[0]?e:eb(ev(b(e,r)))}var ew=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,eS=/(^-|-$)/g;function e_(e){return e.replace(ew,"-").replace(eS,"")}function ek(e){return"string"==typeof e}var eC=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},eE=h.createContext();eE.Consumer;var eT={},eP=function(e){return function e(n,r,i){if(void 0===i&&(i=S),!(0,l.isValidElementType)(r))return A(1,String(r));var s=function(){return n(r,i,ex.apply(void 0,arguments))};return s.withConfig=function(s){return e(n,r,O({},i,{},s))},s.attrs=function(s){return e(n,r,O({},i,{attrs:Array.prototype.concat(i.attrs,s).filter(Boolean)}))},s}(function e(n,r,i){var s=C(n),o=!ek(n),a=r.attrs,l=void 0===a?w:a,c=r.componentId,u=void 0===c?(x=r.displayName,E=r.parentComponentId,eT[T="string"!=typeof x?"sc":e_(x)]=(eT[T]||0)+1,P=T+"-"+H(J("5.3.11"+T+eT[T])>>>0),E?E+"-"+P:P):c,d=r.displayName,p=void 0===d?ek(n)?"styled."+n:"Styled("+k(n)+")":d,f=r.displayName&&r.componentId?e_(r.displayName)+"-"+r.componentId:r.componentId||u,m=s&&n.attrs?Array.prototype.concat(n.attrs,l).filter(Boolean):l,b=r.shouldForwardProp;s&&n.shouldForwardProp&&(b=r.shouldForwardProp?function(e,i,s){return n.shouldForwardProp(e,i,s)&&r.shouldForwardProp(e,i,s)}:n.shouldForwardProp);var x,E,T,P,A,M=new en(i,f,s?n.componentStyle:void 0),N=M.isStatic&&0===l.length,D=function(e,n){return function(e,n,r,i){var s,o,a,l,c,u,d,p=e.attrs,f=e.componentStyle,m=e.defaultProps,y=e.foldedComponentIds,b=e.shouldForwardProp,x=e.styledComponentId,w=e.target,k=(s=(0,h.useContext)(eE),void 0===(o=m)&&(o=S),a=n.theme!==o.theme&&n.theme||s||o.theme||S,void 0===a&&(a=S),l=O({},n,{theme:a}),c={},p.forEach(function(e){var n,r,i,s=e;for(n in _(s)&&(s=s(l)),s)l[n]=c[n]="className"===n?(r=c[n],i=s[n],r&&i?r+" "+i:r||i):s[n]}),[l,c]),C=k[0],E=k[1],T=(u=ec(),d=(0,h.useContext)(ea)||eh,i?f.generateAndInjectStyles(S,u,d):f.generateAndInjectStyles(C,u,d)),P=E.$as||n.$as||E.as||n.as||w,A=ek(P),M=E!==n?O({},n,{},E):n,N={};for(var D in M)"$"!==D[0]&&"as"!==D&&("forwardedAs"===D?N.as=M[D]:(b?b(D,g,P):!A||g(D))&&(N[D]=M[D]));return n.style&&E.style!==n.style&&(N.style=O({},n.style,{},E.style)),N.className=Array.prototype.concat(y,x,T!==x?T:null,n.className,E.className).filter(Boolean).join(" "),N.ref=r,(0,h.createElement)(P,N)}(A,e,n,N)};return D.displayName=p,(A=h.forwardRef(D)).attrs=m,A.componentStyle=M,A.displayName=p,A.shouldForwardProp=b,A.foldedComponentIds=s?Array.prototype.concat(n.foldedComponentIds,n.styledComponentId):w,A.styledComponentId=f,A.target=s?n.target:n,A.withComponent=function(n){var s=r.componentId,o=function(e,n){if(null==e)return{};var r,i,s={},o=Object.keys(e);for(i=0;i<o.length;i++)n.indexOf(r=o[i])>=0||(s[r]=e[r]);return s}(r,["componentId"]),a=s&&s+"-"+(ek(n)?n:e_(k(n)));return e(n,O({},o,{attrs:m,componentId:a}),i)},Object.defineProperty(A,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=s?function e(n){for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];for(var o=0;o<i.length;o++){var a=i[o];if(eC(a))for(var l in a)"__proto__"!==l&&"constructor"!==l&&"prototype"!==l&&function(n,r,i){var s=n[i];eC(r)&&eC(s)?e(s,r):n[i]=r}(n,a[l],l)}return n}({},n.defaultProps,e):e}}),Object.defineProperty(A,"toString",{value:function(){return"."+A.styledComponentId}}),o&&y()(A,n,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),A},e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(e){eP[e]=eP(e)}),(o=(function(e,n){this.rules=e,this.componentId=n,this.isStatic=ee(e),U.registerId(this.componentId+1)}).prototype).createStyles=function(e,n,r,i){var s=i(ev(this.rules,n,r,i).join(""),""),o=this.componentId+e;r.insertRules(o,o,s)},o.removeStyles=function(e,n){n.clearRules(this.componentId+e)},o.renderStyles=function(e,n,r,i){e>2&&U.registerId(this.componentId+e),this.removeStyles(e,r),this.createStyles(e,n,r,i)},(a=(function(){var e=this;this._emitSheetCSS=function(){var n=e.instance.toString();if(!n)return"";var r=z();return"<style "+[r&&'nonce="'+r+'"',E+'="true"','data-styled-version="5.3.11"'].filter(Boolean).join(" ")+">"+n+"</style>"},this.getStyleTags=function(){return e.sealed?A(2):e._emitSheetCSS()},this.getStyleElement=function(){if(e.sealed)return A(2);var n,r=((n={})[E]="",n["data-styled-version"]="5.3.11",n.dangerouslySetInnerHTML={__html:e.instance.toString()},n),i=z();return i&&(r.nonce=i),[h.createElement("style",O({},r,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new U({isServer:!0}),this.sealed=!1}).prototype).collectStyles=function(e){return this.sealed?A(2):h.createElement(eu,{sheet:this.instance},e)},a.interleaveWithNodeStream=function(e){return A(3)};let eA=eP},53978:function(e){!function(){"use strict";var n={}.hasOwnProperty;function r(){for(var e="",s=0;s<arguments.length;s++){var o=arguments[s];o&&(e=i(e,function(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var s="";for(var o in e)n.call(e,o)&&e[o]&&(s=i(s,o));return s}(o)))}return e}function i(e,n){return n?e?e+" "+n:e+n:e}e.exports?(r.default=r,e.exports=r):"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("classnames",[],function(){return r}):window.classNames=r}()},94266:function(e,n,r){var i,s;s=i||(i={}),function(e){var n="object"==typeof globalThis?globalThis:"object"==typeof r.g?r.g:"object"==typeof self?self:"object"==typeof this?this:function(){try{return Function("return this;")()}catch(e){}}()||function(){try{return(0,eval)("(function() { return this; })()")}catch(e){}}(),i=o(s);function o(e,n){return function(r,i){Object.defineProperty(e,r,{configurable:!0,writable:!0,value:i}),n&&n(r,i)}}void 0!==n.Reflect&&(i=o(n.Reflect,i)),e(i,n),void 0===n.Reflect&&(n.Reflect=s)}(function(e,n){var r,i=Object.prototype.hasOwnProperty,s="function"==typeof Symbol,o=s&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",a=s&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",l="function"==typeof Object.create,h=({__proto__:[]})instanceof Array,c=!l&&!h,u={create:l?function(){return j(Object.create(null))}:h?function(){return j({__proto__:null})}:function(){return j({})},has:c?function(e,n){return i.call(e,n)}:function(e,n){return n in e},get:c?function(e,n){return i.call(e,n)?e[n]:void 0}:function(e,n){return e[n]}},d=Object.getPrototypeOf(Function),p="function"==typeof Map&&"function"==typeof Map.prototype.entries?Map:function(){var e={},n=[],r=function(){function e(e,n,r){this._index=0,this._keys=e,this._values=n,this._selector=r}return e.prototype["@@iterator"]=function(){return this},e.prototype[a]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var r=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=n,this._values=n):this._index++,{value:r,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=n,this._values=n),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=n,this._values=n),{value:e,done:!0}},e}();function i(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(i.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),i.prototype.has=function(e){return this._find(e,!1)>=0},i.prototype.get=function(e){var n=this._find(e,!1);return n>=0?this._values[n]:void 0},i.prototype.set=function(e,n){var r=this._find(e,!0);return this._values[r]=n,this},i.prototype.delete=function(n){var r=this._find(n,!1);if(r>=0){for(var i=this._keys.length,s=r+1;s<i;s++)this._keys[s-1]=this._keys[s],this._values[s-1]=this._values[s];return this._keys.length--,this._values.length--,N(n,this._cacheKey)&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},i.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},i.prototype.keys=function(){return new r(this._keys,this._values,s)},i.prototype.values=function(){return new r(this._keys,this._values,o)},i.prototype.entries=function(){return new r(this._keys,this._values,l)},i.prototype["@@iterator"]=function(){return this.entries()},i.prototype[a]=function(){return this.entries()},i.prototype._find=function(e,n){if(!N(this._cacheKey,e)){this._cacheIndex=-1;for(var r=0;r<this._keys.length;r++)if(N(this._keys[r],e)){this._cacheIndex=r;break}}return this._cacheIndex<0&&n&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},i;function s(e,n){return e}function o(e,n){return n}function l(e,n){return[e,n]}}(),f="function"==typeof Set&&"function"==typeof Set.prototype.entries?Set:function(){function e(){this._map=new p}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.keys()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[a]=function(){return this.keys()},e}(),g="function"==typeof WeakMap?WeakMap:function(){var e=u.create(),n=s();function r(){this._key=s()}return r.prototype.has=function(e){var n=o(e,!1);return void 0!==n&&u.has(n,this._key)},r.prototype.get=function(e){var n=o(e,!1);return void 0!==n?u.get(n,this._key):void 0},r.prototype.set=function(e,n){return o(e,!0)[this._key]=n,this},r.prototype.delete=function(e){var n=o(e,!1);return void 0!==n&&delete n[this._key]},r.prototype.clear=function(){this._key=s()},r;function s(){var n;do n="@@WeakMap@@"+function(){var e=function(e){if("function"==typeof Uint8Array){var n=new Uint8Array(16);return"undefined"!=typeof crypto?crypto.getRandomValues(n):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(n):a(n,16),n}return a(Array(e),e)}(16);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var n="",r=0;r<16;++r){var i=e[r];(4===r||6===r||8===r)&&(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}();while(u.has(e,n));return e[n]=!0,n}function o(e,r){if(!i.call(e,n)){if(!r)return;Object.defineProperty(e,n,{value:u.create()})}return e[n]}function a(e,n){for(var r=0;r<n;++r)e[r]=255*Math.random()|0;return e}}(),m=s?Symbol.for("@reflect-metadata:registry"):void 0,y=(!k(m)&&E(n.Reflect)&&Object.isExtensible(n.Reflect)&&(r=n.Reflect[m]),k(r)&&(r=function(){k(m)||void 0===n.Reflect||m in n.Reflect||"function"!=typeof n.Reflect.defineMetadata||(r=(e=n.Reflect).defineMetadata,i=e.hasOwnMetadata,s=e.getOwnMetadata,o=e.getOwnMetadataKeys,a=e.deleteMetadata,l=new g,h={isProviderFor:function(e,n){var r=l.get(e);return!!(!k(r)&&r.has(n))||!!o(e,n).length&&(k(r)&&(r=new f,l.set(e,r)),r.add(n),!0)},OrdinaryDefineOwnMetadata:r,OrdinaryHasOwnMetadata:i,OrdinaryGetOwnMetadata:s,OrdinaryOwnMetadataKeys:o,OrdinaryDeleteMetadata:a});var e,r,i,s,o,a,l,h,c,u,d,y=new g,O={registerProvider:function(e){if(!Object.isExtensible(O))throw Error("Cannot add provider to a frozen registry.");switch(!0){case h===e:break;case k(c):c=e;break;case c===e:break;case k(u):u=e;break;case u===e:break;default:void 0===d&&(d=new f),d.add(e)}},getProvider:b,setProvider:function(e,n,r){if(!function(e){if(k(e))throw TypeError();return c===e||u===e||!k(d)&&d.has(e)}(r))throw Error("Metadata provider not registered.");var i=b(e,n);if(i!==r){if(!k(i))return!1;var s=y.get(e);k(s)&&(s=new p,y.set(e,s)),s.set(n,r)}return!0}};return O;function b(e,n){var r,i=y.get(e);return k(i)||(r=i.get(n)),k(r)&&(r=function(e,n){if(!k(c)){if(c.isProviderFor(e,n))return c;if(!k(u)){if(u.isProviderFor(e,n))return c;if(!k(d))for(var r=I(d);;){var i=$(r);if(!i)return;var s=i.value;if(s.isProviderFor(e,n))return R(r),s}}}if(!k(h)&&h.isProviderFor(e,n))return h}(e,n),k(r)||(k(i)&&(i=new p,y.set(e,i)),i.set(n,r))),r}}()),!k(m)&&E(n.Reflect)&&Object.isExtensible(n.Reflect)&&Object.defineProperty(n.Reflect,m,{enumerable:!1,configurable:!1,writable:!1,value:r}),r),O=function(e){var n=new g,r={isProviderFor:function(e,r){var i=n.get(e);return!k(i)&&i.has(r)},OrdinaryDefineOwnMetadata:function(e,n,r,s){i(r,s,!0).set(e,n)},OrdinaryHasOwnMetadata:function(e,n,r){var s=i(n,r,!1);return!k(s)&&!!s.has(e)},OrdinaryGetOwnMetadata:function(e,n,r){var s=i(n,r,!1);if(!k(s))return s.get(e)},OrdinaryOwnMetadataKeys:function(e,n){var r=[],s=i(e,n,!1);if(k(s))return r;for(var o=I(s.keys()),a=0;;){var l=$(o);if(!l)return r.length=a,r;var h=l.value;try{r[a]=h}catch(e){try{R(o)}finally{throw e}}a++}},OrdinaryDeleteMetadata:function(e,r,s){var o=i(r,s,!1);if(k(o)||!o.delete(e))return!1;if(0===o.size){var a=n.get(r);k(a)||(a.delete(s),0===a.size&&n.delete(a))}return!0}};return y.registerProvider(r),r;function i(i,s,o){var a=n.get(i),l=!1;if(k(a)){if(!o)return;a=new p,n.set(i,a),l=!0}var h=a.get(s);if(k(h)){if(!o)return;if(h=new p,a.set(s,h),!e.setProvider(i,s,r))throw a.delete(s),l&&n.delete(i),Error("Wrong provider for target.")}return h}}(y);function b(e,n,r){var i=Q(n,r,!1);return!k(i)&&!!i.OrdinaryHasOwnMetadata(e,n,r)}function x(e,n,r){var i=Q(n,r,!1);if(!k(i))return i.OrdinaryGetOwnMetadata(e,n,r)}function w(e,n,r,i){Q(r,i,!0).OrdinaryDefineOwnMetadata(e,n,r,i)}function S(e,n){var r=Q(e,n,!1);return r?r.OrdinaryOwnMetadataKeys(e,n):[]}function _(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function k(e){return void 0===e}function C(e){return null===e}function E(e){return"object"==typeof e?null!==e:"function"==typeof e}e("decorate",function(e,n,r,i){if(k(r)){if(!P(e)||!M(n))throw TypeError();for(var s=e,o=n,a=s.length-1;a>=0;--a){var l=(0,s[a])(o);if(!k(l)&&!C(l)){if(!M(l))throw TypeError();o=l}}return o}if(!P(e)||!E(n)||!E(i)&&!k(i)&&!C(i))throw TypeError();return C(i)&&(i=void 0),function(e,n,r,i){for(var s=e.length-1;s>=0;--s){var o=(0,e[s])(n,r,i);if(!k(o)&&!C(o)){if(!E(o))throw TypeError();i=o}}return i}(e,n,r=T(r),i)}),e("metadata",function(e,n){return function(r,i){if(!E(r)||!k(i)&&!function(e){switch(_(e)){case 3:case 4:return!0;default:return!1}}(i))throw TypeError();w(e,n,r,i)}}),e("defineMetadata",function(e,n,r,i){if(!E(r))throw TypeError();return k(i)||(i=T(i)),w(e,n,r,i)}),e("hasMetadata",function(e,n,r){if(!E(n))throw TypeError();return k(r)||(r=T(r)),function e(n,r,i){if(b(n,r,i))return!0;var s=L(r);return!C(s)&&e(n,s,i)}(e,n,r)}),e("hasOwnMetadata",function(e,n,r){if(!E(n))throw TypeError();return k(r)||(r=T(r)),b(e,n,r)}),e("getMetadata",function(e,n,r){if(!E(n))throw TypeError();return k(r)||(r=T(r)),function e(n,r,i){if(b(n,r,i))return x(n,r,i);var s=L(r);if(!C(s))return e(n,s,i)}(e,n,r)}),e("getOwnMetadata",function(e,n,r){if(!E(n))throw TypeError();return k(r)||(r=T(r)),x(e,n,r)}),e("getMetadataKeys",function(e,n){if(!E(e))throw TypeError();return k(n)||(n=T(n)),function e(n,r){var i=S(n,r),s=L(n);if(null===s)return i;var o=e(s,r);if(o.length<=0)return i;if(i.length<=0)return o;for(var a=new f,l=[],h=0;h<i.length;h++){var c=i[h],u=a.has(c);u||(a.add(c),l.push(c))}for(var d=0;d<o.length;d++){var c=o[d],u=a.has(c);u||(a.add(c),l.push(c))}return l}(e,n)}),e("getOwnMetadataKeys",function(e,n){if(!E(e))throw TypeError();return k(n)||(n=T(n)),S(e,n)}),e("deleteMetadata",function(e,n,r){if(!E(n)||(k(r)||(r=T(r)),!E(n)))throw TypeError();k(r)||(r=T(r));var i=Q(n,r,!1);return!k(i)&&i.OrdinaryDeleteMetadata(e,n,r)});function T(e){var n=function(e,n){switch(_(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var r="string",i=D(e,o);if(void 0!==i){var s=i.call(e,r);if(E(s))throw TypeError();return s}return function(e,n){if("string"===n){var r=e.toString;if(A(r)){var i=r.call(e);if(!E(i))return i}var s=e.valueOf;if(A(s)){var i=s.call(e);if(!E(i))return i}}else{var s=e.valueOf;if(A(s)){var i=s.call(e);if(!E(i))return i}var o=e.toString;if(A(o)){var i=o.call(e);if(!E(i))return i}}throw TypeError()}(e,r)}(e,0);return"symbol"==typeof n?n:""+n}function P(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function A(e){return"function"==typeof e}function M(e){return"function"==typeof e}function N(e,n){return e===n||e!=e&&n!=n}function D(e,n){var r=e[n];if(null!=r){if(!A(r))throw TypeError();return r}}function I(e){var n=D(e,a);if(!A(n))throw TypeError();var r=n.call(e);if(!E(r))throw TypeError();return r}function $(e){var n=e.next();return!n.done&&n}function R(e){var n=e.return;n&&n.call(e)}function L(e){var n=Object.getPrototypeOf(e);if("function"!=typeof e||e===d||n!==d)return n;var r=e.prototype,i=r&&Object.getPrototypeOf(r);if(null==i||i===Object.prototype)return n;var s=i.constructor;return"function"!=typeof s||s===e?n:s}function Q(e,n,r){var i=y.getProvider(e,n);if(!k(i))return i;if(r){if(y.setProvider(e,n,O))return O;throw Error("Illegal state.")}}function j(e){return e.__=void 0,delete e.__,e}})},40005:function(e,n,r){"use strict";r.d(n,{A4:()=>y,Tb:()=>x,US:()=>O,X9:()=>m,pM:()=>b,sA:()=>w,zF:()=>g});var i,s,o=r(82481),a=o.Ay.record(o.Ay.string(),o.Ay.any()),l=o.Ay.object({id:o.Ay.string(),nodeID:o.Ay.string(),inputs:a,outputs:a.optional(),data:a,branch:o.Ay.string().optional()}),h={status:o.Ay.string(),terminated:o.Ay.boolean(),startTime:o.Ay.number(),endTime:o.Ay.number().optional(),timeCost:o.Ay.number()},c=o.Ay.object(h),u=o.Ay.object({id:o.Ay.string(),...h,snapshots:o.Ay.array(l)}),d=o.Ay.record(o.Ay.string(),u),p=o.Ay.object({id:o.Ay.string(),type:o.Ay.enum(["log","info","debug","error","warning"]),message:o.Ay.string(),nodeID:o.Ay.string().optional(),timestamp:o.Ay.number()}),f=o.Ay.record(o.Ay.enum(["log","info","debug","error","warning"]),o.Ay.array(p)),g=((i=g||{}).ServerInfo="ServerInfo",i.TaskRun="TaskRun",i.TaskReport="TaskReport",i.TaskResult="TaskResult",i.TaskCancel="TaskCancel",i.TaskValidate="TaskValidate",i),m={name:"TaskValidate",method:"POST",path:"/task/validate",module:"Task",schema:{input:o.Ay.object({schema:o.Ay.string(),inputs:a}),output:o.Ay.object({valid:o.Ay.boolean(),errors:o.Ay.array(o.Ay.string()).optional()})}},y={name:"TaskRun",method:"POST",path:"/task/run",module:"Task",schema:{input:o.Ay.object({schema:o.Ay.string(),inputs:a}),output:o.Ay.object({taskID:o.Ay.string()})}},O={name:"TaskResult",method:"GET",path:"/task/result",module:"Task",schema:{input:o.Ay.object({taskID:o.Ay.string()}),output:a}},b={name:"TaskReport",method:"GET",path:"/task/report",module:"Task",schema:{input:o.Ay.object({taskID:o.Ay.string()}),output:o.Ay.object({id:o.Ay.string(),inputs:a,outputs:a,workflowStatus:c,reports:d,messages:f})}},x={name:"TaskCancel",method:"PUT",path:"/task/cancel",module:"Task",schema:{input:o.Ay.object({taskID:o.Ay.string()}),output:o.Ay.object({success:o.Ay.boolean()})}};o.Ay.undefined(),o.Ay.object({name:o.Ay.string(),runtime:o.Ay.string(),version:o.Ay.string(),time:o.Ay.string()}),Symbol.for("Engine"),Symbol.for("Executor");var w=((s=w||{}).Pending="pending",s.Processing="processing",s.Succeeded="succeeded",s.Failed="failed",s.Canceled="canceled",s);Symbol.for("Validation")},11812:function(e,n,r){"use strict";var i,s,o,a,l,h,c,u;r.d(n,{KT:()=>e8,E3:()=>to,_G:()=>e7,lq:()=>tn,kr:()=>ts,tt:()=>tr,mc:()=>e4,WQ:()=>tt,i0:()=>e3}),r(94266);let d=Symbol.for("@inversifyjs/common/islazyServiceIdentifier");class p{[d];#t;constructor(e){this.#t=e,this[d]=!0}static is(e){return"object"==typeof e&&null!==e&&!0===e[d]}unwrap(){return this.#t()}}function f(e,n){return Reflect.getMetadata(n,e)}function g(e,n,r,i){let s=i(f(e,n)??r);Reflect.defineMetadata(n,s,e)}let m="named",y="name",O="unmanaged",b="optional",x="inject",w="multi_inject",S="post_construct",_="pre_destroy",k=[x,w,y,O,m,b],C=Symbol.for("@inversifyjs/core/InversifyCoreError");class E extends Error{[C];kind;constructor(e,n,r){super(n,r),this[C]=!0,this.kind=e}static is(e){return"object"==typeof e&&null!==e&&!0===e[C]}static isErrorOfKind(e,n){return E.is(e)&&e.kind===n}}function T(e,n){let r=[];for(let e=0;e<n.length;++e)void 0===n[e]&&r.push(e);if(r.length>0)throw new E(i.missingInjectionDecorator,`Found unexpected missing metadata on type "${e.name}" at constructor indexes "${r.join('", "')}".

Are you using @inject, @multiInject or @unmanaged decorators at those indexes?

If you're using typescript and want to rely on auto injection, set "emitDecoratorMetadata" compiler option to true`)}function P(e){return{kind:s.singleInjection,name:void 0,optional:!1,tags:new Map,targetName:void 0,value:e}}function A(e){let n=e.find(e=>e.key===x),r=e.find(e=>e.key===w);if(void 0!==e.find(e=>e.key===O)){if(void 0!==r||void 0!==n)throw new E(i.missingInjectionDecorator,"Expected a single @inject, @multiInject or @unmanaged metadata");return{kind:s.unmanaged}}if(void 0===r&&void 0===n)throw new E(i.missingInjectionDecorator,"Expected @inject, @multiInject or @unmanaged metadata");let o=e.find(e=>e.key===m),a=e.find(e=>e.key===b),l=e.find(e=>e.key===y);return{kind:void 0===n?s.multipleInjection:s.singleInjection,name:o?.value,optional:void 0!==a,tags:new Map(e.filter(e=>k.every(n=>e.key!==n)).map(e=>[e.key,e.value])),targetName:l?.value,value:void 0===n?r?.value:n.value}}function M(e,n,r){try{return A(r)}catch(r){throw E.isErrorOfKind(r,i.missingInjectionDecorator)?new E(i.missingInjectionDecorator,`Expected a single @inject, @multiInject or @unmanaged decorator at type "${e.name}" at constructor arguments at index "${n.toString()}"`,{cause:r}):r}}function N(e,n,r){try{return A(r)}catch(r){throw E.isErrorOfKind(r,i.missingInjectionDecorator)?new E(i.missingInjectionDecorator,`Expected a single @inject, @multiInject or @unmanaged decorator at type "${e.name}" at property "${n.toString()}"`,{cause:r}):r}}function D(e){let n=f(e,"inversify:tagged_props"),r=new Map;if(void 0!==n)for(let i of Reflect.ownKeys(n)){let s=n[i];r.set(i,N(e,i,s))}return r}function I(e){let n=f(e,S),r=f(e,_);return{constructorArguments:function(e){let n=f(e,"design:paramtypes"),r=f(e,"inversify:tagged"),i=[];if(void 0!==r)for(let[n,s]of Object.entries(r)){let r=parseInt(n);i[r]=M(e,r,s)}if(void 0!==n){for(let e=0;e<n.length;++e)if(void 0===i[e]){let r=n[e];i[e]=P(r)}}return T(e,i),i}(e),lifecycle:{postConstructMethodName:n?.value,preDestroyMethodName:r?.value},properties:D(e)}}function $(e,n){let r=n.getPropertiesMetadata(e),i=new Map;for(let n of Reflect.ownKeys(r)){let s=r[n];i.set(n,N(e,n,s))}return i}function R(e){let n=Object.getPrototypeOf(e.prototype);return n?.constructor}(l=i||(i={}))[l.injectionDecoratorConflict=0]="injectionDecoratorConflict",l[l.missingInjectionDecorator=1]="missingInjectionDecorator",l[l.planning=2]="planning",l[l.unknown=3]="unknown",(h=s||(s={}))[h.multipleInjection=0]="multipleInjection",h[h.singleInjection=1]="singleInjection",h[h.unmanaged=2]="unmanaged";class L{#n;constructor(e){this.#n=e}startsWith(e){return this.#n.startsWith(e)}endsWith(e){return this.#n.endsWith(e)}contains(e){return this.#n.includes(e)}equals(e){return this.#n===e}value(){return this.#n}}let Q="@inversifyjs/core/targetId";class j{#t;#r;#i;#s;#o;#a;constructor(e,n,r){this.#r=function(){let e=f(Object,Q)??0;return e===Number.MAX_SAFE_INTEGER?g(Object,Q,e,()=>Number.MIN_SAFE_INTEGER):g(Object,Q,e,e=>e+1),e}(),this.#i=e,this.#s=void 0,this.#t=n,this.#o=new L("string"==typeof e?e:e.toString().slice(7,-1)),this.#a=r}get id(){return this.#r}get identifier(){return this.#i}get metadata(){var e;return void 0===this.#s&&(this.#s=(e=this.#t).kind===s.unmanaged?[{key:O,value:!0}]:function(e){let n=[function(e){let n;switch(e.kind){case s.multipleInjection:n={key:w,value:e.value};break;case s.singleInjection:n={key:x,value:e.value}}return n}(e)];for(let[r,i]of(void 0!==e.name&&n.push({key:m,value:e.name}),e.optional&&n.push({key:b,value:!0}),e.tags))n.push({key:r,value:i});return void 0!==e.targetName&&n.push({key:y,value:e.targetName}),n}(e)),this.#s}get name(){return this.#o}get type(){return this.#a}get serviceIdentifier(){return p.is(this.#t.value)?this.#t.value.unwrap():this.#t.value}getCustomTags(){return[...this.#t.tags.entries()].map(([e,n])=>({key:e,value:n}))}getNamedTag(){return void 0===this.#t.name?null:{key:m,value:this.#t.name}}hasTag(e){return this.metadata.some(n=>n.key===e)}isArray(){return this.#t.kind===s.multipleInjection}isNamed(){return void 0!==this.#t.name}isOptional(){return this.#t.optional}isTagged(){return this.#t.tags.size>0}matchesArray(e){return this.isArray()&&this.#t.value===e}matchesNamedTag(e){return this.#t.name===e}matchesTag(e){return n=>this.metadata.some(r=>r.key===e&&r.value===n)}}let V=e=>{var n,r;return n=void 0===e?I:n=>(function(e,n){let r=f(e,S),i=f(e,_);return{constructorArguments:function(e,n){let r=n.getConstructorMetadata(e),i=[];for(let[n,s]of Object.entries(r.userGeneratedMetadata)){let r=parseInt(n);i[r]=M(e,r,s)}if(void 0!==r.compilerGeneratedMetadata){for(let e=0;e<r.compilerGeneratedMetadata.length;++e)if(void 0===i[e]){let n=r.compilerGeneratedMetadata[e];i[e]=P(n)}}return T(e,i),i}(e,n),lifecycle:{postConstructMethodName:r?.value,preDestroyMethodName:i?.value},properties:$(e,n)}})(n,e),r=void 0===e?D:n=>$(n,e),function(e){let i=n(e),o=R(e);for(;void 0!==o&&o!==Object;){for(let[e,n]of r(o))i.properties.has(e)||i.properties.set(e,n);o=R(o)}let a=[];for(let e of i.constructorArguments)if(e.kind!==s.unmanaged){let n=e.targetName??"";a.push(new j(n,e,"ConstructorArgument"))}for(let[e,n]of i.properties)if(n.kind!==s.unmanaged){let r=n.targetName??e;a.push(new j(r,n,"ClassProperty"))}return a}},z="named",B="name",F="unmanaged",Z="optional",q="inject",W="multi_inject",X="inversify:tagged",U="inversify:tagged_props",Y="inversify:paramtypes",G="design:paramtypes",H="post_construct",K="pre_destroy",J=[q,W,B,F,z,Z];Object.freeze({__proto__:null,DESIGN_PARAM_TYPES:G,INJECT_TAG:q,MULTI_INJECT_TAG:W,NAMED_TAG:z,NAME_TAG:B,NON_CUSTOM_TAG_KEYS:J,OPTIONAL_TAG:Z,PARAM_TYPES:Y,POST_CONSTRUCT:H,PRE_DESTROY:K,TAGGED:X,TAGGED_PROP:U,UNMANAGED_TAG:F});let ee="Request",et="Singleton",en="Transient",er="ConstantValue",ei="Constructor",es="DynamicValue",eo="Factory",ea="Function",el="Instance",eh="Provider",ec=0;class eu{id;moduleId;activated;serviceIdentifier;implementationType;cache;dynamicValue;scope;type;factory;provider;constraint;onActivation;onDeactivation;constructor(e,n){this.id=ec++,this.activated=!1,this.serviceIdentifier=e,this.scope=n,this.type="Invalid",this.constraint=e=>!0,this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.onDeactivation=null,this.dynamicValue=null}clone(){let e=new eu(this.serviceIdentifier,this.scope);return e.activated=e.scope===et&&this.activated,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.onDeactivation=this.onDeactivation,e.cache=this.cache,e}}let ed="Metadata key was used more than once in a parameter:",ep="NULL argument",ef="Key Not Found",eg="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",em=(e,n)=>`onDeactivation() error in class ${e}: ${n}`;class ey{getConstructorMetadata(e){return{compilerGeneratedMetadata:Reflect.getMetadata(G,e)??[],userGeneratedMetadata:Reflect.getMetadata(X,e)??{}}}getPropertiesMetadata(e){return Reflect.getMetadata(U,e)??{}}}function eO(e){return e instanceof RangeError||"Maximum call stack size exceeded"===e.message}function ev(e){return"function"==typeof e?e.name:"symbol"==typeof e?e.toString():e}function eb(e,n,r){let i="",s=r(e,n);return 0!==s.length&&(i="\nRegistered bindings:",s.forEach(e=>{let n="Object";null!==e.implementationType&&(n=ex(e.implementationType)),i=`${i}
 ${n}`,e.constraint.metaData&&(i=`${i} - ${e.constraint.metaData}`)})),i}function ex(e){if(null!=e.name&&""!==e.name)return e.name;{let n=e.toString(),r=n.match(/^function\s*([^\s(]+)/);return null===r?`Anonymous function: ${n}`:r[1]}}function ew(e){return`{"key":"${e.key.toString()}","value":"${e.value.toString()}"}`}(c=o||(o={}))[c.MultipleBindingsAvailable=2]="MultipleBindingsAvailable",c[c.NoBindingsAvailable=0]="NoBindingsAvailable",c[c.OnlyOneBindingAvailable=1]="OnlyOneBindingAvailable";class eS{id;container;plan;currentRequest;constructor(e){this.id=ec++,this.container=e}addPlan(e){this.plan=e}setCurrentRequest(e){this.currentRequest=e}}class e_{key;value;constructor(e,n){this.key=e,this.value=n}toString(){return this.key===z?`named: ${String(this.value).toString()} `:`tagged: { key:${this.key.toString()}, value: ${String(this.value)} }`}}class ek{parentContext;rootRequest;constructor(e,n){this.parentContext=e,this.rootRequest=n}}class eC{id;serviceIdentifier;parentContext;parentRequest;bindings;childRequests;target;requestScope;constructor(e,n,r,i,s){this.id=ec++,this.serviceIdentifier=e,this.parentContext=n,this.parentRequest=r,this.target=s,this.childRequests=[],this.bindings=Array.isArray(i)?i:[i],this.requestScope=null===r?new Map:null}addChildRequest(e,n,r){let i=new eC(e,this.parentContext,this,n,r);return this.childRequests.push(i),i}}function eE(e){return e._bindingDictionary}function eT(e,n,r,i,s){let a=eA(r.container,s.serviceIdentifier),l=[];return a.length===o.NoBindingsAvailable&&!0===r.container.options.autoBindInjectable&&"function"==typeof s.serviceIdentifier&&e.getConstructorMetadata(s.serviceIdentifier).compilerGeneratedMetadata&&(r.container.bind(s.serviceIdentifier).toSelf(),a=eA(r.container,s.serviceIdentifier)),l=n?a:a.filter(e=>{let n=new eC(e.serviceIdentifier,r,i,e,s);return e.constraint(n)}),function(e,n,r,i,s){switch(n.length){case o.NoBindingsAvailable:if(i.isOptional())return;{let n=ev(e),o="No matching bindings found for serviceIdentifier:";throw o+=function(e,n){if(n.isTagged()||n.isNamed()){let r="",i=n.getNamedTag(),s=n.getCustomTags();return null!==i&&(r+=ew(i)+"\n"),null!==s&&s.forEach(e=>{r+=ew(e)+"\n"}),` ${e}
 ${e} - ${r}`}return` ${e}`}(n,i),o+=eb(s,n,eA),null!==r&&(o+=`
Trying to resolve bindings for "${ev(r.serviceIdentifier)}"`),Error(o)}case o.OnlyOneBindingAvailable:return;case o.MultipleBindingsAvailable:default:if(i.isArray())return;{let n=ev(e),r=`Ambiguous match found for serviceIdentifier: ${n}`;throw Error(r+=eb(s,n,eA))}}}(s.serviceIdentifier,l,i,s,r.container),l}function eP(e,n){let r=[new e_(n.isMultiInject?W:q,e)];return void 0!==n.customTag&&r.push(new e_(n.customTag.key,n.customTag.value)),!0===n.isOptional&&r.push(new e_(Z,!0)),r}function eA(e,n){let r=[],i=eE(e);return i.hasKey(n)?r=i.get(n):null!==e.parent&&(r=eA(e.parent,n)),r}function eM(e){return("object"==typeof e&&null!==e||"function"==typeof e)&&"function"==typeof e.then}function eN(e){return!!eM(e)||Array.isArray(e)&&e.some(eM)}let eD=async(e,n)=>{try{e.cache=await n}catch(n){throw e.cache=null,e.activated=!1,n}};function eI(e){let n=new e.constr(...e.constructorInjections);return e.propertyRequests.forEach((r,i)=>{let s=r.target.identifier,o=e.propertyInjections[i];r.target.isOptional()&&void 0===o||(n[s]=o)}),n}async function e$(e){let n=[];for(let r of e)Array.isArray(r)?n.push(Promise.all(r)):n.push(r);return Promise.all(n)}function eR(e,n){let r=function(e,n){var r,i;if(Reflect.hasMetadata(H,e)){let s=Reflect.getMetadata(H,e);try{return n[s.value]?.()}catch(n){if(n instanceof Error)throw Error((r=e.name,i=n.message,`@postConstruct error in class ${r}: ${i}`))}}}(e,n);return eM(r)?r.then(()=>n):n}(u=a||(a={})).DynamicValue="toDynamicValue",u.Factory="toFactory",u.Provider="toProvider";let eL=e=>n=>{n.parentContext.setCurrentRequest(n);let r=n.bindings,i=n.childRequests,s=n.target&&n.target.isArray(),o=!(n.parentRequest&&n.parentRequest.target&&n.target&&n.parentRequest.target.matchesArray(n.target.serviceIdentifier));return s&&o?i.map(n=>eL(e)(n)):n.target.isOptional()&&0===r.length?void 0:eQ(e,n,r[0])},eQ=(e,n,r)=>{var i,s;let o;return i=()=>{let i=((e,n,r)=>{let i,s=n.childRequests;switch((e=>{let n=null;switch(e.type){case er:case ea:n=e.cache;break;case ei:case el:n=e.implementationType;break;case es:n=e.dynamicValue;break;case eh:n=e.provider;break;case eo:n=e.factory}if(null===n){let n=ev(e.serviceIdentifier);throw Error(`Invalid binding type: ${n}`)}})(r),r.type){case er:case ea:i=r.cache;break;case ei:i=r.implementationType;break;case el:i=function(e,n,r,i){e.scope!==et&&function(e,n){let r=`Class cannot be instantiated in ${e.scope===ee?"request":"transient"} scope.`;if("function"==typeof e.onDeactivation)throw Error(em(n.name,r));if(Reflect.hasMetadata(K,n))throw Error(`@preDestroy error in class ${n.name}: ${r}`)}(e,n);let s=function(e,n,r){let i;if(n.length>0){let s=n.reduce((e,n)=>{let i=r(n);return"ConstructorArgument"===n.target.type?e.constructorInjections.push(i):(e.propertyRequests.push(n),e.propertyInjections.push(i)),e.isAsync||(e.isAsync=eN(i)),e},{constructorInjections:[],isAsync:!1,propertyInjections:[],propertyRequests:[]}),o={...s,constr:e};i=s.isAsync?async function(e){let n=await e$(e.constructorInjections),r=await e$(e.propertyInjections);return eI({...e,constructorInjections:n,propertyInjections:r})}(o):eI(o)}else i=new e;return i}(n,r,i);return eM(s)?s.then(e=>eR(n,e)):eR(n,s)}(r,r.implementationType,s,eL(e));break;default:i=((e,n)=>{let r=(e=>{switch(e.type){case eo:return{factory:e.factory,factoryType:a.Factory};case eh:return{factory:e.provider,factoryType:a.Provider};case es:return{factory:e.dynamicValue,factoryType:a.DynamicValue};default:throw Error(`Unexpected factory type ${e.type}`)}})(e);try{return r.factory.bind(e)(n)}catch(e){if(eO(e)){var i,s;throw Error((i=r.factoryType,s=n.currentRequest.serviceIdentifier.toString(),`It looks like there is a circular dependency in one of the '${i}' bindings. Please investigate bindings with service identifier '${s}'.`))}throw e}})(r,n.parentContext)}return i})(e,n,r);return eM(i)?i.then(e=>ej(n,r,e)):ej(n,r,i)},null!==(o=r.scope===et&&r.activated?r.cache:r.scope===ee&&e.has(r.id)?e.get(r.id):null)||(o=i(),s=o,r.scope===et&&(r.cache=s,r.activated=!0,eM(s)&&eD(r,s)),r.scope===ee&&(e.has(r.id)||e.set(r.id,s))),o};function ej(e,n,r){let i=eV(e.parentContext,n,r),s=eZ(e.parentContext.container),o,a=s.next();do{o=a.value;let n=e.parentContext,r=eF(o,e.serviceIdentifier);i=eM(i)?eB(r,n,i):ez(r,n,i),a=s.next()}while(!0!==a.done&&!eE(o).hasKey(e.serviceIdentifier));return i}let eV=(e,n,r)=>"function"==typeof n.onActivation?n.onActivation(e,r):r,ez=(e,n,r)=>{let i=e.next();for(;!0!==i.done;){if(eM(r=i.value(n,r)))return eB(e,n,r);i=e.next()}return r},eB=async(e,n,r)=>{let i=await r,s=e.next();for(;!0!==s.done;)i=await s.value(n,i),s=e.next();return i},eF=(e,n)=>{let r=e._activations;return r.hasKey(n)?r.get(n).values():[].values()},eZ=e=>{let n=[e],r=e.parent;for(;null!==r;)n.push(r),r=r.parent;return{next:()=>{let e=n.pop();return void 0!==e?{done:!1,value:e}:{done:!0,value:void 0}}}},eq=(e,n)=>{let r=e.parentRequest;return null!==r&&(!!n(r)||eq(r,n))},eW=e=>n=>{let r=r=>null!==r&&null!==r.target&&r.target.matchesTag(e)(n);return r.metaData=new e_(e,n),r},eX=eW(z),eU=e=>n=>{let r=null;return null!==n&&((r=n.bindings[0],"string"==typeof e)?r.serviceIdentifier===e:e===n.bindings[0].implementationType)};class eY{_binding;constructor(e){this._binding=e}when(e){return this._binding.constraint=e,new eG(this._binding)}whenTargetNamed(e){return this._binding.constraint=eX(e),new eG(this._binding)}whenTargetIsDefault(){return this._binding.constraint=e=>null!==e&&null!==e.target&&!e.target.isNamed()&&!e.target.isTagged(),new eG(this._binding)}whenTargetTagged(e,n){return this._binding.constraint=eW(e)(n),new eG(this._binding)}whenInjectedInto(e){return this._binding.constraint=n=>null!==n&&eU(e)(n.parentRequest),new eG(this._binding)}whenParentNamed(e){return this._binding.constraint=n=>null!==n&&eX(e)(n.parentRequest),new eG(this._binding)}whenParentTagged(e,n){return this._binding.constraint=r=>null!==r&&eW(e)(n)(r.parentRequest),new eG(this._binding)}whenAnyAncestorIs(e){return this._binding.constraint=n=>null!==n&&eq(n,eU(e)),new eG(this._binding)}whenNoAncestorIs(e){return this._binding.constraint=n=>null!==n&&!eq(n,eU(e)),new eG(this._binding)}whenAnyAncestorNamed(e){return this._binding.constraint=n=>null!==n&&eq(n,eX(e)),new eG(this._binding)}whenNoAncestorNamed(e){return this._binding.constraint=n=>null!==n&&!eq(n,eX(e)),new eG(this._binding)}whenAnyAncestorTagged(e,n){return this._binding.constraint=r=>null!==r&&eq(r,eW(e)(n)),new eG(this._binding)}whenNoAncestorTagged(e,n){return this._binding.constraint=r=>null!==r&&!eq(r,eW(e)(n)),new eG(this._binding)}whenAnyAncestorMatches(e){return this._binding.constraint=n=>null!==n&&eq(n,e),new eG(this._binding)}whenNoAncestorMatches(e){return this._binding.constraint=n=>null!==n&&!eq(n,e),new eG(this._binding)}}class eG{_binding;constructor(e){this._binding=e}onActivation(e){return this._binding.onActivation=e,new eY(this._binding)}onDeactivation(e){return this._binding.onDeactivation=e,new eY(this._binding)}}class eH{_bindingWhenSyntax;_bindingOnSyntax;_binding;constructor(e){this._binding=e,this._bindingWhenSyntax=new eY(this._binding),this._bindingOnSyntax=new eG(this._binding)}when(e){return this._bindingWhenSyntax.when(e)}whenTargetNamed(e){return this._bindingWhenSyntax.whenTargetNamed(e)}whenTargetIsDefault(){return this._bindingWhenSyntax.whenTargetIsDefault()}whenTargetTagged(e,n){return this._bindingWhenSyntax.whenTargetTagged(e,n)}whenInjectedInto(e){return this._bindingWhenSyntax.whenInjectedInto(e)}whenParentNamed(e){return this._bindingWhenSyntax.whenParentNamed(e)}whenParentTagged(e,n){return this._bindingWhenSyntax.whenParentTagged(e,n)}whenAnyAncestorIs(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)}whenNoAncestorIs(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)}whenAnyAncestorNamed(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)}whenAnyAncestorTagged(e,n){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,n)}whenNoAncestorNamed(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)}whenNoAncestorTagged(e,n){return this._bindingWhenSyntax.whenNoAncestorTagged(e,n)}whenAnyAncestorMatches(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)}whenNoAncestorMatches(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)}onActivation(e){return this._bindingOnSyntax.onActivation(e)}onDeactivation(e){return this._bindingOnSyntax.onDeactivation(e)}}class eK{_binding;constructor(e){this._binding=e}inRequestScope(){return this._binding.scope=ee,new eH(this._binding)}inSingletonScope(){return this._binding.scope=et,new eH(this._binding)}inTransientScope(){return this._binding.scope=en,new eH(this._binding)}}class eJ{_bindingInSyntax;_bindingWhenSyntax;_bindingOnSyntax;_binding;constructor(e){this._binding=e,this._bindingWhenSyntax=new eY(this._binding),this._bindingOnSyntax=new eG(this._binding),this._bindingInSyntax=new eK(e)}inRequestScope(){return this._bindingInSyntax.inRequestScope()}inSingletonScope(){return this._bindingInSyntax.inSingletonScope()}inTransientScope(){return this._bindingInSyntax.inTransientScope()}when(e){return this._bindingWhenSyntax.when(e)}whenTargetNamed(e){return this._bindingWhenSyntax.whenTargetNamed(e)}whenTargetIsDefault(){return this._bindingWhenSyntax.whenTargetIsDefault()}whenTargetTagged(e,n){return this._bindingWhenSyntax.whenTargetTagged(e,n)}whenInjectedInto(e){return this._bindingWhenSyntax.whenInjectedInto(e)}whenParentNamed(e){return this._bindingWhenSyntax.whenParentNamed(e)}whenParentTagged(e,n){return this._bindingWhenSyntax.whenParentTagged(e,n)}whenAnyAncestorIs(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)}whenNoAncestorIs(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)}whenAnyAncestorNamed(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)}whenAnyAncestorTagged(e,n){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,n)}whenNoAncestorNamed(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)}whenNoAncestorTagged(e,n){return this._bindingWhenSyntax.whenNoAncestorTagged(e,n)}whenAnyAncestorMatches(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)}whenNoAncestorMatches(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)}onActivation(e){return this._bindingOnSyntax.onActivation(e)}onDeactivation(e){return this._bindingOnSyntax.onDeactivation(e)}}class e0{_binding;constructor(e){this._binding=e}to(e){return this._binding.type=el,this._binding.implementationType=e,new eJ(this._binding)}toSelf(){if("function"!=typeof this._binding.serviceIdentifier)throw Error("The toSelf function can only be applied when a constructor is used as service identifier");let e=this._binding.serviceIdentifier;return this.to(e)}toConstantValue(e){return this._binding.type=er,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=et,new eH(this._binding)}toDynamicValue(e){return this._binding.type=es,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new eJ(this._binding)}toConstructor(e){return this._binding.type=ei,this._binding.implementationType=e,this._binding.scope=et,new eH(this._binding)}toFactory(e){return this._binding.type=eo,this._binding.factory=e,this._binding.scope=et,new eH(this._binding)}toFunction(e){if("function"!=typeof e)throw Error("Value provided to function binding must be a function!");let n=this.toConstantValue(e);return this._binding.type=ea,this._binding.scope=et,n}toAutoFactory(e){return this._binding.type=eo,this._binding.factory=n=>()=>n.container.get(e),this._binding.scope=et,new eH(this._binding)}toAutoNamedFactory(e){return this._binding.type=eo,this._binding.factory=n=>r=>n.container.getNamed(e,r),new eH(this._binding)}toProvider(e){return this._binding.type=eh,this._binding.provider=e,this._binding.scope=et,new eH(this._binding)}toService(e){this._binding.type=es,Object.defineProperty(this._binding,"cache",{configurable:!0,enumerable:!0,get:()=>null,set(e){}}),this._binding.dynamicValue=n=>{try{return n.container.get(e)}catch(r){return n.container.getAsync(e)}},this._binding.implementationType=null}}class e1{bindings;activations;deactivations;middleware;moduleActivationStore;static of(e,n,r,i,s){let o=new e1;return o.bindings=e,o.middleware=n,o.deactivations=i,o.activations=r,o.moduleActivationStore=s,o}}class e2{_map;constructor(){this._map=new Map}getMap(){return this._map}add(e,n){if(this._checkNonNulish(e),null==n)throw Error(ep);let r=this._map.get(e);void 0!==r?r.push(n):this._map.set(e,[n])}get(e){this._checkNonNulish(e);let n=this._map.get(e);if(void 0!==n)return n;throw Error(ef)}remove(e){if(this._checkNonNulish(e),!this._map.delete(e))throw Error(ef)}removeIntersection(e){this.traverse((n,r)=>{let i=e.hasKey(n)?e.get(n):void 0;if(void 0!==i){let e=r.filter(e=>!i.some(n=>e===n));this._setValue(n,e)}})}removeByCondition(e){let n=[];return this._map.forEach((r,i)=>{let s=[];for(let i of r)e(i)?n.push(i):s.push(i);this._setValue(i,s)}),n}hasKey(e){return this._checkNonNulish(e),this._map.has(e)}clone(){let e=new e2;return this._map.forEach((n,r)=>{n.forEach(n=>{e.add(r,"object"==typeof n&&null!==n&&"clone"in n&&"function"==typeof n.clone?n.clone():n)})}),e}traverse(e){this._map.forEach((n,r)=>{e(r,n)})}_checkNonNulish(e){if(null==e)throw Error(ep)}_setValue(e,n){n.length>0?this._map.set(e,n):this._map.delete(e)}}class e5{_map=new Map;remove(e){let n=this._map.get(e);return void 0===n?this._getEmptyHandlersStore():(this._map.delete(e),n)}addDeactivation(e,n,r){this._getModuleActivationHandlers(e).onDeactivations.add(n,r)}addActivation(e,n,r){this._getModuleActivationHandlers(e).onActivations.add(n,r)}clone(){let e=new e5;return this._map.forEach((n,r)=>{e._map.set(r,{onActivations:n.onActivations.clone(),onDeactivations:n.onDeactivations.clone()})}),e}_getModuleActivationHandlers(e){let n=this._map.get(e);return void 0===n&&(n=this._getEmptyHandlersStore(),this._map.set(e,n)),n}_getEmptyHandlersStore(){return{onActivations:new e2,onDeactivations:new e2}}}class e4{id;parent;options;_middleware;_bindingDictionary;_activations;_deactivations;_snapshots;_metadataReader;_moduleActivationStore;constructor(e){let n=e||{};if("object"!=typeof n)throw Error("Invalid Container constructor argument. Container options must be an object.");if(void 0===n.defaultScope)n.defaultScope=en;else if(n.defaultScope!==et&&n.defaultScope!==en&&n.defaultScope!==ee)throw Error('Invalid Container option. Default scope must be a string ("singleton" or "transient").');if(void 0===n.autoBindInjectable)n.autoBindInjectable=!1;else if("boolean"!=typeof n.autoBindInjectable)throw Error("Invalid Container option. Auto bind injectable must be a boolean");if(void 0===n.skipBaseClassChecks)n.skipBaseClassChecks=!1;else if("boolean"!=typeof n.skipBaseClassChecks)throw Error("Invalid Container option. Skip base check must be a boolean");this.options={autoBindInjectable:n.autoBindInjectable,defaultScope:n.defaultScope,skipBaseClassChecks:n.skipBaseClassChecks},this.id=ec++,this._bindingDictionary=new e2,this._snapshots=[],this._middleware=null,this._activations=new e2,this._deactivations=new e2,this.parent=null,this._metadataReader=new ey,this._moduleActivationStore=new e5}static merge(e,n,...r){let i=new e4,s=[e,n,...r].map(e=>eE(e)),o=eE(i);return s.forEach(e=>{e.traverse((e,n)=>{n.forEach(e=>{o.add(e.serviceIdentifier,e.clone())})})}),i}load(...e){let n=this._getContainerModuleHelpersFactory();for(let r of e){let e=n(r.id);r.registry(e.bindFunction,e.unbindFunction,e.isboundFunction,e.rebindFunction,e.unbindAsyncFunction,e.onActivationFunction,e.onDeactivationFunction)}}async loadAsync(...e){let n=this._getContainerModuleHelpersFactory();for(let r of e){let e=n(r.id);await r.registry(e.bindFunction,e.unbindFunction,e.isboundFunction,e.rebindFunction,e.unbindAsyncFunction,e.onActivationFunction,e.onDeactivationFunction)}}unload(...e){e.forEach(e=>{let n=this._removeModuleBindings(e.id);this._deactivateSingletons(n),this._removeModuleHandlers(e.id)})}async unloadAsync(...e){for(let n of e){let e=this._removeModuleBindings(n.id);await this._deactivateSingletonsAsync(e),this._removeModuleHandlers(n.id)}}bind(e){return this._bind(this._buildBinding(e))}rebind(e){return this.unbind(e),this.bind(e)}async rebindAsync(e){return await this.unbindAsync(e),this.bind(e)}unbind(e){if(this._bindingDictionary.hasKey(e)){let n=this._bindingDictionary.get(e);this._deactivateSingletons(n)}this._removeServiceFromDictionary(e)}async unbindAsync(e){if(this._bindingDictionary.hasKey(e)){let n=this._bindingDictionary.get(e);await this._deactivateSingletonsAsync(n)}this._removeServiceFromDictionary(e)}unbindAll(){this._bindingDictionary.traverse((e,n)=>{this._deactivateSingletons(n)}),this._bindingDictionary=new e2}async unbindAllAsync(){let e=[];this._bindingDictionary.traverse((n,r)=>{e.push(this._deactivateSingletonsAsync(r))}),await Promise.all(e),this._bindingDictionary=new e2}onActivation(e,n){this._activations.add(e,n)}onDeactivation(e,n){this._deactivations.add(e,n)}isBound(e){let n=this._bindingDictionary.hasKey(e);return!n&&this.parent&&(n=this.parent.isBound(e)),n}isCurrentBound(e){return this._bindingDictionary.hasKey(e)}isBoundNamed(e,n){return this.isBoundTagged(e,z,n)}isBoundTagged(e,n,r){let i=!1;if(this._bindingDictionary.hasKey(e)){let o=this._bindingDictionary.get(e),a=function(e,n,r){let i=A(eP(n,r));if(i.kind===s.unmanaged)throw Error("Unexpected metadata when creating target");let o=new j("",i,"Variable");return new eC(n,new eS(e),null,[],o)}(this,e,{customTag:{key:n,value:r},isMultiInject:!1});i=o.some(e=>e.constraint(a))}return!i&&this.parent&&(i=this.parent.isBoundTagged(e,n,r)),i}snapshot(){this._snapshots.push(e1.of(this._bindingDictionary.clone(),this._middleware,this._activations.clone(),this._deactivations.clone(),this._moduleActivationStore.clone()))}restore(){let e=this._snapshots.pop();if(void 0===e)throw Error("No snapshot available to restore.");this._bindingDictionary=e.bindings,this._activations=e.activations,this._deactivations=e.deactivations,this._middleware=e.middleware,this._moduleActivationStore=e.moduleActivationStore}createChild(e){let n=new e4(e||this.options);return n.parent=this,n}applyMiddleware(...e){let n=this._middleware?this._middleware:this._planAndResolve();this._middleware=e.reduce((e,n)=>n(e),n)}applyCustomMetadataReader(e){this._metadataReader=e}get(e){let n=this._getNotAllArgs(e,!1,!1);return this._getButThrowIfAsync(n)}async getAsync(e){let n=this._getNotAllArgs(e,!1,!1);return this._get(n)}getTagged(e,n,r){let i=this._getNotAllArgs(e,!1,!1,n,r);return this._getButThrowIfAsync(i)}async getTaggedAsync(e,n,r){let i=this._getNotAllArgs(e,!1,!1,n,r);return this._get(i)}getNamed(e,n){return this.getTagged(e,z,n)}async getNamedAsync(e,n){return this.getTaggedAsync(e,z,n)}getAll(e,n){let r=this._getAllArgs(e,n,!1);return this._getButThrowIfAsync(r)}async getAllAsync(e,n){let r=this._getAllArgs(e,n,!1);return this._getAll(r)}getAllTagged(e,n,r){let i=this._getNotAllArgs(e,!0,!1,n,r);return this._getButThrowIfAsync(i)}async getAllTaggedAsync(e,n,r){let i=this._getNotAllArgs(e,!0,!1,n,r);return this._getAll(i)}getAllNamed(e,n){return this.getAllTagged(e,z,n)}async getAllNamedAsync(e,n){return this.getAllTaggedAsync(e,z,n)}resolve(e){let n=this.isBound(e);n||this.bind(e).toSelf();let r=this.get(e);return n||this.unbind(e),r}tryGet(e){let n=this._getNotAllArgs(e,!1,!0);return this._getButThrowIfAsync(n)}async tryGetAsync(e){let n=this._getNotAllArgs(e,!1,!0);return this._get(n)}tryGetTagged(e,n,r){let i=this._getNotAllArgs(e,!1,!0,n,r);return this._getButThrowIfAsync(i)}async tryGetTaggedAsync(e,n,r){let i=this._getNotAllArgs(e,!1,!0,n,r);return this._get(i)}tryGetNamed(e,n){return this.tryGetTagged(e,z,n)}async tryGetNamedAsync(e,n){return this.tryGetTaggedAsync(e,z,n)}tryGetAll(e,n){let r=this._getAllArgs(e,n,!0);return this._getButThrowIfAsync(r)}async tryGetAllAsync(e,n){let r=this._getAllArgs(e,n,!0);return this._getAll(r)}tryGetAllTagged(e,n,r){let i=this._getNotAllArgs(e,!0,!0,n,r);return this._getButThrowIfAsync(i)}async tryGetAllTaggedAsync(e,n,r){let i=this._getNotAllArgs(e,!0,!0,n,r);return this._getAll(i)}tryGetAllNamed(e,n){return this.tryGetAllTagged(e,z,n)}async tryGetAllNamedAsync(e,n){return this.tryGetAllTaggedAsync(e,z,n)}_preDestroy(e,n){if(void 0!==e&&Reflect.hasMetadata(K,e)){let r=Reflect.getMetadata(K,e);return n[r.value]?.()}}_removeModuleHandlers(e){let n=this._moduleActivationStore.remove(e);this._activations.removeIntersection(n.onActivations),this._deactivations.removeIntersection(n.onDeactivations)}_removeModuleBindings(e){return this._bindingDictionary.removeByCondition(n=>n.moduleId===e)}_deactivate(e,n){let r=null==n?void 0:Object.getPrototypeOf(n).constructor;try{if(this._deactivations.hasKey(e.serviceIdentifier)){let i=this._deactivateContainer(n,this._deactivations.get(e.serviceIdentifier).values());if(eM(i))return this._handleDeactivationError(i.then(async()=>this._propagateContainerDeactivationThenBindingAndPreDestroyAsync(e,n,r)),e.serviceIdentifier)}let i=this._propagateContainerDeactivationThenBindingAndPreDestroy(e,n,r);if(eM(i))return this._handleDeactivationError(i,e.serviceIdentifier)}catch(n){if(n instanceof Error)throw Error(em(ev(e.serviceIdentifier),n.message))}}async _handleDeactivationError(e,n){try{await e}catch(e){if(e instanceof Error)throw Error(em(ev(n),e.message))}}_deactivateContainer(e,n){let r=n.next();for(;"function"==typeof r.value;){let i=r.value(e);if(eM(i))return i.then(async()=>this._deactivateContainerAsync(e,n));r=n.next()}}async _deactivateContainerAsync(e,n){let r=n.next();for(;"function"==typeof r.value;)await r.value(e),r=n.next()}_getContainerModuleHelpersFactory(){let e=e=>n=>{let r=this._buildBinding(n);return r.moduleId=e,this._bind(r)},n=()=>e=>{this.unbind(e)},r=()=>async e=>this.unbindAsync(e),i=()=>e=>this.isBound(e),s=n=>{let r=e(n);return e=>(this.unbind(e),r(e))},o=e=>(n,r)=>{this._moduleActivationStore.addActivation(e,n,r),this.onActivation(n,r)},a=e=>(n,r)=>{this._moduleActivationStore.addDeactivation(e,n,r),this.onDeactivation(n,r)};return l=>({bindFunction:e(l),isboundFunction:i(),onActivationFunction:o(l),onDeactivationFunction:a(l),rebindFunction:s(l),unbindAsyncFunction:r(),unbindFunction:n()})}_bind(e){return this._bindingDictionary.add(e.serviceIdentifier,e),new e0(e)}_buildBinding(e){return new eu(e,this.options.defaultScope||en)}async _getAll(e){return Promise.all(this._get(e))}_get(e){let n={...e,contextInterceptor:e=>e,targetType:"Variable"};if(this._middleware){let e=this._middleware(n);if(null==e)throw Error("Invalid return type in middleware. Middleware must return!");return e}return this._planAndResolve()(n)}_getButThrowIfAsync(e){let n=this._get(e);if(eN(n)){var r;throw Error(`You are attempting to construct ${"function"==typeof(r=e.serviceIdentifier)?`[function/class ${r.name||"<anonymous>"}]`:"symbol"==typeof r?r.toString():`'${r}'`} in a synchronous way but it has asynchronous dependencies.`)}return n}_getAllArgs(e,n,r){return{avoidConstraints:!n?.enforceBindingConstraints,isMultiInject:!0,isOptional:r,serviceIdentifier:e}}_getNotAllArgs(e,n,r,i,s){return{avoidConstraints:!1,isMultiInject:n,isOptional:r,key:i,serviceIdentifier:e,value:s}}_getPlanMetadataFromNextArgs(e){let n={isMultiInject:e.isMultiInject};return void 0!==e.key&&(n.customTag={key:e.key,value:e.value}),!0===e.isOptional&&(n.isOptional=!0),n}_planAndResolve(){return e=>{var n;let r=function(e,n,r,i,o,a=!1){let l=new eS(n),h=function(e,n,r){let i=A(eP(n,r));if(i.kind===s.unmanaged)throw Error("Unexpected metadata when creating target");return new j("",i,e)}(r,i,o);try{return function e(n,r,i,s,o,a){let l,h;if(null===o){l=eT(n,r,s,null,a),h=new eC(i,s,null,l,a);let e=new ek(s,h);s.addPlan(e)}else l=eT(n,r,s,o,a),h=o.addChildRequest(a.serviceIdentifier,l,a);l.forEach(r=>{let i=null;if(a.isArray())i=h.addChildRequest(r.serviceIdentifier,r,a);else{if(null!==r.cache)return;i=h}if(r.type===el&&null!==r.implementationType){var o;let a=(o=r.implementationType,V(n)(o));if(!0!==s.container.options.skipBaseClassChecks){let e=function e(n,r){let i=function(e){let n=Object.getPrototypeOf(e.prototype);return n?.constructor}(r);if(void 0===i||i===Object)return 0;let s=V(n)(i),o=s.map(e=>e.metadata.filter(e=>e.key===F)),a=[].concat.apply([],o).length,l=s.length-a;return l>0?l:e(n,i)}(n,r.implementationType);if(a.length<e)throw Error(`The number of constructor arguments in the derived class ${ex(r.implementationType)} must be >= than the number of constructor arguments of its base class.`)}a.forEach(r=>{e(n,!1,r.serviceIdentifier,s,i,r)})}})}(e,a,i,l,null,h),l}catch(e){throw eO(e)&&function e(n){n.childRequests.forEach(r=>{if(function e(n,r){return null!==n.parentRequest&&(n.parentRequest.serviceIdentifier===r||e(n.parentRequest,r))}(n,r.serviceIdentifier)){let e=(function e(n,r=[]){let i=ev(n.serviceIdentifier);return r.push(i),null!==n.parentRequest?e(n.parentRequest,r):r})(r).reverse().join(" --\x3e ");throw Error(`Circular dependency found: ${e}`)}e(r)})}(l.plan.rootRequest),e}}(this._metadataReader,this,e.targetType,e.serviceIdentifier,this._getPlanMetadataFromNextArgs(e),e.avoidConstraints);return eL((n=r=e.contextInterceptor(r)).plan.rootRequest.requestScope)(n.plan.rootRequest)}}_deactivateIfSingleton(e){if(e.activated)return eM(e.cache)?e.cache.then(n=>this._deactivate(e,n)):this._deactivate(e,e.cache)}_deactivateSingletons(e){for(let n of e)if(eM(this._deactivateIfSingleton(n)))throw Error("Attempting to unbind dependency with asynchronous destruction (@preDestroy or onDeactivation)")}async _deactivateSingletonsAsync(e){await Promise.all(e.map(async e=>this._deactivateIfSingleton(e)))}_propagateContainerDeactivationThenBindingAndPreDestroy(e,n,r){return this.parent?this._deactivate.bind(this.parent)(e,n):this._bindingDeactivationAndPreDestroy(e,n,r)}async _propagateContainerDeactivationThenBindingAndPreDestroyAsync(e,n,r){this.parent?await this._deactivate.bind(this.parent)(e,n):await this._bindingDeactivationAndPreDestroyAsync(e,n,r)}_removeServiceFromDictionary(e){try{this._bindingDictionary.remove(e)}catch(n){throw Error(`Could not unbind serviceIdentifier: ${ev(e)}`)}}_bindingDeactivationAndPreDestroy(e,n,r){if("function"==typeof e.onDeactivation){let i=e.onDeactivation(n);if(eM(i))return i.then(()=>this._preDestroy(r,n))}return this._preDestroy(r,n)}async _bindingDeactivationAndPreDestroyAsync(e,n,r){"function"==typeof e.onDeactivation&&await e.onDeactivation(n),await this._preDestroy(r,n)}}class e3{id;registry;constructor(e){this.id=ec++,this.registry=e}}function e6(e,n,r,i){let s=function(e){let n=[];if(Array.isArray(e)){let r=function(e){let n=new Set;for(let r of e){if(n.has(r))return r;n.add(r)}}((n=e).map(e=>e.key));if(void 0!==r)throw Error(`${ed} ${r.toString()}`)}else n=[e];return n}(i),o={};Reflect.hasOwnMetadata(e,n)&&(o=Reflect.getMetadata(e,n));let a=o[r];if(void 0===a)a=[];else for(let e of a)if(s.some(n=>n.key===e.key))throw Error(`${ed} ${e.key.toString()}`);a.push(...s),o[r]=a,Reflect.defineMetadata(e,o,n)}function e9(e){return(n,r,i)=>{"number"==typeof i?(function(e){if(void 0!==e)throw Error(eg)}(r),e6(X,n,i.toString(),e)):function(e,n,r){if(void 0!==e.prototype)throw Error(eg);e6(U,e.constructor,n,r)}(n,r,e)}}function e7(){return function(e){if(Reflect.hasOwnMetadata(Y,e))throw Error("Cannot apply @injectable decorator multiple times.");return Reflect.defineMetadata(Y,Reflect.getMetadata(G,e)||[],e),e}}function e8(e){return e9(new e_(z,e))}function te(e){return n=>(r,i,s)=>{if(void 0===n){let e="function"==typeof r?r.name:r.constructor.name;throw Error(`@inject called with undefined this could mean that the class ${e} has a circular dependency problem. You can use a LazyServiceIdentifer to overcome this limitation.`)}e9(new e_(e,n))(r,i,s)}}let tt=te(q);function tn(){return e9(new e_(Z,!0))}let tr=te(W);function ti(e,n){return()=>(r,i)=>{let s=new e_(e,i);if(Reflect.hasOwnMetadata(e,r.constructor))throw Error(n);Reflect.defineMetadata(e,s,r.constructor)}}let ts=ti(H,"Cannot apply @postConstruct decorator multiple times in the same class"),to=ti(K,"Cannot apply @preDestroy decorator multiple times in the same class")},33160:function(e,n,r){"use strict";r.d(n,{A:()=>l});var i=r(75952);let s=function(e,n){for(var r=e.length;r--;)if((0,i.A)(e[r][0],n))return r;return -1};var o=Array.prototype.splice;function a(e){var n=-1,r=null==e?0:e.length;for(this.clear();++n<r;){var i=e[n];this.set(i[0],i[1])}}a.prototype.clear=function(){this.__data__=[],this.size=0},a.prototype.delete=function(e){var n=this.__data__,r=s(n,e);return!(r<0)&&(r==n.length-1?n.pop():o.call(n,r,1),--this.size,!0)},a.prototype.get=function(e){var n=this.__data__,r=s(n,e);return r<0?void 0:n[r][1]},a.prototype.has=function(e){return s(this.__data__,e)>-1},a.prototype.set=function(e,n){var r=this.__data__,i=s(r,e);return i<0?(++this.size,r.push([e,n])):r[i][1]=n,this};let l=a},47223:function(e,n,r){"use strict";r.d(n,{A:()=>o});var i=r(58247),s=r(70981);let o=(0,i.A)(s.A,"Map")},24928:function(e,n,r){"use strict";r.d(n,{A:()=>p});var i=(0,r(58247).A)(Object,"create"),s=Object.prototype.hasOwnProperty,o=Object.prototype.hasOwnProperty;function a(e){var n=-1,r=null==e?0:e.length;for(this.clear();++n<r;){var i=e[n];this.set(i[0],i[1])}}a.prototype.clear=function(){this.__data__=i?i(null):{},this.size=0},a.prototype.delete=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=!!n,n},a.prototype.get=function(e){var n=this.__data__;if(i){var r=n[e];return"__lodash_hash_undefined__"===r?void 0:r}return s.call(n,e)?n[e]:void 0},a.prototype.has=function(e){var n=this.__data__;return i?void 0!==n[e]:o.call(n,e)},a.prototype.set=function(e,n){var r=this.__data__;return this.size+=+!this.has(e),r[e]=i&&void 0===n?"__lodash_hash_undefined__":n,this};var l=r(33160),h=r(47223);let c=function(e){var n=typeof e;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e},u=function(e,n){var r=e.__data__;return c(n)?r["string"==typeof n?"string":"hash"]:r.map};function d(e){var n=-1,r=null==e?0:e.length;for(this.clear();++n<r;){var i=e[n];this.set(i[0],i[1])}}d.prototype.clear=function(){this.size=0,this.__data__={hash:new a,map:new(h.A||l.A),string:new a}},d.prototype.delete=function(e){var n=u(this,e).delete(e);return this.size-=!!n,n},d.prototype.get=function(e){return u(this,e).get(e)},d.prototype.has=function(e){return u(this,e).has(e)},d.prototype.set=function(e,n){var r=u(this,e),i=r.size;return r.set(e,n),this.size+=+(r.size!=i),this};let p=d},99225:function(e,n,r){"use strict";r.d(n,{A:()=>i});let i=r(70981).A.Symbol},55184:function(e,n,r){"use strict";r.d(n,{A:()=>d});var i=r(99225),s=Object.prototype,o=s.hasOwnProperty,a=s.toString,l=i.A?i.A.toStringTag:void 0;let h=function(e){var n=o.call(e,l),r=e[l];try{e[l]=void 0;var i=!0}catch(e){}var s=a.call(e);return i&&(n?e[l]=r:delete e[l]),s};var c=Object.prototype.toString,u=i.A?i.A.toStringTag:void 0;let d=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":u&&u in Object(e)?h(e):c.call(e)}},32192:function(e,n,r){"use strict";r.d(n,{A:()=>i});let i="object"==typeof global&&global&&global.Object===Object&&global},58247:function(e,n,r){"use strict";r.d(n,{A:()=>m});var i,s=r(26114),o=r(70981).A["__core-js_shared__"],a=(i=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"",l=r(26693),h=r(29065),c=/^\[object .+?Constructor\]$/,u=Object.prototype,d=Function.prototype.toString,p=u.hasOwnProperty,f=RegExp("^"+d.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");let g=function(e){return!!(0,l.A)(e)&&(!a||!(a in e))&&((0,s.A)(e)?f:c).test((0,h.A)(e))},m=function(e,n){var r=null==e?void 0:e[n];return g(r)?r:void 0}},71873:function(e,n,r){"use strict";r.d(n,{A:()=>s});var i=/^(?:0|[1-9]\d*)$/;let s=function(e,n){var r=typeof e;return!!(n=null==n?0x1fffffffffffff:n)&&("number"==r||"symbol"!=r&&i.test(e))&&e>-1&&e%1==0&&e<n}},70981:function(e,n,r){"use strict";r.d(n,{A:()=>o});var i=r(32192),s="object"==typeof self&&self&&self.Object===Object&&self;let o=i.A||s||Function("return this")()},29065:function(e,n,r){"use strict";r.d(n,{A:()=>s});var i=Function.prototype.toString;let s=function(e){if(null!=e){try{return i.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},12495:function(e,n,r){"use strict";r.d(n,{A:()=>b});var i=r(26693),s=r(70981);let o=function(){return s.A.Date.now()};var a=/\s/;let l=function(e){for(var n=e.length;n--&&a.test(e.charAt(n)););return n};var h=/^\s+/,c=r(48466),u=0/0,d=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,f=/^0o[0-7]+$/i,g=parseInt;let m=function(e){if("number"==typeof e)return e;if((0,c.A)(e))return u;if((0,i.A)(e)){var n,r="function"==typeof e.valueOf?e.valueOf():e;e=(0,i.A)(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=(n=e)?n.slice(0,l(n)+1).replace(h,""):n;var s=p.test(e);return s||f.test(e)?g(e.slice(2),s?2:8):d.test(e)?u:+e};var y=Math.max,O=Math.min;let b=function(e,n,r){var s,a,l,h,c,u,d=0,p=!1,f=!1,g=!0;if("function"!=typeof e)throw TypeError("Expected a function");function b(n){var r=s,i=a;return s=a=void 0,d=n,h=e.apply(i,r)}function x(e){var r=e-u,i=e-d;return void 0===u||r>=n||r<0||f&&i>=l}function w(){var e,r,i,s=o();if(x(s))return S(s);c=setTimeout(w,(e=s-u,r=s-d,i=n-e,f?O(i,l-r):i))}function S(e){return(c=void 0,g&&s)?b(e):(s=a=void 0,h)}function _(){var e,r=o(),i=x(r);if(s=arguments,a=this,u=r,i){if(void 0===c)return d=e=u,c=setTimeout(w,n),p?b(e):h;if(f)return clearTimeout(c),c=setTimeout(w,n),b(u)}return void 0===c&&(c=setTimeout(w,n)),h}return n=m(n)||0,(0,i.A)(r)&&(p=!!r.leading,l=(f="maxWait"in r)?y(m(r.maxWait)||0,n):l,g="trailing"in r?!!r.trailing:g),_.cancel=function(){void 0!==c&&clearTimeout(c),d=0,s=u=a=c=void 0},_.flush=function(){return void 0===c?h:S(o())},_}},75952:function(e,n,r){"use strict";r.d(n,{A:()=>i});let i=function(e,n){return e===n||e!=e&&n!=n}},17993:function(e,n,r){"use strict";r.d(n,{A:()=>i});let i=Array.isArray},26114:function(e,n,r){"use strict";r.d(n,{A:()=>o});var i=r(55184),s=r(26693);let o=function(e){if(!(0,s.A)(e))return!1;var n=(0,i.A)(e);return"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n}},26693:function(e,n,r){"use strict";r.d(n,{A:()=>i});let i=function(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}},23666:function(e,n,r){"use strict";r.d(n,{A:()=>i});let i=function(e){return null!=e&&"object"==typeof e}},48466:function(e,n,r){"use strict";r.d(n,{A:()=>o});var i=r(55184),s=r(23666);let o=function(e){return"symbol"==typeof e||(0,s.A)(e)&&"[object Symbol]"==(0,i.A)(e)}},36833:function(e,n,r){"use strict";r.d(n,{Ak:()=>o,d_:()=>s});let i=e=>crypto.getRandomValues(new Uint8Array(e)),s=(e,n=21)=>{var r;let s,o;return r=n,o=-~(1.6*(s=(2<<Math.log(e.length-1)/Math.LN2)-1)*r/e.length),(n=r)=>{let a="";for(;;){let r=i(o),l=o;for(;l--;)if((a+=e[r[l]&s]||"").length===n)return a}}},o=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((e,n)=>((n&=63)<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"")},5243:function(e,n,r){"use strict";r.d(n,{AQ:()=>f,C6:()=>s,Cg:()=>o,Ju:()=>c,N3:()=>p,Sn:()=>a,YH:()=>h,fX:()=>d,sH:()=>l,xN:()=>g,zs:()=>u});var i=function(e,n){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])})(e,n)};function s(e,n){if("function"!=typeof n&&null!==n)throw TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}function o(e,n,r,i){var s,o=arguments.length,a=o<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(n,r,a):s(n,r))||a);return o>3&&a&&Object.defineProperty(n,r,a),a}function a(e,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,n)}function l(e,n,r,i){return new(r||(r=Promise))(function(s,o){function a(e){try{h(i.next(e))}catch(e){o(e)}}function l(e){try{h(i.throw(e))}catch(e){o(e)}}function h(e){var n;e.done?s(e.value):((n=e.value)instanceof r?n:new r(function(e){e(n)})).then(a,l)}h((i=i.apply(e,n||[])).next())})}function h(e,n){var r,i,s,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(h){var c=[l,h];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,i&&(s=2&c[0]?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[2&c[0],s.value]),c[0]){case 0:case 1:s=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,i=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!s||c[1]>s[0]&&c[1]<s[3])){o.label=c[1];break}if(6===c[0]&&o.label<s[1]){o.label=s[1],s=c;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(c);break}s[2]&&o.ops.pop(),o.trys.pop();continue}c=n.call(e,o)}catch(e){c=[6,e],i=0}finally{r=s=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}function c(e){var n="function"==typeof Symbol&&Symbol.iterator,r=n&&e[n],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(e,n){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,s,o=r.call(e),a=[];try{for(;(void 0===n||n-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(e){s={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(s)throw s.error}}return a}function d(e,n,r){if(r||2==arguments.length)for(var i,s=0,o=n.length;s<o;s++)!i&&s in n||(i||(i=Array.prototype.slice.call(n,0,s)),i[s]=n[s]);return e.concat(i||Array.prototype.slice.call(n))}function p(e){return this instanceof p?(this.v=e,this):new p(e)}function f(e,n,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,s=r.apply(e,n||[]),o=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function(e){return function(n){return Promise.resolve(n).then(e,c)}}),i[Symbol.asyncIterator]=function(){return this},i;function a(e,n){s[e]&&(i[e]=function(n){return new Promise(function(r,i){o.push([e,n,r,i])>1||l(e,n)})},n&&(i[e]=n(i[e])))}function l(e,n){try{var r;(r=s[e](n)).value instanceof p?Promise.resolve(r.value.v).then(h,c):u(o[0][2],r)}catch(e){u(o[0][3],e)}}function h(e){l("next",e)}function c(e){l("throw",e)}function u(e,n){e(n),o.shift(),o.length&&l(o[0][0],o[0][1])}}function g(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,r=e[Symbol.asyncIterator];return r?r.call(e):(e=c(e),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(r){n[r]=e[r]&&function(n){return new Promise(function(i,s){var o,a,l;o=i,a=s,l=(n=e[r](n)).done,Promise.resolve(n.value).then(function(e){o({value:e,done:l})},a)})}}}},82481:function(e,n,r){"use strict";r.d(n,{Ay:()=>c});var i={};r.r(i),r.d(i,{BRAND:()=>l.qt,DIRTY:()=>o.jm,EMPTY_PATH:()=>o.I3,INVALID:()=>o.uY,NEVER:()=>l.tm,OK:()=>o.OK,ParseStatus:()=>o.MY,Schema:()=>l.Sj,ZodAny:()=>l.Ml,ZodArray:()=>l.n,ZodBigInt:()=>l.Lr,ZodBoolean:()=>l.WF,ZodBranded:()=>l.eN,ZodCatch:()=>l.hw,ZodDate:()=>l.aP,ZodDefault:()=>l.Xi,ZodDiscriminatedUnion:()=>l.jv,ZodEffects:()=>l.k1,ZodEnum:()=>l.Vb,ZodError:()=>h.G,ZodFirstPartyTypeKind:()=>l.kY,ZodFunction:()=>l.CZ,ZodIntersection:()=>l.Jv,ZodIssueCode:()=>h.eq,ZodLazy:()=>l.Ih,ZodLiteral:()=>l.DN,ZodMap:()=>l.Ut,ZodNaN:()=>l.Tq,ZodNativeEnum:()=>l.WM,ZodNever:()=>l.iS,ZodNull:()=>l.PQ,ZodNullable:()=>l.l1,ZodNumber:()=>l.rS,ZodObject:()=>l.bv,ZodOptional:()=>l.Ii,ZodParsedType:()=>a.Zp,ZodPipeline:()=>l._c,ZodPromise:()=>l.$i,ZodReadonly:()=>l.EV,ZodRecord:()=>l.b8,ZodSchema:()=>l.lK,ZodSet:()=>l.Kz,ZodString:()=>l.ND,ZodSymbol:()=>l.K5,ZodTransformer:()=>l.BG,ZodTuple:()=>l.y0,ZodType:()=>l.aR,ZodUndefined:()=>l._Z,ZodUnion:()=>l.fZ,ZodUnknown:()=>l._,ZodVoid:()=>l.a0,addIssueToContext:()=>o.zn,any:()=>l.bz,array:()=>l.YO,bigint:()=>l.o,boolean:()=>l.zM,coerce:()=>l.au,custom:()=>l.Ie,date:()=>l.p6,datetimeRegex:()=>l.fm,defaultErrorMap:()=>s.su,discriminatedUnion:()=>l.gM,effect:()=>l.QZ,enum:()=>l.k5,function:()=>l.fH,getErrorMap:()=>s.$W,getParsedType:()=>a.CR,instanceof:()=>l.Nl,intersection:()=>l.E$,isAborted:()=>o.G4,isAsync:()=>o.xP,isDirty:()=>o.DM,isValid:()=>o.fn,late:()=>l.fn,lazy:()=>l.RZ,literal:()=>l.eu,makeIssue:()=>o.y7,map:()=>l.Tj,nan:()=>l.oi,nativeEnum:()=>l.fc,never:()=>l.Zm,null:()=>l.ch,nullable:()=>l.me,number:()=>l.ai,object:()=>l.Ik,objectUtil:()=>a.o6,oboolean:()=>l.yN,onumber:()=>l.p7,optional:()=>l.lq,ostring:()=>l.Di,pipeline:()=>l.Tk,preprocess:()=>l.vk,promise:()=>l.iv,quotelessJson:()=>h.WI,record:()=>l.g1,set:()=>l.hZ,setErrorMap:()=>s.pJ,strictObject:()=>l.re,string:()=>l.Yj,symbol:()=>l.HR,transformer:()=>l.Gu,tuple:()=>l.PV,undefined:()=>l.Vx,union:()=>l.KC,unknown:()=>l.L5,util:()=>a.ZS,void:()=>l.rI});var s=r(51518),o=r(98896),a=r(19171),l=r(33692),h=r(62520);let c=i},62520:function(e,n,r){"use strict";r.d(n,{G:()=>a,WI:()=>o,eq:()=>s});var i=r(19171);let s=i.ZS.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),o=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class a extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){let n=e||function(e){return e.message},r={_errors:[]},i=e=>{for(let s of e.issues)if("invalid_union"===s.code)s.unionErrors.map(i);else if("invalid_return_type"===s.code)i(s.returnTypeError);else if("invalid_arguments"===s.code)i(s.argumentsError);else if(0===s.path.length)r._errors.push(n(s));else{let e=r,i=0;for(;i<s.path.length;){let r=s.path[i];i===s.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(n(s))):e[r]=e[r]||{_errors:[]},e=e[r],i++}}};return i(this),r}static assert(e){if(!(e instanceof a))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,i.ZS.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let n={},r=[];for(let i of this.issues)if(i.path.length>0){let r=i.path[0];n[r]=n[r]||[],n[r].push(e(i))}else r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}a.create=e=>new a(e)},51518:function(e,n,r){"use strict";r.d(n,{$W:()=>a,pJ:()=>o,su:()=>i.A});var i=r(41534);let s=i.A;function o(e){s=e}function a(){return s}},98896:function(e,n,r){"use strict";r.d(n,{DM:()=>f,G4:()=>p,I3:()=>a,MY:()=>h,OK:()=>d,fn:()=>g,jm:()=>u,uY:()=>c,xP:()=>m,y7:()=>o,zn:()=>l});var i=r(51518),s=r(41534);let o=e=>{let{data:n,path:r,errorMaps:i,issueData:s}=e,o=[...r,...s.path||[]],a={...s,path:o};if(void 0!==s.message)return{...s,path:o,message:s.message};let l="";for(let e of i.filter(e=>!!e).slice().reverse())l=e(a,{data:n,defaultError:l}).message;return{...s,path:o,message:l}},a=[];function l(e,n){let r=(0,i.$W)(),a=o({issueData:n,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===s.A?void 0:s.A].filter(e=>!!e)});e.common.issues.push(a)}class h{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,n){let r=[];for(let i of n){if("aborted"===i.status)return c;"dirty"===i.status&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){let r=[];for(let e of n){let n=await e.key,i=await e.value;r.push({key:n,value:i})}return h.mergeObjectSync(e,r)}static mergeObjectSync(e,n){let r={};for(let i of n){let{key:n,value:s}=i;if("aborted"===n.status||"aborted"===s.status)return c;"dirty"===n.status&&e.dirty(),"dirty"===s.status&&e.dirty(),"__proto__"!==n.value&&(void 0!==s.value||i.alwaysSet)&&(r[n.value]=s.value)}return{status:e.value,value:r}}}let c=Object.freeze({status:"aborted"}),u=e=>({status:"dirty",value:e}),d=e=>({status:"valid",value:e}),p=e=>"aborted"===e.status,f=e=>"dirty"===e.status,g=e=>"valid"===e.status,m=e=>"undefined"!=typeof Promise&&e instanceof Promise},19171:function(e,n,r){"use strict";var i,s,o;r.d(n,{CR:()=>l,ZS:()=>i,Zp:()=>a,o6:()=>s}),(o=i||(i={})).assertEqual=e=>{},o.assertIs=function(e){},o.assertNever=function(e){throw Error()},o.arrayToEnum=e=>{let n={};for(let r of e)n[r]=r;return n},o.getValidEnumValues=e=>{let n=o.objectKeys(e).filter(n=>"number"!=typeof e[e[n]]),r={};for(let i of n)r[i]=e[i];return o.objectValues(r)},o.objectValues=e=>o.objectKeys(e).map(function(n){return e[n]}),o.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let n=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.push(r);return n},o.find=(e,n)=>{for(let r of e)if(n(r))return r},o.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,o.joinValues=function(e,n=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(n)},o.jsonStringifyReplacer=(e,n)=>"bigint"==typeof n?n.toString():n,(s||(s={})).mergeShapes=(e,n)=>({...e,...n});let a=i.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),l=e=>{switch(typeof e){case"undefined":return a.undefined;case"string":return a.string;case"number":return Number.isNaN(e)?a.nan:a.number;case"boolean":return a.boolean;case"function":return a.function;case"bigint":return a.bigint;case"symbol":return a.symbol;case"object":if(Array.isArray(e))return a.array;if(null===e)return a.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return a.promise;if("undefined"!=typeof Map&&e instanceof Map)return a.map;if("undefined"!=typeof Set&&e instanceof Set)return a.set;if("undefined"!=typeof Date&&e instanceof Date)return a.date;return a.object;default:return a.unknown}}},41534:function(e,n,r){"use strict";r.d(n,{A:()=>o});var i=r(62520),s=r(19171);let o=(e,n)=>{let r;switch(e.code){case i.eq.invalid_type:r=e.received===s.Zp.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case i.eq.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,s.ZS.jsonStringifyReplacer)}`;break;case i.eq.unrecognized_keys:r=`Unrecognized key(s) in object: ${s.ZS.joinValues(e.keys,", ")}`;break;case i.eq.invalid_union:r="Invalid input";break;case i.eq.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${s.ZS.joinValues(e.options)}`;break;case i.eq.invalid_enum_value:r=`Invalid enum value. Expected ${s.ZS.joinValues(e.options)}, received '${e.received}'`;break;case i.eq.invalid_arguments:r="Invalid function arguments";break;case i.eq.invalid_return_type:r="Invalid function return type";break;case i.eq.invalid_date:r="Invalid date";break;case i.eq.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:s.ZS.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case i.eq.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case i.eq.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case i.eq.custom:r="Invalid input";break;case i.eq.invalid_intersection_types:r="Intersection results could not be merged";break;case i.eq.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case i.eq.not_finite:r="Number must be finite";break;default:r=n.defaultError,s.ZS.assertNever(e)}return{message:r}}},33692:function(e,n,r){"use strict";let i;r.d(n,{ch:()=>eI,WM:()=>ec,Vx:()=>eD,Ik:()=>eV,b8:()=>en,Nl:()=>ek,p7:()=>e9,Tj:()=>eX,l1:()=>ef,ND:()=>L,gM:()=>eF,Vb:()=>eh,Lr:()=>j,Ii:()=>ep,a0:()=>U,zM:()=>eA,au:()=>e8,fm:()=>R,iv:()=>e0,Tq:()=>ey,oi:()=>eT,n:()=>Y,RZ:()=>eG,hZ:()=>eU,yN:()=>e7,hw:()=>em,Jv:()=>ee,rS:()=>Q,EV:()=>ex,Ie:()=>eS,Zm:()=>eL,vk:()=>e4,$i:()=>eu,re:()=>ez,_Z:()=>F,K5:()=>B,DN:()=>ea,Kz:()=>ei,iS:()=>X,aR:()=>y,_c:()=>eb,eu:()=>eH,jv:()=>J,CZ:()=>es,_:()=>W,g1:()=>eW,HR:()=>eN,fH:()=>eY,aP:()=>z,YO:()=>ej,Di:()=>e6,Tk:()=>e3,o:()=>eP,PQ:()=>Z,k5:()=>eK,tm:()=>te,fZ:()=>H,BG:()=>ed,p6:()=>eM,fn:()=>e_,fc:()=>eJ,Yj:()=>eC,Ih:()=>eo,KC:()=>eB,L5:()=>eR,bz:()=>e$,Ml:()=>q,Sj:()=>y,k1:()=>ed,kY:()=>l,lK:()=>y,y0:()=>et,qt:()=>eO,me:()=>e5,ai:()=>eE,PV:()=>eq,rI:()=>eQ,E$:()=>eZ,WF:()=>V,lq:()=>e2,Gu:()=>e1,Ut:()=>er,eN:()=>ev,Xi:()=>eg,bv:()=>G,QZ:()=>e1});var s,o,a,l,h=r(62520),c=r(51518),u=r(41534);(s=a||(a={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},s.toString=e=>"string"==typeof e?e:e?.message;var d=r(98896),p=r(19171);class f{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let g=(e,n)=>{if((0,d.fn)(n))return{success:!0,data:n.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let n=new h.G(e.common.issues);return this._error=n,this._error}}};function m(e){if(!e)return{};let{errorMap:n,invalid_type_error:r,required_error:i,description:s}=e;if(n&&(r||i))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return n?{errorMap:n,description:s}:{errorMap:(n,s)=>{let{message:o}=e;return"invalid_enum_value"===n.code?{message:o??s.defaultError}:void 0===s.data?{message:o??i??s.defaultError}:"invalid_type"!==n.code?{message:s.defaultError}:{message:o??r??s.defaultError}},description:s}}class y{get description(){return this._def.description}_getType(e){return(0,p.CR)(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:(0,p.CR)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new d.MY,ctx:{common:e.parent.common,data:e.data,parsedType:(0,p.CR)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let n=this._parse(e);if((0,d.xP)(n))throw Error("Synchronous parse encountered promise.");return n}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,n){let r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){let r={common:{issues:[],async:n?.async??!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,p.CR)(e)},i=this._parseSync({data:e,path:r.path,parent:r});return g(r,i)}"~validate"(e){let n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,p.CR)(e)};if(!this["~standard"].async)try{let r=this._parseSync({data:e,path:[],parent:n});return(0,d.fn)(r)?{value:r.value}:{issues:n.common.issues}}catch(e){e?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(e=>(0,d.fn)(e)?{value:e.value}:{issues:n.common.issues})}async parseAsync(e,n){let r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){let r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,p.CR)(e)},i=this._parse({data:e,path:r.path,parent:r});return g(r,await ((0,d.xP)(i)?i:Promise.resolve(i)))}refine(e,n){return this._refinement((r,i)=>{let s=e(r),o=()=>i.addIssue({code:h.eq.custom,..."string"==typeof n||void 0===n?{message:n}:"function"==typeof n?n(r):n});return"undefined"!=typeof Promise&&s instanceof Promise?s.then(e=>!!e||(o(),!1)):!!s||(o(),!1)})}refinement(e,n){return this._refinement((r,i)=>!!e(r)||(i.addIssue("function"==typeof n?n(r,i):n),!1))}_refinement(e){return new ed({schema:this,typeName:l.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return ep.create(this,this._def)}nullable(){return ef.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Y.create(this)}promise(){return eu.create(this,this._def)}or(e){return H.create([this,e],this._def)}and(e){return ee.create(this,e,this._def)}transform(e){return new ed({...m(this._def),schema:this,typeName:l.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new eg({...m(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:l.ZodDefault})}brand(){return new ev({typeName:l.ZodBranded,type:this,...m(this._def)})}catch(e){return new em({...m(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:l.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return eb.create(this,e)}readonly(){return ex.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let O=/^c[^\s-]{8,}$/i,b=/^[0-9a-z]+$/,x=/^[0-9A-HJKMNP-TV-Z]{26}$/i,w=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,S=/^[a-z0-9_-]{21}$/i,_=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,k=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,C=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,E=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,T=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,P=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,A=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,M=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,N=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,D="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",I=RegExp(`^${D}$`);function $(e){let n="[0-5]\\d";e.precision?n=`${n}\\.\\d{${e.precision}}`:null==e.precision&&(n=`${n}(\\.\\d+)?`);let r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${n})${r}`}function R(e){let n=`${D}T${$(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),n=`${n}(${r.join("|")})`,RegExp(`^${n}$`)}class L extends y{_parse(e){var n,r,s,o;let a;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==p.Zp.string){let n=this._getOrReturnCtx(e);return(0,d.zn)(n,{code:h.eq.invalid_type,expected:p.Zp.string,received:n.parsedType}),d.uY}let l=new d.MY;for(let c of this._def.checks)if("min"===c.kind)e.data.length<c.value&&(a=this._getOrReturnCtx(e,a),(0,d.zn)(a,{code:h.eq.too_small,minimum:c.value,type:"string",inclusive:!0,exact:!1,message:c.message}),l.dirty());else if("max"===c.kind)e.data.length>c.value&&(a=this._getOrReturnCtx(e,a),(0,d.zn)(a,{code:h.eq.too_big,maximum:c.value,type:"string",inclusive:!0,exact:!1,message:c.message}),l.dirty());else if("length"===c.kind){let n=e.data.length>c.value,r=e.data.length<c.value;(n||r)&&(a=this._getOrReturnCtx(e,a),n?(0,d.zn)(a,{code:h.eq.too_big,maximum:c.value,type:"string",inclusive:!0,exact:!0,message:c.message}):r&&(0,d.zn)(a,{code:h.eq.too_small,minimum:c.value,type:"string",inclusive:!0,exact:!0,message:c.message}),l.dirty())}else if("email"===c.kind)C.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,d.zn)(a,{validation:"email",code:h.eq.invalid_string,message:c.message}),l.dirty());else if("emoji"===c.kind)i||(i=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),i.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,d.zn)(a,{validation:"emoji",code:h.eq.invalid_string,message:c.message}),l.dirty());else if("uuid"===c.kind)w.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,d.zn)(a,{validation:"uuid",code:h.eq.invalid_string,message:c.message}),l.dirty());else if("nanoid"===c.kind)S.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,d.zn)(a,{validation:"nanoid",code:h.eq.invalid_string,message:c.message}),l.dirty());else if("cuid"===c.kind)O.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,d.zn)(a,{validation:"cuid",code:h.eq.invalid_string,message:c.message}),l.dirty());else if("cuid2"===c.kind)b.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,d.zn)(a,{validation:"cuid2",code:h.eq.invalid_string,message:c.message}),l.dirty());else if("ulid"===c.kind)x.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,d.zn)(a,{validation:"ulid",code:h.eq.invalid_string,message:c.message}),l.dirty());else if("url"===c.kind)try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),(0,d.zn)(a,{validation:"url",code:h.eq.invalid_string,message:c.message}),l.dirty()}else"regex"===c.kind?(c.regex.lastIndex=0,c.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,d.zn)(a,{validation:"regex",code:h.eq.invalid_string,message:c.message}),l.dirty())):"trim"===c.kind?e.data=e.data.trim():"includes"===c.kind?e.data.includes(c.value,c.position)||(a=this._getOrReturnCtx(e,a),(0,d.zn)(a,{code:h.eq.invalid_string,validation:{includes:c.value,position:c.position},message:c.message}),l.dirty()):"toLowerCase"===c.kind?e.data=e.data.toLowerCase():"toUpperCase"===c.kind?e.data=e.data.toUpperCase():"startsWith"===c.kind?e.data.startsWith(c.value)||(a=this._getOrReturnCtx(e,a),(0,d.zn)(a,{code:h.eq.invalid_string,validation:{startsWith:c.value},message:c.message}),l.dirty()):"endsWith"===c.kind?e.data.endsWith(c.value)||(a=this._getOrReturnCtx(e,a),(0,d.zn)(a,{code:h.eq.invalid_string,validation:{endsWith:c.value},message:c.message}),l.dirty()):"datetime"===c.kind?R(c).test(e.data)||(a=this._getOrReturnCtx(e,a),(0,d.zn)(a,{code:h.eq.invalid_string,validation:"datetime",message:c.message}),l.dirty()):"date"===c.kind?I.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,d.zn)(a,{code:h.eq.invalid_string,validation:"date",message:c.message}),l.dirty()):"time"===c.kind?RegExp(`^${$(c)}$`).test(e.data)||(a=this._getOrReturnCtx(e,a),(0,d.zn)(a,{code:h.eq.invalid_string,validation:"time",message:c.message}),l.dirty()):"duration"===c.kind?k.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,d.zn)(a,{validation:"duration",code:h.eq.invalid_string,message:c.message}),l.dirty()):"ip"===c.kind?(n=e.data,!(("v4"===(r=c.version)||!r)&&E.test(n)||("v6"===r||!r)&&P.test(n))&&1&&(a=this._getOrReturnCtx(e,a),(0,d.zn)(a,{validation:"ip",code:h.eq.invalid_string,message:c.message}),l.dirty())):"jwt"===c.kind?!function(e,n){if(!_.test(e))return!1;try{let[r]=e.split(".");if(!r)return!1;let i=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),s=JSON.parse(atob(i));if("object"!=typeof s||null===s||"typ"in s&&s?.typ!=="JWT"||!s.alg||n&&s.alg!==n)return!1;return!0}catch{return!1}}(e.data,c.alg)&&(a=this._getOrReturnCtx(e,a),(0,d.zn)(a,{validation:"jwt",code:h.eq.invalid_string,message:c.message}),l.dirty()):"cidr"===c.kind?(s=e.data,!(("v4"===(o=c.version)||!o)&&T.test(s)||("v6"===o||!o)&&A.test(s))&&1&&(a=this._getOrReturnCtx(e,a),(0,d.zn)(a,{validation:"cidr",code:h.eq.invalid_string,message:c.message}),l.dirty())):"base64"===c.kind?M.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,d.zn)(a,{validation:"base64",code:h.eq.invalid_string,message:c.message}),l.dirty()):"base64url"===c.kind?N.test(e.data)||(a=this._getOrReturnCtx(e,a),(0,d.zn)(a,{validation:"base64url",code:h.eq.invalid_string,message:c.message}),l.dirty()):p.ZS.assertNever(c);return{status:l.value,value:e.data}}_regex(e,n,r){return this.refinement(n=>e.test(n),{validation:n,code:h.eq.invalid_string,...a.errToObj(r)})}_addCheck(e){return new L({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...a.errToObj(e)})}url(e){return this._addCheck({kind:"url",...a.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...a.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...a.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...a.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...a.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...a.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...a.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...a.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...a.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...a.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...a.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...a.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...a.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...a.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...a.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...a.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...a.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...a.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...a.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...a.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...a.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...a.errToObj(n)})}nonempty(e){return this.min(1,a.errToObj(e))}trim(){return new L({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new L({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new L({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let n of this._def.checks)"min"===n.kind&&(null===e||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(let n of this._def.checks)"max"===n.kind&&(null===e||n.value<e)&&(e=n.value);return e}}L.create=e=>new L({checks:[],typeName:l.ZodString,coerce:e?.coerce??!1,...m(e)});class Q extends y{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let n;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==p.Zp.number){let n=this._getOrReturnCtx(e);return(0,d.zn)(n,{code:h.eq.invalid_type,expected:p.Zp.number,received:n.parsedType}),d.uY}let r=new d.MY;for(let i of this._def.checks)"int"===i.kind?p.ZS.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),(0,d.zn)(n,{code:h.eq.invalid_type,expected:"integer",received:"float",message:i.message}),r.dirty()):"min"===i.kind?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),(0,d.zn)(n,{code:h.eq.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),r.dirty()):"max"===i.kind?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),(0,d.zn)(n,{code:h.eq.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),r.dirty()):"multipleOf"===i.kind?0!==function(e,n){let r=(e.toString().split(".")[1]||"").length,i=(n.toString().split(".")[1]||"").length,s=r>i?r:i;return Number.parseInt(e.toFixed(s).replace(".",""))%Number.parseInt(n.toFixed(s).replace(".",""))/10**s}(e.data,i.value)&&(n=this._getOrReturnCtx(e,n),(0,d.zn)(n,{code:h.eq.not_multiple_of,multipleOf:i.value,message:i.message}),r.dirty()):"finite"===i.kind?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),(0,d.zn)(n,{code:h.eq.not_finite,message:i.message}),r.dirty()):p.ZS.assertNever(i);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,a.toString(n))}gt(e,n){return this.setLimit("min",e,!1,a.toString(n))}lte(e,n){return this.setLimit("max",e,!0,a.toString(n))}lt(e,n){return this.setLimit("max",e,!1,a.toString(n))}setLimit(e,n,r,i){return new Q({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:a.toString(i)}]})}_addCheck(e){return new Q({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:a.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:a.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:a.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:a.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:a.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:a.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:a.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:a.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:a.toString(e)})}get minValue(){let e=null;for(let n of this._def.checks)"min"===n.kind&&(null===e||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(let n of this._def.checks)"max"===n.kind&&(null===e||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&p.ZS.isInteger(e.value))}get isFinite(){let e=null,n=null;for(let r of this._def.checks)if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;else"min"===r.kind?(null===n||r.value>n)&&(n=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value);return Number.isFinite(n)&&Number.isFinite(e)}}Q.create=e=>new Q({checks:[],typeName:l.ZodNumber,coerce:e?.coerce||!1,...m(e)});class j extends y{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let n;if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==p.Zp.bigint)return this._getInvalidInput(e);let r=new d.MY;for(let i of this._def.checks)"min"===i.kind?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),(0,d.zn)(n,{code:h.eq.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),r.dirty()):"max"===i.kind?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),(0,d.zn)(n,{code:h.eq.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),r.dirty()):"multipleOf"===i.kind?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),(0,d.zn)(n,{code:h.eq.not_multiple_of,multipleOf:i.value,message:i.message}),r.dirty()):p.ZS.assertNever(i);return{status:r.value,value:e.data}}_getInvalidInput(e){let n=this._getOrReturnCtx(e);return(0,d.zn)(n,{code:h.eq.invalid_type,expected:p.Zp.bigint,received:n.parsedType}),d.uY}gte(e,n){return this.setLimit("min",e,!0,a.toString(n))}gt(e,n){return this.setLimit("min",e,!1,a.toString(n))}lte(e,n){return this.setLimit("max",e,!0,a.toString(n))}lt(e,n){return this.setLimit("max",e,!1,a.toString(n))}setLimit(e,n,r,i){return new j({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:a.toString(i)}]})}_addCheck(e){return new j({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:a.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:a.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:a.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:a.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:a.toString(n)})}get minValue(){let e=null;for(let n of this._def.checks)"min"===n.kind&&(null===e||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(let n of this._def.checks)"max"===n.kind&&(null===e||n.value<e)&&(e=n.value);return e}}j.create=e=>new j({checks:[],typeName:l.ZodBigInt,coerce:e?.coerce??!1,...m(e)});class V extends y{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==p.Zp.boolean){let n=this._getOrReturnCtx(e);return(0,d.zn)(n,{code:h.eq.invalid_type,expected:p.Zp.boolean,received:n.parsedType}),d.uY}return(0,d.OK)(e.data)}}V.create=e=>new V({typeName:l.ZodBoolean,coerce:e?.coerce||!1,...m(e)});class z extends y{_parse(e){let n;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==p.Zp.date){let n=this._getOrReturnCtx(e);return(0,d.zn)(n,{code:h.eq.invalid_type,expected:p.Zp.date,received:n.parsedType}),d.uY}if(Number.isNaN(e.data.getTime())){let n=this._getOrReturnCtx(e);return(0,d.zn)(n,{code:h.eq.invalid_date}),d.uY}let r=new d.MY;for(let i of this._def.checks)"min"===i.kind?e.data.getTime()<i.value&&(n=this._getOrReturnCtx(e,n),(0,d.zn)(n,{code:h.eq.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):"max"===i.kind?e.data.getTime()>i.value&&(n=this._getOrReturnCtx(e,n),(0,d.zn)(n,{code:h.eq.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):p.ZS.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new z({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:a.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:a.toString(n)})}get minDate(){let e=null;for(let n of this._def.checks)"min"===n.kind&&(null===e||n.value>e)&&(e=n.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let n of this._def.checks)"max"===n.kind&&(null===e||n.value<e)&&(e=n.value);return null!=e?new Date(e):null}}z.create=e=>new z({checks:[],coerce:e?.coerce||!1,typeName:l.ZodDate,...m(e)});class B extends y{_parse(e){if(this._getType(e)!==p.Zp.symbol){let n=this._getOrReturnCtx(e);return(0,d.zn)(n,{code:h.eq.invalid_type,expected:p.Zp.symbol,received:n.parsedType}),d.uY}return(0,d.OK)(e.data)}}B.create=e=>new B({typeName:l.ZodSymbol,...m(e)});class F extends y{_parse(e){if(this._getType(e)!==p.Zp.undefined){let n=this._getOrReturnCtx(e);return(0,d.zn)(n,{code:h.eq.invalid_type,expected:p.Zp.undefined,received:n.parsedType}),d.uY}return(0,d.OK)(e.data)}}F.create=e=>new F({typeName:l.ZodUndefined,...m(e)});class Z extends y{_parse(e){if(this._getType(e)!==p.Zp.null){let n=this._getOrReturnCtx(e);return(0,d.zn)(n,{code:h.eq.invalid_type,expected:p.Zp.null,received:n.parsedType}),d.uY}return(0,d.OK)(e.data)}}Z.create=e=>new Z({typeName:l.ZodNull,...m(e)});class q extends y{constructor(){super(...arguments),this._any=!0}_parse(e){return(0,d.OK)(e.data)}}q.create=e=>new q({typeName:l.ZodAny,...m(e)});class W extends y{constructor(){super(...arguments),this._unknown=!0}_parse(e){return(0,d.OK)(e.data)}}W.create=e=>new W({typeName:l.ZodUnknown,...m(e)});class X extends y{_parse(e){let n=this._getOrReturnCtx(e);return(0,d.zn)(n,{code:h.eq.invalid_type,expected:p.Zp.never,received:n.parsedType}),d.uY}}X.create=e=>new X({typeName:l.ZodNever,...m(e)});class U extends y{_parse(e){if(this._getType(e)!==p.Zp.undefined){let n=this._getOrReturnCtx(e);return(0,d.zn)(n,{code:h.eq.invalid_type,expected:p.Zp.void,received:n.parsedType}),d.uY}return(0,d.OK)(e.data)}}U.create=e=>new U({typeName:l.ZodVoid,...m(e)});class Y extends y{_parse(e){let{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==p.Zp.array)return(0,d.zn)(n,{code:h.eq.invalid_type,expected:p.Zp.array,received:n.parsedType}),d.uY;if(null!==i.exactLength){let e=n.data.length>i.exactLength.value,s=n.data.length<i.exactLength.value;(e||s)&&((0,d.zn)(n,{code:e?h.eq.too_big:h.eq.too_small,minimum:s?i.exactLength.value:void 0,maximum:e?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(null!==i.minLength&&n.data.length<i.minLength.value&&((0,d.zn)(n,{code:h.eq.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),null!==i.maxLength&&n.data.length>i.maxLength.value&&((0,d.zn)(n,{code:h.eq.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((e,r)=>i.type._parseAsync(new f(n,e,n.path,r)))).then(e=>d.MY.mergeArray(r,e));let s=[...n.data].map((e,r)=>i.type._parseSync(new f(n,e,n.path,r)));return d.MY.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new Y({...this._def,minLength:{value:e,message:a.toString(n)}})}max(e,n){return new Y({...this._def,maxLength:{value:e,message:a.toString(n)}})}length(e,n){return new Y({...this._def,exactLength:{value:e,message:a.toString(n)}})}nonempty(e){return this.min(1,e)}}Y.create=(e,n)=>new Y({type:e,minLength:null,maxLength:null,exactLength:null,typeName:l.ZodArray,...m(n)});class G extends y{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),n=p.ZS.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==p.Zp.object){let n=this._getOrReturnCtx(e);return(0,d.zn)(n,{code:h.eq.invalid_type,expected:p.Zp.object,received:n.parsedType}),d.uY}let{status:n,ctx:r}=this._processInputParams(e),{shape:i,keys:s}=this._getCached(),o=[];if(!(this._def.catchall instanceof X&&"strip"===this._def.unknownKeys))for(let e in r.data)s.includes(e)||o.push(e);let a=[];for(let e of s){let n=i[e],s=r.data[e];a.push({key:{status:"valid",value:e},value:n._parse(new f(r,s,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof X){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of o)a.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)o.length>0&&((0,d.zn)(r,{code:h.eq.unrecognized_keys,keys:o}),n.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let n of o){let i=r.data[n];a.push({key:{status:"valid",value:n},value:e._parse(new f(r,i,r.path,n)),alwaysSet:n in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let n of a){let r=await n.key,i=await n.value;e.push({key:r,value:i,alwaysSet:n.alwaysSet})}return e}).then(e=>d.MY.mergeObjectSync(n,e)):d.MY.mergeObjectSync(n,a)}get shape(){return this._def.shape()}strict(e){return a.errToObj,new G({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(n,r)=>{let i=this._def.errorMap?.(n,r).message??r.defaultError;return"unrecognized_keys"===n.code?{message:a.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new G({...this._def,unknownKeys:"strip"})}passthrough(){return new G({...this._def,unknownKeys:"passthrough"})}extend(e){return new G({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new G({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:l.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new G({...this._def,catchall:e})}pick(e){let n={};for(let r of p.ZS.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new G({...this._def,shape:()=>n})}omit(e){let n={};for(let r of p.ZS.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new G({...this._def,shape:()=>n})}deepPartial(){return function e(n){if(n instanceof G){let r={};for(let i in n.shape){let s=n.shape[i];r[i]=ep.create(e(s))}return new G({...n._def,shape:()=>r})}if(n instanceof Y)return new Y({...n._def,type:e(n.element)});if(n instanceof ep)return ep.create(e(n.unwrap()));if(n instanceof ef)return ef.create(e(n.unwrap()));if(n instanceof et)return et.create(n.items.map(n=>e(n)));else return n}(this)}partial(e){let n={};for(let r of p.ZS.objectKeys(this.shape)){let i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}return new G({...this._def,shape:()=>n})}required(e){let n={};for(let r of p.ZS.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof ep;)e=e._def.innerType;n[r]=e}return new G({...this._def,shape:()=>n})}keyof(){return el(p.ZS.objectKeys(this.shape))}}G.create=(e,n)=>new G({shape:()=>e,unknownKeys:"strip",catchall:X.create(),typeName:l.ZodObject,...m(n)}),G.strictCreate=(e,n)=>new G({shape:()=>e,unknownKeys:"strict",catchall:X.create(),typeName:l.ZodObject,...m(n)}),G.lazycreate=(e,n)=>new G({shape:e,unknownKeys:"strip",catchall:X.create(),typeName:l.ZodObject,...m(n)});class H extends y{_parse(e){let{ctx:n}=this._processInputParams(e),r=this._def.options;if(n.common.async)return Promise.all(r.map(async e=>{let r={...n,common:{...n.common,issues:[]},parent:null};return{result:await e._parseAsync({data:n.data,path:n.path,parent:r}),ctx:r}})).then(function(e){for(let n of e)if("valid"===n.result.status)return n.result;for(let r of e)if("dirty"===r.result.status)return n.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new h.G(e.ctx.common.issues));return(0,d.zn)(n,{code:h.eq.invalid_union,unionErrors:r}),d.uY});{let e,i=[];for(let s of r){let r={...n,common:{...n.common,issues:[]},parent:null},o=s._parseSync({data:n.data,path:n.path,parent:r});if("valid"===o.status)return o;"dirty"!==o.status||e||(e={result:o,ctx:r}),r.common.issues.length&&i.push(r.common.issues)}if(e)return n.common.issues.push(...e.ctx.common.issues),e.result;let s=i.map(e=>new h.G(e));return(0,d.zn)(n,{code:h.eq.invalid_union,unionErrors:s}),d.uY}}get options(){return this._def.options}}H.create=(e,n)=>new H({options:e,typeName:l.ZodUnion,...m(n)});let K=e=>{if(e instanceof eo)return K(e.schema);if(e instanceof ed)return K(e.innerType());if(e instanceof ea)return[e.value];if(e instanceof eh)return e.options;if(e instanceof ec)return p.ZS.objectValues(e.enum);else if(e instanceof eg)return K(e._def.innerType);else if(e instanceof F)return[void 0];else if(e instanceof Z)return[null];else if(e instanceof ep)return[void 0,...K(e.unwrap())];else if(e instanceof ef)return[null,...K(e.unwrap())];else if(e instanceof ev)return K(e.unwrap());else if(e instanceof ex)return K(e.unwrap());else if(e instanceof em)return K(e._def.innerType);else return[]};class J extends y{_parse(e){let{ctx:n}=this._processInputParams(e);if(n.parsedType!==p.Zp.object)return(0,d.zn)(n,{code:h.eq.invalid_type,expected:p.Zp.object,received:n.parsedType}),d.uY;let r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):((0,d.zn)(n,{code:h.eq.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),d.uY)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){let i=new Map;for(let r of n){let n=K(r.shape[e]);if(!n.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let s of n){if(i.has(s))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(s)}`);i.set(s,r)}}return new J({typeName:l.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...m(r)})}}class ee extends y{_parse(e){let{status:n,ctx:r}=this._processInputParams(e),i=(e,i)=>{if((0,d.G4)(e)||(0,d.G4)(i))return d.uY;let s=function e(n,r){let i=(0,p.CR)(n),s=(0,p.CR)(r);if(n===r)return{valid:!0,data:n};if(i===p.Zp.object&&s===p.Zp.object){let i=p.ZS.objectKeys(r),s=p.ZS.objectKeys(n).filter(e=>-1!==i.indexOf(e)),o={...n,...r};for(let i of s){let s=e(n[i],r[i]);if(!s.valid)return{valid:!1};o[i]=s.data}return{valid:!0,data:o}}if(i===p.Zp.array&&s===p.Zp.array){if(n.length!==r.length)return{valid:!1};let i=[];for(let s=0;s<n.length;s++){let o=e(n[s],r[s]);if(!o.valid)return{valid:!1};i.push(o.data)}return{valid:!0,data:i}}if(i===p.Zp.date&&s===p.Zp.date&&+n==+r)return{valid:!0,data:n};return{valid:!1}}(e.value,i.value);return s.valid?(((0,d.DM)(e)||(0,d.DM)(i))&&n.dirty(),{status:n.value,value:s.data}):((0,d.zn)(r,{code:h.eq.invalid_intersection_types}),d.uY)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,n])=>i(e,n)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ee.create=(e,n,r)=>new ee({left:e,right:n,typeName:l.ZodIntersection,...m(r)});class et extends y{_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==p.Zp.array)return(0,d.zn)(r,{code:h.eq.invalid_type,expected:p.Zp.array,received:r.parsedType}),d.uY;if(r.data.length<this._def.items.length)return(0,d.zn)(r,{code:h.eq.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),d.uY;!this._def.rest&&r.data.length>this._def.items.length&&((0,d.zn)(r,{code:h.eq.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());let i=[...r.data].map((e,n)=>{let i=this._def.items[n]||this._def.rest;return i?i._parse(new f(r,e,r.path,n)):null}).filter(e=>!!e);return r.common.async?Promise.all(i).then(e=>d.MY.mergeArray(n,e)):d.MY.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new et({...this._def,rest:e})}}et.create=(e,n)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new et({items:e,typeName:l.ZodTuple,rest:null,...m(n)})};class en extends y{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==p.Zp.object)return(0,d.zn)(r,{code:h.eq.invalid_type,expected:p.Zp.object,received:r.parsedType}),d.uY;let i=[],s=this._def.keyType,o=this._def.valueType;for(let e in r.data)i.push({key:s._parse(new f(r,e,r.path,e)),value:o._parse(new f(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?d.MY.mergeObjectAsync(n,i):d.MY.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return new en(n instanceof y?{keyType:e,valueType:n,typeName:l.ZodRecord,...m(r)}:{keyType:L.create(),valueType:e,typeName:l.ZodRecord,...m(n)})}}class er extends y{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==p.Zp.map)return(0,d.zn)(r,{code:h.eq.invalid_type,expected:p.Zp.map,received:r.parsedType}),d.uY;let i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([e,n],o)=>({key:i._parse(new f(r,e,r.path,[o,"key"])),value:s._parse(new f(r,n,r.path,[o,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of o){let i=await r.key,s=await r.value;if("aborted"===i.status||"aborted"===s.status)return d.uY;("dirty"===i.status||"dirty"===s.status)&&n.dirty(),e.set(i.value,s.value)}return{status:n.value,value:e}})}{let e=new Map;for(let r of o){let i=r.key,s=r.value;if("aborted"===i.status||"aborted"===s.status)return d.uY;("dirty"===i.status||"dirty"===s.status)&&n.dirty(),e.set(i.value,s.value)}return{status:n.value,value:e}}}}er.create=(e,n,r)=>new er({valueType:n,keyType:e,typeName:l.ZodMap,...m(r)});class ei extends y{_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==p.Zp.set)return(0,d.zn)(r,{code:h.eq.invalid_type,expected:p.Zp.set,received:r.parsedType}),d.uY;let i=this._def;null!==i.minSize&&r.data.size<i.minSize.value&&((0,d.zn)(r,{code:h.eq.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),null!==i.maxSize&&r.data.size>i.maxSize.value&&((0,d.zn)(r,{code:h.eq.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());let s=this._def.valueType;function o(e){let r=new Set;for(let i of e){if("aborted"===i.status)return d.uY;"dirty"===i.status&&n.dirty(),r.add(i.value)}return{status:n.value,value:r}}let a=[...r.data.values()].map((e,n)=>s._parse(new f(r,e,r.path,n)));return r.common.async?Promise.all(a).then(e=>o(e)):o(a)}min(e,n){return new ei({...this._def,minSize:{value:e,message:a.toString(n)}})}max(e,n){return new ei({...this._def,maxSize:{value:e,message:a.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}ei.create=(e,n)=>new ei({valueType:e,minSize:null,maxSize:null,typeName:l.ZodSet,...m(n)});class es extends y{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:n}=this._processInputParams(e);if(n.parsedType!==p.Zp.function)return(0,d.zn)(n,{code:h.eq.invalid_type,expected:p.Zp.function,received:n.parsedType}),d.uY;function r(e,r){return(0,d.y7)({data:e,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,(0,c.$W)(),u.A].filter(e=>!!e),issueData:{code:h.eq.invalid_arguments,argumentsError:r}})}function i(e,r){return(0,d.y7)({data:e,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,(0,c.$W)(),u.A].filter(e=>!!e),issueData:{code:h.eq.invalid_return_type,returnTypeError:r}})}let s={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof eu){let e=this;return(0,d.OK)(async function(...n){let a=new h.G([]),l=await e._def.args.parseAsync(n,s).catch(e=>{throw a.addIssue(r(n,e)),a}),c=await Reflect.apply(o,this,l);return await e._def.returns._def.type.parseAsync(c,s).catch(e=>{throw a.addIssue(i(c,e)),a})})}{let e=this;return(0,d.OK)(function(...n){let a=e._def.args.safeParse(n,s);if(!a.success)throw new h.G([r(n,a.error)]);let l=Reflect.apply(o,this,a.data),c=e._def.returns.safeParse(l,s);if(!c.success)throw new h.G([i(l,c.error)]);return c.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new es({...this._def,args:et.create(e).rest(W.create())})}returns(e){return new es({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new es({args:e||et.create([]).rest(W.create()),returns:n||W.create(),typeName:l.ZodFunction,...m(r)})}}class eo extends y{get schema(){return this._def.getter()}_parse(e){let{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}eo.create=(e,n)=>new eo({getter:e,typeName:l.ZodLazy,...m(n)});class ea extends y{_parse(e){if(e.data!==this._def.value){let n=this._getOrReturnCtx(e);return(0,d.zn)(n,{received:n.data,code:h.eq.invalid_literal,expected:this._def.value}),d.uY}return{status:"valid",value:e.data}}get value(){return this._def.value}}function el(e,n){return new eh({values:e,typeName:l.ZodEnum,...m(n)})}ea.create=(e,n)=>new ea({value:e,typeName:l.ZodLiteral,...m(n)});class eh extends y{_parse(e){if("string"!=typeof e.data){let n=this._getOrReturnCtx(e),r=this._def.values;return(0,d.zn)(n,{expected:p.ZS.joinValues(r),received:n.parsedType,code:h.eq.invalid_type}),d.uY}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let n=this._getOrReturnCtx(e),r=this._def.values;return(0,d.zn)(n,{received:n.data,code:h.eq.invalid_enum_value,options:r}),d.uY}return(0,d.OK)(e.data)}get options(){return this._def.values}get enum(){let e={};for(let n of this._def.values)e[n]=n;return e}get Values(){let e={};for(let n of this._def.values)e[n]=n;return e}get Enum(){let e={};for(let n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return eh.create(e,{...this._def,...n})}exclude(e,n=this._def){return eh.create(this.options.filter(n=>!e.includes(n)),{...this._def,...n})}}eh.create=el;class ec extends y{_parse(e){let n=p.ZS.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==p.Zp.string&&r.parsedType!==p.Zp.number){let e=p.ZS.objectValues(n);return(0,d.zn)(r,{expected:p.ZS.joinValues(e),received:r.parsedType,code:h.eq.invalid_type}),d.uY}if(this._cache||(this._cache=new Set(p.ZS.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let e=p.ZS.objectValues(n);return(0,d.zn)(r,{received:r.data,code:h.eq.invalid_enum_value,options:e}),d.uY}return(0,d.OK)(e.data)}get enum(){return this._def.values}}ec.create=(e,n)=>new ec({values:e,typeName:l.ZodNativeEnum,...m(n)});class eu extends y{unwrap(){return this._def.type}_parse(e){let{ctx:n}=this._processInputParams(e);if(n.parsedType!==p.Zp.promise&&!1===n.common.async)return(0,d.zn)(n,{code:h.eq.invalid_type,expected:p.Zp.promise,received:n.parsedType}),d.uY;let r=n.parsedType===p.Zp.promise?n.data:Promise.resolve(n.data);return(0,d.OK)(r.then(e=>this._def.type.parseAsync(e,{path:n.path,errorMap:n.common.contextualErrorMap})))}}eu.create=(e,n)=>new eu({type:e,typeName:l.ZodPromise,...m(n)});class ed extends y{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===l.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:e=>{(0,d.zn)(r,e),e.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),"preprocess"===i.type){let e=i.transform(r.data,s);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===n.value)return d.uY;let i=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===i.status?d.uY:"dirty"===i.status||"dirty"===n.value?(0,d.jm)(i.value):i});{if("aborted"===n.value)return d.uY;let i=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===i.status?d.uY:"dirty"===i.status||"dirty"===n.value?(0,d.jm)(i.value):i}}if("refinement"===i.type){let e=e=>{let n=i.refinement(e,s);if(r.common.async)return Promise.resolve(n);if(n instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?d.uY:("dirty"===r.status&&n.dirty(),e(r.value).then(()=>({status:n.value,value:r.value}))));{let i=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===i.status?d.uY:("dirty"===i.status&&n.dirty(),e(i.value),{status:n.value,value:i.value})}}if("transform"===i.type)if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>(0,d.fn)(e)?Promise.resolve(i.transform(e.value,s)).then(e=>({status:n.value,value:e})):d.uY);else{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!(0,d.fn)(e))return d.uY;let o=i.transform(e.value,s);if(o instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}p.ZS.assertNever(i)}}ed.create=(e,n,r)=>new ed({schema:e,typeName:l.ZodEffects,effect:n,...m(r)}),ed.createWithPreprocess=(e,n,r)=>new ed({schema:n,effect:{type:"preprocess",transform:e},typeName:l.ZodEffects,...m(r)});class ep extends y{_parse(e){return this._getType(e)===p.Zp.undefined?(0,d.OK)(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ep.create=(e,n)=>new ep({innerType:e,typeName:l.ZodOptional,...m(n)});class ef extends y{_parse(e){return this._getType(e)===p.Zp.null?(0,d.OK)(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ef.create=(e,n)=>new ef({innerType:e,typeName:l.ZodNullable,...m(n)});class eg extends y{_parse(e){let{ctx:n}=this._processInputParams(e),r=n.data;return n.parsedType===p.Zp.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}eg.create=(e,n)=>new eg({innerType:e,typeName:l.ZodDefault,defaultValue:"function"==typeof n.default?n.default:()=>n.default,...m(n)});class em extends y{_parse(e){let{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return(0,d.xP)(i)?i.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new h.G(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===i.status?i.value:this._def.catchValue({get error(){return new h.G(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}em.create=(e,n)=>new em({innerType:e,typeName:l.ZodCatch,catchValue:"function"==typeof n.catch?n.catch:()=>n.catch,...m(n)});class ey extends y{_parse(e){if(this._getType(e)!==p.Zp.nan){let n=this._getOrReturnCtx(e);return(0,d.zn)(n,{code:h.eq.invalid_type,expected:p.Zp.nan,received:n.parsedType}),d.uY}return{status:"valid",value:e.data}}}ey.create=e=>new ey({typeName:l.ZodNaN,...m(e)});let eO=Symbol("zod_brand");class ev extends y{_parse(e){let{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class eb extends y{_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?d.uY:"dirty"===e.status?(n.dirty(),(0,d.jm)(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?d.uY:"dirty"===e.status?(n.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,n){return new eb({in:e,out:n,typeName:l.ZodPipeline})}}class ex extends y{_parse(e){let n=this._def.innerType._parse(e),r=e=>((0,d.fn)(e)&&(e.value=Object.freeze(e.value)),e);return(0,d.xP)(n)?n.then(e=>r(e)):r(n)}unwrap(){return this._def.innerType}}function ew(e,n){let r="function"==typeof e?e(n):"string"==typeof e?{message:e}:e;return"string"==typeof r?{message:r}:r}function eS(e,n={},r){return e?q.create().superRefine((i,s)=>{let o=e(i);if(o instanceof Promise)return o.then(e=>{if(!e){let e=ew(n,i),o=e.fatal??r??!0;s.addIssue({code:"custom",...e,fatal:o})}});if(!o){let e=ew(n,i),o=e.fatal??r??!0;s.addIssue({code:"custom",...e,fatal:o})}}):q.create()}ex.create=(e,n)=>new ex({innerType:e,typeName:l.ZodReadonly,...m(n)});let e_={object:G.lazycreate};(o=l||(l={})).ZodString="ZodString",o.ZodNumber="ZodNumber",o.ZodNaN="ZodNaN",o.ZodBigInt="ZodBigInt",o.ZodBoolean="ZodBoolean",o.ZodDate="ZodDate",o.ZodSymbol="ZodSymbol",o.ZodUndefined="ZodUndefined",o.ZodNull="ZodNull",o.ZodAny="ZodAny",o.ZodUnknown="ZodUnknown",o.ZodNever="ZodNever",o.ZodVoid="ZodVoid",o.ZodArray="ZodArray",o.ZodObject="ZodObject",o.ZodUnion="ZodUnion",o.ZodDiscriminatedUnion="ZodDiscriminatedUnion",o.ZodIntersection="ZodIntersection",o.ZodTuple="ZodTuple",o.ZodRecord="ZodRecord",o.ZodMap="ZodMap",o.ZodSet="ZodSet",o.ZodFunction="ZodFunction",o.ZodLazy="ZodLazy",o.ZodLiteral="ZodLiteral",o.ZodEnum="ZodEnum",o.ZodEffects="ZodEffects",o.ZodNativeEnum="ZodNativeEnum",o.ZodOptional="ZodOptional",o.ZodNullable="ZodNullable",o.ZodDefault="ZodDefault",o.ZodCatch="ZodCatch",o.ZodPromise="ZodPromise",o.ZodBranded="ZodBranded",o.ZodPipeline="ZodPipeline",o.ZodReadonly="ZodReadonly";let ek=(e,n={message:`Input not instance of ${e.name}`})=>eS(n=>n instanceof e,n),eC=L.create,eE=Q.create,eT=ey.create,eP=j.create,eA=V.create,eM=z.create,eN=B.create,eD=F.create,eI=Z.create,e$=q.create,eR=W.create,eL=X.create,eQ=U.create,ej=Y.create,eV=G.create,ez=G.strictCreate,eB=H.create,eF=J.create,eZ=ee.create,eq=et.create,eW=en.create,eX=er.create,eU=ei.create,eY=es.create,eG=eo.create,eH=ea.create,eK=eh.create,eJ=ec.create,e0=eu.create,e1=ed.create,e2=ep.create,e5=ef.create,e4=ed.createWithPreprocess,e3=eb.create,e6=()=>eC().optional(),e9=()=>eE().optional(),e7=()=>eA().optional(),e8={string:e=>L.create({...e,coerce:!0}),number:e=>Q.create({...e,coerce:!0}),boolean:e=>V.create({...e,coerce:!0}),bigint:e=>j.create({...e,coerce:!0}),date:e=>z.create({...e,coerce:!0})},te=d.uY}}]);