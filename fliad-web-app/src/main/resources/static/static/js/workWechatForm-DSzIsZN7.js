import{r as a}from"./formRules-B2bzcXv4.js";import{c as e}from"./configApi-BMiyCPj3.js";import{k as l,b as o}from"./ant-design-vendor-CRFwT3Wn.js";import{d as n,f as t,a1 as s,a6 as r,V as i,a2 as f,k as u,u as c,G as _}from"./vue-vendor-BzDj5Url.js";import"./index-DcffTgQN.js";const m=n({name:"WorkWechatForm"}),p=Object.assign(m,{setup(n){const m=t(),p=t({}),d=t(!1),O=t(!0);e.configList({category:"PUSH_WORKWECHAT"}).then(a=>{O.value=!1,a?a.forEach(a=>{p.value[a.configKey]=a.configValue}):l.warning("表单项不存在，请初始化数据库")});const W={SNOWY_PUSH_WORKWECHAT_TOKEN_ID:[a("请输入企业微信消息推送TOKENID")]},g={span:4},v={span:12};return(a,l)=>{const n=s("a-input"),t=s("a-form-item"),E=s("a-button"),K=s("a-form"),T=s("a-spin");return i(),r(T,{spinning:c(O)},{default:f(()=>[u(K,{ref_key:"formRef",ref:m,model:c(p),rules:W,layout:"vertical","label-col":{...g,offset:0},"wrapper-col":{...v,offset:0}},{default:f(()=>[u(t,{label:"消息推送TOKENID：",name:"SNOWY_PUSH_WORKWECHAT_TOKEN_ID"},{default:f(()=>[u(n,{value:c(p).SNOWY_PUSH_WORKWECHAT_TOKEN_ID,"onUpdate:value":l[0]||(l[0]=a=>c(p).SNOWY_PUSH_WORKWECHAT_TOKEN_ID=a),placeholder:"请输入消息推送TOKENID"},null,8,["value"])]),_:1}),u(t,null,{default:f(()=>[u(E,{type:"primary",loading:c(d),onClick:l[1]||(l[1]=a=>{m.value.validate().then(()=>{d.value=!0;let a=o(p.value);const l=Object.entries(a).map(a=>({configKey:a[0],configValue:a[1]}));e.configEditForm(l).then(()=>{}).finally(()=>{d.value=!1})}).catch(()=>{})})},{default:f(()=>l[3]||(l[3]=[_("保存")])),_:1},8,["loading"]),u(E,{class:"xn-ml10",onClick:l[2]||(l[2]=()=>c(m).resetFields())},{default:f(()=>l[4]||(l[4]=[_("重置")])),_:1})]),_:1})]),_:1},8,["model","label-col","wrapper-col"])]),_:1},8,["spinning"])}}});export{p as default};
