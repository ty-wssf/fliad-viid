import{r as a}from"./formRules-B2bzcXv4.js";import{c as e}from"./configApi-BMiyCPj3.js";import{k as l,b as _}from"./ant-design-vendor-CRFwT3Wn.js";import{d as n,f as o,a1 as t,a6 as T,V as E,a2 as s,k as r,u,G as i}from"./vue-vendor-BzDj5Url.js";import"./index-DcffTgQN.js";const R=n({name:"wechatThirdForm"}),f=Object.assign(R,{setup(n){const R=o(),f=o({}),C=o(!1),I=o(!0);e.configList({category:"THIRD_WECHAT"}).then(a=>{I.value=!1,a?a.forEach(a=>{f.value[a.configKey]=a.configValue}):l.warning("表单项不存在，请初始化数据库")});const c={SNOWY_THIRD_WECHAT_CLIENT_ID:[a("请输入微信客户端ID")],SNOWY_THIRD_WECHAT_CLIENT_SECRET:[a("请输入微信客户端SECRET")],SNOWY_THIRD_WECHAT_REDIRECT_URL:[a("请输入重定向URL")]},d={span:4},p={span:12};return(a,l)=>{const n=t("a-input"),o=t("a-form-item"),H=t("a-button"),m=t("a-form"),W=t("a-spin");return E(),T(W,{spinning:u(I)},{default:s(()=>[r(m,{ref_key:"formRef",ref:R,model:u(f),rules:c,layout:"vertical","label-col":{...d,offset:0},"wrapper-col":{...p,offset:0}},{default:s(()=>[r(o,{label:"微信客户端ID：",name:"SNOWY_THIRD_WECHAT_CLIENT_ID"},{default:s(()=>[r(n,{value:u(f).SNOWY_THIRD_WECHAT_CLIENT_ID,"onUpdate:value":l[0]||(l[0]=a=>u(f).SNOWY_THIRD_WECHAT_CLIENT_ID=a),placeholder:"请输入微信客户端ID"},null,8,["value"])]),_:1}),r(o,{label:"微信客户端SECRET：",name:"SNOWY_THIRD_WECHAT_CLIENT_SECRET"},{default:s(()=>[r(n,{value:u(f).SNOWY_THIRD_WECHAT_CLIENT_SECRET,"onUpdate:value":l[1]||(l[1]=a=>u(f).SNOWY_THIRD_WECHAT_CLIENT_SECRET=a),placeholder:"请输入微信客户端SECRET"},null,8,["value"])]),_:1}),r(o,{label:"重定向URL：",name:"SNOWY_THIRD_WECHAT_REDIRECT_URL"},{default:s(()=>[r(n,{value:u(f).SNOWY_THIRD_WECHAT_REDIRECT_URL,"onUpdate:value":l[2]||(l[2]=a=>u(f).SNOWY_THIRD_WECHAT_REDIRECT_URL=a),placeholder:"请输入重定向URL"},null,8,["value"])]),_:1}),r(o,null,{default:s(()=>[r(H,{type:"primary",loading:u(C),onClick:l[3]||(l[3]=a=>{R.value.validate().then(()=>{C.value=!0;let a=_(f.value);const l=Object.entries(a).map(a=>({configKey:a[0],configValue:a[1]}));e.configEditForm(l).then(()=>{}).finally(()=>{C.value=!1})}).catch(()=>{})})},{default:s(()=>l[5]||(l[5]=[i("保存")])),_:1},8,["loading"]),r(H,{class:"xn-ml10",onClick:l[4]||(l[4]=()=>u(R).resetFields())},{default:s(()=>l[6]||(l[6]=[i("重置")])),_:1})]),_:1})]),_:1},8,["model","label-col","wrapper-col"])]),_:1},8,["spinning"])}}});export{f as default};
