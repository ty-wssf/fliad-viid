import{_ as e,b as a}from"./form-kPH8RSIp.js";import{_ as t,i as l,t as d}from"./index-DcffTgQN.js";import{x as r}from"./ant-design-vendor-CRFwT3Wn.js";import{f as n,a1 as s,U as o,V as i,k as c,a2 as u,u as f,a6 as m,H as p,G as h,Z as _,F as v,a3 as y,n as x}from"./vue-vendor-BzDj5Url.js";import"./index-yhO5Pkur.js";import"./formRules-B2bzcXv4.js";const b=["onClick"],g=t({__name:"index",setup(t){const g=[{title:"字典名称",dataIndex:"dictLabel",width:350},{title:"字典值",dataIndex:"dictValue",width:350},{title:"排序",dataIndex:"sortCode"}];l("bizDictEdit")&&g.push({title:"操作",dataIndex:"action",align:"center",width:"150px"});const k=n(null),I=n(),E=n(!0),w=n(),j=n({}),C=n([]),S=n([]),T={children:"children",title:"dictLabel",key:"id"},K={refresh:!0,height:!0,columnSetting:!0,striped:!1},R=e=>(P(),a.dictPage(Object.assign(e,j.value)).then(e=>{if(e.records&&j.value.parentId){let a=[];e.records.forEach(t=>{e.records.find(e=>e.id===t.parentId)||a.push(t)}),1===a.length&&e.records.forEach(e=>{e.id===a[0].id&&(e.level="上级")}),a=[]}return e})),D=()=>{w.value.resetFields(),k.value.refresh(!0)},P=()=>{a.dictTree().then(e=>{e&&(S.value=e)}).finally(()=>{E.value=!1})},A=e=>{e&&e.length>0?(j.value.parentId=e.toString(),g.find(e=>"层级"===e.title)||g.splice(2,0,{title:"层级",dataIndex:"level",width:100})):(delete j.value.parentId,g.splice(2,1)),k.value.refresh(!0)},O=()=>{x(()=>{a.dictTreeAll().then(e=>{d.data.set("DICT_TYPE_TREE_DATA",e)})})};return(a,t)=>{const l=s("a-tree"),d=s("a-empty"),n=s("a-card"),x=s("a-col"),P=s("a-input"),F=s("a-form-item"),L=s("SearchOutlined"),U=s("a-button"),z=s("redo-outlined"),G=s("a-row"),M=s("a-form"),V=s("a-tag"),H=s("s-table");return i(),o(v,null,[c(G,{gutter:10},{default:u(()=>[c(x,{xs:24,sm:24,md:24,lg:5,xl:5},{default:u(()=>[c(n,{bordered:!1,loading:f(E),class:"left-tree-container"},{default:u(()=>[f(S).length>0?(i(),m(l,{key:0,expandedKeys:f(C),"onUpdate:expandedKeys":t[0]||(t[0]=e=>p(C)?C.value=e:null),"tree-data":f(S),"field-names":T,onSelect:A},null,8,["expandedKeys","tree-data"])):(i(),m(d,{key:1,image:f(r).PRESENTED_IMAGE_SIMPLE},null,8,["image"]))]),_:1},8,["loading"])]),_:1}),c(x,{xs:24,sm:24,md:24,lg:19,xl:19},{default:u(()=>[c(n,{bordered:!1,class:"xn-mb10"},{default:u(()=>[c(M,{ref_key:"searchFormRef",ref:w,name:"advanced_search",class:"ant-advanced-search-form mb-3",model:f(j)},{default:u(()=>[c(G,{gutter:24},{default:u(()=>[c(x,{span:8},{default:u(()=>[c(F,{name:"searchKey",label:"字典名称"},{default:u(()=>[c(P,{value:f(j).searchKey,"onUpdate:value":t[1]||(t[1]=e=>f(j).searchKey=e),placeholder:"请输入字典名称"},null,8,["value"])]),_:1})]),_:1}),c(x,{span:8},{default:u(()=>[c(U,{type:"primary",onClick:t[2]||(t[2]=e=>f(k).refresh(!0))},{icon:u(()=>[c(L)]),default:u(()=>[t[4]||(t[4]=h(" 查询 "))]),_:1}),c(U,{class:"snowy-button-left",onClick:D},{icon:u(()=>[c(z)]),default:u(()=>[t[5]||(t[5]=h(" 重置 "))]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),c(n,{bordered:!1,class:"xn-mb10"},{default:u(()=>[c(H,{ref_key:"tableRef",ref:k,columns:g,data:R,"expand-row-by-click":!0,bordered:"","tool-config":K,"row-key":e=>e.id},{bodyCell:u(({column:e,record:l})=>["level"===e.dataIndex?(i(),o(v,{key:0},[l.level?(i(),m(V,{key:0,color:"blue"},{default:u(()=>[h(y(l.level),1)]),_:2},1024)):(i(),m(V,{key:1,color:"green"},{default:u(()=>t[6]||(t[6]=[h("子级")])),_:1}))],64)):_("",!0),"action"===e.dataIndex?(i(),o(v,{key:1},[a.hasPerm("bizDictEdit")?(i(),o("a",{key:0,onClick:e=>f(I).onOpen(l)},"编辑",8,b)):_("",!0)],64)):_("",!0)]),_:1},8,["row-key"])]),_:1})]),_:1})]),_:1}),c(e,{ref_key:"formRef",ref:I,onSuccessful:t[3]||(t[3]=e=>(k.value.refresh(),void O()))},null,512)],64)}}},[["__scopeId","data-v-f0cda2cc"]]);export{g as default};
