import{_ as e}from"./index-yhO5Pkur.js";import{m as a}from"./messageApi-BFWVtpEx.js";import{d as s,f as t,a1 as l,a6 as o,V as r,a2 as d,k as n,G as i,a3 as m,u as f,Y as c,U as u,Z as v,F as b}from"./vue-vendor-BzDj5Url.js";import"./index-DcffTgQN.js";import"./ant-design-vendor-CRFwT3Wn.js";const p={key:0,class:"xn-color-d9d9d9"},_={key:1,class:"xn-color-ff4d4f"},y=s({name:"messageDetail"}),x=Object.assign(y,{setup(s,{expose:y}){const x=t([]),j=t(!1),k=t(),g=t({}),w=t(),h=[{title:"姓名",dataIndex:"receiveUserName"},{title:"是否已读",dataIndex:"read",width:120}],I=e=>{const s={id:e.id};a.messageDetail(s).then(a=>{Object.assign(e,a),g.value=e,x.value=a.receiveInfoList,w.value.refresh(!0)})},O=()=>new Promise(e=>{e(x.value)}),C=()=>{x.value=[],j.value=!1};return y({onOpen:e=>{j.value=!0,I(e)}}),(a,s)=>{const t=l("a-descriptions-item"),y=l("a-descriptions"),x=l("a-form-item"),I=l("s-table"),D=l("a-form"),L=e;return r(),o(L,{title:"详情",width:700,visible:f(j),"destroy-on-close":!0,onClose:C},{default:d(()=>[n(y,{column:1,size:"middle",bordered:"",class:"mb-2"},{default:d(()=>[n(t,{label:"主题"},{default:d(()=>[i(m(f(g).subject),1)]),_:1}),n(t,{label:"发送时间"},{default:d(()=>[i(m(f(g).createTime),1)]),_:1})]),_:1}),n(D,{ref_key:"formRef",ref:k,model:f(g),layout:"vertical"},{default:d(()=>[n(x,{label:"内容：",name:"content"},{default:d(()=>[c("span",null,m(f(g).content),1)]),_:1}),n(x,{label:"查收情况：",name:"receiveInfoList"},{default:d(()=>[n(I,{ref_key:"tableRef",ref:w,columns:h,data:O,alert:!1,showPagination:!1,bordered:"","row-key":e=>e.id},{bodyCell:d(({column:e,record:a})=>["read"===e.dataIndex?(r(),u(b,{key:0},[a.read?(r(),u("span",p,"已读")):(r(),u("span",_,"未读"))],64)):v("",!0)]),_:1},8,["row-key"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])}}});export{x as default};
