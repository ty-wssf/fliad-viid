import{d as e}from"./downloadUtil-80YX7TDG.js";import a from"./basic-RMlr3ZGL.js";import l from"./config-DpE8zAc2.js";import s from"./preview-BNsHstz7.js";import{g as t}from"./genBasicApi-QBDGPEOc.js";import{_ as n}from"./index-DcffTgQN.js";import{k as i}from"./ant-design-vendor-CRFwT3Wn.js";import{d as o,f as u,a1 as r,U as d,V as c,k as p,Z as f,a2 as m,u as v,F as _,W as g,Y as k,G as y,a6 as b,n as x}from"./vue-vendor-BzDj5Url.js";import"./formRules-B2bzcXv4.js";import"./index-yhO5Pkur.js";import"./index-Dj7V4so4.js";const j={class:"xn-fdr"},h={key:0},w={key:1},O={key:2},C=o({name:"genSteps"}),R=n(Object.assign(C,{emits:{closed:null},setup(n,{expose:o,emit:C}){const R=C,P=u(0),S=u(),z=u(!1),G=u(),B=u(),E=u(),U=()=>{P.value++,1===P.value&&(G.value.onSubmit().then(e=>{S.value=e,P.value++,x(()=>{B.value.onOpen(e)})}).catch(()=>{}),P.value--),2===P.value&&(B.value.onSubmit(S.value).then(e=>{P.value++}).catch(e=>{i.warning(e)}),P.value--)},A=()=>{P.value--,0===P.value&&x(()=>{G.value.onOpen(S.value)}),1===P.value&&x(()=>{B.value.onOpen(S.value)})},D=[{title:"基础信息",content:"基础信息"},{title:"详细配置",content:"详细配置"},{title:"完成",content:"已经配置好代码生成，现在可以生成代码啦"}],F=()=>{const a={id:S.value.id};"PRO"===S.value.generateType?t.basicExecGenPro(a).then(()=>{i.success("操作成功"),R("closed")}):t.basicExecGenBiz(a).then(a=>{e.resultDownload(a),R("closed")})};return o({configSteps:e=>{G.value.onOpen(e)}}),(e,t)=>{const n=r("a-col"),i=r("a-step"),o=r("a-steps"),u=r("a-button"),x=r("a-row"),C=r("a-card"),I=r("a-space"),M=r("a-result");return c(),d("div",null,[p(C,{class:"steps-card",bordered:!1},{default:m(()=>[p(x,{class:"xn-row"},{default:m(()=>[p(n,{span:6}),p(n,{span:12},{default:m(()=>[p(o,{current:v(P)},{default:m(()=>[(c(),d(_,null,g(D,e=>p(i,{key:e.title,title:e.title},null,8,["title"])),64))]),_:1},8,["current"])]),_:1}),p(n,{span:6},{default:m(()=>[k("div",j,[p(u,{disabled:0===v(P),class:"xn-ml8",onClick:A},{default:m(()=>t[2]||(t[2]=[y(" 上一步 ")])),_:1},8,["disabled"]),p(u,{disabled:2===v(P),type:"primary",class:"xn-ml8",onClick:U},{default:m(()=>t[3]||(t[3]=[y(" 继续 ")])),_:1},8,["disabled"]),p(u,{type:"primary",danger:"",ghost:"",class:"xn-ml8",onClick:t[0]||(t[0]=e=>R("closed"))},{default:m(()=>t[4]||(t[4]=[y(" 关闭 ")])),_:1})])]),_:1})]),_:1})]),_:1}),0===v(P)?(c(),d("div",h,[p(a,{ref_key:"basicRef",ref:G},null,512)])):f("",!0),1===v(P)?(c(),d("div",w,[p(l,{ref_key:"configRef",ref:B},null,512)])):f("",!0),2===v(P)?(c(),d("div",O,[p(C,null,{default:m(()=>[p(M,{status:"success",title:"操作成功","sub-title":"此刻可预览代码，同时您可以一键生成代码啦"},{extra:m(()=>[p(I,{size:"middle"},{default:m(()=>[v(P)>0?(c(),b(u,{key:0,class:"xn-ml8",onClick:t[1]||(t[1]=e=>v(E).onOpen(v(S)))},{default:m(()=>t[5]||(t[5]=[y("预览")])),_:1})):f("",!0),v(P)===D.length-1?(c(),b(u,{key:1,type:"primary",loading:v(z),onClick:F},{default:m(()=>t[6]||(t[6]=[y("生成并关闭")])),_:1},8,["loading"])):f("",!0)]),_:1})]),_:1})]),_:1}),p(s,{ref_key:"genPreviewRef",ref:E},null,512)])):f("",!0)])}}}),[["__scopeId","data-v-64cc72c5"]]);export{R as default};
