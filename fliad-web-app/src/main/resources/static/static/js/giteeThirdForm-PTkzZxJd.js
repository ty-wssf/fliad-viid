import{r as e}from"./formRules-B2bzcXv4.js";import{c as a}from"./configApi-BMiyCPj3.js";import{k as l,b as E}from"./ant-design-vendor-CRFwT3Wn.js";import{d as _,f as n,a1 as o,a6 as T,V as I,a2 as t,k as s,u as r,G as u}from"./vue-vendor-BzDj5Url.js";import"./index-DcffTgQN.js";const i=_({name:"giteeThirdForm"}),R=Object.assign(i,{setup(_){const i=n(),R=n({}),f=n(!1),c=n(!0);a.configList({category:"THIRD_GITEE"}).then(e=>{c.value=!1,e?e.forEach(e=>{R.value[e.configKey]=e.configValue}):l.warning("表单项不存在，请初始化数据库")});const d={SNOWY_THIRD_GITEE_CLIENT_ID:[e("请输入GITEE客户端ID")],SNOWY_THIRD_GITEE_CLIENT_SECRET:[e("请输入GITEE客户端SECRET")],SNOWY_THIRD_GITEE_REDIRECT_URL:[e("请输入重定向URL")]},p={span:4},m={span:12};return(e,l)=>{const _=o("a-input"),n=o("a-form-item"),D=o("a-button"),C=o("a-form"),v=o("a-spin");return I(),T(v,{spinning:r(c)},{default:t(()=>[s(C,{ref_key:"formRef",ref:i,model:r(R),rules:d,layout:"vertical","label-col":{...p,offset:0},"wrapper-col":{...m,offset:0}},{default:t(()=>[s(n,{label:"GITEE客户端ID：",name:"SNOWY_THIRD_GITEE_CLIENT_ID"},{default:t(()=>[s(_,{value:r(R).SNOWY_THIRD_GITEE_CLIENT_ID,"onUpdate:value":l[0]||(l[0]=e=>r(R).SNOWY_THIRD_GITEE_CLIENT_ID=e),placeholder:"请输入GITEE客户端ID"},null,8,["value"])]),_:1}),s(n,{label:"GITEE客户端SECRET：",name:"SNOWY_THIRD_GITEE_CLIENT_SECRET"},{default:t(()=>[s(_,{value:r(R).SNOWY_THIRD_GITEE_CLIENT_SECRET,"onUpdate:value":l[1]||(l[1]=e=>r(R).SNOWY_THIRD_GITEE_CLIENT_SECRET=e),placeholder:"请输入GITEE客户端SECRET"},null,8,["value"])]),_:1}),s(n,{label:"重定向URL：",name:"SNOWY_THIRD_GITEE_REDIRECT_URL"},{default:t(()=>[s(_,{value:r(R).SNOWY_THIRD_GITEE_REDIRECT_URL,"onUpdate:value":l[2]||(l[2]=e=>r(R).SNOWY_THIRD_GITEE_REDIRECT_URL=e),placeholder:"请输入重定向URL"},null,8,["value"])]),_:1}),s(n,null,{default:t(()=>[s(D,{type:"primary",loading:r(f),onClick:l[3]||(l[3]=e=>{i.value.validate().then(()=>{f.value=!0;let e=E(R.value);const l=Object.entries(e).map(e=>({configKey:e[0],configValue:e[1]}));a.configEditForm(l).then(()=>{}).finally(()=>{f.value=!1})}).catch(()=>{})})},{default:t(()=>l[5]||(l[5]=[u("保存")])),_:1},8,["loading"]),s(D,{class:"xn-ml10",onClick:l[4]||(l[4]=()=>r(i).resetFields())},{default:t(()=>l[6]||(l[6]=[u("重置")])),_:1})]),_:1})]),_:1},8,["model","label-col","wrapper-col"])]),_:1},8,["spinning"])}}});export{R as default};
