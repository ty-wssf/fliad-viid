import{r as a}from"./formRules-B2bzcXv4.js";import{c as e}from"./configApi-BMiyCPj3.js";import{k as l,b as _}from"./ant-design-vendor-CRFwT3Wn.js";import{d as S,f as n,a1 as o,a6 as t,V as s,a2 as r,k as u,u as E,G as i}from"./vue-vendor-BzDj5Url.js";import"./index-DcffTgQN.js";const f=S({name:"aliyunSmsForm"}),N=Object.assign(f,{setup(S){const f=n(),N=n({}),Y=n(!1),c=n(!0);e.configList({category:"SMS_ALIYUN"}).then(a=>{c.value=!1,a?a.forEach(a=>{N.value[a.configKey]=a.configValue}):l.warning("表单项不存在，请初始化数据库")});const A={SNOWY_SMS_ALIYUN_ACCESS_KEY_ID:[a("请输入阿里云密钥ID")],SNOWY_SMS_ALIYUN_ACCESS_KEY_SECRET:[a("请输入阿里云密钥SECRET")],SNOWY_SMS_ALIYUN_DEFAULT_SIGN_NAME:[a("请输入阿里云短信签名")]},d={span:4},p={span:12};return(a,l)=>{const S=o("a-input"),n=o("a-form-item"),m=o("a-button"),C=o("a-form"),I=o("a-spin");return s(),t(I,{spinning:E(c)},{default:r(()=>[u(C,{ref_key:"formRef",ref:f,model:E(N),rules:A,layout:"vertical","label-col":{...d,offset:0},"wrapper-col":{...p,offset:0}},{default:r(()=>[u(n,{label:"阿里云密钥ID：",name:"SNOWY_SMS_ALIYUN_ACCESS_KEY_ID"},{default:r(()=>[u(S,{value:E(N).SNOWY_SMS_ALIYUN_ACCESS_KEY_ID,"onUpdate:value":l[0]||(l[0]=a=>E(N).SNOWY_SMS_ALIYUN_ACCESS_KEY_ID=a),placeholder:"请输入阿里云密钥ID"},null,8,["value"])]),_:1}),u(n,{label:"阿里云密钥SECRET：",name:"SNOWY_SMS_ALIYUN_ACCESS_KEY_SECRET"},{default:r(()=>[u(S,{value:E(N).SNOWY_SMS_ALIYUN_ACCESS_KEY_SECRET,"onUpdate:value":l[1]||(l[1]=a=>E(N).SNOWY_SMS_ALIYUN_ACCESS_KEY_SECRET=a),placeholder:"请输入阿里云密钥SECRET"},null,8,["value"])]),_:1}),u(n,{label:"阿里云短信签名：",name:"SNOWY_SMS_ALIYUN_DEFAULT_SIGN_NAME"},{default:r(()=>[u(S,{value:E(N).SNOWY_SMS_ALIYUN_DEFAULT_SIGN_NAME,"onUpdate:value":l[2]||(l[2]=a=>E(N).SNOWY_SMS_ALIYUN_DEFAULT_SIGN_NAME=a),placeholder:"请输入阿里云短信签名"},null,8,["value"])]),_:1}),u(n,null,{default:r(()=>[u(m,{type:"primary",loading:E(Y),onClick:l[3]||(l[3]=a=>{f.value.validate().then(()=>{Y.value=!0;let a=_(N.value);const l=Object.entries(a).map(a=>({configKey:a[0],configValue:a[1]}));e.configEditForm(l).then(()=>{}).finally(()=>{Y.value=!1})}).catch(()=>{})})},{default:r(()=>l[5]||(l[5]=[i("保存")])),_:1},8,["loading"]),u(m,{class:"xn-ml10",onClick:l[4]||(l[4]=()=>E(f).resetFields())},{default:r(()=>l[6]||(l[6]=[i("重置")])),_:1})]),_:1})]),_:1},8,["model","label-col","wrapper-col"])]),_:1},8,["spinning"])}}});export{N as default};
