import{_ as e,f as t}from"./form-8Y_Z5STV.js";import{d as o,f as a,a1 as n,U as r,V as s,k as l,a2 as i,Z as d,F as u,Y as c,u as f,G as p}from"./vue-vendor-BzDj5Url.js";import"./formRules-B2bzcXv4.js";import"./index-DcffTgQN.js";import"./ant-design-vendor-CRFwT3Wn.js";const m=["onClick"],y=o({name:"sysResourceField"}),k=Object.assign(y,{setup(o,{expose:y}){const k=[{title:"名称",dataIndex:"title"},{title:"字段名",dataIndex:"code",sorter:!0},{title:"排序",dataIndex:"sortCode",sorter:!0},{title:"操作",key:"action",align:"center",scopedSlots:{customRender:"action"}}],v={refresh:!0,height:!1,columnSetting:!1,striped:!1},g=a(!1),h=a(),C=a(),_=a(),j=a(),b=()=>{g.value=!1},x=e=>t.fieldPage(Object.assign(e,h.value)).then(e=>e);return y({onOpen:e=>{_.value=e,h.value={parentId:e.id,category:"FIELD"},g.value=!0}}),(o,a)=>{const y=n("plus-outlined"),h=n("a-button"),I=n("a-divider"),O=n("a-popconfirm"),w=n("s-table"),F=n("a-drawer");return s(),r(u,null,[l(F,{title:"字段权限",width:650,open:f(g),"destroy-on-close":!0,onClose:b},{default:i(()=>[l(w,{ref_key:"tableRef",ref:j,columns:k,data:x,alert:!1,"row-key":e=>e.id,"tool-config":v},{operator:i(()=>[l(h,{type:"primary",onClick:a[0]||(a[0]=e=>f(C).onOpen(f(_)))},{icon:i(()=>[l(y)]),default:i(()=>[a[2]||(a[2]=c("span",null,"新增字段",-1))]),_:1})]),bodyCell:i(({column:e,record:o})=>["action"===e.key?(s(),r(u,{key:0},[c("a",{onClick:e=>f(C).onOpen(f(_),o)},"编辑",8,m),l(I,{type:"vertical"}),l(O,{title:"确定要删除此字段吗？",onConfirm:e=>(e=>{let o=[{id:e.id}];t.fieldDelete(o).then(()=>{j.value.refresh(!0)})})(o)},{default:i(()=>[l(h,{type:"link",danger:"",size:"small"},{default:i(()=>a[3]||(a[3]=[p("删除")])),_:1})]),_:2},1032,["onConfirm"])],64)):d("",!0)]),_:1},8,["row-key"])]),_:1},8,["open"]),l(e,{ref_key:"fieldForm",ref:C,onSuccessful:a[1]||(a[1]=e=>f(j).refresh(!0))},null,512)],64)}}});export{k as default};
