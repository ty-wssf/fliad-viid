import{r as a}from"./formRules-B2bzcXv4.js";import{c as e}from"./configApi-BMiyCPj3.js";import{k as l,b as n}from"./ant-design-vendor-CRFwT3Wn.js";import{d as o,f as t,a1 as s,a6 as r,V as i,a2 as _,k as u,u as f,G as c}from"./vue-vendor-BzDj5Url.js";import"./index-DcffTgQN.js";const N=o({name:"dingTalkForm"}),d=Object.assign(N,{setup(o){const N=t(),d=t({}),p=t(!1),m=t(!0);e.configList({category:"PUSH_DINGTALK"}).then(a=>{m.value=!1,a?a.forEach(a=>{d.value[a.configKey]=a.configValue}):l.warning("表单项不存在，请初始化数据库")});const S={SNOWY_PUSH_DINGTALK_SIGN:[a("请输入钉钉消息推送签名")],SNOWY_PUSH_DINGTALK_TOKEN_ID:[a("请输入钉钉消息推送TOKENID")]},I={span:4},K={span:12};return(a,l)=>{const o=s("a-input"),t=s("a-form-item"),v=s("a-button"),O=s("a-form"),T=s("a-spin");return i(),r(T,{spinning:f(m)},{default:_(()=>[u(O,{ref_key:"formRef",ref:N,model:f(d),rules:S,layout:"vertical","label-col":{...I,offset:0},"wrapper-col":{...K,offset:0}},{default:_(()=>[u(t,{label:"消息推送签名：",name:"SNOWY_PUSH_DINGTALK_SIGN"},{default:_(()=>[u(o,{value:f(d).SNOWY_PUSH_DINGTALK_SIGN,"onUpdate:value":l[0]||(l[0]=a=>f(d).SNOWY_PUSH_DINGTALK_SIGN=a),placeholder:"请输入消息推送签名"},null,8,["value"])]),_:1}),u(t,{label:"消息推送TOKENID：",name:"SNOWY_PUSH_DINGTALK_TOKEN_ID"},{default:_(()=>[u(o,{value:f(d).SNOWY_PUSH_DINGTALK_TOKEN_ID,"onUpdate:value":l[1]||(l[1]=a=>f(d).SNOWY_PUSH_DINGTALK_TOKEN_ID=a),placeholder:"请输入消息推送TOKENID"},null,8,["value"])]),_:1}),u(t,null,{default:_(()=>[u(v,{type:"primary",loading:f(p),onClick:l[2]||(l[2]=a=>{N.value.validate().then(()=>{p.value=!0;let a=n(d.value);const l=Object.entries(a).map(a=>({configKey:a[0],configValue:a[1]}));e.configEditForm(l).then(()=>{}).finally(()=>{p.value=!1})}).catch(()=>{})})},{default:_(()=>l[4]||(l[4]=[c("保存")])),_:1},8,["loading"]),u(v,{class:"xn-ml10",onClick:l[3]||(l[3]=()=>f(N).resetFields())},{default:_(()=>l[5]||(l[5]=[c("重置")])),_:1})]),_:1})]),_:1},8,["model","label-col","wrapper-col"])]),_:1},8,["spinning"])}}});export{d as default};
