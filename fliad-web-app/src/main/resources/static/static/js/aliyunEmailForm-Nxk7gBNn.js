import{r as a}from"./formRules-B2bzcXv4.js";import{c as e}from"./configApi-BMiyCPj3.js";import{k as l,b as _}from"./ant-design-vendor-CRFwT3Wn.js";import{d as n,f as o,a1 as t,a6 as E,V as s,a2 as r,k as u,u as i,G as A}from"./vue-vendor-BzDj5Url.js";import"./index-DcffTgQN.js";const S=n({name:"aliyunEmailForm"}),f=Object.assign(S,{setup(n){const S=o(),f=o({}),I=o(!1),Y=o(!0);e.configList({category:"EMAIL_ALIYUN"}).then(a=>{Y.value=!1,a?a.forEach(a=>{f.value[a.configKey]=a.configValue}):l.warning("表单项不存在，请初始化数据库")});const c={SNOWY_EMAIL_ALIYUN_ACCESS_KEY_ID:[a("请输入阿里云密钥ID")],SNOWY_EMAIL_ALIYUN_ACCESS_KEY_SECRET:[a("请输入阿里云密钥SECRET")],SNOWY_EMAIL_ALIYUN_FROM:[a("请输入默认发送账号")]},d={span:4},p={span:12};return(a,l)=>{const n=t("a-input"),o=t("a-form-item"),L=t("a-button"),m=t("a-form"),C=t("a-spin");return s(),E(C,{spinning:i(Y)},{default:r(()=>[u(m,{ref_key:"formRef",ref:S,model:i(f),rules:c,layout:"vertical","label-col":{...d,offset:0},"wrapper-col":{...p,offset:0}},{default:r(()=>[u(o,{label:"阿里云密钥ID：",name:"SNOWY_EMAIL_ALIYUN_ACCESS_KEY_ID"},{default:r(()=>[u(n,{value:i(f).SNOWY_EMAIL_ALIYUN_ACCESS_KEY_ID,"onUpdate:value":l[0]||(l[0]=a=>i(f).SNOWY_EMAIL_ALIYUN_ACCESS_KEY_ID=a),placeholder:"请输入阿里云密钥ID"},null,8,["value"])]),_:1}),u(o,{label:"阿里云密钥SECRET：",name:"SNOWY_EMAIL_ALIYUN_ACCESS_KEY_SECRET"},{default:r(()=>[u(n,{value:i(f).SNOWY_EMAIL_ALIYUN_ACCESS_KEY_SECRET,"onUpdate:value":l[1]||(l[1]=a=>i(f).SNOWY_EMAIL_ALIYUN_ACCESS_KEY_SECRET=a),placeholder:"请输入阿里云密钥SECRET"},null,8,["value"])]),_:1}),u(o,{label:"默认发送账号：",name:"SNOWY_EMAIL_ALIYUN_FROM"},{default:r(()=>[u(n,{value:i(f).SNOWY_EMAIL_ALIYUN_FROM,"onUpdate:value":l[2]||(l[2]=a=>i(f).SNOWY_EMAIL_ALIYUN_FROM=a),placeholder:"请输入默认发送账号"},null,8,["value"])]),_:1}),u(o,null,{default:r(()=>[u(L,{type:"primary",loading:i(I),onClick:l[3]||(l[3]=a=>{S.value.validate().then(()=>{I.value=!0;let a=_(f.value);const l=Object.entries(a).map(a=>({configKey:a[0],configValue:a[1]}));e.configEditForm(l).then(()=>{}).finally(()=>{I.value=!1})}).catch(()=>{})})},{default:r(()=>l[5]||(l[5]=[A("保存")])),_:1},8,["loading"]),u(L,{class:"xn-ml10",onClick:l[4]||(l[4]=()=>i(S).resetFields())},{default:r(()=>l[6]||(l[6]=[A("重置")])),_:1})]),_:1})]),_:1},8,["model","label-col","wrapper-col"])]),_:1},8,["spinning"])}}});export{f as default};
