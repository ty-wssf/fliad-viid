import{_ as e}from"./index-yhO5Pkur.js";import{r as a}from"./formRules-B2bzcXv4.js";import{h as l,t}from"./index-DcffTgQN.js";import{d as o,f as s,a1 as r,a6 as i,V as n,a2 as u,k as d,u as c,G as m}from"./vue-vendor-BzDj5Url.js";const p=(e,...a)=>l("/sys/position/"+e,...a),v={positionPage:e=>p("page",e,"get"),positionList:e=>p("list",e,"get"),submitForm:(e,a=!1)=>p(a?"edit":"add",e),positionDelete:e=>p("delete",e),positionDetail:e=>p("detail",e,"get"),positionOrgTreeSelector:e=>p("orgTreeSelector",e,"get"),positionPositionSelector:e=>p("positionSelector",e,"get")},f=o({name:"positionForm"}),g=Object.assign(f,{emits:{successful:null},setup(l,{expose:o,emit:p}){const f=p,g=s(!1),b=s(),_=s({}),y=s([]),h=s(!1),x=()=>{g.value=!1},O={orgId:[a("请选择所属组织")],name:[a("请输入职位名称")],category:[a("请选择职位分类")],sortCode:[a("请选择排序")]},C=t.dictList("POSITION_CATEGORY"),j=()=>{b.value.validate().then(()=>{h.value=!0,v.submitForm(_.value,_.value.id).then(()=>{g.value=!1,h.value=!1,f("successful")})}).catch(()=>{})};return o({onOpen:(e,a)=>{g.value=!0,_.value={sortCode:99},a&&(_.value.orgId=a),e&&(_.value=Object.assign({},e)),v.positionOrgTreeSelector().then(e=>{y.value=e})}}),(a,l)=>{const t=r("a-tree-select"),o=r("a-form-item"),s=r("a-input"),p=r("a-select"),v=r("a-input-number"),f=r("a-form"),w=r("a-button"),S=e;return n(),i(S,{title:c(_).id?"编辑职位":"增加职位",width:550,visible:c(g),"destroy-on-close":!0,onClose:x},{footer:u(()=>[d(w,{class:"xn-mr8",onClick:x},{default:u(()=>l[4]||(l[4]=[m("关闭")])),_:1}),d(w,{type:"primary",loading:c(h),onClick:j},{default:u(()=>l[5]||(l[5]=[m("保存")])),_:1},8,["loading"])]),default:u(()=>[d(f,{ref_key:"formRef",ref:b,model:c(_),rules:O,layout:"vertical"},{default:u(()=>[d(o,{label:"所属组织：",name:"orgId"},{default:u(()=>[d(t,{value:c(_).orgId,"onUpdate:value":l[0]||(l[0]=e=>c(_).orgId=e),class:"xn-wd","dropdown-style":{maxHeight:"400px",overflow:"auto"},placeholder:"请选择组织","allow-clear":"","tree-default-expand-all":"","tree-data":c(y),"field-names":{children:"children",label:"name",value:"id"},selectable:"false","tree-line":""},null,8,["value","tree-data"])]),_:1}),d(o,{label:"职位名称：",name:"name"},{default:u(()=>[d(s,{value:c(_).name,"onUpdate:value":l[1]||(l[1]=e=>c(_).name=e),placeholder:"请输入职位名称","allow-clear":""},null,8,["value"])]),_:1}),d(o,{label:"职位分类：",name:"category"},{default:u(()=>[d(p,{value:c(_).category,"onUpdate:value":l[2]||(l[2]=e=>c(_).category=e),options:c(C),class:"xn-wd",placeholder:"请选择职位分类"},null,8,["value","options"])]),_:1}),d(o,{label:"排序：",name:"sortCode"},{default:u(()=>[d(v,{class:"xn-wd",value:c(_).sortCode,"onUpdate:value":l[3]||(l[3]=e=>c(_).sortCode=e),max:100},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","visible"])}}}),b=Object.freeze(Object.defineProperty({__proto__:null,default:g},Symbol.toStringTag,{value:"Module"}));export{g as _,b as f,v as p};
