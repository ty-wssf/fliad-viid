import{r as e}from"./formRules-B2bzcXv4.js";import{c as a}from"./viidConfigApi-5ILUNM9-.js";import{k as l,b as I}from"./ant-design-vendor-CRFwT3Wn.js";import{d as _,f as E,a1 as n,a6 as N,V as o,a2 as t,k as O,u,G as s}from"./vue-vendor-BzDj5Url.js";import"./index-DcffTgQN.js";const r=_({name:"minioFileForm"}),i=Object.assign(r,{setup(_){const r=E(),i=E({}),f=E(!1),M=E(!0);a.configList({category:"FILE_MINIO"}).then(e=>{M.value=!1,e?e.forEach(e=>{i.value[e.configKey]=e.configValue}):l.warning("表单项不存在，请初始化数据库")});const d={SNOWY_FILE_MINIO_ACCESS_KEY:[e("请输入MINIO通道KEY")],SNOWY_FILE_MINIO_SECRET_KEY:[e("请输入MINIO密钥KEY")],SNOWY_FILE_MINIO_END_POINT:[e("请输入MINIO端点")],SNOWY_FILE_MINIO_DEFAULT_BUCKET_NAME:[e("请输入MINIO储存桶")]},c={span:4},Y={span:12};return(e,l)=>{const _=n("a-input"),E=n("a-form-item"),p=n("a-button"),S=n("a-form"),m=n("a-spin");return o(),N(m,{spinning:u(M)},{default:t(()=>[O(S,{ref_key:"formRef",ref:r,model:u(i),rules:d,layout:"vertical","label-col":{...c,offset:0},"wrapper-col":{...Y,offset:0}},{default:t(()=>[O(E,{label:"MINIO通道KEY：",name:"SNOWY_FILE_MINIO_ACCESS_KEY"},{default:t(()=>[O(_,{value:u(i).SNOWY_FILE_MINIO_ACCESS_KEY,"onUpdate:value":l[0]||(l[0]=e=>u(i).SNOWY_FILE_MINIO_ACCESS_KEY=e),placeholder:"请输入MINIO通道KEY"},null,8,["value"])]),_:1}),O(E,{label:"MINIO密钥KEY：",name:"SNOWY_FILE_MINIO_SECRET_KEY"},{default:t(()=>[O(_,{value:u(i).SNOWY_FILE_MINIO_SECRET_KEY,"onUpdate:value":l[1]||(l[1]=e=>u(i).SNOWY_FILE_MINIO_SECRET_KEY=e),placeholder:"请输入MINIO密钥KEY"},null,8,["value"])]),_:1}),O(E,{label:"MINIO端点：",name:"SNOWY_FILE_MINIO_END_POINT"},{default:t(()=>[O(_,{value:u(i).SNOWY_FILE_MINIO_END_POINT,"onUpdate:value":l[2]||(l[2]=e=>u(i).SNOWY_FILE_MINIO_END_POINT=e),placeholder:"请输入MINIO端点"},null,8,["value"])]),_:1}),O(E,{label:"MINIO储存桶：",name:"SNOWY_FILE_MINIO_DEFAULT_BUCKET_NAME"},{default:t(()=>[O(_,{value:u(i).SNOWY_FILE_MINIO_DEFAULT_BUCKET_NAME,"onUpdate:value":l[3]||(l[3]=e=>u(i).SNOWY_FILE_MINIO_DEFAULT_BUCKET_NAME=e),placeholder:"请输入MINIO储存桶"},null,8,["value"])]),_:1}),O(E,null,{default:t(()=>[O(p,{type:"primary",loading:u(f),onClick:l[4]||(l[4]=e=>{r.value.validate().then(()=>{f.value=!0;let e=I(i.value);const l=Object.entries(e).map(e=>({configKey:e[0],configValue:e[1]}));a.configEditForm(l).then(()=>{}).finally(()=>{f.value=!1})}).catch(()=>{})})},{default:t(()=>l[6]||(l[6]=[s("保存")])),_:1},8,["loading"]),O(p,{class:"xn-ml10",onClick:l[5]||(l[5]=()=>u(r).resetFields())},{default:t(()=>l[7]||(l[7]=[s("重置")])),_:1})]),_:1})]),_:1},8,["model","label-col","wrapper-col"])]),_:1},8,["spinning"])}}});export{i as default};
