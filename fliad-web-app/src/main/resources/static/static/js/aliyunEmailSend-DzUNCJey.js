import{_ as e}from"./index-CwPjjw4u.js";import{r as a}from"./formRules-B2bzcXv4.js";import{e as l}from"./emailApi-D7gkWVWt.js";import{f as n}from"./fileApi-DnApfrPK.js";import{k as t}from"./ant-design-vendor-CRFwT3Wn.js";import{d as u,f as o,a1 as d,a6 as s,V as i,a2 as r,k as m,Z as c,H as p,u as v,G as f}from"./vue-vendor-BzDj5Url.js";import"./editor-vendor-gXJG3n-p.js";import"./index-DOuUB9GF.js";import"./index-DcffTgQN.js";const T=u({name:"aliyunEmailSend"}),h=Object.assign(T,{emits:{loadingStart:null,loadingEnd:null},setup(u,{expose:T,emit:h}){const y=o("TXT"),U=h,_=o(),A=o({}),b={sendAccount:[a("请输入发件人邮箱，即管理控制台中配置的发信地址")],receiveAccounts:[a("请输入接收人邮箱，多个逗号拼接")],subject:[a("请输入邮件主题")],templateName:[a("请输入预先创建且通过审核的模板名称")],content:[a("请输入邮件正文")]},g={fileUploadApi:e=>n.fileUploadDynamicReturnUrl(e).then(e=>Promise.resolve(e))};return T({send:()=>{_.value.validate().then(()=>{U("loadingStart"),"TXT"===y.value&&l.emailSendAliyunTxt(A.value).then(()=>{t.success("发送成功")}).finally(()=>{U("loadingEnd")}),"HTML"===y.value&&l.emailSendAliyunHtml(A.value).then(()=>{t.success("发送成功")}).finally(()=>{U("loadingEnd")}),"TMP"===y.value&&l.emailSendAliyunTmp(A.value).then(()=>{t.success("发送成功")}).finally(()=>{U("loadingEnd")})}).catch(()=>{})}}),(a,l)=>{const n=d("a-radio"),t=d("a-radio-group"),u=d("a-form-item"),o=d("a-input"),T=d("a-textarea"),h=d("a-form");return i(),s(h,{ref_key:"formRef",ref:_,model:v(A),rules:b,layout:"vertical"},{default:r(()=>[m(u,{label:"发送方式：",name:"sendType"},{default:r(()=>[m(t,{value:v(y),"onUpdate:value":l[0]||(l[0]=e=>p(y)?y.value=e:null)},{default:r(()=>[m(n,{value:"TXT"},{default:r(()=>l[9]||(l[9]=[f("纯文本")])),_:1}),m(n,{value:"HTML"},{default:r(()=>l[10]||(l[10]=[f("HTML")])),_:1}),m(n,{value:"TMP"},{default:r(()=>l[11]||(l[11]=[f("模板邮件")])),_:1})]),_:1},8,["value"])]),_:1}),m(u,{label:"发件人邮箱：",name:"sendAccount"},{default:r(()=>[m(o,{value:v(A).sendAccount,"onUpdate:value":l[1]||(l[1]=e=>v(A).sendAccount=e),placeholder:"请输入管理控制台中配置的发信地址"},null,8,["value"])]),_:1}),m(u,{label:"接收人邮箱：",name:"receiveAccounts"},{default:r(()=>[m(T,{value:v(A).receiveAccounts,"onUpdate:value":l[2]||(l[2]=e=>v(A).receiveAccounts=e),placeholder:"TMP"!==v(y)?"请输入接收人邮箱，多个逗号拼接":"预先创建且上传了收件人的收件人列表名称","auto-size":{minRows:2,maxRows:5}},null,8,["value","placeholder"])]),_:1}),"TMP"!==v(y)?(i(),s(u,{key:0,label:"邮件主题：",name:"subject"},{default:r(()=>[m(o,{value:v(A).subject,"onUpdate:value":l[3]||(l[3]=e=>v(A).subject=e),placeholder:"请输入邮件主题","allow-clear":""},null,8,["value"])]),_:1})):c("",!0),"TXT"===v(y)?(i(),s(u,{key:1,label:"邮件正文",name:"content"},{default:r(()=>[m(T,{value:v(A).content,"onUpdate:value":l[4]||(l[4]=e=>v(A).content=e),placeholder:"请输入邮件正文","auto-size":{minRows:6,maxRows:6}},null,8,["value"])]),_:1})):c("",!0),"HTML"===v(y)?(i(),s(u,{key:2,label:"邮件正文",name:"content"},{default:r(()=>[m(e,{modelValue:v(A).content,"onUpdate:modelValue":l[5]||(l[5]=e=>v(A).content=e),placeholder:"请输入邮件正文",height:200,"file-upload-function":g.fileUploadApi},null,8,["modelValue","file-upload-function"])]),_:1})):c("",!0),"TMP"===v(y)?(i(),s(u,{key:3,label:"模板名：",name:"templateName"},{default:r(()=>[m(o,{value:v(A).templateName,"onUpdate:value":l[6]||(l[6]=e=>v(A).templateName=e),placeholder:"请输入预先创建且通过审核的模板名称","allow-clear":""},null,8,["value"])]),_:1})):c("",!0),"TMP"===v(y)?(i(),s(u,{key:4,label:"标签名：",name:"tagName"},{default:r(()=>[m(o,{value:v(A).tagName,"onUpdate:value":l[7]||(l[7]=e=>v(A).tagName=e),placeholder:"请输入标签名","allow-clear":""},null,8,["value"])]),_:1})):c("",!0),"TMP"!==v(y)?(i(),s(u,{key:5,label:"发件人昵称：",name:"sendUser"},{default:r(()=>[m(o,{value:v(A).sendUser,"onUpdate:value":l[8]||(l[8]=e=>v(A).sendUser=e),placeholder:"设置发件人昵称","allow-clear":""},null,8,["value"])]),_:1})):c("",!0)]),_:1},8,["model"])}}});export{h as default};
