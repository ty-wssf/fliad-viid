import{_ as e}from"./index-r8v7tfQO.js";import t from"./form-DBjCTPbo.js";import i from"./detail-BI4JPHTx.js";import{v as a}from"./viidNotificationApi-CwRwH3GV.js";import{i as o}from"./index-DcffTgQN.js";import{k as l}from"./ant-design-vendor-CRFwT3Wn.js";import{d as n,r,f as s,a1 as d,U as c,V as f,k as u,a2 as m,u as p,G as v,Z as h,F as b,Y as y,a6 as k}from"./vue-vendor-BzDj5Url.js";import"./formRules-B2bzcXv4.js";const N=["onClick"],D=["onClick"],_=n({name:"viidNotification"}),I=Object.assign(_,{setup(n){let _=r({});const I=s(),g=s(),C=s(),S=s(),w={refresh:!0,height:!0,columnSetting:!0,striped:!1},x=[{title:"通知标识",dataIndex:"NotificationID"},{title:"订阅标识",dataIndex:"SubscribeID"},{title:"订阅标题",dataIndex:"Title"},{title:"触发时间",dataIndex:"TriggerTime"},{title:"请求耗时(ms)",dataIndex:"RequestCost"},{title:"创建时间",dataIndex:"CreateTime"}];o(["viidNotificationDetail","viidNotificationEdit","viidNotificationDelete"])&&x.push({title:"操作",dataIndex:"action",align:"center",width:"200px"});let j=s([]);const O={alert:{show:!1,clear:()=>{j=s([])}},rowSelection:{onChange:(e,t)=>{j.value=e}}},P=e=>{const t=JSON.parse(JSON.stringify(_));return a.viidSubscribeNotificationsPage(Object.assign(e,t)).then(e=>e)},R=()=>{if(j.value.length<1)return l.warning("请选择一条或多条数据"),!1;const e=j.value.map(e=>({ID:e}));a.viidSubscribeNotificationsDelete(e).then(()=>{g.value.clearRefreshSelected()})};return(o,l)=>{const n=d("a-input"),r=d("a-form-item"),s=d("a-col"),E=d("a-button"),T=d("a-row"),B=d("a-form"),F=d("plus-outlined"),K=e,U=d("a-space"),A=d("a-divider"),J=d("a-popconfirm"),q=d("s-table"),z=d("a-card");return f(),c(b,null,[u(z,{bordered:!1},{default:m(()=>[u(B,{ref_key:"searchFormRef",ref:I,name:"advanced_search",model:p(_),class:"ant-advanced-search-form mb-4"},{default:m(()=>[u(T,{gutter:24},{default:m(()=>[u(s,{span:6},{default:m(()=>[u(r,{label:"通知标识",name:"NotificationID"},{default:m(()=>[u(n,{value:p(_).NotificationID,"onUpdate:value":l[0]||(l[0]=e=>p(_).NotificationID=e),placeholder:"请输入通知标识"},null,8,["value"])]),_:1})]),_:1}),u(s,{span:6},{default:m(()=>[u(r,{label:"订阅标识",name:"SubscribeID"},{default:m(()=>[u(n,{value:p(_).SubscribeID,"onUpdate:value":l[1]||(l[1]=e=>p(_).SubscribeID=e),placeholder:"请输入订阅标识"},null,8,["value"])]),_:1})]),_:1}),u(s,{span:6},{default:m(()=>[u(E,{type:"primary",onClick:l[2]||(l[2]=e=>p(g).refresh(!0))},{default:m(()=>l[6]||(l[6]=[v("查询")])),_:1}),u(E,{style:{margin:"0 8px"},onClick:l[3]||(l[3]=()=>p(I).resetFields())},{default:m(()=>l[7]||(l[7]=[v("重置")])),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),u(q,{ref_key:"table",ref:g,columns:x,data:P,alert:O.alert.show,bordered:"","row-key":e=>e.ID,"tool-config":w,"row-selection":O.rowSelection},{operator:m(()=>[u(U,null,{default:m(()=>[o.hasPerm("viidNotificationAdd")?(f(),k(E,{key:0,type:"primary",onClick:l[4]||(l[4]=e=>p(C).onOpen())},{icon:m(()=>[u(F)]),default:m(()=>[l[8]||(l[8]=v(" 新增 "))]),_:1})):h("",!0),o.hasPerm("viidNotificationBatchDelete")?(f(),k(K,{key:1,buttonName:"批量删除",icon:"DeleteOutlined",selectedRowKeys:p(j),onBatchCallBack:R},null,8,["selectedRowKeys"])):h("",!0)]),_:1})]),bodyCell:m(({column:e,record:t})=>["action"===e.dataIndex?(f(),c(b,{key:0},[y("a",{onClick:e=>(e=>{S.value.onOpen(e)})(t)},"详情",8,N),o.hasPerm(["viidNotificationEdit","viidNotificationDelete"],"and")?(f(),k(A,{key:0,type:"vertical"})):h("",!0),o.hasPerm("viidNotificationEdit")?(f(),c("a",{key:1,onClick:e=>p(C).onOpen(t)},"编辑",8,D)):h("",!0),o.hasPerm(["viidNotificationEdit","viidNotificationDelete"],"and")?(f(),k(A,{key:2,type:"vertical"})):h("",!0),u(J,{title:"确定要删除吗？",onConfirm:e=>(e=>{let t=[{ID:e.ID}];a.viidSubscribeNotificationsDelete(t).then(()=>{g.value.refresh(!0)})})(t)},{default:m(()=>[o.hasPerm("viidNotificationDelete")?(f(),k(E,{key:0,type:"link",danger:"",size:"small"},{default:m(()=>l[9]||(l[9]=[v("删除")])),_:1})):h("",!0)]),_:2},1032,["onConfirm"])],64)):h("",!0)]),_:1},8,["alert","row-key","row-selection"])]),_:1}),u(t,{ref_key:"formRef",ref:C,onSuccessful:l[5]||(l[5]=e=>p(g).refresh(!0))},null,512),u(i,{ref_key:"detailRef",ref:S},null,512)],64)}}});export{I as default};
