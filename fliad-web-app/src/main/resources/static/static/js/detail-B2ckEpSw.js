import{_ as e}from"./index-yhO5Pkur.js";import{c as a}from"./index-DcffTgQN.js";import{d as s,f as t,a1 as r,a6 as l,V as o,a2 as d,k as n,G as i,a3 as f,u as m,Y as c,U as u,Z as v,F as b}from"./vue-vendor-BzDj5Url.js";import"./ant-design-vendor-CRFwT3Wn.js";const p={key:0,class:"xn-color-d9d9d9"},_={key:1,class:"xn-color-ff4d4f"},y=s({name:"messageDetail"}),x=Object.assign(y,{emits:["refresh"],setup(s,{expose:y,emit:x}){const k=x,g=t([]),h=t(!1),j=t(),w=t({}),I=t(),L=[{title:"姓名",dataIndex:"receiveUserName"},{title:"是否已读",dataIndex:"read",width:120}],O=e=>{const s={id:e.id};a.userLoginUnreadMessageDetail(s).then(a=>{Object.assign(e,a),w.value=e,g.value=a.receiveInfoList,I.value.refresh(!0)})},U=()=>new Promise(e=>{e(g.value)}),C=()=>{g.value=[],h.value=!1,k("refresh")};return y({onOpen:e=>{h.value=!0,O(e)}}),(a,s)=>{const t=r("a-descriptions-item"),y=r("a-descriptions"),x=r("a-form-item"),k=r("s-table"),g=r("a-form"),O=e;return o(),l(O,{title:"详情",width:700,visible:m(h),"destroy-on-close":!0,onClose:C},{default:d(()=>[n(y,{column:1,size:"middle",bordered:"",class:"mb-2"},{default:d(()=>[n(t,{label:"主题"},{default:d(()=>[i(f(m(w).subject),1)]),_:1}),n(t,{label:"发送时间"},{default:d(()=>[i(f(m(w).createTime),1)]),_:1})]),_:1}),n(g,{ref_key:"formRef",ref:j,model:m(w),layout:"vertical"},{default:d(()=>[n(x,{label:"内容：",name:"content"},{default:d(()=>[c("span",null,f(m(w).content),1)]),_:1}),n(x,{label:"查收情况：",name:"receiveInfoList"},{default:d(()=>[n(k,{ref_key:"tableRef",ref:I,columns:L,data:U,alert:!1,showPagination:!1,bordered:"","row-key":e=>e.id},{bodyCell:d(({column:e,record:a})=>["read"===e.dataIndex?(o(),u(b,{key:0},[a.read?(o(),u("span",p,"已读")):(o(),u("span",_,"未读"))],64)):v("",!0)]),_:1},8,["row-key"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])}}});export{x as default};
