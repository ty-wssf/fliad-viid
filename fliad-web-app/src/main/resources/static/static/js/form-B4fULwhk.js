import{r as e}from"./formRules-B2bzcXv4.js";import{h as a,t as l}from"./index-DcffTgQN.js";import{v as t}from"./viidCascadePlatformApi-zqOJAWEq.js";import"./data-BOS9iFY_.js";import{b as i}from"./ant-design-vendor-CRFwT3Wn.js";import{d as u,f as r,a1 as s,a6 as n,V as d,a2 as o,k as c,u as p,U as v,F as b,W as m,G as f,a3 as _}from"./vue-vendor-BzDj5Url.js";const g=(e,...l)=>a("/viid/subscribe/"+e,...l),S={viidSubscribePage:e=>g("page",e,"get"),viidSubscribeSubmitForm:(e,a=!1)=>g(a?"edit":"add",e),viidSubscribeDelete:e=>g("delete",e),viidSubscribeDetail:e=>g("detail",e,"get"),subscribeSend:e=>g("send",e,"post"),subscribeCancel:e=>g("cancel",e,"post")},R=u({name:"viidSubscribeForm"}),h=Object.assign(R,{emits:{successful:null},setup(a,{expose:u,emit:g}){const R=r(!1),h=g,D=r(),O=r({}),U=r(!1),y=r([]),A=r([]),I=()=>{D.value.resetFields(),O.value={},R.value=!1},T={Title:[e("请输入订阅标题")],SubscribeDetail:[e("请输入订阅类别")],ResourceURI:[e("请输入订阅资源")],ApplicantName:[e("请输入申请人")],ApplicantOrg:[e("请输入申请单位")],BeginTime:[e("请输入开始时间")],EndTime:[e("请输入结束时间")],ReceiveAddr:[e("请输入信息接收地址")],ReportInterval:[e("请输入信息上报间隔时间")],SubscriberRecoverOrgid:[e("请选择订阅目标节点")]},w=()=>{D.value.validate().then(()=>{U.value=!0;const e=i(O.value);e.SubscribeDetail=JSON.stringify(e.SubscribeDetail),S.viidSubscribeSubmitForm(e,e.SubscribeID).then(()=>{I(),h("successful")}).finally(()=>{U.value=!1})})};return u({onOpen:e=>{if(R.value=!0,e){let a=i(e);a.SubscribeDetail=JSON.parse(a.SubscribeDetail),O.value=Object.assign({},a)}else{let e={ReportInterval:30,ReceiveAddr:"http://localhost:8080/VIID/SubscribeNotifications"};O.value=Object.assign({},e)}y.value=l.dictList("VIID_Subscribe_Detail_Type"),t.viidCascadePlatformList({type:"1"}).then(e=>{A.value=e})}}),(e,a)=>{const l=s("a-input"),t=s("a-form-item"),i=s("a-col"),u=s("a-select-option"),r=s("a-select"),g=s("a-input-number"),S=s("a-date-picker"),h=s("a-row"),j=s("a-form"),x=s("a-button"),Y=s("a-drawer");return d(),n(Y,{title:p(O).subscribeid?"编辑订阅下发":"增加订阅下发",width:600,visible:p(R),"destroy-on-close":!0,"footer-style":{textAlign:"right"},onClose:I},{footer:o(()=>[c(x,{style:{"margin-right":"8px"},onClick:I},{default:o(()=>a[11]||(a[11]=[f("关闭")])),_:1}),c(x,{type:"primary",onClick:w,loading:p(U)},{default:o(()=>a[12]||(a[12]=[f("保存")])),_:1},8,["loading"])]),default:o(()=>[c(j,{ref_key:"formRef",ref:D,model:p(O),rules:T,layout:"vertical"},{default:o(()=>[c(h,{gutter:16},{default:o(()=>[c(i,{span:24},{default:o(()=>[c(t,{label:"订阅标题：",name:"Title"},{default:o(()=>[c(l,{value:p(O).Title,"onUpdate:value":a[0]||(a[0]=e=>p(O).Title=e),placeholder:"请输入订阅标题","allow-clear":""},null,8,["value"])]),_:1})]),_:1}),c(i,{span:12},{default:o(()=>[c(t,{label:"订阅目标节点：",name:"SubscriberRecoverOrgid"},{default:o(()=>[c(r,{value:p(O).SubscriberRecoverOrgid,"onUpdate:value":a[1]||(a[1]=e=>p(O).SubscriberRecoverOrgid=e),multiple:"",class:"xn-wd",placeholder:"请选择订阅目标节点"},{default:o(()=>[(d(!0),v(b,null,m(p(A),(e,a)=>(d(),n(u,{key:a,value:e.id},{default:o(()=>[f(_(e.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),_:1}),c(i,{span:12},{default:o(()=>[c(t,{label:"信息上报间隔时间：",name:"ReportInterval"},{default:o(()=>[c(g,{value:p(O).ReportInterval,"onUpdate:value":a[2]||(a[2]=e=>p(O).ReportInterval=e),min:1,max:1e4,style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),c(i,{span:24},{default:o(()=>[c(t,{label:"订阅类别：",name:"SubscribeDetail"},{default:o(()=>[c(r,{value:p(O).SubscribeDetail,"onUpdate:value":a[3]||(a[3]=e=>p(O).SubscribeDetail=e),placeholder:"请选择订阅类别",mode:"multiple",options:p(y)},null,8,["value","options"])]),_:1})]),_:1}),c(i,{span:24},{default:o(()=>[c(t,{label:"订阅资源：",name:"ResourceURI"},{default:o(()=>[c(l,{value:p(O).ResourceURI,"onUpdate:value":a[4]||(a[4]=e=>p(O).ResourceURI=e),placeholder:"请输入订阅资源","allow-clear":""},null,8,["value"])]),_:1})]),_:1}),c(i,{span:24},{default:o(()=>[c(t,{label:"信息接收地址：",name:"ReceiveAddr"},{default:o(()=>[c(l,{value:p(O).ReceiveAddr,"onUpdate:value":a[5]||(a[5]=e=>p(O).ReceiveAddr=e),placeholder:"请输入信息接收地址","allow-clear":""},null,8,["value"])]),_:1})]),_:1}),c(i,{span:12},{default:o(()=>[c(t,{label:"申请人：",name:"ApplicantName"},{default:o(()=>[c(l,{value:p(O).ApplicantName,"onUpdate:value":a[6]||(a[6]=e=>p(O).ApplicantName=e),placeholder:"请输入申请人","allow-clear":""},null,8,["value"])]),_:1})]),_:1}),c(i,{span:12},{default:o(()=>[c(t,{label:"申请单位：",name:"ApplicantOrg"},{default:o(()=>[c(l,{value:p(O).ApplicantOrg,"onUpdate:value":a[7]||(a[7]=e=>p(O).ApplicantOrg=e),placeholder:"请输入申请单位","allow-clear":""},null,8,["value"])]),_:1})]),_:1}),c(i,{span:24},{default:o(()=>[c(t,{label:"理由：",name:"Reason"},{default:o(()=>[c(l,{value:p(O).Reason,"onUpdate:value":a[8]||(a[8]=e=>p(O).Reason=e),placeholder:"请输入理由","allow-clear":""},null,8,["value"])]),_:1})]),_:1}),c(i,{span:12},{default:o(()=>[c(t,{label:"开始时间：",name:"BeginTime"},{default:o(()=>[c(S,{value:p(O).BeginTime,"onUpdate:value":a[9]||(a[9]=e=>p(O).BeginTime=e),"value-format":"YYYY-MM-DD",class:"xn-wd"},null,8,["value"])]),_:1})]),_:1}),c(i,{span:12},{default:o(()=>[c(t,{label:"结束时间：",name:"EndTime"},{default:o(()=>[c(S,{value:p(O).EndTime,"onUpdate:value":a[10]||(a[10]=e=>p(O).EndTime=e),"value-format":"YYYY-MM-DD",class:"xn-wd"},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title","visible"])}}}),D=Object.freeze(Object.defineProperty({__proto__:null,default:h},Symbol.toStringTag,{value:"Module"}));export{h as _,D as f,S as v};
