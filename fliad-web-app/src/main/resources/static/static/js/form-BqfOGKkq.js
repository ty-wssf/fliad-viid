import{r as e}from"./formRules-B2bzcXv4.js";import{h as l,t as a}from"./index-DcffTgQN.js";import{b as t}from"./ant-design-vendor-CRFwT3Wn.js";import{d as i,f as o,a1 as r,a6 as s,V as u,a2 as d,k as n,u as f,G as b}from"./vue-vendor-BzDj5Url.js";const m=(e,...a)=>l("/viid/workflow/"+e,...a),v={viidWorkflowPage:e=>m("page",e,"get"),viidWorkflowSubmitForm:(e,l=!1)=>m(l?"edit":"add",e),viidWorkflowDelete:e=>m("delete",e),viidWorkflowDetail:e=>m("detail",e,"get"),viidWorkflowCopy:e=>m("copy",e),disableWorkflow:e=>m("disableWorkflow",e),enableWorkflow:e=>m("enableWorkflow",e)},c=i({name:"viidWorkflowForm"}),p=Object.assign(c,{emits:{successful:null},setup(l,{expose:i,emit:m}){const c=o(!1),p=m,k=o(),w=o({}),g=o(!1),_=o([]),y=()=>{k.value.resetFields(),w.value={},c.value=!1},D={title:[e("请输入标题")],subscribeDetail:[e("请选择订阅类别")]},W=()=>{k.value.validate().then(()=>{g.value=!0;const e=t(w.value);e.subscribeDetail=JSON.stringify(e.subscribeDetail),v.viidWorkflowSubmitForm(e,e.id).then(()=>{y(),p("successful")}).finally(()=>{g.value=!1})})};return i({onOpen:e=>{if(c.value=!0,e){let l=t(e);l.subscribeDetail&&(l.subscribeDetail=JSON.parse(l.subscribeDetail)),w.value=Object.assign({},l)}_.value=a.dictList("VIID_Subscribe_Detail_Type")}}),(e,l)=>{const a=r("a-input"),t=r("a-form-item"),i=r("a-select"),o=r("a-textarea"),m=r("a-form"),v=r("a-button"),p=r("a-drawer");return u(),s(p,{title:f(w).id?"编辑工作流":"增加工作流",width:600,visible:f(c),"destroy-on-close":!0,"footer-style":{textAlign:"right"},onClose:y},{footer:d(()=>[n(v,{style:{"margin-right":"8px"},onClick:y},{default:d(()=>l[3]||(l[3]=[b("关闭")])),_:1}),n(v,{type:"primary",onClick:W,loading:f(g)},{default:d(()=>l[4]||(l[4]=[b("保存")])),_:1},8,["loading"])]),default:d(()=>[n(m,{ref_key:"formRef",ref:k,model:f(w),rules:D,layout:"vertical"},{default:d(()=>[n(t,{label:"标题：",name:"title"},{default:d(()=>[n(a,{value:f(w).title,"onUpdate:value":l[0]||(l[0]=e=>f(w).title=e),placeholder:"请输入标题","allow-clear":""},null,8,["value"])]),_:1}),n(t,{label:"订阅类别：",name:"subscribeDetail"},{default:d(()=>[n(i,{value:f(w).subscribeDetail,"onUpdate:value":l[1]||(l[1]=e=>f(w).subscribeDetail=e),placeholder:"请选择订阅类别",mode:"multiple",options:f(_)},null,8,["value","options"])]),_:1}),n(t,{label:"备注：",name:"remark"},{default:d(()=>[n(o,{value:f(w).remark,"onUpdate:value":l[2]||(l[2]=e=>f(w).remark=e),placeholder:"请输入备注","auto-size":{minRows:3,maxRows:6},"allow-clear":""},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","visible"])}}}),k=Object.freeze(Object.defineProperty({__proto__:null,default:p},Symbol.toStringTag,{value:"Module"}));export{p as _,k as f,v};
