import{r as e}from"./formRules-B2bzcXv4.js";import{c as a}from"./configApi-BMiyCPj3.js";import{k as _,b as l}from"./ant-design-vendor-CRFwT3Wn.js";import{d as E,f as n,a1 as o,a6 as t,V as u,a2 as I,k as N,u as s,G as r}from"./vue-vendor-BzDj5Url.js";import"./index-DcffTgQN.js";const Y=E({name:"aliyunFileForm"}),L=Object.assign(Y,{setup(E){const Y=n(),L=n({}),S=n(!1),i=n(!0);a.configList({category:"FILE_ALIYUN"}).then(e=>{i.value=!1,e?e.forEach(e=>{L.value[e.configKey]=e.configValue}):_.warning("表单项不存在，请初始化数据库")});const f={SNOWY_FILE_ALIYUN_ACCESS_KEY_ID:[e("请输入阿里云密钥ID")],SNOWY_FILE_ALIYUN_ACCESS_KEY_SECRET:[e("请输入阿里云密钥SECRET")],SNOWY_FILE_ALIYUN_END_POINT:[e("请输入阿里云文件端点")],SNOWY_FILE_ALIYUN_DEFAULT_BUCKET_NAME:[e("请输入阿里云默认储存桶")]},A={span:4},c={span:12};return(e,_)=>{const E=o("a-input"),n=o("a-form-item"),d=o("a-button"),p=o("a-form"),C=o("a-spin");return u(),t(C,{spinning:s(i)},{default:I(()=>[N(p,{ref_key:"formRef",ref:Y,model:s(L),rules:f,layout:"vertical","label-col":{...A,offset:0},"wrapper-col":{...c,offset:0}},{default:I(()=>[N(n,{label:"阿里云密钥ID：",name:"SNOWY_FILE_ALIYUN_ACCESS_KEY_ID"},{default:I(()=>[N(E,{value:s(L).SNOWY_FILE_ALIYUN_ACCESS_KEY_ID,"onUpdate:value":_[0]||(_[0]=e=>s(L).SNOWY_FILE_ALIYUN_ACCESS_KEY_ID=e),placeholder:"请输入阿里云密钥ID"},null,8,["value"])]),_:1}),N(n,{label:"阿里云密钥SECRET：",name:"SNOWY_FILE_ALIYUN_ACCESS_KEY_SECRET"},{default:I(()=>[N(E,{value:s(L).SNOWY_FILE_ALIYUN_ACCESS_KEY_SECRET,"onUpdate:value":_[1]||(_[1]=e=>s(L).SNOWY_FILE_ALIYUN_ACCESS_KEY_SECRET=e),placeholder:"请输入阿里云密钥SECRET"},null,8,["value"])]),_:1}),N(n,{label:"阿里云文件端点：",name:"SNOWY_FILE_ALIYUN_END_POINT"},{default:I(()=>[N(E,{value:s(L).SNOWY_FILE_ALIYUN_END_POINT,"onUpdate:value":_[2]||(_[2]=e=>s(L).SNOWY_FILE_ALIYUN_END_POINT=e),placeholder:"请输入阿里云文件端点"},null,8,["value"])]),_:1}),N(n,{label:"阿里云默认储存桶：",name:"SNOWY_FILE_ALIYUN_DEFAULT_BUCKET_NAME"},{default:I(()=>[N(E,{value:s(L).SNOWY_FILE_ALIYUN_DEFAULT_BUCKET_NAME,"onUpdate:value":_[3]||(_[3]=e=>s(L).SNOWY_FILE_ALIYUN_DEFAULT_BUCKET_NAME=e),placeholder:"请输入阿里云默认储存桶"},null,8,["value"])]),_:1}),N(n,null,{default:I(()=>[N(d,{type:"primary",loading:s(S),onClick:_[4]||(_[4]=e=>{Y.value.validate().then(()=>{S.value=!0;let e=l(L.value);const _=Object.entries(e).map(e=>({configKey:e[0],configValue:e[1]}));a.configEditForm(_).then(()=>{}).finally(()=>{S.value=!1})}).catch(()=>{})})},{default:I(()=>_[6]||(_[6]=[r("保存")])),_:1},8,["loading"]),N(d,{class:"xn-ml10",onClick:_[5]||(_[5]=()=>s(Y).resetFields())},{default:I(()=>_[7]||(_[7]=[r("重置")])),_:1})]),_:1})]),_:1},8,["model","label-col","wrapper-col"])]),_:1},8,["spinning"])}}});export{L as default};
