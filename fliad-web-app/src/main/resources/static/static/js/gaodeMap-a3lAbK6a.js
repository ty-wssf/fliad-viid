import{a as e}from"./ant-design-vendor-CRFwT3Wn.js";import{d as o,s as a,f as n,o as i,b as l,U as t,V as r,Y as p,_ as s,a6 as c}from"./vue-vendor-BzDj5Url.js";var d,u={exports:{}};const M=e((d||(d=1,u.exports=function(){function e(e){var n=[];return e.AMapUI&&n.push(o(e.AMapUI)),e.Loca&&n.push(a(e.Loca)),Promise.all(n)}function o(e){return new Promise(function(o,a){var i=[];if(e.plugins)for(var p=0;p<e.plugins.length;p+=1)-1==l.AMapUI.plugins.indexOf(e.plugins[p])&&i.push(e.plugins[p]);if(t.AMapUI===n.failed)a("前次请求 AMapUI 失败");else if(t.AMapUI===n.notload){t.AMapUI=n.loading,l.AMapUI.version=e.version||l.AMapUI.version,p=l.AMapUI.version;var s=document.body||document.head,c=document.createElement("script");c.type="text/javascript",c.src="https://webapi.amap.com/ui/"+p+"/main.js",c.onerror=function(e){t.AMapUI=n.failed,a("请求 AMapUI 失败")},c.onload=function(){if(t.AMapUI=n.loaded,i.length)window.AMapUI.loadUI(i,function(){for(var e=0,a=i.length;e<a;e++){var n=i[e].split("/").slice(-1)[0];window.AMapUI[n]=arguments[e]}for(o();r.AMapUI.length;)r.AMapUI.splice(0,1)[0]()});else for(o();r.AMapUI.length;)r.AMapUI.splice(0,1)[0]()},s.appendChild(c)}else t.AMapUI===n.loaded?e.version&&e.version!==l.AMapUI.version?a("不允许多个版本 AMapUI 混用"):i.length?window.AMapUI.loadUI(i,function(){for(var e=0,a=i.length;e<a;e++){var n=i[e].split("/").slice(-1)[0];window.AMapUI[n]=arguments[e]}o()}):o():e.version&&e.version!==l.AMapUI.version?a("不允许多个版本 AMapUI 混用"):r.AMapUI.push(function(e){e?a(e):i.length?window.AMapUI.loadUI(i,function(){for(var e=0,a=i.length;e<a;e++){var n=i[e].split("/").slice(-1)[0];window.AMapUI[n]=arguments[e]}o()}):o()})})}function a(e){return new Promise(function(o,a){if(t.Loca===n.failed)a("前次请求 Loca 失败");else if(t.Loca===n.notload){t.Loca=n.loading,l.Loca.version=e.version||l.Loca.version;var i=l.Loca.version,p=l.AMap.version.startsWith("2"),s=i.startsWith("2");if(p&&!s||!p&&s)a("JSAPI 与 Loca 版本不对应！！");else{p=l.key,s=document.body||document.head;var c=document.createElement("script");c.type="text/javascript",c.src="https://webapi.amap.com/loca?v="+i+"&key="+p,c.onerror=function(e){t.Loca=n.failed,a("请求 AMapUI 失败")},c.onload=function(){for(t.Loca=n.loaded,o();r.Loca.length;)r.Loca.splice(0,1)[0]()},s.appendChild(c)}}else t.Loca===n.loaded?e.version&&e.version!==l.Loca.version?a("不允许多个版本 Loca 混用"):o():e.version&&e.version!==l.Loca.version?a("不允许多个版本 Loca 混用"):r.Loca.push(function(e){e?a(e):a()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var n,i;(i=n||(n={})).notload="notload",i.loading="loading",i.loaded="loaded",i.failed="failed";var l={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},t={AMap:n.notload,AMapUI:n.notload,Loca:n.notload},r={AMapUI:[],Loca:[]},p=[],s=function(e){"function"==typeof e&&(t.AMap===n.loaded?e(window.AMap):p.push(e))};return{load:function(o){return new Promise(function(a,i){if(t.AMap==n.failed)i("");else if(t.AMap==n.notload){var r=o.key,c=o.version,d=o.plugins;r?(window.AMap&&"lbs.amap.com"!==location.host&&i("禁止多种API加载方式混用"),l.key=r,l.AMap.version=c||l.AMap.version,l.AMap.plugins=d||l.AMap.plugins,t.AMap=n.loading,c=document.body||document.head,window.___onAPILoaded=function(l){if(delete window.___onAPILoaded,l)t.AMap=n.failed,i(l);else for(t.AMap=n.loaded,e(o).then(function(){a(window.AMap)}).catch(i);p.length;)p.splice(0,1)[0]()},(d=document.createElement("script")).type="text/javascript",d.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+l.AMap.version+"&key="+r+"&plugin="+l.AMap.plugins.join(","),d.onerror=function(e){t.AMap=n.failed,i(e)},c.appendChild(d)):i("请填写key")}else if(t.AMap==n.loaded)if(o.key&&o.key!==l.key)i("多个不一致的 key");else if(o.version&&o.version!==l.AMap.version)i("不允许多个版本 JSAPI 混用");else{if(r=[],o.plugins)for(c=0;c<o.plugins.length;c+=1)-1==l.AMap.plugins.indexOf(o.plugins[c])&&r.push(o.plugins[c]);r.length?window.AMap.plugin(r,function(){e(o).then(function(){a(window.AMap)}).catch(i)}):e(o).then(function(){a(window.AMap)}).catch(i)}else if(o.key&&o.key!==l.key)i("多个不一致的 key");else if(o.version&&o.version!==l.AMap.version)i("不允许多个版本 JSAPI 混用");else{var u=[];if(o.plugins)for(c=0;c<o.plugins.length;c+=1)-1==l.AMap.plugins.indexOf(o.plugins[c])&&u.push(o.plugins[c]);s(function(){u.length?window.AMap.plugin(u,function(){e(o).then(function(){a(window.AMap)}).catch(i)}):e(o).then(function(){a(window.AMap)}).catch(i)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,l={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},t={AMap:n.notload,AMapUI:n.notload,Loca:n.notload},r={AMap:[],AMapUI:[],Loca:[]}}}}()),u.exports)),f=["id"],A=o({name:"GaodeMap"}),v=Object.assign(A,{props:{mid:{type:Number,default:(new Date).getTime()},height:{type:Number,default:800},apiKey:{type:String,required:!0},center:{type:Array},plugins:{type:Array,default:["AMap.ToolBar","AMap.Scale","AMap.HawkEye","AMap.MapType","AMap.Geolocation","AMap.MarkerCluster"]},viewMode:{type:String,default:"3D",validator:e=>["2D","3D"].includes(e)},zoom:{type:Number,default:12},pitch:{type:Number,default:50},mapStyle:{type:String,default:"normal",validator:e=>["normal","macaron","dark","fresh","grey"].includes(e)},markerCluster:{type:Boolean,default:!0}},emits:["complete","markerClick"],setup(e,{expose:o,emit:c}){const d=e,u=c,A=a(null),v=n([]),w=n({}),y=()=>{A.value=new AMap.Map(`container-${d.mid}`,{viewMode:d.viewMode,zoom:d.zoom,pitch:d.pitch,mapStyle:`amap://styles/${d.mapStyle}`}),d.center&&A.value.setCenter(d.center),d.plugins.length>0&&g(),A.value.on("complete",()=>{u("complete")})},g=()=>{d.plugins.includes("AMap.ToolBar")&&A.value.addControl(new AMap.ToolBar({})),d.plugins.includes("AMap.Scale")&&A.value.addControl(new AMap.Scale),d.plugins.includes("AMap.HawkEye")&&A.value.addControl(new AMap.HawkEye({isOpen:!0})),d.plugins.includes("AMap.MapType")&&A.value.addControl(new AMap.MapType({})),d.plugins.includes("AMap.Geolocation")&&A.value.addControl(new AMap.Geolocation({}))},h=()=>{d.markerCluster&&new AMap.MarkerCluster(A.value,v.value),A.value.setFitView(v.value)};return i(()=>{M.load({key:d.apiKey,version:"2.0",plugins:d.plugins,AMapUI:{version:"1.1",plugins:["overlay/SimpleMarker","overlay/AwesomeMarker"]}}).then(()=>{y()}).catch(e=>{})}),l(()=>{A.value&&A.value.destroy()}),o({renderMarker:e=>{e.forEach(e=>{const o=new AMap.Marker({map:A.value,position:e.position,title:e.title,content:e.content,icon:e.icon?e.icon:null,label:e.label});o.on("click",()=>{u("markerClick",e.position)}),v.value.push(o)}),h()},renderCircleMarker:e=>{e.forEach(e=>{const o=new AMap.CircleMarker({map:A.value,center:e.position,radius:e.radius?e.radius:20,strokeColor:e.strokeColor?e.strokeColor:"#006600",strokeOpacity:.5,strokeWeight:2,fillColor:e.fillColor?e.fillColor:"#006600",fillOpacity:.5,cursor:"pointer"});o.on("click",()=>{u("markerClick",e.position)}),v.value.push(o)}),h()},renderSimpleMarker:(e,o="default")=>{e.forEach(e=>{const a=new AMapUI.SimpleMarker({map:A.value,position:e.position,iconLabel:{innerHTML:e.label,style:e.labelStyle?e.labelStyle:{color:"#333",fontSize:"12px"}},iconTheme:o,iconStyle:e.style});a.on("click",()=>{u("markerClick",e.position)}),v.value.push(a)}),h()},renderAwesomeMarker:e=>{e.forEach(e=>{const o=new AMapUI.AwesomeMarker({map:A.value,position:e.position,awesomeIcon:e.awesomeIcon,iconLabel:{style:e.labelStyle?e.labelStyle:{color:"#333",fontSize:"12px"}},iconStyle:e.style});o.on("click",()=>{u("markerClick",e.position)}),v.value.push(o)}),h()},renderPolyline:(e,o={})=>{const a=[];e.forEach(e=>{a.push(new AMap.LngLat(e.position[0],e.position[1]))});const n=new AMap.Polyline({path:a,strokeColor:o.strokeColor||"blue",strokeWeight:o.strokeWeight||2,strokeOpacity:o.strokeOpacity||.5,isOutline:o.isOutline||!1,borderWeight:o.borderWeight||1,lineJoin:"round"});A.value.add(n),A.value.setFitView([n])},renderCircle:(e,o,a)=>{const n=new AMap.Circle({center:new AMap.LngLat(e[0],e[1]),radius:o,strokeColor:a.strokeColor||"blue",strokeWeight:a.strokeWeight||2,strokeOpacity:a.strokeOpacity||.5,fillColor:a.fillColor||"blue",fillOpacity:a.fillOpacity||.5,strokeStyle:"solid"});A.value.add(n),A.value.setFitView([n])},renderPolygon:(e,o={})=>{const a=[];e.forEach(e=>{a.push(new AMap.LngLat(e.position[0],e.position[1]))});const n=new AMap.Polygon({path:a,strokeColor:o.strokeColor||"blue",strokeWeight:o.strokeWeight||2,strokeOpacity:o.strokeOpacity||.5,fillColor:o.fillColor||"blue",fillOpacity:o.fillOpacity||.5,strokeStyle:"solid"});A.value.add(n),A.value.setFitView([n])},renderInfoWindow:e=>{e.forEach(e=>{w.value[e.position]=new AMap.InfoWindow({content:e.content.join("<br>"),offset:new AMap.Pixel(0,-20),closeWhenClickMap:!0})})},openInfoWindow:e=>{const o=w.value[e];o&&o.open(A.value,e)},clearOverlay:()=>{A.value.clearMap()}}),(o,a)=>(r(),t("div",{class:"gaodeMap",style:s({height:`${e.height}px`})},[p("div",{id:`container-${e.mid}`,class:"xn-wh"},"地图资源加载中...",8,f)],4))}}),w=o({name:"exmGaodeMap"}),y=Object.assign(w,{setup(e){const o=n(null),a=()=>{o.value.renderInfoWindow([{position:[116.39,39.9],content:["<div style='padding:0'><b>Snowy-小诺开源技术</b>","网站 : https://www.xiaonuo.vip","Snowy是一款国内首例国产密码算法加密框架，采用Vue3.0+AntDesignVue3.0+SpringBoot2.8前后分离技术打造，技术框架与密码的结合，让前后分离‘密’不可分！</div>"]},{position:[116.33,39.5],content:["<div style='padding:0'><b>Snowy-小诺开源技术</b>","网站 : https://www.xiaonuo.vip","Snowy是一款国内首例国产密码算法加密框架，采用Vue3.0+AntDesignVue3.0+SpringBoot2.8前后分离技术打造，技术框架与密码的结合，让前后分离‘密’不可分！</div>"]}])},i=e=>{o.value.openInfoWindow(e)};return(e,n)=>(r(),c(v,{ref_key:"map",ref:o,"api-key":"87528cfa68513cbc7574ff94704664fc",onComplete:a,onMarkerClick:i},null,512))}});export{y as default};
