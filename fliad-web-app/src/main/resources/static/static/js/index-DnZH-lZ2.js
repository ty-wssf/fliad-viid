import{_ as e}from"./index-r8v7tfQO.js";import{p as a}from"./pushApi-CT8GWz8o.js";import t from"./form-CairbyI0.js";import l from"./detail-DIH57gmC.js";import{_ as n,t as o}from"./index-DcffTgQN.js";import{d as r,f as s,a1 as i,U as d,V as u,k as c,a2 as p,u as f,G as m,Z as h,F as _,a3 as y,Y as v}from"./vue-vendor-BzDj5Url.js";import"./ant-design-vendor-CRFwT3Wn.js";import"./index-yhO5Pkur.js";import"./feishuPushSend-CTOr4E3I.js";import"./formRules-B2bzcXv4.js";import"./dingPushSend-7_WK5ZYW.js";import"./mdEditor-CRikn6Cm.js";import"./office-vendor-CP0gN6-y.js";import"./fileApi-DnApfrPK.js";import"./workWechatPushSend-CiIXyYTG.js";import"./index-Dj7V4so4.js";const g=["onClick"],j=r({name:"devPushIndex"}),k=n(Object.assign(j,{setup(n){const r=s(null),j=s(),k=s(),b=s({}),w=s(),x=[{title:"消息标题",dataIndex:"title"},{title:"消息引擎",dataIndex:"engine",ellipsis:!0},{title:"消息类别",dataIndex:"type",ellipsis:!0},{title:"消息内容",dataIndex:"content",ellipsis:!0},{title:"回执信息",dataIndex:"receiptInfo",ellipsis:!0},{title:"操作",dataIndex:"action",align:"center",width:"150px"}];let I=s([]);const C={alert:{show:!1,clear:()=>{I=s([])}},rowSelection:{onChange:(e,a)=>{I.value=e}}},S=e=>a.pushPage(Object.assign(e,b.value)).then(e=>e),P=()=>{k.value.resetFields(),r.value.refresh(!0)},O=o.dictList("PUSH_ENGINE"),R=e=>{a.pushDelete(e).then(()=>{r.value.clearRefreshSelected()})};return(n,o)=>{const s=i("a-select"),N=i("a-form-item"),D=i("a-col"),E=i("a-input"),K=i("SearchOutlined"),U=i("a-button"),F=i("redo-outlined"),G=i("a-row"),A=i("a-form"),B=i("a-card"),H=i("plus-outlined"),L=e,T=i("a-space"),z=i("a-divider"),V=i("a-popconfirm"),W=i("s-table");return u(),d(_,null,[c(B,{bordered:!1,class:"xn-mb10"},{default:p(()=>[c(A,{ref_key:"searchFormRef",ref:k,name:"advanced_search",class:"ant-advanced-search-form",model:f(b)},{default:p(()=>[c(G,{gutter:24},{default:p(()=>[c(D,{span:8},{default:p(()=>[c(N,{name:"engine",label:"消息引擎"},{default:p(()=>[c(s,{value:f(b).engine,"onUpdate:value":o[0]||(o[0]=e=>f(b).engine=e),options:f(O),placeholder:"请选择消息引擎",getPopupContainer:e=>e.parentNode,"allow-clear":""},null,8,["value","options","getPopupContainer"])]),_:1})]),_:1}),c(D,{span:8},{default:p(()=>[c(N,{name:"searchKey",label:"消息标题关键词"},{default:p(()=>[c(E,{value:f(b).searchKey,"onUpdate:value":o[1]||(o[1]=e=>f(b).searchKey=e),placeholder:"请输入消息标题关键词"},null,8,["value"])]),_:1})]),_:1}),c(D,{span:8},{default:p(()=>[c(U,{type:"primary",onClick:o[2]||(o[2]=e=>f(r).refresh(!0))},{icon:p(()=>[c(K)]),default:p(()=>[o[5]||(o[5]=m(" 查询 "))]),_:1}),c(U,{class:"snowy-button-left",onClick:P},{icon:p(()=>[c(F)]),default:p(()=>[o[6]||(o[6]=m(" 重置 "))]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),c(B,{bordered:!1},{default:p(()=>[c(W,{ref_key:"tableRef",ref:r,columns:x,data:S,"expand-row-by-click":!0,alert:C.alert.show,bordered:"","row-key":e=>e.id,"row-selection":C.rowSelection},{operator:p(()=>[c(T,null,{default:p(()=>[c(U,{type:"primary",onClick:o[3]||(o[3]=e=>f(j).onOpen())},{icon:p(()=>[c(H)]),default:p(()=>[o[7]||(o[7]=m(" 推送消息 "))]),_:1}),c(L,{buttonName:"批量删除",icon:"DeleteOutlined",buttonDanger:"",selectedRowKeys:f(I),onBatchCallBack:R},null,8,["selectedRowKeys"])]),_:1})]),bodyCell:p(({column:e,record:t})=>["engine"===e.dataIndex?(u(),d(_,{key:0},[m(y(n.$TOOL.dictTypeData("PUSH_ENGINE",t.engine)),1)],64)):h("",!0),"action"===e.dataIndex?(u(),d(_,{key:1},[v("a",{onClick:e=>f(w).onOpen(t)},"详情",8,g),c(z,{type:"vertical"}),c(V,{title:"删除此消息？",onConfirm:e=>(e=>{let t=[{id:e.id}];a.pushDelete(t).then(()=>{r.value.refresh(!0)})})(t)},{default:p(()=>[c(U,{type:"link",danger:"",size:"small"},{default:p(()=>o[8]||(o[8]=[m("删除")])),_:1})]),_:2},1032,["onConfirm"])],64)):h("",!0)]),_:1},8,["alert","row-key","row-selection"])]),_:1}),c(t,{ref_key:"formRef",ref:j,onSuccessful:o[4]||(o[4]=e=>f(r).refresh(!0))},null,512),c(l,{ref_key:"detailRef",ref:w},null,512)],64)}}}),[["__scopeId","data-v-84a4355a"]]);export{k as default};
