import{r as e}from"./formRules-B2bzcXv4.js";import{c as a}from"./configApi-BMiyCPj3.js";import{k as l,b as _}from"./ant-design-vendor-CRFwT3Wn.js";import{d as S,f as n,a1 as t,a6 as o,V as u,a2 as O,k as s,u as i,G as r}from"./vue-vendor-BzDj5Url.js";import"./index-DcffTgQN.js";const E=S({name:"xiaonuoSmsForm"}),N=Object.assign(E,{setup(S){const E=n(),N=n({}),f=n(!1),U=n(!0);a.configList({category:"SMS_XIAONUO"}).then(e=>{U.value=!1,e?e.forEach(e=>{N.value[e.configKey]=e.configValue}):l.warning("表单项不存在，请初始化数据库")});const A={SNOWY_SMS_XIAONUO_ACCESS_KEY_ID:[e("请输入小诺短信账号")],SNOWY_SMS_XIAONUO_ACCESS_KEY_SECRET:[e("请输入小诺短信秘钥")],SNOWY_SMS_XIAONUO_REQUEST_URL:[e("请输入发送短信URL")],SNOWY_SMS_XIAONUO_DEFAULT_SIGN_NAME:[e("请输入短信签名")]},c={span:4},d={span:12};return(e,l)=>{const S=t("question-circle-outlined"),n=t("a-tooltip"),p=t("a-input"),m=t("a-form-item"),I=t("a-button"),Y=t("a-form"),v=t("a-spin");return u(),o(v,{spinning:i(U)},{default:O(()=>[s(Y,{ref_key:"formRef",ref:E,model:i(N),rules:A,layout:"vertical","label-col":{...c,offset:0},"wrapper-col":{...d,offset:0}},{default:O(()=>[s(m,{name:"SNOWY_SMS_XIAONUO_ACCESS_KEY_ID"},{label:O(()=>[s(n,null,{title:O(()=>l[6]||(l[6]=[r(" 通过官网申请短信或联系站长！ ")])),default:O(()=>[s(S)]),_:1}),l[7]||(l[7]=r("   小诺短信账号： "))]),default:O(()=>[s(p,{value:i(N).SNOWY_SMS_XIAONUO_ACCESS_KEY_ID,"onUpdate:value":l[0]||(l[0]=e=>i(N).SNOWY_SMS_XIAONUO_ACCESS_KEY_ID=e),placeholder:"请输入小诺短信账号"},null,8,["value"])]),_:1}),s(m,{label:"小诺短信秘钥：",name:"SNOWY_SMS_XIAONUO_ACCESS_KEY_SECRET"},{default:O(()=>[s(p,{value:i(N).SNOWY_SMS_XIAONUO_ACCESS_KEY_SECRET,"onUpdate:value":l[1]||(l[1]=e=>i(N).SNOWY_SMS_XIAONUO_ACCESS_KEY_SECRET=e),placeholder:"请输入小诺短信秘钥"},null,8,["value"])]),_:1}),s(m,{label:"发送短信URL：",name:"SNOWY_SMS_XIAONUO_REQUEST_URL"},{default:O(()=>[s(p,{value:i(N).SNOWY_SMS_XIAONUO_REQUEST_URL,"onUpdate:value":l[2]||(l[2]=e=>i(N).SNOWY_SMS_XIAONUO_REQUEST_URL=e),placeholder:"请输入发送短信URL"},null,8,["value"])]),_:1}),s(m,{name:"SNOWY_SMS_XIAONUO_DEFAULT_SIGN_NAME"},{label:O(()=>[s(n,null,{title:O(()=>l[8]||(l[8]=[r(" 注：若账号跟密钥已绑定签名，则此处配置签名后无效！ ")])),default:O(()=>[s(S)]),_:1}),l[9]||(l[9]=r("   短信签名： "))]),default:O(()=>[s(p,{value:i(N).SNOWY_SMS_XIAONUO_DEFAULT_SIGN_NAME,"onUpdate:value":l[3]||(l[3]=e=>i(N).SNOWY_SMS_XIAONUO_DEFAULT_SIGN_NAME=e),placeholder:"请输入短信签名"},null,8,["value"])]),_:1}),s(m,null,{default:O(()=>[s(I,{type:"primary",loading:i(f),onClick:l[4]||(l[4]=e=>{E.value.validate().then(()=>{f.value=!0;let e=_(N.value);const l=Object.entries(e).map(e=>({configKey:e[0],configValue:e[1]}));a.configEditForm(l).then(()=>{}).finally(()=>{f.value=!1})}).catch(()=>{})})},{default:O(()=>l[10]||(l[10]=[r("保存")])),_:1},8,["loading"]),s(I,{class:"xn-ml10",onClick:l[5]||(l[5]=()=>i(E).resetFields())},{default:O(()=>l[11]||(l[11]=[r("重置")])),_:1})]),_:1})]),_:1},8,["model","label-col","wrapper-col"])]),_:1},8,["spinning"])}}});export{N as default};
