import{_ as e}from"./index-yhO5Pkur.js";import{r as l}from"./formRules-B2bzcXv4.js";import{h as a,_ as t,t as u}from"./index-DcffTgQN.js";import{g as n,d as o}from"./data-BOS9iFY_.js";import{d as r,f as d,c as p,w as s,o as v,a1 as i,U as m,V as y,k as c,a2 as f,a6 as _,Z as b,G as h,F as g,W as k,a3 as x,u as w,Y as U,H as N}from"./vue-vendor-BzDj5Url.js";const j=(e,...l)=>a("/dev/job/"+e,...l),C={jobPage:e=>j("page",e,"get"),submitForm:(e,l=!1)=>j(l?"edit":"add",e),jobDelete:e=>j("delete",e),jobDetail:e=>j("detail",e,"get"),jobStopJob:e=>j("stopJob",e),jobRunJob:e=>j("runJob",e),jobRunJobNow:e=>j("runJobNow",e),jobGetActionClass:e=>j("getActionClass",e,"get")},V={class:"cron-num"},O={class:"cron-num"},J={class:"cron-num"},R={class:"cron-num"},E={class:"cron-num"},A={class:"cron-num"},L={class:"cron-num"},F=r({name:"XnCron"}),G=t(Object.assign(F,{props:{modelValue:{type:String,default:()=>""},shortcuts:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(e,{emit:l}){const a=d("1"),t=d(""),u=d(!1),r=d({second:{type:"0",range:{start:1,end:2},loop:{start:0,end:1},appoint:[]},minute:{type:"0",range:{start:1,end:2},loop:{start:0,end:1},appoint:[]},hour:{type:"0",range:{start:1,end:2},loop:{start:0,end:1},appoint:[]},day:{type:"0",range:{start:1,end:2},loop:{start:1,end:1},appoint:[]},month:{type:"0",range:{start:1,end:2},loop:{start:1,end:1},appoint:[]},week:{type:"5",range:{start:"2",end:"3"},loop:{start:0,end:"2"},last:"2",appoint:[]},year:{type:"-1",range:{start:n()[0],end:n()[1]},loop:{start:n()[0],end:1},appoint:[]}}),j=e,C=e=>{switch(e.type){case"0":default:return"*";case"1":return e.range.start+"-"+e.range.end;case"2":return e.loop.start+"/"+e.loop.end;case"3":return e.appoint.length>0?e.appoint.join(","):"*";case"4":return"L";case"5":return"?"}},F=p(()=>{let e=r.value.second;return C(e)}),G=p(()=>{let e=r.value.minute;return C(e)}),S=p(()=>{let e=r.value.hour;return C(e)}),D=p(()=>{let e=r.value.day;return C(e)}),K=p(()=>{let e=r.value.month;return C(e)}),z=p(()=>{let e=r.value.week;return C(e)}),P=p(()=>{let e=r.value.year;switch(e.type){case"-1":default:return"";case"0":return"*";case"1":return e.range.start+"-"+e.range.end;case"2":return e.loop.start+"/"+e.loop.end;case"3":return e.appoint.length>0?e.appoint.join(","):""}});s(r.value.week,e=>{"5"!==e.type&&(r.value.day.type="5")}),s(r.value.day,e=>{"5"!==e.type&&(r.value.week.type="5")}),s(j,e=>{""===e.modelValue&&(t.value=""),e.modelValue&&(t.value=e.modelValue)}),v(()=>{t.value=j.modelValue});const T=l,Y=e=>{T("update:modelValue",e)},B=e=>{"custom"===e.key?H():(t.value=e.key,T("update:modelValue",t.value))},H=()=>{I(),u.value=!0},I=()=>{t.value=j.modelValue;let e=(j.modelValue||"* * * * * ?").split(" ");e.length<6&&(e="* * * * * ?".split(" ")),"*"===e[0]?r.value.second.type="0":e[0].includes("-")?(r.value.second.type="1",r.value.second.range.start=Number(e[0].split("-")[0]),r.value.second.range.end=Number(e[0].split("-")[1])):e[0].includes("/")?(r.value.second.type="2",r.value.second.loop.start=Number(e[0].split("/")[0]),r.value.second.loop.end=Number(e[0].split("/")[1])):(r.value.second.type="3",r.value.second.appoint=e[0].split(",")),"*"===e[1]?r.value.minute.type="0":e[1].includes("-")?(r.value.minute.type="1",r.value.minute.range.start=Number(e[1].split("-")[0]),r.value.minute.range.end=Number(e[1].split("-")[1])):e[1].includes("/")?(r.value.minute.type="2",r.value.minute.loop.start=Number(e[1].split("/")[0]),r.value.minute.loop.end=Number(e[1].split("/")[1])):(r.value.minute.type="3",r.value.minute.appoint=e[1].split(",")),"*"===e[2]?r.value.hour.type="0":e[2].includes("-")?(r.value.hour.type="1",r.value.hour.range.start=Number(e[2].split("-")[0]),r.value.hour.range.end=Number(e[2].split("-")[1])):e[2].includes("/")?(r.value.hour.type="2",r.value.hour.loop.start=Number(e[2].split("/")[0]),r.value.hour.loop.end=Number(e[2].split("/")[1])):(r.value.hour.type="3",r.value.hour.appoint=e[2].split(",")),"*"===e[3]?r.value.day.type="0":"L"===e[3]?r.value.day.type="4":"?"===e[3]?r.value.day.type="5":e[3].includes("-")?(r.value.day.type="1",r.value.day.range.start=Number(e[3].split("-")[0]),r.value.day.range.end=Number(e[3].split("-")[1])):e[3].includes("/")?(r.value.day.type="2",r.value.day.loop.start=Number(e[3].split("/")[0]),r.value.day.loop.end=Number(e[3].split("/")[1])):(r.value.day.type="3",r.value.day.appoint=e[3].split(",")),"*"===e[4]?r.value.month.type="0":e[4].includes("-")?(r.value.month.type="1",r.value.month.range.start=Number(e[4].split("-")[0]),r.value.month.range.end=Number(e[4].split("-")[1])):e[4].includes("/")?(r.value.month.type="2",r.value.month.loop.start=Number(e[4].split("/")[0]),r.value.month.loop.end=Number(e[4].split("/")[1])):(r.value.month.type="3",r.value.month.appoint=e[4].split(",")),"*"===e[5]?r.value.week.type="0":"?"===e[5]?r.value.week.type="5":e[5].includes("-")?(r.value.week.type="1",r.value.week.range.start=e[5].split("-")[0],r.value.week.range.end=e[5].split("-")[1]):e[5].includes("#")?(r.value.week.type="2",r.value.week.loop.start=Number(e[5].split("#")[1]),r.value.week.loop.end=e[5].split("#")[0]):e[5].includes("L")?(r.value.week.type="4",r.value.week.last=e[5].split("L")[0]):(r.value.week.type="3",r.value.week.appoint=e[5].split(",")),e[6]?"*"===e[6]?r.value.year.type="0":e[6].includes("-")?(r.value.year.type="1",r.value.year.range.start=Number(e[6].split("-")[0]),r.value.year.range.end=Number(e[6].split("-")[1])):e[6].includes("/")?(r.value.year.type="2",r.value.year.loop.start=Number(e[6].split("/")[1]),r.value.year.loop.end=Number(e[6].split("/")[0])):(r.value.year.type="3",r.value.year.appoint=e[6].split(",")):r.value.year.type="-1"},M=()=>{let e=P.value?" "+P.value:"";t.value=F.value+" "+G.value+" "+S.value+" "+D.value+" "+K.value+" "+z.value+e,T("update:modelValue",t.value),u.value=!1};return(l,n)=>{const d=i("down-outlined"),p=i("a-menu-item"),s=i("a-menu-divider"),v=i("UserOutlined"),j=i("a-menu"),C=i("a-dropdown"),T=i("a-input"),H=i("a-tag"),I=i("a-radio-button"),W=i("a-radio-group"),X=i("a-form-item"),Z=i("a-input-number"),q=i("a-select-option"),Q=i("a-select"),$=i("a-form"),ee=i("a-tab-pane"),le=i("a-tabs"),ae=i("a-modal");return y(),m(g,null,[c(T,{value:w(t),"onUpdate:value":Y,placeholder:"请输入CRON定时规则"},{addonAfter:f(()=>[c(C,null,{overlay:f(()=>[c(j,{onClick:B},{default:f(()=>[c(p,{key:"0 * * * * ?"},{default:f(()=>n[46]||(n[46]=[h("每分钟")])),_:1}),c(p,{key:"0 0 * * * ?"},{default:f(()=>n[47]||(n[47]=[h("每小时")])),_:1}),c(p,{key:"0 0 0 * * ?"},{default:f(()=>n[48]||(n[48]=[h("每天零点")])),_:1}),c(p,{key:"0 0 0 1 * ?"},{default:f(()=>n[49]||(n[49]=[h("每月一号零点")])),_:1}),c(p,{key:"0 0 0 L * ?"},{default:f(()=>n[50]||(n[50]=[h("每月最后一天零点")])),_:1}),c(p,{key:"0 0 0 ? * 1"},{default:f(()=>n[51]||(n[51]=[h("每周星期日零点")])),_:1}),e.shortcuts?(y(),_(s,{key:0})):b("",!0),(y(!0),m(g,null,k(e.shortcuts,e=>(y(),_(p,{key:e.value},{default:f(()=>[h(x(e.text),1)]),_:2},1024))),128)),c(s),c(p,{key:"custom"},{default:f(()=>[c(v),n[52]||(n[52]=h("自定义"))]),_:1})]),_:1})]),default:f(()=>[c(d)]),_:1})]),_:1},8,["value"]),c(ae,{title:"CRON规则生成器",open:w(u),"onUpdate:open":n[44]||(n[44]=e=>N(u)?u.value=e:null),width:580,onCancel:n[45]||(n[45]=e=>u.value=!1),onOk:M,"destroy-on-close":"","append-to-body":""},{default:f(()=>[U("div",null,[c(le,{activeKey:w(a),"onUpdate:activeKey":n[43]||(n[43]=e=>N(a)?a.value=e:null)},{default:f(()=>[c(ee,{key:"1"},{tab:f(()=>[U("div",V,[n[53]||(n[53]=U("h2",null,"秒",-1)),c(H,{color:"1"===w(a)?"var(--primary-color)":"",class:"xn-mr"},{default:f(()=>[h(x(w(F)),1)]),_:1},8,["color"])])]),default:f(()=>[c($,null,{default:f(()=>[c(X,{label:"类型"},{default:f(()=>[c(W,{value:w(r).second.type,"onUpdate:value":n[0]||(n[0]=e=>w(r).second.type=e)},{default:f(()=>[c(I,{value:"0"},{default:f(()=>n[54]||(n[54]=[h("任意值")])),_:1}),c(I,{value:"1"},{default:f(()=>n[55]||(n[55]=[h("范围")])),_:1}),c(I,{value:"2"},{default:f(()=>n[56]||(n[56]=[h("间隔")])),_:1}),c(I,{value:"3"},{default:f(()=>n[57]||(n[57]=[h("指定")])),_:1})]),_:1},8,["value"])]),_:1}),"1"===w(r).second.type?(y(),_(X,{key:0,label:"范围"},{default:f(()=>[c(Z,{value:w(r).second.range.start,"onUpdate:value":n[1]||(n[1]=e=>w(r).second.range.start=e),min:0,max:59,"controls-position":"right"},null,8,["value"]),n[58]||(n[58]=U("span",{class:"xn-pd"},"-",-1)),c(Z,{value:w(r).second.range.end,"onUpdate:value":n[2]||(n[2]=e=>w(r).second.range.end=e),min:0,max:59,"controls-position":"right"},null,8,["value"])]),_:1})):b("",!0),"2"===w(r).second.type?(y(),_(X,{key:1,label:"间隔"},{default:f(()=>[c(Z,{value:w(r).second.loop.start,"onUpdate:value":n[3]||(n[3]=e=>w(r).second.loop.start=e),min:0,max:59,"controls-position":"right"},null,8,["value"]),n[59]||(n[59]=h(" 秒开始，每 ")),c(Z,{value:w(r).second.loop.end,"onUpdate:value":n[4]||(n[4]=e=>w(r).second.loop.end=e),min:0,max:59,"controls-position":"right"},null,8,["value"]),n[60]||(n[60]=h(" 秒执行一次 "))]),_:1})):b("",!0),"3"===w(r).second.type?(y(),_(X,{key:2,label:"指定"},{default:f(()=>[c(Q,{value:w(r).second.appoint,"onUpdate:value":n[5]||(n[5]=e=>w(r).second.appoint=e),multiple:"",class:"xn-wd",mode:"multiple",placeholder:"请选择"},{default:f(()=>[(y(!0),m(g,null,k(w(o).second,(e,l)=>(y(),_(q,{key:l,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["value"])]),_:1})):b("",!0)]),_:1})]),_:1}),c(ee,{key:"2"},{tab:f(()=>[U("div",O,[n[61]||(n[61]=U("h2",null,"分钟",-1)),c(H,{color:"2"===w(a)?"var(--primary-color)":"",class:"xn-mr"},{default:f(()=>[h(x(w(G)),1)]),_:1},8,["color"])])]),default:f(()=>[c($,null,{default:f(()=>[c(X,{label:"类型"},{default:f(()=>[c(W,{value:w(r).minute.type,"onUpdate:value":n[6]||(n[6]=e=>w(r).minute.type=e)},{default:f(()=>[c(I,{value:"0"},{default:f(()=>n[62]||(n[62]=[h("任意值")])),_:1}),c(I,{value:"1"},{default:f(()=>n[63]||(n[63]=[h("范围")])),_:1}),c(I,{value:"2"},{default:f(()=>n[64]||(n[64]=[h("间隔")])),_:1}),c(I,{value:"3"},{default:f(()=>n[65]||(n[65]=[h("指定")])),_:1})]),_:1},8,["value"])]),_:1}),"1"===w(r).minute.type?(y(),_(X,{key:0,label:"范围"},{default:f(()=>[c(Z,{value:w(r).minute.range.start,"onUpdate:value":n[7]||(n[7]=e=>w(r).minute.range.start=e),min:0,max:59,"controls-position":"right"},null,8,["value"]),n[66]||(n[66]=U("span",{class:"xn-pd"},"-",-1)),c(Z,{value:w(r).minute.range.end,"onUpdate:value":n[8]||(n[8]=e=>w(r).minute.range.end=e),min:0,max:59,"controls-position":"right"},null,8,["value"])]),_:1})):b("",!0),"2"===w(r).minute.type?(y(),_(X,{key:1,label:"间隔"},{default:f(()=>[c(Z,{value:w(r).minute.loop.start,"onUpdate:value":n[9]||(n[9]=e=>w(r).minute.loop.start=e),min:0,max:59,"controls-position":"right"},null,8,["value"]),n[67]||(n[67]=h(" 分钟开始，每 ")),c(Z,{value:w(r).minute.loop.end,"onUpdate:value":n[10]||(n[10]=e=>w(r).minute.loop.end=e),min:0,max:59,"controls-position":"right"},null,8,["value"]),n[68]||(n[68]=h(" 分钟执行一次 "))]),_:1})):b("",!0),"3"===w(r).minute.type?(y(),_(X,{key:2,label:"指定"},{default:f(()=>[c(Q,{value:w(r).minute.appoint,"onUpdate:value":n[11]||(n[11]=e=>w(r).minute.appoint=e),multiple:"",class:"xn-wd",mode:"multiple",placeholder:"请选择"},{default:f(()=>[(y(!0),m(g,null,k(w(o).minute,(e,l)=>(y(),_(q,{key:l,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["value"])]),_:1})):b("",!0)]),_:1})]),_:1}),c(ee,{key:"3"},{tab:f(()=>[U("div",J,[n[69]||(n[69]=U("h2",null,"小时",-1)),c(H,{color:"3"===w(a)?"var(--primary-color)":"",class:"xn-mr"},{default:f(()=>[h(x(w(S)),1)]),_:1},8,["color"])])]),default:f(()=>[c($,null,{default:f(()=>[c(X,{label:"类型"},{default:f(()=>[c(W,{value:w(r).hour.type,"onUpdate:value":n[12]||(n[12]=e=>w(r).hour.type=e)},{default:f(()=>[c(I,{value:"0"},{default:f(()=>n[70]||(n[70]=[h("任意值")])),_:1}),c(I,{value:"1"},{default:f(()=>n[71]||(n[71]=[h("范围")])),_:1}),c(I,{value:"2"},{default:f(()=>n[72]||(n[72]=[h("间隔")])),_:1}),c(I,{value:"3"},{default:f(()=>n[73]||(n[73]=[h("指定")])),_:1})]),_:1},8,["value"])]),_:1}),"1"===w(r).hour.type?(y(),_(X,{key:0,label:"范围"},{default:f(()=>[c(Z,{value:w(r).hour.range.start,"onUpdate:value":n[13]||(n[13]=e=>w(r).hour.range.start=e),min:0,max:23,"controls-position":"right"},null,8,["value"]),n[74]||(n[74]=U("span",{class:"xn-pd"},"-",-1)),c(Z,{value:w(r).hour.range.end,"onUpdate:value":n[14]||(n[14]=e=>w(r).hour.range.end=e),min:0,max:23,"controls-position":"right"},null,8,["value"])]),_:1})):b("",!0),"2"===w(r).hour.type?(y(),_(X,{key:1,label:"间隔"},{default:f(()=>[c(Z,{value:w(r).hour.loop.start,"onUpdate:value":n[15]||(n[15]=e=>w(r).hour.loop.start=e),min:0,max:23,"controls-position":"right"},null,8,["value"]),n[75]||(n[75]=h(" 小时开始，每 ")),c(Z,{value:w(r).hour.loop.end,"onUpdate:value":n[16]||(n[16]=e=>w(r).hour.loop.end=e),min:0,max:23,"controls-position":"right"},null,8,["value"]),n[76]||(n[76]=h(" 小时执行一次 "))]),_:1})):b("",!0),"3"===w(r).hour.type?(y(),_(X,{key:2,label:"指定"},{default:f(()=>[c(Q,{value:w(r).hour.appoint,"onUpdate:value":n[17]||(n[17]=e=>w(r).hour.appoint=e),multiple:"",class:"xn-wd",mode:"multiple",placeholder:"请选择"},{default:f(()=>[(y(!0),m(g,null,k(w(o).hour,(e,l)=>(y(),_(q,{key:l,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["value"])]),_:1})):b("",!0)]),_:1})]),_:1}),c(ee,{key:"4"},{tab:f(()=>[U("div",R,[n[77]||(n[77]=U("h2",null,"日",-1)),c(H,{color:"4"===w(a)?"var(--primary-color)":"",class:"xn-mr"},{default:f(()=>[h(x(w(D)),1)]),_:1},8,["color"])])]),default:f(()=>[c($,null,{default:f(()=>[c(X,{label:"类型"},{default:f(()=>[c(W,{value:w(r).day.type,"onUpdate:value":n[18]||(n[18]=e=>w(r).day.type=e)},{default:f(()=>[c(I,{value:"0"},{default:f(()=>n[78]||(n[78]=[h("任意值")])),_:1}),c(I,{value:"1"},{default:f(()=>n[79]||(n[79]=[h("范围")])),_:1}),c(I,{value:"2"},{default:f(()=>n[80]||(n[80]=[h("间隔")])),_:1}),c(I,{value:"3"},{default:f(()=>n[81]||(n[81]=[h("指定")])),_:1}),c(I,{value:"4"},{default:f(()=>n[82]||(n[82]=[h("本月最后一天")])),_:1}),c(I,{value:"5"},{default:f(()=>n[83]||(n[83]=[h("不指定")])),_:1})]),_:1},8,["value"])]),_:1}),"1"===w(r).day.type?(y(),_(X,{key:0,label:"范围"},{default:f(()=>[c(Z,{value:w(r).day.range.start,"onUpdate:value":n[19]||(n[19]=e=>w(r).day.range.start=e),min:1,max:31,"controls-position":"right"},null,8,["value"]),n[84]||(n[84]=U("span",{class:"xn-pd"},"-",-1)),c(Z,{value:w(r).day.range.end,"onUpdate:value":n[20]||(n[20]=e=>w(r).day.range.end=e),min:1,max:31,"controls-position":"right"},null,8,["value"])]),_:1})):b("",!0),"2"===w(r).day.type?(y(),_(X,{key:1,label:"间隔"},{default:f(()=>[c(Z,{value:w(r).day.loop.start,"onUpdate:value":n[21]||(n[21]=e=>w(r).day.loop.start=e),min:1,max:31,"controls-position":"right"},null,8,["value"]),n[85]||(n[85]=h(" 号开始，每 ")),c(Z,{value:w(r).day.loop.end,"onUpdate:value":n[22]||(n[22]=e=>w(r).day.loop.end=e),min:1,max:31,"controls-position":"right"},null,8,["value"]),n[86]||(n[86]=h(" 天执行一次 "))]),_:1})):b("",!0),"3"===w(r).day.type?(y(),_(X,{key:2,label:"指定"},{default:f(()=>[c(Q,{value:w(r).day.appoint,"onUpdate:value":n[23]||(n[23]=e=>w(r).day.appoint=e),multiple:"",class:"xn-wd",mode:"multiple",placeholder:"请选择"},{default:f(()=>[(y(!0),m(g,null,k(w(o).day,(e,l)=>(y(),_(q,{key:l,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["value"])]),_:1})):b("",!0)]),_:1})]),_:1}),c(ee,{key:"5"},{tab:f(()=>[U("div",E,[n[87]||(n[87]=U("h2",null,"月",-1)),c(H,{color:"5"===w(a)?"var(--primary-color)":"",class:"xn-mr"},{default:f(()=>[h(x(w(K)),1)]),_:1},8,["color"])])]),default:f(()=>[c($,null,{default:f(()=>[c(X,{label:"类型"},{default:f(()=>[c(W,{value:w(r).month.type,"onUpdate:value":n[24]||(n[24]=e=>w(r).month.type=e)},{default:f(()=>[c(I,{value:"0"},{default:f(()=>n[88]||(n[88]=[h("任意值")])),_:1}),c(I,{value:"1"},{default:f(()=>n[89]||(n[89]=[h("范围")])),_:1}),c(I,{value:"2"},{default:f(()=>n[90]||(n[90]=[h("间隔")])),_:1}),c(I,{value:"3"},{default:f(()=>n[91]||(n[91]=[h("指定")])),_:1})]),_:1},8,["value"])]),_:1}),"1"===w(r).month.type?(y(),_(X,{key:0,label:"范围"},{default:f(()=>[c(Z,{value:w(r).month.range.start,"onUpdate:value":n[25]||(n[25]=e=>w(r).month.range.start=e),min:1,max:12,"controls-position":"right"},null,8,["value"]),n[92]||(n[92]=U("span",{class:"xn-pd"},"-",-1)),c(Z,{value:w(r).month.range.end,"onUpdate:value":n[26]||(n[26]=e=>w(r).month.range.end=e),min:1,max:12,"controls-position":"right"},null,8,["value"])]),_:1})):b("",!0),"2"===w(r).month.type?(y(),_(X,{key:1,label:"间隔"},{default:f(()=>[c(Z,{value:w(r).month.loop.start,"onUpdate:value":n[27]||(n[27]=e=>w(r).month.loop.start=e),min:1,max:12,"controls-position":"right"},null,8,["value"]),n[93]||(n[93]=h(" 月开始，每 ")),c(Z,{value:w(r).month.loop.end,"onUpdate:value":n[28]||(n[28]=e=>w(r).month.loop.end=e),min:1,max:12,"controls-position":"right"},null,8,["value"]),n[94]||(n[94]=h(" 月执行一次 "))]),_:1})):b("",!0),"3"===w(r).month.type?(y(),_(X,{key:2,label:"指定"},{default:f(()=>[c(Q,{value:w(r).month.appoint,"onUpdate:value":n[29]||(n[29]=e=>w(r).month.appoint=e),multiple:"",class:"xn-wd",mode:"multiple",placeholder:"请选择"},{default:f(()=>[(y(!0),m(g,null,k(w(o).month,(e,l)=>(y(),_(q,{key:l,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["value"])]),_:1})):b("",!0)]),_:1})]),_:1}),c(ee,{key:"6"},{tab:f(()=>[U("div",A,[n[95]||(n[95]=U("h2",null,"周",-1)),c(H,{color:"6"===w(a)?"var(--primary-color)":"",class:"xn-mr"},{default:f(()=>[h(x(w(z)),1)]),_:1},8,["color"])])]),default:f(()=>[c($,null,{default:f(()=>[c($,null,{default:f(()=>[c(X,{label:"类型"},{default:f(()=>[c(W,{value:w(r).week.type,"onUpdate:value":n[30]||(n[30]=e=>w(r).week.type=e)},{default:f(()=>[c(I,{value:"0"},{default:f(()=>n[96]||(n[96]=[h("任意值")])),_:1}),c(I,{value:"1"},{default:f(()=>n[97]||(n[97]=[h("范围")])),_:1}),c(I,{value:"2"},{default:f(()=>n[98]||(n[98]=[h("间隔")])),_:1}),c(I,{value:"3"},{default:f(()=>n[99]||(n[99]=[h("指定")])),_:1}),c(I,{value:"4"},{default:f(()=>n[100]||(n[100]=[h("本月最后一周")])),_:1}),c(I,{value:"5"},{default:f(()=>n[101]||(n[101]=[h("不指定")])),_:1})]),_:1},8,["value"])]),_:1}),"1"===w(r).week.type?(y(),_(X,{key:0,label:"范围"},{default:f(()=>[c(Q,{value:w(r).week.range.start,"onUpdate:value":n[31]||(n[31]=e=>w(r).week.range.start=e),placeholder:"请选择"},{default:f(()=>[(y(!0),m(g,null,k(w(o).week,(e,l)=>(y(),_(q,{key:l,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["value"]),n[102]||(n[102]=U("span",{class:"xn-pd"},"-",-1)),c(Q,{value:w(r).week.range.end,"onUpdate:value":n[32]||(n[32]=e=>w(r).week.range.end=e),placeholder:"请选择"},{default:f(()=>[(y(!0),m(g,null,k(w(o).week,(e,l)=>(y(),_(q,{key:l,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["value"])]),_:1})):b("",!0),"2"===w(r).week.type?(y(),_(X,{key:1,label:"间隔"},{default:f(()=>[n[103]||(n[103]=h(" 第 ")),c(Z,{value:w(r).week.loop.start,"onUpdate:value":n[33]||(n[33]=e=>w(r).week.loop.start=e),min:1,max:4,"controls-position":"right"},null,8,["value"]),n[104]||(n[104]=h(" 周的星期 ")),c(Q,{value:w(r).week.loop.end,"onUpdate:value":n[34]||(n[34]=e=>w(r).week.loop.end=e),placeholder:"请选择"},{default:f(()=>[(y(!0),m(g,null,k(w(o).week,(e,l)=>(y(),_(q,{key:l,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["value"]),n[105]||(n[105]=h(" 执行一次 "))]),_:1})):b("",!0),"3"===w(r).week.type?(y(),_(X,{key:2,label:"指定"},{default:f(()=>[c(Q,{value:w(r).week.appoint,"onUpdate:value":n[35]||(n[35]=e=>w(r).week.appoint=e),multiple:"",class:"xn-wd",mode:"multiple",placeholder:"请选择"},{default:f(()=>[(y(!0),m(g,null,k(w(o).week,(e,l)=>(y(),_(q,{key:l,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["value"])]),_:1})):b("",!0),"4"===w(r).week.type?(y(),_(X,{key:3,label:"最后一周"},{default:f(()=>[c(Q,{value:w(r).week.last,"onUpdate:value":n[36]||(n[36]=e=>w(r).week.last=e),placeholder:"请选择"},{default:f(()=>[(y(!0),m(g,null,k(w(o).week,(e,l)=>(y(),_(q,{key:l,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["value"])]),_:1})):b("",!0)]),_:1})]),_:1})]),_:1}),c(ee,{key:"7"},{tab:f(()=>[U("div",L,[n[106]||(n[106]=U("h2",null,"年",-1)),c(H,{color:"7"===w(a)?"var(--primary-color)":"",class:"xn-mr"},{default:f(()=>[h(x(w(P)),1)]),_:1},8,["color"])])]),default:f(()=>[c($,null,{default:f(()=>[c(X,{label:"类型"},{default:f(()=>[c(W,{value:w(r).year.type,"onUpdate:value":n[37]||(n[37]=e=>w(r).year.type=e)},{default:f(()=>[c(I,{value:"-1"},{default:f(()=>n[107]||(n[107]=[h("忽略")])),_:1}),c(I,{value:"0"},{default:f(()=>n[108]||(n[108]=[h("任意值")])),_:1}),c(I,{value:"1"},{default:f(()=>n[109]||(n[109]=[h("范围")])),_:1}),c(I,{value:"2"},{default:f(()=>n[110]||(n[110]=[h("间隔")])),_:1}),c(I,{value:"3"},{default:f(()=>n[111]||(n[111]=[h("指定")])),_:1})]),_:1},8,["value"])]),_:1}),"1"===w(r).year.type?(y(),_(X,{key:0,label:"范围"},{default:f(()=>[c(Z,{value:w(r).year.range.start,"onUpdate:value":n[38]||(n[38]=e=>w(r).year.range.start=e),"controls-position":"right"},null,8,["value"]),n[112]||(n[112]=U("span",{class:"xn-pd"},"-",-1)),c(Z,{value:w(r).year.range.end,"onUpdate:value":n[39]||(n[39]=e=>w(r).year.range.end=e),"controls-position":"right"},null,8,["value"])]),_:1})):b("",!0),"2"===w(r).year.type?(y(),_(X,{key:1,label:"间隔"},{default:f(()=>[c(Z,{value:w(r).year.loop.start,"onUpdate:value":n[40]||(n[40]=e=>w(r).year.loop.start=e),"controls-position":"right"},null,8,["value"]),n[113]||(n[113]=h(" 年开始，每 ")),c(Z,{value:w(r).year.loop.end,"onUpdate:value":n[41]||(n[41]=e=>w(r).year.loop.end=e),min:1,"controls-position":"right"},null,8,["value"]),n[114]||(n[114]=h(" 年执行一次 "))]),_:1})):b("",!0),"3"===w(r).year.type?(y(),_(X,{key:2,label:"指定"},{default:f(()=>[c(Q,{value:w(r).year.appoint,"onUpdate:value":n[42]||(n[42]=e=>w(r).year.appoint=e),multiple:"",class:"xn-wd",mode:"multiple",placeholder:"请选择"},{default:f(()=>[(y(!0),m(g,null,k(w(o).year,(e,l)=>(y(),_(q,{key:l,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["value"])]),_:1})):b("",!0)]),_:1})]),_:1})]),_:1},8,["activeKey"])])]),_:1},8,["open"])],64)}}}),[["__scopeId","data-v-416a4a6e"]]),S=r({name:"devJobForm"}),D=Object.assign(S,{emits:{successful:null},setup(a,{expose:t,emit:n}){const o=d(!1),r=d(null),p=n,v=d(),m=d({}),b=d(!1),g=d([]),k=()=>{v.value.resetFields(),o.value=!1},x={name:[l("请输入定时任务名称")],category:[l("请选择分类")],actionClass:[l("请输入任务类名")],cronExpression:[l("请输入表达式")],sortCode:[l("请滑动排序")]};s(m,e=>{e.cronExpression&&r.value&&r.value.clearValidate()},{deep:!0});const U=()=>{v.value.validate().then(()=>{b.value=!0,C.submitForm(m.value,m.value.id).then(()=>{k(),p("successful")}).finally(()=>{b.value=!1})}).catch(()=>{})},N=u.dictList("JOB_CATEGORY");return t({onOpen:e=>{if(o.value=!0,m.value={sortCode:99},e){b.value=!0;const l={id:e.id};C.jobDetail(l).then(e=>{m.value=Object.assign({},e)}).finally(()=>{b.value=!1})}C.jobGetActionClass().then(e=>{g.value=e.map(e=>({value:e,label:e}))})}}),(l,a)=>{const t=i("a-input"),u=i("a-form-item"),n=i("a-select"),d=i("a-textarea"),p=i("a-input-number"),s=i("a-form"),j=i("a-button"),C=e;return y(),_(C,{title:w(m).id?"编辑定时任务":"增加定时任务",width:550,visible:w(o),"destroy-on-close":!0,onClose:k},{footer:f(()=>[c(j,{class:"xn-mr8",onClick:k},{default:f(()=>a[6]||(a[6]=[h("关闭")])),_:1}),c(j,{type:"primary",onClick:U,loading:w(b)},{default:f(()=>a[7]||(a[7]=[h("保存")])),_:1},8,["loading"])]),default:f(()=>[c(s,{ref_key:"formRef",ref:v,model:w(m),rules:x,layout:"vertical"},{default:f(()=>[c(u,{label:"定时任务名称：",name:"name"},{default:f(()=>[c(t,{value:w(m).name,"onUpdate:value":a[0]||(a[0]=e=>w(m).name=e),placeholder:"请输入定时任务名称","allow-clear":""},null,8,["value"])]),_:1}),c(u,{label:"分类：",name:"category"},{default:f(()=>[c(n,{value:w(m).category,"onUpdate:value":a[1]||(a[1]=e=>w(m).category=e),placeholder:"请选择分类",options:w(N)},null,8,["value","options"])]),_:1}),c(u,{label:"任务类名：",name:"actionClass"},{default:f(()=>[c(n,{value:w(m).actionClass,"onUpdate:value":a[2]||(a[2]=e=>w(m).actionClass=e),placeholder:"请选择任务类名",options:w(g)},null,8,["value","options"])]),_:1}),c(u,{ref_key:"cronExpressionRef",ref:r,label:"表达式：",name:"cronExpression"},{default:f(()=>[c(G,{modelValue:w(m).cronExpression,"onUpdate:modelValue":a[3]||(a[3]=e=>w(m).cronExpression=e)},null,8,["modelValue"])]),_:1},512),c(u,{label:"扩展参数：",name:"extJson"},{default:f(()=>[c(d,{value:w(m).extJson,"onUpdate:value":a[4]||(a[4]=e=>w(m).extJson=e),placeholder:"请输入定时扩展参数","auto-size":{minRows:2,maxRows:5},"allow-clear":""},null,8,["value"])]),_:1}),c(u,{label:"排序:",name:"sortCode"},{default:f(()=>[c(p,{class:"xn-wd",value:w(m).sortCode,"onUpdate:value":a[5]||(a[5]=e=>w(m).sortCode=e),max:100},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","visible"])}}}),K=Object.freeze(Object.defineProperty({__proto__:null,default:D},Symbol.toStringTag,{value:"Module"}));export{D as _,K as f,C as j};
