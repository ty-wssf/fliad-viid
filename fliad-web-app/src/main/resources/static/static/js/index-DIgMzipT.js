import{_ as e,t as a}from"./index-DcffTgQN.js";import{e as t}from"./emailApi-D7gkWVWt.js";import l from"./form-Dgc-uLDT.js";import n from"./detail-D-ceoYDj.js";import{k as r}from"./ant-design-vendor-CRFwT3Wn.js";import{d as o,f as i,a1 as s,U as d,V as c,k as u,a2 as p,u as f,G as m,Z as _,F as v,a3 as h,Y as y}from"./vue-vendor-BzDj5Url.js";import"./index-yhO5Pkur.js";import"./localEmailSend-Dr3FaEeP.js";import"./index-CwPjjw4u.js";import"./editor-vendor-gXJG3n-p.js";import"./index-DOuUB9GF.js";import"./formRules-B2bzcXv4.js";import"./fileApi-DnApfrPK.js";import"./aliyunEmailSend-DzUNCJey.js";import"./tencentEmailSend-2qlhHrwZ.js";const g=["onClick"],j=o({name:"devEmail"}),k=e(Object.assign(j,{setup(e){const o=i(null),j=i(),k=i(),x=i({}),b=i(),w=[{title:"邮件引擎",dataIndex:"engine",ellipsis:!0},{title:"发件人邮箱",dataIndex:"sendAccount"},{title:"发件人昵称",dataIndex:"sendUser"},{title:"接收人",dataIndex:"receiveAccounts",ellipsis:!0},{title:"邮件主题",dataIndex:"subject",ellipsis:!0},{title:"标签名",dataIndex:"tagName",ellipsis:!0},{title:"操作",dataIndex:"action",align:"center",width:"150px"}];let I=i([]);const C={alert:{show:!1,clear:()=>{I=i([])}},rowSelection:{onChange:(e,a)=>{I.value=e}}},E=e=>t.emailPage(Object.assign(e,x.value)).then(e=>e),S=()=>{k.value.resetFields(),o.value.refresh(!0)},N=a.dictList("EMAIL_ENGINE");return(e,a)=>{const i=s("a-select"),O=s("a-form-item"),R=s("a-col"),A=s("a-input"),L=s("SearchOutlined"),P=s("a-button"),U=s("redo-outlined"),D=s("a-row"),F=s("a-form"),G=s("a-card"),K=s("plus-outlined"),M=s("a-space"),T=s("a-divider"),z=s("a-popconfirm"),Q=s("s-table");return c(),d(v,null,[u(G,{bordered:!1,class:"xn-mb10"},{default:p(()=>[u(F,{ref_key:"searchFormRef",ref:k,name:"advanced_search",class:"ant-advanced-search-form",model:f(x)},{default:p(()=>[u(D,{gutter:24},{default:p(()=>[u(R,{span:8},{default:p(()=>[u(O,{name:"engine",label:"邮件引擎"},{default:p(()=>[u(i,{value:f(x).engine,"onUpdate:value":a[0]||(a[0]=e=>f(x).engine=e),options:f(N),placeholder:"请选择邮件引擎",getPopupContainer:e=>e.parentNode,"allow-clear":""},null,8,["value","options","getPopupContainer"])]),_:1})]),_:1}),u(R,{span:8},{default:p(()=>[u(O,{name:"searchKey",label:"主题关键词"},{default:p(()=>[u(A,{value:f(x).searchKey,"onUpdate:value":a[1]||(a[1]=e=>f(x).searchKey=e),placeholder:"请输入邮件主题关键词"},null,8,["value"])]),_:1})]),_:1}),u(R,{span:8},{default:p(()=>[u(P,{type:"primary",onClick:a[2]||(a[2]=e=>f(o).refresh(!0))},{icon:p(()=>[u(L)]),default:p(()=>[a[6]||(a[6]=m(" 查询 "))]),_:1}),u(P,{class:"snowy-button-left",onClick:S},{icon:p(()=>[u(U)]),default:p(()=>[a[7]||(a[7]=m(" 重置 "))]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),u(G,{bordered:!1},{default:p(()=>[u(Q,{ref_key:"tableRef",ref:o,columns:w,data:E,"expand-row-by-click":!0,alert:C.alert.show,bordered:"","row-key":e=>e.id,"row-selection":C.rowSelection},{operator:p(()=>[u(M,null,{default:p(()=>[u(P,{type:"primary",onClick:a[3]||(a[3]=e=>f(j).onOpen())},{icon:p(()=>[u(K)]),default:p(()=>[a[8]||(a[8]=m(" 发送邮件 "))]),_:1}),u(P,{danger:"",onClick:a[4]||(a[4]=e=>(()=>{if(I.value.length<1)return r.warning("请选择一条或多条数据"),!1;const e=I.value.map(e=>({id:e}));t.emailDelete(e).then(()=>{o.value.clearRefreshSelected()})})())},{default:p(()=>a[9]||(a[9]=[m("删除")])),_:1})]),_:1})]),bodyCell:p(({column:l,record:n})=>["engine"===l.dataIndex?(c(),d(v,{key:0},[m(h(e.$TOOL.dictTypeData("EMAIL_ENGINE",n.engine)),1)],64)):_("",!0),"action"===l.dataIndex?(c(),d(v,{key:1},[y("a",{onClick:e=>f(b).onOpen(n)},"详情",8,g),u(T,{type:"vertical"}),u(z,{title:"删除此邮件？",onConfirm:e=>(e=>{let a=[{id:e.id}];t.emailDelete(a).then(()=>{o.value.refresh(!0)})})(n)},{default:p(()=>[u(P,{type:"link",danger:"",size:"small"},{default:p(()=>a[10]||(a[10]=[m("删除")])),_:1})]),_:2},1032,["onConfirm"])],64)):_("",!0)]),_:1},8,["alert","row-key","row-selection"])]),_:1}),u(l,{ref_key:"formRef",ref:j,onSuccessful:a[5]||(a[5]=e=>f(o).refresh(!0))},null,512),u(n,{ref_key:"detailRef",ref:b},null,512)],64)}}}),[["__scopeId","data-v-2bde8328"]]);export{k as default};
