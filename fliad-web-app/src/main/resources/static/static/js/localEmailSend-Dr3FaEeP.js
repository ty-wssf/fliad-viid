import{_ as e}from"./index-CwPjjw4u.js";import{r as a}from"./formRules-B2bzcXv4.js";import{e as l}from"./emailApi-D7gkWVWt.js";import{f as o}from"./fileApi-DnApfrPK.js";import{k as t}from"./ant-design-vendor-CRFwT3Wn.js";import{d as n,f as u,a1 as s,a6 as i,V as d,a2 as r,k as c,Z as m,H as f,u as p,G as v}from"./vue-vendor-BzDj5Url.js";import"./editor-vendor-gXJG3n-p.js";import"./index-DOuUB9GF.js";import"./index-DcffTgQN.js";const j=n({name:"localEmailSend"}),T=Object.assign(j,{emits:{loadingStart:null,loadingEnd:null},setup(n,{expose:j,emit:T}){const h=u("TXT"),_=T,b=u(),g=u({}),x={receiveAccounts:[a("请输入接收人邮箱，多个逗号拼接")],subject:[a("请输入邮件主题")],content:[a("请输入邮件正文")]},U={fileUploadApi:e=>o.fileUploadDynamicReturnUrl(e).then(e=>Promise.resolve(e))};return j({send:()=>{b.value.validate().then(()=>{_("loadingStart"),"TXT"===h.value&&l.emailSendLocalTxt(g.value).then(()=>{t.success("发送成功")}).finally(()=>{_("loadingEnd")}),"HTML"===h.value&&l.emailSendLocalHtml(g.value).then(()=>{t.success("发送成功")}).finally(()=>{_("loadingEnd")})}).catch(()=>{})}}),(a,l)=>{const o=s("a-radio"),t=s("a-radio-group"),n=s("a-form-item"),u=s("a-textarea"),j=s("a-input"),T=s("a-form");return d(),i(T,{ref_key:"formRef",ref:b,model:p(g),rules:x,layout:"vertical"},{default:r(()=>[c(n,{label:"发送方式：",name:"sendType"},{default:r(()=>[c(t,{value:p(h),"onUpdate:value":l[0]||(l[0]=e=>f(h)?h.value=e:null)},{default:r(()=>[c(o,{value:"TXT"},{default:r(()=>l[5]||(l[5]=[v("纯文本")])),_:1}),c(o,{value:"HTML"},{default:r(()=>l[6]||(l[6]=[v("HTML")])),_:1})]),_:1},8,["value"])]),_:1}),c(n,{label:"接收人邮箱：",name:"receiveAccounts"},{default:r(()=>[c(u,{value:p(g).receiveAccounts,"onUpdate:value":l[1]||(l[1]=e=>p(g).receiveAccounts=e),placeholder:"请输入接收人邮箱，多个逗号拼接","auto-size":{minRows:2,maxRows:5}},null,8,["value"])]),_:1}),c(n,{label:"邮件主题：",name:"subject"},{default:r(()=>[c(j,{value:p(g).subject,"onUpdate:value":l[2]||(l[2]=e=>p(g).subject=e),placeholder:"请输入邮件主题","allow-clear":""},null,8,["value"])]),_:1}),"TXT"===p(h)?(d(),i(n,{key:0,label:"邮件正文",name:"content"},{default:r(()=>[c(u,{value:p(g).content,"onUpdate:value":l[3]||(l[3]=e=>p(g).content=e),placeholder:"请输入邮件正文","auto-size":{minRows:6,maxRows:6}},null,8,["value"])]),_:1})):m("",!0),"HTML"===p(h)?(d(),i(n,{key:1,label:"邮件正文",name:"content"},{default:r(()=>[c(e,{modelValue:p(g).content,"onUpdate:modelValue":l[4]||(l[4]=e=>p(g).content=e),placeholder:"请输入邮件正文",height:200,"file-upload-function":U.fileUploadApi},null,8,["modelValue","file-upload-function"])]),_:1})):m("",!0)]),_:1},8,["model"])}}});export{T as default};
