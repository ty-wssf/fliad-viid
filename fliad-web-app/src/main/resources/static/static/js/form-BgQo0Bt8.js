import{_ as e}from"./index-yhO5Pkur.js";import{_ as l}from"./index-ssHdgZ9Y.js";import{r as a}from"./formRules-B2bzcXv4.js";import{h as o}from"./index-DcffTgQN.js";import{I as t}from"./iconSelector-BS7wf_Ak.js";import{f as r,a1 as s,a6 as u,V as n,a2 as i,k as d,u as c,G as m}from"./vue-vendor-BzDj5Url.js";const f=(e,...l)=>o("/sys/module/"+e,...l),v={modulePage:e=>f("page",e,"get"),submitForm:(e,l=!1)=>f(l?"edit":"add",e),moduleDelete:e=>f("delete",e),moduleDetail:e=>f("detail",e,"get")},p={__name:"form",emits:{successful:null},setup(o,{expose:f,emit:p}){const _=r(!1),b=p,y=r();r([]);const C=r(),j=r({}),x=()=>{y.value.resetFields(),_.value=!1},h=e=>{e&&y.value.clearValidate("icon"),j.value.icon=e},g={title:[a("请输入模块名称")],icon:[a("请选择图标")],color:[a("请选择颜色")]},k=()=>{y.value.validate().then(()=>{v.submitForm(j.value,j.value.id).then(()=>{x(),b("successful")})}).catch(()=>{})};return f({onOpen:e=>{_.value=!0,j.value={sortCode:99},j.value=e?Object.assign({},e):{sortCode:99,color:"#1677FF"}}}),(a,o)=>{const r=s("a-input"),f=s("a-form-item"),v=s("a-button"),p=s("a-input-number"),b=s("a-form"),w=e;return n(),u(w,{title:c(j).id?"编辑模块":"增加模块",width:550,visible:c(_),"destroy-on-close":!0,onClose:x},{footer:i(()=>[d(v,{class:"xn-mr8",onClick:x},{default:i(()=>o[6]||(o[6]=[m("关闭")])),_:1}),d(v,{type:"primary",onClick:k},{default:i(()=>o[7]||(o[7]=[m("保存")])),_:1})]),default:i(()=>[d(b,{ref_key:"formRef",ref:y,model:c(j),rules:g,layout:"vertical"},{default:i(()=>[d(f,{label:"模块名称：",name:"title"},{default:i(()=>[d(r,{value:c(j).title,"onUpdate:value":o[0]||(o[0]=e=>c(j).title=e),placeholder:"请输入模块名称","allow-clear":""},null,8,["value"])]),_:1}),d(f,{label:"图标：",name:"icon"},{default:i(()=>[d(r,{value:c(j).icon,"onUpdate:value":o[1]||(o[1]=e=>c(j).icon=e),class:"xn-wdcalc-70",placeholder:"请选择图标","allow-clear":"",disabled:""},null,8,["value"]),d(v,{type:"primary",onClick:o[2]||(o[2]=e=>c(C).showIconModal(c(j).icon))},{default:i(()=>o[5]||(o[5]=[m("选择")])),_:1})]),_:1}),d(f,{label:"颜色：",name:"color"},{default:i(()=>[d(l,{value:c(j).color,"onUpdate:value":o[3]||(o[3]=e=>c(j).color=e)},null,8,["value"])]),_:1}),d(f,{label:"排序:",name:"sortCode"},{default:i(()=>[d(p,{class:"xn-wd",value:c(j).sortCode,"onUpdate:value":o[4]||(o[4]=e=>c(j).sortCode=e),max:100},null,8,["value"])]),_:1})]),_:1},8,["model"]),d(t,{ref_key:"iconSelectorRef",ref:C,onIconCallBack:h},null,512)]),_:1},8,["title","visible"])}}},_=Object.freeze(Object.defineProperty({__proto__:null,default:p},Symbol.toStringTag,{value:"Module"}));export{p as _,_ as f,v as m};
